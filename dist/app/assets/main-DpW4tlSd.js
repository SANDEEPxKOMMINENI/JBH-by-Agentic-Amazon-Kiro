(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=r(l);fetch(l.href,i)}})();function Bp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mz(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var l=!1;try{l=this instanceof n}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}),r}var am={},_u={},sk;function Cz(){if(sk)return _u;sk=1,_u.byteLength=p,_u.toByteArray=x,_u.fromByteArray=j;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,i=n.length;l<i;++l)e[l]=n[l],t[n.charCodeAt(l)]=l;t[45]=62,t[95]=63;function d(_){var A=_.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=_.indexOf("=");E===-1&&(E=A);var P=E===A?0:4-E%4;return[E,P]}function p(_){var A=d(_),E=A[0],P=A[1];return(E+P)*3/4-P}function g(_,A,E){return(A+E)*3/4-E}function x(_){var A,E=d(_),P=E[0],z=E[1],B=new r(g(_,P,z)),D=0,U=z>0?P-4:P,G;for(G=0;G<U;G+=4)A=t[_.charCodeAt(G)]<<18|t[_.charCodeAt(G+1)]<<12|t[_.charCodeAt(G+2)]<<6|t[_.charCodeAt(G+3)],B[D++]=A>>16&255,B[D++]=A>>8&255,B[D++]=A&255;return z===2&&(A=t[_.charCodeAt(G)]<<2|t[_.charCodeAt(G+1)]>>4,B[D++]=A&255),z===1&&(A=t[_.charCodeAt(G)]<<10|t[_.charCodeAt(G+1)]<<4|t[_.charCodeAt(G+2)]>>2,B[D++]=A>>8&255,B[D++]=A&255),B}function y(_){return e[_>>18&63]+e[_>>12&63]+e[_>>6&63]+e[_&63]}function w(_,A,E){for(var P,z=[],B=A;B<E;B+=3)P=(_[B]<<16&16711680)+(_[B+1]<<8&65280)+(_[B+2]&255),z.push(y(P));return z.join("")}function j(_){for(var A,E=_.length,P=E%3,z=[],B=16383,D=0,U=E-P;D<U;D+=B)z.push(w(_,D,D+B>U?U:D+B));return P===1?(A=_[E-1],z.push(e[A>>2]+e[A<<4&63]+"==")):P===2&&(A=(_[E-2]<<8)+_[E-1],z.push(e[A>>10]+e[A>>4&63]+e[A<<2&63]+"=")),z.join("")}return _u}var oh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ok;function Tz(){return ok||(ok=1,oh.read=function(e,t,r,n,l){var i,d,p=l*8-n-1,g=(1<<p)-1,x=g>>1,y=-7,w=r?l-1:0,j=r?-1:1,_=e[t+w];for(w+=j,i=_&(1<<-y)-1,_>>=-y,y+=p;y>0;i=i*256+e[t+w],w+=j,y-=8);for(d=i&(1<<-y)-1,i>>=-y,y+=n;y>0;d=d*256+e[t+w],w+=j,y-=8);if(i===0)i=1-x;else{if(i===g)return d?NaN:(_?-1:1)*(1/0);d=d+Math.pow(2,n),i=i-x}return(_?-1:1)*d*Math.pow(2,i-n)},oh.write=function(e,t,r,n,l,i){var d,p,g,x=i*8-l-1,y=(1<<x)-1,w=y>>1,j=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:i-1,A=n?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,d=y):(d=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-d))<1&&(d--,g*=2),d+w>=1?t+=j/g:t+=j*Math.pow(2,1-w),t*g>=2&&(d++,g/=2),d+w>=y?(p=0,d=y):d+w>=1?(p=(t*g-1)*Math.pow(2,l),d=d+w):(p=t*Math.pow(2,w-1)*Math.pow(2,l),d=0));l>=8;e[r+_]=p&255,_+=A,p/=256,l-=8);for(d=d<<l|p,x+=l;x>0;e[r+_]=d&255,_+=A,d/=256,x-=8);e[r+_-A]|=E*128}),oh}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ak;function Ji(){return ak||(ak=1,(function(e){const t=Cz(),r=Tz(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=p,e.SlowBuffer=B,e.INSPECT_MAX_BYTES=50;const l=2147483647;e.kMaxLength=l,p.TYPED_ARRAY_SUPPORT=i(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const Z=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(Z,q),Z.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function d(Z){if(Z>l)throw new RangeError('The value "'+Z+'" is invalid for option "size"');const q=new Uint8Array(Z);return Object.setPrototypeOf(q,p.prototype),q}function p(Z,q,V){if(typeof Z=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(Z)}return g(Z,q,V)}p.poolSize=8192;function g(Z,q,V){if(typeof Z=="string")return j(Z,q);if(ArrayBuffer.isView(Z))return A(Z);if(Z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z);if(me(Z,ArrayBuffer)||Z&&me(Z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(Z,SharedArrayBuffer)||Z&&me(Z.buffer,SharedArrayBuffer)))return E(Z,q,V);if(typeof Z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ie=Z.valueOf&&Z.valueOf();if(ie!=null&&ie!==Z)return p.from(ie,q,V);const ce=P(Z);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Z[Symbol.toPrimitive]=="function")return p.from(Z[Symbol.toPrimitive]("string"),q,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z)}p.from=function(Z,q,V){return g(Z,q,V)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array);function x(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be of type number');if(Z<0)throw new RangeError('The value "'+Z+'" is invalid for option "size"')}function y(Z,q,V){return x(Z),Z<=0?d(Z):q!==void 0?typeof V=="string"?d(Z).fill(q,V):d(Z).fill(q):d(Z)}p.alloc=function(Z,q,V){return y(Z,q,V)};function w(Z){return x(Z),d(Z<0?0:z(Z)|0)}p.allocUnsafe=function(Z){return w(Z)},p.allocUnsafeSlow=function(Z){return w(Z)};function j(Z,q){if((typeof q!="string"||q==="")&&(q="utf8"),!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const V=D(Z,q)|0;let ie=d(V);const ce=ie.write(Z,q);return ce!==V&&(ie=ie.slice(0,ce)),ie}function _(Z){const q=Z.length<0?0:z(Z.length)|0,V=d(q);for(let ie=0;ie<q;ie+=1)V[ie]=Z[ie]&255;return V}function A(Z){if(me(Z,Uint8Array)){const q=new Uint8Array(Z);return E(q.buffer,q.byteOffset,q.byteLength)}return _(Z)}function E(Z,q,V){if(q<0||Z.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<q+(V||0))throw new RangeError('"length" is outside of buffer bounds');let ie;return q===void 0&&V===void 0?ie=new Uint8Array(Z):V===void 0?ie=new Uint8Array(Z,q):ie=new Uint8Array(Z,q,V),Object.setPrototypeOf(ie,p.prototype),ie}function P(Z){if(p.isBuffer(Z)){const q=z(Z.length)|0,V=d(q);return V.length===0||Z.copy(V,0,0,q),V}if(Z.length!==void 0)return typeof Z.length!="number"||Me(Z.length)?d(0):_(Z);if(Z.type==="Buffer"&&Array.isArray(Z.data))return _(Z.data)}function z(Z){if(Z>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return Z|0}function B(Z){return+Z!=Z&&(Z=0),p.alloc(+Z)}p.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==p.prototype},p.compare=function(q,V){if(me(q,Uint8Array)&&(q=p.from(q,q.offset,q.byteLength)),me(V,Uint8Array)&&(V=p.from(V,V.offset,V.byteLength)),!p.isBuffer(q)||!p.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===V)return 0;let ie=q.length,ce=V.length;for(let be=0,fe=Math.min(ie,ce);be<fe;++be)if(q[be]!==V[be]){ie=q[be],ce=V[be];break}return ie<ce?-1:ce<ie?1:0},p.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(q,V){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return p.alloc(0);let ie;if(V===void 0)for(V=0,ie=0;ie<q.length;++ie)V+=q[ie].length;const ce=p.allocUnsafe(V);let be=0;for(ie=0;ie<q.length;++ie){let fe=q[ie];if(me(fe,Uint8Array))be+fe.length>ce.length?(p.isBuffer(fe)||(fe=p.from(fe)),fe.copy(ce,be)):Uint8Array.prototype.set.call(ce,fe,be);else if(p.isBuffer(fe))fe.copy(ce,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=fe.length}return ce};function D(Z,q){if(p.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||me(Z,ArrayBuffer))return Z.byteLength;if(typeof Z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Z);const V=Z.length,ie=arguments.length>2&&arguments[2]===!0;if(!ie&&V===0)return 0;let ce=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return Je(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return vt(Z).length;default:if(ce)return ie?-1:Je(Z).length;q=(""+q).toLowerCase(),ce=!0}}p.byteLength=D;function U(Z,q,V){let ie=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,q>>>=0,V<=q))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return S(this,q,V);case"utf8":case"utf-8":return h(this,q,V);case"ascii":return M(this,q,V);case"latin1":case"binary":return R(this,q,V);case"base64":return c(this,q,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,q,V);default:if(ie)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),ie=!0}}p.prototype._isBuffer=!0;function G(Z,q,V){const ie=Z[q];Z[q]=Z[V],Z[V]=ie}p.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<q;V+=2)G(this,V,V+1);return this},p.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<q;V+=4)G(this,V,V+3),G(this,V+1,V+2);return this},p.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<q;V+=8)G(this,V,V+7),G(this,V+1,V+6),G(this,V+2,V+5),G(this,V+3,V+4);return this},p.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?h(this,0,q):U.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(q){if(!p.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:p.compare(this,q)===0},p.prototype.inspect=function(){let q="";const V=e.INSPECT_MAX_BYTES;return q=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(q+=" ... "),"<Buffer "+q+">"},n&&(p.prototype[n]=p.prototype.inspect),p.prototype.compare=function(q,V,ie,ce,be){if(me(q,Uint8Array)&&(q=p.from(q,q.offset,q.byteLength)),!p.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(V===void 0&&(V=0),ie===void 0&&(ie=q?q.length:0),ce===void 0&&(ce=0),be===void 0&&(be=this.length),V<0||ie>q.length||ce<0||be>this.length)throw new RangeError("out of range index");if(ce>=be&&V>=ie)return 0;if(ce>=be)return-1;if(V>=ie)return 1;if(V>>>=0,ie>>>=0,ce>>>=0,be>>>=0,this===q)return 0;let fe=be-ce,Ae=ie-V;const ht=Math.min(fe,Ae),je=this.slice(ce,be),Ie=q.slice(V,ie);for(let pt=0;pt<ht;++pt)if(je[pt]!==Ie[pt]){fe=je[pt],Ae=Ie[pt];break}return fe<Ae?-1:Ae<fe?1:0};function $(Z,q,V,ie,ce){if(Z.length===0)return-1;if(typeof V=="string"?(ie=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,Me(V)&&(V=ce?0:Z.length-1),V<0&&(V=Z.length+V),V>=Z.length){if(ce)return-1;V=Z.length-1}else if(V<0)if(ce)V=0;else return-1;if(typeof q=="string"&&(q=p.from(q,ie)),p.isBuffer(q))return q.length===0?-1:re(Z,q,V,ie,ce);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(Z,q,V):Uint8Array.prototype.lastIndexOf.call(Z,q,V):re(Z,[q],V,ie,ce);throw new TypeError("val must be string, number or Buffer")}function re(Z,q,V,ie,ce){let be=1,fe=Z.length,Ae=q.length;if(ie!==void 0&&(ie=String(ie).toLowerCase(),ie==="ucs2"||ie==="ucs-2"||ie==="utf16le"||ie==="utf-16le")){if(Z.length<2||q.length<2)return-1;be=2,fe/=2,Ae/=2,V/=2}function ht(Ie,pt){return be===1?Ie[pt]:Ie.readUInt16BE(pt*be)}let je;if(ce){let Ie=-1;for(je=V;je<fe;je++)if(ht(Z,je)===ht(q,Ie===-1?0:je-Ie)){if(Ie===-1&&(Ie=je),je-Ie+1===Ae)return Ie*be}else Ie!==-1&&(je-=je-Ie),Ie=-1}else for(V+Ae>fe&&(V=fe-Ae),je=V;je>=0;je--){let Ie=!0;for(let pt=0;pt<Ae;pt++)if(ht(Z,je+pt)!==ht(q,pt)){Ie=!1;break}if(Ie)return je}return-1}p.prototype.includes=function(q,V,ie){return this.indexOf(q,V,ie)!==-1},p.prototype.indexOf=function(q,V,ie){return $(this,q,V,ie,!0)},p.prototype.lastIndexOf=function(q,V,ie){return $(this,q,V,ie,!1)};function Q(Z,q,V,ie){V=Number(V)||0;const ce=Z.length-V;ie?(ie=Number(ie),ie>ce&&(ie=ce)):ie=ce;const be=q.length;ie>be/2&&(ie=be/2);let fe;for(fe=0;fe<ie;++fe){const Ae=parseInt(q.substr(fe*2,2),16);if(Me(Ae))return fe;Z[V+fe]=Ae}return fe}function H(Z,q,V,ie){return he(Je(q,Z.length-V),Z,V,ie)}function Y(Z,q,V,ie){return he(Te(q),Z,V,ie)}function T(Z,q,V,ie){return he(vt(q),Z,V,ie)}function o(Z,q,V,ie){return he(ze(q,Z.length-V),Z,V,ie)}p.prototype.write=function(q,V,ie,ce){if(V===void 0)ce="utf8",ie=this.length,V=0;else if(ie===void 0&&typeof V=="string")ce=V,ie=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(ie)?(ie=ie>>>0,ce===void 0&&(ce="utf8")):(ce=ie,ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-V;if((ie===void 0||ie>be)&&(ie=be),q.length>0&&(ie<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");let fe=!1;for(;;)switch(ce){case"hex":return Q(this,q,V,ie);case"utf8":case"utf-8":return H(this,q,V,ie);case"ascii":case"latin1":case"binary":return Y(this,q,V,ie);case"base64":return T(this,q,V,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,q,V,ie);default:if(fe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),fe=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function c(Z,q,V){return q===0&&V===Z.length?t.fromByteArray(Z):t.fromByteArray(Z.slice(q,V))}function h(Z,q,V){V=Math.min(Z.length,V);const ie=[];let ce=q;for(;ce<V;){const be=Z[ce];let fe=null,Ae=be>239?4:be>223?3:be>191?2:1;if(ce+Ae<=V){let ht,je,Ie,pt;switch(Ae){case 1:be<128&&(fe=be);break;case 2:ht=Z[ce+1],(ht&192)===128&&(pt=(be&31)<<6|ht&63,pt>127&&(fe=pt));break;case 3:ht=Z[ce+1],je=Z[ce+2],(ht&192)===128&&(je&192)===128&&(pt=(be&15)<<12|(ht&63)<<6|je&63,pt>2047&&(pt<55296||pt>57343)&&(fe=pt));break;case 4:ht=Z[ce+1],je=Z[ce+2],Ie=Z[ce+3],(ht&192)===128&&(je&192)===128&&(Ie&192)===128&&(pt=(be&15)<<18|(ht&63)<<12|(je&63)<<6|Ie&63,pt>65535&&pt<1114112&&(fe=pt))}}fe===null?(fe=65533,Ae=1):fe>65535&&(fe-=65536,ie.push(fe>>>10&1023|55296),fe=56320|fe&1023),ie.push(fe),ce+=Ae}return b(ie)}const v=4096;function b(Z){const q=Z.length;if(q<=v)return String.fromCharCode.apply(String,Z);let V="",ie=0;for(;ie<q;)V+=String.fromCharCode.apply(String,Z.slice(ie,ie+=v));return V}function M(Z,q,V){let ie="";V=Math.min(Z.length,V);for(let ce=q;ce<V;++ce)ie+=String.fromCharCode(Z[ce]&127);return ie}function R(Z,q,V){let ie="";V=Math.min(Z.length,V);for(let ce=q;ce<V;++ce)ie+=String.fromCharCode(Z[ce]);return ie}function S(Z,q,V){const ie=Z.length;(!q||q<0)&&(q=0),(!V||V<0||V>ie)&&(V=ie);let ce="";for(let be=q;be<V;++be)ce+=pe[Z[be]];return ce}function a(Z,q,V){const ie=Z.slice(q,V);let ce="";for(let be=0;be<ie.length-1;be+=2)ce+=String.fromCharCode(ie[be]+ie[be+1]*256);return ce}p.prototype.slice=function(q,V){const ie=this.length;q=~~q,V=V===void 0?ie:~~V,q<0?(q+=ie,q<0&&(q=0)):q>ie&&(q=ie),V<0?(V+=ie,V<0&&(V=0)):V>ie&&(V=ie),V<q&&(V=q);const ce=this.subarray(q,V);return Object.setPrototypeOf(ce,p.prototype),ce};function k(Z,q,V){if(Z%1!==0||Z<0)throw new RangeError("offset is not uint");if(Z+q>V)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(q,V,ie){q=q>>>0,V=V>>>0,ie||k(q,V,this.length);let ce=this[q],be=1,fe=0;for(;++fe<V&&(be*=256);)ce+=this[q+fe]*be;return ce},p.prototype.readUintBE=p.prototype.readUIntBE=function(q,V,ie){q=q>>>0,V=V>>>0,ie||k(q,V,this.length);let ce=this[q+--V],be=1;for(;V>0&&(be*=256);)ce+=this[q+--V]*be;return ce},p.prototype.readUint8=p.prototype.readUInt8=function(q,V){return q=q>>>0,V||k(q,1,this.length),this[q]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(q,V){return q=q>>>0,V||k(q,2,this.length),this[q]|this[q+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(q,V){return q=q>>>0,V||k(q,2,this.length),this[q]<<8|this[q+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(q,V){return q=q>>>0,V||k(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(q,V){return q=q>>>0,V||k(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},p.prototype.readBigUInt64LE=ke(function(q){q=q>>>0,ue(q,"offset");const V=this[q],ie=this[q+7];(V===void 0||ie===void 0)&&Ce(q,this.length-8);const ce=V+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,be=this[++q]+this[++q]*2**8+this[++q]*2**16+ie*2**24;return BigInt(ce)+(BigInt(be)<<BigInt(32))}),p.prototype.readBigUInt64BE=ke(function(q){q=q>>>0,ue(q,"offset");const V=this[q],ie=this[q+7];(V===void 0||ie===void 0)&&Ce(q,this.length-8);const ce=V*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],be=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ie;return(BigInt(ce)<<BigInt(32))+BigInt(be)}),p.prototype.readIntLE=function(q,V,ie){q=q>>>0,V=V>>>0,ie||k(q,V,this.length);let ce=this[q],be=1,fe=0;for(;++fe<V&&(be*=256);)ce+=this[q+fe]*be;return be*=128,ce>=be&&(ce-=Math.pow(2,8*V)),ce},p.prototype.readIntBE=function(q,V,ie){q=q>>>0,V=V>>>0,ie||k(q,V,this.length);let ce=V,be=1,fe=this[q+--ce];for(;ce>0&&(be*=256);)fe+=this[q+--ce]*be;return be*=128,fe>=be&&(fe-=Math.pow(2,8*V)),fe},p.prototype.readInt8=function(q,V){return q=q>>>0,V||k(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},p.prototype.readInt16LE=function(q,V){q=q>>>0,V||k(q,2,this.length);const ie=this[q]|this[q+1]<<8;return ie&32768?ie|4294901760:ie},p.prototype.readInt16BE=function(q,V){q=q>>>0,V||k(q,2,this.length);const ie=this[q+1]|this[q]<<8;return ie&32768?ie|4294901760:ie},p.prototype.readInt32LE=function(q,V){return q=q>>>0,V||k(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},p.prototype.readInt32BE=function(q,V){return q=q>>>0,V||k(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},p.prototype.readBigInt64LE=ke(function(q){q=q>>>0,ue(q,"offset");const V=this[q],ie=this[q+7];(V===void 0||ie===void 0)&&Ce(q,this.length-8);const ce=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(ie<<24);return(BigInt(ce)<<BigInt(32))+BigInt(V+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),p.prototype.readBigInt64BE=ke(function(q){q=q>>>0,ue(q,"offset");const V=this[q],ie=this[q+7];(V===void 0||ie===void 0)&&Ce(q,this.length-8);const ce=(V<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(ce)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ie)}),p.prototype.readFloatLE=function(q,V){return q=q>>>0,V||k(q,4,this.length),r.read(this,q,!0,23,4)},p.prototype.readFloatBE=function(q,V){return q=q>>>0,V||k(q,4,this.length),r.read(this,q,!1,23,4)},p.prototype.readDoubleLE=function(q,V){return q=q>>>0,V||k(q,8,this.length),r.read(this,q,!0,52,8)},p.prototype.readDoubleBE=function(q,V){return q=q>>>0,V||k(q,8,this.length),r.read(this,q,!1,52,8)};function N(Z,q,V,ie,ce,be){if(!p.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>ce||q<be)throw new RangeError('"value" argument is out of bounds');if(V+ie>Z.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(q,V,ie,ce){if(q=+q,V=V>>>0,ie=ie>>>0,!ce){const Ae=Math.pow(2,8*ie)-1;N(this,q,V,ie,Ae,0)}let be=1,fe=0;for(this[V]=q&255;++fe<ie&&(be*=256);)this[V+fe]=q/be&255;return V+ie},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(q,V,ie,ce){if(q=+q,V=V>>>0,ie=ie>>>0,!ce){const Ae=Math.pow(2,8*ie)-1;N(this,q,V,ie,Ae,0)}let be=ie-1,fe=1;for(this[V+be]=q&255;--be>=0&&(fe*=256);)this[V+be]=q/fe&255;return V+ie},p.prototype.writeUint8=p.prototype.writeUInt8=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,1,255,0),this[V]=q&255,V+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,2,65535,0),this[V]=q&255,this[V+1]=q>>>8,V+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,2,65535,0),this[V]=q>>>8,this[V+1]=q&255,V+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,4,4294967295,0),this[V+3]=q>>>24,this[V+2]=q>>>16,this[V+1]=q>>>8,this[V]=q&255,V+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,4,4294967295,0),this[V]=q>>>24,this[V+1]=q>>>16,this[V+2]=q>>>8,this[V+3]=q&255,V+4};function L(Z,q,V,ie,ce){ee(q,ie,ce,Z,V,7);let be=Number(q&BigInt(4294967295));Z[V++]=be,be=be>>8,Z[V++]=be,be=be>>8,Z[V++]=be,be=be>>8,Z[V++]=be;let fe=Number(q>>BigInt(32)&BigInt(4294967295));return Z[V++]=fe,fe=fe>>8,Z[V++]=fe,fe=fe>>8,Z[V++]=fe,fe=fe>>8,Z[V++]=fe,V}function X(Z,q,V,ie,ce){ee(q,ie,ce,Z,V,7);let be=Number(q&BigInt(4294967295));Z[V+7]=be,be=be>>8,Z[V+6]=be,be=be>>8,Z[V+5]=be,be=be>>8,Z[V+4]=be;let fe=Number(q>>BigInt(32)&BigInt(4294967295));return Z[V+3]=fe,fe=fe>>8,Z[V+2]=fe,fe=fe>>8,Z[V+1]=fe,fe=fe>>8,Z[V]=fe,V+8}p.prototype.writeBigUInt64LE=ke(function(q,V=0){return L(this,q,V,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=ke(function(q,V=0){return X(this,q,V,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(q,V,ie,ce){if(q=+q,V=V>>>0,!ce){const ht=Math.pow(2,8*ie-1);N(this,q,V,ie,ht-1,-ht)}let be=0,fe=1,Ae=0;for(this[V]=q&255;++be<ie&&(fe*=256);)q<0&&Ae===0&&this[V+be-1]!==0&&(Ae=1),this[V+be]=(q/fe>>0)-Ae&255;return V+ie},p.prototype.writeIntBE=function(q,V,ie,ce){if(q=+q,V=V>>>0,!ce){const ht=Math.pow(2,8*ie-1);N(this,q,V,ie,ht-1,-ht)}let be=ie-1,fe=1,Ae=0;for(this[V+be]=q&255;--be>=0&&(fe*=256);)q<0&&Ae===0&&this[V+be+1]!==0&&(Ae=1),this[V+be]=(q/fe>>0)-Ae&255;return V+ie},p.prototype.writeInt8=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,1,127,-128),q<0&&(q=255+q+1),this[V]=q&255,V+1},p.prototype.writeInt16LE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,2,32767,-32768),this[V]=q&255,this[V+1]=q>>>8,V+2},p.prototype.writeInt16BE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,2,32767,-32768),this[V]=q>>>8,this[V+1]=q&255,V+2},p.prototype.writeInt32LE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,4,2147483647,-2147483648),this[V]=q&255,this[V+1]=q>>>8,this[V+2]=q>>>16,this[V+3]=q>>>24,V+4},p.prototype.writeInt32BE=function(q,V,ie){return q=+q,V=V>>>0,ie||N(this,q,V,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[V]=q>>>24,this[V+1]=q>>>16,this[V+2]=q>>>8,this[V+3]=q&255,V+4},p.prototype.writeBigInt64LE=ke(function(q,V=0){return L(this,q,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=ke(function(q,V=0){return X(this,q,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(Z,q,V,ie,ce,be){if(V+ie>Z.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function te(Z,q,V,ie,ce){return q=+q,V=V>>>0,ce||se(Z,q,V,4),r.write(Z,q,V,ie,23,4),V+4}p.prototype.writeFloatLE=function(q,V,ie){return te(this,q,V,!0,ie)},p.prototype.writeFloatBE=function(q,V,ie){return te(this,q,V,!1,ie)};function K(Z,q,V,ie,ce){return q=+q,V=V>>>0,ce||se(Z,q,V,8),r.write(Z,q,V,ie,52,8),V+8}p.prototype.writeDoubleLE=function(q,V,ie){return K(this,q,V,!0,ie)},p.prototype.writeDoubleBE=function(q,V,ie){return K(this,q,V,!1,ie)},p.prototype.copy=function(q,V,ie,ce){if(!p.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ie||(ie=0),!ce&&ce!==0&&(ce=this.length),V>=q.length&&(V=q.length),V||(V=0),ce>0&&ce<ie&&(ce=ie),ce===ie||q.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),q.length-V<ce-ie&&(ce=q.length-V+ie);const be=ce-ie;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,ie,ce):Uint8Array.prototype.set.call(q,this.subarray(ie,ce),V),be},p.prototype.fill=function(q,V,ie,ce){if(typeof q=="string"){if(typeof V=="string"?(ce=V,V=0,ie=this.length):typeof ie=="string"&&(ce=ie,ie=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!p.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(q.length===1){const fe=q.charCodeAt(0);(ce==="utf8"&&fe<128||ce==="latin1")&&(q=fe)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(V<0||this.length<V||this.length<ie)throw new RangeError("Out of range index");if(ie<=V)return this;V=V>>>0,ie=ie===void 0?this.length:ie>>>0,q||(q=0);let be;if(typeof q=="number")for(be=V;be<ie;++be)this[be]=q;else{const fe=p.isBuffer(q)?q:p.from(q,ce),Ae=fe.length;if(Ae===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(be=0;be<ie-V;++be)this[be+V]=fe[be%Ae]}return this};const J={};function ne(Z,q,V){J[Z]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Z}]`,this.stack,delete this.name}get code(){return Z}set code(ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ce,writable:!0})}toString(){return`${this.name} [${Z}]: ${this.message}`}}}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(Z){return Z?`${Z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(Z,q){return`The "${Z}" argument must be of type number. Received type ${typeof q}`},TypeError),ne("ERR_OUT_OF_RANGE",function(Z,q,V){let ie=`The value of "${Z}" is out of range.`,ce=V;return Number.isInteger(V)&&Math.abs(V)>2**32?ce=oe(String(V)):typeof V=="bigint"&&(ce=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(ce=oe(ce)),ce+="n"),ie+=` It must be ${q}. Received ${ce}`,ie},RangeError);function oe(Z){let q="",V=Z.length;const ie=Z[0]==="-"?1:0;for(;V>=ie+4;V-=3)q=`_${Z.slice(V-3,V)}${q}`;return`${Z.slice(0,V)}${q}`}function ae(Z,q,V){ue(q,"offset"),(Z[q]===void 0||Z[q+V]===void 0)&&Ce(q,Z.length-(V+1))}function ee(Z,q,V,ie,ce,be){if(Z>V||Z<q){const fe=typeof q=="bigint"?"n":"";let Ae;throw q===0||q===BigInt(0)?Ae=`>= 0${fe} and < 2${fe} ** ${(be+1)*8}${fe}`:Ae=`>= -(2${fe} ** ${(be+1)*8-1}${fe}) and < 2 ** ${(be+1)*8-1}${fe}`,new J.ERR_OUT_OF_RANGE("value",Ae,Z)}ae(ie,ce,be)}function ue(Z,q){if(typeof Z!="number")throw new J.ERR_INVALID_ARG_TYPE(q,"number",Z)}function Ce(Z,q,V){throw Math.floor(Z)!==Z?(ue(Z,V),new J.ERR_OUT_OF_RANGE("offset","an integer",Z)):q<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,Z)}const ve=/[^+/0-9A-Za-z-_]/g;function ge(Z){if(Z=Z.split("=")[0],Z=Z.trim().replace(ve,""),Z.length<2)return"";for(;Z.length%4!==0;)Z=Z+"=";return Z}function Je(Z,q){q=q||1/0;let V;const ie=Z.length;let ce=null;const be=[];for(let fe=0;fe<ie;++fe){if(V=Z.charCodeAt(fe),V>55295&&V<57344){if(!ce){if(V>56319){(q-=3)>-1&&be.push(239,191,189);continue}else if(fe+1===ie){(q-=3)>-1&&be.push(239,191,189);continue}ce=V;continue}if(V<56320){(q-=3)>-1&&be.push(239,191,189),ce=V;continue}V=(ce-55296<<10|V-56320)+65536}else ce&&(q-=3)>-1&&be.push(239,191,189);if(ce=null,V<128){if((q-=1)<0)break;be.push(V)}else if(V<2048){if((q-=2)<0)break;be.push(V>>6|192,V&63|128)}else if(V<65536){if((q-=3)<0)break;be.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((q-=4)<0)break;be.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return be}function Te(Z){const q=[];for(let V=0;V<Z.length;++V)q.push(Z.charCodeAt(V)&255);return q}function ze(Z,q){let V,ie,ce;const be=[];for(let fe=0;fe<Z.length&&!((q-=2)<0);++fe)V=Z.charCodeAt(fe),ie=V>>8,ce=V%256,be.push(ce),be.push(ie);return be}function vt(Z){return t.toByteArray(ge(Z))}function he(Z,q,V,ie){let ce;for(ce=0;ce<ie&&!(ce+V>=q.length||ce>=Z.length);++ce)q[ce+V]=Z[ce];return ce}function me(Z,q){return Z instanceof q||Z!=null&&Z.constructor!=null&&Z.constructor.name!=null&&Z.constructor.name===q.name}function Me(Z){return Z!==Z}const pe=(function(){const Z="0123456789abcdef",q=new Array(256);for(let V=0;V<16;++V){const ie=V*16;for(let ce=0;ce<16;++ce)q[ie+ce]=Z[V]+Z[ce]}return q})();function ke(Z){return typeof BigInt>"u"?_e:Z}function _e(){throw new Error("BigInt not supported")}})(am)),am}var K8=Ji();window.Buffer=K8.Buffer;window.global=window.global||window;var lm={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk;function Az(){if(lk)return Su;lk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,l,i){var d=null;if(i!==void 0&&(d=""+i),l.key!==void 0&&(d=""+l.key),"key"in l){i={};for(var p in l)p!=="key"&&(i[p]=l[p])}else i=l;return l=i.ref,{$$typeof:e,type:n,key:d,ref:l!==void 0?l:null,props:i}}return Su.Fragment=t,Su.jsx=r,Su.jsxs=r,Su}var ck;function Rz(){return ck||(ck=1,lm.exports=Az()),lm.exports}var s=Rz(),lr={},ah={exports:{}},lh={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var uk;function ar(){return uk||(uk=1,(function(e,t){var r=Ji(),n=r.Buffer;function l(d,p){for(var g in d)p[g]=d[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(l(r,t),t.Buffer=i);function i(d,p,g){return n(d,p,g)}i.prototype=Object.create(n.prototype),l(n,i),i.from=function(d,p,g){if(typeof d=="number")throw new TypeError("Argument must not be a number");return n(d,p,g)},i.alloc=function(d,p,g){if(typeof d!="number")throw new TypeError("Argument must be a number");var x=n(d);return p!==void 0?typeof g=="string"?x.fill(p,g):x.fill(p):x.fill(0),x},i.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n(d)},i.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}})(lh,lh.exports)),lh.exports}var dk;function rc(){if(dk)return ah.exports;dk=1;var e=65536,t=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=ar().Buffer,l=globalThis.crypto||globalThis.msCrypto;l&&l.getRandomValues?ah.exports=i:ah.exports=r;function i(d,p){if(d>t)throw new RangeError("requested too many random bytes");var g=n.allocUnsafe(d);if(d>0)if(d>e)for(var x=0;x<d;x+=e)l.getRandomValues(g.slice(x,x+e));else l.getRandomValues(g);return typeof p=="function"?process.nextTick(function(){p(null,g)}):g}return ah.exports}var ch={exports:{}},fk;function sr(){return fk||(fk=1,typeof Object.create=="function"?ch.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ch.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),ch.exports}const Ez={},Hh=Object.freeze(Object.defineProperty({__proto__:null,default:Ez},Symbol.toStringTag,{value:"Module"})),Fn=Mz(Hh);var cm,hk;function Y8(){return hk||(hk=1,cm=Fn.EventEmitter),cm}var um,pk;function Iz(){if(pk)return um;pk=1;function e(A,E){var P=Object.keys(A);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(A);E&&(z=z.filter(function(B){return Object.getOwnPropertyDescriptor(A,B).enumerable})),P.push.apply(P,z)}return P}function t(A){for(var E=1;E<arguments.length;E++){var P=arguments[E]!=null?arguments[E]:{};E%2?e(Object(P),!0).forEach(function(z){r(A,z,P[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(P)):e(Object(P)).forEach(function(z){Object.defineProperty(A,z,Object.getOwnPropertyDescriptor(P,z))})}return A}function r(A,E,P){return E=d(E),E in A?Object.defineProperty(A,E,{value:P,enumerable:!0,configurable:!0,writable:!0}):A[E]=P,A}function n(A,E){if(!(A instanceof E))throw new TypeError("Cannot call a class as a function")}function l(A,E){for(var P=0;P<E.length;P++){var z=E[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(A,d(z.key),z)}}function i(A,E,P){return E&&l(A.prototype,E),Object.defineProperty(A,"prototype",{writable:!1}),A}function d(A){var E=p(A,"string");return typeof E=="symbol"?E:String(E)}function p(A,E){if(typeof A!="object"||A===null)return A;var P=A[Symbol.toPrimitive];if(P!==void 0){var z=P.call(A,E);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}var g=Ji(),x=g.Buffer,y=Fn,w=y.inspect,j=w&&w.custom||"inspect";function _(A,E,P){x.prototype.copy.call(A,E,P)}return um=(function(){function A(){n(this,A),this.head=null,this.tail=null,this.length=0}return i(A,[{key:"push",value:function(P){var z={data:P,next:null};this.length>0?this.tail.next=z:this.head=z,this.tail=z,++this.length}},{key:"unshift",value:function(P){var z={data:P,next:this.head};this.length===0&&(this.tail=z),this.head=z,++this.length}},{key:"shift",value:function(){if(this.length!==0){var P=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,P}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(P){if(this.length===0)return"";for(var z=this.head,B=""+z.data;z=z.next;)B+=P+z.data;return B}},{key:"concat",value:function(P){if(this.length===0)return x.alloc(0);for(var z=x.allocUnsafe(P>>>0),B=this.head,D=0;B;)_(B.data,z,D),D+=B.data.length,B=B.next;return z}},{key:"consume",value:function(P,z){var B;return P<this.head.data.length?(B=this.head.data.slice(0,P),this.head.data=this.head.data.slice(P)):P===this.head.data.length?B=this.shift():B=z?this._getString(P):this._getBuffer(P),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(P){var z=this.head,B=1,D=z.data;for(P-=D.length;z=z.next;){var U=z.data,G=P>U.length?U.length:P;if(G===U.length?D+=U:D+=U.slice(0,P),P-=G,P===0){G===U.length?(++B,z.next?this.head=z.next:this.head=this.tail=null):(this.head=z,z.data=U.slice(G));break}++B}return this.length-=B,D}},{key:"_getBuffer",value:function(P){var z=x.allocUnsafe(P),B=this.head,D=1;for(B.data.copy(z),P-=B.data.length;B=B.next;){var U=B.data,G=P>U.length?U.length:P;if(U.copy(z,z.length-P,0,G),P-=G,P===0){G===U.length?(++D,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=U.slice(G));break}++D}return this.length-=D,z}},{key:j,value:function(P,z){return w(this,t(t({},z),{},{depth:0,customInspect:!1}))}}]),A})(),um}var dm,gk;function J8(){if(gk)return dm;gk=1;function e(d,p){var g=this,x=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return x||y?(p?p(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(l,this,d)):process.nextTick(l,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(w){!p&&w?g._writableState?g._writableState.errorEmitted?process.nextTick(r,g):(g._writableState.errorEmitted=!0,process.nextTick(t,g,w)):process.nextTick(t,g,w):p?(process.nextTick(r,g),p(w)):process.nextTick(r,g)}),this)}function t(d,p){l(d,p),r(d)}function r(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(d,p){d.emit("error",p)}function i(d,p){var g=d._readableState,x=d._writableState;g&&g.autoDestroy||x&&x.autoDestroy?d.destroy(p):d.emit("error",p)}return dm={destroy:e,undestroy:n,errorOrDestroy:i},dm}var fm={},mk;function nc(){if(mk)return fm;mk=1;function e(p,g){p.prototype=Object.create(g.prototype),p.prototype.constructor=p,p.__proto__=g}var t={};function r(p,g,x){x||(x=Error);function y(j,_,A){return typeof g=="string"?g:g(j,_,A)}var w=(function(j){e(_,j);function _(A,E,P){return j.call(this,y(A,E,P))||this}return _})(x);w.prototype.name=x.name,w.prototype.code=p,t[p]=w}function n(p,g){if(Array.isArray(p)){var x=p.length;return p=p.map(function(y){return String(y)}),x>2?"one of ".concat(g," ").concat(p.slice(0,x-1).join(", "),", or ")+p[x-1]:x===2?"one of ".concat(g," ").concat(p[0]," or ").concat(p[1]):"of ".concat(g," ").concat(p[0])}else return"of ".concat(g," ").concat(String(p))}function l(p,g,x){return p.substr(0,g.length)===g}function i(p,g,x){return(x===void 0||x>p.length)&&(x=p.length),p.substring(x-g.length,x)===g}function d(p,g,x){return typeof x!="number"&&(x=0),x+g.length>p.length?!1:p.indexOf(g,x)!==-1}return r("ERR_INVALID_OPT_VALUE",function(p,g){return'The value "'+g+'" is invalid for option "'+p+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(p,g,x){var y;typeof g=="string"&&l(g,"not ")?(y="must not be",g=g.replace(/^not /,"")):y="must be";var w;if(i(p," argument"))w="The ".concat(p," ").concat(y," ").concat(n(g,"type"));else{var j=d(p,".")?"property":"argument";w='The "'.concat(p,'" ').concat(j," ").concat(y," ").concat(n(g,"type"))}return w+=". Received type ".concat(typeof x),w},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),fm.codes=t,fm}var hm,yk;function Z8(){if(yk)return hm;yk=1;var e=nc().codes.ERR_INVALID_OPT_VALUE;function t(n,l,i){return n.highWaterMark!=null?n.highWaterMark:l?n[i]:null}function r(n,l,i,d){var p=t(l,d,i);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var g=d?i:"highWaterMark";throw new e(g,p)}return Math.floor(p)}return n.objectMode?16:16*1024}return hm={getHighWaterMark:r},hm}var pm,vk;function X8(){if(vk)return pm;vk=1,pm=e;function e(r,n){if(t("noDeprecation"))return r;var l=!1;function i(){if(!l){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),l=!0}return r.apply(this,arguments)}return i}function t(r){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return pm}var gm,xk;function Q8(){if(xk)return gm;xk=1,gm=Q;function e(te){var K=this;this.next=null,this.entry=null,this.finish=function(){se(K,te)}}var t;Q.WritableState=$;var r={deprecate:X8()},n=Y8(),l=Ji().Buffer,i=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(te){return l.from(te)}function p(te){return l.isBuffer(te)||te instanceof i}var g=J8(),x=Z8(),y=x.getHighWaterMark,w=nc().codes,j=w.ERR_INVALID_ARG_TYPE,_=w.ERR_METHOD_NOT_IMPLEMENTED,A=w.ERR_MULTIPLE_CALLBACK,E=w.ERR_STREAM_CANNOT_PIPE,P=w.ERR_STREAM_DESTROYED,z=w.ERR_STREAM_NULL_VALUES,B=w.ERR_STREAM_WRITE_AFTER_END,D=w.ERR_UNKNOWN_ENCODING,U=g.errorOrDestroy;sr()(Q,n);function G(){}function $(te,K,J){t=t||Gl(),te=te||{},typeof J!="boolean"&&(J=K instanceof t),this.objectMode=!!te.objectMode,J&&(this.objectMode=this.objectMode||!!te.writableObjectMode),this.highWaterMark=y(this,te,"writableHighWaterMark",J),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=te.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(oe){b(K,oe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=te.emitClose!==!1,this.autoDestroy=!!te.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}$.prototype.getBuffer=function(){for(var K=this.bufferedRequest,J=[];K;)J.push(K),K=K.next;return J},(function(){try{Object.defineProperty($.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var re;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(re=Function.prototype[Symbol.hasInstance],Object.defineProperty(Q,Symbol.hasInstance,{value:function(K){return re.call(this,K)?!0:this!==Q?!1:K&&K._writableState instanceof $}})):re=function(K){return K instanceof this};function Q(te){t=t||Gl();var K=this instanceof t;if(!K&&!re.call(Q,this))return new Q(te);this._writableState=new $(te,this,K),this.writable=!0,te&&(typeof te.write=="function"&&(this._write=te.write),typeof te.writev=="function"&&(this._writev=te.writev),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.final=="function"&&(this._final=te.final)),n.call(this)}Q.prototype.pipe=function(){U(this,new E)};function H(te,K){var J=new B;U(te,J),process.nextTick(K,J)}function Y(te,K,J,ne){var oe;return J===null?oe=new z:typeof J!="string"&&!K.objectMode&&(oe=new j("chunk",["string","Buffer"],J)),oe?(U(te,oe),process.nextTick(ne,oe),!1):!0}Q.prototype.write=function(te,K,J){var ne=this._writableState,oe=!1,ae=!ne.objectMode&&p(te);return ae&&!l.isBuffer(te)&&(te=d(te)),typeof K=="function"&&(J=K,K=null),ae?K="buffer":K||(K=ne.defaultEncoding),typeof J!="function"&&(J=G),ne.ending?H(this,J):(ae||Y(this,ne,te,J))&&(ne.pendingcb++,oe=o(this,ne,ae,te,K,J)),oe},Q.prototype.cork=function(){this._writableState.corked++},Q.prototype.uncork=function(){var te=this._writableState;te.corked&&(te.corked--,!te.writing&&!te.corked&&!te.bufferProcessing&&te.bufferedRequest&&S(this,te))},Q.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new D(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(Q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T(te,K,J){return!te.objectMode&&te.decodeStrings!==!1&&typeof K=="string"&&(K=l.from(K,J)),K}Object.defineProperty(Q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function o(te,K,J,ne,oe,ae){if(!J){var ee=T(K,ne,oe);ne!==ee&&(J=!0,oe="buffer",ne=ee)}var ue=K.objectMode?1:ne.length;K.length+=ue;var Ce=K.length<K.highWaterMark;if(Ce||(K.needDrain=!0),K.writing||K.corked){var ve=K.lastBufferedRequest;K.lastBufferedRequest={chunk:ne,encoding:oe,isBuf:J,callback:ae,next:null},ve?ve.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else c(te,K,!1,ue,ne,oe,ae);return Ce}function c(te,K,J,ne,oe,ae,ee){K.writelen=ne,K.writecb=ee,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new P("write")):J?te._writev(oe,K.onwrite):te._write(oe,ae,K.onwrite),K.sync=!1}function h(te,K,J,ne,oe){--K.pendingcb,J?(process.nextTick(oe,ne),process.nextTick(L,te,K),te._writableState.errorEmitted=!0,U(te,ne)):(oe(ne),te._writableState.errorEmitted=!0,U(te,ne),L(te,K))}function v(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}function b(te,K){var J=te._writableState,ne=J.sync,oe=J.writecb;if(typeof oe!="function")throw new A;if(v(J),K)h(te,J,ne,K,oe);else{var ae=a(J)||te.destroyed;!ae&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&S(te,J),ne?process.nextTick(M,te,J,ae,oe):M(te,J,ae,oe)}}function M(te,K,J,ne){J||R(te,K),K.pendingcb--,ne(),L(te,K)}function R(te,K){K.length===0&&K.needDrain&&(K.needDrain=!1,te.emit("drain"))}function S(te,K){K.bufferProcessing=!0;var J=K.bufferedRequest;if(te._writev&&J&&J.next){var ne=K.bufferedRequestCount,oe=new Array(ne),ae=K.corkedRequestsFree;ae.entry=J;for(var ee=0,ue=!0;J;)oe[ee]=J,J.isBuf||(ue=!1),J=J.next,ee+=1;oe.allBuffers=ue,c(te,K,!0,K.length,oe,"",ae.finish),K.pendingcb++,K.lastBufferedRequest=null,ae.next?(K.corkedRequestsFree=ae.next,ae.next=null):K.corkedRequestsFree=new e(K),K.bufferedRequestCount=0}else{for(;J;){var Ce=J.chunk,ve=J.encoding,ge=J.callback,Je=K.objectMode?1:Ce.length;if(c(te,K,!1,Je,Ce,ve,ge),J=J.next,K.bufferedRequestCount--,K.writing)break}J===null&&(K.lastBufferedRequest=null)}K.bufferedRequest=J,K.bufferProcessing=!1}Q.prototype._write=function(te,K,J){J(new _("_write()"))},Q.prototype._writev=null,Q.prototype.end=function(te,K,J){var ne=this._writableState;return typeof te=="function"?(J=te,te=null,K=null):typeof K=="function"&&(J=K,K=null),te!=null&&this.write(te,K),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||X(this,ne,J),this},Object.defineProperty(Q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(te){return te.ending&&te.length===0&&te.bufferedRequest===null&&!te.finished&&!te.writing}function k(te,K){te._final(function(J){K.pendingcb--,J&&U(te,J),K.prefinished=!0,te.emit("prefinish"),L(te,K)})}function N(te,K){!K.prefinished&&!K.finalCalled&&(typeof te._final=="function"&&!K.destroyed?(K.pendingcb++,K.finalCalled=!0,process.nextTick(k,te,K)):(K.prefinished=!0,te.emit("prefinish")))}function L(te,K){var J=a(K);if(J&&(N(te,K),K.pendingcb===0&&(K.finished=!0,te.emit("finish"),K.autoDestroy))){var ne=te._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&te.destroy()}return J}function X(te,K,J){K.ending=!0,L(te,K),J&&(K.finished?process.nextTick(J):te.once("finish",J)),K.ended=!0,te.writable=!1}function se(te,K,J){var ne=te.entry;for(te.entry=null;ne;){var oe=ne.callback;K.pendingcb--,oe(J),ne=ne.next}K.corkedRequestsFree.next=te}return Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),Q.prototype.destroy=g.destroy,Q.prototype._undestroy=g.undestroy,Q.prototype._destroy=function(te,K){K(te)},gm}var mm,bk;function Gl(){if(bk)return mm;bk=1;var e=Object.keys||function(x){var y=[];for(var w in x)y.push(w);return y};mm=d;var t=eT(),r=Q8();sr()(d,t);for(var n=e(r.prototype),l=0;l<n.length;l++){var i=n[l];d.prototype[i]||(d.prototype[i]=r.prototype[i])}function d(x){if(!(this instanceof d))return new d(x);t.call(this,x),r.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(x){x.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),mm}var ym={},uh={exports:{}},wk;function zz(){return wk||(wk=1,(function(e,t){var r=Ji(),n=r.Buffer;function l(d,p){for(var g in d)p[g]=d[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(l(r,t),t.Buffer=i);function i(d,p,g){return n(d,p,g)}l(n,i),i.from=function(d,p,g){if(typeof d=="number")throw new TypeError("Argument must not be a number");return n(d,p,g)},i.alloc=function(d,p,g){if(typeof d!="number")throw new TypeError("Argument must be a number");var x=n(d);return p!==void 0?typeof g=="string"?x.fill(p,g):x.fill(p):x.fill(0),x},i.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n(d)},i.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}})(uh,uh.exports)),uh.exports}var _k;function dd(){if(_k)return ym;_k=1;var e=zz().Buffer,t=e.isEncoding||function(z){switch(z=""+z,z&&z.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(z){if(!z)return"utf8";for(var B;;)switch(z){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return z;default:if(B)return;z=(""+z).toLowerCase(),B=!0}}function n(z){var B=r(z);if(typeof B!="string"&&(e.isEncoding===t||!t(z)))throw new Error("Unknown encoding: "+z);return B||z}ym.StringDecoder=l;function l(z){this.encoding=n(z);var B;switch(this.encoding){case"utf16le":this.text=w,this.end=j,B=4;break;case"utf8":this.fillLast=g,B=4;break;case"base64":this.text=_,this.end=A,B=3;break;default:this.write=E,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(B)}l.prototype.write=function(z){if(z.length===0)return"";var B,D;if(this.lastNeed){if(B=this.fillLast(z),B===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<z.length?B?B+this.text(z,D):this.text(z,D):B||""},l.prototype.end=y,l.prototype.text=x,l.prototype.fillLast=function(z){if(this.lastNeed<=z.length)return z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);z.copy(this.lastChar,this.lastTotal-this.lastNeed,0,z.length),this.lastNeed-=z.length};function i(z){return z<=127?0:z>>5===6?2:z>>4===14?3:z>>3===30?4:z>>6===2?-1:-2}function d(z,B,D){var U=B.length-1;if(U<D)return 0;var G=i(B[U]);return G>=0?(G>0&&(z.lastNeed=G-1),G):--U<D||G===-2?0:(G=i(B[U]),G>=0?(G>0&&(z.lastNeed=G-2),G):--U<D||G===-2?0:(G=i(B[U]),G>=0?(G>0&&(G===2?G=0:z.lastNeed=G-3),G):0))}function p(z,B,D){if((B[0]&192)!==128)return z.lastNeed=0,"";if(z.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return z.lastNeed=1,"";if(z.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return z.lastNeed=2,""}}function g(z){var B=this.lastTotal-this.lastNeed,D=p(this,z);if(D!==void 0)return D;if(this.lastNeed<=z.length)return z.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);z.copy(this.lastChar,B,0,z.length),this.lastNeed-=z.length}function x(z,B){var D=d(this,z,B);if(!this.lastNeed)return z.toString("utf8",B);this.lastTotal=D;var U=z.length-(D-this.lastNeed);return z.copy(this.lastChar,0,U),z.toString("utf8",B,U)}function y(z){var B=z&&z.length?this.write(z):"";return this.lastNeed?B+"":B}function w(z,B){if((z.length-B)%2===0){var D=z.toString("utf16le",B);if(D){var U=D.charCodeAt(D.length-1);if(U>=55296&&U<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=z[z.length-1],z.toString("utf16le",B,z.length-1)}function j(z){var B=z&&z.length?this.write(z):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,D)}return B}function _(z,B){var D=(z.length-B)%3;return D===0?z.toString("base64",B):(this.lastNeed=3-D,this.lastTotal=3,D===1?this.lastChar[0]=z[z.length-1]:(this.lastChar[0]=z[z.length-2],this.lastChar[1]=z[z.length-1]),z.toString("base64",B,z.length-D))}function A(z){var B=z&&z.length?this.write(z):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function E(z){return z.toString(this.encoding)}function P(z){return z&&z.length?this.write(z):""}return ym}var vm,Sk;function Gb(){if(Sk)return vm;Sk=1;var e=nc().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var d=!1;return function(){if(!d){d=!0;for(var p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];i.apply(this,g)}}}function r(){}function n(i){return i.setHeader&&typeof i.abort=="function"}function l(i,d,p){if(typeof d=="function")return l(i,null,d);d||(d={}),p=t(p||r);var g=d.readable||d.readable!==!1&&i.readable,x=d.writable||d.writable!==!1&&i.writable,y=function(){i.writable||j()},w=i._writableState&&i._writableState.finished,j=function(){x=!1,w=!0,g||p.call(i)},_=i._readableState&&i._readableState.endEmitted,A=function(){g=!1,_=!0,x||p.call(i)},E=function(D){p.call(i,D)},P=function(){var D;if(g&&!_)return(!i._readableState||!i._readableState.ended)&&(D=new e),p.call(i,D);if(x&&!w)return(!i._writableState||!i._writableState.ended)&&(D=new e),p.call(i,D)},z=function(){i.req.on("finish",j)};return n(i)?(i.on("complete",j),i.on("abort",P),i.req?z():i.on("request",z)):x&&!i._writableState&&(i.on("end",y),i.on("close",y)),i.on("end",A),i.on("finish",j),d.error!==!1&&i.on("error",E),i.on("close",P),function(){i.removeListener("complete",j),i.removeListener("abort",P),i.removeListener("request",z),i.req&&i.req.removeListener("finish",j),i.removeListener("end",y),i.removeListener("close",y),i.removeListener("finish",j),i.removeListener("end",A),i.removeListener("error",E),i.removeListener("close",P)}}return vm=l,vm}var xm,kk;function Bz(){if(kk)return xm;kk=1;var e;function t(D,U,G){return U=r(U),U in D?Object.defineProperty(D,U,{value:G,enumerable:!0,configurable:!0,writable:!0}):D[U]=G,D}function r(D){var U=n(D,"string");return typeof U=="symbol"?U:String(U)}function n(D,U){if(typeof D!="object"||D===null)return D;var G=D[Symbol.toPrimitive];if(G!==void 0){var $=G.call(D,U);if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(D)}var l=Gb(),i=Symbol("lastResolve"),d=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),x=Symbol("lastPromise"),y=Symbol("handlePromise"),w=Symbol("stream");function j(D,U){return{value:D,done:U}}function _(D){var U=D[i];if(U!==null){var G=D[w].read();G!==null&&(D[x]=null,D[i]=null,D[d]=null,U(j(G,!1)))}}function A(D){process.nextTick(_,D)}function E(D,U){return function(G,$){D.then(function(){if(U[g]){G(j(void 0,!0));return}U[y](G,$)},$)}}var P=Object.getPrototypeOf(function(){}),z=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var U=this,G=this[p];if(G!==null)return Promise.reject(G);if(this[g])return Promise.resolve(j(void 0,!0));if(this[w].destroyed)return new Promise(function(H,Y){process.nextTick(function(){U[p]?Y(U[p]):H(j(void 0,!0))})});var $=this[x],re;if($)re=new Promise(E($,this));else{var Q=this[w].read();if(Q!==null)return Promise.resolve(j(Q,!1));re=new Promise(this[y])}return this[x]=re,re}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var U=this;return new Promise(function(G,$){U[w].destroy(null,function(re){if(re){$(re);return}G(j(void 0,!0))})})}),e),P),B=function(U){var G,$=Object.create(z,(G={},t(G,w,{value:U,writable:!0}),t(G,i,{value:null,writable:!0}),t(G,d,{value:null,writable:!0}),t(G,p,{value:null,writable:!0}),t(G,g,{value:U._readableState.endEmitted,writable:!0}),t(G,y,{value:function(Q,H){var Y=$[w].read();Y?($[x]=null,$[i]=null,$[d]=null,Q(j(Y,!1))):($[i]=Q,$[d]=H)},writable:!0}),G));return $[x]=null,l(U,function(re){if(re&&re.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Q=$[d];Q!==null&&($[x]=null,$[i]=null,$[d]=null,Q(re)),$[p]=re;return}var H=$[i];H!==null&&($[x]=null,$[i]=null,$[d]=null,H(j(void 0,!0))),$[g]=!0}),U.on("readable",A.bind(null,$)),$};return xm=B,xm}var bm,jk;function Pz(){return jk||(jk=1,bm=function(){throw new Error("Readable.from is not available in the browser")}),bm}var wm,Mk;function eT(){if(Mk)return wm;Mk=1,wm=H;var e;H.ReadableState=Q,Fn.EventEmitter;var t=function(ee,ue){return ee.listeners(ue).length},r=Y8(),n=Ji().Buffer,l=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(ae){return n.from(ae)}function d(ae){return n.isBuffer(ae)||ae instanceof l}var p=Fn,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var x=Iz(),y=J8(),w=Z8(),j=w.getHighWaterMark,_=nc().codes,A=_.ERR_INVALID_ARG_TYPE,E=_.ERR_STREAM_PUSH_AFTER_EOF,P=_.ERR_METHOD_NOT_IMPLEMENTED,z=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,B,D,U;sr()(H,r);var G=y.errorOrDestroy,$=["error","close","destroy","pause","resume"];function re(ae,ee,ue){if(typeof ae.prependListener=="function")return ae.prependListener(ee,ue);!ae._events||!ae._events[ee]?ae.on(ee,ue):Array.isArray(ae._events[ee])?ae._events[ee].unshift(ue):ae._events[ee]=[ue,ae._events[ee]]}function Q(ae,ee,ue){e=e||Gl(),ae=ae||{},typeof ue!="boolean"&&(ue=ee instanceof e),this.objectMode=!!ae.objectMode,ue&&(this.objectMode=this.objectMode||!!ae.readableObjectMode),this.highWaterMark=j(this,ae,"readableHighWaterMark",ue),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ae.emitClose!==!1,this.autoDestroy=!!ae.autoDestroy,this.destroyed=!1,this.defaultEncoding=ae.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ae.encoding&&(B||(B=dd().StringDecoder),this.decoder=new B(ae.encoding),this.encoding=ae.encoding)}function H(ae){if(e=e||Gl(),!(this instanceof H))return new H(ae);var ee=this instanceof e;this._readableState=new Q(ae,this,ee),this.readable=!0,ae&&(typeof ae.read=="function"&&(this._read=ae.read),typeof ae.destroy=="function"&&(this._destroy=ae.destroy)),r.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ee){this._readableState&&(this._readableState.destroyed=ee)}}),H.prototype.destroy=y.destroy,H.prototype._undestroy=y.undestroy,H.prototype._destroy=function(ae,ee){ee(ae)},H.prototype.push=function(ae,ee){var ue=this._readableState,Ce;return ue.objectMode?Ce=!0:typeof ae=="string"&&(ee=ee||ue.defaultEncoding,ee!==ue.encoding&&(ae=n.from(ae,ee),ee=""),Ce=!0),Y(this,ae,ee,!1,Ce)},H.prototype.unshift=function(ae){return Y(this,ae,null,!0,!1)};function Y(ae,ee,ue,Ce,ve){g("readableAddChunk",ee);var ge=ae._readableState;if(ee===null)ge.reading=!1,b(ae,ge);else{var Je;if(ve||(Je=o(ge,ee)),Je)G(ae,Je);else if(ge.objectMode||ee&&ee.length>0)if(typeof ee!="string"&&!ge.objectMode&&Object.getPrototypeOf(ee)!==n.prototype&&(ee=i(ee)),Ce)ge.endEmitted?G(ae,new z):T(ae,ge,ee,!0);else if(ge.ended)G(ae,new E);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!ue?(ee=ge.decoder.write(ee),ge.objectMode||ee.length!==0?T(ae,ge,ee,!1):S(ae,ge)):T(ae,ge,ee,!1)}else Ce||(ge.reading=!1,S(ae,ge))}return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function T(ae,ee,ue,Ce){ee.flowing&&ee.length===0&&!ee.sync?(ee.awaitDrain=0,ae.emit("data",ue)):(ee.length+=ee.objectMode?1:ue.length,Ce?ee.buffer.unshift(ue):ee.buffer.push(ue),ee.needReadable&&M(ae)),S(ae,ee)}function o(ae,ee){var ue;return!d(ee)&&typeof ee!="string"&&ee!==void 0&&!ae.objectMode&&(ue=new A("chunk",["string","Buffer","Uint8Array"],ee)),ue}H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(ae){B||(B=dd().StringDecoder);var ee=new B(ae);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var ue=this._readableState.buffer.head,Ce="";ue!==null;)Ce+=ee.write(ue.data),ue=ue.next;return this._readableState.buffer.clear(),Ce!==""&&this._readableState.buffer.push(Ce),this._readableState.length=Ce.length,this};var c=1073741824;function h(ae){return ae>=c?ae=c:(ae--,ae|=ae>>>1,ae|=ae>>>2,ae|=ae>>>4,ae|=ae>>>8,ae|=ae>>>16,ae++),ae}function v(ae,ee){return ae<=0||ee.length===0&&ee.ended?0:ee.objectMode?1:ae!==ae?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(ae>ee.highWaterMark&&(ee.highWaterMark=h(ae)),ae<=ee.length?ae:ee.ended?ee.length:(ee.needReadable=!0,0))}H.prototype.read=function(ae){g("read",ae),ae=parseInt(ae,10);var ee=this._readableState,ue=ae;if(ae!==0&&(ee.emittedReadable=!1),ae===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return g("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?J(this):M(this),null;if(ae=v(ae,ee),ae===0&&ee.ended)return ee.length===0&&J(this),null;var Ce=ee.needReadable;g("need readable",Ce),(ee.length===0||ee.length-ae<ee.highWaterMark)&&(Ce=!0,g("length less than watermark",Ce)),ee.ended||ee.reading?(Ce=!1,g("reading or ended",Ce)):Ce&&(g("do read"),ee.reading=!0,ee.sync=!0,ee.length===0&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(ae=v(ue,ee)));var ve;return ae>0?ve=K(ae,ee):ve=null,ve===null?(ee.needReadable=ee.length<=ee.highWaterMark,ae=0):(ee.length-=ae,ee.awaitDrain=0),ee.length===0&&(ee.ended||(ee.needReadable=!0),ue!==ae&&ee.ended&&J(this)),ve!==null&&this.emit("data",ve),ve};function b(ae,ee){if(g("onEofChunk"),!ee.ended){if(ee.decoder){var ue=ee.decoder.end();ue&&ue.length&&(ee.buffer.push(ue),ee.length+=ee.objectMode?1:ue.length)}ee.ended=!0,ee.sync?M(ae):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,R(ae)))}}function M(ae){var ee=ae._readableState;g("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(g("emitReadable",ee.flowing),ee.emittedReadable=!0,process.nextTick(R,ae))}function R(ae){var ee=ae._readableState;g("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&(ee.length||ee.ended)&&(ae.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,te(ae)}function S(ae,ee){ee.readingMore||(ee.readingMore=!0,process.nextTick(a,ae,ee))}function a(ae,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){var ue=ee.length;if(g("maybeReadMore read 0"),ae.read(0),ue===ee.length)break}ee.readingMore=!1}H.prototype._read=function(ae){G(this,new P("_read()"))},H.prototype.pipe=function(ae,ee){var ue=this,Ce=this._readableState;switch(Ce.pipesCount){case 0:Ce.pipes=ae;break;case 1:Ce.pipes=[Ce.pipes,ae];break;default:Ce.pipes.push(ae);break}Ce.pipesCount+=1,g("pipe count=%d opts=%j",Ce.pipesCount,ee);var ve=(!ee||ee.end!==!1)&&ae!==process.stdout&&ae!==process.stderr,ge=ve?Te:_e;Ce.endEmitted?process.nextTick(ge):ue.once("end",ge),ae.on("unpipe",Je);function Je(Z,q){g("onunpipe"),Z===ue&&q&&q.hasUnpiped===!1&&(q.hasUnpiped=!0,he())}function Te(){g("onend"),ae.end()}var ze=k(ue);ae.on("drain",ze);var vt=!1;function he(){g("cleanup"),ae.removeListener("close",pe),ae.removeListener("finish",ke),ae.removeListener("drain",ze),ae.removeListener("error",Me),ae.removeListener("unpipe",Je),ue.removeListener("end",Te),ue.removeListener("end",_e),ue.removeListener("data",me),vt=!0,Ce.awaitDrain&&(!ae._writableState||ae._writableState.needDrain)&&ze()}ue.on("data",me);function me(Z){g("ondata");var q=ae.write(Z);g("dest.write",q),q===!1&&((Ce.pipesCount===1&&Ce.pipes===ae||Ce.pipesCount>1&&oe(Ce.pipes,ae)!==-1)&&!vt&&(g("false write response, pause",Ce.awaitDrain),Ce.awaitDrain++),ue.pause())}function Me(Z){g("onerror",Z),_e(),ae.removeListener("error",Me),t(ae,"error")===0&&G(ae,Z)}re(ae,"error",Me);function pe(){ae.removeListener("finish",ke),_e()}ae.once("close",pe);function ke(){g("onfinish"),ae.removeListener("close",pe),_e()}ae.once("finish",ke);function _e(){g("unpipe"),ue.unpipe(ae)}return ae.emit("pipe",ue),Ce.flowing||(g("pipe resume"),ue.resume()),ae};function k(ae){return function(){var ue=ae._readableState;g("pipeOnDrain",ue.awaitDrain),ue.awaitDrain&&ue.awaitDrain--,ue.awaitDrain===0&&t(ae,"data")&&(ue.flowing=!0,te(ae))}}H.prototype.unpipe=function(ae){var ee=this._readableState,ue={hasUnpiped:!1};if(ee.pipesCount===0)return this;if(ee.pipesCount===1)return ae&&ae!==ee.pipes?this:(ae||(ae=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,ae&&ae.emit("unpipe",this,ue),this);if(!ae){var Ce=ee.pipes,ve=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var ge=0;ge<ve;ge++)Ce[ge].emit("unpipe",this,{hasUnpiped:!1});return this}var Je=oe(ee.pipes,ae);return Je===-1?this:(ee.pipes.splice(Je,1),ee.pipesCount-=1,ee.pipesCount===1&&(ee.pipes=ee.pipes[0]),ae.emit("unpipe",this,ue),this)},H.prototype.on=function(ae,ee){var ue=r.prototype.on.call(this,ae,ee),Ce=this._readableState;return ae==="data"?(Ce.readableListening=this.listenerCount("readable")>0,Ce.flowing!==!1&&this.resume()):ae==="readable"&&!Ce.endEmitted&&!Ce.readableListening&&(Ce.readableListening=Ce.needReadable=!0,Ce.flowing=!1,Ce.emittedReadable=!1,g("on readable",Ce.length,Ce.reading),Ce.length?M(this):Ce.reading||process.nextTick(L,this)),ue},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(ae,ee){var ue=r.prototype.removeListener.call(this,ae,ee);return ae==="readable"&&process.nextTick(N,this),ue},H.prototype.removeAllListeners=function(ae){var ee=r.prototype.removeAllListeners.apply(this,arguments);return(ae==="readable"||ae===void 0)&&process.nextTick(N,this),ee};function N(ae){var ee=ae._readableState;ee.readableListening=ae.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:ae.listenerCount("data")>0&&ae.resume()}function L(ae){g("readable nexttick read 0"),ae.read(0)}H.prototype.resume=function(){var ae=this._readableState;return ae.flowing||(g("resume"),ae.flowing=!ae.readableListening,X(this,ae)),ae.paused=!1,this};function X(ae,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,process.nextTick(se,ae,ee))}function se(ae,ee){g("resume",ee.reading),ee.reading||ae.read(0),ee.resumeScheduled=!1,ae.emit("resume"),te(ae),ee.flowing&&!ee.reading&&ae.read(0)}H.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function te(ae){var ee=ae._readableState;for(g("flow",ee.flowing);ee.flowing&&ae.read()!==null;);}H.prototype.wrap=function(ae){var ee=this,ue=this._readableState,Ce=!1;ae.on("end",function(){if(g("wrapped end"),ue.decoder&&!ue.ended){var Je=ue.decoder.end();Je&&Je.length&&ee.push(Je)}ee.push(null)}),ae.on("data",function(Je){if(g("wrapped data"),ue.decoder&&(Je=ue.decoder.write(Je)),!(ue.objectMode&&Je==null)&&!(!ue.objectMode&&(!Je||!Je.length))){var Te=ee.push(Je);Te||(Ce=!0,ae.pause())}});for(var ve in ae)this[ve]===void 0&&typeof ae[ve]=="function"&&(this[ve]=(function(Te){return function(){return ae[Te].apply(ae,arguments)}})(ve));for(var ge=0;ge<$.length;ge++)ae.on($[ge],this.emit.bind(this,$[ge]));return this._read=function(Je){g("wrapped _read",Je),Ce&&(Ce=!1,ae.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return D===void 0&&(D=Bz()),D(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),H._fromList=K,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function K(ae,ee){if(ee.length===0)return null;var ue;return ee.objectMode?ue=ee.buffer.shift():!ae||ae>=ee.length?(ee.decoder?ue=ee.buffer.join(""):ee.buffer.length===1?ue=ee.buffer.first():ue=ee.buffer.concat(ee.length),ee.buffer.clear()):ue=ee.buffer.consume(ae,ee.decoder),ue}function J(ae){var ee=ae._readableState;g("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,process.nextTick(ne,ee,ae))}function ne(ae,ee){if(g("endReadableNT",ae.endEmitted,ae.length),!ae.endEmitted&&ae.length===0&&(ae.endEmitted=!0,ee.readable=!1,ee.emit("end"),ae.autoDestroy)){var ue=ee._writableState;(!ue||ue.autoDestroy&&ue.finished)&&ee.destroy()}}typeof Symbol=="function"&&(H.from=function(ae,ee){return U===void 0&&(U=Pz()),U(H,ae,ee)});function oe(ae,ee){for(var ue=0,Ce=ae.length;ue<Ce;ue++)if(ae[ue]===ee)return ue;return-1}return wm}var _m,Ck;function tT(){if(Ck)return _m;Ck=1,_m=p;var e=nc().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=e.ERR_TRANSFORM_WITH_LENGTH_0,i=Gl();sr()(p,i);function d(y,w){var j=this._transformState;j.transforming=!1;var _=j.writecb;if(_===null)return this.emit("error",new r);j.writechunk=null,j.writecb=null,w!=null&&this.push(w),_(y);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function p(y){if(!(this instanceof p))return new p(y);i.call(this,y),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",g)}function g(){var y=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(w,j){x(y,w,j)}):x(this,null,null)}p.prototype.push=function(y,w){return this._transformState.needTransform=!1,i.prototype.push.call(this,y,w)},p.prototype._transform=function(y,w,j){j(new t("_transform()"))},p.prototype._write=function(y,w,j){var _=this._transformState;if(_.writecb=j,_.writechunk=y,_.writeencoding=w,!_.transforming){var A=this._readableState;(_.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},p.prototype._read=function(y){var w=this._transformState;w.writechunk!==null&&!w.transforming?(w.transforming=!0,this._transform(w.writechunk,w.writeencoding,w.afterTransform)):w.needTransform=!0},p.prototype._destroy=function(y,w){i.prototype._destroy.call(this,y,function(j){w(j)})};function x(y,w,j){if(w)return y.emit("error",w);if(j!=null&&y.push(j),y._writableState.length)throw new l;if(y._transformState.transforming)throw new n;return y.push(null)}return _m}var Sm,Tk;function Nz(){if(Tk)return Sm;Tk=1,Sm=t;var e=tT();sr()(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,n,l){l(null,r)},Sm}var km,Ak;function Dz(){if(Ak)return km;Ak=1;var e;function t(j){var _=!1;return function(){_||(_=!0,j.apply(void 0,arguments))}}var r=nc().codes,n=r.ERR_MISSING_ARGS,l=r.ERR_STREAM_DESTROYED;function i(j){if(j)throw j}function d(j){return j.setHeader&&typeof j.abort=="function"}function p(j,_,A,E){E=t(E);var P=!1;j.on("close",function(){P=!0}),e===void 0&&(e=Gb()),e(j,{readable:_,writable:A},function(B){if(B)return E(B);P=!0,E()});var z=!1;return function(B){if(!P&&!z){if(z=!0,d(j))return j.abort();if(typeof j.destroy=="function")return j.destroy();E(B||new l("pipe"))}}}function g(j){j()}function x(j,_){return j.pipe(_)}function y(j){return!j.length||typeof j[j.length-1]!="function"?i:j.pop()}function w(){for(var j=arguments.length,_=new Array(j),A=0;A<j;A++)_[A]=arguments[A];var E=y(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new n("streams");var P,z=_.map(function(B,D){var U=D<_.length-1,G=D>0;return p(B,U,G,function($){P||(P=$),$&&z.forEach(g),!U&&(z.forEach(g),E(P))})});return _.reduce(x)}return km=w,km}var jm,Rk;function rT(){if(Rk)return jm;Rk=1,jm=r;var e=Fn.EventEmitter,t=sr();t(r,e),r.Readable=eT(),r.Writable=Q8(),r.Duplex=Gl(),r.Transform=tT(),r.PassThrough=Nz(),r.finished=Gb(),r.pipeline=Dz(),r.Stream=r;function r(){e.call(this)}return r.prototype.pipe=function(n,l){var i=this;function d(_){n.writable&&n.write(_)===!1&&i.pause&&i.pause()}i.on("data",d);function p(){i.readable&&i.resume&&i.resume()}n.on("drain",p),!n._isStdio&&(!l||l.end!==!1)&&(i.on("end",x),i.on("close",y));var g=!1;function x(){g||(g=!0,n.end())}function y(){g||(g=!0,typeof n.destroy=="function"&&n.destroy())}function w(_){if(j(),e.listenerCount(this,"error")===0)throw _}i.on("error",w),n.on("error",w);function j(){i.removeListener("data",d),n.removeListener("drain",p),i.removeListener("end",x),i.removeListener("close",y),i.removeListener("error",w),n.removeListener("error",w),i.removeListener("end",j),i.removeListener("close",j),n.removeListener("close",j)}return i.on("end",j),i.on("close",j),n.on("close",j),n.emit("pipe",i),n},jm}var Mm,Ek;function Lz(){if(Ek)return Mm;Ek=1;var e=ar().Buffer,t=rT().Transform,r=sr();function n(p){t.call(this),this._block=e.allocUnsafe(p),this._blockSize=p,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(n,t),n.prototype._transform=function(p,g,x){var y=null;try{this.update(p,g)}catch(w){y=w}x(y)},n.prototype._flush=function(p){var g=null;try{this.push(this.digest())}catch(x){g=x}p(g)};var l=typeof Uint8Array<"u",i=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);function d(p,g){if(p instanceof e)return p;if(typeof p=="string")return e.from(p,g);if(i&&ArrayBuffer.isView(p)){if(p.byteLength===0)return e.alloc(0);var x=e.from(p.buffer,p.byteOffset,p.byteLength);if(x.byteLength===p.byteLength)return x}if(l&&p instanceof Uint8Array||e.isBuffer(p)&&p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return e.from(p);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return n.prototype.update=function(p,g){if(this._finalized)throw new Error("Digest already called");p=d(p,g);for(var x=this._block,y=0;this._blockOffset+p.length-y>=this._blockSize;){for(var w=this._blockOffset;w<this._blockSize;)x[w++]=p[y++];this._update(),this._blockOffset=0}for(;y<p.length;)x[this._blockOffset++]=p[y++];for(var j=0,_=p.length*8;_>0;++j)this._length[j]+=_,_=this._length[j]/4294967296|0,_>0&&(this._length[j]-=4294967296*_);return this},n.prototype._update=function(){throw new Error("_update is not implemented")},n.prototype.digest=function(p){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var g=this._digest();p!==void 0&&(g=g.toString(p)),this._block.fill(0),this._blockOffset=0;for(var x=0;x<4;++x)this._length[x]=0;return g},n.prototype._digest=function(){throw new Error("_digest is not implemented")},Mm=n,Mm}var Cm,Ik;function Kb(){if(Ik)return Cm;Ik=1;var e=sr(),t=Lz(),r=ar().Buffer,n=new Array(16);function l(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}e(l,t),l.prototype._update=function(){for(var y=n,w=0;w<16;++w)y[w]=this._block.readInt32LE(w*4);var j=this._a,_=this._b,A=this._c,E=this._d;j=d(j,_,A,E,y[0],3614090360,7),E=d(E,j,_,A,y[1],3905402710,12),A=d(A,E,j,_,y[2],606105819,17),_=d(_,A,E,j,y[3],3250441966,22),j=d(j,_,A,E,y[4],4118548399,7),E=d(E,j,_,A,y[5],1200080426,12),A=d(A,E,j,_,y[6],2821735955,17),_=d(_,A,E,j,y[7],4249261313,22),j=d(j,_,A,E,y[8],1770035416,7),E=d(E,j,_,A,y[9],2336552879,12),A=d(A,E,j,_,y[10],4294925233,17),_=d(_,A,E,j,y[11],2304563134,22),j=d(j,_,A,E,y[12],1804603682,7),E=d(E,j,_,A,y[13],4254626195,12),A=d(A,E,j,_,y[14],2792965006,17),_=d(_,A,E,j,y[15],1236535329,22),j=p(j,_,A,E,y[1],4129170786,5),E=p(E,j,_,A,y[6],3225465664,9),A=p(A,E,j,_,y[11],643717713,14),_=p(_,A,E,j,y[0],3921069994,20),j=p(j,_,A,E,y[5],3593408605,5),E=p(E,j,_,A,y[10],38016083,9),A=p(A,E,j,_,y[15],3634488961,14),_=p(_,A,E,j,y[4],3889429448,20),j=p(j,_,A,E,y[9],568446438,5),E=p(E,j,_,A,y[14],3275163606,9),A=p(A,E,j,_,y[3],4107603335,14),_=p(_,A,E,j,y[8],1163531501,20),j=p(j,_,A,E,y[13],2850285829,5),E=p(E,j,_,A,y[2],4243563512,9),A=p(A,E,j,_,y[7],1735328473,14),_=p(_,A,E,j,y[12],2368359562,20),j=g(j,_,A,E,y[5],4294588738,4),E=g(E,j,_,A,y[8],2272392833,11),A=g(A,E,j,_,y[11],1839030562,16),_=g(_,A,E,j,y[14],4259657740,23),j=g(j,_,A,E,y[1],2763975236,4),E=g(E,j,_,A,y[4],1272893353,11),A=g(A,E,j,_,y[7],4139469664,16),_=g(_,A,E,j,y[10],3200236656,23),j=g(j,_,A,E,y[13],681279174,4),E=g(E,j,_,A,y[0],3936430074,11),A=g(A,E,j,_,y[3],3572445317,16),_=g(_,A,E,j,y[6],76029189,23),j=g(j,_,A,E,y[9],3654602809,4),E=g(E,j,_,A,y[12],3873151461,11),A=g(A,E,j,_,y[15],530742520,16),_=g(_,A,E,j,y[2],3299628645,23),j=x(j,_,A,E,y[0],4096336452,6),E=x(E,j,_,A,y[7],1126891415,10),A=x(A,E,j,_,y[14],2878612391,15),_=x(_,A,E,j,y[5],4237533241,21),j=x(j,_,A,E,y[12],1700485571,6),E=x(E,j,_,A,y[3],2399980690,10),A=x(A,E,j,_,y[10],4293915773,15),_=x(_,A,E,j,y[1],2240044497,21),j=x(j,_,A,E,y[8],1873313359,6),E=x(E,j,_,A,y[15],4264355552,10),A=x(A,E,j,_,y[6],2734768916,15),_=x(_,A,E,j,y[13],1309151649,21),j=x(j,_,A,E,y[4],4149444226,6),E=x(E,j,_,A,y[11],3174756917,10),A=x(A,E,j,_,y[2],718787259,15),_=x(_,A,E,j,y[9],3951481745,21),this._a=this._a+j|0,this._b=this._b+_|0,this._c=this._c+A|0,this._d=this._d+E|0},l.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=r.allocUnsafe(16);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y};function i(y,w){return y<<w|y>>>32-w}function d(y,w,j,_,A,E,P){return i(y+(w&j|~w&_)+A+E|0,P)+w|0}function p(y,w,j,_,A,E,P){return i(y+(w&_|j&~_)+A+E|0,P)+w|0}function g(y,w,j,_,A,E,P){return i(y+(w^j^_)+A+E|0,P)+w|0}function x(y,w,j,_,A,E,P){return i(y+(j^(w|~_))+A+E|0,P)+w|0}return Cm=l,Cm}var Tm,zk;function Oz(){if(zk)return Tm;zk=1;var e={}.toString;return Tm=Array.isArray||function(t){return e.call(t)=="[object Array]"},Tm}var Am,Bk;function Cd(){return Bk||(Bk=1,Am=TypeError),Am}var Rm,Pk;function nT(){return Pk||(Pk=1,Rm=Object),Rm}var Em,Nk;function Fz(){return Nk||(Nk=1,Em=Error),Em}var Im,Dk;function Uz(){return Dk||(Dk=1,Im=EvalError),Im}var zm,Lk;function $z(){return Lk||(Lk=1,zm=RangeError),zm}var Bm,Ok;function qz(){return Ok||(Ok=1,Bm=ReferenceError),Bm}var Pm,Fk;function iT(){return Fk||(Fk=1,Pm=SyntaxError),Pm}var Nm,Uk;function Hz(){return Uk||(Uk=1,Nm=URIError),Nm}var Dm,$k;function Wz(){return $k||($k=1,Dm=Math.abs),Dm}var Lm,qk;function Vz(){return qk||(qk=1,Lm=Math.floor),Lm}var Om,Hk;function Gz(){return Hk||(Hk=1,Om=Math.max),Om}var Fm,Wk;function Kz(){return Wk||(Wk=1,Fm=Math.min),Fm}var Um,Vk;function Yz(){return Vk||(Vk=1,Um=Math.pow),Um}var $m,Gk;function Jz(){return Gk||(Gk=1,$m=Math.round),$m}var qm,Kk;function Zz(){return Kk||(Kk=1,qm=Number.isNaN||function(t){return t!==t}),qm}var Hm,Yk;function Xz(){if(Yk)return Hm;Yk=1;var e=Zz();return Hm=function(r){return e(r)||r===0?r:r<0?-1:1},Hm}var Wm,Jk;function Qz(){return Jk||(Jk=1,Wm=Object.getOwnPropertyDescriptor),Wm}var Vm,Zk;function Td(){if(Zk)return Vm;Zk=1;var e=Qz();if(e)try{e([],"length")}catch{e=null}return Vm=e,Vm}var Gm,Xk;function Pp(){if(Xk)return Gm;Xk=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Gm=e,Gm}var Km,Qk;function sT(){return Qk||(Qk=1,Km=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var l=42;t[r]=l;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var p=Object.getOwnPropertyDescriptor(t,r);if(p.value!==l||p.enumerable!==!0)return!1}return!0}),Km}var Ym,e3;function eB(){if(e3)return Ym;e3=1;var e=typeof Symbol<"u"&&Symbol,t=sT();return Ym=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Ym}var Jm,t3;function oT(){return t3||(t3=1,Jm=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Jm}var Zm,r3;function aT(){if(r3)return Zm;r3=1;var e=nT();return Zm=e.getPrototypeOf||null,Zm}var Xm,n3;function tB(){if(n3)return Xm;n3=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,n="[object Function]",l=function(g,x){for(var y=[],w=0;w<g.length;w+=1)y[w]=g[w];for(var j=0;j<x.length;j+=1)y[j+g.length]=x[j];return y},i=function(g,x){for(var y=[],w=x,j=0;w<g.length;w+=1,j+=1)y[j]=g[w];return y},d=function(p,g){for(var x="",y=0;y<p.length;y+=1)x+=p[y],y+1<p.length&&(x+=g);return x};return Xm=function(g){var x=this;if(typeof x!="function"||t.apply(x)!==n)throw new TypeError(e+x);for(var y=i(arguments,1),w,j=function(){if(this instanceof w){var z=x.apply(this,l(y,arguments));return Object(z)===z?z:this}return x.apply(g,l(y,arguments))},_=r(0,x.length-y.length),A=[],E=0;E<_;E++)A[E]="$"+E;if(w=Function("binder","return function ("+d(A,",")+"){ return binder.apply(this,arguments); }")(j),x.prototype){var P=function(){};P.prototype=x.prototype,w.prototype=new P,P.prototype=null}return w},Xm}var Qm,i3;function Ad(){if(i3)return Qm;i3=1;var e=tB();return Qm=Function.prototype.bind||e,Qm}var ey,s3;function Yb(){return s3||(s3=1,ey=Function.prototype.call),ey}var ty,o3;function Jb(){return o3||(o3=1,ty=Function.prototype.apply),ty}var ry,a3;function rB(){return a3||(a3=1,ry=typeof Reflect<"u"&&Reflect&&Reflect.apply),ry}var ny,l3;function lT(){if(l3)return ny;l3=1;var e=Ad(),t=Jb(),r=Yb(),n=rB();return ny=n||e.call(r,t),ny}var iy,c3;function Zb(){if(c3)return iy;c3=1;var e=Ad(),t=Cd(),r=Yb(),n=lT();return iy=function(i){if(i.length<1||typeof i[0]!="function")throw new t("a function is required");return n(e,r,i)},iy}var sy,u3;function nB(){if(u3)return sy;u3=1;var e=Zb(),t=Td(),r;try{r=[].__proto__===Array.prototype}catch(d){if(!d||typeof d!="object"||!("code"in d)||d.code!=="ERR_PROTO_ACCESS")throw d}var n=!!r&&t&&t(Object.prototype,"__proto__"),l=Object,i=l.getPrototypeOf;return sy=n&&typeof n.get=="function"?e([n.get]):typeof i=="function"?function(p){return i(p==null?p:l(p))}:!1,sy}var oy,d3;function cT(){if(d3)return oy;d3=1;var e=oT(),t=aT(),r=nB();return oy=e?function(l){return e(l)}:t?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return t(l)}:r?function(l){return r(l)}:null,oy}var ay,f3;function iB(){if(f3)return ay;f3=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Ad();return ay=r.call(e,t),ay}var ly,h3;function uT(){if(h3)return ly;h3=1;var e,t=nT(),r=Fz(),n=Uz(),l=$z(),i=qz(),d=iT(),p=Cd(),g=Hz(),x=Wz(),y=Vz(),w=Gz(),j=Kz(),_=Yz(),A=Jz(),E=Xz(),P=Function,z=function(ne){try{return P('"use strict"; return ('+ne+").constructor;")()}catch{}},B=Td(),D=Pp(),U=function(){throw new p},G=B?(function(){try{return arguments.callee,U}catch{try{return B(arguments,"callee").get}catch{return U}}})():U,$=eB()(),re=cT(),Q=aT(),H=oT(),Y=Jb(),T=Yb(),o={},c=typeof Uint8Array>"u"||!re?e:re(Uint8Array),h={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":$&&re?re([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":o,"%AsyncIteratorPrototype%":o,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":P,"%GeneratorFunction%":o,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$&&re?re(re([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$||!re?e:re(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":B,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":l,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$||!re?e:re(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$&&re?re(""[Symbol.iterator]()):e,"%Symbol%":$?Symbol:e,"%SyntaxError%":d,"%ThrowTypeError%":G,"%TypedArray%":c,"%TypeError%":p,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":g,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":T,"%Function.prototype.apply%":Y,"%Object.defineProperty%":D,"%Object.getPrototypeOf%":Q,"%Math.abs%":x,"%Math.floor%":y,"%Math.max%":w,"%Math.min%":j,"%Math.pow%":_,"%Math.round%":A,"%Math.sign%":E,"%Reflect.getPrototypeOf%":H};if(re)try{null.error}catch(ne){var v=re(re(ne));h["%Error.prototype%"]=v}var b=function ne(oe){var ae;if(oe==="%AsyncFunction%")ae=z("async function () {}");else if(oe==="%GeneratorFunction%")ae=z("function* () {}");else if(oe==="%AsyncGeneratorFunction%")ae=z("async function* () {}");else if(oe==="%AsyncGenerator%"){var ee=ne("%AsyncGeneratorFunction%");ee&&(ae=ee.prototype)}else if(oe==="%AsyncIteratorPrototype%"){var ue=ne("%AsyncGenerator%");ue&&re&&(ae=re(ue.prototype))}return h[oe]=ae,ae},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=Ad(),S=iB(),a=R.call(T,Array.prototype.concat),k=R.call(Y,Array.prototype.splice),N=R.call(T,String.prototype.replace),L=R.call(T,String.prototype.slice),X=R.call(T,RegExp.prototype.exec),se=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,te=/\\(\\)?/g,K=function(oe){var ae=L(oe,0,1),ee=L(oe,-1);if(ae==="%"&&ee!=="%")throw new d("invalid intrinsic syntax, expected closing `%`");if(ee==="%"&&ae!=="%")throw new d("invalid intrinsic syntax, expected opening `%`");var ue=[];return N(oe,se,function(Ce,ve,ge,Je){ue[ue.length]=ge?N(Je,te,"$1"):ve||Ce}),ue},J=function(oe,ae){var ee=oe,ue;if(S(M,ee)&&(ue=M[ee],ee="%"+ue[0]+"%"),S(h,ee)){var Ce=h[ee];if(Ce===o&&(Ce=b(ee)),typeof Ce>"u"&&!ae)throw new p("intrinsic "+oe+" exists, but is not available. Please file an issue!");return{alias:ue,name:ee,value:Ce}}throw new d("intrinsic "+oe+" does not exist!")};return ly=function(oe,ae){if(typeof oe!="string"||oe.length===0)throw new p("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ae!="boolean")throw new p('"allowMissing" argument must be a boolean');if(X(/^%?[^%]*%?$/,oe)===null)throw new d("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ee=K(oe),ue=ee.length>0?ee[0]:"",Ce=J("%"+ue+"%",ae),ve=Ce.name,ge=Ce.value,Je=!1,Te=Ce.alias;Te&&(ue=Te[0],k(ee,a([0,1],Te)));for(var ze=1,vt=!0;ze<ee.length;ze+=1){var he=ee[ze],me=L(he,0,1),Me=L(he,-1);if((me==='"'||me==="'"||me==="`"||Me==='"'||Me==="'"||Me==="`")&&me!==Me)throw new d("property names with quotes must have matching quotes");if((he==="constructor"||!vt)&&(Je=!0),ue+="."+he,ve="%"+ue+"%",S(h,ve))ge=h[ve];else if(ge!=null){if(!(he in ge)){if(!ae)throw new p("base intrinsic for "+oe+" exists, but the property is not available.");return}if(B&&ze+1>=ee.length){var pe=B(ge,he);vt=!!pe,vt&&"get"in pe&&!("originalValue"in pe.get)?ge=pe.get:ge=ge[he]}else vt=S(ge,he),ge=ge[he];vt&&!Je&&(h[ve]=ge)}}return ge},ly}var cy,p3;function dT(){if(p3)return cy;p3=1;var e=uT(),t=Zb(),r=t([e("%String.prototype.indexOf%")]);return cy=function(l,i){var d=e(l,!!i);return typeof d=="function"&&r(l,".prototype.")>-1?t([d]):d},cy}var uy,g3;function sB(){if(g3)return uy;g3=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},t(function(){throw 42},null,r)}catch(B){B!==n&&(t=null)}else t=null;var l=/^\s*class\b/,i=function(D){try{var U=e.call(D);return l.test(U)}catch{return!1}},d=function(D){try{return i(D)?!1:(e.call(D),!0)}catch{return!1}},p=Object.prototype.toString,g="[object Object]",x="[object Function]",y="[object GeneratorFunction]",w="[object HTMLAllCollection]",j="[object HTML document.all class]",_="[object HTMLCollection]",A=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),P=function(){return!1};if(typeof document=="object"){var z=document.all;p.call(z)===p.call(document.all)&&(P=function(D){if((E||!D)&&(typeof D>"u"||typeof D=="object"))try{var U=p.call(D);return(U===w||U===j||U===_||U===g)&&D("")==null}catch{}return!1})}return uy=t?function(D){if(P(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;try{t(D,null,r)}catch(U){if(U!==n)return!1}return!i(D)&&d(D)}:function(D){if(P(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;if(A)return d(D);if(i(D))return!1;var U=p.call(D);return U!==x&&U!==y&&!/^\[object HTML/.test(U)?!1:d(D)},uy}var dy,m3;function oB(){if(m3)return dy;m3=1;var e=sB(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(g,x,y){for(var w=0,j=g.length;w<j;w++)r.call(g,w)&&(y==null?x(g[w],w,g):x.call(y,g[w],w,g))},l=function(g,x,y){for(var w=0,j=g.length;w<j;w++)y==null?x(g.charAt(w),w,g):x.call(y,g.charAt(w),w,g)},i=function(g,x,y){for(var w in g)r.call(g,w)&&(y==null?x(g[w],w,g):x.call(y,g[w],w,g))};function d(p){return t.call(p)==="[object Array]"}return dy=function(g,x,y){if(!e(x))throw new TypeError("iterator must be a function");var w;arguments.length>=3&&(w=y),d(g)?n(g,x,w):typeof g=="string"?l(g,x,w):i(g,x,w)},dy}var fy,y3;function aB(){return y3||(y3=1,fy=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),fy}var hy,v3;function lB(){if(v3)return hy;v3=1;var e=aB(),t=globalThis;return hy=function(){for(var n=[],l=0;l<e.length;l++)typeof t[e[l]]=="function"&&(n[n.length]=e[l]);return n},hy}var py={exports:{}},gy,x3;function cB(){if(x3)return gy;x3=1;var e=Pp(),t=iT(),r=Cd(),n=Td();return gy=function(i,d,p){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`obj` must be an object or a function`");if(typeof d!="string"&&typeof d!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var g=arguments.length>3?arguments[3]:null,x=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,w=arguments.length>6?arguments[6]:!1,j=!!n&&n(i,d);if(e)e(i,d,{configurable:y===null&&j?j.configurable:!y,enumerable:g===null&&j?j.enumerable:!g,value:p,writable:x===null&&j?j.writable:!x});else if(w||!g&&!x&&!y)i[d]=p;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},gy}var my,b3;function uB(){if(b3)return my;b3=1;var e=Pp(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},my=t,my}var yy,w3;function dB(){if(w3)return yy;w3=1;var e=uT(),t=cB(),r=uB()(),n=Td(),l=Cd(),i=e("%Math.floor%");return yy=function(p,g){if(typeof p!="function")throw new l("`fn` is not a function");if(typeof g!="number"||g<0||g>4294967295||i(g)!==g)throw new l("`length` must be a positive 32-bit integer");var x=arguments.length>2&&!!arguments[2],y=!0,w=!0;if("length"in p&&n){var j=n(p,"length");j&&!j.configurable&&(y=!1),j&&!j.writable&&(w=!1)}return(y||w||!x)&&(r?t(p,"length",g,!0,!0):t(p,"length",g)),p},yy}var vy,_3;function fB(){if(_3)return vy;_3=1;var e=Ad(),t=Jb(),r=lT();return vy=function(){return r(e,t,arguments)},vy}var S3;function hB(){return S3||(S3=1,(function(e){var t=dB(),r=Pp(),n=Zb(),l=fB();e.exports=function(d){var p=n(arguments),g=d.length-(arguments.length-1);return t(p,1+(g>0?g:0),!0)},r?r(e.exports,"apply",{value:l}):e.exports.apply=l})(py)),py.exports}var xy,k3;function pB(){if(k3)return xy;k3=1;var e=sT();return xy=function(){return e()&&!!Symbol.toStringTag},xy}var by,j3;function gB(){if(j3)return by;j3=1;var e=oB(),t=lB(),r=hB(),n=dT(),l=Td(),i=cT(),d=n("Object.prototype.toString"),p=pB()(),g=globalThis,x=t(),y=n("String.prototype.slice"),w=n("Array.prototype.indexOf",!0)||function(P,z){for(var B=0;B<P.length;B+=1)if(P[B]===z)return B;return-1},j={__proto__:null};p&&l&&i?e(x,function(E){var P=new g[E];if(Symbol.toStringTag in P&&i){var z=i(P),B=l(z,Symbol.toStringTag);if(!B&&z){var D=i(z);B=l(D,Symbol.toStringTag)}j["$"+E]=r(B.get)}}):e(x,function(E){var P=new g[E],z=P.slice||P.set;z&&(j["$"+E]=r(z))});var _=function(P){var z=!1;return e(j,function(B,D){if(!z)try{"$"+B(P)===D&&(z=y(D,1))}catch{}}),z},A=function(P){var z=!1;return e(j,function(B,D){if(!z)try{B(P),z=y(D,1)}catch{}}),z};return by=function(P){if(!P||typeof P!="object")return!1;if(!p){var z=y(d(P),8,-1);return w(x,z)>-1?z:z!=="Object"?!1:A(P)}return l?_(P):null},by}var wy,M3;function mB(){if(M3)return wy;M3=1;var e=gB();return wy=function(r){return!!e(r)},wy}var _y,C3;function yB(){if(C3)return _y;C3=1;var e=Cd(),t=dT(),r=t("TypedArray.prototype.buffer",!0),n=mB();return _y=r||function(i){if(!n(i))throw new e("Not a Typed Array");return i.buffer},_y}var Sy,T3;function Xb(){if(T3)return Sy;T3=1;var e=ar().Buffer,t=Oz(),r=yB(),n=ArrayBuffer.isView||function(g){try{return r(g),!0}catch{return!1}},l=typeof Uint8Array<"u",i=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",d=i&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return Sy=function(g,x){if(g instanceof e)return g;if(typeof g=="string")return e.from(g,x);if(i&&n(g)){if(g.byteLength===0)return e.alloc(0);if(d){var y=e.from(g.buffer,g.byteOffset,g.byteLength);if(y.byteLength===g.byteLength)return y}var w=g instanceof Uint8Array?g:new Uint8Array(g.buffer,g.byteOffset,g.byteLength),j=e.from(w);if(j.length===g.byteLength)return j}if(l&&g instanceof Uint8Array)return e.from(g);var _=t(g);if(_)for(var A=0;A<g.length;A+=1){var E=g[A];if(typeof E!="number"||E<0||E>255||~~E!==E)throw new RangeError("Array items must be numbers in the range 0-255.")}if(_||e.isBuffer(g)&&g.constructor&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g))return e.from(g);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},Sy}var ky,A3;function vB(){if(A3)return ky;A3=1;var e=ar().Buffer,t=Xb(),r=typeof Uint8Array<"u",n=r&&typeof ArrayBuffer<"u",l=n&&ArrayBuffer.isView;return ky=function(i,d){if(typeof i=="string"||e.isBuffer(i)||r&&i instanceof Uint8Array||l&&l(i))return t(i,d);throw new TypeError('The "data" argument must be a string, a Buffer, a Uint8Array, or a DataView')},ky}var dh={exports:{}},fh={exports:{}},R3;function Np(){if(R3)return fh.exports;R3=1,typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?fh.exports={nextTick:e}:fh.exports=process;function e(t,r,n,l){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,d,p;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,r)});case 3:return process.nextTick(function(){t.call(null,r,n)});case 4:return process.nextTick(function(){t.call(null,r,n,l)});default:for(d=new Array(i-1),p=0;p<d.length;)d[p++]=arguments[p];return process.nextTick(function(){t.apply(null,d)})}}return fh.exports}var jy,E3;function xB(){if(E3)return jy;E3=1;var e={}.toString;return jy=Array.isArray||function(t){return e.call(t)=="[object Array]"},jy}var My,I3;function fT(){return I3||(I3=1,My=Fn.EventEmitter),My}var hh={exports:{}},z3;function Qb(){return z3||(z3=1,(function(e,t){var r=Ji(),n=r.Buffer;function l(d,p){for(var g in d)p[g]=d[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(l(r,t),t.Buffer=i);function i(d,p,g){return n(d,p,g)}l(n,i),i.from=function(d,p,g){if(typeof d=="number")throw new TypeError("Argument must not be a number");return n(d,p,g)},i.alloc=function(d,p,g){if(typeof d!="number")throw new TypeError("Argument must be a number");var x=n(d);return p!==void 0?typeof g=="string"?x.fill(p,g):x.fill(p):x.fill(0),x},i.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return n(d)},i.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(d)}})(hh,hh.exports)),hh.exports}var Dn={},B3;function Rd(){if(B3)return Dn;B3=1;function e(E){return Array.isArray?Array.isArray(E):A(E)==="[object Array]"}Dn.isArray=e;function t(E){return typeof E=="boolean"}Dn.isBoolean=t;function r(E){return E===null}Dn.isNull=r;function n(E){return E==null}Dn.isNullOrUndefined=n;function l(E){return typeof E=="number"}Dn.isNumber=l;function i(E){return typeof E=="string"}Dn.isString=i;function d(E){return typeof E=="symbol"}Dn.isSymbol=d;function p(E){return E===void 0}Dn.isUndefined=p;function g(E){return A(E)==="[object RegExp]"}Dn.isRegExp=g;function x(E){return typeof E=="object"&&E!==null}Dn.isObject=x;function y(E){return A(E)==="[object Date]"}Dn.isDate=y;function w(E){return A(E)==="[object Error]"||E instanceof Error}Dn.isError=w;function j(E){return typeof E=="function"}Dn.isFunction=j;function _(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}Dn.isPrimitive=_,Dn.isBuffer=Ji().Buffer.isBuffer;function A(E){return Object.prototype.toString.call(E)}return Dn}var Cy={exports:{}},P3;function bB(){return P3||(P3=1,(function(e){function t(i,d){if(!(i instanceof d))throw new TypeError("Cannot call a class as a function")}var r=Qb().Buffer,n=Fn;function l(i,d,p){i.copy(d,p)}e.exports=(function(){function i(){t(this,i),this.head=null,this.tail=null,this.length=0}return i.prototype.push=function(p){var g={data:p,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length},i.prototype.unshift=function(p){var g={data:p,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length},i.prototype.shift=function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(p){if(this.length===0)return"";for(var g=this.head,x=""+g.data;g=g.next;)x+=p+g.data;return x},i.prototype.concat=function(p){if(this.length===0)return r.alloc(0);for(var g=r.allocUnsafe(p>>>0),x=this.head,y=0;x;)l(x.data,g,y),y+=x.data.length,x=x.next;return g},i})(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var i=n.inspect({length:this.length});return this.constructor.name+" "+i})})(Cy)),Cy.exports}var Ty,N3;function hT(){if(N3)return Ty;N3=1;var e=Np();function t(l,i){var d=this,p=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return p||g?(i?i(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(n,this,l)):e.nextTick(n,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(x){!i&&x?d._writableState?d._writableState.errorEmitted||(d._writableState.errorEmitted=!0,e.nextTick(n,d,x)):e.nextTick(n,d,x):i&&i(x)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(l,i){l.emit("error",i)}return Ty={destroy:t,undestroy:r},Ty}var Ay,D3;function pT(){if(D3)return Ay;D3=1;var e=Np();Ay=E;function t(M){var R=this;this.next=null,this.entry=null,this.finish=function(){b(R,M)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;E.WritableState=_;var l=Object.create(Rd());l.inherits=sr();var i={deprecate:X8()},d=fT(),p=Qb().Buffer,g=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function x(M){return p.from(M)}function y(M){return p.isBuffer(M)||M instanceof g}var w=hT();l.inherits(E,d);function j(){}function _(M,R){n=n||Kl(),M=M||{};var S=R instanceof n;this.objectMode=!!M.objectMode,S&&(this.objectMode=this.objectMode||!!M.writableObjectMode);var a=M.highWaterMark,k=M.writableHighWaterMark,N=this.objectMode?16:16*1024;a||a===0?this.highWaterMark=a:S&&(k||k===0)?this.highWaterMark=k:this.highWaterMark=N,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=M.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){re(R,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}_.prototype.getBuffer=function(){for(var R=this.bufferedRequest,S=[];R;)S.push(R),R=R.next;return S},(function(){try{Object.defineProperty(_.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var A;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(M){return A.call(this,M)?!0:this!==E?!1:M&&M._writableState instanceof _}})):A=function(M){return M instanceof this};function E(M){if(n=n||Kl(),!A.call(E,this)&&!(this instanceof n))return new E(M);this._writableState=new _(M,this),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),d.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function P(M,R){var S=new Error("write after end");M.emit("error",S),e.nextTick(R,S)}function z(M,R,S,a){var k=!0,N=!1;return S===null?N=new TypeError("May not write null values to stream"):typeof S!="string"&&S!==void 0&&!R.objectMode&&(N=new TypeError("Invalid non-string/buffer chunk")),N&&(M.emit("error",N),e.nextTick(a,N),k=!1),k}E.prototype.write=function(M,R,S){var a=this._writableState,k=!1,N=!a.objectMode&&y(M);return N&&!p.isBuffer(M)&&(M=x(M)),typeof R=="function"&&(S=R,R=null),N?R="buffer":R||(R=a.defaultEncoding),typeof S!="function"&&(S=j),a.ended?P(this,S):(N||z(this,a,M,S))&&(a.pendingcb++,k=D(this,a,N,M,R,S)),k},E.prototype.cork=function(){var M=this._writableState;M.corked++},E.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,!M.writing&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&Y(this,M))},E.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+R);return this._writableState.defaultEncoding=R,this};function B(M,R,S){return!M.objectMode&&M.decodeStrings!==!1&&typeof R=="string"&&(R=p.from(R,S)),R}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function D(M,R,S,a,k,N){if(!S){var L=B(R,a,k);a!==L&&(S=!0,k="buffer",a=L)}var X=R.objectMode?1:a.length;R.length+=X;var se=R.length<R.highWaterMark;if(se||(R.needDrain=!0),R.writing||R.corked){var te=R.lastBufferedRequest;R.lastBufferedRequest={chunk:a,encoding:k,isBuf:S,callback:N,next:null},te?te.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else U(M,R,!1,X,a,k,N);return se}function U(M,R,S,a,k,N,L){R.writelen=a,R.writecb=L,R.writing=!0,R.sync=!0,S?M._writev(k,R.onwrite):M._write(k,N,R.onwrite),R.sync=!1}function G(M,R,S,a,k){--R.pendingcb,S?(e.nextTick(k,a),e.nextTick(h,M,R),M._writableState.errorEmitted=!0,M.emit("error",a)):(k(a),M._writableState.errorEmitted=!0,M.emit("error",a),h(M,R))}function $(M){M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0}function re(M,R){var S=M._writableState,a=S.sync,k=S.writecb;if($(S),R)G(M,S,a,R,k);else{var N=T(S);!N&&!S.corked&&!S.bufferProcessing&&S.bufferedRequest&&Y(M,S),a?r(Q,M,S,N,k):Q(M,S,N,k)}}function Q(M,R,S,a){S||H(M,R),R.pendingcb--,a(),h(M,R)}function H(M,R){R.length===0&&R.needDrain&&(R.needDrain=!1,M.emit("drain"))}function Y(M,R){R.bufferProcessing=!0;var S=R.bufferedRequest;if(M._writev&&S&&S.next){var a=R.bufferedRequestCount,k=new Array(a),N=R.corkedRequestsFree;N.entry=S;for(var L=0,X=!0;S;)k[L]=S,S.isBuf||(X=!1),S=S.next,L+=1;k.allBuffers=X,U(M,R,!0,R.length,k,"",N.finish),R.pendingcb++,R.lastBufferedRequest=null,N.next?(R.corkedRequestsFree=N.next,N.next=null):R.corkedRequestsFree=new t(R),R.bufferedRequestCount=0}else{for(;S;){var se=S.chunk,te=S.encoding,K=S.callback,J=R.objectMode?1:se.length;if(U(M,R,!1,J,se,te,K),S=S.next,R.bufferedRequestCount--,R.writing)break}S===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=S,R.bufferProcessing=!1}E.prototype._write=function(M,R,S){S(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(M,R,S){var a=this._writableState;typeof M=="function"?(S=M,M=null,R=null):typeof R=="function"&&(S=R,R=null),M!=null&&this.write(M,R),a.corked&&(a.corked=1,this.uncork()),a.ending||v(this,a,S)};function T(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function o(M,R){M._final(function(S){R.pendingcb--,S&&M.emit("error",S),R.prefinished=!0,M.emit("prefinish"),h(M,R)})}function c(M,R){!R.prefinished&&!R.finalCalled&&(typeof M._final=="function"?(R.pendingcb++,R.finalCalled=!0,e.nextTick(o,M,R)):(R.prefinished=!0,M.emit("prefinish")))}function h(M,R){var S=T(R);return S&&(c(M,R),R.pendingcb===0&&(R.finished=!0,M.emit("finish"))),S}function v(M,R,S){R.ending=!0,h(M,R),S&&(R.finished?e.nextTick(S):M.once("finish",S)),R.ended=!0,M.writable=!1}function b(M,R,S){var a=M.entry;for(M.entry=null;a;){var k=a.callback;R.pendingcb--,k(S),a=a.next}R.corkedRequestsFree.next=M}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),E.prototype.destroy=w.destroy,E.prototype._undestroy=w.undestroy,E.prototype._destroy=function(M,R){this.end(),R(M)},Ay}var Ry,L3;function Kl(){if(L3)return Ry;L3=1;var e=Np(),t=Object.keys||function(w){var j=[];for(var _ in w)j.push(_);return j};Ry=g;var r=Object.create(Rd());r.inherits=sr();var n=gT(),l=pT();r.inherits(g,n);for(var i=t(l.prototype),d=0;d<i.length;d++){var p=i[d];g.prototype[p]||(g.prototype[p]=l.prototype[p])}function g(w){if(!(this instanceof g))return new g(w);n.call(this,w),l.call(this,w),w&&w.readable===!1&&(this.readable=!1),w&&w.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,w&&w.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",x)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function x(){this.allowHalfOpen||this._writableState.ended||e.nextTick(y,this)}function y(w){w.end()}return Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(w){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=w,this._writableState.destroyed=w)}}),g.prototype._destroy=function(w,j){this.push(null),this.end(),e.nextTick(j,w)},Ry}var Ey,O3;function gT(){if(O3)return Ey;O3=1;var e=Np();Ey=B;var t=xB(),r;B.ReadableState=z,Fn.EventEmitter;var n=function(K,J){return K.listeners(J).length},l=fT(),i=Qb().Buffer,d=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(K){return i.from(K)}function g(K){return i.isBuffer(K)||K instanceof d}var x=Object.create(Rd());x.inherits=sr();var y=Fn,w=void 0;y&&y.debuglog?w=y.debuglog("stream"):w=function(){};var j=bB(),_=hT(),A;x.inherits(B,l);var E=["error","close","destroy","pause","resume"];function P(K,J,ne){if(typeof K.prependListener=="function")return K.prependListener(J,ne);!K._events||!K._events[J]?K.on(J,ne):t(K._events[J])?K._events[J].unshift(ne):K._events[J]=[ne,K._events[J]]}function z(K,J){r=r||Kl(),K=K||{};var ne=J instanceof r;this.objectMode=!!K.objectMode,ne&&(this.objectMode=this.objectMode||!!K.readableObjectMode);var oe=K.highWaterMark,ae=K.readableHighWaterMark,ee=this.objectMode?16:16*1024;oe||oe===0?this.highWaterMark=oe:ne&&(ae||ae===0)?this.highWaterMark=ae:this.highWaterMark=ee,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(A||(A=dd().StringDecoder),this.decoder=new A(K.encoding),this.encoding=K.encoding)}function B(K){if(r=r||Kl(),!(this instanceof B))return new B(K);this._readableState=new z(K,this),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),l.call(this)}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),B.prototype.destroy=_.destroy,B.prototype._undestroy=_.undestroy,B.prototype._destroy=function(K,J){this.push(null),J(K)},B.prototype.push=function(K,J){var ne=this._readableState,oe;return ne.objectMode?oe=!0:typeof K=="string"&&(J=J||ne.defaultEncoding,J!==ne.encoding&&(K=i.from(K,J),J=""),oe=!0),D(this,K,J,!1,oe)},B.prototype.unshift=function(K){return D(this,K,null,!0,!1)};function D(K,J,ne,oe,ae){var ee=K._readableState;if(J===null)ee.reading=!1,Y(K,ee);else{var ue;ae||(ue=G(ee,J)),ue?K.emit("error",ue):ee.objectMode||J&&J.length>0?(typeof J!="string"&&!ee.objectMode&&Object.getPrototypeOf(J)!==i.prototype&&(J=p(J)),oe?ee.endEmitted?K.emit("error",new Error("stream.unshift() after end event")):U(K,ee,J,!0):ee.ended?K.emit("error",new Error("stream.push() after EOF")):(ee.reading=!1,ee.decoder&&!ne?(J=ee.decoder.write(J),ee.objectMode||J.length!==0?U(K,ee,J,!1):c(K,ee)):U(K,ee,J,!1))):oe||(ee.reading=!1)}return $(ee)}function U(K,J,ne,oe){J.flowing&&J.length===0&&!J.sync?(K.emit("data",ne),K.read(0)):(J.length+=J.objectMode?1:ne.length,oe?J.buffer.unshift(ne):J.buffer.push(ne),J.needReadable&&T(K)),c(K,J)}function G(K,J){var ne;return!g(J)&&typeof J!="string"&&J!==void 0&&!K.objectMode&&(ne=new TypeError("Invalid non-string/buffer chunk")),ne}function $(K){return!K.ended&&(K.needReadable||K.length<K.highWaterMark||K.length===0)}B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(K){return A||(A=dd().StringDecoder),this._readableState.decoder=new A(K),this._readableState.encoding=K,this};var re=8388608;function Q(K){return K>=re?K=re:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function H(K,J){return K<=0||J.length===0&&J.ended?0:J.objectMode?1:K!==K?J.flowing&&J.length?J.buffer.head.data.length:J.length:(K>J.highWaterMark&&(J.highWaterMark=Q(K)),K<=J.length?K:J.ended?J.length:(J.needReadable=!0,0))}B.prototype.read=function(K){w("read",K),K=parseInt(K,10);var J=this._readableState,ne=K;if(K!==0&&(J.emittedReadable=!1),K===0&&J.needReadable&&(J.length>=J.highWaterMark||J.ended))return w("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?X(this):T(this),null;if(K=H(K,J),K===0&&J.ended)return J.length===0&&X(this),null;var oe=J.needReadable;w("need readable",oe),(J.length===0||J.length-K<J.highWaterMark)&&(oe=!0,w("length less than watermark",oe)),J.ended||J.reading?(oe=!1,w("reading or ended",oe)):oe&&(w("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(K=H(ne,J)));var ae;return K>0?ae=a(K,J):ae=null,ae===null?(J.needReadable=!0,K=0):J.length-=K,J.length===0&&(J.ended||(J.needReadable=!0),ne!==K&&J.ended&&X(this)),ae!==null&&this.emit("data",ae),ae};function Y(K,J){if(!J.ended){if(J.decoder){var ne=J.decoder.end();ne&&ne.length&&(J.buffer.push(ne),J.length+=J.objectMode?1:ne.length)}J.ended=!0,T(K)}}function T(K){var J=K._readableState;J.needReadable=!1,J.emittedReadable||(w("emitReadable",J.flowing),J.emittedReadable=!0,J.sync?e.nextTick(o,K):o(K))}function o(K){w("emit readable"),K.emit("readable"),S(K)}function c(K,J){J.readingMore||(J.readingMore=!0,e.nextTick(h,K,J))}function h(K,J){for(var ne=J.length;!J.reading&&!J.flowing&&!J.ended&&J.length<J.highWaterMark&&(w("maybeReadMore read 0"),K.read(0),ne!==J.length);)ne=J.length;J.readingMore=!1}B.prototype._read=function(K){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(K,J){var ne=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=K;break;case 1:oe.pipes=[oe.pipes,K];break;default:oe.pipes.push(K);break}oe.pipesCount+=1,w("pipe count=%d opts=%j",oe.pipesCount,J);var ae=(!J||J.end!==!1)&&K!==process.stdout&&K!==process.stderr,ee=ae?Ce:Me;oe.endEmitted?e.nextTick(ee):ne.once("end",ee),K.on("unpipe",ue);function ue(pe,ke){w("onunpipe"),pe===ne&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,Je())}function Ce(){w("onend"),K.end()}var ve=v(ne);K.on("drain",ve);var ge=!1;function Je(){w("cleanup"),K.removeListener("close",he),K.removeListener("finish",me),K.removeListener("drain",ve),K.removeListener("error",vt),K.removeListener("unpipe",ue),ne.removeListener("end",Ce),ne.removeListener("end",Me),ne.removeListener("data",ze),ge=!0,oe.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&ve()}var Te=!1;ne.on("data",ze);function ze(pe){w("ondata"),Te=!1;var ke=K.write(pe);ke===!1&&!Te&&((oe.pipesCount===1&&oe.pipes===K||oe.pipesCount>1&&te(oe.pipes,K)!==-1)&&!ge&&(w("false write response, pause",oe.awaitDrain),oe.awaitDrain++,Te=!0),ne.pause())}function vt(pe){w("onerror",pe),Me(),K.removeListener("error",vt),n(K,"error")===0&&K.emit("error",pe)}P(K,"error",vt);function he(){K.removeListener("finish",me),Me()}K.once("close",he);function me(){w("onfinish"),K.removeListener("close",he),Me()}K.once("finish",me);function Me(){w("unpipe"),ne.unpipe(K)}return K.emit("pipe",ne),oe.flowing||(w("pipe resume"),ne.resume()),K};function v(K){return function(){var J=K._readableState;w("pipeOnDrain",J.awaitDrain),J.awaitDrain&&J.awaitDrain--,J.awaitDrain===0&&n(K,"data")&&(J.flowing=!0,S(K))}}B.prototype.unpipe=function(K){var J=this._readableState,ne={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return K&&K!==J.pipes?this:(K||(K=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,K&&K.emit("unpipe",this,ne),this);if(!K){var oe=J.pipes,ae=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var ee=0;ee<ae;ee++)oe[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=te(J.pipes,K);return ue===-1?this:(J.pipes.splice(ue,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),K.emit("unpipe",this,ne),this)},B.prototype.on=function(K,J){var ne=l.prototype.on.call(this,K,J);if(K==="data")this._readableState.flowing!==!1&&this.resume();else if(K==="readable"){var oe=this._readableState;!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.emittedReadable=!1,oe.reading?oe.length&&T(this):e.nextTick(b,this))}return ne},B.prototype.addListener=B.prototype.on;function b(K){w("readable nexttick read 0"),K.read(0)}B.prototype.resume=function(){var K=this._readableState;return K.flowing||(w("resume"),K.flowing=!0,M(this,K)),this};function M(K,J){J.resumeScheduled||(J.resumeScheduled=!0,e.nextTick(R,K,J))}function R(K,J){J.reading||(w("resume read 0"),K.read(0)),J.resumeScheduled=!1,J.awaitDrain=0,K.emit("resume"),S(K),J.flowing&&!J.reading&&K.read(0)}B.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function S(K){var J=K._readableState;for(w("flow",J.flowing);J.flowing&&K.read()!==null;);}B.prototype.wrap=function(K){var J=this,ne=this._readableState,oe=!1;K.on("end",function(){if(w("wrapped end"),ne.decoder&&!ne.ended){var ue=ne.decoder.end();ue&&ue.length&&J.push(ue)}J.push(null)}),K.on("data",function(ue){if(w("wrapped data"),ne.decoder&&(ue=ne.decoder.write(ue)),!(ne.objectMode&&ue==null)&&!(!ne.objectMode&&(!ue||!ue.length))){var Ce=J.push(ue);Ce||(oe=!0,K.pause())}});for(var ae in K)this[ae]===void 0&&typeof K[ae]=="function"&&(this[ae]=(function(ue){return function(){return K[ue].apply(K,arguments)}})(ae));for(var ee=0;ee<E.length;ee++)K.on(E[ee],this.emit.bind(this,E[ee]));return this._read=function(ue){w("wrapped _read",ue),oe&&(oe=!1,K.resume())},this},Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),B._fromList=a;function a(K,J){if(J.length===0)return null;var ne;return J.objectMode?ne=J.buffer.shift():!K||K>=J.length?(J.decoder?ne=J.buffer.join(""):J.buffer.length===1?ne=J.buffer.head.data:ne=J.buffer.concat(J.length),J.buffer.clear()):ne=k(K,J.buffer,J.decoder),ne}function k(K,J,ne){var oe;return K<J.head.data.length?(oe=J.head.data.slice(0,K),J.head.data=J.head.data.slice(K)):K===J.head.data.length?oe=J.shift():oe=ne?N(K,J):L(K,J),oe}function N(K,J){var ne=J.head,oe=1,ae=ne.data;for(K-=ae.length;ne=ne.next;){var ee=ne.data,ue=K>ee.length?ee.length:K;if(ue===ee.length?ae+=ee:ae+=ee.slice(0,K),K-=ue,K===0){ue===ee.length?(++oe,ne.next?J.head=ne.next:J.head=J.tail=null):(J.head=ne,ne.data=ee.slice(ue));break}++oe}return J.length-=oe,ae}function L(K,J){var ne=i.allocUnsafe(K),oe=J.head,ae=1;for(oe.data.copy(ne),K-=oe.data.length;oe=oe.next;){var ee=oe.data,ue=K>ee.length?ee.length:K;if(ee.copy(ne,ne.length-K,0,ue),K-=ue,K===0){ue===ee.length?(++ae,oe.next?J.head=oe.next:J.head=J.tail=null):(J.head=oe,oe.data=ee.slice(ue));break}++ae}return J.length-=ae,ne}function X(K){var J=K._readableState;if(J.length>0)throw new Error('"endReadable()" called on non-empty stream');J.endEmitted||(J.ended=!0,e.nextTick(se,J,K))}function se(K,J){!K.endEmitted&&K.length===0&&(K.endEmitted=!0,J.readable=!1,J.emit("end"))}function te(K,J){for(var ne=0,oe=K.length;ne<oe;ne++)if(K[ne]===J)return ne;return-1}return Ey}var Iy,F3;function mT(){if(F3)return Iy;F3=1,Iy=n;var e=Kl(),t=Object.create(Rd());t.inherits=sr(),t.inherits(n,e);function r(d,p){var g=this._transformState;g.transforming=!1;var x=g.writecb;if(!x)return this.emit("error",new Error("write callback called multiple times"));g.writechunk=null,g.writecb=null,p!=null&&this.push(p),x(d);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function n(d){if(!(this instanceof n))return new n(d);e.call(this,d),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",l)}function l(){var d=this;typeof this._flush=="function"?this._flush(function(p,g){i(d,p,g)}):i(this,null,null)}n.prototype.push=function(d,p){return this._transformState.needTransform=!1,e.prototype.push.call(this,d,p)},n.prototype._transform=function(d,p,g){throw new Error("_transform() is not implemented")},n.prototype._write=function(d,p,g){var x=this._transformState;if(x.writecb=g,x.writechunk=d,x.writeencoding=p,!x.transforming){var y=this._readableState;(x.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},n.prototype._read=function(d){var p=this._transformState;p.writechunk!==null&&p.writecb&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},n.prototype._destroy=function(d,p){var g=this;e.prototype._destroy.call(this,d,function(x){p(x),g.emit("close")})};function i(d,p,g){if(p)return d.emit("error",p);if(g!=null&&d.push(g),d._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(d._transformState.transforming)throw new Error("Calling transform done when still transforming");return d.push(null)}return Iy}var zy,U3;function wB(){if(U3)return zy;U3=1,zy=r;var e=mT(),t=Object.create(Rd());t.inherits=sr(),t.inherits(r,e);function r(n){if(!(this instanceof r))return new r(n);e.call(this,n)}return r.prototype._transform=function(n,l,i){i(null,n)},zy}var $3;function yT(){return $3||($3=1,(function(e,t){t=e.exports=gT(),t.Stream=t,t.Readable=t,t.Writable=pT(),t.Duplex=Kl(),t.Transform=mT(),t.PassThrough=wB()})(dh,dh.exports)),dh.exports}var By,q3;function _B(){if(q3)return By;q3=1;var e=ar().Buffer,t=vB(),r=yT().Transform,n=sr();function l(i){r.call(this),this._block=e.allocUnsafe(i),this._blockSize=i,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return n(l,r),l.prototype._transform=function(i,d,p){var g=null;try{this.update(i,d)}catch(x){g=x}p(g)},l.prototype._flush=function(i){var d=null;try{this.push(this.digest())}catch(p){d=p}i(d)},l.prototype.update=function(i,d){if(this._finalized)throw new Error("Digest already called");for(var p=t(i,d),g=this._block,x=0;this._blockOffset+p.length-x>=this._blockSize;){for(var y=this._blockOffset;y<this._blockSize;)g[y]=p[x],y+=1,x+=1;this._update(),this._blockOffset=0}for(;x<p.length;)g[this._blockOffset]=p[x],this._blockOffset+=1,x+=1;for(var w=0,j=p.length*8;j>0;++w)this._length[w]+=j,j=this._length[w]/4294967296|0,j>0&&(this._length[w]-=4294967296*j);return this},l.prototype._update=function(){throw new Error("_update is not implemented")},l.prototype.digest=function(i){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var d=this._digest();i!==void 0&&(d=d.toString(i)),this._block.fill(0),this._blockOffset=0;for(var p=0;p<4;++p)this._length[p]=0;return d},l.prototype._digest=function(){throw new Error("_digest is not implemented")},By=l,By}var Py,H3;function ew(){if(H3)return Py;H3=1;var e=Ji().Buffer,t=sr(),r=_B(),n=new Array(16),l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],i=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],g=[0,1518500249,1859775393,2400959708,2840853838],x=[1352829926,1548603684,1836072691,2053994217,0];function y(z,B){return z<<B|z>>>32-B}function w(z,B,D,U,G,$,re,Q){return y(z+(B^D^U)+$+re|0,Q)+G|0}function j(z,B,D,U,G,$,re,Q){return y(z+(B&D|~B&U)+$+re|0,Q)+G|0}function _(z,B,D,U,G,$,re,Q){return y(z+((B|~D)^U)+$+re|0,Q)+G|0}function A(z,B,D,U,G,$,re,Q){return y(z+(B&U|D&~U)+$+re|0,Q)+G|0}function E(z,B,D,U,G,$,re,Q){return y(z+(B^(D|~U))+$+re|0,Q)+G|0}function P(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}return t(P,r),P.prototype._update=function(){for(var z=n,B=0;B<16;++B)z[B]=this._block.readInt32LE(B*4);for(var D=this._a|0,U=this._b|0,G=this._c|0,$=this._d|0,re=this._e|0,Q=this._a|0,H=this._b|0,Y=this._c|0,T=this._d|0,o=this._e|0,c=0;c<80;c+=1){var h,v;c<16?(h=w(D,U,G,$,re,z[l[c]],g[0],d[c]),v=E(Q,H,Y,T,o,z[i[c]],x[0],p[c])):c<32?(h=j(D,U,G,$,re,z[l[c]],g[1],d[c]),v=A(Q,H,Y,T,o,z[i[c]],x[1],p[c])):c<48?(h=_(D,U,G,$,re,z[l[c]],g[2],d[c]),v=_(Q,H,Y,T,o,z[i[c]],x[2],p[c])):c<64?(h=A(D,U,G,$,re,z[l[c]],g[3],d[c]),v=j(Q,H,Y,T,o,z[i[c]],x[3],p[c])):(h=E(D,U,G,$,re,z[l[c]],g[4],d[c]),v=w(Q,H,Y,T,o,z[i[c]],x[4],p[c])),D=re,re=$,$=y(G,10),G=U,U=h,Q=o,o=T,T=y(Y,10),Y=H,H=v}var b=this._b+G+T|0;this._b=this._c+$+o|0,this._c=this._d+re+Q|0,this._d=this._e+D+H|0,this._e=this._a+U+Y|0,this._a=b},P.prototype._digest=function(){this._block[this._blockOffset]=128,this._blockOffset+=1,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var z=e.alloc?e.alloc(20):new e(20);return z.writeInt32LE(this._a,0),z.writeInt32LE(this._b,4),z.writeInt32LE(this._c,8),z.writeInt32LE(this._d,12),z.writeInt32LE(this._e,16),z},Py=P,Py}var Ny={exports:{}},Dy,W3;function ic(){if(W3)return Dy;W3=1;var e=ar().Buffer,t=Xb();function r(n,l){this._block=e.alloc(n),this._finalSize=l,this._blockSize=n,this._len=0}return r.prototype.update=function(n,l){n=t(n,l||"utf8");for(var i=this._block,d=this._blockSize,p=n.length,g=this._len,x=0;x<p;){for(var y=g%d,w=Math.min(p-x,d-y),j=0;j<w;j++)i[y+j]=n[x+j];g+=w,x+=w,g%d===0&&this._update(i)}return this._len+=p,this},r.prototype.digest=function(n){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=this._len*8;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var d=(i&4294967295)>>>0,p=(i-d)/4294967296;this._block.writeUInt32BE(p,this._blockSize-8),this._block.writeUInt32BE(d,this._blockSize-4)}this._update(this._block);var g=this._hash();return n?g.toString(n):g},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Dy=r,Dy}var Ly,V3;function SB(){if(V3)return Ly;V3=1;var e=sr(),t=ic(),r=ar().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);function i(){this.init(),this._w=l,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function d(x){return x<<5|x>>>27}function p(x){return x<<30|x>>>2}function g(x,y,w,j){return x===0?y&w|~y&j:x===2?y&w|y&j|w&j:y^w^j}return i.prototype._update=function(x){for(var y=this._w,w=this._a|0,j=this._b|0,_=this._c|0,A=this._d|0,E=this._e|0,P=0;P<16;++P)y[P]=x.readInt32BE(P*4);for(;P<80;++P)y[P]=y[P-3]^y[P-8]^y[P-14]^y[P-16];for(var z=0;z<80;++z){var B=~~(z/20),D=d(w)+g(B,j,_,A)+E+y[z]+n[B]|0;E=A,A=_,_=p(j),j=w,w=D}this._a=w+this._a|0,this._b=j+this._b|0,this._c=_+this._c|0,this._d=A+this._d|0,this._e=E+this._e|0},i.prototype._hash=function(){var x=r.allocUnsafe(20);return x.writeInt32BE(this._a|0,0),x.writeInt32BE(this._b|0,4),x.writeInt32BE(this._c|0,8),x.writeInt32BE(this._d|0,12),x.writeInt32BE(this._e|0,16),x},Ly=i,Ly}var Oy,G3;function kB(){if(G3)return Oy;G3=1;var e=sr(),t=ic(),r=ar().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);function i(){this.init(),this._w=l,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function d(y){return y<<1|y>>>31}function p(y){return y<<5|y>>>27}function g(y){return y<<30|y>>>2}function x(y,w,j,_){return y===0?w&j|~w&_:y===2?w&j|w&_|j&_:w^j^_}return i.prototype._update=function(y){for(var w=this._w,j=this._a|0,_=this._b|0,A=this._c|0,E=this._d|0,P=this._e|0,z=0;z<16;++z)w[z]=y.readInt32BE(z*4);for(;z<80;++z)w[z]=d(w[z-3]^w[z-8]^w[z-14]^w[z-16]);for(var B=0;B<80;++B){var D=~~(B/20),U=p(j)+x(D,_,A,E)+P+w[B]+n[D]|0;P=E,E=A,A=g(_),_=j,j=U}this._a=j+this._a|0,this._b=_+this._b|0,this._c=A+this._c|0,this._d=E+this._d|0,this._e=P+this._e|0},i.prototype._hash=function(){var y=r.allocUnsafe(20);return y.writeInt32BE(this._a|0,0),y.writeInt32BE(this._b|0,4),y.writeInt32BE(this._c|0,8),y.writeInt32BE(this._d|0,12),y.writeInt32BE(this._e|0,16),y},Oy=i,Oy}var Fy,K3;function vT(){if(K3)return Fy;K3=1;var e=sr(),t=ic(),r=ar().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=new Array(64);function i(){this.init(),this._w=l,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function d(j,_,A){return A^j&(_^A)}function p(j,_,A){return j&_|A&(j|_)}function g(j){return(j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10)}function x(j){return(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7)}function y(j){return(j>>>7|j<<25)^(j>>>18|j<<14)^j>>>3}function w(j){return(j>>>17|j<<15)^(j>>>19|j<<13)^j>>>10}return i.prototype._update=function(j){for(var _=this._w,A=this._a|0,E=this._b|0,P=this._c|0,z=this._d|0,B=this._e|0,D=this._f|0,U=this._g|0,G=this._h|0,$=0;$<16;++$)_[$]=j.readInt32BE($*4);for(;$<64;++$)_[$]=w(_[$-2])+_[$-7]+y(_[$-15])+_[$-16]|0;for(var re=0;re<64;++re){var Q=G+x(B)+d(B,D,U)+n[re]+_[re]|0,H=g(A)+p(A,E,P)|0;G=U,U=D,D=B,B=z+Q|0,z=P,P=E,E=A,A=Q+H|0}this._a=A+this._a|0,this._b=E+this._b|0,this._c=P+this._c|0,this._d=z+this._d|0,this._e=B+this._e|0,this._f=D+this._f|0,this._g=U+this._g|0,this._h=G+this._h|0},i.prototype._hash=function(){var j=r.allocUnsafe(32);return j.writeInt32BE(this._a,0),j.writeInt32BE(this._b,4),j.writeInt32BE(this._c,8),j.writeInt32BE(this._d,12),j.writeInt32BE(this._e,16),j.writeInt32BE(this._f,20),j.writeInt32BE(this._g,24),j.writeInt32BE(this._h,28),j},Fy=i,Fy}var Uy,Y3;function jB(){if(Y3)return Uy;Y3=1;var e=sr(),t=vT(),r=ic(),n=ar().Buffer,l=new Array(64);function i(){this.init(),this._w=l,r.call(this,64,56)}return e(i,t),i.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},i.prototype._hash=function(){var d=n.allocUnsafe(28);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d},Uy=i,Uy}var $y,J3;function xT(){if(J3)return $y;J3=1;var e=sr(),t=ic(),r=ar().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);function i(){this.init(),this._w=l,t.call(this,128,112)}e(i,t),i.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function d(E,P,z){return z^E&(P^z)}function p(E,P,z){return E&P|z&(E|P)}function g(E,P){return(E>>>28|P<<4)^(P>>>2|E<<30)^(P>>>7|E<<25)}function x(E,P){return(E>>>14|P<<18)^(E>>>18|P<<14)^(P>>>9|E<<23)}function y(E,P){return(E>>>1|P<<31)^(E>>>8|P<<24)^E>>>7}function w(E,P){return(E>>>1|P<<31)^(E>>>8|P<<24)^(E>>>7|P<<25)}function j(E,P){return(E>>>19|P<<13)^(P>>>29|E<<3)^E>>>6}function _(E,P){return(E>>>19|P<<13)^(P>>>29|E<<3)^(E>>>6|P<<26)}function A(E,P){return E>>>0<P>>>0?1:0}return i.prototype._update=function(E){for(var P=this._w,z=this._ah|0,B=this._bh|0,D=this._ch|0,U=this._dh|0,G=this._eh|0,$=this._fh|0,re=this._gh|0,Q=this._hh|0,H=this._al|0,Y=this._bl|0,T=this._cl|0,o=this._dl|0,c=this._el|0,h=this._fl|0,v=this._gl|0,b=this._hl|0,M=0;M<32;M+=2)P[M]=E.readInt32BE(M*4),P[M+1]=E.readInt32BE(M*4+4);for(;M<160;M+=2){var R=P[M-30],S=P[M-30+1],a=y(R,S),k=w(S,R);R=P[M-4],S=P[M-4+1];var N=j(R,S),L=_(S,R),X=P[M-14],se=P[M-14+1],te=P[M-32],K=P[M-32+1],J=k+se|0,ne=a+X+A(J,k)|0;J=J+L|0,ne=ne+N+A(J,L)|0,J=J+K|0,ne=ne+te+A(J,K)|0,P[M]=ne,P[M+1]=J}for(var oe=0;oe<160;oe+=2){ne=P[oe],J=P[oe+1];var ae=p(z,B,D),ee=p(H,Y,T),ue=g(z,H),Ce=g(H,z),ve=x(G,c),ge=x(c,G),Je=n[oe],Te=n[oe+1],ze=d(G,$,re),vt=d(c,h,v),he=b+ge|0,me=Q+ve+A(he,b)|0;he=he+vt|0,me=me+ze+A(he,vt)|0,he=he+Te|0,me=me+Je+A(he,Te)|0,he=he+J|0,me=me+ne+A(he,J)|0;var Me=Ce+ee|0,pe=ue+ae+A(Me,Ce)|0;Q=re,b=v,re=$,v=h,$=G,h=c,c=o+he|0,G=U+me+A(c,o)|0,U=D,o=T,D=B,T=Y,B=z,Y=H,H=he+Me|0,z=me+pe+A(H,he)|0}this._al=this._al+H|0,this._bl=this._bl+Y|0,this._cl=this._cl+T|0,this._dl=this._dl+o|0,this._el=this._el+c|0,this._fl=this._fl+h|0,this._gl=this._gl+v|0,this._hl=this._hl+b|0,this._ah=this._ah+z+A(this._al,H)|0,this._bh=this._bh+B+A(this._bl,Y)|0,this._ch=this._ch+D+A(this._cl,T)|0,this._dh=this._dh+U+A(this._dl,o)|0,this._eh=this._eh+G+A(this._el,c)|0,this._fh=this._fh+$+A(this._fl,h)|0,this._gh=this._gh+re+A(this._gl,v)|0,this._hh=this._hh+Q+A(this._hl,b)|0},i.prototype._hash=function(){var E=r.allocUnsafe(64);function P(z,B,D){E.writeInt32BE(z,D),E.writeInt32BE(B,D+4)}return P(this._ah,this._al,0),P(this._bh,this._bl,8),P(this._ch,this._cl,16),P(this._dh,this._dl,24),P(this._eh,this._el,32),P(this._fh,this._fl,40),P(this._gh,this._gl,48),P(this._hh,this._hl,56),E},$y=i,$y}var qy,Z3;function MB(){if(Z3)return qy;Z3=1;var e=sr(),t=xT(),r=ic(),n=ar().Buffer,l=new Array(160);function i(){this.init(),this._w=l,r.call(this,128,112)}return e(i,t),i.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},i.prototype._hash=function(){var d=n.allocUnsafe(48);function p(g,x,y){d.writeInt32BE(g,y),d.writeInt32BE(x,y+4)}return p(this._ah,this._al,0),p(this._bh,this._bl,8),p(this._ch,this._cl,16),p(this._dh,this._dl,24),p(this._eh,this._el,32),p(this._fh,this._fl,40),d},qy=i,qy}var X3;function tw(){return X3||(X3=1,(function(e){e.exports=function(r){var n=r.toLowerCase(),l=e.exports[n];if(!l)throw new Error(n+" is not supported (we accept pull requests)");return new l},e.exports.sha=SB(),e.exports.sha1=kB(),e.exports.sha224=jB(),e.exports.sha256=vT(),e.exports.sha384=MB(),e.exports.sha512=xT()})(Ny)),Ny.exports}var Hy,Q3;function Oo(){if(Q3)return Hy;Q3=1;var e=ar().Buffer,t=rT().Transform,r=dd().StringDecoder,n=sr();function l(g){t.call(this),this.hashMode=typeof g=="string",this.hashMode?this[g]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(l,t);var i=typeof Uint8Array<"u",d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);function p(g,x){if(g instanceof e)return g;if(typeof g=="string")return e.from(g,x);if(d&&ArrayBuffer.isView(g)){if(g.byteLength===0)return e.alloc(0);var y=e.from(g.buffer,g.byteOffset,g.byteLength);if(y.byteLength===g.byteLength)return y}if(i&&g instanceof Uint8Array||e.isBuffer(g)&&g.constructor&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g))return e.from(g);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return l.prototype.update=function(g,x,y){var w=p(g,x),j=this._update(w);return this.hashMode?this:(y&&(j=this._toString(j,y)),j)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(g,x,y){var w;try{this.hashMode?this._update(g):this.push(this._update(g))}catch(j){w=j}finally{y(w)}},l.prototype._flush=function(g){var x;try{this.push(this.__final())}catch(y){x=y}g(x)},l.prototype._finalOrDigest=function(g){var x=this.__final()||e.alloc(0);return g&&(x=this._toString(x,g,!0)),x},l.prototype._toString=function(g,x,y){if(this._decoder||(this._decoder=new r(x),this._encoding=x),this._encoding!==x)throw new Error("cant switch encodings");var w=this._decoder.write(g);return y&&(w+=this._decoder.end()),w},Hy=l,Hy}var Wy,e4;function Ed(){if(e4)return Wy;e4=1;var e=sr(),t=Kb(),r=ew(),n=tw(),l=Oo();function i(d){l.call(this,"digest"),this._hash=d}return e(i,l),i.prototype._update=function(d){this._hash.update(d)},i.prototype._final=function(){return this._hash.digest()},Wy=function(p){return p=p.toLowerCase(),p==="md5"?new t:p==="rmd160"||p==="ripemd160"?new r:new i(n(p))},Wy}var Vy,t4;function CB(){if(t4)return Vy;t4=1;var e=sr(),t=ar().Buffer,r=Oo(),n=t.alloc(128),l=64;function i(d,p){r.call(this,"digest"),typeof p=="string"&&(p=t.from(p)),this._alg=d,this._key=p,p.length>l?p=d(p):p.length<l&&(p=t.concat([p,n],l));for(var g=this._ipad=t.allocUnsafe(l),x=this._opad=t.allocUnsafe(l),y=0;y<l;y++)g[y]=p[y]^54,x[y]=p[y]^92;this._hash=[g]}return e(i,r),i.prototype._update=function(d){this._hash.push(d)},i.prototype._final=function(){var d=this._alg(t.concat(this._hash));return this._alg(t.concat([this._opad,d]))},Vy=i,Vy}var Gy,r4;function bT(){if(r4)return Gy;r4=1;var e=Kb();return Gy=function(t){return new e().update(t).digest()},Gy}var Ky,n4;function wT(){if(n4)return Ky;n4=1;var e=sr(),t=CB(),r=Oo(),n=ar().Buffer,l=bT(),i=ew(),d=tw(),p=n.alloc(128);function g(x,y){r.call(this,"digest"),typeof y=="string"&&(y=n.from(y));var w=x==="sha512"||x==="sha384"?128:64;if(this._alg=x,this._key=y,y.length>w){var j=x==="rmd160"?new i:d(x);y=j.update(y).digest()}else y.length<w&&(y=n.concat([y,p],w));for(var _=this._ipad=n.allocUnsafe(w),A=this._opad=n.allocUnsafe(w),E=0;E<w;E++)_[E]=y[E]^54,A[E]=y[E]^92;this._hash=x==="rmd160"?new i:d(x),this._hash.update(_)}return e(g,r),g.prototype._update=function(x){this._hash.update(x)},g.prototype._final=function(){var x=this._hash.digest(),y=this._alg==="rmd160"?new i:d(this._alg);return y.update(this._opad).update(x).digest()},Ky=function(y,w){return y=y.toLowerCase(),y==="rmd160"||y==="ripemd160"?new g("rmd160",w):y==="md5"?new t(l,w):new g(y,w)},Ky}const TB={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},AB={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},RB={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},EB={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},IB={sign:"ecdsa",hash:"sha256",id:""},zB={sign:"ecdsa",hash:"sha224",id:""},BB={sign:"ecdsa",hash:"sha384",id:""},PB={sign:"ecdsa",hash:"sha512",id:""},NB={sign:"dsa",hash:"sha1",id:""},DB={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},LB={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},_T={sha224WithRSAEncryption:TB,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:AB,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:RB,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:EB,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:IB,sha224:zB,sha384:BB,sha512:PB,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:NB,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:DB,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:LB,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var Yy,i4;function OB(){return i4||(i4=1,Yy=_T),Yy}var ph={},Jy,s4;function ST(){if(s4)return Jy;s4=1;var e=Math.pow(2,30)-1;return Jy=function(t,r){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof r!="number")throw new TypeError("Key length not a number");if(r<0||r>e||r!==r)throw new TypeError("Bad key length")},Jy}var Zy,o4;function kT(){if(o4)return Zy;o4=1;var e;if(globalThis.process&&globalThis.process.browser)e="utf-8";else if(globalThis.process&&globalThis.process.version){var t=parseInt(process.version.split(".")[0].slice(1),10);e=t>=6?"utf-8":"binary"}else e="utf-8";return Zy=e,Zy}var Xy,a4;function jT(){if(a4)return Xy;a4=1;var e=ar().Buffer,t=Xb(),r=typeof Uint8Array<"u",n=r&&typeof ArrayBuffer<"u",l=n&&ArrayBuffer.isView;return Xy=function(i,d,p){if(typeof i=="string"||e.isBuffer(i)||r&&i instanceof Uint8Array||l&&l(i))return t(i,d);throw new TypeError(p+" must be a string, a Buffer, a Uint8Array, or a DataView")},Xy}var Qy,l4;function MT(){if(l4)return Qy;l4=1;var e=bT(),t=ew(),r=tw(),n=ar().Buffer,l=ST(),i=kT(),d=jT(),p=n.alloc(128),g={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},x={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function y(A){return new t().update(A).digest()}function w(A){function E(P){return r(A).update(P).digest()}return A==="rmd160"||A==="ripemd160"?y:A==="md5"?e:E}function j(A,E,P){var z=w(A),B=A==="sha512"||A==="sha384"?128:64;E.length>B?E=z(E):E.length<B&&(E=n.concat([E,p],B));for(var D=n.allocUnsafe(B+g[A]),U=n.allocUnsafe(B+g[A]),G=0;G<B;G++)D[G]=E[G]^54,U[G]=E[G]^92;var $=n.allocUnsafe(B+P+4);D.copy($,0,0,B),this.ipad1=$,this.ipad2=D,this.opad=U,this.alg=A,this.blocksize=B,this.hash=z,this.size=g[A]}j.prototype.run=function(A,E){A.copy(E,this.blocksize);var P=this.hash(E);return P.copy(this.opad,this.blocksize),this.hash(this.opad)};function _(A,E,P,z,B){l(P,z),A=d(A,i,"Password"),E=d(E,i,"Salt");var D=(B||"sha1").toLowerCase(),U=x[D]||D,G=g[U];if(typeof G!="number"||!G)throw new TypeError("Digest algorithm not supported: "+B);var $=new j(U,A,E.length),re=n.allocUnsafe(z),Q=n.allocUnsafe(E.length+4);E.copy(Q,0,0,E.length);for(var H=0,Y=G,T=Math.ceil(z/Y),o=1;o<=T;o++){Q.writeUInt32BE(o,E.length);for(var c=$.run(Q,$.ipad1),h=c,v=1;v<P;v++){h=$.run(h,$.ipad2);for(var b=0;b<Y;b++)c[b]^=h[b]}c.copy(re,H),H+=Y}return re}return Qy=_,Qy}var ev,c4;function FB(){if(c4)return ev;c4=1;var e=ar().Buffer,t=ST(),r=kT(),n=MT(),l=jT(),i,d=globalThis.crypto&&globalThis.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[],x;function y(){return x||(globalThis.process&&globalThis.process.nextTick?x=globalThis.process.nextTick:globalThis.queueMicrotask?x=globalThis.queueMicrotask:globalThis.setImmediate?x=globalThis.setImmediate:x=globalThis.setTimeout,x)}function w(A,E,P,z,B){return d.importKey("raw",A,{name:"PBKDF2"},!1,["deriveBits"]).then(function(D){return d.deriveBits({name:"PBKDF2",salt:E,iterations:P,hash:{name:B}},D,z<<3)}).then(function(D){return e.from(D)})}function j(A){if(globalThis.process&&!globalThis.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(g[A]!==void 0)return g[A];i=i||e.alloc(8);var E=w(i,i,10,128,A).then(function(){return!0},function(){return!1});return g[A]=E,E}function _(A,E){A.then(function(P){y()(function(){E(null,P)})},function(P){y()(function(){E(P)})})}return ev=function(A,E,P,z,B,D){typeof B=="function"&&(D=B,B=void 0),B=B||"sha1";var U=p[B.toLowerCase()];if(!U||typeof globalThis.Promise!="function"){y()(function(){var G;try{G=n(A,E,P,z,B)}catch($){D($);return}D(null,G)});return}if(t(P,z),A=l(A,r,"Password"),E=l(E,r,"Salt"),typeof D!="function")throw new Error("No callback provided to pbkdf2");_(j(U).then(function(G){return G?w(A,E,P,z,U):n(A,E,P,z,B)}),D)},ev}var u4;function CT(){return u4||(u4=1,ph.pbkdf2=FB(),ph.pbkdf2Sync=MT()),ph}var Ni={},ca={},xi={},d4;function TT(){if(d4)return xi;d4=1,xi.readUInt32BE=function(l,i){var d=l[0+i]<<24|l[1+i]<<16|l[2+i]<<8|l[3+i];return d>>>0},xi.writeUInt32BE=function(l,i,d){l[0+d]=i>>>24,l[1+d]=i>>>16&255,l[2+d]=i>>>8&255,l[3+d]=i&255},xi.ip=function(l,i,d,p){for(var g=0,x=0,y=6;y>=0;y-=2){for(var w=0;w<=24;w+=8)g<<=1,g|=i>>>w+y&1;for(var w=0;w<=24;w+=8)g<<=1,g|=l>>>w+y&1}for(var y=6;y>=0;y-=2){for(var w=1;w<=25;w+=8)x<<=1,x|=i>>>w+y&1;for(var w=1;w<=25;w+=8)x<<=1,x|=l>>>w+y&1}d[p+0]=g>>>0,d[p+1]=x>>>0},xi.rip=function(l,i,d,p){for(var g=0,x=0,y=0;y<4;y++)for(var w=24;w>=0;w-=8)g<<=1,g|=i>>>w+y&1,g<<=1,g|=l>>>w+y&1;for(var y=4;y<8;y++)for(var w=24;w>=0;w-=8)x<<=1,x|=i>>>w+y&1,x<<=1,x|=l>>>w+y&1;d[p+0]=g>>>0,d[p+1]=x>>>0},xi.pc1=function(l,i,d,p){for(var g=0,x=0,y=7;y>=5;y--){for(var w=0;w<=24;w+=8)g<<=1,g|=i>>w+y&1;for(var w=0;w<=24;w+=8)g<<=1,g|=l>>w+y&1}for(var w=0;w<=24;w+=8)g<<=1,g|=i>>w+y&1;for(var y=1;y<=3;y++){for(var w=0;w<=24;w+=8)x<<=1,x|=i>>w+y&1;for(var w=0;w<=24;w+=8)x<<=1,x|=l>>w+y&1}for(var w=0;w<=24;w+=8)x<<=1,x|=l>>w+y&1;d[p+0]=g>>>0,d[p+1]=x>>>0},xi.r28shl=function(l,i){return l<<i&268435455|l>>>28-i};var e=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];xi.pc2=function(l,i,d,p){for(var g=0,x=0,y=e.length>>>1,w=0;w<y;w++)g<<=1,g|=l>>>e[w]&1;for(var w=y;w<e.length;w++)x<<=1,x|=i>>>e[w]&1;d[p+0]=g>>>0,d[p+1]=x>>>0},xi.expand=function(l,i,d){var p=0,g=0;p=(l&1)<<5|l>>>27;for(var x=23;x>=15;x-=4)p<<=6,p|=l>>>x&63;for(var x=11;x>=3;x-=4)g|=l>>>x&63,g<<=6;g|=(l&31)<<1|l>>>31,i[d+0]=p>>>0,i[d+1]=g>>>0};var t=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];xi.substitute=function(l,i){for(var d=0,p=0;p<4;p++){var g=l>>>18-p*6&63,x=t[p*64+g];d<<=4,d|=x}for(var p=0;p<4;p++){var g=i>>>18-p*6&63,x=t[256+p*64+g];d<<=4,d|=x}return d>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return xi.permute=function(l){for(var i=0,d=0;d<r.length;d++)i<<=1,i|=l>>>r[d]&1;return i>>>0},xi.padSplit=function(l,i,d){for(var p=l.toString(2);p.length<i;)p="0"+p;for(var g=[],x=0;x<i;x+=d)g.push(p.slice(x,x+d));return g.join(" ")},xi}var tv,f4;function Zi(){if(f4)return tv;f4=1,tv=e;function e(t,r){if(!t)throw new Error(r||"Assertion failed")}return e.equal=function(r,n,l){if(r!=n)throw new Error(l||"Assertion failed: "+r+" != "+n)},tv}var rv,h4;function rw(){if(h4)return rv;h4=1;var e=Zi();function t(r){this.options=r,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=r.padding!==!1}return rv=t,t.prototype._init=function(){},t.prototype.update=function(n){return n.length===0?[]:this.type==="decrypt"?this._updateDecrypt(n):this._updateEncrypt(n)},t.prototype._buffer=function(n,l){for(var i=Math.min(this.buffer.length-this.bufferOff,n.length-l),d=0;d<i;d++)this.buffer[this.bufferOff+d]=n[l+d];return this.bufferOff+=i,i},t.prototype._flushBuffer=function(n,l){return this._update(this.buffer,0,n,l),this.bufferOff=0,this.blockSize},t.prototype._updateEncrypt=function(n){var l=0,i=0,d=(this.bufferOff+n.length)/this.blockSize|0,p=new Array(d*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(n,l),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(p,i)));for(var g=n.length-(n.length-l)%this.blockSize;l<g;l+=this.blockSize)this._update(n,l,p,i),i+=this.blockSize;for(;l<n.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=n[l];return p},t.prototype._updateDecrypt=function(n){for(var l=0,i=0,d=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,p=new Array(d*this.blockSize);d>0;d--)l+=this._buffer(n,l),i+=this._flushBuffer(p,i);return l+=this._buffer(n,l),p},t.prototype.final=function(n){var l;n&&(l=this.update(n));var i;return this.type==="encrypt"?i=this._finalEncrypt():i=this._finalDecrypt(),l?l.concat(i):i},t.prototype._pad=function(n,l){if(l===0)return!1;for(;l<n.length;)n[l++]=0;return!0},t.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var n=new Array(this.blockSize);return this._update(this.buffer,0,n,0),n},t.prototype._unpad=function(n){return n},t.prototype._finalDecrypt=function(){e.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=new Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)},rv}var nv,p4;function AT(){if(p4)return nv;p4=1;var e=Zi(),t=sr(),r=TT(),n=rw();function l(){this.tmp=new Array(2),this.keys=null}function i(p){n.call(this,p);var g=new l;this._desState=g,this.deriveKeys(g,p.key)}t(i,n),nv=i,i.create=function(g){return new i(g)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return i.prototype.deriveKeys=function(g,x){g.keys=new Array(32),e.equal(x.length,this.blockSize,"Invalid key length");var y=r.readUInt32BE(x,0),w=r.readUInt32BE(x,4);r.pc1(y,w,g.tmp,0),y=g.tmp[0],w=g.tmp[1];for(var j=0;j<g.keys.length;j+=2){var _=d[j>>>1];y=r.r28shl(y,_),w=r.r28shl(w,_),r.pc2(y,w,g.keys,j)}},i.prototype._update=function(g,x,y,w){var j=this._desState,_=r.readUInt32BE(g,x),A=r.readUInt32BE(g,x+4);r.ip(_,A,j.tmp,0),_=j.tmp[0],A=j.tmp[1],this.type==="encrypt"?this._encrypt(j,_,A,j.tmp,0):this._decrypt(j,_,A,j.tmp,0),_=j.tmp[0],A=j.tmp[1],r.writeUInt32BE(y,_,w),r.writeUInt32BE(y,A,w+4)},i.prototype._pad=function(g,x){if(this.padding===!1)return!1;for(var y=g.length-x,w=x;w<g.length;w++)g[w]=y;return!0},i.prototype._unpad=function(g){if(this.padding===!1)return g;for(var x=g[g.length-1],y=g.length-x;y<g.length;y++)e.equal(g[y],x);return g.slice(0,g.length-x)},i.prototype._encrypt=function(g,x,y,w,j){for(var _=x,A=y,E=0;E<g.keys.length;E+=2){var P=g.keys[E],z=g.keys[E+1];r.expand(A,g.tmp,0),P^=g.tmp[0],z^=g.tmp[1];var B=r.substitute(P,z),D=r.permute(B),U=A;A=(_^D)>>>0,_=U}r.rip(A,_,w,j)},i.prototype._decrypt=function(g,x,y,w,j){for(var _=y,A=x,E=g.keys.length-2;E>=0;E-=2){var P=g.keys[E],z=g.keys[E+1];r.expand(_,g.tmp,0),P^=g.tmp[0],z^=g.tmp[1];var B=r.substitute(P,z),D=r.permute(B),U=_;_=(A^D)>>>0,A=U}r.rip(_,A,w,j)},nv}var iv={},g4;function UB(){if(g4)return iv;g4=1;var e=Zi(),t=sr(),r={};function n(i){e.equal(i.length,8,"Invalid IV length"),this.iv=new Array(8);for(var d=0;d<this.iv.length;d++)this.iv[d]=i[d]}function l(i){function d(y){i.call(this,y),this._cbcInit()}t(d,i);for(var p=Object.keys(r),g=0;g<p.length;g++){var x=p[g];d.prototype[x]=r[x]}return d.create=function(w){return new d(w)},d}return iv.instantiate=l,r._cbcInit=function(){var d=new n(this.options.iv);this._cbcState=d},r._update=function(d,p,g,x){var y=this._cbcState,w=this.constructor.super_.prototype,j=y.iv;if(this.type==="encrypt"){for(var _=0;_<this.blockSize;_++)j[_]^=d[p+_];w._update.call(this,j,0,g,x);for(var _=0;_<this.blockSize;_++)j[_]=g[x+_]}else{w._update.call(this,d,p,g,x);for(var _=0;_<this.blockSize;_++)g[x+_]^=j[_];for(var _=0;_<this.blockSize;_++)j[_]=d[p+_]}},iv}var sv,m4;function $B(){if(m4)return sv;m4=1;var e=Zi(),t=sr(),r=rw(),n=AT();function l(d,p){e.equal(p.length,24,"Invalid key length");var g=p.slice(0,8),x=p.slice(8,16),y=p.slice(16,24);d==="encrypt"?this.ciphers=[n.create({type:"encrypt",key:g}),n.create({type:"decrypt",key:x}),n.create({type:"encrypt",key:y})]:this.ciphers=[n.create({type:"decrypt",key:y}),n.create({type:"encrypt",key:x}),n.create({type:"decrypt",key:g})]}function i(d){r.call(this,d);var p=new l(this.type,this.options.key);this._edeState=p}return t(i,r),sv=i,i.create=function(p){return new i(p)},i.prototype._update=function(p,g,x,y){var w=this._edeState;w.ciphers[0]._update(p,g,x,y),w.ciphers[1]._update(x,y,x,y),w.ciphers[2]._update(x,y,x,y)},i.prototype._pad=n.prototype._pad,i.prototype._unpad=n.prototype._unpad,sv}var y4;function qB(){return y4||(y4=1,ca.utils=TT(),ca.Cipher=rw(),ca.DES=AT(),ca.CBC=UB(),ca.EDE=$B()),ca}var ov,v4;function HB(){if(v4)return ov;v4=1;var e=Oo(),t=qB(),r=sr(),n=ar().Buffer,l={"des-ede3-cbc":t.CBC.instantiate(t.EDE),"des-ede3":t.EDE,"des-ede-cbc":t.CBC.instantiate(t.EDE),"des-ede":t.EDE,"des-cbc":t.CBC.instantiate(t.DES),"des-ecb":t.DES};l.des=l["des-cbc"],l.des3=l["des-ede3-cbc"],ov=i,r(i,e);function i(d){e.call(this);var p=d.mode.toLowerCase(),g=l[p],x;d.decrypt?x="decrypt":x="encrypt";var y=d.key;n.isBuffer(y)||(y=n.from(y)),(p==="des-ede"||p==="des-ede-cbc")&&(y=n.concat([y,y.slice(0,8)]));var w=d.iv;n.isBuffer(w)||(w=n.from(w)),this._des=g.create({key:y,iv:w,type:x})}return i.prototype._update=function(d){return n.from(this._des.update(d))},i.prototype._final=function(){return n.from(this._des.final())},ov}var Di={},gh={},mh={},x4;function WB(){return x4||(x4=1,mh.encrypt=function(e,t){return e._cipher.encryptBlock(t)},mh.decrypt=function(e,t){return e._cipher.decryptBlock(t)}),mh}var yh={},av,b4;function Id(){return b4||(b4=1,av=function(t,r){for(var n=Math.min(t.length,r.length),l=new Buffer(n),i=0;i<n;++i)l[i]=t[i]^r[i];return l}),av}var w4;function VB(){if(w4)return yh;w4=1;var e=Id();return yh.encrypt=function(t,r){var n=e(r,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},yh.decrypt=function(t,r){var n=t._prev;t._prev=r;var l=t._cipher.decryptBlock(r);return e(l,n)},yh}var lv={},_4;function GB(){if(_4)return lv;_4=1;var e=ar().Buffer,t=Id();function r(n,l,i){var d=l.length,p=t(l,n._cache);return n._cache=n._cache.slice(d),n._prev=e.concat([n._prev,i?l:p]),p}return lv.encrypt=function(n,l,i){for(var d=e.allocUnsafe(0),p;l.length;)if(n._cache.length===0&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=e.allocUnsafe(0)),n._cache.length<=l.length)p=n._cache.length,d=e.concat([d,r(n,l.slice(0,p),i)]),l=l.slice(p);else{d=e.concat([d,r(n,l,i)]);break}return d},lv}var cv={},S4;function KB(){if(S4)return cv;S4=1;var e=ar().Buffer;function t(r,n,l){var i=r._cipher.encryptBlock(r._prev),d=i[0]^n;return r._prev=e.concat([r._prev.slice(1),e.from([l?n:d])]),d}return cv.encrypt=function(r,n,l){for(var i=n.length,d=e.allocUnsafe(i),p=-1;++p<i;)d[p]=t(r,n[p],l);return d},cv}var uv={},k4;function YB(){if(k4)return uv;k4=1;var e=ar().Buffer;function t(n,l,i){for(var d,p=-1,g=8,x=0,y,w;++p<g;)d=n._cipher.encryptBlock(n._prev),y=l&1<<7-p?128:0,w=d[0]^y,x+=(w&128)>>p%8,n._prev=r(n._prev,i?y:w);return x}function r(n,l){var i=n.length,d=-1,p=e.allocUnsafe(n.length);for(n=e.concat([n,e.from([l])]);++d<i;)p[d]=n[d]<<1|n[d+1]>>7;return p}return uv.encrypt=function(n,l,i){for(var d=l.length,p=e.allocUnsafe(d),g=-1;++g<d;)p[g]=t(n,l[g],i);return p},uv}var dv={},j4;function JB(){if(j4)return dv;j4=1;var e=Id();function t(r){return r._prev=r._cipher.encryptBlock(r._prev),r._prev}return dv.encrypt=function(r,n){for(;r._cache.length<n.length;)r._cache=Buffer.concat([r._cache,t(r)]);var l=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),e(n,l)},dv}var fv={},hv,M4;function RT(){if(M4)return hv;M4=1;function e(t){for(var r=t.length,n;r--;)if(n=t.readUInt8(r),n===255)t.writeUInt8(0,r);else{n++,t.writeUInt8(n,r);break}}return hv=e,hv}var C4;function T4(){if(C4)return fv;C4=1;var e=Id(),t=ar().Buffer,r=RT();function n(i){var d=i._cipher.encryptBlockRaw(i._prev);return r(i._prev),d}var l=16;return fv.encrypt=function(i,d){var p=Math.ceil(d.length/l),g=i._cache.length;i._cache=t.concat([i._cache,t.allocUnsafe(p*l)]);for(var x=0;x<p;x++){var y=n(i),w=g+x*l;i._cache.writeUInt32BE(y[0],w+0),i._cache.writeUInt32BE(y[1],w+4),i._cache.writeUInt32BE(y[2],w+8),i._cache.writeUInt32BE(y[3],w+12)}var j=i._cache.slice(0,d.length);return i._cache=i._cache.slice(d.length),e(d,j)},fv}const ZB={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},XB={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},QB={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},ET={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:ZB,aes192:XB,aes256:QB,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var pv,A4;function nw(){if(A4)return pv;A4=1;var e={ECB:WB(),CBC:VB(),CFB:GB(),CFB8:KB(),CFB1:YB(),OFB:JB(),CTR:T4(),GCM:T4()},t=ET;for(var r in t)t[r].module=e[t[r].mode];return pv=t,pv}var gv={},R4;function Dp(){if(R4)return gv;R4=1;var e=ar().Buffer;function t(p){e.isBuffer(p)||(p=e.from(p));for(var g=p.length/4|0,x=new Array(g),y=0;y<g;y++)x[y]=p.readUInt32BE(y*4);return x}function r(p){for(var g=0;g<p.length;p++)p[g]=0}function n(p,g,x,y,w){for(var j=x[0],_=x[1],A=x[2],E=x[3],P=p[0]^g[0],z=p[1]^g[1],B=p[2]^g[2],D=p[3]^g[3],U,G,$,re,Q=4,H=1;H<w;H++)U=j[P>>>24]^_[z>>>16&255]^A[B>>>8&255]^E[D&255]^g[Q++],G=j[z>>>24]^_[B>>>16&255]^A[D>>>8&255]^E[P&255]^g[Q++],$=j[B>>>24]^_[D>>>16&255]^A[P>>>8&255]^E[z&255]^g[Q++],re=j[D>>>24]^_[P>>>16&255]^A[z>>>8&255]^E[B&255]^g[Q++],P=U,z=G,B=$,D=re;return U=(y[P>>>24]<<24|y[z>>>16&255]<<16|y[B>>>8&255]<<8|y[D&255])^g[Q++],G=(y[z>>>24]<<24|y[B>>>16&255]<<16|y[D>>>8&255]<<8|y[P&255])^g[Q++],$=(y[B>>>24]<<24|y[D>>>16&255]<<16|y[P>>>8&255]<<8|y[z&255])^g[Q++],re=(y[D>>>24]<<24|y[P>>>16&255]<<16|y[z>>>8&255]<<8|y[B&255])^g[Q++],U=U>>>0,G=G>>>0,$=$>>>0,re=re>>>0,[U,G,$,re]}var l=[0,1,2,4,8,16,32,64,128,27,54],i=(function(){for(var p=new Array(256),g=0;g<256;g++)g<128?p[g]=g<<1:p[g]=g<<1^283;for(var x=[],y=[],w=[[],[],[],[]],j=[[],[],[],[]],_=0,A=0,E=0;E<256;++E){var P=A^A<<1^A<<2^A<<3^A<<4;P=P>>>8^P&255^99,x[_]=P,y[P]=_;var z=p[_],B=p[z],D=p[B],U=p[P]*257^P*16843008;w[0][_]=U<<24|U>>>8,w[1][_]=U<<16|U>>>16,w[2][_]=U<<8|U>>>24,w[3][_]=U,U=D*16843009^B*65537^z*257^_*16843008,j[0][P]=U<<24|U>>>8,j[1][P]=U<<16|U>>>16,j[2][P]=U<<8|U>>>24,j[3][P]=U,_===0?_=A=1:(_=z^p[p[p[D^z]]],A^=p[p[A]])}return{SBOX:x,INV_SBOX:y,SUB_MIX:w,INV_SUB_MIX:j}})();function d(p){this._key=t(p),this._reset()}return d.blockSize=16,d.keySize=256/8,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var p=this._key,g=p.length,x=g+6,y=(x+1)*4,w=[],j=0;j<g;j++)w[j]=p[j];for(j=g;j<y;j++){var _=w[j-1];j%g===0?(_=_<<8|_>>>24,_=i.SBOX[_>>>24]<<24|i.SBOX[_>>>16&255]<<16|i.SBOX[_>>>8&255]<<8|i.SBOX[_&255],_^=l[j/g|0]<<24):g>6&&j%g===4&&(_=i.SBOX[_>>>24]<<24|i.SBOX[_>>>16&255]<<16|i.SBOX[_>>>8&255]<<8|i.SBOX[_&255]),w[j]=w[j-g]^_}for(var A=[],E=0;E<y;E++){var P=y-E,z=w[P-(E%4?0:4)];E<4||P<=4?A[E]=z:A[E]=i.INV_SUB_MIX[0][i.SBOX[z>>>24]]^i.INV_SUB_MIX[1][i.SBOX[z>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[z>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[z&255]]}this._nRounds=x,this._keySchedule=w,this._invKeySchedule=A},d.prototype.encryptBlockRaw=function(p){return p=t(p),n(p,this._keySchedule,i.SUB_MIX,i.SBOX,this._nRounds)},d.prototype.encryptBlock=function(p){var g=this.encryptBlockRaw(p),x=e.allocUnsafe(16);return x.writeUInt32BE(g[0],0),x.writeUInt32BE(g[1],4),x.writeUInt32BE(g[2],8),x.writeUInt32BE(g[3],12),x},d.prototype.decryptBlock=function(p){p=t(p);var g=p[1];p[1]=p[3],p[3]=g;var x=n(p,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX,this._nRounds),y=e.allocUnsafe(16);return y.writeUInt32BE(x[0],0),y.writeUInt32BE(x[3],4),y.writeUInt32BE(x[2],8),y.writeUInt32BE(x[1],12),y},d.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},gv.AES=d,gv}var mv,E4;function eP(){if(E4)return mv;E4=1;var e=ar().Buffer,t=e.alloc(16,0);function r(i){return[i.readUInt32BE(0),i.readUInt32BE(4),i.readUInt32BE(8),i.readUInt32BE(12)]}function n(i){var d=e.allocUnsafe(16);return d.writeUInt32BE(i[0]>>>0,0),d.writeUInt32BE(i[1]>>>0,4),d.writeUInt32BE(i[2]>>>0,8),d.writeUInt32BE(i[3]>>>0,12),d}function l(i){this.h=i,this.state=e.alloc(16,0),this.cache=e.allocUnsafe(0)}return l.prototype.ghash=function(i){for(var d=-1;++d<i.length;)this.state[d]^=i[d];this._multiply()},l.prototype._multiply=function(){for(var i=r(this.h),d=[0,0,0,0],p,g,x,y=-1;++y<128;){for(g=(this.state[~~(y/8)]&1<<7-y%8)!==0,g&&(d[0]^=i[0],d[1]^=i[1],d[2]^=i[2],d[3]^=i[3]),x=(i[3]&1)!==0,p=3;p>0;p--)i[p]=i[p]>>>1|(i[p-1]&1)<<31;i[0]=i[0]>>>1,x&&(i[0]=i[0]^225<<24)}this.state=n(d)},l.prototype.update=function(i){this.cache=e.concat([this.cache,i]);for(var d;this.cache.length>=16;)d=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(d)},l.prototype.final=function(i,d){return this.cache.length&&this.ghash(e.concat([this.cache,t],16)),this.ghash(n([0,i,0,d])),this.state},mv=l,mv}var yv,I4;function IT(){if(I4)return yv;I4=1;var e=Dp(),t=ar().Buffer,r=Oo(),n=sr(),l=eP(),i=Id(),d=RT();function p(y,w){var j=0;y.length!==w.length&&j++;for(var _=Math.min(y.length,w.length),A=0;A<_;++A)j+=y[A]^w[A];return j}function g(y,w,j){if(w.length===12)return y._finID=t.concat([w,t.from([0,0,0,1])]),t.concat([w,t.from([0,0,0,2])]);var _=new l(j),A=w.length,E=A%16;_.update(w),E&&(E=16-E,_.update(t.alloc(E,0))),_.update(t.alloc(8,0));var P=A*8,z=t.alloc(8);z.writeUIntBE(P,0,8),_.update(z),y._finID=_.state;var B=t.from(y._finID);return d(B),B}function x(y,w,j,_){r.call(this);var A=t.alloc(4,0);this._cipher=new e.AES(w);var E=this._cipher.encryptBlock(A);this._ghash=new l(E),j=g(this,j,E),this._prev=t.from(j),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=_,this._alen=0,this._len=0,this._mode=y,this._authTag=null,this._called=!1}return n(x,r),x.prototype._update=function(y){if(!this._called&&this._alen){var w=16-this._alen%16;w<16&&(w=t.alloc(w,0),this._ghash.update(w))}this._called=!0;var j=this._mode.encrypt(this,y);return this._decrypt?this._ghash.update(y):this._ghash.update(j),this._len+=y.length,j},x.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var y=i(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&p(y,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=y,this._cipher.scrub()},x.prototype.getAuthTag=function(){if(this._decrypt||!t.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},x.prototype.setAuthTag=function(w){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=w},x.prototype.setAAD=function(w){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(w),this._alen+=w.length},yv=x,yv}var vv,z4;function zT(){if(z4)return vv;z4=1;var e=Dp(),t=ar().Buffer,r=Oo(),n=sr();function l(i,d,p,g){r.call(this),this._cipher=new e.AES(d),this._prev=t.from(p),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=g,this._mode=i}return n(l,r),l.prototype._update=function(i){return this._mode.encrypt(this,i,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},vv=l,vv}var xv,B4;function Lp(){if(B4)return xv;B4=1;var e=ar().Buffer,t=Kb();function r(n,l,i,d){if(e.isBuffer(n)||(n=e.from(n,"binary")),l&&(e.isBuffer(l)||(l=e.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var p=i/8,g=e.alloc(p),x=e.alloc(d||0),y=e.alloc(0);p>0||d>0;){var w=new t;w.update(y),w.update(n),l&&w.update(l),y=w.digest();var j=0;if(p>0){var _=g.length-p;j=Math.min(p,y.length),y.copy(g,_,0,j),p-=j}if(j<y.length&&d>0){var A=x.length-d,E=Math.min(d,y.length-j);y.copy(x,A,j,j+E),d-=E}}return y.fill(0),{key:g,iv:x}}return xv=r,xv}var P4;function tP(){if(P4)return gh;P4=1;var e=nw(),t=IT(),r=ar().Buffer,n=zT(),l=Oo(),i=Dp(),d=Lp(),p=sr();function g(_,A,E){l.call(this),this._cache=new y,this._cipher=new i.AES(A),this._prev=r.from(E),this._mode=_,this._autopadding=!0}p(g,l),g.prototype._update=function(_){this._cache.add(_);for(var A,E,P=[];A=this._cache.get();)E=this._mode.encrypt(this,A),P.push(E);return r.concat(P)};var x=r.alloc(16,16);g.prototype._final=function(){var _=this._cache.flush();if(this._autopadding)return _=this._mode.encrypt(this,_),this._cipher.scrub(),_;if(!_.equals(x))throw this._cipher.scrub(),new Error("data not multiple of block length")},g.prototype.setAutoPadding=function(_){return this._autopadding=!!_,this};function y(){this.cache=r.allocUnsafe(0)}y.prototype.add=function(_){this.cache=r.concat([this.cache,_])},y.prototype.get=function(){if(this.cache.length>15){var _=this.cache.slice(0,16);return this.cache=this.cache.slice(16),_}return null},y.prototype.flush=function(){for(var _=16-this.cache.length,A=r.allocUnsafe(_),E=-1;++E<_;)A.writeUInt8(_,E);return r.concat([this.cache,A])};function w(_,A,E){var P=e[_.toLowerCase()];if(!P)throw new TypeError("invalid suite type");if(typeof A=="string"&&(A=r.from(A)),A.length!==P.key/8)throw new TypeError("invalid key length "+A.length);if(typeof E=="string"&&(E=r.from(E)),P.mode!=="GCM"&&E.length!==P.iv)throw new TypeError("invalid iv length "+E.length);return P.type==="stream"?new n(P.module,A,E):P.type==="auth"?new t(P.module,A,E):new g(P.module,A,E)}function j(_,A){var E=e[_.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var P=d(A,!1,E.key,E.iv);return w(_,P.key,P.iv)}return gh.createCipheriv=w,gh.createCipher=j,gh}var vh={},N4;function rP(){if(N4)return vh;N4=1;var e=IT(),t=ar().Buffer,r=nw(),n=zT(),l=Oo(),i=Dp(),d=Lp(),p=sr();function g(_,A,E){l.call(this),this._cache=new x,this._last=void 0,this._cipher=new i.AES(A),this._prev=t.from(E),this._mode=_,this._autopadding=!0}p(g,l),g.prototype._update=function(_){this._cache.add(_);for(var A,E,P=[];A=this._cache.get(this._autopadding);)E=this._mode.decrypt(this,A),P.push(E);return t.concat(P)},g.prototype._final=function(){var _=this._cache.flush();if(this._autopadding)return y(this._mode.decrypt(this,_));if(_)throw new Error("data not multiple of block length")},g.prototype.setAutoPadding=function(_){return this._autopadding=!!_,this};function x(){this.cache=t.allocUnsafe(0)}x.prototype.add=function(_){this.cache=t.concat([this.cache,_])},x.prototype.get=function(_){var A;if(_){if(this.cache.length>16)return A=this.cache.slice(0,16),this.cache=this.cache.slice(16),A}else if(this.cache.length>=16)return A=this.cache.slice(0,16),this.cache=this.cache.slice(16),A;return null},x.prototype.flush=function(){if(this.cache.length)return this.cache};function y(_){var A=_[15];if(A<1||A>16)throw new Error("unable to decrypt data");for(var E=-1;++E<A;)if(_[E+(16-A)]!==A)throw new Error("unable to decrypt data");if(A!==16)return _.slice(0,16-A)}function w(_,A,E){var P=r[_.toLowerCase()];if(!P)throw new TypeError("invalid suite type");if(typeof E=="string"&&(E=t.from(E)),P.mode!=="GCM"&&E.length!==P.iv)throw new TypeError("invalid iv length "+E.length);if(typeof A=="string"&&(A=t.from(A)),A.length!==P.key/8)throw new TypeError("invalid key length "+A.length);return P.type==="stream"?new n(P.module,A,E,!0):P.type==="auth"?new e(P.module,A,E,!0):new g(P.module,A,E)}function j(_,A){var E=r[_.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var P=d(A,!1,E.key,E.iv);return w(_,P.key,P.iv)}return vh.createDecipher=j,vh.createDecipheriv=w,vh}var D4;function iw(){if(D4)return Di;D4=1;var e=tP(),t=rP(),r=ET;function n(){return Object.keys(r)}return Di.createCipher=Di.Cipher=e.createCipher,Di.createCipheriv=Di.Cipheriv=e.createCipheriv,Di.createDecipher=Di.Decipher=t.createDecipher,Di.createDecipheriv=Di.Decipheriv=t.createDecipheriv,Di.listCiphers=Di.getCiphers=n,Di}var bv={},L4;function nP(){return L4||(L4=1,(function(e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}})(bv)),bv}var O4;function iP(){if(O4)return Ni;O4=1;var e=HB(),t=iw(),r=nw(),n=nP(),l=Lp();function i(y,w){y=y.toLowerCase();var j,_;if(r[y])j=r[y].key,_=r[y].iv;else if(n[y])j=n[y].key*8,_=n[y].iv;else throw new TypeError("invalid suite type");var A=l(w,!1,j,_);return p(y,A.key,A.iv)}function d(y,w){y=y.toLowerCase();var j,_;if(r[y])j=r[y].key,_=r[y].iv;else if(n[y])j=n[y].key*8,_=n[y].iv;else throw new TypeError("invalid suite type");var A=l(w,!1,j,_);return g(y,A.key,A.iv)}function p(y,w,j){if(y=y.toLowerCase(),r[y])return t.createCipheriv(y,w,j);if(n[y])return new e({key:w,iv:j,mode:y});throw new TypeError("invalid suite type")}function g(y,w,j){if(y=y.toLowerCase(),r[y])return t.createDecipheriv(y,w,j);if(n[y])return new e({key:w,iv:j,mode:y,decrypt:!0});throw new TypeError("invalid suite type")}function x(){return Object.keys(n).concat(t.getCiphers())}return Ni.createCipher=Ni.Cipher=i,Ni.createCipheriv=Ni.Cipheriv=p,Ni.createDecipher=Ni.Decipher=d,Ni.createDecipheriv=Ni.Decipheriv=g,Ni.listCiphers=Ni.getCiphers=x,Ni}var ua={},Wh={exports:{}},sP=Wh.exports,F4;function BT(){return F4||(F4=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,sP)})(Wh)),Wh.exports}var Vh={exports:{}},oP=Vh.exports,U4;function aP(){return U4||(U4=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,oP)})(Vh)),Vh.exports}var xh={exports:{}},$4;function sw(){if($4)return xh.exports;$4=1;var e;xh.exports=function(l){return e||(e=new t(null)),e.generate(l)};function t(n){this.rand=n}if(xh.exports.Rand=t,t.prototype.generate=function(l){return this._rand(l)},t.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var i=new Uint8Array(l),d=0;d<i.length;d++)i[d]=this.rand.getByte();return i},typeof self=="object")self.crypto&&self.crypto.getRandomValues?t.prototype._rand=function(l){var i=new Uint8Array(l);return self.crypto.getRandomValues(i),i}:self.msCrypto&&self.msCrypto.getRandomValues?t.prototype._rand=function(l){var i=new Uint8Array(l);return self.msCrypto.getRandomValues(i),i}:typeof window=="object"&&(t.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=YT();if(typeof r.randomBytes!="function")throw new Error("Not supported");t.prototype._rand=function(l){return r.randomBytes(l)}}catch{}return xh.exports}var wv,q4;function PT(){if(q4)return wv;q4=1;var e=aP(),t=sw();function r(n){this.rand=n||new t.Rand}return wv=r,r.create=function(l){return new r(l)},r.prototype._randbelow=function(l){var i=l.bitLength(),d=Math.ceil(i/8);do var p=new e(this.rand.generate(d));while(p.cmp(l)>=0);return p},r.prototype._randrange=function(l,i){var d=i.sub(l);return l.add(this._randbelow(d))},r.prototype.test=function(l,i,d){var p=l.bitLength(),g=e.mont(l),x=new e(1).toRed(g);i||(i=Math.max(1,p/48|0));for(var y=l.subn(1),w=0;!y.testn(w);w++);for(var j=l.shrn(w),_=y.toRed(g),A=!0;i>0;i--){var E=this._randrange(new e(2),y);d&&d(E);var P=E.toRed(g).redPow(j);if(!(P.cmp(x)===0||P.cmp(_)===0)){for(var z=1;z<w;z++){if(P=P.redSqr(),P.cmp(x)===0)return!1;if(P.cmp(_)===0)break}if(z===w)return!1}}return A},r.prototype.getDivisor=function(l,i){var d=l.bitLength(),p=e.mont(l),g=new e(1).toRed(p);i||(i=Math.max(1,d/48|0));for(var x=l.subn(1),y=0;!x.testn(y);y++);for(var w=l.shrn(y),j=x.toRed(p);i>0;i--){var _=this._randrange(new e(2),x),A=l.gcd(_);if(A.cmpn(1)!==0)return A;var E=_.toRed(p).redPow(w);if(!(E.cmp(g)===0||E.cmp(j)===0)){for(var P=1;P<y;P++){if(E=E.redSqr(),E.cmp(g)===0)return E.fromRed().subn(1).gcd(l);if(E.cmp(j)===0)break}if(P===y)return E=E.redSqr(),E.fromRed().subn(1).gcd(l)}}return!1},wv}var _v,H4;function NT(){if(H4)return _v;H4=1;var e=rc();_v=P,P.simpleSieve=A,P.fermatTest=E;var t=BT(),r=new t(24),n=PT(),l=new n,i=new t(1),d=new t(2),p=new t(5);new t(16),new t(8);var g=new t(10),x=new t(3);new t(7);var y=new t(11),w=new t(4);new t(12);var j=null;function _(){if(j!==null)return j;var z=1048576,B=[];B[0]=2;for(var D=1,U=3;U<z;U+=2){for(var G=Math.ceil(Math.sqrt(U)),$=0;$<D&&B[$]<=G&&U%B[$]!==0;$++);D!==$&&B[$]<=G||(B[D++]=U)}return j=B,B}function A(z){for(var B=_(),D=0;D<B.length;D++)if(z.modn(B[D])===0)return z.cmpn(B[D])===0;return!0}function E(z){var B=t.mont(z);return d.toRed(B).redPow(z.subn(1)).fromRed().cmpn(1)===0}function P(z,B){if(z<16)return B===2||B===5?new t([140,123]):new t([140,39]);B=new t(B);for(var D,U;;){for(D=new t(e(Math.ceil(z/8)));D.bitLength()>z;)D.ishrn(1);if(D.isEven()&&D.iadd(i),D.testn(1)||D.iadd(d),B.cmp(d)){if(!B.cmp(p))for(;D.mod(g).cmp(x);)D.iadd(w)}else for(;D.mod(r).cmp(y);)D.iadd(w);if(U=D.shrn(1),A(U)&&A(D)&&E(U)&&E(D)&&l.test(U)&&l.test(D))return D}}return _v}const lP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},cP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},uP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},dP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},fP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},hP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},pP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},gP={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},mP={modp1:lP,modp2:cP,modp5:uP,modp14:dP,modp15:fP,modp16:hP,modp17:pP,modp18:gP};var Sv,W4;function yP(){if(W4)return Sv;W4=1;var e=BT(),t=PT(),r=new t,n=new e(24),l=new e(11),i=new e(10),d=new e(3),p=new e(7),g=NT(),x=rc();Sv=A;function y(P,z){return z=z||"utf8",Buffer.isBuffer(P)||(P=new Buffer(P,z)),this._pub=new e(P),this}function w(P,z){return z=z||"utf8",Buffer.isBuffer(P)||(P=new Buffer(P,z)),this._priv=new e(P),this}var j={};function _(P,z){var B=z.toString("hex"),D=[B,P.toString(16)].join("_");if(D in j)return j[D];var U=0;if(P.isEven()||!g.simpleSieve||!g.fermatTest(P)||!r.test(P))return U+=1,B==="02"||B==="05"?U+=8:U+=4,j[D]=U,U;r.test(P.shrn(1))||(U+=2);var G;switch(B){case"02":P.mod(n).cmp(l)&&(U+=8);break;case"05":G=P.mod(i),G.cmp(d)&&G.cmp(p)&&(U+=8);break;default:U+=4}return j[D]=U,U}function A(P,z,B){this.setGenerator(z),this.__prime=new e(P),this._prime=e.mont(this.__prime),this._primeLen=P.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,B?(this.setPublicKey=y,this.setPrivateKey=w):this._primeCode=8}Object.defineProperty(A.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=_(this.__prime,this.__gen)),this._primeCode}}),A.prototype.generateKeys=function(){return this._priv||(this._priv=new e(x(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},A.prototype.computeSecret=function(P){P=new e(P),P=P.toRed(this._prime);var z=P.redPow(this._priv).fromRed(),B=new Buffer(z.toArray()),D=this.getPrime();if(B.length<D.length){var U=new Buffer(D.length-B.length);U.fill(0),B=Buffer.concat([U,B])}return B},A.prototype.getPublicKey=function(z){return E(this._pub,z)},A.prototype.getPrivateKey=function(z){return E(this._priv,z)},A.prototype.getPrime=function(P){return E(this.__prime,P)},A.prototype.getGenerator=function(P){return E(this._gen,P)},A.prototype.setGenerator=function(P,z){return z=z||"utf8",Buffer.isBuffer(P)||(P=new Buffer(P,z)),this.__gen=P,this._gen=new e(P),this};function E(P,z){var B=new Buffer(P.toArray());return z?B.toString(z):B}return Sv}var V4;function vP(){if(V4)return ua;V4=1;var e=NT(),t=mP,r=yP();function n(d){var p=new Buffer(t[d].prime,"hex"),g=new Buffer(t[d].gen,"hex");return new r(p,g)}var l={binary:!0,hex:!0,base64:!0};function i(d,p,g,x){return Buffer.isBuffer(p)||l[p]===void 0?i(d,"binary",p,g):(p=p||"binary",x=x||"binary",g=g||new Buffer([2]),Buffer.isBuffer(g)||(g=new Buffer(g,x)),typeof d=="number"?new r(e(d,g),g,!0):(Buffer.isBuffer(d)||(d=new Buffer(d,p)),new r(d,g,!0)))}return ua.DiffieHellmanGroup=ua.createDiffieHellmanGroup=ua.getDiffieHellman=n,ua.createDiffieHellman=ua.DiffieHellman=i,ua}var ku={exports:{}},Gh={exports:{}},xP=Gh.exports,G4;function ow(){return G4||(G4=1,(function(e){(function(t,r){function n(c,h){if(!c)throw new Error(h||"Assertion failed")}function l(c,h){c.super_=h;var v=function(){};v.prototype=h.prototype,c.prototype=new v,c.prototype.constructor=c}function i(c,h,v){if(i.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((h==="le"||h==="be")&&(v=h,h=10),this._init(c||0,h||10,v||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(h){return h instanceof i?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===i.wordSize&&Array.isArray(h.words)},i.max=function(h,v){return h.cmp(v)>0?h:v},i.min=function(h,v){return h.cmp(v)<0?h:v},i.prototype._init=function(h,v,b){if(typeof h=="number")return this._initNumber(h,v,b);if(typeof h=="object")return this._initArray(h,v,b);v==="hex"&&(v=16),n(v===(v|0)&&v>=2&&v<=36),h=h.toString().replace(/\s+/g,"");var M=0;h[0]==="-"&&(M++,this.negative=1),M<h.length&&(v===16?this._parseHex(h,M,b):(this._parseBase(h,v,M),b==="le"&&this._initArray(this.toArray(),v,b)))},i.prototype._initNumber=function(h,v,b){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(n(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),v,b)},i.prototype._initArray=function(h,v,b){if(n(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,S,a=0;if(b==="be")for(M=h.length-1,R=0;M>=0;M-=3)S=h[M]|h[M-1]<<8|h[M-2]<<16,this.words[R]|=S<<a&67108863,this.words[R+1]=S>>>26-a&67108863,a+=24,a>=26&&(a-=26,R++);else if(b==="le")for(M=0,R=0;M<h.length;M+=3)S=h[M]|h[M+1]<<8|h[M+2]<<16,this.words[R]|=S<<a&67108863,this.words[R+1]=S>>>26-a&67108863,a+=24,a>=26&&(a-=26,R++);return this._strip()};function p(c,h){var v=c.charCodeAt(h);if(v>=48&&v<=57)return v-48;if(v>=65&&v<=70)return v-55;if(v>=97&&v<=102)return v-87;n(!1,"Invalid character in "+c)}function g(c,h,v){var b=p(c,v);return v-1>=h&&(b|=p(c,v-1)<<4),b}i.prototype._parseHex=function(h,v,b){this.length=Math.ceil((h.length-v)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R=0,S=0,a;if(b==="be")for(M=h.length-1;M>=v;M-=2)a=g(h,v,M)<<R,this.words[S]|=a&67108863,R>=18?(R-=18,S+=1,this.words[S]|=a>>>26):R+=8;else{var k=h.length-v;for(M=k%2===0?v+1:v;M<h.length;M+=2)a=g(h,v,M)<<R,this.words[S]|=a&67108863,R>=18?(R-=18,S+=1,this.words[S]|=a>>>26):R+=8}this._strip()};function x(c,h,v,b){for(var M=0,R=0,S=Math.min(c.length,v),a=h;a<S;a++){var k=c.charCodeAt(a)-48;M*=b,k>=49?R=k-49+10:k>=17?R=k-17+10:R=k,n(k>=0&&R<b,"Invalid character"),M+=R}return M}i.prototype._parseBase=function(h,v,b){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=v)M++;M--,R=R/v|0;for(var S=h.length-b,a=S%M,k=Math.min(S,S-a)+b,N=0,L=b;L<k;L+=M)N=x(h,L,L+M,v),this.imuln(R),this.words[0]+N<67108864?this.words[0]+=N:this._iaddn(N);if(a!==0){var X=1;for(N=x(h,L,h.length,v),L=0;L<a;L++)X*=v;this.imuln(X),this.words[0]+N<67108864?this.words[0]+=N:this._iaddn(N)}this._strip()},i.prototype.copy=function(h){h.words=new Array(this.length);for(var v=0;v<this.length;v++)h.words[v]=this.words[v];h.length=this.length,h.negative=this.negative,h.red=this.red};function y(c,h){c.words=h.words,c.length=h.length,c.negative=h.negative,c.red=h.red}if(i.prototype._move=function(h){y(h,this)},i.prototype.clone=function(){var h=new i(null);return this.copy(h),h},i.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{i.prototype.inspect=w}else i.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var j=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(h,v){h=h||10,v=v|0||1;var b;if(h===16||h==="hex"){b="";for(var M=0,R=0,S=0;S<this.length;S++){var a=this.words[S],k=((a<<M|R)&16777215).toString(16);R=a>>>24-M&16777215,M+=2,M>=26&&(M-=26,S--),R!==0||S!==this.length-1?b=j[6-k.length]+k+b:b=k+b}for(R!==0&&(b=R.toString(16)+b);b.length%v!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(h===(h|0)&&h>=2&&h<=36){var N=_[h],L=A[h];b="";var X=this.clone();for(X.negative=0;!X.isZero();){var se=X.modrn(L).toString(h);X=X.idivn(L),X.isZero()?b=se+b:b=j[N-se.length]+se+b}for(this.isZero()&&(b="0"+b);b.length%v!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},i.prototype.toJSON=function(){return this.toString(16,2)},d&&(i.prototype.toBuffer=function(h,v){return this.toArrayLike(d,h,v)}),i.prototype.toArray=function(h,v){return this.toArrayLike(Array,h,v)};var E=function(h,v){return h.allocUnsafe?h.allocUnsafe(v):new h(v)};i.prototype.toArrayLike=function(h,v,b){this._strip();var M=this.byteLength(),R=b||Math.max(1,M);n(M<=R,"byte array longer than desired length"),n(R>0,"Requested array length <= 0");var S=E(h,R),a=v==="le"?"LE":"BE";return this["_toArrayLike"+a](S,M),S},i.prototype._toArrayLikeLE=function(h,v){for(var b=0,M=0,R=0,S=0;R<this.length;R++){var a=this.words[R]<<S|M;h[b++]=a&255,b<h.length&&(h[b++]=a>>8&255),b<h.length&&(h[b++]=a>>16&255),S===6?(b<h.length&&(h[b++]=a>>24&255),M=0,S=0):(M=a>>>24,S+=2)}if(b<h.length)for(h[b++]=M;b<h.length;)h[b++]=0},i.prototype._toArrayLikeBE=function(h,v){for(var b=h.length-1,M=0,R=0,S=0;R<this.length;R++){var a=this.words[R]<<S|M;h[b--]=a&255,b>=0&&(h[b--]=a>>8&255),b>=0&&(h[b--]=a>>16&255),S===6?(b>=0&&(h[b--]=a>>24&255),M=0,S=0):(M=a>>>24,S+=2)}if(b>=0)for(h[b--]=M;b>=0;)h[b--]=0},Math.clz32?i.prototype._countBits=function(h){return 32-Math.clz32(h)}:i.prototype._countBits=function(h){var v=h,b=0;return v>=4096&&(b+=13,v>>>=13),v>=64&&(b+=7,v>>>=7),v>=8&&(b+=4,v>>>=4),v>=2&&(b+=2,v>>>=2),b+v},i.prototype._zeroBits=function(h){if(h===0)return 26;var v=h,b=0;return(v&8191)===0&&(b+=13,v>>>=13),(v&127)===0&&(b+=7,v>>>=7),(v&15)===0&&(b+=4,v>>>=4),(v&3)===0&&(b+=2,v>>>=2),(v&1)===0&&b++,b},i.prototype.bitLength=function(){var h=this.words[this.length-1],v=this._countBits(h);return(this.length-1)*26+v};function P(c){for(var h=new Array(c.bitLength()),v=0;v<h.length;v++){var b=v/26|0,M=v%26;h[v]=c.words[b]>>>M&1}return h}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,v=0;v<this.length;v++){var b=this._zeroBits(this.words[v]);if(h+=b,b!==26)break}return h},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},i.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var v=0;v<h.length;v++)this.words[v]=this.words[v]|h.words[v];return this._strip()},i.prototype.ior=function(h){return n((this.negative|h.negative)===0),this.iuor(h)},i.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},i.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},i.prototype.iuand=function(h){var v;this.length>h.length?v=h:v=this;for(var b=0;b<v.length;b++)this.words[b]=this.words[b]&h.words[b];return this.length=v.length,this._strip()},i.prototype.iand=function(h){return n((this.negative|h.negative)===0),this.iuand(h)},i.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},i.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},i.prototype.iuxor=function(h){var v,b;this.length>h.length?(v=this,b=h):(v=h,b=this);for(var M=0;M<b.length;M++)this.words[M]=v.words[M]^b.words[M];if(this!==v)for(;M<v.length;M++)this.words[M]=v.words[M];return this.length=v.length,this._strip()},i.prototype.ixor=function(h){return n((this.negative|h.negative)===0),this.iuxor(h)},i.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},i.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},i.prototype.inotn=function(h){n(typeof h=="number"&&h>=0);var v=Math.ceil(h/26)|0,b=h%26;this._expand(v),b>0&&v--;for(var M=0;M<v;M++)this.words[M]=~this.words[M]&67108863;return b>0&&(this.words[M]=~this.words[M]&67108863>>26-b),this._strip()},i.prototype.notn=function(h){return this.clone().inotn(h)},i.prototype.setn=function(h,v){n(typeof h=="number"&&h>=0);var b=h/26|0,M=h%26;return this._expand(b+1),v?this.words[b]=this.words[b]|1<<M:this.words[b]=this.words[b]&~(1<<M),this._strip()},i.prototype.iadd=function(h){var v;if(this.negative!==0&&h.negative===0)return this.negative=0,v=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,v=this.isub(h),h.negative=1,v._normSign();var b,M;this.length>h.length?(b=this,M=h):(b=h,M=this);for(var R=0,S=0;S<M.length;S++)v=(b.words[S]|0)+(M.words[S]|0)+R,this.words[S]=v&67108863,R=v>>>26;for(;R!==0&&S<b.length;S++)v=(b.words[S]|0)+R,this.words[S]=v&67108863,R=v>>>26;if(this.length=b.length,R!==0)this.words[this.length]=R,this.length++;else if(b!==this)for(;S<b.length;S++)this.words[S]=b.words[S];return this},i.prototype.add=function(h){var v;return h.negative!==0&&this.negative===0?(h.negative=0,v=this.sub(h),h.negative^=1,v):h.negative===0&&this.negative!==0?(this.negative=0,v=h.sub(this),this.negative=1,v):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},i.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var v=this.iadd(h);return h.negative=1,v._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var b=this.cmp(h);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,R;b>0?(M=this,R=h):(M=h,R=this);for(var S=0,a=0;a<R.length;a++)v=(M.words[a]|0)-(R.words[a]|0)+S,S=v>>26,this.words[a]=v&67108863;for(;S!==0&&a<M.length;a++)v=(M.words[a]|0)+S,S=v>>26,this.words[a]=v&67108863;if(S===0&&a<M.length&&M!==this)for(;a<M.length;a++)this.words[a]=M.words[a];return this.length=Math.max(this.length,a),M!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(h){return this.clone().isub(h)};function z(c,h,v){v.negative=h.negative^c.negative;var b=c.length+h.length|0;v.length=b,b=b-1|0;var M=c.words[0]|0,R=h.words[0]|0,S=M*R,a=S&67108863,k=S/67108864|0;v.words[0]=a;for(var N=1;N<b;N++){for(var L=k>>>26,X=k&67108863,se=Math.min(N,h.length-1),te=Math.max(0,N-c.length+1);te<=se;te++){var K=N-te|0;M=c.words[K]|0,R=h.words[te]|0,S=M*R+X,L+=S/67108864|0,X=S&67108863}v.words[N]=X|0,k=L|0}return k!==0?v.words[N]=k|0:v.length--,v._strip()}var B=function(h,v,b){var M=h.words,R=v.words,S=b.words,a=0,k,N,L,X=M[0]|0,se=X&8191,te=X>>>13,K=M[1]|0,J=K&8191,ne=K>>>13,oe=M[2]|0,ae=oe&8191,ee=oe>>>13,ue=M[3]|0,Ce=ue&8191,ve=ue>>>13,ge=M[4]|0,Je=ge&8191,Te=ge>>>13,ze=M[5]|0,vt=ze&8191,he=ze>>>13,me=M[6]|0,Me=me&8191,pe=me>>>13,ke=M[7]|0,_e=ke&8191,Z=ke>>>13,q=M[8]|0,V=q&8191,ie=q>>>13,ce=M[9]|0,be=ce&8191,fe=ce>>>13,Ae=R[0]|0,ht=Ae&8191,je=Ae>>>13,Ie=R[1]|0,pt=Ie&8191,Ne=Ie>>>13,Ge=R[2]|0,Ot=Ge&8191,Oe=Ge>>>13,Ze=R[3]|0,Lt=Ze&8191,Pe=Ze>>>13,Ve=R[4]|0,Bt=Ve&8191,Fe=Ve>>>13,Xe=R[5]|0,Et=Xe&8191,Be=Xe>>>13,Ue=R[6]|0,It=Ue&8191,$e=Ue>>>13,Qe=R[7]|0,Ft=Qe&8191,qe=Qe>>>13,Ye=R[8]|0,Ut=Ye&8191,ye=Ye>>>13,xe=R[9]|0,nt=xe&8191,ct=xe>>>13;b.negative=h.negative^v.negative,b.length=19,k=Math.imul(se,ht),N=Math.imul(se,je),N=N+Math.imul(te,ht)|0,L=Math.imul(te,je);var wt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(wt>>>26)|0,wt&=67108863,k=Math.imul(J,ht),N=Math.imul(J,je),N=N+Math.imul(ne,ht)|0,L=Math.imul(ne,je),k=k+Math.imul(se,pt)|0,N=N+Math.imul(se,Ne)|0,N=N+Math.imul(te,pt)|0,L=L+Math.imul(te,Ne)|0;var St=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(St>>>26)|0,St&=67108863,k=Math.imul(ae,ht),N=Math.imul(ae,je),N=N+Math.imul(ee,ht)|0,L=Math.imul(ee,je),k=k+Math.imul(J,pt)|0,N=N+Math.imul(J,Ne)|0,N=N+Math.imul(ne,pt)|0,L=L+Math.imul(ne,Ne)|0,k=k+Math.imul(se,Ot)|0,N=N+Math.imul(se,Oe)|0,N=N+Math.imul(te,Ot)|0,L=L+Math.imul(te,Oe)|0;var Le=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Le>>>26)|0,Le&=67108863,k=Math.imul(Ce,ht),N=Math.imul(Ce,je),N=N+Math.imul(ve,ht)|0,L=Math.imul(ve,je),k=k+Math.imul(ae,pt)|0,N=N+Math.imul(ae,Ne)|0,N=N+Math.imul(ee,pt)|0,L=L+Math.imul(ee,Ne)|0,k=k+Math.imul(J,Ot)|0,N=N+Math.imul(J,Oe)|0,N=N+Math.imul(ne,Ot)|0,L=L+Math.imul(ne,Oe)|0,k=k+Math.imul(se,Lt)|0,N=N+Math.imul(se,Pe)|0,N=N+Math.imul(te,Lt)|0,L=L+Math.imul(te,Pe)|0;var we=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(we>>>26)|0,we&=67108863,k=Math.imul(Je,ht),N=Math.imul(Je,je),N=N+Math.imul(Te,ht)|0,L=Math.imul(Te,je),k=k+Math.imul(Ce,pt)|0,N=N+Math.imul(Ce,Ne)|0,N=N+Math.imul(ve,pt)|0,L=L+Math.imul(ve,Ne)|0,k=k+Math.imul(ae,Ot)|0,N=N+Math.imul(ae,Oe)|0,N=N+Math.imul(ee,Ot)|0,L=L+Math.imul(ee,Oe)|0,k=k+Math.imul(J,Lt)|0,N=N+Math.imul(J,Pe)|0,N=N+Math.imul(ne,Lt)|0,L=L+Math.imul(ne,Pe)|0,k=k+Math.imul(se,Bt)|0,N=N+Math.imul(se,Fe)|0,N=N+Math.imul(te,Bt)|0,L=L+Math.imul(te,Fe)|0;var rt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(rt>>>26)|0,rt&=67108863,k=Math.imul(vt,ht),N=Math.imul(vt,je),N=N+Math.imul(he,ht)|0,L=Math.imul(he,je),k=k+Math.imul(Je,pt)|0,N=N+Math.imul(Je,Ne)|0,N=N+Math.imul(Te,pt)|0,L=L+Math.imul(Te,Ne)|0,k=k+Math.imul(Ce,Ot)|0,N=N+Math.imul(Ce,Oe)|0,N=N+Math.imul(ve,Ot)|0,L=L+Math.imul(ve,Oe)|0,k=k+Math.imul(ae,Lt)|0,N=N+Math.imul(ae,Pe)|0,N=N+Math.imul(ee,Lt)|0,L=L+Math.imul(ee,Pe)|0,k=k+Math.imul(J,Bt)|0,N=N+Math.imul(J,Fe)|0,N=N+Math.imul(ne,Bt)|0,L=L+Math.imul(ne,Fe)|0,k=k+Math.imul(se,Et)|0,N=N+Math.imul(se,Be)|0,N=N+Math.imul(te,Et)|0,L=L+Math.imul(te,Be)|0;var it=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(it>>>26)|0,it&=67108863,k=Math.imul(Me,ht),N=Math.imul(Me,je),N=N+Math.imul(pe,ht)|0,L=Math.imul(pe,je),k=k+Math.imul(vt,pt)|0,N=N+Math.imul(vt,Ne)|0,N=N+Math.imul(he,pt)|0,L=L+Math.imul(he,Ne)|0,k=k+Math.imul(Je,Ot)|0,N=N+Math.imul(Je,Oe)|0,N=N+Math.imul(Te,Ot)|0,L=L+Math.imul(Te,Oe)|0,k=k+Math.imul(Ce,Lt)|0,N=N+Math.imul(Ce,Pe)|0,N=N+Math.imul(ve,Lt)|0,L=L+Math.imul(ve,Pe)|0,k=k+Math.imul(ae,Bt)|0,N=N+Math.imul(ae,Fe)|0,N=N+Math.imul(ee,Bt)|0,L=L+Math.imul(ee,Fe)|0,k=k+Math.imul(J,Et)|0,N=N+Math.imul(J,Be)|0,N=N+Math.imul(ne,Et)|0,L=L+Math.imul(ne,Be)|0,k=k+Math.imul(se,It)|0,N=N+Math.imul(se,$e)|0,N=N+Math.imul(te,It)|0,L=L+Math.imul(te,$e)|0;var yt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(yt>>>26)|0,yt&=67108863,k=Math.imul(_e,ht),N=Math.imul(_e,je),N=N+Math.imul(Z,ht)|0,L=Math.imul(Z,je),k=k+Math.imul(Me,pt)|0,N=N+Math.imul(Me,Ne)|0,N=N+Math.imul(pe,pt)|0,L=L+Math.imul(pe,Ne)|0,k=k+Math.imul(vt,Ot)|0,N=N+Math.imul(vt,Oe)|0,N=N+Math.imul(he,Ot)|0,L=L+Math.imul(he,Oe)|0,k=k+Math.imul(Je,Lt)|0,N=N+Math.imul(Je,Pe)|0,N=N+Math.imul(Te,Lt)|0,L=L+Math.imul(Te,Pe)|0,k=k+Math.imul(Ce,Bt)|0,N=N+Math.imul(Ce,Fe)|0,N=N+Math.imul(ve,Bt)|0,L=L+Math.imul(ve,Fe)|0,k=k+Math.imul(ae,Et)|0,N=N+Math.imul(ae,Be)|0,N=N+Math.imul(ee,Et)|0,L=L+Math.imul(ee,Be)|0,k=k+Math.imul(J,It)|0,N=N+Math.imul(J,$e)|0,N=N+Math.imul(ne,It)|0,L=L+Math.imul(ne,$e)|0,k=k+Math.imul(se,Ft)|0,N=N+Math.imul(se,qe)|0,N=N+Math.imul(te,Ft)|0,L=L+Math.imul(te,qe)|0;var Tt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,k=Math.imul(V,ht),N=Math.imul(V,je),N=N+Math.imul(ie,ht)|0,L=Math.imul(ie,je),k=k+Math.imul(_e,pt)|0,N=N+Math.imul(_e,Ne)|0,N=N+Math.imul(Z,pt)|0,L=L+Math.imul(Z,Ne)|0,k=k+Math.imul(Me,Ot)|0,N=N+Math.imul(Me,Oe)|0,N=N+Math.imul(pe,Ot)|0,L=L+Math.imul(pe,Oe)|0,k=k+Math.imul(vt,Lt)|0,N=N+Math.imul(vt,Pe)|0,N=N+Math.imul(he,Lt)|0,L=L+Math.imul(he,Pe)|0,k=k+Math.imul(Je,Bt)|0,N=N+Math.imul(Je,Fe)|0,N=N+Math.imul(Te,Bt)|0,L=L+Math.imul(Te,Fe)|0,k=k+Math.imul(Ce,Et)|0,N=N+Math.imul(Ce,Be)|0,N=N+Math.imul(ve,Et)|0,L=L+Math.imul(ve,Be)|0,k=k+Math.imul(ae,It)|0,N=N+Math.imul(ae,$e)|0,N=N+Math.imul(ee,It)|0,L=L+Math.imul(ee,$e)|0,k=k+Math.imul(J,Ft)|0,N=N+Math.imul(J,qe)|0,N=N+Math.imul(ne,Ft)|0,L=L+Math.imul(ne,qe)|0,k=k+Math.imul(se,Ut)|0,N=N+Math.imul(se,ye)|0,N=N+Math.imul(te,Ut)|0,L=L+Math.imul(te,ye)|0;var Yt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,k=Math.imul(be,ht),N=Math.imul(be,je),N=N+Math.imul(fe,ht)|0,L=Math.imul(fe,je),k=k+Math.imul(V,pt)|0,N=N+Math.imul(V,Ne)|0,N=N+Math.imul(ie,pt)|0,L=L+Math.imul(ie,Ne)|0,k=k+Math.imul(_e,Ot)|0,N=N+Math.imul(_e,Oe)|0,N=N+Math.imul(Z,Ot)|0,L=L+Math.imul(Z,Oe)|0,k=k+Math.imul(Me,Lt)|0,N=N+Math.imul(Me,Pe)|0,N=N+Math.imul(pe,Lt)|0,L=L+Math.imul(pe,Pe)|0,k=k+Math.imul(vt,Bt)|0,N=N+Math.imul(vt,Fe)|0,N=N+Math.imul(he,Bt)|0,L=L+Math.imul(he,Fe)|0,k=k+Math.imul(Je,Et)|0,N=N+Math.imul(Je,Be)|0,N=N+Math.imul(Te,Et)|0,L=L+Math.imul(Te,Be)|0,k=k+Math.imul(Ce,It)|0,N=N+Math.imul(Ce,$e)|0,N=N+Math.imul(ve,It)|0,L=L+Math.imul(ve,$e)|0,k=k+Math.imul(ae,Ft)|0,N=N+Math.imul(ae,qe)|0,N=N+Math.imul(ee,Ft)|0,L=L+Math.imul(ee,qe)|0,k=k+Math.imul(J,Ut)|0,N=N+Math.imul(J,ye)|0,N=N+Math.imul(ne,Ut)|0,L=L+Math.imul(ne,ye)|0,k=k+Math.imul(se,nt)|0,N=N+Math.imul(se,ct)|0,N=N+Math.imul(te,nt)|0,L=L+Math.imul(te,ct)|0;var Kt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,k=Math.imul(be,pt),N=Math.imul(be,Ne),N=N+Math.imul(fe,pt)|0,L=Math.imul(fe,Ne),k=k+Math.imul(V,Ot)|0,N=N+Math.imul(V,Oe)|0,N=N+Math.imul(ie,Ot)|0,L=L+Math.imul(ie,Oe)|0,k=k+Math.imul(_e,Lt)|0,N=N+Math.imul(_e,Pe)|0,N=N+Math.imul(Z,Lt)|0,L=L+Math.imul(Z,Pe)|0,k=k+Math.imul(Me,Bt)|0,N=N+Math.imul(Me,Fe)|0,N=N+Math.imul(pe,Bt)|0,L=L+Math.imul(pe,Fe)|0,k=k+Math.imul(vt,Et)|0,N=N+Math.imul(vt,Be)|0,N=N+Math.imul(he,Et)|0,L=L+Math.imul(he,Be)|0,k=k+Math.imul(Je,It)|0,N=N+Math.imul(Je,$e)|0,N=N+Math.imul(Te,It)|0,L=L+Math.imul(Te,$e)|0,k=k+Math.imul(Ce,Ft)|0,N=N+Math.imul(Ce,qe)|0,N=N+Math.imul(ve,Ft)|0,L=L+Math.imul(ve,qe)|0,k=k+Math.imul(ae,Ut)|0,N=N+Math.imul(ae,ye)|0,N=N+Math.imul(ee,Ut)|0,L=L+Math.imul(ee,ye)|0,k=k+Math.imul(J,nt)|0,N=N+Math.imul(J,ct)|0,N=N+Math.imul(ne,nt)|0,L=L+Math.imul(ne,ct)|0;var fr=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(fr>>>26)|0,fr&=67108863,k=Math.imul(be,Ot),N=Math.imul(be,Oe),N=N+Math.imul(fe,Ot)|0,L=Math.imul(fe,Oe),k=k+Math.imul(V,Lt)|0,N=N+Math.imul(V,Pe)|0,N=N+Math.imul(ie,Lt)|0,L=L+Math.imul(ie,Pe)|0,k=k+Math.imul(_e,Bt)|0,N=N+Math.imul(_e,Fe)|0,N=N+Math.imul(Z,Bt)|0,L=L+Math.imul(Z,Fe)|0,k=k+Math.imul(Me,Et)|0,N=N+Math.imul(Me,Be)|0,N=N+Math.imul(pe,Et)|0,L=L+Math.imul(pe,Be)|0,k=k+Math.imul(vt,It)|0,N=N+Math.imul(vt,$e)|0,N=N+Math.imul(he,It)|0,L=L+Math.imul(he,$e)|0,k=k+Math.imul(Je,Ft)|0,N=N+Math.imul(Je,qe)|0,N=N+Math.imul(Te,Ft)|0,L=L+Math.imul(Te,qe)|0,k=k+Math.imul(Ce,Ut)|0,N=N+Math.imul(Ce,ye)|0,N=N+Math.imul(ve,Ut)|0,L=L+Math.imul(ve,ye)|0,k=k+Math.imul(ae,nt)|0,N=N+Math.imul(ae,ct)|0,N=N+Math.imul(ee,nt)|0,L=L+Math.imul(ee,ct)|0;var or=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(or>>>26)|0,or&=67108863,k=Math.imul(be,Lt),N=Math.imul(be,Pe),N=N+Math.imul(fe,Lt)|0,L=Math.imul(fe,Pe),k=k+Math.imul(V,Bt)|0,N=N+Math.imul(V,Fe)|0,N=N+Math.imul(ie,Bt)|0,L=L+Math.imul(ie,Fe)|0,k=k+Math.imul(_e,Et)|0,N=N+Math.imul(_e,Be)|0,N=N+Math.imul(Z,Et)|0,L=L+Math.imul(Z,Be)|0,k=k+Math.imul(Me,It)|0,N=N+Math.imul(Me,$e)|0,N=N+Math.imul(pe,It)|0,L=L+Math.imul(pe,$e)|0,k=k+Math.imul(vt,Ft)|0,N=N+Math.imul(vt,qe)|0,N=N+Math.imul(he,Ft)|0,L=L+Math.imul(he,qe)|0,k=k+Math.imul(Je,Ut)|0,N=N+Math.imul(Je,ye)|0,N=N+Math.imul(Te,Ut)|0,L=L+Math.imul(Te,ye)|0,k=k+Math.imul(Ce,nt)|0,N=N+Math.imul(Ce,ct)|0,N=N+Math.imul(ve,nt)|0,L=L+Math.imul(ve,ct)|0;var mt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(mt>>>26)|0,mt&=67108863,k=Math.imul(be,Bt),N=Math.imul(be,Fe),N=N+Math.imul(fe,Bt)|0,L=Math.imul(fe,Fe),k=k+Math.imul(V,Et)|0,N=N+Math.imul(V,Be)|0,N=N+Math.imul(ie,Et)|0,L=L+Math.imul(ie,Be)|0,k=k+Math.imul(_e,It)|0,N=N+Math.imul(_e,$e)|0,N=N+Math.imul(Z,It)|0,L=L+Math.imul(Z,$e)|0,k=k+Math.imul(Me,Ft)|0,N=N+Math.imul(Me,qe)|0,N=N+Math.imul(pe,Ft)|0,L=L+Math.imul(pe,qe)|0,k=k+Math.imul(vt,Ut)|0,N=N+Math.imul(vt,ye)|0,N=N+Math.imul(he,Ut)|0,L=L+Math.imul(he,ye)|0,k=k+Math.imul(Je,nt)|0,N=N+Math.imul(Je,ct)|0,N=N+Math.imul(Te,nt)|0,L=L+Math.imul(Te,ct)|0;var _t=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(_t>>>26)|0,_t&=67108863,k=Math.imul(be,Et),N=Math.imul(be,Be),N=N+Math.imul(fe,Et)|0,L=Math.imul(fe,Be),k=k+Math.imul(V,It)|0,N=N+Math.imul(V,$e)|0,N=N+Math.imul(ie,It)|0,L=L+Math.imul(ie,$e)|0,k=k+Math.imul(_e,Ft)|0,N=N+Math.imul(_e,qe)|0,N=N+Math.imul(Z,Ft)|0,L=L+Math.imul(Z,qe)|0,k=k+Math.imul(Me,Ut)|0,N=N+Math.imul(Me,ye)|0,N=N+Math.imul(pe,Ut)|0,L=L+Math.imul(pe,ye)|0,k=k+Math.imul(vt,nt)|0,N=N+Math.imul(vt,ct)|0,N=N+Math.imul(he,nt)|0,L=L+Math.imul(he,ct)|0;var Pt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,k=Math.imul(be,It),N=Math.imul(be,$e),N=N+Math.imul(fe,It)|0,L=Math.imul(fe,$e),k=k+Math.imul(V,Ft)|0,N=N+Math.imul(V,qe)|0,N=N+Math.imul(ie,Ft)|0,L=L+Math.imul(ie,qe)|0,k=k+Math.imul(_e,Ut)|0,N=N+Math.imul(_e,ye)|0,N=N+Math.imul(Z,Ut)|0,L=L+Math.imul(Z,ye)|0,k=k+Math.imul(Me,nt)|0,N=N+Math.imul(Me,ct)|0,N=N+Math.imul(pe,nt)|0,L=L+Math.imul(pe,ct)|0;var Nt=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,k=Math.imul(be,Ft),N=Math.imul(be,qe),N=N+Math.imul(fe,Ft)|0,L=Math.imul(fe,qe),k=k+Math.imul(V,Ut)|0,N=N+Math.imul(V,ye)|0,N=N+Math.imul(ie,Ut)|0,L=L+Math.imul(ie,ye)|0,k=k+Math.imul(_e,nt)|0,N=N+Math.imul(_e,ct)|0,N=N+Math.imul(Z,nt)|0,L=L+Math.imul(Z,ct)|0;var er=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(er>>>26)|0,er&=67108863,k=Math.imul(be,Ut),N=Math.imul(be,ye),N=N+Math.imul(fe,Ut)|0,L=Math.imul(fe,ye),k=k+Math.imul(V,nt)|0,N=N+Math.imul(V,ct)|0,N=N+Math.imul(ie,nt)|0,L=L+Math.imul(ie,ct)|0;var Ci=(a+k|0)+((N&8191)<<13)|0;a=(L+(N>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,k=Math.imul(be,nt),N=Math.imul(be,ct),N=N+Math.imul(fe,nt)|0,L=Math.imul(fe,ct);var Ti=(a+k|0)+((N&8191)<<13)|0;return a=(L+(N>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,S[0]=wt,S[1]=St,S[2]=Le,S[3]=we,S[4]=rt,S[5]=it,S[6]=yt,S[7]=Tt,S[8]=Yt,S[9]=Kt,S[10]=fr,S[11]=or,S[12]=mt,S[13]=_t,S[14]=Pt,S[15]=Nt,S[16]=er,S[17]=Ci,S[18]=Ti,a!==0&&(S[19]=a,b.length++),b};Math.imul||(B=z);function D(c,h,v){v.negative=h.negative^c.negative,v.length=c.length+h.length;for(var b=0,M=0,R=0;R<v.length-1;R++){var S=M;M=0;for(var a=b&67108863,k=Math.min(R,h.length-1),N=Math.max(0,R-c.length+1);N<=k;N++){var L=R-N,X=c.words[L]|0,se=h.words[N]|0,te=X*se,K=te&67108863;S=S+(te/67108864|0)|0,K=K+a|0,a=K&67108863,S=S+(K>>>26)|0,M+=S>>>26,S&=67108863}v.words[R]=a,b=S,S=M}return b!==0?v.words[R]=b:v.length--,v._strip()}function U(c,h,v){return D(c,h,v)}i.prototype.mulTo=function(h,v){var b,M=this.length+h.length;return this.length===10&&h.length===10?b=B(this,h,v):M<63?b=z(this,h,v):M<1024?b=D(this,h,v):b=U(this,h,v),b},i.prototype.mul=function(h){var v=new i(null);return v.words=new Array(this.length+h.length),this.mulTo(h,v)},i.prototype.mulf=function(h){var v=new i(null);return v.words=new Array(this.length+h.length),U(this,h,v)},i.prototype.imul=function(h){return this.clone().mulTo(h,this)},i.prototype.imuln=function(h){var v=h<0;v&&(h=-h),n(typeof h=="number"),n(h<67108864);for(var b=0,M=0;M<this.length;M++){var R=(this.words[M]|0)*h,S=(R&67108863)+(b&67108863);b>>=26,b+=R/67108864|0,b+=S>>>26,this.words[M]=S&67108863}return b!==0&&(this.words[M]=b,this.length++),this.length=h===0?1:this.length,v?this.ineg():this},i.prototype.muln=function(h){return this.clone().imuln(h)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(h){var v=P(h);if(v.length===0)return new i(1);for(var b=this,M=0;M<v.length&&v[M]===0;M++,b=b.sqr());if(++M<v.length)for(var R=b.sqr();M<v.length;M++,R=R.sqr())v[M]!==0&&(b=b.mul(R));return b},i.prototype.iushln=function(h){n(typeof h=="number"&&h>=0);var v=h%26,b=(h-v)/26,M=67108863>>>26-v<<26-v,R;if(v!==0){var S=0;for(R=0;R<this.length;R++){var a=this.words[R]&M,k=(this.words[R]|0)-a<<v;this.words[R]=k|S,S=a>>>26-v}S&&(this.words[R]=S,this.length++)}if(b!==0){for(R=this.length-1;R>=0;R--)this.words[R+b]=this.words[R];for(R=0;R<b;R++)this.words[R]=0;this.length+=b}return this._strip()},i.prototype.ishln=function(h){return n(this.negative===0),this.iushln(h)},i.prototype.iushrn=function(h,v,b){n(typeof h=="number"&&h>=0);var M;v?M=(v-v%26)/26:M=0;var R=h%26,S=Math.min((h-R)/26,this.length),a=67108863^67108863>>>R<<R,k=b;if(M-=S,M=Math.max(0,M),k){for(var N=0;N<S;N++)k.words[N]=this.words[N];k.length=S}if(S!==0)if(this.length>S)for(this.length-=S,N=0;N<this.length;N++)this.words[N]=this.words[N+S];else this.words[0]=0,this.length=1;var L=0;for(N=this.length-1;N>=0&&(L!==0||N>=M);N--){var X=this.words[N]|0;this.words[N]=L<<26-R|X>>>R,L=X&a}return k&&L!==0&&(k.words[k.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(h,v,b){return n(this.negative===0),this.iushrn(h,v,b)},i.prototype.shln=function(h){return this.clone().ishln(h)},i.prototype.ushln=function(h){return this.clone().iushln(h)},i.prototype.shrn=function(h){return this.clone().ishrn(h)},i.prototype.ushrn=function(h){return this.clone().iushrn(h)},i.prototype.testn=function(h){n(typeof h=="number"&&h>=0);var v=h%26,b=(h-v)/26,M=1<<v;if(this.length<=b)return!1;var R=this.words[b];return!!(R&M)},i.prototype.imaskn=function(h){n(typeof h=="number"&&h>=0);var v=h%26,b=(h-v)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(v!==0&&b++,this.length=Math.min(b,this.length),v!==0){var M=67108863^67108863>>>v<<v;this.words[this.length-1]&=M}return this._strip()},i.prototype.maskn=function(h){return this.clone().imaskn(h)},i.prototype.iaddn=function(h){return n(typeof h=="number"),n(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<=h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},i.prototype._iaddn=function(h){this.words[0]+=h;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},i.prototype.isubn=function(h){if(n(typeof h=="number"),n(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},i.prototype.addn=function(h){return this.clone().iaddn(h)},i.prototype.subn=function(h){return this.clone().isubn(h)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(h,v,b){var M=h.length+b,R;this._expand(M);var S,a=0;for(R=0;R<h.length;R++){S=(this.words[R+b]|0)+a;var k=(h.words[R]|0)*v;S-=k&67108863,a=(S>>26)-(k/67108864|0),this.words[R+b]=S&67108863}for(;R<this.length-b;R++)S=(this.words[R+b]|0)+a,a=S>>26,this.words[R+b]=S&67108863;if(a===0)return this._strip();for(n(a===-1),a=0,R=0;R<this.length;R++)S=-(this.words[R]|0)+a,a=S>>26,this.words[R]=S&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(h,v){var b=this.length-h.length,M=this.clone(),R=h,S=R.words[R.length-1]|0,a=this._countBits(S);b=26-a,b!==0&&(R=R.ushln(b),M.iushln(b),S=R.words[R.length-1]|0);var k=M.length-R.length,N;if(v!=="mod"){N=new i(null),N.length=k+1,N.words=new Array(N.length);for(var L=0;L<N.length;L++)N.words[L]=0}var X=M.clone()._ishlnsubmul(R,1,k);X.negative===0&&(M=X,N&&(N.words[k]=1));for(var se=k-1;se>=0;se--){var te=(M.words[R.length+se]|0)*67108864+(M.words[R.length+se-1]|0);for(te=Math.min(te/S|0,67108863),M._ishlnsubmul(R,te,se);M.negative!==0;)te--,M.negative=0,M._ishlnsubmul(R,1,se),M.isZero()||(M.negative^=1);N&&(N.words[se]=te)}return N&&N._strip(),M._strip(),v!=="div"&&b!==0&&M.iushrn(b),{div:N||null,mod:M}},i.prototype.divmod=function(h,v,b){if(n(!h.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var M,R,S;return this.negative!==0&&h.negative===0?(S=this.neg().divmod(h,v),v!=="mod"&&(M=S.div.neg()),v!=="div"&&(R=S.mod.neg(),b&&R.negative!==0&&R.iadd(h)),{div:M,mod:R}):this.negative===0&&h.negative!==0?(S=this.divmod(h.neg(),v),v!=="mod"&&(M=S.div.neg()),{div:M,mod:S.mod}):(this.negative&h.negative)!==0?(S=this.neg().divmod(h.neg(),v),v!=="div"&&(R=S.mod.neg(),b&&R.negative!==0&&R.isub(h)),{div:S.div,mod:R}):h.length>this.length||this.cmp(h)<0?{div:new i(0),mod:this}:h.length===1?v==="div"?{div:this.divn(h.words[0]),mod:null}:v==="mod"?{div:null,mod:new i(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new i(this.modrn(h.words[0]))}:this._wordDiv(h,v)},i.prototype.div=function(h){return this.divmod(h,"div",!1).div},i.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},i.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},i.prototype.divRound=function(h){var v=this.divmod(h);if(v.mod.isZero())return v.div;var b=v.div.negative!==0?v.mod.isub(h):v.mod,M=h.ushrn(1),R=h.andln(1),S=b.cmp(M);return S<0||R===1&&S===0?v.div:v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},i.prototype.modrn=function(h){var v=h<0;v&&(h=-h),n(h<=67108863);for(var b=(1<<26)%h,M=0,R=this.length-1;R>=0;R--)M=(b*M+(this.words[R]|0))%h;return v?-M:M},i.prototype.modn=function(h){return this.modrn(h)},i.prototype.idivn=function(h){var v=h<0;v&&(h=-h),n(h<=67108863);for(var b=0,M=this.length-1;M>=0;M--){var R=(this.words[M]|0)+b*67108864;this.words[M]=R/h|0,b=R%h}return this._strip(),v?this.ineg():this},i.prototype.divn=function(h){return this.clone().idivn(h)},i.prototype.egcd=function(h){n(h.negative===0),n(!h.isZero());var v=this,b=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var M=new i(1),R=new i(0),S=new i(0),a=new i(1),k=0;v.isEven()&&b.isEven();)v.iushrn(1),b.iushrn(1),++k;for(var N=b.clone(),L=v.clone();!v.isZero();){for(var X=0,se=1;(v.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(v.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(N),R.isub(L)),M.iushrn(1),R.iushrn(1);for(var te=0,K=1;(b.words[0]&K)===0&&te<26;++te,K<<=1);if(te>0)for(b.iushrn(te);te-- >0;)(S.isOdd()||a.isOdd())&&(S.iadd(N),a.isub(L)),S.iushrn(1),a.iushrn(1);v.cmp(b)>=0?(v.isub(b),M.isub(S),R.isub(a)):(b.isub(v),S.isub(M),a.isub(R))}return{a:S,b:a,gcd:b.iushln(k)}},i.prototype._invmp=function(h){n(h.negative===0),n(!h.isZero());var v=this,b=h.clone();v.negative!==0?v=v.umod(h):v=v.clone();for(var M=new i(1),R=new i(0),S=b.clone();v.cmpn(1)>0&&b.cmpn(1)>0;){for(var a=0,k=1;(v.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(v.iushrn(a);a-- >0;)M.isOdd()&&M.iadd(S),M.iushrn(1);for(var N=0,L=1;(b.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(b.iushrn(N);N-- >0;)R.isOdd()&&R.iadd(S),R.iushrn(1);v.cmp(b)>=0?(v.isub(b),M.isub(R)):(b.isub(v),R.isub(M))}var X;return v.cmpn(1)===0?X=M:X=R,X.cmpn(0)<0&&X.iadd(h),X},i.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var v=this.clone(),b=h.clone();v.negative=0,b.negative=0;for(var M=0;v.isEven()&&b.isEven();M++)v.iushrn(1),b.iushrn(1);do{for(;v.isEven();)v.iushrn(1);for(;b.isEven();)b.iushrn(1);var R=v.cmp(b);if(R<0){var S=v;v=b,b=S}else if(R===0||b.cmpn(1)===0)break;v.isub(b)}while(!0);return b.iushln(M)},i.prototype.invm=function(h){return this.egcd(h).a.umod(h)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(h){return this.words[0]&h},i.prototype.bincn=function(h){n(typeof h=="number");var v=h%26,b=(h-v)/26,M=1<<v;if(this.length<=b)return this._expand(b+1),this.words[b]|=M,this;for(var R=M,S=b;R!==0&&S<this.length;S++){var a=this.words[S]|0;a+=R,R=a>>>26,a&=67108863,this.words[S]=a}return R!==0&&(this.words[S]=R,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(h){var v=h<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;this._strip();var b;if(this.length>1)b=1;else{v&&(h=-h),n(h<=67108863,"Number is too big");var M=this.words[0]|0;b=M===h?0:M<h?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var v=this.ucmp(h);return this.negative!==0?-v|0:v},i.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var v=0,b=this.length-1;b>=0;b--){var M=this.words[b]|0,R=h.words[b]|0;if(M!==R){M<R?v=-1:M>R&&(v=1);break}}return v},i.prototype.gtn=function(h){return this.cmpn(h)===1},i.prototype.gt=function(h){return this.cmp(h)===1},i.prototype.gten=function(h){return this.cmpn(h)>=0},i.prototype.gte=function(h){return this.cmp(h)>=0},i.prototype.ltn=function(h){return this.cmpn(h)===-1},i.prototype.lt=function(h){return this.cmp(h)===-1},i.prototype.lten=function(h){return this.cmpn(h)<=0},i.prototype.lte=function(h){return this.cmp(h)<=0},i.prototype.eqn=function(h){return this.cmpn(h)===0},i.prototype.eq=function(h){return this.cmp(h)===0},i.red=function(h){return new T(h)},i.prototype.toRed=function(h){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(h){return this.red=h,this},i.prototype.forceRed=function(h){return n(!this.red,"Already a number in reduction context"),this._forceRed(h)},i.prototype.redAdd=function(h){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},i.prototype.redIAdd=function(h){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},i.prototype.redSub=function(h){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},i.prototype.redISub=function(h){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},i.prototype.redShl=function(h){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},i.prototype.redMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},i.prototype.redIMul=function(h){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(h){return n(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var G={k256:null,p224:null,p192:null,p25519:null};function $(c,h){this.name=c,this.p=new i(h,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var h=new i(null);return h.words=new Array(Math.ceil(this.n/13)),h},$.prototype.ireduce=function(h){var v=h,b;do this.split(v,this.tmp),v=this.imulK(v),v=v.iadd(this.tmp),b=v.bitLength();while(b>this.n);var M=b<this.n?-1:v.ucmp(this.p);return M===0?(v.words[0]=0,v.length=1):M>0?v.isub(this.p):v.strip!==void 0?v.strip():v._strip(),v},$.prototype.split=function(h,v){h.iushrn(this.n,0,v)},$.prototype.imulK=function(h){return h.imul(this.k)};function re(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(re,$),re.prototype.split=function(h,v){for(var b=4194303,M=Math.min(h.length,9),R=0;R<M;R++)v.words[R]=h.words[R];if(v.length=M,h.length<=9){h.words[0]=0,h.length=1;return}var S=h.words[9];for(v.words[v.length++]=S&b,R=10;R<h.length;R++){var a=h.words[R]|0;h.words[R-10]=(a&b)<<4|S>>>22,S=a}S>>>=22,h.words[R-10]=S,S===0&&h.length>10?h.length-=10:h.length-=9},re.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var v=0,b=0;b<h.length;b++){var M=h.words[b]|0;v+=M*977,h.words[b]=v&67108863,v=M*64+(v/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function Q(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(Q,$);function H(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(H,$);function Y(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Y,$),Y.prototype.imulK=function(h){for(var v=0,b=0;b<h.length;b++){var M=(h.words[b]|0)*19+v,R=M&67108863;M>>>=26,h.words[b]=R,v=M}return v!==0&&(h.words[h.length++]=v),h},i._prime=function(h){if(G[h])return G[h];var v;if(h==="k256")v=new re;else if(h==="p224")v=new Q;else if(h==="p192")v=new H;else if(h==="p25519")v=new Y;else throw new Error("Unknown prime "+h);return G[h]=v,v};function T(c){if(typeof c=="string"){var h=i._prime(c);this.m=h.p,this.prime=h}else n(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}T.prototype._verify1=function(h){n(h.negative===0,"red works only with positives"),n(h.red,"red works only with red numbers")},T.prototype._verify2=function(h,v){n((h.negative|v.negative)===0,"red works only with positives"),n(h.red&&h.red===v.red,"red works only with red numbers")},T.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):(y(h,h.umod(this.m)._forceRed(this)),h)},T.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},T.prototype.add=function(h,v){this._verify2(h,v);var b=h.add(v);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},T.prototype.iadd=function(h,v){this._verify2(h,v);var b=h.iadd(v);return b.cmp(this.m)>=0&&b.isub(this.m),b},T.prototype.sub=function(h,v){this._verify2(h,v);var b=h.sub(v);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},T.prototype.isub=function(h,v){this._verify2(h,v);var b=h.isub(v);return b.cmpn(0)<0&&b.iadd(this.m),b},T.prototype.shl=function(h,v){return this._verify1(h),this.imod(h.ushln(v))},T.prototype.imul=function(h,v){return this._verify2(h,v),this.imod(h.imul(v))},T.prototype.mul=function(h,v){return this._verify2(h,v),this.imod(h.mul(v))},T.prototype.isqr=function(h){return this.imul(h,h.clone())},T.prototype.sqr=function(h){return this.mul(h,h)},T.prototype.sqrt=function(h){if(h.isZero())return h.clone();var v=this.m.andln(3);if(n(v%2===1),v===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(h,b)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);n(!M.isZero());var S=new i(1).toRed(this),a=S.redNeg(),k=this.m.subn(1).iushrn(1),N=this.m.bitLength();for(N=new i(2*N*N).toRed(this);this.pow(N,k).cmp(a)!==0;)N.redIAdd(a);for(var L=this.pow(N,M),X=this.pow(h,M.addn(1).iushrn(1)),se=this.pow(h,M),te=R;se.cmp(S)!==0;){for(var K=se,J=0;K.cmp(S)!==0;J++)K=K.redSqr();n(J<te);var ne=this.pow(L,new i(1).iushln(te-J-1));X=X.redMul(ne),L=ne.redSqr(),se=se.redMul(L),te=J}return X},T.prototype.invm=function(h){var v=h._invmp(this.m);return v.negative!==0?(v.negative=0,this.imod(v).redNeg()):this.imod(v)},T.prototype.pow=function(h,v){if(v.isZero())return new i(1).toRed(this);if(v.cmpn(1)===0)return h.clone();var b=4,M=new Array(1<<b);M[0]=new i(1).toRed(this),M[1]=h;for(var R=2;R<M.length;R++)M[R]=this.mul(M[R-1],h);var S=M[0],a=0,k=0,N=v.bitLength()%26;for(N===0&&(N=26),R=v.length-1;R>=0;R--){for(var L=v.words[R],X=N-1;X>=0;X--){var se=L>>X&1;if(S!==M[0]&&(S=this.sqr(S)),se===0&&a===0){k=0;continue}a<<=1,a|=se,k++,!(k!==b&&(R!==0||X!==0))&&(S=this.mul(S,M[a]),k=0,a=0)}N=26}return S},T.prototype.convertTo=function(h){var v=h.umod(this.m);return v===h?v.clone():v},T.prototype.convertFrom=function(h){var v=h.clone();return v.red=null,v},i.mont=function(h){return new o(h)};function o(c){T.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(o,T),o.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},o.prototype.convertFrom=function(h){var v=this.imod(h.mul(this.rinv));return v.red=null,v},o.prototype.imul=function(h,v){if(h.isZero()||v.isZero())return h.words[0]=0,h.length=1,h;var b=h.imul(v),M=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(M).iushrn(this.shift),S=R;return R.cmp(this.m)>=0?S=R.isub(this.m):R.cmpn(0)<0&&(S=R.iadd(this.m)),S._forceRed(this)},o.prototype.mul=function(h,v){if(h.isZero()||v.isZero())return new i(0)._forceRed(this);var b=h.mul(v),M=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(M).iushrn(this.shift),S=R;return R.cmp(this.m)>=0?S=R.isub(this.m):R.cmpn(0)<0&&(S=R.iadd(this.m)),S._forceRed(this)},o.prototype.invm=function(h){var v=this.imod(h._invmp(this.m).mul(this.r2));return v._forceRed(this)}})(e,xP)})(Gh)),Gh.exports}var kv,K4;function aw(){if(K4)return kv;K4=1;var e=ow(),t=rc(),r=ar().Buffer;function n(d){var p=d.modulus.byteLength(),g;do g=new e(t(p));while(g.cmp(d.modulus)>=0||!g.umod(d.prime1)||!g.umod(d.prime2));return g}function l(d){var p=n(d),g=p.toRed(e.mont(d.modulus)).redPow(new e(d.publicExponent)).fromRed();return{blinder:g,unblinder:p.invm(d.modulus)}}function i(d,p){var g=l(p),x=p.modulus.byteLength(),y=new e(d).mul(g.blinder).umod(p.modulus),w=y.toRed(e.mont(p.prime1)),j=y.toRed(e.mont(p.prime2)),_=p.coefficient,A=p.prime1,E=p.prime2,P=w.redPow(p.exponent1).fromRed(),z=j.redPow(p.exponent2).fromRed(),B=P.isub(z).imul(_).umod(A).imul(E);return z.iadd(B).imul(g.unblinder).umod(p.modulus).toArrayLike(r,"be",x)}return i.getr=n,kv=i,kv}var jv={};const bP="6.6.1",wP={version:bP};var Mv={},Kh={exports:{}},_P=Kh.exports,Y4;function Ks(){return Y4||(Y4=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,_P)})(Kh)),Kh.exports}var Cv={},J4;function DT(){return J4||(J4=1,(function(e){var t=e;function r(i,d){if(Array.isArray(i))return i.slice();if(!i)return[];var p=[];if(typeof i!="string"){for(var g=0;g<i.length;g++)p[g]=i[g]|0;return p}if(d==="hex"){i=i.replace(/[^a-z0-9]+/ig,""),i.length%2!==0&&(i="0"+i);for(var g=0;g<i.length;g+=2)p.push(parseInt(i[g]+i[g+1],16))}else for(var g=0;g<i.length;g++){var x=i.charCodeAt(g),y=x>>8,w=x&255;y?p.push(y,w):p.push(w)}return p}t.toArray=r;function n(i){return i.length===1?"0"+i:i}t.zero2=n;function l(i){for(var d="",p=0;p<i.length;p++)d+=n(i[p].toString(16));return d}t.toHex=l,t.encode=function(d,p){return p==="hex"?l(d):d}})(Cv)),Cv}var Z4;function Xi(){return Z4||(Z4=1,(function(e){var t=e,r=Ks(),n=Zi(),l=DT();t.assert=n,t.toArray=l.toArray,t.zero2=l.zero2,t.toHex=l.toHex,t.encode=l.encode;function i(y,w,j){var _=new Array(Math.max(y.bitLength(),j)+1),A;for(A=0;A<_.length;A+=1)_[A]=0;var E=1<<w+1,P=y.clone();for(A=0;A<_.length;A++){var z,B=P.andln(E-1);P.isOdd()?(B>(E>>1)-1?z=(E>>1)-B:z=B,P.isubn(z)):z=0,_[A]=z,P.iushrn(1)}return _}t.getNAF=i;function d(y,w){var j=[[],[]];y=y.clone(),w=w.clone();for(var _=0,A=0,E;y.cmpn(-_)>0||w.cmpn(-A)>0;){var P=y.andln(3)+_&3,z=w.andln(3)+A&3;P===3&&(P=-1),z===3&&(z=-1);var B;(P&1)===0?B=0:(E=y.andln(7)+_&7,(E===3||E===5)&&z===2?B=-P:B=P),j[0].push(B);var D;(z&1)===0?D=0:(E=w.andln(7)+A&7,(E===3||E===5)&&P===2?D=-z:D=z),j[1].push(D),2*_===B+1&&(_=1-_),2*A===D+1&&(A=1-A),y.iushrn(1),w.iushrn(1)}return j}t.getJSF=d;function p(y,w,j){var _="_"+w;y.prototype[w]=function(){return this[_]!==void 0?this[_]:this[_]=j.call(this)}}t.cachedProperty=p;function g(y){return typeof y=="string"?t.toArray(y,"hex"):y}t.parseBytes=g;function x(y){return new r(y,"hex","le")}t.intFromLE=x})(Mv)),Mv}var Tv={},Av,X4;function Op(){if(X4)return Av;X4=1;var e=Ks(),t=Xi(),r=t.getNAF,n=t.getJSF,l=t.assert;function i(p,g){this.type=p,this.p=new e(g.p,16),this.red=g.prime?e.red(g.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=g.n&&new e(g.n,16),this.g=g.g&&this.pointFromJSON(g.g,g.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Av=i,i.prototype.point=function(){throw new Error("Not implemented")},i.prototype.validate=function(){throw new Error("Not implemented")},i.prototype._fixedNafMul=function(g,x){l(g.precomputed);var y=g._getDoubles(),w=r(x,1,this._bitLength),j=(1<<y.step+1)-(y.step%2===0?2:1);j/=3;var _=[],A,E;for(A=0;A<w.length;A+=y.step){E=0;for(var P=A+y.step-1;P>=A;P--)E=(E<<1)+w[P];_.push(E)}for(var z=this.jpoint(null,null,null),B=this.jpoint(null,null,null),D=j;D>0;D--){for(A=0;A<_.length;A++)E=_[A],E===D?B=B.mixedAdd(y.points[A]):E===-D&&(B=B.mixedAdd(y.points[A].neg()));z=z.add(B)}return z.toP()},i.prototype._wnafMul=function(g,x){var y=4,w=g._getNAFPoints(y);y=w.wnd;for(var j=w.points,_=r(x,y,this._bitLength),A=this.jpoint(null,null,null),E=_.length-1;E>=0;E--){for(var P=0;E>=0&&_[E]===0;E--)P++;if(E>=0&&P++,A=A.dblp(P),E<0)break;var z=_[E];l(z!==0),g.type==="affine"?z>0?A=A.mixedAdd(j[z-1>>1]):A=A.mixedAdd(j[-z-1>>1].neg()):z>0?A=A.add(j[z-1>>1]):A=A.add(j[-z-1>>1].neg())}return g.type==="affine"?A.toP():A},i.prototype._wnafMulAdd=function(g,x,y,w,j){var _=this._wnafT1,A=this._wnafT2,E=this._wnafT3,P=0,z,B,D;for(z=0;z<w;z++){D=x[z];var U=D._getNAFPoints(g);_[z]=U.wnd,A[z]=U.points}for(z=w-1;z>=1;z-=2){var G=z-1,$=z;if(_[G]!==1||_[$]!==1){E[G]=r(y[G],_[G],this._bitLength),E[$]=r(y[$],_[$],this._bitLength),P=Math.max(E[G].length,P),P=Math.max(E[$].length,P);continue}var re=[x[G],null,null,x[$]];x[G].y.cmp(x[$].y)===0?(re[1]=x[G].add(x[$]),re[2]=x[G].toJ().mixedAdd(x[$].neg())):x[G].y.cmp(x[$].y.redNeg())===0?(re[1]=x[G].toJ().mixedAdd(x[$]),re[2]=x[G].add(x[$].neg())):(re[1]=x[G].toJ().mixedAdd(x[$]),re[2]=x[G].toJ().mixedAdd(x[$].neg()));var Q=[-3,-1,-5,-7,0,7,5,1,3],H=n(y[G],y[$]);for(P=Math.max(H[0].length,P),E[G]=new Array(P),E[$]=new Array(P),B=0;B<P;B++){var Y=H[0][B]|0,T=H[1][B]|0;E[G][B]=Q[(Y+1)*3+(T+1)],E[$][B]=0,A[G]=re}}var o=this.jpoint(null,null,null),c=this._wnafT4;for(z=P;z>=0;z--){for(var h=0;z>=0;){var v=!0;for(B=0;B<w;B++)c[B]=E[B][z]|0,c[B]!==0&&(v=!1);if(!v)break;h++,z--}if(z>=0&&h++,o=o.dblp(h),z<0)break;for(B=0;B<w;B++){var b=c[B];b!==0&&(b>0?D=A[B][b-1>>1]:b<0&&(D=A[B][-b-1>>1].neg()),D.type==="affine"?o=o.mixedAdd(D):o=o.add(D))}}for(z=0;z<w;z++)A[z]=null;return j?o:o.toP()};function d(p,g){this.curve=p,this.type=g,this.precomputed=null}return i.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},i.prototype.decodePoint=function(g,x){g=t.toArray(g,x);var y=this.p.byteLength();if((g[0]===4||g[0]===6||g[0]===7)&&g.length-1===2*y){g[0]===6?l(g[g.length-1]%2===0):g[0]===7&&l(g[g.length-1]%2===1);var w=this.point(g.slice(1,1+y),g.slice(1+y,1+2*y));return w}else if((g[0]===2||g[0]===3)&&g.length-1===y)return this.pointFromX(g.slice(1,1+y),g[0]===3);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(g){return this.encode(g,!0)},d.prototype._encode=function(g){var x=this.curve.p.byteLength(),y=this.getX().toArray("be",x);return g?[this.getY().isEven()?2:3].concat(y):[4].concat(y,this.getY().toArray("be",x))},d.prototype.encode=function(g,x){return t.encode(this._encode(x),g)},d.prototype.precompute=function(g){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,g),x.beta=this._getBeta(),this.precomputed=x,this},d.prototype._hasDoubles=function(g){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return x?x.points.length>=Math.ceil((g.bitLength()+1)/x.step):!1},d.prototype._getDoubles=function(g,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var y=[this],w=this,j=0;j<x;j+=g){for(var _=0;_<g;_++)w=w.dbl();y.push(w)}return{step:g,points:y}},d.prototype._getNAFPoints=function(g){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],y=(1<<g)-1,w=y===1?null:this.dbl(),j=1;j<y;j++)x[j]=x[j-1].add(w);return{wnd:g,points:x}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(g){for(var x=this,y=0;y<g;y++)x=x.dbl();return x},Av}var Rv,Q4;function SP(){if(Q4)return Rv;Q4=1;var e=Xi(),t=Ks(),r=sr(),n=Op(),l=e.assert;function i(g){n.call(this,"short",g),this.a=new t(g.a,16).toRed(this.red),this.b=new t(g.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(g),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(i,n),Rv=i,i.prototype._getEndomorphism=function(x){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var y,w;if(x.beta)y=new t(x.beta,16).toRed(this.red);else{var j=this._getEndoRoots(this.p);y=j[0].cmp(j[1])<0?j[0]:j[1],y=y.toRed(this.red)}if(x.lambda)w=new t(x.lambda,16);else{var _=this._getEndoRoots(this.n);this.g.mul(_[0]).x.cmp(this.g.x.redMul(y))===0?w=_[0]:(w=_[1],l(this.g.mul(w).x.cmp(this.g.x.redMul(y))===0))}var A;return x.basis?A=x.basis.map(function(E){return{a:new t(E.a,16),b:new t(E.b,16)}}):A=this._getEndoBasis(w),{beta:y,lambda:w,basis:A}}},i.prototype._getEndoRoots=function(x){var y=x===this.p?this.red:t.mont(x),w=new t(2).toRed(y).redInvm(),j=w.redNeg(),_=new t(3).toRed(y).redNeg().redSqrt().redMul(w),A=j.redAdd(_).fromRed(),E=j.redSub(_).fromRed();return[A,E]},i.prototype._getEndoBasis=function(x){for(var y=this.n.ushrn(Math.floor(this.n.bitLength()/2)),w=x,j=this.n.clone(),_=new t(1),A=new t(0),E=new t(0),P=new t(1),z,B,D,U,G,$,re,Q=0,H,Y;w.cmpn(0)!==0;){var T=j.div(w);H=j.sub(T.mul(w)),Y=E.sub(T.mul(_));var o=P.sub(T.mul(A));if(!D&&H.cmp(y)<0)z=re.neg(),B=_,D=H.neg(),U=Y;else if(D&&++Q===2)break;re=H,j=w,w=H,E=_,_=Y,P=A,A=o}G=H.neg(),$=Y;var c=D.sqr().add(U.sqr()),h=G.sqr().add($.sqr());return h.cmp(c)>=0&&(G=z,$=B),D.negative&&(D=D.neg(),U=U.neg()),G.negative&&(G=G.neg(),$=$.neg()),[{a:D,b:U},{a:G,b:$}]},i.prototype._endoSplit=function(x){var y=this.endo.basis,w=y[0],j=y[1],_=j.b.mul(x).divRound(this.n),A=w.b.neg().mul(x).divRound(this.n),E=_.mul(w.a),P=A.mul(j.a),z=_.mul(w.b),B=A.mul(j.b),D=x.sub(E).sub(P),U=z.add(B).neg();return{k1:D,k2:U}},i.prototype.pointFromX=function(x,y){x=new t(x,16),x.red||(x=x.toRed(this.red));var w=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),j=w.redSqrt();if(j.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var _=j.fromRed().isOdd();return(y&&!_||!y&&_)&&(j=j.redNeg()),this.point(x,j)},i.prototype.validate=function(x){if(x.inf)return!0;var y=x.x,w=x.y,j=this.a.redMul(y),_=y.redSqr().redMul(y).redIAdd(j).redIAdd(this.b);return w.redSqr().redISub(_).cmpn(0)===0},i.prototype._endoWnafMulAdd=function(x,y,w){for(var j=this._endoWnafT1,_=this._endoWnafT2,A=0;A<x.length;A++){var E=this._endoSplit(y[A]),P=x[A],z=P._getBeta();E.k1.negative&&(E.k1.ineg(),P=P.neg(!0)),E.k2.negative&&(E.k2.ineg(),z=z.neg(!0)),j[A*2]=P,j[A*2+1]=z,_[A*2]=E.k1,_[A*2+1]=E.k2}for(var B=this._wnafMulAdd(1,j,_,A*2,w),D=0;D<A*2;D++)j[D]=null,_[D]=null;return B};function d(g,x,y,w){n.BasePoint.call(this,g,"affine"),x===null&&y===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new t(x,16),this.y=new t(y,16),w&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(d,n.BasePoint),i.prototype.point=function(x,y,w){return new d(this,x,y,w)},i.prototype.pointFromJSON=function(x,y){return d.fromJSON(this,x,y)},d.prototype._getBeta=function(){if(this.curve.endo){var x=this.precomputed;if(x&&x.beta)return x.beta;var y=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(x){var w=this.curve,j=function(_){return w.point(_.x.redMul(w.endo.beta),_.y)};x.beta=y,y.precomputed={beta:null,naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(j)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(j)}}}return y}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(x,y,w){typeof y=="string"&&(y=JSON.parse(y));var j=x.point(y[0],y[1],w);if(!y[2])return j;function _(E){return x.point(E[0],E[1],w)}var A=y[2];return j.precomputed={beta:null,doubles:A.doubles&&{step:A.doubles.step,points:[j].concat(A.doubles.points.map(_))},naf:A.naf&&{wnd:A.naf.wnd,points:[j].concat(A.naf.points.map(_))}},j},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(x){if(this.inf)return x;if(x.inf)return this;if(this.eq(x))return this.dbl();if(this.neg().eq(x))return this.curve.point(null,null);if(this.x.cmp(x.x)===0)return this.curve.point(null,null);var y=this.y.redSub(x.y);y.cmpn(0)!==0&&(y=y.redMul(this.x.redSub(x.x).redInvm()));var w=y.redSqr().redISub(this.x).redISub(x.x),j=y.redMul(this.x.redSub(w)).redISub(this.y);return this.curve.point(w,j)},d.prototype.dbl=function(){if(this.inf)return this;var x=this.y.redAdd(this.y);if(x.cmpn(0)===0)return this.curve.point(null,null);var y=this.curve.a,w=this.x.redSqr(),j=x.redInvm(),_=w.redAdd(w).redIAdd(w).redIAdd(y).redMul(j),A=_.redSqr().redISub(this.x.redAdd(this.x)),E=_.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,E)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(x){return x=new t(x,16),this.isInfinity()?this:this._hasDoubles(x)?this.curve._fixedNafMul(this,x):this.curve.endo?this.curve._endoWnafMulAdd([this],[x]):this.curve._wnafMul(this,x)},d.prototype.mulAdd=function(x,y,w){var j=[this,y],_=[x,w];return this.curve.endo?this.curve._endoWnafMulAdd(j,_):this.curve._wnafMulAdd(1,j,_,2)},d.prototype.jmulAdd=function(x,y,w){var j=[this,y],_=[x,w];return this.curve.endo?this.curve._endoWnafMulAdd(j,_,!0):this.curve._wnafMulAdd(1,j,_,2,!0)},d.prototype.eq=function(x){return this===x||this.inf===x.inf&&(this.inf||this.x.cmp(x.x)===0&&this.y.cmp(x.y)===0)},d.prototype.neg=function(x){if(this.inf)return this;var y=this.curve.point(this.x,this.y.redNeg());if(x&&this.precomputed){var w=this.precomputed,j=function(_){return _.neg()};y.precomputed={naf:w.naf&&{wnd:w.naf.wnd,points:w.naf.points.map(j)},doubles:w.doubles&&{step:w.doubles.step,points:w.doubles.points.map(j)}}}return y},d.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var x=this.curve.jpoint(this.x,this.y,this.curve.one);return x};function p(g,x,y,w){n.BasePoint.call(this,g,"jacobian"),x===null&&y===null&&w===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new t(0)):(this.x=new t(x,16),this.y=new t(y,16),this.z=new t(w,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(p,n.BasePoint),i.prototype.jpoint=function(x,y,w){return new p(this,x,y,w)},p.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var x=this.z.redInvm(),y=x.redSqr(),w=this.x.redMul(y),j=this.y.redMul(y).redMul(x);return this.curve.point(w,j)},p.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},p.prototype.add=function(x){if(this.isInfinity())return x;if(x.isInfinity())return this;var y=x.z.redSqr(),w=this.z.redSqr(),j=this.x.redMul(y),_=x.x.redMul(w),A=this.y.redMul(y.redMul(x.z)),E=x.y.redMul(w.redMul(this.z)),P=j.redSub(_),z=A.redSub(E);if(P.cmpn(0)===0)return z.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var B=P.redSqr(),D=B.redMul(P),U=j.redMul(B),G=z.redSqr().redIAdd(D).redISub(U).redISub(U),$=z.redMul(U.redISub(G)).redISub(A.redMul(D)),re=this.z.redMul(x.z).redMul(P);return this.curve.jpoint(G,$,re)},p.prototype.mixedAdd=function(x){if(this.isInfinity())return x.toJ();if(x.isInfinity())return this;var y=this.z.redSqr(),w=this.x,j=x.x.redMul(y),_=this.y,A=x.y.redMul(y).redMul(this.z),E=w.redSub(j),P=_.redSub(A);if(E.cmpn(0)===0)return P.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var z=E.redSqr(),B=z.redMul(E),D=w.redMul(z),U=P.redSqr().redIAdd(B).redISub(D).redISub(D),G=P.redMul(D.redISub(U)).redISub(_.redMul(B)),$=this.z.redMul(E);return this.curve.jpoint(U,G,$)},p.prototype.dblp=function(x){if(x===0)return this;if(this.isInfinity())return this;if(!x)return this.dbl();var y;if(this.curve.zeroA||this.curve.threeA){var w=this;for(y=0;y<x;y++)w=w.dbl();return w}var j=this.curve.a,_=this.curve.tinv,A=this.x,E=this.y,P=this.z,z=P.redSqr().redSqr(),B=E.redAdd(E);for(y=0;y<x;y++){var D=A.redSqr(),U=B.redSqr(),G=U.redSqr(),$=D.redAdd(D).redIAdd(D).redIAdd(j.redMul(z)),re=A.redMul(U),Q=$.redSqr().redISub(re.redAdd(re)),H=re.redISub(Q),Y=$.redMul(H);Y=Y.redIAdd(Y).redISub(G);var T=B.redMul(P);y+1<x&&(z=z.redMul(G)),A=Q,P=T,B=Y}return this.curve.jpoint(A,B.redMul(_),P)},p.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},p.prototype._zeroDbl=function(){var x,y,w;if(this.zOne){var j=this.x.redSqr(),_=this.y.redSqr(),A=_.redSqr(),E=this.x.redAdd(_).redSqr().redISub(j).redISub(A);E=E.redIAdd(E);var P=j.redAdd(j).redIAdd(j),z=P.redSqr().redISub(E).redISub(E),B=A.redIAdd(A);B=B.redIAdd(B),B=B.redIAdd(B),x=z,y=P.redMul(E.redISub(z)).redISub(B),w=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),U=this.y.redSqr(),G=U.redSqr(),$=this.x.redAdd(U).redSqr().redISub(D).redISub(G);$=$.redIAdd($);var re=D.redAdd(D).redIAdd(D),Q=re.redSqr(),H=G.redIAdd(G);H=H.redIAdd(H),H=H.redIAdd(H),x=Q.redISub($).redISub($),y=re.redMul($.redISub(x)).redISub(H),w=this.y.redMul(this.z),w=w.redIAdd(w)}return this.curve.jpoint(x,y,w)},p.prototype._threeDbl=function(){var x,y,w;if(this.zOne){var j=this.x.redSqr(),_=this.y.redSqr(),A=_.redSqr(),E=this.x.redAdd(_).redSqr().redISub(j).redISub(A);E=E.redIAdd(E);var P=j.redAdd(j).redIAdd(j).redIAdd(this.curve.a),z=P.redSqr().redISub(E).redISub(E);x=z;var B=A.redIAdd(A);B=B.redIAdd(B),B=B.redIAdd(B),y=P.redMul(E.redISub(z)).redISub(B),w=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),U=this.y.redSqr(),G=this.x.redMul(U),$=this.x.redSub(D).redMul(this.x.redAdd(D));$=$.redAdd($).redIAdd($);var re=G.redIAdd(G);re=re.redIAdd(re);var Q=re.redAdd(re);x=$.redSqr().redISub(Q),w=this.y.redAdd(this.z).redSqr().redISub(U).redISub(D);var H=U.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H),y=$.redMul(re.redISub(x)).redISub(H)}return this.curve.jpoint(x,y,w)},p.prototype._dbl=function(){var x=this.curve.a,y=this.x,w=this.y,j=this.z,_=j.redSqr().redSqr(),A=y.redSqr(),E=w.redSqr(),P=A.redAdd(A).redIAdd(A).redIAdd(x.redMul(_)),z=y.redAdd(y);z=z.redIAdd(z);var B=z.redMul(E),D=P.redSqr().redISub(B.redAdd(B)),U=B.redISub(D),G=E.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G);var $=P.redMul(U).redISub(G),re=w.redAdd(w).redMul(j);return this.curve.jpoint(D,$,re)},p.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var x=this.x.redSqr(),y=this.y.redSqr(),w=this.z.redSqr(),j=y.redSqr(),_=x.redAdd(x).redIAdd(x),A=_.redSqr(),E=this.x.redAdd(y).redSqr().redISub(x).redISub(j);E=E.redIAdd(E),E=E.redAdd(E).redIAdd(E),E=E.redISub(A);var P=E.redSqr(),z=j.redIAdd(j);z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z);var B=_.redIAdd(E).redSqr().redISub(A).redISub(P).redISub(z),D=y.redMul(B);D=D.redIAdd(D),D=D.redIAdd(D);var U=this.x.redMul(P).redISub(D);U=U.redIAdd(U),U=U.redIAdd(U);var G=this.y.redMul(B.redMul(z.redISub(B)).redISub(E.redMul(P)));G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G);var $=this.z.redAdd(E).redSqr().redISub(w).redISub(P);return this.curve.jpoint(U,G,$)},p.prototype.mul=function(x,y){return x=new t(x,y),this.curve._wnafMul(this,x)},p.prototype.eq=function(x){if(x.type==="affine")return this.eq(x.toJ());if(this===x)return!0;var y=this.z.redSqr(),w=x.z.redSqr();if(this.x.redMul(w).redISub(x.x.redMul(y)).cmpn(0)!==0)return!1;var j=y.redMul(this.z),_=w.redMul(x.z);return this.y.redMul(_).redISub(x.y.redMul(j)).cmpn(0)===0},p.prototype.eqXToP=function(x){var y=this.z.redSqr(),w=x.toRed(this.curve.red).redMul(y);if(this.x.cmp(w)===0)return!0;for(var j=x.clone(),_=this.curve.redN.redMul(y);;){if(j.iadd(this.curve.n),j.cmp(this.curve.p)>=0)return!1;if(w.redIAdd(_),this.x.cmp(w)===0)return!0}},p.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},p.prototype.isInfinity=function(){return this.z.cmpn(0)===0},Rv}var Ev,e5;function kP(){if(e5)return Ev;e5=1;var e=Ks(),t=sr(),r=Op(),n=Xi();function l(d){r.call(this,"mont",d),this.a=new e(d.a,16).toRed(this.red),this.b=new e(d.b,16).toRed(this.red),this.i4=new e(4).toRed(this.red).redInvm(),this.two=new e(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}t(l,r),Ev=l,l.prototype.validate=function(p){var g=p.normalize().x,x=g.redSqr(),y=x.redMul(g).redAdd(x.redMul(this.a)).redAdd(g),w=y.redSqrt();return w.redSqr().cmp(y)===0};function i(d,p,g){r.BasePoint.call(this,d,"projective"),p===null&&g===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new e(p,16),this.z=new e(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return t(i,r.BasePoint),l.prototype.decodePoint=function(p,g){return this.point(n.toArray(p,g),1)},l.prototype.point=function(p,g){return new i(this,p,g)},l.prototype.pointFromJSON=function(p){return i.fromJSON(this,p)},i.prototype.precompute=function(){},i.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},i.fromJSON=function(p,g){return new i(p,g[0],g[1]||p.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return this.z.cmpn(0)===0},i.prototype.dbl=function(){var p=this.x.redAdd(this.z),g=p.redSqr(),x=this.x.redSub(this.z),y=x.redSqr(),w=g.redSub(y),j=g.redMul(y),_=w.redMul(y.redAdd(this.curve.a24.redMul(w)));return this.curve.point(j,_)},i.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(p,g){var x=this.x.redAdd(this.z),y=this.x.redSub(this.z),w=p.x.redAdd(p.z),j=p.x.redSub(p.z),_=j.redMul(x),A=w.redMul(y),E=g.z.redMul(_.redAdd(A).redSqr()),P=g.x.redMul(_.redISub(A).redSqr());return this.curve.point(E,P)},i.prototype.mul=function(p){for(var g=p.clone(),x=this,y=this.curve.point(null,null),w=this,j=[];g.cmpn(0)!==0;g.iushrn(1))j.push(g.andln(1));for(var _=j.length-1;_>=0;_--)j[_]===0?(x=x.diffAdd(y,w),y=y.dbl()):(y=x.diffAdd(y,w),x=x.dbl());return y},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.eq=function(p){return this.getX().cmp(p.getX())===0},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Ev}var Iv,t5;function jP(){if(t5)return Iv;t5=1;var e=Xi(),t=Ks(),r=sr(),n=Op(),l=e.assert;function i(p){this.twisted=(p.a|0)!==1,this.mOneA=this.twisted&&(p.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",p),this.a=new t(p.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new t(p.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new t(p.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),l(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(p.c|0)===1}r(i,n),Iv=i,i.prototype._mulA=function(g){return this.mOneA?g.redNeg():this.a.redMul(g)},i.prototype._mulC=function(g){return this.oneC?g:this.c.redMul(g)},i.prototype.jpoint=function(g,x,y,w){return this.point(g,x,y,w)},i.prototype.pointFromX=function(g,x){g=new t(g,16),g.red||(g=g.toRed(this.red));var y=g.redSqr(),w=this.c2.redSub(this.a.redMul(y)),j=this.one.redSub(this.c2.redMul(this.d).redMul(y)),_=w.redMul(j.redInvm()),A=_.redSqrt();if(A.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var E=A.fromRed().isOdd();return(x&&!E||!x&&E)&&(A=A.redNeg()),this.point(g,A)},i.prototype.pointFromY=function(g,x){g=new t(g,16),g.red||(g=g.toRed(this.red));var y=g.redSqr(),w=y.redSub(this.c2),j=y.redMul(this.d).redMul(this.c2).redSub(this.a),_=w.redMul(j.redInvm());if(_.cmp(this.zero)===0){if(x)throw new Error("invalid point");return this.point(this.zero,g)}var A=_.redSqrt();if(A.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");return A.fromRed().isOdd()!==x&&(A=A.redNeg()),this.point(A,g)},i.prototype.validate=function(g){if(g.isInfinity())return!0;g.normalize();var x=g.x.redSqr(),y=g.y.redSqr(),w=x.redMul(this.a).redAdd(y),j=this.c2.redMul(this.one.redAdd(this.d.redMul(x).redMul(y)));return w.cmp(j)===0};function d(p,g,x,y,w){n.BasePoint.call(this,p,"projective"),g===null&&x===null&&y===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new t(g,16),this.y=new t(x,16),this.z=y?new t(y,16):this.curve.one,this.t=w&&new t(w,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(d,n.BasePoint),i.prototype.pointFromJSON=function(g){return d.fromJSON(this,g)},i.prototype.point=function(g,x,y,w){return new d(this,g,x,y,w)},d.fromJSON=function(g,x){return new d(g,x[0],x[1],x[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},d.prototype._extDbl=function(){var g=this.x.redSqr(),x=this.y.redSqr(),y=this.z.redSqr();y=y.redIAdd(y);var w=this.curve._mulA(g),j=this.x.redAdd(this.y).redSqr().redISub(g).redISub(x),_=w.redAdd(x),A=_.redSub(y),E=w.redSub(x),P=j.redMul(A),z=_.redMul(E),B=j.redMul(E),D=A.redMul(_);return this.curve.point(P,z,D,B)},d.prototype._projDbl=function(){var g=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),y=this.y.redSqr(),w,j,_,A,E,P;if(this.curve.twisted){A=this.curve._mulA(x);var z=A.redAdd(y);this.zOne?(w=g.redSub(x).redSub(y).redMul(z.redSub(this.curve.two)),j=z.redMul(A.redSub(y)),_=z.redSqr().redSub(z).redSub(z)):(E=this.z.redSqr(),P=z.redSub(E).redISub(E),w=g.redSub(x).redISub(y).redMul(P),j=z.redMul(A.redSub(y)),_=z.redMul(P))}else A=x.redAdd(y),E=this.curve._mulC(this.z).redSqr(),P=A.redSub(E).redSub(E),w=this.curve._mulC(g.redISub(A)).redMul(P),j=this.curve._mulC(A).redMul(x.redISub(y)),_=A.redMul(P);return this.curve.point(w,j,_)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(g){var x=this.y.redSub(this.x).redMul(g.y.redSub(g.x)),y=this.y.redAdd(this.x).redMul(g.y.redAdd(g.x)),w=this.t.redMul(this.curve.dd).redMul(g.t),j=this.z.redMul(g.z.redAdd(g.z)),_=y.redSub(x),A=j.redSub(w),E=j.redAdd(w),P=y.redAdd(x),z=_.redMul(A),B=E.redMul(P),D=_.redMul(P),U=A.redMul(E);return this.curve.point(z,B,U,D)},d.prototype._projAdd=function(g){var x=this.z.redMul(g.z),y=x.redSqr(),w=this.x.redMul(g.x),j=this.y.redMul(g.y),_=this.curve.d.redMul(w).redMul(j),A=y.redSub(_),E=y.redAdd(_),P=this.x.redAdd(this.y).redMul(g.x.redAdd(g.y)).redISub(w).redISub(j),z=x.redMul(A).redMul(P),B,D;return this.curve.twisted?(B=x.redMul(E).redMul(j.redSub(this.curve._mulA(w))),D=A.redMul(E)):(B=x.redMul(E).redMul(j.redSub(w)),D=this.curve._mulC(A).redMul(E)),this.curve.point(z,B,D)},d.prototype.add=function(g){return this.isInfinity()?g:g.isInfinity()?this:this.curve.extended?this._extAdd(g):this._projAdd(g)},d.prototype.mul=function(g){return this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve._wnafMul(this,g)},d.prototype.mulAdd=function(g,x,y){return this.curve._wnafMulAdd(1,[this,x],[g,y],2,!1)},d.prototype.jmulAdd=function(g,x,y){return this.curve._wnafMulAdd(1,[this,x],[g,y],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var g=this.z.redInvm();return this.x=this.x.redMul(g),this.y=this.y.redMul(g),this.t&&(this.t=this.t.redMul(g)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(g){return this===g||this.getX().cmp(g.getX())===0&&this.getY().cmp(g.getY())===0},d.prototype.eqXToP=function(g){var x=g.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(x)===0)return!0;for(var y=g.clone(),w=this.curve.redN.redMul(this.z);;){if(y.iadd(this.curve.n),y.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(w),this.x.cmp(x)===0)return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add,Iv}var r5;function LT(){return r5||(r5=1,(function(e){var t=e;t.base=Op(),t.short=SP(),t.mont=kP(),t.edwards=jP()})(Tv)),Tv}var zv={},Bv={},Br={},n5;function Ss(){if(n5)return Br;n5=1;var e=Zi(),t=sr();Br.inherits=t;function r(o,c){return(o.charCodeAt(c)&64512)!==55296||c<0||c+1>=o.length?!1:(o.charCodeAt(c+1)&64512)===56320}function n(o,c){if(Array.isArray(o))return o.slice();if(!o)return[];var h=[];if(typeof o=="string")if(c){if(c==="hex")for(o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o),b=0;b<o.length;b+=2)h.push(parseInt(o[b]+o[b+1],16))}else for(var v=0,b=0;b<o.length;b++){var M=o.charCodeAt(b);M<128?h[v++]=M:M<2048?(h[v++]=M>>6|192,h[v++]=M&63|128):r(o,b)?(M=65536+((M&1023)<<10)+(o.charCodeAt(++b)&1023),h[v++]=M>>18|240,h[v++]=M>>12&63|128,h[v++]=M>>6&63|128,h[v++]=M&63|128):(h[v++]=M>>12|224,h[v++]=M>>6&63|128,h[v++]=M&63|128)}else for(b=0;b<o.length;b++)h[b]=o[b]|0;return h}Br.toArray=n;function l(o){for(var c="",h=0;h<o.length;h++)c+=p(o[h].toString(16));return c}Br.toHex=l;function i(o){var c=o>>>24|o>>>8&65280|o<<8&16711680|(o&255)<<24;return c>>>0}Br.htonl=i;function d(o,c){for(var h="",v=0;v<o.length;v++){var b=o[v];c==="little"&&(b=i(b)),h+=g(b.toString(16))}return h}Br.toHex32=d;function p(o){return o.length===1?"0"+o:o}Br.zero2=p;function g(o){return o.length===7?"0"+o:o.length===6?"00"+o:o.length===5?"000"+o:o.length===4?"0000"+o:o.length===3?"00000"+o:o.length===2?"000000"+o:o.length===1?"0000000"+o:o}Br.zero8=g;function x(o,c,h,v){var b=h-c;e(b%4===0);for(var M=new Array(b/4),R=0,S=c;R<M.length;R++,S+=4){var a;v==="big"?a=o[S]<<24|o[S+1]<<16|o[S+2]<<8|o[S+3]:a=o[S+3]<<24|o[S+2]<<16|o[S+1]<<8|o[S],M[R]=a>>>0}return M}Br.join32=x;function y(o,c){for(var h=new Array(o.length*4),v=0,b=0;v<o.length;v++,b+=4){var M=o[v];c==="big"?(h[b]=M>>>24,h[b+1]=M>>>16&255,h[b+2]=M>>>8&255,h[b+3]=M&255):(h[b+3]=M>>>24,h[b+2]=M>>>16&255,h[b+1]=M>>>8&255,h[b]=M&255)}return h}Br.split32=y;function w(o,c){return o>>>c|o<<32-c}Br.rotr32=w;function j(o,c){return o<<c|o>>>32-c}Br.rotl32=j;function _(o,c){return o+c>>>0}Br.sum32=_;function A(o,c,h){return o+c+h>>>0}Br.sum32_3=A;function E(o,c,h,v){return o+c+h+v>>>0}Br.sum32_4=E;function P(o,c,h,v,b){return o+c+h+v+b>>>0}Br.sum32_5=P;function z(o,c,h,v){var b=o[c],M=o[c+1],R=v+M>>>0,S=(R<v?1:0)+h+b;o[c]=S>>>0,o[c+1]=R}Br.sum64=z;function B(o,c,h,v){var b=c+v>>>0,M=(b<c?1:0)+o+h;return M>>>0}Br.sum64_hi=B;function D(o,c,h,v){var b=c+v;return b>>>0}Br.sum64_lo=D;function U(o,c,h,v,b,M,R,S){var a=0,k=c;k=k+v>>>0,a+=k<c?1:0,k=k+M>>>0,a+=k<M?1:0,k=k+S>>>0,a+=k<S?1:0;var N=o+h+b+R+a;return N>>>0}Br.sum64_4_hi=U;function G(o,c,h,v,b,M,R,S){var a=c+v+M+S;return a>>>0}Br.sum64_4_lo=G;function $(o,c,h,v,b,M,R,S,a,k){var N=0,L=c;L=L+v>>>0,N+=L<c?1:0,L=L+M>>>0,N+=L<M?1:0,L=L+S>>>0,N+=L<S?1:0,L=L+k>>>0,N+=L<k?1:0;var X=o+h+b+R+a+N;return X>>>0}Br.sum64_5_hi=$;function re(o,c,h,v,b,M,R,S,a,k){var N=c+v+M+S+k;return N>>>0}Br.sum64_5_lo=re;function Q(o,c,h){var v=c<<32-h|o>>>h;return v>>>0}Br.rotr64_hi=Q;function H(o,c,h){var v=o<<32-h|c>>>h;return v>>>0}Br.rotr64_lo=H;function Y(o,c,h){return o>>>h}Br.shr64_hi=Y;function T(o,c,h){var v=o<<32-h|c>>>h;return v>>>0}return Br.shr64_lo=T,Br}var Pv={},i5;function zd(){if(i5)return Pv;i5=1;var e=Ss(),t=Zi();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Pv.BlockHash=r,r.prototype.update=function(l,i){if(l=e.toArray(l,i),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){l=this.pending;var d=l.length%this._delta8;this.pending=l.slice(l.length-d,l.length),this.pending.length===0&&(this.pending=null),l=e.join32(l,0,l.length-d,this.endian);for(var p=0;p<l.length;p+=this._delta32)this._update(l,p,p+this._delta32)}return this},r.prototype.digest=function(l){return this.update(this._pad()),t(this.pending===null),this._digest(l)},r.prototype._pad=function(){var l=this.pendingTotal,i=this._delta8,d=i-(l+this.padLength)%i,p=new Array(d+this.padLength);p[0]=128;for(var g=1;g<d;g++)p[g]=0;if(l<<=3,this.endian==="big"){for(var x=8;x<this.padLength;x++)p[g++]=0;p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=l>>>24&255,p[g++]=l>>>16&255,p[g++]=l>>>8&255,p[g++]=l&255}else for(p[g++]=l&255,p[g++]=l>>>8&255,p[g++]=l>>>16&255,p[g++]=l>>>24&255,p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0,x=8;x<this.padLength;x++)p[g++]=0;return p},Pv}var da={},fs={},s5;function OT(){if(s5)return fs;s5=1;var e=Ss(),t=e.rotr32;function r(y,w,j,_){if(y===0)return n(w,j,_);if(y===1||y===3)return i(w,j,_);if(y===2)return l(w,j,_)}fs.ft_1=r;function n(y,w,j){return y&w^~y&j}fs.ch32=n;function l(y,w,j){return y&w^y&j^w&j}fs.maj32=l;function i(y,w,j){return y^w^j}fs.p32=i;function d(y){return t(y,2)^t(y,13)^t(y,22)}fs.s0_256=d;function p(y){return t(y,6)^t(y,11)^t(y,25)}fs.s1_256=p;function g(y){return t(y,7)^t(y,18)^y>>>3}fs.g0_256=g;function x(y){return t(y,17)^t(y,19)^y>>>10}return fs.g1_256=x,fs}var Nv,o5;function MP(){if(o5)return Nv;o5=1;var e=Ss(),t=zd(),r=OT(),n=e.rotl32,l=e.sum32,i=e.sum32_5,d=r.ft_1,p=t.BlockHash,g=[1518500249,1859775393,2400959708,3395469782];function x(){if(!(this instanceof x))return new x;p.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return e.inherits(x,p),Nv=x,x.blockSize=512,x.outSize=160,x.hmacStrength=80,x.padLength=64,x.prototype._update=function(w,j){for(var _=this.W,A=0;A<16;A++)_[A]=w[j+A];for(;A<_.length;A++)_[A]=n(_[A-3]^_[A-8]^_[A-14]^_[A-16],1);var E=this.h[0],P=this.h[1],z=this.h[2],B=this.h[3],D=this.h[4];for(A=0;A<_.length;A++){var U=~~(A/20),G=i(n(E,5),d(U,P,z,B),D,_[A],g[U]);D=B,B=z,z=n(P,30),P=E,E=G}this.h[0]=l(this.h[0],E),this.h[1]=l(this.h[1],P),this.h[2]=l(this.h[2],z),this.h[3]=l(this.h[3],B),this.h[4]=l(this.h[4],D)},x.prototype._digest=function(w){return w==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")},Nv}var Dv,a5;function FT(){if(a5)return Dv;a5=1;var e=Ss(),t=zd(),r=OT(),n=Zi(),l=e.sum32,i=e.sum32_4,d=e.sum32_5,p=r.ch32,g=r.maj32,x=r.s0_256,y=r.s1_256,w=r.g0_256,j=r.g1_256,_=t.BlockHash,A=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;_.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=A,this.W=new Array(64)}return e.inherits(E,_),Dv=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(z,B){for(var D=this.W,U=0;U<16;U++)D[U]=z[B+U];for(;U<D.length;U++)D[U]=i(j(D[U-2]),D[U-7],w(D[U-15]),D[U-16]);var G=this.h[0],$=this.h[1],re=this.h[2],Q=this.h[3],H=this.h[4],Y=this.h[5],T=this.h[6],o=this.h[7];for(n(this.k.length===D.length),U=0;U<D.length;U++){var c=d(o,y(H),p(H,Y,T),this.k[U],D[U]),h=l(x(G),g(G,$,re));o=T,T=Y,Y=H,H=l(Q,c),Q=re,re=$,$=G,G=l(c,h)}this.h[0]=l(this.h[0],G),this.h[1]=l(this.h[1],$),this.h[2]=l(this.h[2],re),this.h[3]=l(this.h[3],Q),this.h[4]=l(this.h[4],H),this.h[5]=l(this.h[5],Y),this.h[6]=l(this.h[6],T),this.h[7]=l(this.h[7],o)},E.prototype._digest=function(z){return z==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")},Dv}var Lv,l5;function CP(){if(l5)return Lv;l5=1;var e=Ss(),t=FT();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return e.inherits(r,t),Lv=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(l){return l==="hex"?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")},Lv}var Ov,c5;function UT(){if(c5)return Ov;c5=1;var e=Ss(),t=zd(),r=Zi(),n=e.rotr64_hi,l=e.rotr64_lo,i=e.shr64_hi,d=e.shr64_lo,p=e.sum64,g=e.sum64_hi,x=e.sum64_lo,y=e.sum64_4_hi,w=e.sum64_4_lo,j=e.sum64_5_hi,_=e.sum64_5_lo,A=t.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function P(){if(!(this instanceof P))return new P;A.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}e.inherits(P,A),Ov=P,P.blockSize=1024,P.outSize=512,P.hmacStrength=192,P.padLength=128,P.prototype._prepareBlock=function(h,v){for(var b=this.W,M=0;M<32;M++)b[M]=h[v+M];for(;M<b.length;M+=2){var R=T(b[M-4],b[M-3]),S=o(b[M-4],b[M-3]),a=b[M-14],k=b[M-13],N=H(b[M-30],b[M-29]),L=Y(b[M-30],b[M-29]),X=b[M-32],se=b[M-31];b[M]=y(R,S,a,k,N,L,X,se),b[M+1]=w(R,S,a,k,N,L,X,se)}},P.prototype._update=function(h,v){this._prepareBlock(h,v);var b=this.W,M=this.h[0],R=this.h[1],S=this.h[2],a=this.h[3],k=this.h[4],N=this.h[5],L=this.h[6],X=this.h[7],se=this.h[8],te=this.h[9],K=this.h[10],J=this.h[11],ne=this.h[12],oe=this.h[13],ae=this.h[14],ee=this.h[15];r(this.k.length===b.length);for(var ue=0;ue<b.length;ue+=2){var Ce=ae,ve=ee,ge=re(se,te),Je=Q(se,te),Te=z(se,te,K,J,ne),ze=B(se,te,K,J,ne,oe),vt=this.k[ue],he=this.k[ue+1],me=b[ue],Me=b[ue+1],pe=j(Ce,ve,ge,Je,Te,ze,vt,he,me,Me),ke=_(Ce,ve,ge,Je,Te,ze,vt,he,me,Me);Ce=G(M,R),ve=$(M,R),ge=D(M,R,S,a,k),Je=U(M,R,S,a,k,N);var _e=g(Ce,ve,ge,Je),Z=x(Ce,ve,ge,Je);ae=ne,ee=oe,ne=K,oe=J,K=se,J=te,se=g(L,X,pe,ke),te=x(X,X,pe,ke),L=k,X=N,k=S,N=a,S=M,a=R,M=g(pe,ke,_e,Z),R=x(pe,ke,_e,Z)}p(this.h,0,M,R),p(this.h,2,S,a),p(this.h,4,k,N),p(this.h,6,L,X),p(this.h,8,se,te),p(this.h,10,K,J),p(this.h,12,ne,oe),p(this.h,14,ae,ee)},P.prototype._digest=function(h){return h==="hex"?e.toHex32(this.h,"big"):e.split32(this.h,"big")};function z(c,h,v,b,M){var R=c&v^~c&M;return R<0&&(R+=4294967296),R}function B(c,h,v,b,M,R){var S=h&b^~h&R;return S<0&&(S+=4294967296),S}function D(c,h,v,b,M){var R=c&v^c&M^v&M;return R<0&&(R+=4294967296),R}function U(c,h,v,b,M,R){var S=h&b^h&R^b&R;return S<0&&(S+=4294967296),S}function G(c,h){var v=n(c,h,28),b=n(h,c,2),M=n(h,c,7),R=v^b^M;return R<0&&(R+=4294967296),R}function $(c,h){var v=l(c,h,28),b=l(h,c,2),M=l(h,c,7),R=v^b^M;return R<0&&(R+=4294967296),R}function re(c,h){var v=n(c,h,14),b=n(c,h,18),M=n(h,c,9),R=v^b^M;return R<0&&(R+=4294967296),R}function Q(c,h){var v=l(c,h,14),b=l(c,h,18),M=l(h,c,9),R=v^b^M;return R<0&&(R+=4294967296),R}function H(c,h){var v=n(c,h,1),b=n(c,h,8),M=i(c,h,7),R=v^b^M;return R<0&&(R+=4294967296),R}function Y(c,h){var v=l(c,h,1),b=l(c,h,8),M=d(c,h,7),R=v^b^M;return R<0&&(R+=4294967296),R}function T(c,h){var v=n(c,h,19),b=n(h,c,29),M=i(c,h,6),R=v^b^M;return R<0&&(R+=4294967296),R}function o(c,h){var v=l(c,h,19),b=l(h,c,29),M=d(c,h,6),R=v^b^M;return R<0&&(R+=4294967296),R}return Ov}var Fv,u5;function TP(){if(u5)return Fv;u5=1;var e=Ss(),t=UT();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return e.inherits(r,t),Fv=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(l){return l==="hex"?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")},Fv}var d5;function AP(){return d5||(d5=1,da.sha1=MP(),da.sha224=CP(),da.sha256=FT(),da.sha384=TP(),da.sha512=UT()),da}var Uv={},f5;function RP(){if(f5)return Uv;f5=1;var e=Ss(),t=zd(),r=e.rotl32,n=e.sum32,l=e.sum32_3,i=e.sum32_4,d=t.BlockHash;function p(){if(!(this instanceof p))return new p;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}e.inherits(p,d),Uv.ripemd160=p,p.blockSize=512,p.outSize=160,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(P,z){for(var B=this.h[0],D=this.h[1],U=this.h[2],G=this.h[3],$=this.h[4],re=B,Q=D,H=U,Y=G,T=$,o=0;o<80;o++){var c=n(r(i(B,g(o,D,U,G),P[w[o]+z],x(o)),_[o]),$);B=$,$=G,G=r(U,10),U=D,D=c,c=n(r(i(re,g(79-o,Q,H,Y),P[j[o]+z],y(o)),A[o]),T),re=T,T=Y,Y=r(H,10),H=Q,Q=c}c=l(this.h[1],U,Y),this.h[1]=l(this.h[2],G,T),this.h[2]=l(this.h[3],$,re),this.h[3]=l(this.h[4],B,Q),this.h[4]=l(this.h[0],D,H),this.h[0]=c},p.prototype._digest=function(P){return P==="hex"?e.toHex32(this.h,"little"):e.split32(this.h,"little")};function g(E,P,z,B){return E<=15?P^z^B:E<=31?P&z|~P&B:E<=47?(P|~z)^B:E<=63?P&B|z&~B:P^(z|~B)}function x(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function y(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}var w=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],j=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Uv}var $v,h5;function EP(){if(h5)return $v;h5=1;var e=Ss(),t=Zi();function r(n,l,i){if(!(this instanceof r))return new r(n,l,i);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(l,i))}return $v=r,r.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),t(l.length<=this.blockSize);for(var i=l.length;i<this.blockSize;i++)l.push(0);for(i=0;i<l.length;i++)l[i]^=54;for(this.inner=new this.Hash().update(l),i=0;i<l.length;i++)l[i]^=106;this.outer=new this.Hash().update(l)},r.prototype.update=function(l,i){return this.inner.update(l,i),this},r.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)},$v}var p5;function lw(){return p5||(p5=1,(function(e){var t=e;t.utils=Ss(),t.common=zd(),t.sha=AP(),t.ripemd=RP(),t.hmac=EP(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(Bv)),Bv}var qv,g5;function IP(){return g5||(g5=1,qv={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),qv}var m5;function cw(){return m5||(m5=1,(function(e){var t=e,r=lw(),n=LT(),l=Xi(),i=l.assert;function d(x){x.type==="short"?this.curve=new n.short(x):x.type==="edwards"?this.curve=new n.edwards(x):this.curve=new n.mont(x),this.g=this.curve.g,this.n=this.curve.n,this.hash=x.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=d;function p(x,y){Object.defineProperty(t,x,{configurable:!0,enumerable:!0,get:function(){var w=new d(y);return Object.defineProperty(t,x,{configurable:!0,enumerable:!0,value:w}),w}})}p("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),p("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),p("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),p("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),p("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),p("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),p("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var g;try{g=IP()}catch{g=void 0}p("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",g]})})(zv)),zv}var Hv,y5;function zP(){if(y5)return Hv;y5=1;var e=lw(),t=DT(),r=Zi();function n(l){if(!(this instanceof n))return new n(l);this.hash=l.hash,this.predResist=!!l.predResist,this.outLen=this.hash.outSize,this.minEntropy=l.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var i=t.toArray(l.entropy,l.entropyEnc||"hex"),d=t.toArray(l.nonce,l.nonceEnc||"hex"),p=t.toArray(l.pers,l.persEnc||"hex");r(i.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(i,d,p)}return Hv=n,n.prototype._init=function(i,d,p){var g=i.concat(d).concat(p);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var x=0;x<this.V.length;x++)this.K[x]=0,this.V[x]=1;this._update(g),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},n.prototype._update=function(i){var d=this._hmac().update(this.V).update([0]);i&&(d=d.update(i)),this.K=d.digest(),this.V=this._hmac().update(this.V).digest(),i&&(this.K=this._hmac().update(this.V).update([1]).update(i).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(i,d,p,g){typeof d!="string"&&(g=p,p=d,d=null),i=t.toArray(i,d),p=t.toArray(p,g),r(i.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(i.concat(p||[])),this._reseed=1},n.prototype.generate=function(i,d,p,g){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof d!="string"&&(g=p,p=d,d=null),p&&(p=t.toArray(p,g||"hex"),this._update(p));for(var x=[];x.length<i;)this.V=this._hmac().update(this.V).digest(),x=x.concat(this.V);var y=x.slice(0,i);return this._update(p),this._reseed++,t.encode(y,d)},Hv}var Wv,v5;function BP(){if(v5)return Wv;v5=1;var e=Ks(),t=Xi(),r=t.assert;function n(l,i){this.ec=l,this.priv=null,this.pub=null,i.priv&&this._importPrivate(i.priv,i.privEnc),i.pub&&this._importPublic(i.pub,i.pubEnc)}return Wv=n,n.fromPublic=function(i,d,p){return d instanceof n?d:new n(i,{pub:d,pubEnc:p})},n.fromPrivate=function(i,d,p){return d instanceof n?d:new n(i,{priv:d,privEnc:p})},n.prototype.validate=function(){var i=this.getPublic();return i.isInfinity()?{result:!1,reason:"Invalid public key"}:i.validate()?i.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(i,d){return typeof i=="string"&&(d=i,i=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,i):this.pub},n.prototype.getPrivate=function(i){return i==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(i,d){this.priv=new e(i,d||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(i,d){if(i.x||i.y){this.ec.curve.type==="mont"?r(i.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(i.x&&i.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(i.x,i.y);return}this.pub=this.ec.curve.decodePoint(i,d)},n.prototype.derive=function(i){return i.validate()||r(i.validate(),"public point not validated"),i.mul(this.priv).getX()},n.prototype.sign=function(i,d,p){return this.ec.sign(i,this,d,p)},n.prototype.verify=function(i,d,p){return this.ec.verify(i,d,this,void 0,p)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},Wv}var Vv,x5;function PP(){if(x5)return Vv;x5=1;var e=Ks(),t=Xi(),r=t.assert;function n(g,x){if(g instanceof n)return g;this._importDER(g,x)||(r(g.r&&g.s,"Signature without r or s"),this.r=new e(g.r,16),this.s=new e(g.s,16),g.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}Vv=n;function l(){this.place=0}function i(g,x){var y=g[x.place++];if(!(y&128))return y;var w=y&15;if(w===0||w>4||g[x.place]===0)return!1;for(var j=0,_=0,A=x.place;_<w;_++,A++)j<<=8,j|=g[A],j>>>=0;return j<=127?!1:(x.place=A,j)}function d(g){for(var x=0,y=g.length-1;!g[x]&&!(g[x+1]&128)&&x<y;)x++;return x===0?g:g.slice(x)}n.prototype._importDER=function(x,y){x=t.toArray(x,y);var w=new l;if(x[w.place++]!==48)return!1;var j=i(x,w);if(j===!1||j+w.place!==x.length||x[w.place++]!==2)return!1;var _=i(x,w);if(_===!1||(x[w.place]&128)!==0)return!1;var A=x.slice(w.place,_+w.place);if(w.place+=_,x[w.place++]!==2)return!1;var E=i(x,w);if(E===!1||x.length!==E+w.place||(x[w.place]&128)!==0)return!1;var P=x.slice(w.place,E+w.place);if(A[0]===0)if(A[1]&128)A=A.slice(1);else return!1;if(P[0]===0)if(P[1]&128)P=P.slice(1);else return!1;return this.r=new e(A),this.s=new e(P),this.recoveryParam=null,!0};function p(g,x){if(x<128){g.push(x);return}var y=1+(Math.log(x)/Math.LN2>>>3);for(g.push(y|128);--y;)g.push(x>>>(y<<3)&255);g.push(x)}return n.prototype.toDER=function(x){var y=this.r.toArray(),w=this.s.toArray();for(y[0]&128&&(y=[0].concat(y)),w[0]&128&&(w=[0].concat(w)),y=d(y),w=d(w);!w[0]&&!(w[1]&128);)w=w.slice(1);var j=[2];p(j,y.length),j=j.concat(y),j.push(2),p(j,w.length);var _=j.concat(w),A=[48];return p(A,_.length),A=A.concat(_),t.encode(A,x)},Vv}var Gv,b5;function NP(){if(b5)return Gv;b5=1;var e=Ks(),t=zP(),r=Xi(),n=cw(),l=sw(),i=r.assert,d=BP(),p=PP();function g(x){if(!(this instanceof g))return new g(x);typeof x=="string"&&(i(Object.prototype.hasOwnProperty.call(n,x),"Unknown curve "+x),x=n[x]),x instanceof n.PresetCurve&&(x={curve:x}),this.curve=x.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=x.curve.g,this.g.precompute(x.curve.n.bitLength()+1),this.hash=x.hash||x.curve.hash}return Gv=g,g.prototype.keyPair=function(y){return new d(this,y)},g.prototype.keyFromPrivate=function(y,w){return d.fromPrivate(this,y,w)},g.prototype.keyFromPublic=function(y,w){return d.fromPublic(this,y,w)},g.prototype.genKeyPair=function(y){y||(y={});for(var w=new t({hash:this.hash,pers:y.pers,persEnc:y.persEnc||"utf8",entropy:y.entropy||l(this.hash.hmacStrength),entropyEnc:y.entropy&&y.entropyEnc||"utf8",nonce:this.n.toArray()}),j=this.n.byteLength(),_=this.n.sub(new e(2));;){var A=new e(w.generate(j));if(!(A.cmp(_)>0))return A.iaddn(1),this.keyFromPrivate(A)}},g.prototype._truncateToN=function(y,w,j){var _;if(e.isBN(y)||typeof y=="number")y=new e(y,16),_=y.byteLength();else if(typeof y=="object")_=y.length,y=new e(y,16);else{var A=y.toString();_=A.length+1>>>1,y=new e(A,16)}typeof j!="number"&&(j=_*8);var E=j-this.n.bitLength();return E>0&&(y=y.ushrn(E)),!w&&y.cmp(this.n)>=0?y.sub(this.n):y},g.prototype.sign=function(y,w,j,_){if(typeof j=="object"&&(_=j,j=null),_||(_={}),typeof y!="string"&&typeof y!="number"&&!e.isBN(y)){i(typeof y=="object"&&y&&typeof y.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),i(y.length>>>0===y.length);for(var A=0;A<y.length;A++)i((y[A]&255)===y[A])}w=this.keyFromPrivate(w,j),y=this._truncateToN(y,!1,_.msgBitLength),i(!y.isNeg(),"Can not sign a negative message");var E=this.n.byteLength(),P=w.getPrivate().toArray("be",E),z=y.toArray("be",E);i(new e(z).eq(y),"Can not sign message");for(var B=new t({hash:this.hash,entropy:P,nonce:z,pers:_.pers,persEnc:_.persEnc||"utf8"}),D=this.n.sub(new e(1)),U=0;;U++){var G=_.k?_.k(U):new e(B.generate(this.n.byteLength()));if(G=this._truncateToN(G,!0),!(G.cmpn(1)<=0||G.cmp(D)>=0)){var $=this.g.mul(G);if(!$.isInfinity()){var re=$.getX(),Q=re.umod(this.n);if(Q.cmpn(0)!==0){var H=G.invm(this.n).mul(Q.mul(w.getPrivate()).iadd(y));if(H=H.umod(this.n),H.cmpn(0)!==0){var Y=($.getY().isOdd()?1:0)|(re.cmp(Q)!==0?2:0);return _.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),Y^=1),new p({r:Q,s:H,recoveryParam:Y})}}}}}},g.prototype.verify=function(y,w,j,_,A){A||(A={}),y=this._truncateToN(y,!1,A.msgBitLength),j=this.keyFromPublic(j,_),w=new p(w,"hex");var E=w.r,P=w.s;if(E.cmpn(1)<0||E.cmp(this.n)>=0||P.cmpn(1)<0||P.cmp(this.n)>=0)return!1;var z=P.invm(this.n),B=z.mul(y).umod(this.n),D=z.mul(E).umod(this.n),U;return this.curve._maxwellTrick?(U=this.g.jmulAdd(B,j.getPublic(),D),U.isInfinity()?!1:U.eqXToP(E)):(U=this.g.mulAdd(B,j.getPublic(),D),U.isInfinity()?!1:U.getX().umod(this.n).cmp(E)===0)},g.prototype.recoverPubKey=function(x,y,w,j){i((3&w)===w,"The recovery param is more than two bits"),y=new p(y,j);var _=this.n,A=new e(x),E=y.r,P=y.s,z=w&1,B=w>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&B)throw new Error("Unable to find sencond key candinate");B?E=this.curve.pointFromX(E.add(this.curve.n),z):E=this.curve.pointFromX(E,z);var D=y.r.invm(_),U=_.sub(A).mul(D).umod(_),G=P.mul(D).umod(_);return this.g.mulAdd(U,E,G)},g.prototype.getKeyRecoveryParam=function(x,y,w,j){if(y=new p(y,j),y.recoveryParam!==null)return y.recoveryParam;for(var _=0;_<4;_++){var A;try{A=this.recoverPubKey(x,y,_)}catch{continue}if(A.eq(w))return _}throw new Error("Unable to find valid recovery factor")},Gv}var Kv,w5;function DP(){if(w5)return Kv;w5=1;var e=Xi(),t=e.assert,r=e.parseBytes,n=e.cachedProperty;function l(i,d){this.eddsa=i,this._secret=r(d.secret),i.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=r(d.pub)}return l.fromPublic=function(d,p){return p instanceof l?p:new l(d,{pub:p})},l.fromSecret=function(d,p){return p instanceof l?p:new l(d,{secret:p})},l.prototype.secret=function(){return this._secret},n(l,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(l,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(l,"privBytes",function(){var d=this.eddsa,p=this.hash(),g=d.encodingLength-1,x=p.slice(0,d.encodingLength);return x[0]&=248,x[g]&=127,x[g]|=64,x}),n(l,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(l,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(l,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),l.prototype.sign=function(d){return t(this._secret,"KeyPair can only verify"),this.eddsa.sign(d,this)},l.prototype.verify=function(d,p){return this.eddsa.verify(d,p,this)},l.prototype.getSecret=function(d){return t(this._secret,"KeyPair is public only"),e.encode(this.secret(),d)},l.prototype.getPublic=function(d){return e.encode(this.pubBytes(),d)},Kv=l,Kv}var Yv,_5;function LP(){if(_5)return Yv;_5=1;var e=Ks(),t=Xi(),r=t.assert,n=t.cachedProperty,l=t.parseBytes;function i(d,p){this.eddsa=d,typeof p!="object"&&(p=l(p)),Array.isArray(p)&&(r(p.length===d.encodingLength*2,"Signature has invalid size"),p={R:p.slice(0,d.encodingLength),S:p.slice(d.encodingLength)}),r(p.R&&p.S,"Signature without R or S"),d.isPoint(p.R)&&(this._R=p.R),p.S instanceof e&&(this._S=p.S),this._Rencoded=Array.isArray(p.R)?p.R:p.Rencoded,this._Sencoded=Array.isArray(p.S)?p.S:p.Sencoded}return n(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},Yv=i,Yv}var Jv,S5;function OP(){if(S5)return Jv;S5=1;var e=lw(),t=cw(),r=Xi(),n=r.assert,l=r.parseBytes,i=DP(),d=LP();function p(g){if(n(g==="ed25519","only tested with ed25519 so far"),!(this instanceof p))return new p(g);g=t[g].curve,this.curve=g,this.g=g.g,this.g.precompute(g.n.bitLength()+1),this.pointClass=g.point().constructor,this.encodingLength=Math.ceil(g.n.bitLength()/8),this.hash=e.sha512}return Jv=p,p.prototype.sign=function(x,y){x=l(x);var w=this.keyFromSecret(y),j=this.hashInt(w.messagePrefix(),x),_=this.g.mul(j),A=this.encodePoint(_),E=this.hashInt(A,w.pubBytes(),x).mul(w.priv()),P=j.add(E).umod(this.curve.n);return this.makeSignature({R:_,S:P,Rencoded:A})},p.prototype.verify=function(x,y,w){if(x=l(x),y=this.makeSignature(y),y.S().gte(y.eddsa.curve.n)||y.S().isNeg())return!1;var j=this.keyFromPublic(w),_=this.hashInt(y.Rencoded(),j.pubBytes(),x),A=this.g.mul(y.S()),E=y.R().add(j.pub().mul(_));return E.eq(A)},p.prototype.hashInt=function(){for(var x=this.hash(),y=0;y<arguments.length;y++)x.update(arguments[y]);return r.intFromLE(x.digest()).umod(this.curve.n)},p.prototype.keyFromPublic=function(x){return i.fromPublic(this,x)},p.prototype.keyFromSecret=function(x){return i.fromSecret(this,x)},p.prototype.makeSignature=function(x){return x instanceof d?x:new d(this,x)},p.prototype.encodePoint=function(x){var y=x.getY().toArray("le",this.encodingLength);return y[this.encodingLength-1]|=x.getX().isOdd()?128:0,y},p.prototype.decodePoint=function(x){x=r.parseBytes(x);var y=x.length-1,w=x.slice(0,y).concat(x[y]&-129),j=(x[y]&128)!==0,_=r.intFromLE(w);return this.curve.pointFromY(_,j)},p.prototype.encodeInt=function(x){return x.toArray("le",this.encodingLength)},p.prototype.decodeInt=function(x){return r.intFromLE(x)},p.prototype.isPoint=function(x){return x instanceof this.pointClass},Jv}var k5;function uw(){return k5||(k5=1,(function(e){var t=e;t.version=wP.version,t.utils=Xi(),t.rand=sw(),t.curve=LT(),t.curves=cw(),t.ec=NP(),t.eddsa=OP()})(jv)),jv}var Li={},Zv={},Yh={exports:{}},FP=Yh.exports,j5;function UP(){return j5||(j5=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,FP)})(Yh)),Yh.exports}var Xv={},M5;function $P(){return M5||(M5=1,(function(e){var t=Bd(),r=sr(),n=e;n.define=function(d,p){return new l(d,p)};function l(i,d){this.name=i,this.body=d,this.decoders={},this.encoders={}}l.prototype._createNamed=function(d){var p;try{p=Fn.runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{p=function(x){this._initNamed(x)}}return r(p,d),p.prototype._initNamed=function(x){d.call(this,x)},new p(this)},l.prototype._getDecoder=function(d){return d=d||"der",this.decoders.hasOwnProperty(d)||(this.decoders[d]=this._createNamed(t.decoders[d])),this.decoders[d]},l.prototype.decode=function(d,p,g){return this._getDecoder(p).decode(d,g)},l.prototype._getEncoder=function(d){return d=d||"der",this.encoders.hasOwnProperty(d)||(this.encoders[d]=this._createNamed(t.encoders[d])),this.encoders[d]},l.prototype.encode=function(d,p,g){return this._getEncoder(p).encode(d,g)}})(Xv)),Xv}var Qv={},ex={},C5;function qP(){if(C5)return ex;C5=1;var e=sr();function t(n){this._reporterState={obj:null,path:[],options:n||{},errors:[]}}ex.Reporter=t,t.prototype.isError=function(l){return l instanceof r},t.prototype.save=function(){var l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},t.prototype.restore=function(l){var i=this._reporterState;i.obj=l.obj,i.path=i.path.slice(0,l.pathLen)},t.prototype.enterKey=function(l){return this._reporterState.path.push(l)},t.prototype.exitKey=function(l){var i=this._reporterState;i.path=i.path.slice(0,l-1)},t.prototype.leaveKey=function(l,i,d){var p=this._reporterState;this.exitKey(l),p.obj!==null&&(p.obj[i]=d)},t.prototype.path=function(){return this._reporterState.path.join("/")},t.prototype.enterObject=function(){var l=this._reporterState,i=l.obj;return l.obj={},i},t.prototype.leaveObject=function(l){var i=this._reporterState,d=i.obj;return i.obj=l,d},t.prototype.error=function(l){var i,d=this._reporterState,p=l instanceof r;if(p?i=l:i=new r(d.path.map(function(g){return"["+JSON.stringify(g)+"]"}).join(""),l.message||l,l.stack),!d.options.partial)throw i;return p||d.errors.push(i),i},t.prototype.wrapResult=function(l){var i=this._reporterState;return i.options.partial?{result:this.isError(l)?null:l,errors:i.errors}:l};function r(n,l){this.path=n,this.rethrow(l)}return e(r,Error),r.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(i){this.stack=i.stack}return this},ex}var bh={},T5;function A5(){if(T5)return bh;T5=1;var e=sr(),t=Xu().Reporter,r=Ji().Buffer;function n(i,d){if(t.call(this,d),!r.isBuffer(i)){this.error("Input not Buffer");return}this.base=i,this.offset=0,this.length=i.length}e(n,t),bh.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:t.prototype.save.call(this)}},n.prototype.restore=function(d){var p=new n(this.base);return p.offset=d.offset,p.length=this.offset,this.offset=d.offset,t.prototype.restore.call(this,d.reporter),p},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(d){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(d||"DecoderBuffer overrun")},n.prototype.skip=function(d,p){if(!(this.offset+d<=this.length))return this.error(p||"DecoderBuffer overrun");var g=new n(this.base);return g._reporterState=this._reporterState,g.offset=this.offset,g.length=this.offset+d,this.offset+=d,g},n.prototype.raw=function(d){return this.base.slice(d?d.offset:this.offset,this.length)};function l(i,d){if(Array.isArray(i))this.length=0,this.value=i.map(function(p){return p instanceof l||(p=new l(p,d)),this.length+=p.length,p},this);else if(typeof i=="number"){if(!(0<=i&&i<=255))return d.error("non-byte EncoderBuffer value");this.value=i,this.length=1}else if(typeof i=="string")this.value=i,this.length=r.byteLength(i);else if(r.isBuffer(i))this.value=i,this.length=i.length;else return d.error("Unsupported type: "+typeof i)}return bh.EncoderBuffer=l,l.prototype.join=function(d,p){return d||(d=new r(this.length)),p||(p=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(g){g.join(d,p),p+=g.length}):(typeof this.value=="number"?d[p]=this.value:typeof this.value=="string"?d.write(this.value,p):r.isBuffer(this.value)&&this.value.copy(d,p),p+=this.length)),d},bh}var tx,R5;function HP(){if(R5)return tx;R5=1;var e=Xu().Reporter,t=Xu().EncoderBuffer,r=Xu().DecoderBuffer,n=Zi(),l=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],i=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(l),d=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function p(x,y){var w={};this._baseState=w,w.enc=x,w.parent=y||null,w.children=null,w.tag=null,w.args=null,w.reverseArgs=null,w.choice=null,w.optional=!1,w.any=!1,w.obj=!1,w.use=null,w.useDecoder=null,w.key=null,w.default=null,w.explicit=null,w.implicit=null,w.contains=null,w.parent||(w.children=[],this._wrap())}tx=p;var g=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return p.prototype.clone=function(){var y=this._baseState,w={};g.forEach(function(_){w[_]=y[_]});var j=new this.constructor(w.parent);return j._baseState=w,j},p.prototype._wrap=function(){var y=this._baseState;i.forEach(function(w){this[w]=function(){var _=new this.constructor(this);return y.children.push(_),_[w].apply(_,arguments)}},this)},p.prototype._init=function(y){var w=this._baseState;n(w.parent===null),y.call(this),w.children=w.children.filter(function(j){return j._baseState.parent===this},this),n.equal(w.children.length,1,"Root node can have only one child")},p.prototype._useArgs=function(y){var w=this._baseState,j=y.filter(function(_){return _ instanceof this.constructor},this);y=y.filter(function(_){return!(_ instanceof this.constructor)},this),j.length!==0&&(n(w.children===null),w.children=j,j.forEach(function(_){_._baseState.parent=this},this)),y.length!==0&&(n(w.args===null),w.args=y,w.reverseArgs=y.map(function(_){if(typeof _!="object"||_.constructor!==Object)return _;var A={};return Object.keys(_).forEach(function(E){E==(E|0)&&(E|=0);var P=_[E];A[P]=E}),A}))},d.forEach(function(x){p.prototype[x]=function(){var w=this._baseState;throw new Error(x+" not implemented for encoding: "+w.enc)}}),l.forEach(function(x){p.prototype[x]=function(){var w=this._baseState,j=Array.prototype.slice.call(arguments);return n(w.tag===null),w.tag=x,this._useArgs(j),this}}),p.prototype.use=function(y){n(y);var w=this._baseState;return n(w.use===null),w.use=y,this},p.prototype.optional=function(){var y=this._baseState;return y.optional=!0,this},p.prototype.def=function(y){var w=this._baseState;return n(w.default===null),w.default=y,w.optional=!0,this},p.prototype.explicit=function(y){var w=this._baseState;return n(w.explicit===null&&w.implicit===null),w.explicit=y,this},p.prototype.implicit=function(y){var w=this._baseState;return n(w.explicit===null&&w.implicit===null),w.implicit=y,this},p.prototype.obj=function(){var y=this._baseState,w=Array.prototype.slice.call(arguments);return y.obj=!0,w.length!==0&&this._useArgs(w),this},p.prototype.key=function(y){var w=this._baseState;return n(w.key===null),w.key=y,this},p.prototype.any=function(){var y=this._baseState;return y.any=!0,this},p.prototype.choice=function(y){var w=this._baseState;return n(w.choice===null),w.choice=y,this._useArgs(Object.keys(y).map(function(j){return y[j]})),this},p.prototype.contains=function(y){var w=this._baseState;return n(w.use===null),w.contains=y,this},p.prototype._decode=function(y,w){var j=this._baseState;if(j.parent===null)return y.wrapResult(j.children[0]._decode(y,w));var _=j.default,A=!0,E=null;if(j.key!==null&&(E=y.enterKey(j.key)),j.optional){var P=null;if(j.explicit!==null?P=j.explicit:j.implicit!==null?P=j.implicit:j.tag!==null&&(P=j.tag),P===null&&!j.any){var z=y.save();try{j.choice===null?this._decodeGeneric(j.tag,y,w):this._decodeChoice(y,w),A=!0}catch{A=!1}y.restore(z)}else if(A=this._peekTag(y,P,j.any),y.isError(A))return A}var B;if(j.obj&&A&&(B=y.enterObject()),A){if(j.explicit!==null){var D=this._decodeTag(y,j.explicit);if(y.isError(D))return D;y=D}var U=y.offset;if(j.use===null&&j.choice===null){if(j.any)var z=y.save();var G=this._decodeTag(y,j.implicit!==null?j.implicit:j.tag,j.any);if(y.isError(G))return G;j.any?_=y.raw(z):y=G}if(w&&w.track&&j.tag!==null&&w.track(y.path(),U,y.length,"tagged"),w&&w.track&&j.tag!==null&&w.track(y.path(),y.offset,y.length,"content"),j.any?_=_:j.choice===null?_=this._decodeGeneric(j.tag,y,w):_=this._decodeChoice(y,w),y.isError(_))return _;if(!j.any&&j.choice===null&&j.children!==null&&j.children.forEach(function(Q){Q._decode(y,w)}),j.contains&&(j.tag==="octstr"||j.tag==="bitstr")){var $=new r(_);_=this._getUse(j.contains,y._reporterState.obj)._decode($,w)}}return j.obj&&A&&(_=y.leaveObject(B)),j.key!==null&&(_!==null||A===!0)?y.leaveKey(E,j.key,_):E!==null&&y.exitKey(E),_},p.prototype._decodeGeneric=function(y,w,j){var _=this._baseState;return y==="seq"||y==="set"?null:y==="seqof"||y==="setof"?this._decodeList(w,y,_.args[0],j):/str$/.test(y)?this._decodeStr(w,y,j):y==="objid"&&_.args?this._decodeObjid(w,_.args[0],_.args[1],j):y==="objid"?this._decodeObjid(w,null,null,j):y==="gentime"||y==="utctime"?this._decodeTime(w,y,j):y==="null_"?this._decodeNull(w,j):y==="bool"?this._decodeBool(w,j):y==="objDesc"?this._decodeStr(w,y,j):y==="int"||y==="enum"?this._decodeInt(w,_.args&&_.args[0],j):_.use!==null?this._getUse(_.use,w._reporterState.obj)._decode(w,j):w.error("unknown tag: "+y)},p.prototype._getUse=function(y,w){var j=this._baseState;return j.useDecoder=this._use(y,w),n(j.useDecoder._baseState.parent===null),j.useDecoder=j.useDecoder._baseState.children[0],j.implicit!==j.useDecoder._baseState.implicit&&(j.useDecoder=j.useDecoder.clone(),j.useDecoder._baseState.implicit=j.implicit),j.useDecoder},p.prototype._decodeChoice=function(y,w){var j=this._baseState,_=null,A=!1;return Object.keys(j.choice).some(function(E){var P=y.save(),z=j.choice[E];try{var B=z._decode(y,w);if(y.isError(B))return!1;_={type:E,value:B},A=!0}catch{return y.restore(P),!1}return!0},this),A?_:y.error("Choice not matched")},p.prototype._createEncoderBuffer=function(y){return new t(y,this.reporter)},p.prototype._encode=function(y,w,j){var _=this._baseState;if(!(_.default!==null&&_.default===y)){var A=this._encodeValue(y,w,j);if(A!==void 0&&!this._skipDefault(A,w,j))return A}},p.prototype._encodeValue=function(y,w,j){var _=this._baseState;if(_.parent===null)return _.children[0]._encode(y,w||new e);var z=null;if(this.reporter=w,_.optional&&y===void 0)if(_.default!==null)y=_.default;else return;var A=null,E=!1;if(_.any)z=this._createEncoderBuffer(y);else if(_.choice)z=this._encodeChoice(y,w);else if(_.contains)A=this._getUse(_.contains,j)._encode(y,w),E=!0;else if(_.children)A=_.children.map(function(U){if(U._baseState.tag==="null_")return U._encode(null,w,y);if(U._baseState.key===null)return w.error("Child should have a key");var G=w.enterKey(U._baseState.key);if(typeof y!="object")return w.error("Child expected, but input is not object");var $=U._encode(y[U._baseState.key],w,y);return w.leaveKey(G),$},this).filter(function(U){return U}),A=this._createEncoderBuffer(A);else if(_.tag==="seqof"||_.tag==="setof"){if(!(_.args&&_.args.length===1))return w.error("Too many args for : "+_.tag);if(!Array.isArray(y))return w.error("seqof/setof, but data is not Array");var P=this.clone();P._baseState.implicit=null,A=this._createEncoderBuffer(y.map(function(U){var G=this._baseState;return this._getUse(G.args[0],y)._encode(U,w)},P))}else _.use!==null?z=this._getUse(_.use,j)._encode(y,w):(A=this._encodePrimitive(_.tag,y),E=!0);var z;if(!_.any&&_.choice===null){var B=_.implicit!==null?_.implicit:_.tag,D=_.implicit===null?"universal":"context";B===null?_.use===null&&w.error("Tag could be omitted only for .use()"):_.use===null&&(z=this._encodeComposite(B,E,D,A))}return _.explicit!==null&&(z=this._encodeComposite(_.explicit,!1,"context",z)),z},p.prototype._encodeChoice=function(y,w){var j=this._baseState,_=j.choice[y.type];return _||n(!1,y.type+" not found in "+JSON.stringify(Object.keys(j.choice))),_._encode(y.value,w)},p.prototype._encodePrimitive=function(y,w){var j=this._baseState;if(/str$/.test(y))return this._encodeStr(w,y);if(y==="objid"&&j.args)return this._encodeObjid(w,j.reverseArgs[0],j.args[1]);if(y==="objid")return this._encodeObjid(w,null,null);if(y==="gentime"||y==="utctime")return this._encodeTime(w,y);if(y==="null_")return this._encodeNull();if(y==="int"||y==="enum")return this._encodeInt(w,j.args&&j.reverseArgs[0]);if(y==="bool")return this._encodeBool(w);if(y==="objDesc")return this._encodeStr(w,y);throw new Error("Unsupported tag: "+y)},p.prototype._isNumstr=function(y){return/^[0-9 ]*$/.test(y)},p.prototype._isPrintstr=function(y){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(y)},tx}var E5;function Xu(){return E5||(E5=1,(function(e){var t=e;t.Reporter=qP().Reporter,t.DecoderBuffer=A5().DecoderBuffer,t.EncoderBuffer=A5().EncoderBuffer,t.Node=HP()})(Qv)),Qv}var rx={},nx={},I5;function WP(){return I5||(I5=1,(function(e){var t=$T();e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t._reverse(e.tag)})(nx)),nx}var z5;function $T(){return z5||(z5=1,(function(e){var t=e;t._reverse=function(n){var l={};return Object.keys(n).forEach(function(i){(i|0)==i&&(i=i|0);var d=n[i];l[d]=i}),l},t.der=WP()})(rx)),rx}var ix={},sx,B5;function qT(){if(B5)return sx;B5=1;var e=sr(),t=Bd(),r=t.base,n=t.bignum,l=t.constants.der;function i(x){this.enc="der",this.name=x.name,this.entity=x,this.tree=new d,this.tree._init(x.body)}sx=i,i.prototype.decode=function(y,w){return y instanceof r.DecoderBuffer||(y=new r.DecoderBuffer(y,w)),this.tree._decode(y,w)};function d(x){r.Node.call(this,"der",x)}e(d,r.Node),d.prototype._peekTag=function(y,w,j){if(y.isEmpty())return!1;var _=y.save(),A=p(y,'Failed to peek tag: "'+w+'"');return y.isError(A)?A:(y.restore(_),A.tag===w||A.tagStr===w||A.tagStr+"of"===w||j)},d.prototype._decodeTag=function(y,w,j){var _=p(y,'Failed to decode tag of "'+w+'"');if(y.isError(_))return _;var A=g(y,_.primitive,'Failed to get length of "'+w+'"');if(y.isError(A))return A;if(!j&&_.tag!==w&&_.tagStr!==w&&_.tagStr+"of"!==w)return y.error('Failed to match tag: "'+w+'"');if(_.primitive||A!==null)return y.skip(A,'Failed to match body of: "'+w+'"');var E=y.save(),P=this._skipUntilEnd(y,'Failed to skip indefinite length body: "'+this.tag+'"');return y.isError(P)?P:(A=y.offset-E.offset,y.restore(E),y.skip(A,'Failed to match body of: "'+w+'"'))},d.prototype._skipUntilEnd=function(y,w){for(;;){var j=p(y,w);if(y.isError(j))return j;var _=g(y,j.primitive,w);if(y.isError(_))return _;var A;if(j.primitive||_!==null?A=y.skip(_):A=this._skipUntilEnd(y,w),y.isError(A))return A;if(j.tagStr==="end")break}},d.prototype._decodeList=function(y,w,j,_){for(var A=[];!y.isEmpty();){var E=this._peekTag(y,"end");if(y.isError(E))return E;var P=j.decode(y,"der",_);if(y.isError(P)&&E)break;A.push(P)}return A},d.prototype._decodeStr=function(y,w){if(w==="bitstr"){var j=y.readUInt8();return y.isError(j)?j:{unused:j,data:y.raw()}}else if(w==="bmpstr"){var _=y.raw();if(_.length%2===1)return y.error("Decoding of string type: bmpstr length mismatch");for(var A="",E=0;E<_.length/2;E++)A+=String.fromCharCode(_.readUInt16BE(E*2));return A}else if(w==="numstr"){var P=y.raw().toString("ascii");return this._isNumstr(P)?P:y.error("Decoding of string type: numstr unsupported characters")}else{if(w==="octstr")return y.raw();if(w==="objDesc")return y.raw();if(w==="printstr"){var z=y.raw().toString("ascii");return this._isPrintstr(z)?z:y.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(w)?y.raw().toString():y.error("Decoding of string type: "+w+" unsupported")}},d.prototype._decodeObjid=function(y,w,j){for(var _,A=[],E=0;!y.isEmpty();){var P=y.readUInt8();E<<=7,E|=P&127,(P&128)===0&&(A.push(E),E=0)}P&128&&A.push(E);var z=A[0]/40|0,B=A[0]%40;if(j?_=A:_=[z,B].concat(A.slice(1)),w){var D=w[_.join(" ")];D===void 0&&(D=w[_.join(".")]),D!==void 0&&(_=D)}return _},d.prototype._decodeTime=function(y,w){var j=y.raw().toString();if(w==="gentime")var _=j.slice(0,4)|0,A=j.slice(4,6)|0,E=j.slice(6,8)|0,P=j.slice(8,10)|0,z=j.slice(10,12)|0,B=j.slice(12,14)|0;else if(w==="utctime"){var _=j.slice(0,2)|0,A=j.slice(2,4)|0,E=j.slice(4,6)|0,P=j.slice(6,8)|0,z=j.slice(8,10)|0,B=j.slice(10,12)|0;_<70?_=2e3+_:_=1900+_}else return y.error("Decoding "+w+" time is not supported yet");return Date.UTC(_,A-1,E,P,z,B,0)},d.prototype._decodeNull=function(y){return null},d.prototype._decodeBool=function(y){var w=y.readUInt8();return y.isError(w)?w:w!==0},d.prototype._decodeInt=function(y,w){var j=y.raw(),_=new n(j);return w&&(_=w[_.toString(10)]||_),_},d.prototype._use=function(y,w){return typeof y=="function"&&(y=y(w)),y._getDecoder("der").tree};function p(x,y){var w=x.readUInt8(y);if(x.isError(w))return w;var j=l.tagClass[w>>6],_=(w&32)===0;if((w&31)===31){var A=w;for(w=0;(A&128)===128;){if(A=x.readUInt8(y),x.isError(A))return A;w<<=7,w|=A&127}}else w&=31;var E=l.tag[w];return{cls:j,primitive:_,tag:w,tagStr:E}}function g(x,y,w){var j=x.readUInt8(w);if(x.isError(j))return j;if(!y&&j===128)return null;if((j&128)===0)return j;var _=j&127;if(_>4)return x.error("length octect is too long");j=0;for(var A=0;A<_;A++){j<<=8;var E=x.readUInt8(w);if(x.isError(E))return E;j|=E}return j}return sx}var ox,P5;function VP(){if(P5)return ox;P5=1;var e=sr(),t=Ji().Buffer,r=qT();function n(l){r.call(this,l),this.enc="pem"}return e(n,r),ox=n,n.prototype.decode=function(i,d){for(var p=i.toString().split(/[\r\n]+/g),g=d.label.toUpperCase(),x=/^-----(BEGIN|END) ([^-]+)-----$/,y=-1,w=-1,j=0;j<p.length;j++){var _=p[j].match(x);if(_!==null&&_[2]===g)if(y===-1){if(_[1]!=="BEGIN")break;y=j}else{if(_[1]!=="END")break;w=j;break}}if(y===-1||w===-1)throw new Error("PEM section not found for: "+g);var A=p.slice(y+1,w).join("");A.replace(/[^a-z0-9\+\/=]+/gi,"");var E=new t(A,"base64");return r.prototype.decode.call(this,E,d)},ox}var N5;function GP(){return N5||(N5=1,(function(e){var t=e;t.der=qT(),t.pem=VP()})(ix)),ix}var ax={},lx,D5;function HT(){if(D5)return lx;D5=1;var e=sr(),t=Ji().Buffer,r=Bd(),n=r.base,l=r.constants.der;function i(x){this.enc="der",this.name=x.name,this.entity=x,this.tree=new d,this.tree._init(x.body)}lx=i,i.prototype.encode=function(y,w){return this.tree._encode(y,w).join()};function d(x){n.Node.call(this,"der",x)}e(d,n.Node),d.prototype._encodeComposite=function(y,w,j,_){var A=g(y,w,j,this.reporter);if(_.length<128){var z=new t(2);return z[0]=A,z[1]=_.length,this._createEncoderBuffer([z,_])}for(var E=1,P=_.length;P>=256;P>>=8)E++;var z=new t(2+E);z[0]=A,z[1]=128|E;for(var P=1+E,B=_.length;B>0;P--,B>>=8)z[P]=B&255;return this._createEncoderBuffer([z,_])},d.prototype._encodeStr=function(y,w){if(w==="bitstr")return this._createEncoderBuffer([y.unused|0,y.data]);if(w==="bmpstr"){for(var j=new t(y.length*2),_=0;_<y.length;_++)j.writeUInt16BE(y.charCodeAt(_),_*2);return this._createEncoderBuffer(j)}else return w==="numstr"?this._isNumstr(y)?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: numstr supports only digits and space"):w==="printstr"?this._isPrintstr(y)?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(w)?this._createEncoderBuffer(y):w==="objDesc"?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: "+w+" unsupported")},d.prototype._encodeObjid=function(y,w,j){if(typeof y=="string"){if(!w)return this.reporter.error("string objid given, but no values map found");if(!w.hasOwnProperty(y))return this.reporter.error("objid not found in values map");y=w[y].split(/[\s\.]+/g);for(var _=0;_<y.length;_++)y[_]|=0}else if(Array.isArray(y)){y=y.slice();for(var _=0;_<y.length;_++)y[_]|=0}if(!Array.isArray(y))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(y));if(!j){if(y[1]>=40)return this.reporter.error("Second objid identifier OOB");y.splice(0,2,y[0]*40+y[1])}for(var A=0,_=0;_<y.length;_++){var E=y[_];for(A++;E>=128;E>>=7)A++}for(var P=new t(A),z=P.length-1,_=y.length-1;_>=0;_--){var E=y[_];for(P[z--]=E&127;(E>>=7)>0;)P[z--]=128|E&127}return this._createEncoderBuffer(P)};function p(x){return x<10?"0"+x:x}d.prototype._encodeTime=function(y,w){var j,_=new Date(y);return w==="gentime"?j=[p(_.getFullYear()),p(_.getUTCMonth()+1),p(_.getUTCDate()),p(_.getUTCHours()),p(_.getUTCMinutes()),p(_.getUTCSeconds()),"Z"].join(""):w==="utctime"?j=[p(_.getFullYear()%100),p(_.getUTCMonth()+1),p(_.getUTCDate()),p(_.getUTCHours()),p(_.getUTCMinutes()),p(_.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+w+" time is not supported yet"),this._encodeStr(j,"octstr")},d.prototype._encodeNull=function(){return this._createEncoderBuffer("")},d.prototype._encodeInt=function(y,w){if(typeof y=="string"){if(!w)return this.reporter.error("String int or enum given, but no values map");if(!w.hasOwnProperty(y))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(y));y=w[y]}if(typeof y!="number"&&!t.isBuffer(y)){var j=y.toArray();!y.sign&&j[0]&128&&j.unshift(0),y=new t(j)}if(t.isBuffer(y)){var _=y.length;y.length===0&&_++;var E=new t(_);return y.copy(E),y.length===0&&(E[0]=0),this._createEncoderBuffer(E)}if(y<128)return this._createEncoderBuffer(y);if(y<256)return this._createEncoderBuffer([0,y]);for(var _=1,A=y;A>=256;A>>=8)_++;for(var E=new Array(_),A=E.length-1;A>=0;A--)E[A]=y&255,y>>=8;return E[0]&128&&E.unshift(0),this._createEncoderBuffer(new t(E))},d.prototype._encodeBool=function(y){return this._createEncoderBuffer(y?255:0)},d.prototype._use=function(y,w){return typeof y=="function"&&(y=y(w)),y._getEncoder("der").tree},d.prototype._skipDefault=function(y,w,j){var _=this._baseState,A;if(_.default===null)return!1;var E=y.join();if(_.defaultBuffer===void 0&&(_.defaultBuffer=this._encodeValue(_.default,w,j).join()),E.length!==_.defaultBuffer.length)return!1;for(A=0;A<E.length;A++)if(E[A]!==_.defaultBuffer[A])return!1;return!0};function g(x,y,w,j){var _;if(x==="seqof"?x="seq":x==="setof"&&(x="set"),l.tagByName.hasOwnProperty(x))_=l.tagByName[x];else if(typeof x=="number"&&(x|0)===x)_=x;else return j.error("Unknown tag: "+x);return _>=31?j.error("Multi-octet tag encoding unsupported"):(y||(_|=32),_|=l.tagClassByName[w||"universal"]<<6,_)}return lx}var cx,L5;function KP(){if(L5)return cx;L5=1;var e=sr(),t=HT();function r(n){t.call(this,n),this.enc="pem"}return e(r,t),cx=r,r.prototype.encode=function(l,i){for(var d=t.prototype.encode.call(this,l),p=d.toString("base64"),g=["-----BEGIN "+i.label+"-----"],x=0;x<p.length;x+=64)g.push(p.slice(x,x+64));return g.push("-----END "+i.label+"-----"),g.join(`
`)},cx}var O5;function YP(){return O5||(O5=1,(function(e){var t=e;t.der=HT(),t.pem=KP()})(ax)),ax}var F5;function Bd(){return F5||(F5=1,(function(e){var t=e;t.bignum=UP(),t.define=$P().define,t.base=Xu(),t.constants=$T(),t.decoders=GP(),t.encoders=YP()})(Zv)),Zv}var ux,U5;function JP(){if(U5)return ux;U5=1;var e=Bd(),t=e.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),r=e.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),l=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),i=e.define("RelativeDistinguishedName",function(){this.setof(r)}),d=e.define("RDNSequence",function(){this.seqof(i)}),p=e.define("Name",function(){this.choice({rdnSequence:this.use(d)})}),g=e.define("Validity",function(){this.seq().obj(this.key("notBefore").use(t),this.key("notAfter").use(t))}),x=e.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),y=e.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(p),this.key("validity").use(g),this.key("subject").use(p),this.key("subjectPublicKeyInfo").use(l),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(x).optional())}),w=e.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(y),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())});return ux=w,ux}var $5;function ZP(){if($5)return Li;$5=1;var e=Bd();Li.certificate=JP();var t=e.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Li.RSAPrivateKey=t;var r=e.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Li.RSAPublicKey=r;var n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});Li.PublicKey=l;var i=e.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});Li.PrivateKey=i;var d=e.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});Li.EncryptedPrivateKey=d;var p=e.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Li.DSAPrivateKey=p,Li.DSAparam=e.define("DSAparam",function(){this.int()});var g=e.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),x=e.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(g),this.key("publicKey").optional().explicit(1).bitstr())});return Li.ECPrivateKey=x,Li.signature=e.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),Li}const XP={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var dx,q5;function QP(){if(q5)return dx;q5=1;var e=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=Lp(),l=iw(),i=ar().Buffer;return dx=function(d,p){var g=d.toString(),x=g.match(e),y;if(x){var j="aes"+x[1],_=i.from(x[2],"hex"),A=i.from(x[3].replace(/[\r\n]/g,""),"base64"),E=n(p,_.slice(0,8),parseInt(x[1],10)).key,P=[],z=l.createDecipheriv(j,E,_);P.push(z.update(A)),P.push(z.final()),y=i.concat(P)}else{var w=g.match(r);y=i.from(w[2].replace(/[\r\n]/g,""),"base64")}var B=g.match(t)[1];return{tag:B,data:y}},dx}var fx,H5;function Fp(){if(H5)return fx;H5=1;var e=ZP(),t=XP,r=QP(),n=iw(),l=CT().pbkdf2Sync,i=ar().Buffer;function d(g,x){var y=g.algorithm.decrypt.kde.kdeparams.salt,w=parseInt(g.algorithm.decrypt.kde.kdeparams.iters.toString(),10),j=t[g.algorithm.decrypt.cipher.algo.join(".")],_=g.algorithm.decrypt.cipher.iv,A=g.subjectPrivateKey,E=parseInt(j.split("-")[1],10)/8,P=l(x,y,w,E,"sha1"),z=n.createDecipheriv(j,P,_),B=[];return B.push(z.update(A)),B.push(z.final()),i.concat(B)}function p(g){var x;typeof g=="object"&&!i.isBuffer(g)&&(x=g.passphrase,g=g.key),typeof g=="string"&&(g=i.from(g));var y=r(g,x),w=y.tag,j=y.data,_,A;switch(w){case"CERTIFICATE":A=e.certificate.decode(j,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(A||(A=e.PublicKey.decode(j,"der")),_=A.algorithm.algorithm.join("."),_){case"1.2.840.113549.1.1.1":return e.RSAPublicKey.decode(A.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return A.subjectPrivateKey=A.subjectPublicKey,{type:"ec",data:A};case"1.2.840.10040.4.1":return A.algorithm.params.pub_key=e.DSAparam.decode(A.subjectPublicKey.data,"der"),{type:"dsa",data:A.algorithm.params};default:throw new Error("unknown key id "+_)}case"ENCRYPTED PRIVATE KEY":j=e.EncryptedPrivateKey.decode(j,"der"),j=d(j,x);case"PRIVATE KEY":switch(A=e.PrivateKey.decode(j,"der"),_=A.algorithm.algorithm.join("."),_){case"1.2.840.113549.1.1.1":return e.RSAPrivateKey.decode(A.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:A.algorithm.curve,privateKey:e.ECPrivateKey.decode(A.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return A.algorithm.params.priv_key=e.DSAparam.decode(A.subjectPrivateKey,"der"),{type:"dsa",params:A.algorithm.params};default:throw new Error("unknown key id "+_)}case"RSA PUBLIC KEY":return e.RSAPublicKey.decode(j,"der");case"RSA PRIVATE KEY":return e.RSAPrivateKey.decode(j,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:e.DSAPrivateKey.decode(j,"der")};case"EC PRIVATE KEY":return j=e.ECPrivateKey.decode(j,"der"),{curve:j.parameters.value,privateKey:j.privateKey};default:throw new Error("unknown key type "+w)}}return p.signature=e.signature,fx=p,fx}const WT={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var W5;function eN(){if(W5)return ku.exports;W5=1;var e=ar().Buffer,t=wT(),r=aw(),n=uw().ec,l=ow(),i=Fp(),d=WT,p=1;function g(z,B,D,U,G){var $=i(B);if($.curve){if(U!=="ecdsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");return x(z,$)}else if($.type==="dsa"){if(U!=="dsa")throw new Error("wrong private key type");return y(z,$,D)}if(U!=="rsa"&&U!=="ecdsa/rsa")throw new Error("wrong private key type");if(B.padding!==void 0&&B.padding!==p)throw new Error("illegal or unsupported padding mode");z=e.concat([G,z]);for(var re=$.modulus.byteLength(),Q=[0,1];z.length+Q.length+1<re;)Q.push(255);Q.push(0);for(var H=-1;++H<z.length;)Q.push(z[H]);var Y=r(Q,$);return Y}function x(z,B){var D=d[B.curve.join(".")];if(!D)throw new Error("unknown curve "+B.curve.join("."));var U=new n(D),G=U.keyFromPrivate(B.privateKey),$=G.sign(z);return e.from($.toDER())}function y(z,B,D){for(var U=B.params.priv_key,G=B.params.p,$=B.params.q,re=B.params.g,Q=new l(0),H,Y=_(z,$).mod($),T=!1,o=j(U,$,z,D);T===!1;)H=E($,o,D),Q=P(re,H,G,$),T=H.invm($).imul(Y.add(U.mul(Q))).mod($),T.cmpn(0)===0&&(T=!1,Q=new l(0));return w(Q,T)}function w(z,B){z=z.toArray(),B=B.toArray(),z[0]&128&&(z=[0].concat(z)),B[0]&128&&(B=[0].concat(B));var D=z.length+B.length+4,U=[48,D,2,z.length];return U=U.concat(z,[2,B.length],B),e.from(U)}function j(z,B,D,U){if(z=e.from(z.toArray()),z.length<B.byteLength()){var G=e.alloc(B.byteLength()-z.length);z=e.concat([G,z])}var $=D.length,re=A(D,B),Q=e.alloc($);Q.fill(1);var H=e.alloc($);return H=t(U,H).update(Q).update(e.from([0])).update(z).update(re).digest(),Q=t(U,H).update(Q).digest(),H=t(U,H).update(Q).update(e.from([1])).update(z).update(re).digest(),Q=t(U,H).update(Q).digest(),{k:H,v:Q}}function _(z,B){var D=new l(z),U=(z.length<<3)-B.bitLength();return U>0&&D.ishrn(U),D}function A(z,B){z=_(z,B),z=z.mod(B);var D=e.from(z.toArray());if(D.length<B.byteLength()){var U=e.alloc(B.byteLength()-D.length);D=e.concat([U,D])}return D}function E(z,B,D){var U,G;do{for(U=e.alloc(0);U.length*8<z.bitLength();)B.v=t(D,B.k).update(B.v).digest(),U=e.concat([U,B.v]);G=_(U,z),B.k=t(D,B.k).update(B.v).update(e.from([0])).digest(),B.v=t(D,B.k).update(B.v).digest()}while(G.cmp(z)!==-1);return G}function P(z,B,D,U){return z.toRed(l.mont(D)).redPow(B).fromRed().mod(U)}return ku.exports=g,ku.exports.getKey=j,ku.exports.makeKey=E,ku.exports}var hx,V5;function tN(){if(V5)return hx;V5=1;var e=ar().Buffer,t=ow(),r=uw().ec,n=Fp(),l=WT;function i(x,y,w,j,_){var A=n(w);if(A.type==="ec"){if(j!=="ecdsa"&&j!=="ecdsa/rsa")throw new Error("wrong public key type");return d(x,y,A)}else if(A.type==="dsa"){if(j!=="dsa")throw new Error("wrong public key type");return p(x,y,A)}if(j!=="rsa"&&j!=="ecdsa/rsa")throw new Error("wrong public key type");y=e.concat([_,y]);for(var E=A.modulus.byteLength(),P=[1],z=0;y.length+P.length+2<E;)P.push(255),z+=1;P.push(0);for(var B=-1;++B<y.length;)P.push(y[B]);P=e.from(P);var D=t.mont(A.modulus);x=new t(x).toRed(D),x=x.redPow(new t(A.publicExponent)),x=e.from(x.fromRed().toArray());var U=z<8?1:0;for(E=Math.min(x.length,P.length),x.length!==P.length&&(U=1),B=-1;++B<E;)U|=x[B]^P[B];return U===0}function d(x,y,w){var j=l[w.data.algorithm.curve.join(".")];if(!j)throw new Error("unknown curve "+w.data.algorithm.curve.join("."));var _=new r(j),A=w.data.subjectPrivateKey.data;return _.verify(y,x,A)}function p(x,y,w){var j=w.data.p,_=w.data.q,A=w.data.g,E=w.data.pub_key,P=n.signature.decode(x,"der"),z=P.s,B=P.r;g(z,_),g(B,_);var D=t.mont(j),U=z.invm(_),G=A.toRed(D).redPow(new t(y).mul(U).mod(_)).fromRed().mul(E.toRed(D).redPow(B.mul(U).mod(_)).fromRed()).mod(j).mod(_);return G.cmp(B)===0}function g(x,y){if(x.cmpn(0)<=0)throw new Error("invalid sig");if(x.cmp(y)>=0)throw new Error("invalid sig")}return hx=i,hx}var px,G5;function rN(){if(G5)return px;G5=1;var e=ar().Buffer,t=Ed(),r=yT(),n=sr(),l=eN(),i=tN(),d=_T;Object.keys(d).forEach(function(w){d[w].id=e.from(d[w].id,"hex"),d[w.toLowerCase()]=d[w]});function p(w){r.Writable.call(this);var j=d[w];if(!j)throw new Error("Unknown message digest");this._hashType=j.hash,this._hash=t(j.hash),this._tag=j.id,this._signType=j.sign}n(p,r.Writable),p.prototype._write=function(j,_,A){this._hash.update(j),A()},p.prototype.update=function(j,_){return this._hash.update(typeof j=="string"?e.from(j,_):j),this},p.prototype.sign=function(j,_){this.end();var A=this._hash.digest(),E=l(A,j,this._hashType,this._signType,this._tag);return _?E.toString(_):E};function g(w){r.Writable.call(this);var j=d[w];if(!j)throw new Error("Unknown message digest");this._hash=t(j.hash),this._tag=j.id,this._signType=j.sign}n(g,r.Writable),g.prototype._write=function(j,_,A){this._hash.update(j),A()},g.prototype.update=function(j,_){return this._hash.update(typeof j=="string"?e.from(j,_):j),this},g.prototype.verify=function(j,_,A){var E=typeof _=="string"?e.from(_,A):_;this.end();var P=this._hash.digest();return i(E,P,j,this._signType,this._tag)};function x(w){return new p(w)}function y(w){return new g(w)}return px={Sign:x,Verify:y,createSign:x,createVerify:y},px}var Jh={exports:{}},nN=Jh.exports,K5;function iN(){return K5||(K5=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,nN)})(Jh)),Jh.exports}var gx,Y5;function sN(){if(Y5)return gx;Y5=1;var e=uw(),t=iN();gx=function(d){return new n(d)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1;function n(i){this.curveType=r[i],this.curveType||(this.curveType={name:i}),this.curve=new e.ec(this.curveType.name),this.keys=void 0}n.prototype.generateKeys=function(i,d){return this.keys=this.curve.genKeyPair(),this.getPublicKey(i,d)},n.prototype.computeSecret=function(i,d,p){d=d||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,d));var g=this.curve.keyFromPublic(i).getPublic(),x=g.mul(this.keys.getPrivate()).getX();return l(x,p,this.curveType.byteLength)},n.prototype.getPublicKey=function(i,d){var p=this.keys.getPublic(d==="compressed",!0);return d==="hybrid"&&(p[p.length-1]%2?p[0]=7:p[0]=6),l(p,i)},n.prototype.getPrivateKey=function(i){return l(this.keys.getPrivate(),i)},n.prototype.setPublicKey=function(i,d){return d=d||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,d)),this.keys._importPublic(i),this},n.prototype.setPrivateKey=function(i,d){d=d||"utf8",Buffer.isBuffer(i)||(i=new Buffer(i,d));var p=new t(i);return p=p.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(p),this};function l(i,d,p){Array.isArray(i)||(i=i.toArray());var g=new Buffer(i);if(p&&g.length<p){var x=new Buffer(p-g.length);x.fill(0),g=Buffer.concat([x,g])}return d?g.toString(d):g}return gx}var mx={},yx,J5;function VT(){if(J5)return yx;J5=1;var e=Ed(),t=ar().Buffer;yx=function(n,l){for(var i=t.alloc(0),d=0,p;i.length<l;)p=r(d++),i=t.concat([i,e("sha1").update(n).update(p).digest()]);return i.slice(0,l)};function r(n){var l=t.allocUnsafe(4);return l.writeUInt32BE(n,0),l}return yx}var vx,Z5;function GT(){return Z5||(Z5=1,vx=function(t,r){for(var n=t.length,l=-1;++l<n;)t[l]^=r[l];return t}),vx}var Zh={exports:{}},oN=Zh.exports,X5;function dw(){return X5||(X5=1,(function(e){(function(t,r){function n(T,o){if(!T)throw new Error(o||"Assertion failed")}function l(T,o){T.super_=o;var c=function(){};c.prototype=o.prototype,T.prototype=new c,T.prototype.constructor=T}function i(T,o,c){if(i.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(T||0,o||10,c||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=Fn.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(c===16?this._parseHex(o,v,h):(this._parseBase(o,c,v),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,M,R=0;if(h==="be")for(v=o.length-1,b=0;v>=0;v-=3)M=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(h==="le")for(v=0,b=0;v<o.length;v+=3)M=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[b]|=M<<R&67108863,this.words[b+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function p(T,o){var c=T.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function g(T,o,c){var h=p(T,c);return c-1>=o&&(h|=p(T,c-1)<<4),h}i.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,M=0,R;if(h==="be")for(v=o.length-1;v>=c;v-=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8;else{var S=o.length-c;for(v=S%2===0?c+1:c;v<o.length;v+=2)R=g(o,c,v)<<b,this.words[M]|=R&67108863,b>=18?(b-=18,M+=1,this.words[M]|=R>>>26):b+=8}this.strip()};function x(T,o,c,h){for(var v=0,b=Math.min(T.length,c),M=o;M<b;M++){var R=T.charCodeAt(M)-48;v*=h,R>=49?v+=R-49+10:R>=17?v+=R-17+10:v+=R}return v}i.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=c)v++;v--,b=b/c|0;for(var M=o.length-h,R=M%v,S=Math.min(M,M-R)+h,a=0,k=h;k<S;k+=v)a=x(o,k,k+v,c),this.imuln(b),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(R!==0){var N=1;for(a=x(o,k,o.length,c),k=0;k<R;k++)N*=c;this.imuln(N),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var v=0,b=0,M=0;M<this.length;M++){var R=this.words[M],S=((R<<v|b)&16777215).toString(16);b=R>>>24-v&16777215,v+=2,v>=26&&(v-=26,M--),b!==0||M!==this.length-1?h=y[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var a=w[o],k=j[o];h="";var N=this.clone();for(N.negative=0;!N.isZero();){var L=N.modn(k).toString(o);N=N.idivn(k),N.isZero()?h=L+h:h=y[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return n(typeof d<"u"),this.toArrayLike(d,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,h){var v=this.byteLength(),b=h||Math.max(1,v);n(v<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var M=c==="le",R=new o(b),S,a,k=this.clone();if(M){for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[a]=S;for(;a<b;a++)R[a]=0}else{for(a=0;a<b-v;a++)R[a]=0;for(a=0;!k.isZero();a++)S=k.andln(255),k.iushrn(8),R[b-a-1]=S}return R},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return(c&8191)===0&&(h+=13,c>>>=13),(c&127)===0&&(h+=7,c>>>=7),(c&15)===0&&(h+=4,c>>>=4),(c&3)===0&&(h+=2,c>>>=2),(c&1)===0&&h++,h},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function _(T){for(var o=new Array(T.bitLength()),c=0;c<o.length;c++){var h=c/26|0,v=c%26;o[c]=(T.words[h]&1<<v)>>>v}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var v=0;v<h.length;v++)this.words[v]=c.words[v]^h.words[v];if(this!==c)for(;v<c.length;v++)this.words[v]=c.words[v];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var v=0;v<c;v++)this.words[v]=~this.words[v]&67108863;return h>0&&(this.words[v]=~this.words[v]&67108863>>26-h),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,v=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<v:this.words[h]=this.words[h]&~(1<<v),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,v;this.length>o.length?(h=this,v=o):(h=o,v=this);for(var b=0,M=0;M<v.length;M++)c=(h.words[M]|0)+(v.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;for(;b!==0&&M<h.length;M++)c=(h.words[M]|0)+b,this.words[M]=c&67108863,b=c>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;h>0?(v=this,b=o):(v=o,b=this);for(var M=0,R=0;R<b.length;R++)c=(v.words[R]|0)-(b.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;for(;M!==0&&R<v.length;R++)c=(v.words[R]|0)+M,M=c>>26,this.words[R]=c&67108863;if(M===0&&R<v.length&&v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this.length=Math.max(this.length,R),v!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function A(T,o,c){c.negative=o.negative^T.negative;var h=T.length+o.length|0;c.length=h,h=h-1|0;var v=T.words[0]|0,b=o.words[0]|0,M=v*b,R=M&67108863,S=M/67108864|0;c.words[0]=R;for(var a=1;a<h;a++){for(var k=S>>>26,N=S&67108863,L=Math.min(a,o.length-1),X=Math.max(0,a-T.length+1);X<=L;X++){var se=a-X|0;v=T.words[se]|0,b=o.words[X]|0,M=v*b+N,k+=M/67108864|0,N=M&67108863}c.words[a]=N|0,S=k|0}return S!==0?c.words[a]=S|0:c.length--,c.strip()}var E=function(o,c,h){var v=o.words,b=c.words,M=h.words,R=0,S,a,k,N=v[0]|0,L=N&8191,X=N>>>13,se=v[1]|0,te=se&8191,K=se>>>13,J=v[2]|0,ne=J&8191,oe=J>>>13,ae=v[3]|0,ee=ae&8191,ue=ae>>>13,Ce=v[4]|0,ve=Ce&8191,ge=Ce>>>13,Je=v[5]|0,Te=Je&8191,ze=Je>>>13,vt=v[6]|0,he=vt&8191,me=vt>>>13,Me=v[7]|0,pe=Me&8191,ke=Me>>>13,_e=v[8]|0,Z=_e&8191,q=_e>>>13,V=v[9]|0,ie=V&8191,ce=V>>>13,be=b[0]|0,fe=be&8191,Ae=be>>>13,ht=b[1]|0,je=ht&8191,Ie=ht>>>13,pt=b[2]|0,Ne=pt&8191,Ge=pt>>>13,Ot=b[3]|0,Oe=Ot&8191,Ze=Ot>>>13,Lt=b[4]|0,Pe=Lt&8191,Ve=Lt>>>13,Bt=b[5]|0,Fe=Bt&8191,Xe=Bt>>>13,Et=b[6]|0,Be=Et&8191,Ue=Et>>>13,It=b[7]|0,$e=It&8191,Qe=It>>>13,Ft=b[8]|0,qe=Ft&8191,Ye=Ft>>>13,Ut=b[9]|0,ye=Ut&8191,xe=Ut>>>13;h.negative=o.negative^c.negative,h.length=19,S=Math.imul(L,fe),a=Math.imul(L,Ae),a=a+Math.imul(X,fe)|0,k=Math.imul(X,Ae);var nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(nt>>>26)|0,nt&=67108863,S=Math.imul(te,fe),a=Math.imul(te,Ae),a=a+Math.imul(K,fe)|0,k=Math.imul(K,Ae),S=S+Math.imul(L,je)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(X,je)|0,k=k+Math.imul(X,Ie)|0;var ct=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(ct>>>26)|0,ct&=67108863,S=Math.imul(ne,fe),a=Math.imul(ne,Ae),a=a+Math.imul(oe,fe)|0,k=Math.imul(oe,Ae),S=S+Math.imul(te,je)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(K,je)|0,k=k+Math.imul(K,Ie)|0,S=S+Math.imul(L,Ne)|0,a=a+Math.imul(L,Ge)|0,a=a+Math.imul(X,Ne)|0,k=k+Math.imul(X,Ge)|0;var wt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,S=Math.imul(ee,fe),a=Math.imul(ee,Ae),a=a+Math.imul(ue,fe)|0,k=Math.imul(ue,Ae),S=S+Math.imul(ne,je)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(oe,je)|0,k=k+Math.imul(oe,Ie)|0,S=S+Math.imul(te,Ne)|0,a=a+Math.imul(te,Ge)|0,a=a+Math.imul(K,Ne)|0,k=k+Math.imul(K,Ge)|0,S=S+Math.imul(L,Oe)|0,a=a+Math.imul(L,Ze)|0,a=a+Math.imul(X,Oe)|0,k=k+Math.imul(X,Ze)|0;var St=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(St>>>26)|0,St&=67108863,S=Math.imul(ve,fe),a=Math.imul(ve,Ae),a=a+Math.imul(ge,fe)|0,k=Math.imul(ge,Ae),S=S+Math.imul(ee,je)|0,a=a+Math.imul(ee,Ie)|0,a=a+Math.imul(ue,je)|0,k=k+Math.imul(ue,Ie)|0,S=S+Math.imul(ne,Ne)|0,a=a+Math.imul(ne,Ge)|0,a=a+Math.imul(oe,Ne)|0,k=k+Math.imul(oe,Ge)|0,S=S+Math.imul(te,Oe)|0,a=a+Math.imul(te,Ze)|0,a=a+Math.imul(K,Oe)|0,k=k+Math.imul(K,Ze)|0,S=S+Math.imul(L,Pe)|0,a=a+Math.imul(L,Ve)|0,a=a+Math.imul(X,Pe)|0,k=k+Math.imul(X,Ve)|0;var Le=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,S=Math.imul(Te,fe),a=Math.imul(Te,Ae),a=a+Math.imul(ze,fe)|0,k=Math.imul(ze,Ae),S=S+Math.imul(ve,je)|0,a=a+Math.imul(ve,Ie)|0,a=a+Math.imul(ge,je)|0,k=k+Math.imul(ge,Ie)|0,S=S+Math.imul(ee,Ne)|0,a=a+Math.imul(ee,Ge)|0,a=a+Math.imul(ue,Ne)|0,k=k+Math.imul(ue,Ge)|0,S=S+Math.imul(ne,Oe)|0,a=a+Math.imul(ne,Ze)|0,a=a+Math.imul(oe,Oe)|0,k=k+Math.imul(oe,Ze)|0,S=S+Math.imul(te,Pe)|0,a=a+Math.imul(te,Ve)|0,a=a+Math.imul(K,Pe)|0,k=k+Math.imul(K,Ve)|0,S=S+Math.imul(L,Fe)|0,a=a+Math.imul(L,Xe)|0,a=a+Math.imul(X,Fe)|0,k=k+Math.imul(X,Xe)|0;var we=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(we>>>26)|0,we&=67108863,S=Math.imul(he,fe),a=Math.imul(he,Ae),a=a+Math.imul(me,fe)|0,k=Math.imul(me,Ae),S=S+Math.imul(Te,je)|0,a=a+Math.imul(Te,Ie)|0,a=a+Math.imul(ze,je)|0,k=k+Math.imul(ze,Ie)|0,S=S+Math.imul(ve,Ne)|0,a=a+Math.imul(ve,Ge)|0,a=a+Math.imul(ge,Ne)|0,k=k+Math.imul(ge,Ge)|0,S=S+Math.imul(ee,Oe)|0,a=a+Math.imul(ee,Ze)|0,a=a+Math.imul(ue,Oe)|0,k=k+Math.imul(ue,Ze)|0,S=S+Math.imul(ne,Pe)|0,a=a+Math.imul(ne,Ve)|0,a=a+Math.imul(oe,Pe)|0,k=k+Math.imul(oe,Ve)|0,S=S+Math.imul(te,Fe)|0,a=a+Math.imul(te,Xe)|0,a=a+Math.imul(K,Fe)|0,k=k+Math.imul(K,Xe)|0,S=S+Math.imul(L,Be)|0,a=a+Math.imul(L,Ue)|0,a=a+Math.imul(X,Be)|0,k=k+Math.imul(X,Ue)|0;var rt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(rt>>>26)|0,rt&=67108863,S=Math.imul(pe,fe),a=Math.imul(pe,Ae),a=a+Math.imul(ke,fe)|0,k=Math.imul(ke,Ae),S=S+Math.imul(he,je)|0,a=a+Math.imul(he,Ie)|0,a=a+Math.imul(me,je)|0,k=k+Math.imul(me,Ie)|0,S=S+Math.imul(Te,Ne)|0,a=a+Math.imul(Te,Ge)|0,a=a+Math.imul(ze,Ne)|0,k=k+Math.imul(ze,Ge)|0,S=S+Math.imul(ve,Oe)|0,a=a+Math.imul(ve,Ze)|0,a=a+Math.imul(ge,Oe)|0,k=k+Math.imul(ge,Ze)|0,S=S+Math.imul(ee,Pe)|0,a=a+Math.imul(ee,Ve)|0,a=a+Math.imul(ue,Pe)|0,k=k+Math.imul(ue,Ve)|0,S=S+Math.imul(ne,Fe)|0,a=a+Math.imul(ne,Xe)|0,a=a+Math.imul(oe,Fe)|0,k=k+Math.imul(oe,Xe)|0,S=S+Math.imul(te,Be)|0,a=a+Math.imul(te,Ue)|0,a=a+Math.imul(K,Be)|0,k=k+Math.imul(K,Ue)|0,S=S+Math.imul(L,$e)|0,a=a+Math.imul(L,Qe)|0,a=a+Math.imul(X,$e)|0,k=k+Math.imul(X,Qe)|0;var it=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(it>>>26)|0,it&=67108863,S=Math.imul(Z,fe),a=Math.imul(Z,Ae),a=a+Math.imul(q,fe)|0,k=Math.imul(q,Ae),S=S+Math.imul(pe,je)|0,a=a+Math.imul(pe,Ie)|0,a=a+Math.imul(ke,je)|0,k=k+Math.imul(ke,Ie)|0,S=S+Math.imul(he,Ne)|0,a=a+Math.imul(he,Ge)|0,a=a+Math.imul(me,Ne)|0,k=k+Math.imul(me,Ge)|0,S=S+Math.imul(Te,Oe)|0,a=a+Math.imul(Te,Ze)|0,a=a+Math.imul(ze,Oe)|0,k=k+Math.imul(ze,Ze)|0,S=S+Math.imul(ve,Pe)|0,a=a+Math.imul(ve,Ve)|0,a=a+Math.imul(ge,Pe)|0,k=k+Math.imul(ge,Ve)|0,S=S+Math.imul(ee,Fe)|0,a=a+Math.imul(ee,Xe)|0,a=a+Math.imul(ue,Fe)|0,k=k+Math.imul(ue,Xe)|0,S=S+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ue)|0,a=a+Math.imul(oe,Be)|0,k=k+Math.imul(oe,Ue)|0,S=S+Math.imul(te,$e)|0,a=a+Math.imul(te,Qe)|0,a=a+Math.imul(K,$e)|0,k=k+Math.imul(K,Qe)|0,S=S+Math.imul(L,qe)|0,a=a+Math.imul(L,Ye)|0,a=a+Math.imul(X,qe)|0,k=k+Math.imul(X,Ye)|0;var yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,S=Math.imul(ie,fe),a=Math.imul(ie,Ae),a=a+Math.imul(ce,fe)|0,k=Math.imul(ce,Ae),S=S+Math.imul(Z,je)|0,a=a+Math.imul(Z,Ie)|0,a=a+Math.imul(q,je)|0,k=k+Math.imul(q,Ie)|0,S=S+Math.imul(pe,Ne)|0,a=a+Math.imul(pe,Ge)|0,a=a+Math.imul(ke,Ne)|0,k=k+Math.imul(ke,Ge)|0,S=S+Math.imul(he,Oe)|0,a=a+Math.imul(he,Ze)|0,a=a+Math.imul(me,Oe)|0,k=k+Math.imul(me,Ze)|0,S=S+Math.imul(Te,Pe)|0,a=a+Math.imul(Te,Ve)|0,a=a+Math.imul(ze,Pe)|0,k=k+Math.imul(ze,Ve)|0,S=S+Math.imul(ve,Fe)|0,a=a+Math.imul(ve,Xe)|0,a=a+Math.imul(ge,Fe)|0,k=k+Math.imul(ge,Xe)|0,S=S+Math.imul(ee,Be)|0,a=a+Math.imul(ee,Ue)|0,a=a+Math.imul(ue,Be)|0,k=k+Math.imul(ue,Ue)|0,S=S+Math.imul(ne,$e)|0,a=a+Math.imul(ne,Qe)|0,a=a+Math.imul(oe,$e)|0,k=k+Math.imul(oe,Qe)|0,S=S+Math.imul(te,qe)|0,a=a+Math.imul(te,Ye)|0,a=a+Math.imul(K,qe)|0,k=k+Math.imul(K,Ye)|0,S=S+Math.imul(L,ye)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(X,ye)|0,k=k+Math.imul(X,xe)|0;var Tt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,S=Math.imul(ie,je),a=Math.imul(ie,Ie),a=a+Math.imul(ce,je)|0,k=Math.imul(ce,Ie),S=S+Math.imul(Z,Ne)|0,a=a+Math.imul(Z,Ge)|0,a=a+Math.imul(q,Ne)|0,k=k+Math.imul(q,Ge)|0,S=S+Math.imul(pe,Oe)|0,a=a+Math.imul(pe,Ze)|0,a=a+Math.imul(ke,Oe)|0,k=k+Math.imul(ke,Ze)|0,S=S+Math.imul(he,Pe)|0,a=a+Math.imul(he,Ve)|0,a=a+Math.imul(me,Pe)|0,k=k+Math.imul(me,Ve)|0,S=S+Math.imul(Te,Fe)|0,a=a+Math.imul(Te,Xe)|0,a=a+Math.imul(ze,Fe)|0,k=k+Math.imul(ze,Xe)|0,S=S+Math.imul(ve,Be)|0,a=a+Math.imul(ve,Ue)|0,a=a+Math.imul(ge,Be)|0,k=k+Math.imul(ge,Ue)|0,S=S+Math.imul(ee,$e)|0,a=a+Math.imul(ee,Qe)|0,a=a+Math.imul(ue,$e)|0,k=k+Math.imul(ue,Qe)|0,S=S+Math.imul(ne,qe)|0,a=a+Math.imul(ne,Ye)|0,a=a+Math.imul(oe,qe)|0,k=k+Math.imul(oe,Ye)|0,S=S+Math.imul(te,ye)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(K,ye)|0,k=k+Math.imul(K,xe)|0;var Yt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,S=Math.imul(ie,Ne),a=Math.imul(ie,Ge),a=a+Math.imul(ce,Ne)|0,k=Math.imul(ce,Ge),S=S+Math.imul(Z,Oe)|0,a=a+Math.imul(Z,Ze)|0,a=a+Math.imul(q,Oe)|0,k=k+Math.imul(q,Ze)|0,S=S+Math.imul(pe,Pe)|0,a=a+Math.imul(pe,Ve)|0,a=a+Math.imul(ke,Pe)|0,k=k+Math.imul(ke,Ve)|0,S=S+Math.imul(he,Fe)|0,a=a+Math.imul(he,Xe)|0,a=a+Math.imul(me,Fe)|0,k=k+Math.imul(me,Xe)|0,S=S+Math.imul(Te,Be)|0,a=a+Math.imul(Te,Ue)|0,a=a+Math.imul(ze,Be)|0,k=k+Math.imul(ze,Ue)|0,S=S+Math.imul(ve,$e)|0,a=a+Math.imul(ve,Qe)|0,a=a+Math.imul(ge,$e)|0,k=k+Math.imul(ge,Qe)|0,S=S+Math.imul(ee,qe)|0,a=a+Math.imul(ee,Ye)|0,a=a+Math.imul(ue,qe)|0,k=k+Math.imul(ue,Ye)|0,S=S+Math.imul(ne,ye)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(oe,ye)|0,k=k+Math.imul(oe,xe)|0;var Kt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,S=Math.imul(ie,Oe),a=Math.imul(ie,Ze),a=a+Math.imul(ce,Oe)|0,k=Math.imul(ce,Ze),S=S+Math.imul(Z,Pe)|0,a=a+Math.imul(Z,Ve)|0,a=a+Math.imul(q,Pe)|0,k=k+Math.imul(q,Ve)|0,S=S+Math.imul(pe,Fe)|0,a=a+Math.imul(pe,Xe)|0,a=a+Math.imul(ke,Fe)|0,k=k+Math.imul(ke,Xe)|0,S=S+Math.imul(he,Be)|0,a=a+Math.imul(he,Ue)|0,a=a+Math.imul(me,Be)|0,k=k+Math.imul(me,Ue)|0,S=S+Math.imul(Te,$e)|0,a=a+Math.imul(Te,Qe)|0,a=a+Math.imul(ze,$e)|0,k=k+Math.imul(ze,Qe)|0,S=S+Math.imul(ve,qe)|0,a=a+Math.imul(ve,Ye)|0,a=a+Math.imul(ge,qe)|0,k=k+Math.imul(ge,Ye)|0,S=S+Math.imul(ee,ye)|0,a=a+Math.imul(ee,xe)|0,a=a+Math.imul(ue,ye)|0,k=k+Math.imul(ue,xe)|0;var fr=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(fr>>>26)|0,fr&=67108863,S=Math.imul(ie,Pe),a=Math.imul(ie,Ve),a=a+Math.imul(ce,Pe)|0,k=Math.imul(ce,Ve),S=S+Math.imul(Z,Fe)|0,a=a+Math.imul(Z,Xe)|0,a=a+Math.imul(q,Fe)|0,k=k+Math.imul(q,Xe)|0,S=S+Math.imul(pe,Be)|0,a=a+Math.imul(pe,Ue)|0,a=a+Math.imul(ke,Be)|0,k=k+Math.imul(ke,Ue)|0,S=S+Math.imul(he,$e)|0,a=a+Math.imul(he,Qe)|0,a=a+Math.imul(me,$e)|0,k=k+Math.imul(me,Qe)|0,S=S+Math.imul(Te,qe)|0,a=a+Math.imul(Te,Ye)|0,a=a+Math.imul(ze,qe)|0,k=k+Math.imul(ze,Ye)|0,S=S+Math.imul(ve,ye)|0,a=a+Math.imul(ve,xe)|0,a=a+Math.imul(ge,ye)|0,k=k+Math.imul(ge,xe)|0;var or=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(or>>>26)|0,or&=67108863,S=Math.imul(ie,Fe),a=Math.imul(ie,Xe),a=a+Math.imul(ce,Fe)|0,k=Math.imul(ce,Xe),S=S+Math.imul(Z,Be)|0,a=a+Math.imul(Z,Ue)|0,a=a+Math.imul(q,Be)|0,k=k+Math.imul(q,Ue)|0,S=S+Math.imul(pe,$e)|0,a=a+Math.imul(pe,Qe)|0,a=a+Math.imul(ke,$e)|0,k=k+Math.imul(ke,Qe)|0,S=S+Math.imul(he,qe)|0,a=a+Math.imul(he,Ye)|0,a=a+Math.imul(me,qe)|0,k=k+Math.imul(me,Ye)|0,S=S+Math.imul(Te,ye)|0,a=a+Math.imul(Te,xe)|0,a=a+Math.imul(ze,ye)|0,k=k+Math.imul(ze,xe)|0;var mt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,S=Math.imul(ie,Be),a=Math.imul(ie,Ue),a=a+Math.imul(ce,Be)|0,k=Math.imul(ce,Ue),S=S+Math.imul(Z,$e)|0,a=a+Math.imul(Z,Qe)|0,a=a+Math.imul(q,$e)|0,k=k+Math.imul(q,Qe)|0,S=S+Math.imul(pe,qe)|0,a=a+Math.imul(pe,Ye)|0,a=a+Math.imul(ke,qe)|0,k=k+Math.imul(ke,Ye)|0,S=S+Math.imul(he,ye)|0,a=a+Math.imul(he,xe)|0,a=a+Math.imul(me,ye)|0,k=k+Math.imul(me,xe)|0;var _t=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,S=Math.imul(ie,$e),a=Math.imul(ie,Qe),a=a+Math.imul(ce,$e)|0,k=Math.imul(ce,Qe),S=S+Math.imul(Z,qe)|0,a=a+Math.imul(Z,Ye)|0,a=a+Math.imul(q,qe)|0,k=k+Math.imul(q,Ye)|0,S=S+Math.imul(pe,ye)|0,a=a+Math.imul(pe,xe)|0,a=a+Math.imul(ke,ye)|0,k=k+Math.imul(ke,xe)|0;var Pt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,S=Math.imul(ie,qe),a=Math.imul(ie,Ye),a=a+Math.imul(ce,qe)|0,k=Math.imul(ce,Ye),S=S+Math.imul(Z,ye)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(q,ye)|0,k=k+Math.imul(q,xe)|0;var Nt=(R+S|0)+((a&8191)<<13)|0;R=(k+(a>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,S=Math.imul(ie,ye),a=Math.imul(ie,xe),a=a+Math.imul(ce,ye)|0,k=Math.imul(ce,xe);var er=(R+S|0)+((a&8191)<<13)|0;return R=(k+(a>>>13)|0)+(er>>>26)|0,er&=67108863,M[0]=nt,M[1]=ct,M[2]=wt,M[3]=St,M[4]=Le,M[5]=we,M[6]=rt,M[7]=it,M[8]=yt,M[9]=Tt,M[10]=Yt,M[11]=Kt,M[12]=fr,M[13]=or,M[14]=mt,M[15]=_t,M[16]=Pt,M[17]=Nt,M[18]=er,R!==0&&(M[19]=R,h.length++),h};Math.imul||(E=A);function P(T,o,c){c.negative=o.negative^T.negative,c.length=T.length+o.length;for(var h=0,v=0,b=0;b<c.length-1;b++){var M=v;v=0;for(var R=h&67108863,S=Math.min(b,o.length-1),a=Math.max(0,b-T.length+1);a<=S;a++){var k=b-a,N=T.words[k]|0,L=o.words[a]|0,X=N*L,se=X&67108863;M=M+(X/67108864|0)|0,se=se+R|0,R=se&67108863,M=M+(se>>>26)|0,v+=M>>>26,M&=67108863}c.words[b]=R,h=M,M=v}return h!==0?c.words[b]=h:c.length--,c.strip()}function z(T,o,c){var h=new B;return h.mulp(T,o,c)}i.prototype.mulTo=function(o,c){var h,v=this.length+o.length;return this.length===10&&o.length===10?h=E(this,o,c):v<63?h=A(this,o,c):v<1024?h=P(this,o,c):h=z(this,o,c),h};function B(T,o){this.x=T,this.y=o}B.prototype.makeRBT=function(o){for(var c=new Array(o),h=i.prototype._countBits(o)-1,v=0;v<o;v++)c[v]=this.revBin(v,h,o);return c},B.prototype.revBin=function(o,c,h){if(o===0||o===h-1)return o;for(var v=0,b=0;b<c;b++)v|=(o&1)<<c-b-1,o>>=1;return v},B.prototype.permute=function(o,c,h,v,b,M){for(var R=0;R<M;R++)v[R]=c[o[R]],b[R]=h[o[R]]},B.prototype.transform=function(o,c,h,v,b,M){this.permute(M,o,c,h,v,b);for(var R=1;R<b;R<<=1)for(var S=R<<1,a=Math.cos(2*Math.PI/S),k=Math.sin(2*Math.PI/S),N=0;N<b;N+=S)for(var L=a,X=k,se=0;se<R;se++){var te=h[N+se],K=v[N+se],J=h[N+se+R],ne=v[N+se+R],oe=L*J-X*ne;ne=L*ne+X*J,J=oe,h[N+se]=te+J,v[N+se]=K+ne,h[N+se+R]=te-J,v[N+se+R]=K-ne,se!==S&&(oe=a*L-k*X,X=a*X+k*L,L=oe)}},B.prototype.guessLen13b=function(o,c){var h=Math.max(c,o)|1,v=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+v},B.prototype.conjugate=function(o,c,h){if(!(h<=1))for(var v=0;v<h/2;v++){var b=o[v];o[v]=o[h-v-1],o[h-v-1]=b,b=c[v],c[v]=-c[h-v-1],c[h-v-1]=-b}},B.prototype.normalize13b=function(o,c){for(var h=0,v=0;v<c/2;v++){var b=Math.round(o[2*v+1]/c)*8192+Math.round(o[2*v]/c)+h;o[v]=b&67108863,b<67108864?h=0:h=b/67108864|0}return o},B.prototype.convert13b=function(o,c,h,v){for(var b=0,M=0;M<c;M++)b=b+(o[M]|0),h[2*M]=b&8191,b=b>>>13,h[2*M+1]=b&8191,b=b>>>13;for(M=2*c;M<v;++M)h[M]=0;n(b===0),n((b&-8192)===0)},B.prototype.stub=function(o){for(var c=new Array(o),h=0;h<o;h++)c[h]=0;return c},B.prototype.mulp=function(o,c,h){var v=2*this.guessLen13b(o.length,c.length),b=this.makeRBT(v),M=this.stub(v),R=new Array(v),S=new Array(v),a=new Array(v),k=new Array(v),N=new Array(v),L=new Array(v),X=h.words;X.length=v,this.convert13b(o.words,o.length,R,v),this.convert13b(c.words,c.length,k,v),this.transform(R,M,S,a,v,b),this.transform(k,M,N,L,v,b);for(var se=0;se<v;se++){var te=S[se]*N[se]-a[se]*L[se];a[se]=S[se]*L[se]+a[se]*N[se],S[se]=te}return this.conjugate(S,a,v),this.transform(S,a,X,M,v,b),this.conjugate(X,M,v),this.normalize13b(X,v),h.negative=o.negative^c.negative,h.length=o.length+c.length,h.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),z(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var c=0,h=0;h<this.length;h++){var v=(this.words[h]|0)*o,b=(v&67108863)+(c&67108863);c>>=26,c+=v/67108864|0,c+=b>>>26,this.words[h]=b&67108863}return c!==0&&(this.words[h]=c,this.length++),this.length=o===0?1:this.length,this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=_(o);if(c.length===0)return new i(1);for(var h=this,v=0;v<c.length&&c[v]===0;v++,h=h.sqr());if(++v<c.length)for(var b=h.sqr();v<c.length;v++,b=b.sqr())c[v]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=67108863>>>26-c<<26-c,b;if(c!==0){var M=0;for(b=0;b<this.length;b++){var R=this.words[b]&v,S=(this.words[b]|0)-R<<c;this.words[b]=S|M,M=R>>>26-c}M&&(this.words[b]=M,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var v;c?v=(c-c%26)/26:v=0;var b=o%26,M=Math.min((o-b)/26,this.length),R=67108863^67108863>>>b<<b,S=h;if(v-=M,v=Math.max(0,v),S){for(var a=0;a<M;a++)S.words[a]=this.words[a];S.length=M}if(M!==0)if(this.length>M)for(this.length-=M,a=0;a<this.length;a++)this.words[a]=this.words[a+M];else this.words[0]=0,this.length=1;var k=0;for(a=this.length-1;a>=0&&(k!==0||a>=v);a--){var N=this.words[a]|0;this.words[a]=k<<26-b|N>>>b,k=N&R}return S&&k!==0&&(S.words[S.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return!1;var b=this.words[h];return!!(b&v)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var v=67108863^67108863>>>c<<c;this.words[this.length-1]&=v}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,h){var v=o.length+h,b;this._expand(v);var M,R=0;for(b=0;b<o.length;b++){M=(this.words[b+h]|0)+R;var S=(o.words[b]|0)*c;M-=S&67108863,R=(M>>26)-(S/67108864|0),this.words[b+h]=M&67108863}for(;b<this.length-h;b++)M=(this.words[b+h]|0)+R,R=M>>26,this.words[b+h]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)M=-(this.words[b]|0)+R,R=M>>26,this.words[b]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var h=this.length-o.length,v=this.clone(),b=o,M=b.words[b.length-1]|0,R=this._countBits(M);h=26-R,h!==0&&(b=b.ushln(h),v.iushln(h),M=b.words[b.length-1]|0);var S=v.length-b.length,a;if(c!=="mod"){a=new i(null),a.length=S+1,a.words=new Array(a.length);for(var k=0;k<a.length;k++)a.words[k]=0}var N=v.clone()._ishlnsubmul(b,1,S);N.negative===0&&(v=N,a&&(a.words[S]=1));for(var L=S-1;L>=0;L--){var X=(v.words[b.length+L]|0)*67108864+(v.words[b.length+L-1]|0);for(X=Math.min(X/M|0,67108863),v._ishlnsubmul(b,X,L);v.negative!==0;)X--,v.negative=0,v._ishlnsubmul(b,1,L),v.isZero()||(v.negative^=1);a&&(a.words[L]=X)}return a&&a.strip(),v.strip(),c!=="div"&&h!==0&&v.iushrn(h),{div:a||null,mod:v}},i.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,b,M;return this.negative!==0&&o.negative===0?(M=this.neg().divmod(o,c),c!=="mod"&&(v=M.div.neg()),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.iadd(o)),{div:v,mod:b}):this.negative===0&&o.negative!==0?(M=this.divmod(o.neg(),c),c!=="mod"&&(v=M.div.neg()),{div:v,mod:M.mod}):(this.negative&o.negative)!==0?(M=this.neg().divmod(o.neg(),c),c!=="div"&&(b=M.mod.neg(),h&&b.negative!==0&&b.isub(o)),{div:M.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,v=o.ushrn(1),b=o.andln(1),M=h.cmp(v);return M<0||b===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var c=(1<<26)%o,h=0,v=this.length-1;v>=0;v--)h=(c*h+(this.words[v]|0))%o;return h},i.prototype.idivn=function(o){n(o<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var v=(this.words[h]|0)+c*67108864;this.words[h]=v/o|0,c=v%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=new i(0),R=new i(1),S=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++S;for(var a=h.clone(),k=c.clone();!c.isZero();){for(var N=0,L=1;(c.words[0]&L)===0&&N<26;++N,L<<=1);if(N>0)for(c.iushrn(N);N-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(a),b.isub(k)),v.iushrn(1),b.iushrn(1);for(var X=0,se=1;(h.words[0]&se)===0&&X<26;++X,se<<=1);if(X>0)for(h.iushrn(X);X-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(a),R.isub(k)),M.iushrn(1),R.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(M),b.isub(R)):(h.isub(c),M.isub(v),R.isub(b))}return{a:M,b:R,gcd:h.iushln(S)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var v=new i(1),b=new i(0),M=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var R=0,S=1;(c.words[0]&S)===0&&R<26;++R,S<<=1);if(R>0)for(c.iushrn(R);R-- >0;)v.isOdd()&&v.iadd(M),v.iushrn(1);for(var a=0,k=1;(h.words[0]&k)===0&&a<26;++a,k<<=1);if(a>0)for(h.iushrn(a);a-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);c.cmp(h)>=0?(c.isub(h),v.isub(b)):(h.isub(c),b.isub(v))}var N;return c.cmpn(1)===0?N=v:N=b,N.cmpn(0)<0&&N.iadd(o),N},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var v=0;c.isEven()&&h.isEven();v++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=c.cmp(h);if(b<0){var M=c;c=h,h=M}else if(b===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,v=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=v,this;for(var b=v,M=h;b!==0&&M<this.length;M++){var R=this.words[M]|0;R+=b,b=R>>>26,R&=67108863,this.words[M]=R}return b!==0&&(this.words[M]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var v=this.words[0]|0;h=v===o?0:v<o?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var v=this.words[h]|0,b=o.words[h]|0;if(v!==b){v<b?c=-1:v>b&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new H(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function U(T,o){this.name=T,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var v=h<this.n?-1:c.ucmp(this.p);return v===0?(c.words[0]=0,c.length=1):v>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(G,U),G.prototype.split=function(o,c){for(var h=4194303,v=Math.min(o.length,9),b=0;b<v;b++)c.words[b]=o.words[b];if(c.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var M=o.words[9];for(c.words[c.length++]=M&h,b=10;b<o.length;b++){var R=o.words[b]|0;o.words[b-10]=(R&h)<<4|M>>>22,M=R}M>>>=22,o.words[b-10]=M,M===0&&o.length>10?o.length-=10:o.length-=9},G.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var v=o.words[h]|0;c+=v*977,o.words[h]=c&67108863,c=v*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function $(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l($,U);function re(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(re,U);function Q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(Q,U),Q.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var v=(o.words[h]|0)*19+c,b=v&67108863;v>>>=26,o.words[h]=b,c=v}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(D[o])return D[o];var c;if(o==="k256")c=new G;else if(o==="p224")c=new $;else if(o==="p192")c=new re;else if(o==="p25519")c=new Q;else throw new Error("Unknown prime "+o);return D[o]=c,c};function H(T){if(typeof T=="string"){var o=i._prime(T);this.m=o.p,this.prime=o}else n(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}H.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},H.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},H.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},H.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},H.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},H.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},H.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},H.prototype.isqr=function(o){return this.imul(o,o.clone())},H.prototype.sqr=function(o){return this.mul(o,o)},H.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(o,h)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);n(!v.isZero());var M=new i(1).toRed(this),R=M.redNeg(),S=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,S).cmp(R)!==0;)a.redIAdd(R);for(var k=this.pow(a,v),N=this.pow(o,v.addn(1).iushrn(1)),L=this.pow(o,v),X=b;L.cmp(M)!==0;){for(var se=L,te=0;se.cmp(M)!==0;te++)se=se.redSqr();n(te<X);var K=this.pow(k,new i(1).iushln(X-te-1));N=N.redMul(K),k=K.redSqr(),L=L.redMul(k),X=te}return N},H.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,v=new Array(1<<h);v[0]=new i(1).toRed(this),v[1]=o;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],o);var M=v[0],R=0,S=0,a=c.bitLength()%26;for(a===0&&(a=26),b=c.length-1;b>=0;b--){for(var k=c.words[b],N=a-1;N>=0;N--){var L=k>>N&1;if(M!==v[0]&&(M=this.sqr(M)),L===0&&R===0){S=0;continue}R<<=1,R|=L,S++,!(S!==h&&(b!==0||N!==0))&&(M=this.mul(M,v[R]),S=0,R=0)}a=26}return M},H.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},H.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new Y(o)};function Y(T){H.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(Y,H),Y.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Y.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},Y.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var h=o.mul(c),v=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(v).iushrn(this.shift),M=b;return b.cmp(this.m)>=0?M=b.isub(this.m):b.cmpn(0)<0&&(M=b.iadd(this.m)),M._forceRed(this)},Y.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,oN)})(Zh)),Zh.exports}var xx,Q5;function KT(){if(Q5)return xx;Q5=1;var e=dw(),t=ar().Buffer;function r(n,l){return t.from(n.toRed(e.mont(l.modulus)).redPow(new e(l.publicExponent)).fromRed().toArray())}return xx=r,xx}var bx,ej;function aN(){if(ej)return bx;ej=1;var e=Fp(),t=rc(),r=Ed(),n=VT(),l=GT(),i=dw(),d=KT(),p=aw(),g=ar().Buffer;bx=function(_,A,E){var P;_.padding?P=_.padding:E?P=1:P=4;var z=e(_),B;if(P===4)B=x(z,A);else if(P===1)B=y(z,A,E);else if(P===3){if(B=new i(A),B.cmp(z.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return E?p(B,z):d(B,z)};function x(j,_){var A=j.modulus.byteLength(),E=_.length,P=r("sha1").update(g.alloc(0)).digest(),z=P.length,B=2*z;if(E>A-B-2)throw new Error("message too long");var D=g.alloc(A-E-B-2),U=A-z-1,G=t(z),$=l(g.concat([P,D,g.alloc(1,1),_],U),n(G,U)),re=l(G,n($,z));return new i(g.concat([g.alloc(1),re,$],A))}function y(j,_,A){var E=_.length,P=j.modulus.byteLength();if(E>P-11)throw new Error("message too long");var z;return A?z=g.alloc(P-E-3,255):z=w(P-E-3),new i(g.concat([g.from([0,A?1:2]),z,g.alloc(1),_],P))}function w(j){for(var _=g.allocUnsafe(j),A=0,E=t(j*2),P=0,z;A<j;)P===E.length&&(E=t(j*2),P=0),z=E[P++],z&&(_[A++]=z);return _}return bx}var wx,tj;function lN(){if(tj)return wx;tj=1;var e=Fp(),t=VT(),r=GT(),n=dw(),l=aw(),i=Ed(),d=KT(),p=ar().Buffer;wx=function(j,_,A){var E;j.padding?E=j.padding:A?E=1:E=4;var P=e(j),z=P.modulus.byteLength();if(_.length>z||new n(_).cmp(P.modulus)>=0)throw new Error("decryption error");var B;A?B=d(new n(_),P):B=l(_,P);var D=p.alloc(z-B.length);if(B=p.concat([D,B],z),E===4)return g(P,B);if(E===1)return x(P,B,A);if(E===3)return B;throw new Error("unknown padding")};function g(w,j){var _=w.modulus.byteLength(),A=i("sha1").update(p.alloc(0)).digest(),E=A.length;if(j[0]!==0)throw new Error("decryption error");var P=j.slice(1,E+1),z=j.slice(E+1),B=r(P,t(z,E)),D=r(z,t(B,_-E-1));if(y(A,D.slice(0,E)))throw new Error("decryption error");for(var U=E;D[U]===0;)U++;if(D[U++]!==1)throw new Error("decryption error");return D.slice(U)}function x(w,j,_){for(var A=j.slice(0,2),E=2,P=0;j[E++]!==0;)if(E>=j.length){P++;break}var z=j.slice(2,E-1);if((A.toString("hex")!=="0002"&&!_||A.toString("hex")!=="0001"&&_)&&P++,z.length<8&&P++,P)throw new Error("decryption error");return j.slice(E)}function y(w,j){w=p.from(w),j=p.from(j);var _=0,A=w.length;w.length!==j.length&&(_++,A=Math.min(w.length,j.length));for(var E=-1;++E<A;)_+=w[E]^j[E];return _}return wx}var rj;function cN(){return rj||(rj=1,(function(e){e.publicEncrypt=aN(),e.privateDecrypt=lN(),e.privateEncrypt=function(r,n){return e.publicEncrypt(r,n,!0)},e.publicDecrypt=function(r,n){return e.privateDecrypt(r,n,!0)}})(mx)),mx}var bl={},nj;function uN(){if(nj)return bl;nj=1;function e(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var t=ar(),r=rc(),n=t.Buffer,l=t.kMaxLength,i=globalThis.crypto||globalThis.msCrypto,d=Math.pow(2,32)-1;function p(j,_){if(typeof j!="number"||j!==j)throw new TypeError("offset must be a number");if(j>d||j<0)throw new TypeError("offset must be a uint32");if(j>l||j>_)throw new RangeError("offset out of range")}function g(j,_,A){if(typeof j!="number"||j!==j)throw new TypeError("size must be a number");if(j>d||j<0)throw new TypeError("size must be a uint32");if(j+_>A||j>l)throw new RangeError("buffer too small")}i&&i.getRandomValues||!process.browser?(bl.randomFill=x,bl.randomFillSync=w):(bl.randomFill=e,bl.randomFillSync=e);function x(j,_,A,E){if(!n.isBuffer(j)&&!(j instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof _=="function")E=_,_=0,A=j.length;else if(typeof A=="function")E=A,A=j.length-_;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return p(_,j.length),g(A,_,j.length),y(j,_,A,E)}function y(j,_,A,E){if(process.browser){var P=j.buffer,z=new Uint8Array(P,_,A);if(i.getRandomValues(z),E){process.nextTick(function(){E(null,j)});return}return j}if(E){r(A,function(D,U){if(D)return E(D);U.copy(j,_),E(null,j)});return}var B=r(A);return B.copy(j,_),j}function w(j,_,A){if(typeof _>"u"&&(_=0),!n.isBuffer(j)&&!(j instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return p(_,j.length),A===void 0&&(A=j.length-_),g(A,_,j.length),y(j,_,A)}return bl}var ij;function YT(){if(ij)return lr;ij=1,lr.randomBytes=lr.rng=lr.pseudoRandomBytes=lr.prng=rc(),lr.createHash=lr.Hash=Ed(),lr.createHmac=lr.Hmac=wT();var e=OB(),t=Object.keys(e),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(t);lr.getHashes=function(){return r};var n=CT();lr.pbkdf2=n.pbkdf2,lr.pbkdf2Sync=n.pbkdf2Sync;var l=iP();lr.Cipher=l.Cipher,lr.createCipher=l.createCipher,lr.Cipheriv=l.Cipheriv,lr.createCipheriv=l.createCipheriv,lr.Decipher=l.Decipher,lr.createDecipher=l.createDecipher,lr.Decipheriv=l.Decipheriv,lr.createDecipheriv=l.createDecipheriv,lr.getCiphers=l.getCiphers,lr.listCiphers=l.listCiphers;var i=vP();lr.DiffieHellmanGroup=i.DiffieHellmanGroup,lr.createDiffieHellmanGroup=i.createDiffieHellmanGroup,lr.getDiffieHellman=i.getDiffieHellman,lr.createDiffieHellman=i.createDiffieHellman,lr.DiffieHellman=i.DiffieHellman;var d=rN();lr.createSign=d.createSign,lr.Sign=d.Sign,lr.createVerify=d.createVerify,lr.Verify=d.Verify,lr.createECDH=sN();var p=cN();lr.publicEncrypt=p.publicEncrypt,lr.privateEncrypt=p.privateEncrypt,lr.publicDecrypt=p.publicDecrypt,lr.privateDecrypt=p.privateDecrypt;var g=uN();return lr.randomFill=g.randomFill,lr.randomFillSync=g.randomFillSync,lr.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},lr.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},lr}var dN=YT();const _x=Bp(dN);try{window.global=window,window.Buffer=K8.Buffer}catch(e){console.error("Buffer polyfill failed:",e)}try{typeof window.crypto>"u"?window.crypto=_x:Object.assign(window.crypto,_x),window.crypto.getRandomValues||(window.crypto.getRandomValues=e=>{const t=_x.randomBytes(e.length);for(let r=0;r<e.length;r++)e[r]=t[r];return e})}catch(e){console.error("Crypto polyfill failed, using fallback:",e),typeof window.crypto>"u"&&(window.crypto={}),window.crypto.getRandomValues||(window.crypto.getRandomValues=t=>{for(let r=0;r<t.length;r++)t[r]=Math.floor(Math.random()*256);return t})}try{typeof window.process>"u"&&(window.process={env:{},platform:"browser",version:"v18.0.0",browser:!0,nextTick:e=>setTimeout(e,0)})}catch(e){console.error("Process polyfill failed:",e)}try{typeof globalThis>"u"&&(window.globalThis=window)}catch(e){console.error("GlobalThis polyfill failed:",e)}var Sx={exports:{}},ju={},kx={exports:{}},jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sj;function fN(){return sj||(sj=1,(function(e){function t(b,M){var R=b.length;b.push(M);e:for(;0<R;){var S=R-1>>>1,a=b[S];if(0<l(a,M))b[S]=M,b[R]=a,R=S;else break e}}function r(b){return b.length===0?null:b[0]}function n(b){if(b.length===0)return null;var M=b[0],R=b.pop();if(R!==M){b[0]=R;e:for(var S=0,a=b.length,k=a>>>1;S<k;){var N=2*(S+1)-1,L=b[N],X=N+1,se=b[X];if(0>l(L,R))X<a&&0>l(se,L)?(b[S]=se,b[X]=R,S=X):(b[S]=L,b[N]=R,S=N);else if(X<a&&0>l(se,R))b[S]=se,b[X]=R,S=X;else break e}}return M}function l(b,M){var R=b.sortIndex-M.sortIndex;return R!==0?R:b.id-M.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var d=Date,p=d.now();e.unstable_now=function(){return d.now()-p}}var g=[],x=[],y=1,w=null,j=3,_=!1,A=!1,E=!1,P=!1,z=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(b){for(var M=r(x);M!==null;){if(M.callback===null)n(x);else if(M.startTime<=b)n(x),M.sortIndex=M.expirationTime,t(g,M);else break;M=r(x)}}function G(b){if(E=!1,U(b),!A)if(r(g)!==null)A=!0,$||($=!0,o());else{var M=r(x);M!==null&&v(G,M.startTime-b)}}var $=!1,re=-1,Q=5,H=-1;function Y(){return P?!0:!(e.unstable_now()-H<Q)}function T(){if(P=!1,$){var b=e.unstable_now();H=b;var M=!0;try{e:{A=!1,E&&(E=!1,B(re),re=-1),_=!0;var R=j;try{t:{for(U(b),w=r(g);w!==null&&!(w.expirationTime>b&&Y());){var S=w.callback;if(typeof S=="function"){w.callback=null,j=w.priorityLevel;var a=S(w.expirationTime<=b);if(b=e.unstable_now(),typeof a=="function"){w.callback=a,U(b),M=!0;break t}w===r(g)&&n(g),U(b)}else n(g);w=r(g)}if(w!==null)M=!0;else{var k=r(x);k!==null&&v(G,k.startTime-b),M=!1}}break e}finally{w=null,j=R,_=!1}M=void 0}}finally{M?o():$=!1}}}var o;if(typeof D=="function")o=function(){D(T)};else if(typeof MessageChannel<"u"){var c=new MessageChannel,h=c.port2;c.port1.onmessage=T,o=function(){h.postMessage(null)}}else o=function(){z(T,0)};function v(b,M){re=z(function(){b(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(b){switch(j){case 1:case 2:case 3:var M=3;break;default:M=j}var R=j;j=M;try{return b()}finally{j=R}},e.unstable_requestPaint=function(){P=!0},e.unstable_runWithPriority=function(b,M){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var R=j;j=b;try{return M()}finally{j=R}},e.unstable_scheduleCallback=function(b,M,R){var S=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?S+R:S):R=S,b){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=R+a,b={id:y++,callback:M,priorityLevel:b,startTime:R,expirationTime:a,sortIndex:-1},R>S?(b.sortIndex=R,t(x,b),r(g)===null&&b===r(x)&&(E?(B(re),re=-1):E=!0,v(G,R-S))):(b.sortIndex=a,t(g,b),A||_||(A=!0,$||($=!0,o()))),b},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(b){var M=j;return function(){var R=j;j=M;try{return b.apply(this,arguments)}finally{j=R}}}})(jx)),jx}var oj;function hN(){return oj||(oj=1,kx.exports=fN()),kx.exports}var Mx={exports:{}},cr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aj;function pN(){if(aj)return cr;aj=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function j(a){return a===null||typeof a!="object"?null:(a=w&&a[w]||a["@@iterator"],typeof a=="function"?a:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function P(a,k,N){this.props=a,this.context=k,this.refs=E,this.updater=N||_}P.prototype.isReactComponent={},P.prototype.setState=function(a,k){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,k,"setState")},P.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function z(){}z.prototype=P.prototype;function B(a,k,N){this.props=a,this.context=k,this.refs=E,this.updater=N||_}var D=B.prototype=new z;D.constructor=B,A(D,P.prototype),D.isPureReactComponent=!0;var U=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function re(a,k,N,L,X,se){return N=se.ref,{$$typeof:e,type:a,key:k,ref:N!==void 0?N:null,props:se}}function Q(a,k){return re(a.type,k,void 0,void 0,void 0,a.props)}function H(a){return typeof a=="object"&&a!==null&&a.$$typeof===e}function Y(a){var k={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(N){return k[N]})}var T=/\/+/g;function o(a,k){return typeof a=="object"&&a!==null&&a.key!=null?Y(""+a.key):k.toString(36)}function c(){}function h(a){switch(a.status){case"fulfilled":return a.value;case"rejected":throw a.reason;default:switch(typeof a.status=="string"?a.then(c,c):(a.status="pending",a.then(function(k){a.status==="pending"&&(a.status="fulfilled",a.value=k)},function(k){a.status==="pending"&&(a.status="rejected",a.reason=k)})),a.status){case"fulfilled":return a.value;case"rejected":throw a.reason}}throw a}function v(a,k,N,L,X){var se=typeof a;(se==="undefined"||se==="boolean")&&(a=null);var te=!1;if(a===null)te=!0;else switch(se){case"bigint":case"string":case"number":te=!0;break;case"object":switch(a.$$typeof){case e:case t:te=!0;break;case y:return te=a._init,v(te(a._payload),k,N,L,X)}}if(te)return X=X(a),te=L===""?"."+o(a,0):L,U(X)?(N="",te!=null&&(N=te.replace(T,"$&/")+"/"),v(X,k,N,"",function(ne){return ne})):X!=null&&(H(X)&&(X=Q(X,N+(X.key==null||a&&a.key===X.key?"":(""+X.key).replace(T,"$&/")+"/")+te)),k.push(X)),1;te=0;var K=L===""?".":L+":";if(U(a))for(var J=0;J<a.length;J++)L=a[J],se=K+o(L,J),te+=v(L,k,N,se,X);else if(J=j(a),typeof J=="function")for(a=J.call(a),J=0;!(L=a.next()).done;)L=L.value,se=K+o(L,J++),te+=v(L,k,N,se,X);else if(se==="object"){if(typeof a.then=="function")return v(h(a),k,N,L,X);throw k=String(a),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return te}function b(a,k,N){if(a==null)return a;var L=[],X=0;return v(a,L,"","",function(se){return k.call(N,se,X++)}),L}function M(a){if(a._status===-1){var k=a._result;k=k(),k.then(function(N){(a._status===0||a._status===-1)&&(a._status=1,a._result=N)},function(N){(a._status===0||a._status===-1)&&(a._status=2,a._result=N)}),a._status===-1&&(a._status=0,a._result=k)}if(a._status===1)return a._result.default;throw a._result}var R=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function S(){}return cr.Children={map:b,forEach:function(a,k,N){b(a,function(){k.apply(this,arguments)},N)},count:function(a){var k=0;return b(a,function(){k++}),k},toArray:function(a){return b(a,function(k){return k})||[]},only:function(a){if(!H(a))throw Error("React.Children.only expected to receive a single React element child.");return a}},cr.Component=P,cr.Fragment=r,cr.Profiler=l,cr.PureComponent=B,cr.StrictMode=n,cr.Suspense=g,cr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,cr.__COMPILER_RUNTIME={__proto__:null,c:function(a){return G.H.useMemoCache(a)}},cr.cache=function(a){return function(){return a.apply(null,arguments)}},cr.cloneElement=function(a,k,N){if(a==null)throw Error("The argument must be a React element, but you passed "+a+".");var L=A({},a.props),X=a.key,se=void 0;if(k!=null)for(te in k.ref!==void 0&&(se=void 0),k.key!==void 0&&(X=""+k.key),k)!$.call(k,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&k.ref===void 0||(L[te]=k[te]);var te=arguments.length-2;if(te===1)L.children=N;else if(1<te){for(var K=Array(te),J=0;J<te;J++)K[J]=arguments[J+2];L.children=K}return re(a.type,X,void 0,void 0,se,L)},cr.createContext=function(a){return a={$$typeof:d,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null},a.Provider=a,a.Consumer={$$typeof:i,_context:a},a},cr.createElement=function(a,k,N){var L,X={},se=null;if(k!=null)for(L in k.key!==void 0&&(se=""+k.key),k)$.call(k,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(X[L]=k[L]);var te=arguments.length-2;if(te===1)X.children=N;else if(1<te){for(var K=Array(te),J=0;J<te;J++)K[J]=arguments[J+2];X.children=K}if(a&&a.defaultProps)for(L in te=a.defaultProps,te)X[L]===void 0&&(X[L]=te[L]);return re(a,se,void 0,void 0,null,X)},cr.createRef=function(){return{current:null}},cr.forwardRef=function(a){return{$$typeof:p,render:a}},cr.isValidElement=H,cr.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:M}},cr.memo=function(a,k){return{$$typeof:x,type:a,compare:k===void 0?null:k}},cr.startTransition=function(a){var k=G.T,N={};G.T=N;try{var L=a(),X=G.S;X!==null&&X(N,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(S,R)}catch(se){R(se)}finally{G.T=k}},cr.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},cr.use=function(a){return G.H.use(a)},cr.useActionState=function(a,k,N){return G.H.useActionState(a,k,N)},cr.useCallback=function(a,k){return G.H.useCallback(a,k)},cr.useContext=function(a){return G.H.useContext(a)},cr.useDebugValue=function(){},cr.useDeferredValue=function(a,k){return G.H.useDeferredValue(a,k)},cr.useEffect=function(a,k,N){var L=G.H;if(typeof N=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return L.useEffect(a,k)},cr.useId=function(){return G.H.useId()},cr.useImperativeHandle=function(a,k,N){return G.H.useImperativeHandle(a,k,N)},cr.useInsertionEffect=function(a,k){return G.H.useInsertionEffect(a,k)},cr.useLayoutEffect=function(a,k){return G.H.useLayoutEffect(a,k)},cr.useMemo=function(a,k){return G.H.useMemo(a,k)},cr.useOptimistic=function(a,k){return G.H.useOptimistic(a,k)},cr.useReducer=function(a,k,N){return G.H.useReducer(a,k,N)},cr.useRef=function(a){return G.H.useRef(a)},cr.useState=function(a){return G.H.useState(a)},cr.useSyncExternalStore=function(a,k,N){return G.H.useSyncExternalStore(a,k,N)},cr.useTransition=function(){return G.H.useTransition()},cr.version="19.1.1",cr}var lj;function fw(){return lj||(lj=1,Mx.exports=pN()),Mx.exports}var Cx={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cj;function gN(){if(cj)return $n;cj=1;var e=fw();function t(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function i(g,x,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:y}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$n.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(t(299));return i(g,x,null,y)},$n.flushSync=function(g){var x=d.T,y=n.p;try{if(d.T=null,n.p=2,g)return g()}finally{d.T=x,n.p=y,n.d.f()}},$n.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,n.d.C(g,x))},$n.prefetchDNS=function(g){typeof g=="string"&&n.d.D(g)},$n.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,_=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?n.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:_}):y==="script"&&n.d.X(g,{crossOrigin:w,integrity:j,fetchPriority:_,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},$n.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=p(x.as,x.crossOrigin);n.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&n.d.M(g)},$n.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin);n.d.L(g,y,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},$n.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=p(x.as,x.crossOrigin);n.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else n.d.m(g)},$n.requestFormReset=function(g){n.d.r(g)},$n.unstable_batchedUpdates=function(g,x){return g(x)},$n.useFormState=function(g,x,y){return d.H.useFormState(g,x,y)},$n.useFormStatus=function(){return d.H.useHostTransitionStatus()},$n.version="19.1.1",$n}var uj;function JT(){if(uj)return Cx.exports;uj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cx.exports=gN(),Cx.exports}var dj;function mN(){if(dj)return ju;dj=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=hN(),t=fw(),r=JT();function n(u){var m="https://react.dev/errors/"+u;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)m+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+u+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var m=u,C=u;if(u.alternate)for(;m.return;)m=m.return;else{u=m;do m=u,(m.flags&4098)!==0&&(C=m.return),u=m.return;while(u)}return m.tag===3?C:null}function d(u){if(u.tag===13){var m=u.memoizedState;if(m===null&&(u=u.alternate,u!==null&&(m=u.memoizedState)),m!==null)return m.dehydrated}return null}function p(u){if(i(u)!==u)throw Error(n(188))}function g(u){var m=u.alternate;if(!m){if(m=i(u),m===null)throw Error(n(188));return m!==u?null:u}for(var C=u,I=m;;){var O=C.return;if(O===null)break;var W=O.alternate;if(W===null){if(I=O.return,I!==null){C=I;continue}break}if(O.child===W.child){for(W=O.child;W;){if(W===C)return p(O),u;if(W===I)return p(O),m;W=W.sibling}throw Error(n(188))}if(C.return!==I.return)C=O,I=W;else{for(var le=!1,de=O.child;de;){if(de===C){le=!0,C=O,I=W;break}if(de===I){le=!0,I=O,C=W;break}de=de.sibling}if(!le){for(de=W.child;de;){if(de===C){le=!0,C=W,I=O;break}if(de===I){le=!0,I=W,C=O;break}de=de.sibling}if(!le)throw Error(n(189))}}if(C.alternate!==I)throw Error(n(190))}if(C.tag!==3)throw Error(n(188));return C.stateNode.current===C?u:m}function x(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u;for(u=u.child;u!==null;){if(m=x(u),m!==null)return m;u=u.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function o(u){return u===null||typeof u!="object"?null:(u=T&&u[T]||u["@@iterator"],typeof u=="function"?u:null)}var c=Symbol.for("react.client.reference");function h(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===c?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case A:return"Fragment";case P:return"Profiler";case E:return"StrictMode";case G:return"Suspense";case $:return"SuspenseList";case H:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case _:return"Portal";case D:return(u.displayName||"Context")+".Provider";case B:return(u._context.displayName||"Context")+".Consumer";case U:var m=u.render;return u=u.displayName,u||(u=m.displayName||m.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case re:return m=u.displayName||null,m!==null?m:h(u.type)||"Memo";case Q:m=u._payload,u=u._init;try{return h(u(m))}catch{}}return null}var v=Array.isArray,b=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},S=[],a=-1;function k(u){return{current:u}}function N(u){0>a||(u.current=S[a],S[a]=null,a--)}function L(u,m){a++,S[a]=u.current,u.current=m}var X=k(null),se=k(null),te=k(null),K=k(null);function J(u,m){switch(L(te,m),L(se,u),L(X,null),m.nodeType){case 9:case 11:u=(u=m.documentElement)&&(u=u.namespaceURI)?z6(u):0;break;default:if(u=m.tagName,m=m.namespaceURI)m=z6(m),u=B6(m,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}N(X),L(X,u)}function ne(){N(X),N(se),N(te)}function oe(u){u.memoizedState!==null&&L(K,u);var m=X.current,C=B6(m,u.type);m!==C&&(L(se,u),L(X,C))}function ae(u){se.current===u&&(N(X),N(se)),K.current===u&&(N(K),yu._currentValue=R)}var ee=Object.prototype.hasOwnProperty,ue=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,ve=e.unstable_shouldYield,ge=e.unstable_requestPaint,Je=e.unstable_now,Te=e.unstable_getCurrentPriorityLevel,ze=e.unstable_ImmediatePriority,vt=e.unstable_UserBlockingPriority,he=e.unstable_NormalPriority,me=e.unstable_LowPriority,Me=e.unstable_IdlePriority,pe=e.log,ke=e.unstable_setDisableYieldValue,_e=null,Z=null;function q(u){if(typeof pe=="function"&&ke(u),Z&&typeof Z.setStrictMode=="function")try{Z.setStrictMode(_e,u)}catch{}}var V=Math.clz32?Math.clz32:be,ie=Math.log,ce=Math.LN2;function be(u){return u>>>=0,u===0?32:31-(ie(u)/ce|0)|0}var fe=256,Ae=4194304;function ht(u){var m=u&42;if(m!==0)return m;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function je(u,m,C){var I=u.pendingLanes;if(I===0)return 0;var O=0,W=u.suspendedLanes,le=u.pingedLanes;u=u.warmLanes;var de=I&134217727;return de!==0?(I=de&~W,I!==0?O=ht(I):(le&=de,le!==0?O=ht(le):C||(C=de&~u,C!==0&&(O=ht(C))))):(de=I&~W,de!==0?O=ht(de):le!==0?O=ht(le):C||(C=I&~u,C!==0&&(O=ht(C)))),O===0?0:m!==0&&m!==O&&(m&W)===0&&(W=O&-O,C=m&-m,W>=C||W===32&&(C&4194048)!==0)?m:O}function Ie(u,m){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&m)===0}function pt(u,m){switch(u){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ne(){var u=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),u}function Ge(){var u=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),u}function Ot(u){for(var m=[],C=0;31>C;C++)m.push(u);return m}function Oe(u,m){u.pendingLanes|=m,m!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Ze(u,m,C,I,O,W){var le=u.pendingLanes;u.pendingLanes=C,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=C,u.entangledLanes&=C,u.errorRecoveryDisabledLanes&=C,u.shellSuspendCounter=0;var de=u.entanglements,Se=u.expirationTimes,We=u.hiddenUpdates;for(C=le&~C;0<C;){var at=31-V(C),ft=1<<at;de[at]=0,Se[at]=-1;var Ke=We[at];if(Ke!==null)for(We[at]=null,at=0;at<Ke.length;at++){var et=Ke[at];et!==null&&(et.lane&=-536870913)}C&=~ft}I!==0&&Lt(u,I,0),W!==0&&O===0&&u.tag!==0&&(u.suspendedLanes|=W&~(le&~m))}function Lt(u,m,C){u.pendingLanes|=m,u.suspendedLanes&=~m;var I=31-V(m);u.entangledLanes|=m,u.entanglements[I]=u.entanglements[I]|1073741824|C&4194090}function Pe(u,m){var C=u.entangledLanes|=m;for(u=u.entanglements;C;){var I=31-V(C),O=1<<I;O&m|u[I]&m&&(u[I]|=m),C&=~O}}function Ve(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Bt(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Fe(){var u=M.p;return u!==0?u:(u=window.event,u===void 0?32:Q6(u.type))}function Xe(u,m){var C=M.p;try{return M.p=u,m()}finally{M.p=C}}var Et=Math.random().toString(36).slice(2),Be="__reactFiber$"+Et,Ue="__reactProps$"+Et,It="__reactContainer$"+Et,$e="__reactEvents$"+Et,Qe="__reactListeners$"+Et,Ft="__reactHandles$"+Et,qe="__reactResources$"+Et,Ye="__reactMarker$"+Et;function Ut(u){delete u[Be],delete u[Ue],delete u[$e],delete u[Qe],delete u[Ft]}function ye(u){var m=u[Be];if(m)return m;for(var C=u.parentNode;C;){if(m=C[It]||C[Be]){if(C=m.alternate,m.child!==null||C!==null&&C.child!==null)for(u=L6(u);u!==null;){if(C=u[Be])return C;u=L6(u)}return m}u=C,C=u.parentNode}return null}function xe(u){if(u=u[Be]||u[It]){var m=u.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return u}return null}function nt(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u.stateNode;throw Error(n(33))}function ct(u){var m=u[qe];return m||(m=u[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function wt(u){u[Ye]=!0}var St=new Set,Le={};function we(u,m){rt(u,m),rt(u+"Capture",m)}function rt(u,m){for(Le[u]=m,u=0;u<m.length;u++)St.add(m[u])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},Tt={};function Yt(u){return ee.call(Tt,u)?!0:ee.call(yt,u)?!1:it.test(u)?Tt[u]=!0:(yt[u]=!0,!1)}function Kt(u,m,C){if(Yt(m))if(C===null)u.removeAttribute(m);else{switch(typeof C){case"undefined":case"function":case"symbol":u.removeAttribute(m);return;case"boolean":var I=m.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){u.removeAttribute(m);return}}u.setAttribute(m,""+C)}}function fr(u,m,C){if(C===null)u.removeAttribute(m);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttribute(m,""+C)}}function or(u,m,C,I){if(I===null)u.removeAttribute(C);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(C);return}u.setAttributeNS(m,C,""+I)}}var mt,_t;function Pt(u){if(mt===void 0)try{throw Error()}catch(C){var m=C.stack.trim().match(/\n( *(at )?)/);mt=m&&m[1]||"",_t=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+u+_t}var Nt=!1;function er(u,m){if(!u||Nt)return"";Nt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(m){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(et){var Ke=et}Reflect.construct(u,[],ft)}else{try{ft.call()}catch(et){Ke=et}u.call(ft.prototype)}}else{try{throw Error()}catch(et){Ke=et}(ft=u())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(et){if(et&&Ke&&typeof et.stack=="string")return[et.stack,Ke.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=I.DetermineComponentFrameRoot(),le=W[0],de=W[1];if(le&&de){var Se=le.split(`
`),We=de.split(`
`);for(O=I=0;I<Se.length&&!Se[I].includes("DetermineComponentFrameRoot");)I++;for(;O<We.length&&!We[O].includes("DetermineComponentFrameRoot");)O++;if(I===Se.length||O===We.length)for(I=Se.length-1,O=We.length-1;1<=I&&0<=O&&Se[I]!==We[O];)O--;for(;1<=I&&0<=O;I--,O--)if(Se[I]!==We[O]){if(I!==1||O!==1)do if(I--,O--,0>O||Se[I]!==We[O]){var at=`
`+Se[I].replace(" at new "," at ");return u.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",u.displayName)),at}while(1<=I&&0<=O);break}}}finally{Nt=!1,Error.prepareStackTrace=C}return(C=u?u.displayName||u.name:"")?Pt(C):""}function Ci(u){switch(u.tag){case 26:case 27:case 5:return Pt(u.type);case 16:return Pt("Lazy");case 13:return Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return er(u.type,!1);case 11:return er(u.type.render,!1);case 1:return er(u.type,!0);case 31:return Pt("Activity");default:return""}}function Ti(u){try{var m="";do m+=Ci(u),u=u.return;while(u);return m}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function zn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ho(u){var m=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Zd(u){var m=Ho(u)?"checked":"value",C=Object.getOwnPropertyDescriptor(u.constructor.prototype,m),I=""+u[m];if(!u.hasOwnProperty(m)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var O=C.get,W=C.set;return Object.defineProperty(u,m,{configurable:!0,get:function(){return O.call(this)},set:function(le){I=""+le,W.call(this,le)}}),Object.defineProperty(u,m,{enumerable:C.enumerable}),{getValue:function(){return I},setValue:function(le){I=""+le},stopTracking:function(){u._valueTracker=null,delete u[m]}}}}function Wo(u){u._valueTracker||(u._valueTracker=Zd(u))}function Xd(u){if(!u)return!1;var m=u._valueTracker;if(!m)return!0;var C=m.getValue(),I="";return u&&(I=Ho(u)?u.checked?"true":"false":u.value),u=I,u!==C?(m.setValue(u),!0):!1}function $a(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var s0=/[\n"\\]/g;function Re(u){return u.replace(s0,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function tt(u,m,C,I,O,W,le,de){u.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?u.type=le:u.removeAttribute("type"),m!=null?le==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+zn(m)):u.value!==""+zn(m)&&(u.value=""+zn(m)):le!=="submit"&&le!=="reset"||u.removeAttribute("value"),m!=null?xt(u,le,zn(m)):C!=null?xt(u,le,zn(C)):I!=null&&u.removeAttribute("value"),O==null&&W!=null&&(u.defaultChecked=!!W),O!=null&&(u.checked=O&&typeof O!="function"&&typeof O!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?u.name=""+zn(de):u.removeAttribute("name")}function dt(u,m,C,I,O,W,le,de){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(u.type=W),m!=null||C!=null){if(!(W!=="submit"&&W!=="reset"||m!=null))return;C=C!=null?""+zn(C):"",m=m!=null?""+zn(m):C,de||m===u.value||(u.value=m),u.defaultValue=m}I=I??O,I=typeof I!="function"&&typeof I!="symbol"&&!!I,u.checked=de?u.checked:!!I,u.defaultChecked=!!I,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(u.name=le)}function xt(u,m,C){m==="number"&&$a(u.ownerDocument)===u||u.defaultValue===""+C||(u.defaultValue=""+C)}function ut(u,m,C,I){if(u=u.options,m){m={};for(var O=0;O<C.length;O++)m["$"+C[O]]=!0;for(C=0;C<u.length;C++)O=m.hasOwnProperty("$"+u[C].value),u[C].selected!==O&&(u[C].selected=O),O&&I&&(u[C].defaultSelected=!0)}else{for(C=""+zn(C),m=null,O=0;O<u.length;O++){if(u[O].value===C){u[O].selected=!0,I&&(u[O].defaultSelected=!0);return}m!==null||u[O].disabled||(m=u[O])}m!==null&&(m.selected=!0)}}function qt(u,m,C){if(m!=null&&(m=""+zn(m),m!==u.value&&(u.value=m),C==null)){u.defaultValue!==m&&(u.defaultValue=m);return}u.defaultValue=C!=null?""+zn(C):""}function Nr(u,m,C,I){if(m==null){if(I!=null){if(C!=null)throw Error(n(92));if(v(I)){if(1<I.length)throw Error(n(93));I=I[0]}C=I}C==null&&(C=""),m=C}C=zn(m),u.defaultValue=C,I=u.textContent,I===C&&I!==""&&I!==null&&(u.value=I)}function Qn(u,m){if(m){var C=u.firstChild;if(C&&C===u.lastChild&&C.nodeType===3){C.nodeValue=m;return}}u.textContent=m}var di=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(u,m,C){var I=m.indexOf("--")===0;C==null||typeof C=="boolean"||C===""?I?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="":I?u.setProperty(m,C):typeof C!="number"||C===0||di.has(m)?m==="float"?u.cssFloat=C:u[m]=(""+C).trim():u[m]=C+"px"}function B_(u,m,C){if(m!=null&&typeof m!="object")throw Error(n(62));if(u=u.style,C!=null){for(var I in C)!C.hasOwnProperty(I)||m!=null&&m.hasOwnProperty(I)||(I.indexOf("--")===0?u.setProperty(I,""):I==="float"?u.cssFloat="":u[I]="");for(var O in m)I=m[O],m.hasOwnProperty(O)&&C[O]!==I&&Vo(u,O,I)}else for(var W in m)m.hasOwnProperty(W)&&Vo(u,W,m[W])}function o0(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qd(u){return j9.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var a0=null;function l0(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var qa=null,Ha=null;function P_(u){var m=xe(u);if(m&&(u=m.stateNode)){var C=u[Ue]||null;e:switch(u=m.stateNode,m.type){case"input":if(tt(u,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name),m=C.name,C.type==="radio"&&m!=null){for(C=u;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll('input[name="'+Re(""+m)+'"][type="radio"]'),m=0;m<C.length;m++){var I=C[m];if(I!==u&&I.form===u.form){var O=I[Ue]||null;if(!O)throw Error(n(90));tt(I,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(m=0;m<C.length;m++)I=C[m],I.form===u.form&&Xd(I)}break e;case"textarea":qt(u,C.value,C.defaultValue);break e;case"select":m=C.value,m!=null&&ut(u,!!C.multiple,m,!1)}}}var c0=!1;function N_(u,m,C){if(c0)return u(m,C);c0=!0;try{var I=u(m);return I}finally{if(c0=!1,(qa!==null||Ha!==null)&&(Of(),qa&&(m=qa,u=Ha,Ha=qa=null,P_(m),u)))for(m=0;m<u.length;m++)P_(u[m])}}function Rc(u,m){var C=u.stateNode;if(C===null)return null;var I=C[Ue]||null;if(I===null)return null;C=I[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(u=u.type,I=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!I;break e;default:u=!1}if(u)return null;if(C&&typeof C!="function")throw Error(n(231,m,typeof C));return C}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u0=!1;if(Ms)try{var Ec={};Object.defineProperty(Ec,"passive",{get:function(){u0=!0}}),window.addEventListener("test",Ec,Ec),window.removeEventListener("test",Ec,Ec)}catch{u0=!1}var Xs=null,d0=null,ef=null;function D_(){if(ef)return ef;var u,m=d0,C=m.length,I,O="value"in Xs?Xs.value:Xs.textContent,W=O.length;for(u=0;u<C&&m[u]===O[u];u++);var le=C-u;for(I=1;I<=le&&m[C-I]===O[W-I];I++);return ef=O.slice(u,1<I?1-I:void 0)}function tf(u){var m=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&m===13&&(u=13)):u=m,u===10&&(u=13),32<=u||u===13?u:0}function rf(){return!0}function L_(){return!1}function ei(u){function m(C,I,O,W,le){this._reactName=C,this._targetInst=O,this.type=I,this.nativeEvent=W,this.target=le,this.currentTarget=null;for(var de in u)u.hasOwnProperty(de)&&(C=u[de],this[de]=C?C(W):W[de]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?rf:L_,this.isPropagationStopped=L_,this}return y(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=rf)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=rf)},persist:function(){},isPersistent:rf}),m}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nf=ei(Go),Ic=y({},Go,{view:0,detail:0}),M9=ei(Ic),f0,h0,zc,sf=y({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g0,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==zc&&(zc&&u.type==="mousemove"?(f0=u.screenX-zc.screenX,h0=u.screenY-zc.screenY):h0=f0=0,zc=u),f0)},movementY:function(u){return"movementY"in u?u.movementY:h0}}),O_=ei(sf),C9=y({},sf,{dataTransfer:0}),T9=ei(C9),A9=y({},Ic,{relatedTarget:0}),p0=ei(A9),R9=y({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),E9=ei(R9),I9=y({},Go,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),z9=ei(I9),B9=y({},Go,{data:0}),F_=ei(B9),P9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L9(u){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(u):(u=D9[u])?!!m[u]:!1}function g0(){return L9}var O9=y({},Ic,{key:function(u){if(u.key){var m=P9[u.key]||u.key;if(m!=="Unidentified")return m}return u.type==="keypress"?(u=tf(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?N9[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g0,charCode:function(u){return u.type==="keypress"?tf(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?tf(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),F9=ei(O9),U9=y({},sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U_=ei(U9),$9=y({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g0}),q9=ei($9),H9=y({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),W9=ei(H9),V9=y({},sf,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),G9=ei(V9),K9=y({},Go,{newState:0,oldState:0}),Y9=ei(K9),J9=[9,13,27,32],m0=Ms&&"CompositionEvent"in window,Bc=null;Ms&&"documentMode"in document&&(Bc=document.documentMode);var Z9=Ms&&"TextEvent"in window&&!Bc,$_=Ms&&(!m0||Bc&&8<Bc&&11>=Bc),q_=" ",H_=!1;function W_(u,m){switch(u){case"keyup":return J9.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V_(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Wa=!1;function X9(u,m){switch(u){case"compositionend":return V_(m);case"keypress":return m.which!==32?null:(H_=!0,q_);case"textInput":return u=m.data,u===q_&&H_?null:u;default:return null}}function Q9(u,m){if(Wa)return u==="compositionend"||!m0&&W_(u,m)?(u=D_(),ef=d0=Xs=null,Wa=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return $_&&m.locale!=="ko"?null:m.data;default:return null}}var eI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m==="input"?!!eI[u.type]:m==="textarea"}function K_(u,m,C,I){qa?Ha?Ha.push(I):Ha=[I]:qa=I,m=Wf(m,"onChange"),0<m.length&&(C=new nf("onChange","change",null,C,I),u.push({event:C,listeners:m}))}var Pc=null,Nc=null;function tI(u){T6(u,0)}function of(u){var m=nt(u);if(Xd(m))return u}function Y_(u,m){if(u==="change")return m}var J_=!1;if(Ms){var y0;if(Ms){var v0="oninput"in document;if(!v0){var Z_=document.createElement("div");Z_.setAttribute("oninput","return;"),v0=typeof Z_.oninput=="function"}y0=v0}else y0=!1;J_=y0&&(!document.documentMode||9<document.documentMode)}function X_(){Pc&&(Pc.detachEvent("onpropertychange",Q_),Nc=Pc=null)}function Q_(u){if(u.propertyName==="value"&&of(Nc)){var m=[];K_(m,Nc,u,l0(u)),N_(tI,m)}}function rI(u,m,C){u==="focusin"?(X_(),Pc=m,Nc=C,Pc.attachEvent("onpropertychange",Q_)):u==="focusout"&&X_()}function nI(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return of(Nc)}function iI(u,m){if(u==="click")return of(m)}function sI(u,m){if(u==="input"||u==="change")return of(m)}function oI(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var fi=typeof Object.is=="function"?Object.is:oI;function Dc(u,m){if(fi(u,m))return!0;if(typeof u!="object"||u===null||typeof m!="object"||m===null)return!1;var C=Object.keys(u),I=Object.keys(m);if(C.length!==I.length)return!1;for(I=0;I<C.length;I++){var O=C[I];if(!ee.call(m,O)||!fi(u[O],m[O]))return!1}return!0}function eS(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function tS(u,m){var C=eS(u);u=0;for(var I;C;){if(C.nodeType===3){if(I=u+C.textContent.length,u<=m&&I>=m)return{node:C,offset:m-u};u=I}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=eS(C)}}function rS(u,m){return u&&m?u===m?!0:u&&u.nodeType===3?!1:m&&m.nodeType===3?rS(u,m.parentNode):"contains"in u?u.contains(m):u.compareDocumentPosition?!!(u.compareDocumentPosition(m)&16):!1:!1}function nS(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var m=$a(u.document);m instanceof u.HTMLIFrameElement;){try{var C=typeof m.contentWindow.location.href=="string"}catch{C=!1}if(C)u=m.contentWindow;else break;m=$a(u.document)}return m}function x0(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m&&(m==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||m==="textarea"||u.contentEditable==="true")}var aI=Ms&&"documentMode"in document&&11>=document.documentMode,Va=null,b0=null,Lc=null,w0=!1;function iS(u,m,C){var I=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;w0||Va==null||Va!==$a(I)||(I=Va,"selectionStart"in I&&x0(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Lc&&Dc(Lc,I)||(Lc=I,I=Wf(b0,"onSelect"),0<I.length&&(m=new nf("onSelect","select",null,m,C),u.push({event:m,listeners:I}),m.target=Va)))}function Ko(u,m){var C={};return C[u.toLowerCase()]=m.toLowerCase(),C["Webkit"+u]="webkit"+m,C["Moz"+u]="moz"+m,C}var Ga={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionrun:Ko("Transition","TransitionRun"),transitionstart:Ko("Transition","TransitionStart"),transitioncancel:Ko("Transition","TransitionCancel"),transitionend:Ko("Transition","TransitionEnd")},_0={},sS={};Ms&&(sS=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Yo(u){if(_0[u])return _0[u];if(!Ga[u])return u;var m=Ga[u],C;for(C in m)if(m.hasOwnProperty(C)&&C in sS)return _0[u]=m[C];return u}var oS=Yo("animationend"),aS=Yo("animationiteration"),lS=Yo("animationstart"),lI=Yo("transitionrun"),cI=Yo("transitionstart"),uI=Yo("transitioncancel"),cS=Yo("transitionend"),uS=new Map,S0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");S0.push("scrollEnd");function Qi(u,m){uS.set(u,m),we(m,[u])}var dS=new WeakMap;function Ai(u,m){if(typeof u=="object"&&u!==null){var C=dS.get(u);return C!==void 0?C:(m={value:u,source:m,stack:Ti(m)},dS.set(u,m),m)}return{value:u,source:m,stack:Ti(m)}}var Ri=[],Ka=0,k0=0;function af(){for(var u=Ka,m=k0=Ka=0;m<u;){var C=Ri[m];Ri[m++]=null;var I=Ri[m];Ri[m++]=null;var O=Ri[m];Ri[m++]=null;var W=Ri[m];if(Ri[m++]=null,I!==null&&O!==null){var le=I.pending;le===null?O.next=O:(O.next=le.next,le.next=O),I.pending=O}W!==0&&fS(C,O,W)}}function lf(u,m,C,I){Ri[Ka++]=u,Ri[Ka++]=m,Ri[Ka++]=C,Ri[Ka++]=I,k0|=I,u.lanes|=I,u=u.alternate,u!==null&&(u.lanes|=I)}function j0(u,m,C,I){return lf(u,m,C,I),cf(u)}function Ya(u,m){return lf(u,null,null,m),cf(u)}function fS(u,m,C){u.lanes|=C;var I=u.alternate;I!==null&&(I.lanes|=C);for(var O=!1,W=u.return;W!==null;)W.childLanes|=C,I=W.alternate,I!==null&&(I.childLanes|=C),W.tag===22&&(u=W.stateNode,u===null||u._visibility&1||(O=!0)),u=W,W=W.return;return u.tag===3?(W=u.stateNode,O&&m!==null&&(O=31-V(C),u=W.hiddenUpdates,I=u[O],I===null?u[O]=[m]:I.push(m),m.lane=C|536870912),W):null}function cf(u){if(50<cu)throw cu=0,Eg=null,Error(n(185));for(var m=u.return;m!==null;)u=m,m=u.return;return u.tag===3?u.stateNode:null}var Ja={};function dI(u,m,C,I){this.tag=u,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(u,m,C,I){return new dI(u,m,C,I)}function M0(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Cs(u,m){var C=u.alternate;return C===null?(C=hi(u.tag,m,u.key,u.mode),C.elementType=u.elementType,C.type=u.type,C.stateNode=u.stateNode,C.alternate=u,u.alternate=C):(C.pendingProps=m,C.type=u.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=u.flags&65011712,C.childLanes=u.childLanes,C.lanes=u.lanes,C.child=u.child,C.memoizedProps=u.memoizedProps,C.memoizedState=u.memoizedState,C.updateQueue=u.updateQueue,m=u.dependencies,C.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},C.sibling=u.sibling,C.index=u.index,C.ref=u.ref,C.refCleanup=u.refCleanup,C}function hS(u,m){u.flags&=65011714;var C=u.alternate;return C===null?(u.childLanes=0,u.lanes=m,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=C.childLanes,u.lanes=C.lanes,u.child=C.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=C.memoizedProps,u.memoizedState=C.memoizedState,u.updateQueue=C.updateQueue,u.type=C.type,m=C.dependencies,u.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),u}function uf(u,m,C,I,O,W){var le=0;if(I=u,typeof u=="function")M0(u)&&(le=1);else if(typeof u=="string")le=hz(u,C,X.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case H:return u=hi(31,C,m,O),u.elementType=H,u.lanes=W,u;case A:return Jo(C.children,O,W,m);case E:le=8,O|=24;break;case P:return u=hi(12,C,m,O|2),u.elementType=P,u.lanes=W,u;case G:return u=hi(13,C,m,O),u.elementType=G,u.lanes=W,u;case $:return u=hi(19,C,m,O),u.elementType=$,u.lanes=W,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case z:case D:le=10;break e;case B:le=9;break e;case U:le=11;break e;case re:le=14;break e;case Q:le=16,I=null;break e}le=29,C=Error(n(130,u===null?"null":typeof u,"")),I=null}return m=hi(le,C,m,O),m.elementType=u,m.type=I,m.lanes=W,m}function Jo(u,m,C,I){return u=hi(7,u,I,m),u.lanes=C,u}function C0(u,m,C){return u=hi(6,u,null,m),u.lanes=C,u}function T0(u,m,C){return m=hi(4,u.children!==null?u.children:[],u.key,m),m.lanes=C,m.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},m}var Za=[],Xa=0,df=null,ff=0,Ei=[],Ii=0,Zo=null,Ts=1,As="";function Xo(u,m){Za[Xa++]=ff,Za[Xa++]=df,df=u,ff=m}function pS(u,m,C){Ei[Ii++]=Ts,Ei[Ii++]=As,Ei[Ii++]=Zo,Zo=u;var I=Ts;u=As;var O=32-V(I)-1;I&=~(1<<O),C+=1;var W=32-V(m)+O;if(30<W){var le=O-O%5;W=(I&(1<<le)-1).toString(32),I>>=le,O-=le,Ts=1<<32-V(m)+O|C<<O|I,As=W+u}else Ts=1<<W|C<<O|I,As=u}function A0(u){u.return!==null&&(Xo(u,1),pS(u,1,0))}function R0(u){for(;u===df;)df=Za[--Xa],Za[Xa]=null,ff=Za[--Xa],Za[Xa]=null;for(;u===Zo;)Zo=Ei[--Ii],Ei[Ii]=null,As=Ei[--Ii],Ei[Ii]=null,Ts=Ei[--Ii],Ei[Ii]=null}var Yn=null,tn=null,Tr=!1,Qo=null,as=!1,E0=Error(n(519));function ea(u){var m=Error(n(418,""));throw Uc(Ai(m,u)),E0}function gS(u){var m=u.stateNode,C=u.type,I=u.memoizedProps;switch(m[Be]=u,m[Ue]=I,C){case"dialog":vr("cancel",m),vr("close",m);break;case"iframe":case"object":case"embed":vr("load",m);break;case"video":case"audio":for(C=0;C<du.length;C++)vr(du[C],m);break;case"source":vr("error",m);break;case"img":case"image":case"link":vr("error",m),vr("load",m);break;case"details":vr("toggle",m);break;case"input":vr("invalid",m),dt(m,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0),Wo(m);break;case"select":vr("invalid",m);break;case"textarea":vr("invalid",m),Nr(m,I.value,I.defaultValue,I.children),Wo(m)}C=I.children,typeof C!="string"&&typeof C!="number"&&typeof C!="bigint"||m.textContent===""+C||I.suppressHydrationWarning===!0||I6(m.textContent,C)?(I.popover!=null&&(vr("beforetoggle",m),vr("toggle",m)),I.onScroll!=null&&vr("scroll",m),I.onScrollEnd!=null&&vr("scrollend",m),I.onClick!=null&&(m.onclick=Vf),m=!0):m=!1,m||ea(u)}function mS(u){for(Yn=u.return;Yn;)switch(Yn.tag){case 5:case 13:as=!1;return;case 27:case 3:as=!0;return;default:Yn=Yn.return}}function Oc(u){if(u!==Yn)return!1;if(!Tr)return mS(u),Tr=!0,!1;var m=u.tag,C;if((C=m!==3&&m!==27)&&((C=m===5)&&(C=u.type,C=!(C!=="form"&&C!=="button")||Gg(u.type,u.memoizedProps)),C=!C),C&&tn&&ea(u),mS(u),m===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,m=0;u;){if(u.nodeType===8)if(C=u.data,C==="/$"){if(m===0){tn=ts(u.nextSibling);break e}m--}else C!=="$"&&C!=="$!"&&C!=="$?"||m++;u=u.nextSibling}tn=null}}else m===27?(m=tn,go(u.type)?(u=Zg,Zg=null,tn=u):tn=m):tn=Yn?ts(u.stateNode.nextSibling):null;return!0}function Fc(){tn=Yn=null,Tr=!1}function yS(){var u=Qo;return u!==null&&(ni===null?ni=u:ni.push.apply(ni,u),Qo=null),u}function Uc(u){Qo===null?Qo=[u]:Qo.push(u)}var I0=k(null),ta=null,Rs=null;function Qs(u,m,C){L(I0,m._currentValue),m._currentValue=C}function Es(u){u._currentValue=I0.current,N(I0)}function z0(u,m,C){for(;u!==null;){var I=u.alternate;if((u.childLanes&m)!==m?(u.childLanes|=m,I!==null&&(I.childLanes|=m)):I!==null&&(I.childLanes&m)!==m&&(I.childLanes|=m),u===C)break;u=u.return}}function B0(u,m,C,I){var O=u.child;for(O!==null&&(O.return=u);O!==null;){var W=O.dependencies;if(W!==null){var le=O.child;W=W.firstContext;e:for(;W!==null;){var de=W;W=O;for(var Se=0;Se<m.length;Se++)if(de.context===m[Se]){W.lanes|=C,de=W.alternate,de!==null&&(de.lanes|=C),z0(W.return,C,u),I||(le=null);break e}W=de.next}}else if(O.tag===18){if(le=O.return,le===null)throw Error(n(341));le.lanes|=C,W=le.alternate,W!==null&&(W.lanes|=C),z0(le,C,u),le=null}else le=O.child;if(le!==null)le.return=O;else for(le=O;le!==null;){if(le===u){le=null;break}if(O=le.sibling,O!==null){O.return=le.return,le=O;break}le=le.return}O=le}}function $c(u,m,C,I){u=null;for(var O=m,W=!1;O!==null;){if(!W){if((O.flags&524288)!==0)W=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var le=O.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var de=O.type;fi(O.pendingProps.value,le.value)||(u!==null?u.push(de):u=[de])}}else if(O===K.current){if(le=O.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(u!==null?u.push(yu):u=[yu])}O=O.return}u!==null&&B0(m,u,C,I),m.flags|=262144}function hf(u){for(u=u.firstContext;u!==null;){if(!fi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function ra(u){ta=u,Rs=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Un(u){return vS(ta,u)}function pf(u,m){return ta===null&&ra(u),vS(u,m)}function vS(u,m){var C=m._currentValue;if(m={context:m,memoizedValue:C,next:null},Rs===null){if(u===null)throw Error(n(308));Rs=m,u.dependencies={lanes:0,firstContext:m},u.flags|=524288}else Rs=Rs.next=m;return C}var fI=typeof AbortController<"u"?AbortController:function(){var u=[],m=this.signal={aborted:!1,addEventListener:function(C,I){u.push(I)}};this.abort=function(){m.aborted=!0,u.forEach(function(C){return C()})}},hI=e.unstable_scheduleCallback,pI=e.unstable_NormalPriority,xn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function P0(){return{controller:new fI,data:new Map,refCount:0}}function qc(u){u.refCount--,u.refCount===0&&hI(pI,function(){u.controller.abort()})}var Hc=null,N0=0,Qa=0,el=null;function gI(u,m){if(Hc===null){var C=Hc=[];N0=0,Qa=Lg(),el={status:"pending",value:void 0,then:function(I){C.push(I)}}}return N0++,m.then(xS,xS),m}function xS(){if(--N0===0&&Hc!==null){el!==null&&(el.status="fulfilled");var u=Hc;Hc=null,Qa=0,el=null;for(var m=0;m<u.length;m++)(0,u[m])()}}function mI(u,m){var C=[],I={status:"pending",value:null,reason:null,then:function(O){C.push(O)}};return u.then(function(){I.status="fulfilled",I.value=m;for(var O=0;O<C.length;O++)(0,C[O])(m)},function(O){for(I.status="rejected",I.reason=O,O=0;O<C.length;O++)(0,C[O])(void 0)}),I}var bS=b.S;b.S=function(u,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&gI(u,m),bS!==null&&bS(u,m)};var na=k(null);function D0(){var u=na.current;return u!==null?u:Or.pooledCache}function gf(u,m){m===null?L(na,na.current):L(na,m.pool)}function wS(){var u=D0();return u===null?null:{parent:xn._currentValue,pool:u}}var Wc=Error(n(460)),_S=Error(n(474)),mf=Error(n(542)),L0={then:function(){}};function SS(u){return u=u.status,u==="fulfilled"||u==="rejected"}function yf(){}function kS(u,m,C){switch(C=u[C],C===void 0?u.push(m):C!==m&&(m.then(yf,yf),m=C),m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,MS(u),u;default:if(typeof m.status=="string")m.then(yf,yf);else{if(u=Or,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=m,u.status="pending",u.then(function(I){if(m.status==="pending"){var O=m;O.status="fulfilled",O.value=I}},function(I){if(m.status==="pending"){var O=m;O.status="rejected",O.reason=I}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,MS(u),u}throw Vc=m,Wc}}var Vc=null;function jS(){if(Vc===null)throw Error(n(459));var u=Vc;return Vc=null,u}function MS(u){if(u===Wc||u===mf)throw Error(n(483))}var eo=!1;function O0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F0(u,m){u=u.updateQueue,m.updateQueue===u&&(m.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function to(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ro(u,m,C){var I=u.updateQueue;if(I===null)return null;if(I=I.shared,(Ar&2)!==0){var O=I.pending;return O===null?m.next=m:(m.next=O.next,O.next=m),I.pending=m,m=cf(u),fS(u,null,C),m}return lf(u,I,m,C),cf(u)}function Gc(u,m,C){if(m=m.updateQueue,m!==null&&(m=m.shared,(C&4194048)!==0)){var I=m.lanes;I&=u.pendingLanes,C|=I,m.lanes=C,Pe(u,C)}}function U0(u,m){var C=u.updateQueue,I=u.alternate;if(I!==null&&(I=I.updateQueue,C===I)){var O=null,W=null;if(C=C.firstBaseUpdate,C!==null){do{var le={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};W===null?O=W=le:W=W.next=le,C=C.next}while(C!==null);W===null?O=W=m:W=W.next=m}else O=W=m;C={baseState:I.baseState,firstBaseUpdate:O,lastBaseUpdate:W,shared:I.shared,callbacks:I.callbacks},u.updateQueue=C;return}u=C.lastBaseUpdate,u===null?C.firstBaseUpdate=m:u.next=m,C.lastBaseUpdate=m}var $0=!1;function Kc(){if($0){var u=el;if(u!==null)throw u}}function Yc(u,m,C,I){$0=!1;var O=u.updateQueue;eo=!1;var W=O.firstBaseUpdate,le=O.lastBaseUpdate,de=O.shared.pending;if(de!==null){O.shared.pending=null;var Se=de,We=Se.next;Se.next=null,le===null?W=We:le.next=We,le=Se;var at=u.alternate;at!==null&&(at=at.updateQueue,de=at.lastBaseUpdate,de!==le&&(de===null?at.firstBaseUpdate=We:de.next=We,at.lastBaseUpdate=Se))}if(W!==null){var ft=O.baseState;le=0,at=We=Se=null,de=W;do{var Ke=de.lane&-536870913,et=Ke!==de.lane;if(et?(Sr&Ke)===Ke:(I&Ke)===Ke){Ke!==0&&Ke===Qa&&($0=!0),at!==null&&(at=at.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Jt=u,Wt=de;Ke=m;var zr=C;switch(Wt.tag){case 1:if(Jt=Wt.payload,typeof Jt=="function"){ft=Jt.call(zr,ft,Ke);break e}ft=Jt;break e;case 3:Jt.flags=Jt.flags&-65537|128;case 0:if(Jt=Wt.payload,Ke=typeof Jt=="function"?Jt.call(zr,ft,Ke):Jt,Ke==null)break e;ft=y({},ft,Ke);break e;case 2:eo=!0}}Ke=de.callback,Ke!==null&&(u.flags|=64,et&&(u.flags|=8192),et=O.callbacks,et===null?O.callbacks=[Ke]:et.push(Ke))}else et={lane:Ke,tag:de.tag,payload:de.payload,callback:de.callback,next:null},at===null?(We=at=et,Se=ft):at=at.next=et,le|=Ke;if(de=de.next,de===null){if(de=O.shared.pending,de===null)break;et=de,de=et.next,et.next=null,O.lastBaseUpdate=et,O.shared.pending=null}}while(!0);at===null&&(Se=ft),O.baseState=Se,O.firstBaseUpdate=We,O.lastBaseUpdate=at,W===null&&(O.shared.lanes=0),uo|=le,u.lanes=le,u.memoizedState=ft}}function CS(u,m){if(typeof u!="function")throw Error(n(191,u));u.call(m)}function TS(u,m){var C=u.callbacks;if(C!==null)for(u.callbacks=null,u=0;u<C.length;u++)CS(C[u],m)}var tl=k(null),vf=k(0);function AS(u,m){u=Ls,L(vf,u),L(tl,m),Ls=u|m.baseLanes}function q0(){L(vf,Ls),L(tl,tl.current)}function H0(){Ls=vf.current,N(tl),N(vf)}var no=0,hr=null,Er=null,pn=null,xf=!1,rl=!1,ia=!1,bf=0,Jc=0,nl=null,yI=0;function un(){throw Error(n(321))}function W0(u,m){if(m===null)return!1;for(var C=0;C<m.length&&C<u.length;C++)if(!fi(u[C],m[C]))return!1;return!0}function V0(u,m,C,I,O,W){return no=W,hr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,b.H=u===null||u.memoizedState===null?f2:h2,ia=!1,W=C(I,O),ia=!1,rl&&(W=ES(m,C,I,O)),RS(u),W}function RS(u){b.H=Mf;var m=Er!==null&&Er.next!==null;if(no=0,pn=Er=hr=null,xf=!1,Jc=0,nl=null,m)throw Error(n(300));u===null||kn||(u=u.dependencies,u!==null&&hf(u)&&(kn=!0))}function ES(u,m,C,I){hr=u;var O=0;do{if(rl&&(nl=null),Jc=0,rl=!1,25<=O)throw Error(n(301));if(O+=1,pn=Er=null,u.updateQueue!=null){var W=u.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}b.H=kI,W=m(C,I)}while(rl);return W}function vI(){var u=b.H,m=u.useState()[0];return m=typeof m.then=="function"?Zc(m):m,u=u.useState()[0],(Er!==null?Er.memoizedState:null)!==u&&(hr.flags|=1024),m}function G0(){var u=bf!==0;return bf=0,u}function K0(u,m,C){m.updateQueue=u.updateQueue,m.flags&=-2053,u.lanes&=~C}function Y0(u){if(xf){for(u=u.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}xf=!1}no=0,pn=Er=hr=null,rl=!1,Jc=bf=0,nl=null}function ti(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?hr.memoizedState=pn=u:pn=pn.next=u,pn}function gn(){if(Er===null){var u=hr.alternate;u=u!==null?u.memoizedState:null}else u=Er.next;var m=pn===null?hr.memoizedState:pn.next;if(m!==null)pn=m,Er=u;else{if(u===null)throw hr.alternate===null?Error(n(467)):Error(n(310));Er=u,u={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},pn===null?hr.memoizedState=pn=u:pn=pn.next=u}return pn}function J0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zc(u){var m=Jc;return Jc+=1,nl===null&&(nl=[]),u=kS(nl,u,m),m=hr,(pn===null?m.memoizedState:pn.next)===null&&(m=m.alternate,b.H=m===null||m.memoizedState===null?f2:h2),u}function wf(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Zc(u);if(u.$$typeof===D)return Un(u)}throw Error(n(438,String(u)))}function Z0(u){var m=null,C=hr.updateQueue;if(C!==null&&(m=C.memoCache),m==null){var I=hr.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(m={data:I.data.map(function(O){return O.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),C===null&&(C=J0(),hr.updateQueue=C),C.memoCache=m,C=m.data[m.index],C===void 0)for(C=m.data[m.index]=Array(u),I=0;I<u;I++)C[I]=Y;return m.index++,C}function Is(u,m){return typeof m=="function"?m(u):m}function _f(u){var m=gn();return X0(m,Er,u)}function X0(u,m,C){var I=u.queue;if(I===null)throw Error(n(311));I.lastRenderedReducer=C;var O=u.baseQueue,W=I.pending;if(W!==null){if(O!==null){var le=O.next;O.next=W.next,W.next=le}m.baseQueue=O=W,I.pending=null}if(W=u.baseState,O===null)u.memoizedState=W;else{m=O.next;var de=le=null,Se=null,We=m,at=!1;do{var ft=We.lane&-536870913;if(ft!==We.lane?(Sr&ft)===ft:(no&ft)===ft){var Ke=We.revertLane;if(Ke===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),ft===Qa&&(at=!0);else if((no&Ke)===Ke){We=We.next,Ke===Qa&&(at=!0);continue}else ft={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Se===null?(de=Se=ft,le=W):Se=Se.next=ft,hr.lanes|=Ke,uo|=Ke;ft=We.action,ia&&C(W,ft),W=We.hasEagerState?We.eagerState:C(W,ft)}else Ke={lane:ft,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Se===null?(de=Se=Ke,le=W):Se=Se.next=Ke,hr.lanes|=ft,uo|=ft;We=We.next}while(We!==null&&We!==m);if(Se===null?le=W:Se.next=de,!fi(W,u.memoizedState)&&(kn=!0,at&&(C=el,C!==null)))throw C;u.memoizedState=W,u.baseState=le,u.baseQueue=Se,I.lastRenderedState=W}return O===null&&(I.lanes=0),[u.memoizedState,I.dispatch]}function Q0(u){var m=gn(),C=m.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=u;var I=C.dispatch,O=C.pending,W=m.memoizedState;if(O!==null){C.pending=null;var le=O=O.next;do W=u(W,le.action),le=le.next;while(le!==O);fi(W,m.memoizedState)||(kn=!0),m.memoizedState=W,m.baseQueue===null&&(m.baseState=W),C.lastRenderedState=W}return[W,I]}function IS(u,m,C){var I=hr,O=gn(),W=Tr;if(W){if(C===void 0)throw Error(n(407));C=C()}else C=m();var le=!fi((Er||O).memoizedState,C);le&&(O.memoizedState=C,kn=!0),O=O.queue;var de=PS.bind(null,I,O,u);if(Xc(2048,8,de,[u]),O.getSnapshot!==m||le||pn!==null&&pn.memoizedState.tag&1){if(I.flags|=2048,il(9,Sf(),BS.bind(null,I,O,C,m),null),Or===null)throw Error(n(349));W||(no&124)!==0||zS(I,m,C)}return C}function zS(u,m,C){u.flags|=16384,u={getSnapshot:m,value:C},m=hr.updateQueue,m===null?(m=J0(),hr.updateQueue=m,m.stores=[u]):(C=m.stores,C===null?m.stores=[u]:C.push(u))}function BS(u,m,C,I){m.value=C,m.getSnapshot=I,NS(m)&&DS(u)}function PS(u,m,C){return C(function(){NS(m)&&DS(u)})}function NS(u){var m=u.getSnapshot;u=u.value;try{var C=m();return!fi(u,C)}catch{return!0}}function DS(u){var m=Ya(u,2);m!==null&&vi(m,u,2)}function eg(u){var m=ti();if(typeof u=="function"){var C=u;if(u=C(),ia){q(!0);try{C()}finally{q(!1)}}}return m.memoizedState=m.baseState=u,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:u},m}function LS(u,m,C,I){return u.baseState=C,X0(u,Er,typeof I=="function"?I:Is)}function xI(u,m,C,I,O){if(jf(u))throw Error(n(485));if(u=m.action,u!==null){var W={payload:O,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){W.listeners.push(le)}};b.T!==null?C(!0):W.isTransition=!1,I(W),C=m.pending,C===null?(W.next=m.pending=W,OS(m,W)):(W.next=C.next,m.pending=C.next=W)}}function OS(u,m){var C=m.action,I=m.payload,O=u.state;if(m.isTransition){var W=b.T,le={};b.T=le;try{var de=C(O,I),Se=b.S;Se!==null&&Se(le,de),FS(u,m,de)}catch(We){tg(u,m,We)}finally{b.T=W}}else try{W=C(O,I),FS(u,m,W)}catch(We){tg(u,m,We)}}function FS(u,m,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(I){US(u,m,I)},function(I){return tg(u,m,I)}):US(u,m,C)}function US(u,m,C){m.status="fulfilled",m.value=C,$S(m),u.state=C,m=u.pending,m!==null&&(C=m.next,C===m?u.pending=null:(C=C.next,m.next=C,OS(u,C)))}function tg(u,m,C){var I=u.pending;if(u.pending=null,I!==null){I=I.next;do m.status="rejected",m.reason=C,$S(m),m=m.next;while(m!==I)}u.action=null}function $S(u){u=u.listeners;for(var m=0;m<u.length;m++)(0,u[m])()}function qS(u,m){return m}function HS(u,m){if(Tr){var C=Or.formState;if(C!==null){e:{var I=hr;if(Tr){if(tn){t:{for(var O=tn,W=as;O.nodeType!==8;){if(!W){O=null;break t}if(O=ts(O.nextSibling),O===null){O=null;break t}}W=O.data,O=W==="F!"||W==="F"?O:null}if(O){tn=ts(O.nextSibling),I=O.data==="F!";break e}}ea(I)}I=!1}I&&(m=C[0])}}return C=ti(),C.memoizedState=C.baseState=m,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qS,lastRenderedState:m},C.queue=I,C=c2.bind(null,hr,I),I.dispatch=C,I=eg(!1),W=og.bind(null,hr,!1,I.queue),I=ti(),O={state:m,dispatch:null,action:u,pending:null},I.queue=O,C=xI.bind(null,hr,O,W,C),O.dispatch=C,I.memoizedState=u,[m,C,!1]}function WS(u){var m=gn();return VS(m,Er,u)}function VS(u,m,C){if(m=X0(u,m,qS)[0],u=_f(Is)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var I=Zc(m)}catch(le){throw le===Wc?mf:le}else I=m;m=gn();var O=m.queue,W=O.dispatch;return C!==m.memoizedState&&(hr.flags|=2048,il(9,Sf(),bI.bind(null,O,C),null)),[I,W,u]}function bI(u,m){u.action=m}function GS(u){var m=gn(),C=Er;if(C!==null)return VS(m,C,u);gn(),m=m.memoizedState,C=gn();var I=C.queue.dispatch;return C.memoizedState=u,[m,I,!1]}function il(u,m,C,I){return u={tag:u,create:C,deps:I,inst:m,next:null},m=hr.updateQueue,m===null&&(m=J0(),hr.updateQueue=m),C=m.lastEffect,C===null?m.lastEffect=u.next=u:(I=C.next,C.next=u,u.next=I,m.lastEffect=u),u}function Sf(){return{destroy:void 0,resource:void 0}}function KS(){return gn().memoizedState}function kf(u,m,C,I){var O=ti();I=I===void 0?null:I,hr.flags|=u,O.memoizedState=il(1|m,Sf(),C,I)}function Xc(u,m,C,I){var O=gn();I=I===void 0?null:I;var W=O.memoizedState.inst;Er!==null&&I!==null&&W0(I,Er.memoizedState.deps)?O.memoizedState=il(m,W,C,I):(hr.flags|=u,O.memoizedState=il(1|m,W,C,I))}function YS(u,m){kf(8390656,8,u,m)}function JS(u,m){Xc(2048,8,u,m)}function ZS(u,m){return Xc(4,2,u,m)}function XS(u,m){return Xc(4,4,u,m)}function QS(u,m){if(typeof m=="function"){u=u();var C=m(u);return function(){typeof C=="function"?C():m(null)}}if(m!=null)return u=u(),m.current=u,function(){m.current=null}}function e2(u,m,C){C=C!=null?C.concat([u]):null,Xc(4,4,QS.bind(null,m,u),C)}function rg(){}function t2(u,m){var C=gn();m=m===void 0?null:m;var I=C.memoizedState;return m!==null&&W0(m,I[1])?I[0]:(C.memoizedState=[u,m],u)}function r2(u,m){var C=gn();m=m===void 0?null:m;var I=C.memoizedState;if(m!==null&&W0(m,I[1]))return I[0];if(I=u(),ia){q(!0);try{u()}finally{q(!1)}}return C.memoizedState=[I,m],I}function ng(u,m,C){return C===void 0||(no&1073741824)!==0?u.memoizedState=m:(u.memoizedState=C,u=s6(),hr.lanes|=u,uo|=u,C)}function n2(u,m,C,I){return fi(C,m)?C:tl.current!==null?(u=ng(u,C,I),fi(u,m)||(kn=!0),u):(no&42)===0?(kn=!0,u.memoizedState=C):(u=s6(),hr.lanes|=u,uo|=u,m)}function i2(u,m,C,I,O){var W=M.p;M.p=W!==0&&8>W?W:8;var le=b.T,de={};b.T=de,og(u,!1,m,C);try{var Se=O(),We=b.S;if(We!==null&&We(de,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var at=mI(Se,I);Qc(u,m,at,yi(u))}else Qc(u,m,I,yi(u))}catch(ft){Qc(u,m,{then:function(){},status:"rejected",reason:ft},yi())}finally{M.p=W,b.T=le}}function wI(){}function ig(u,m,C,I){if(u.tag!==5)throw Error(n(476));var O=s2(u).queue;i2(u,O,m,R,C===null?wI:function(){return o2(u),C(I)})}function s2(u){var m=u.memoizedState;if(m!==null)return m;m={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:R},next:null};var C={};return m.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:C},next:null},u.memoizedState=m,u=u.alternate,u!==null&&(u.memoizedState=m),m}function o2(u){var m=s2(u).next.queue;Qc(u,m,{},yi())}function sg(){return Un(yu)}function a2(){return gn().memoizedState}function l2(){return gn().memoizedState}function _I(u){for(var m=u.return;m!==null;){switch(m.tag){case 24:case 3:var C=yi();u=to(C);var I=ro(m,u,C);I!==null&&(vi(I,m,C),Gc(I,m,C)),m={cache:P0()},u.payload=m;return}m=m.return}}function SI(u,m,C){var I=yi();C={lane:I,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null},jf(u)?u2(m,C):(C=j0(u,m,C,I),C!==null&&(vi(C,u,I),d2(C,m,I)))}function c2(u,m,C){var I=yi();Qc(u,m,C,I)}function Qc(u,m,C,I){var O={lane:I,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null};if(jf(u))u2(m,O);else{var W=u.alternate;if(u.lanes===0&&(W===null||W.lanes===0)&&(W=m.lastRenderedReducer,W!==null))try{var le=m.lastRenderedState,de=W(le,C);if(O.hasEagerState=!0,O.eagerState=de,fi(de,le))return lf(u,m,O,0),Or===null&&af(),!1}catch{}finally{}if(C=j0(u,m,O,I),C!==null)return vi(C,u,I),d2(C,m,I),!0}return!1}function og(u,m,C,I){if(I={lane:2,revertLane:Lg(),action:I,hasEagerState:!1,eagerState:null,next:null},jf(u)){if(m)throw Error(n(479))}else m=j0(u,C,I,2),m!==null&&vi(m,u,2)}function jf(u){var m=u.alternate;return u===hr||m!==null&&m===hr}function u2(u,m){rl=xf=!0;var C=u.pending;C===null?m.next=m:(m.next=C.next,C.next=m),u.pending=m}function d2(u,m,C){if((C&4194048)!==0){var I=m.lanes;I&=u.pendingLanes,C|=I,m.lanes=C,Pe(u,C)}}var Mf={readContext:Un,use:wf,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un},f2={readContext:Un,use:wf,useCallback:function(u,m){return ti().memoizedState=[u,m===void 0?null:m],u},useContext:Un,useEffect:YS,useImperativeHandle:function(u,m,C){C=C!=null?C.concat([u]):null,kf(4194308,4,QS.bind(null,m,u),C)},useLayoutEffect:function(u,m){return kf(4194308,4,u,m)},useInsertionEffect:function(u,m){kf(4,2,u,m)},useMemo:function(u,m){var C=ti();m=m===void 0?null:m;var I=u();if(ia){q(!0);try{u()}finally{q(!1)}}return C.memoizedState=[I,m],I},useReducer:function(u,m,C){var I=ti();if(C!==void 0){var O=C(m);if(ia){q(!0);try{C(m)}finally{q(!1)}}}else O=m;return I.memoizedState=I.baseState=O,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:O},I.queue=u,u=u.dispatch=SI.bind(null,hr,u),[I.memoizedState,u]},useRef:function(u){var m=ti();return u={current:u},m.memoizedState=u},useState:function(u){u=eg(u);var m=u.queue,C=c2.bind(null,hr,m);return m.dispatch=C,[u.memoizedState,C]},useDebugValue:rg,useDeferredValue:function(u,m){var C=ti();return ng(C,u,m)},useTransition:function(){var u=eg(!1);return u=i2.bind(null,hr,u.queue,!0,!1),ti().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,m,C){var I=hr,O=ti();if(Tr){if(C===void 0)throw Error(n(407));C=C()}else{if(C=m(),Or===null)throw Error(n(349));(Sr&124)!==0||zS(I,m,C)}O.memoizedState=C;var W={value:C,getSnapshot:m};return O.queue=W,YS(PS.bind(null,I,W,u),[u]),I.flags|=2048,il(9,Sf(),BS.bind(null,I,W,C,m),null),C},useId:function(){var u=ti(),m=Or.identifierPrefix;if(Tr){var C=As,I=Ts;C=(I&~(1<<32-V(I)-1)).toString(32)+C,m=""+m+"R"+C,C=bf++,0<C&&(m+="H"+C.toString(32)),m+=""}else C=yI++,m=""+m+"r"+C.toString(32)+"";return u.memoizedState=m},useHostTransitionStatus:sg,useFormState:HS,useActionState:HS,useOptimistic:function(u){var m=ti();m.memoizedState=m.baseState=u;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=C,m=og.bind(null,hr,!0,C),C.dispatch=m,[u,m]},useMemoCache:Z0,useCacheRefresh:function(){return ti().memoizedState=_I.bind(null,hr)}},h2={readContext:Un,use:wf,useCallback:t2,useContext:Un,useEffect:JS,useImperativeHandle:e2,useInsertionEffect:ZS,useLayoutEffect:XS,useMemo:r2,useReducer:_f,useRef:KS,useState:function(){return _f(Is)},useDebugValue:rg,useDeferredValue:function(u,m){var C=gn();return n2(C,Er.memoizedState,u,m)},useTransition:function(){var u=_f(Is)[0],m=gn().memoizedState;return[typeof u=="boolean"?u:Zc(u),m]},useSyncExternalStore:IS,useId:a2,useHostTransitionStatus:sg,useFormState:WS,useActionState:WS,useOptimistic:function(u,m){var C=gn();return LS(C,Er,u,m)},useMemoCache:Z0,useCacheRefresh:l2},kI={readContext:Un,use:wf,useCallback:t2,useContext:Un,useEffect:JS,useImperativeHandle:e2,useInsertionEffect:ZS,useLayoutEffect:XS,useMemo:r2,useReducer:Q0,useRef:KS,useState:function(){return Q0(Is)},useDebugValue:rg,useDeferredValue:function(u,m){var C=gn();return Er===null?ng(C,u,m):n2(C,Er.memoizedState,u,m)},useTransition:function(){var u=Q0(Is)[0],m=gn().memoizedState;return[typeof u=="boolean"?u:Zc(u),m]},useSyncExternalStore:IS,useId:a2,useHostTransitionStatus:sg,useFormState:GS,useActionState:GS,useOptimistic:function(u,m){var C=gn();return Er!==null?LS(C,Er,u,m):(C.baseState=u,[u,C.queue.dispatch])},useMemoCache:Z0,useCacheRefresh:l2},sl=null,eu=0;function Cf(u){var m=eu;return eu+=1,sl===null&&(sl=[]),kS(sl,u,m)}function tu(u,m){m=m.props.ref,u.ref=m!==void 0?m:null}function Tf(u,m){throw m.$$typeof===w?Error(n(525)):(u=Object.prototype.toString.call(m),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":u)))}function p2(u){var m=u._init;return m(u._payload)}function g2(u){function m(De,Ee){if(u){var He=De.deletions;He===null?(De.deletions=[Ee],De.flags|=16):He.push(Ee)}}function C(De,Ee){if(!u)return null;for(;Ee!==null;)m(De,Ee),Ee=Ee.sibling;return null}function I(De){for(var Ee=new Map;De!==null;)De.key!==null?Ee.set(De.key,De):Ee.set(De.index,De),De=De.sibling;return Ee}function O(De,Ee){return De=Cs(De,Ee),De.index=0,De.sibling=null,De}function W(De,Ee,He){return De.index=He,u?(He=De.alternate,He!==null?(He=He.index,He<Ee?(De.flags|=67108866,Ee):He):(De.flags|=67108866,Ee)):(De.flags|=1048576,Ee)}function le(De){return u&&De.alternate===null&&(De.flags|=67108866),De}function de(De,Ee,He,lt){return Ee===null||Ee.tag!==6?(Ee=C0(He,De.mode,lt),Ee.return=De,Ee):(Ee=O(Ee,He),Ee.return=De,Ee)}function Se(De,Ee,He,lt){var Dt=He.type;return Dt===A?at(De,Ee,He.props.children,lt,He.key):Ee!==null&&(Ee.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===Q&&p2(Dt)===Ee.type)?(Ee=O(Ee,He.props),tu(Ee,He),Ee.return=De,Ee):(Ee=uf(He.type,He.key,He.props,null,De.mode,lt),tu(Ee,He),Ee.return=De,Ee)}function We(De,Ee,He,lt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==He.containerInfo||Ee.stateNode.implementation!==He.implementation?(Ee=T0(He,De.mode,lt),Ee.return=De,Ee):(Ee=O(Ee,He.children||[]),Ee.return=De,Ee)}function at(De,Ee,He,lt,Dt){return Ee===null||Ee.tag!==7?(Ee=Jo(He,De.mode,lt,Dt),Ee.return=De,Ee):(Ee=O(Ee,He),Ee.return=De,Ee)}function ft(De,Ee,He){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=C0(""+Ee,De.mode,He),Ee.return=De,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case j:return He=uf(Ee.type,Ee.key,Ee.props,null,De.mode,He),tu(He,Ee),He.return=De,He;case _:return Ee=T0(Ee,De.mode,He),Ee.return=De,Ee;case Q:var lt=Ee._init;return Ee=lt(Ee._payload),ft(De,Ee,He)}if(v(Ee)||o(Ee))return Ee=Jo(Ee,De.mode,He,null),Ee.return=De,Ee;if(typeof Ee.then=="function")return ft(De,Cf(Ee),He);if(Ee.$$typeof===D)return ft(De,pf(De,Ee),He);Tf(De,Ee)}return null}function Ke(De,Ee,He,lt){var Dt=Ee!==null?Ee.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return Dt!==null?null:de(De,Ee,""+He,lt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case j:return He.key===Dt?Se(De,Ee,He,lt):null;case _:return He.key===Dt?We(De,Ee,He,lt):null;case Q:return Dt=He._init,He=Dt(He._payload),Ke(De,Ee,He,lt)}if(v(He)||o(He))return Dt!==null?null:at(De,Ee,He,lt,null);if(typeof He.then=="function")return Ke(De,Ee,Cf(He),lt);if(He.$$typeof===D)return Ke(De,Ee,pf(De,He),lt);Tf(De,He)}return null}function et(De,Ee,He,lt,Dt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return De=De.get(He)||null,de(Ee,De,""+lt,Dt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case j:return De=De.get(lt.key===null?He:lt.key)||null,Se(Ee,De,lt,Dt);case _:return De=De.get(lt.key===null?He:lt.key)||null,We(Ee,De,lt,Dt);case Q:var pr=lt._init;return lt=pr(lt._payload),et(De,Ee,He,lt,Dt)}if(v(lt)||o(lt))return De=De.get(He)||null,at(Ee,De,lt,Dt,null);if(typeof lt.then=="function")return et(De,Ee,He,Cf(lt),Dt);if(lt.$$typeof===D)return et(De,Ee,He,pf(Ee,lt),Dt);Tf(Ee,lt)}return null}function Jt(De,Ee,He,lt){for(var Dt=null,pr=null,$t=Ee,Gt=Ee=0,Mn=null;$t!==null&&Gt<He.length;Gt++){$t.index>Gt?(Mn=$t,$t=null):Mn=$t.sibling;var Mr=Ke(De,$t,He[Gt],lt);if(Mr===null){$t===null&&($t=Mn);break}u&&$t&&Mr.alternate===null&&m(De,$t),Ee=W(Mr,Ee,Gt),pr===null?Dt=Mr:pr.sibling=Mr,pr=Mr,$t=Mn}if(Gt===He.length)return C(De,$t),Tr&&Xo(De,Gt),Dt;if($t===null){for(;Gt<He.length;Gt++)$t=ft(De,He[Gt],lt),$t!==null&&(Ee=W($t,Ee,Gt),pr===null?Dt=$t:pr.sibling=$t,pr=$t);return Tr&&Xo(De,Gt),Dt}for($t=I($t);Gt<He.length;Gt++)Mn=et($t,De,Gt,He[Gt],lt),Mn!==null&&(u&&Mn.alternate!==null&&$t.delete(Mn.key===null?Gt:Mn.key),Ee=W(Mn,Ee,Gt),pr===null?Dt=Mn:pr.sibling=Mn,pr=Mn);return u&&$t.forEach(function(bo){return m(De,bo)}),Tr&&Xo(De,Gt),Dt}function Wt(De,Ee,He,lt){if(He==null)throw Error(n(151));for(var Dt=null,pr=null,$t=Ee,Gt=Ee=0,Mn=null,Mr=He.next();$t!==null&&!Mr.done;Gt++,Mr=He.next()){$t.index>Gt?(Mn=$t,$t=null):Mn=$t.sibling;var bo=Ke(De,$t,Mr.value,lt);if(bo===null){$t===null&&($t=Mn);break}u&&$t&&bo.alternate===null&&m(De,$t),Ee=W(bo,Ee,Gt),pr===null?Dt=bo:pr.sibling=bo,pr=bo,$t=Mn}if(Mr.done)return C(De,$t),Tr&&Xo(De,Gt),Dt;if($t===null){for(;!Mr.done;Gt++,Mr=He.next())Mr=ft(De,Mr.value,lt),Mr!==null&&(Ee=W(Mr,Ee,Gt),pr===null?Dt=Mr:pr.sibling=Mr,pr=Mr);return Tr&&Xo(De,Gt),Dt}for($t=I($t);!Mr.done;Gt++,Mr=He.next())Mr=et($t,De,Gt,Mr.value,lt),Mr!==null&&(u&&Mr.alternate!==null&&$t.delete(Mr.key===null?Gt:Mr.key),Ee=W(Mr,Ee,Gt),pr===null?Dt=Mr:pr.sibling=Mr,pr=Mr);return u&&$t.forEach(function(jz){return m(De,jz)}),Tr&&Xo(De,Gt),Dt}function zr(De,Ee,He,lt){if(typeof He=="object"&&He!==null&&He.type===A&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case j:e:{for(var Dt=He.key;Ee!==null;){if(Ee.key===Dt){if(Dt=He.type,Dt===A){if(Ee.tag===7){C(De,Ee.sibling),lt=O(Ee,He.props.children),lt.return=De,De=lt;break e}}else if(Ee.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===Q&&p2(Dt)===Ee.type){C(De,Ee.sibling),lt=O(Ee,He.props),tu(lt,He),lt.return=De,De=lt;break e}C(De,Ee);break}else m(De,Ee);Ee=Ee.sibling}He.type===A?(lt=Jo(He.props.children,De.mode,lt,He.key),lt.return=De,De=lt):(lt=uf(He.type,He.key,He.props,null,De.mode,lt),tu(lt,He),lt.return=De,De=lt)}return le(De);case _:e:{for(Dt=He.key;Ee!==null;){if(Ee.key===Dt)if(Ee.tag===4&&Ee.stateNode.containerInfo===He.containerInfo&&Ee.stateNode.implementation===He.implementation){C(De,Ee.sibling),lt=O(Ee,He.children||[]),lt.return=De,De=lt;break e}else{C(De,Ee);break}else m(De,Ee);Ee=Ee.sibling}lt=T0(He,De.mode,lt),lt.return=De,De=lt}return le(De);case Q:return Dt=He._init,He=Dt(He._payload),zr(De,Ee,He,lt)}if(v(He))return Jt(De,Ee,He,lt);if(o(He)){if(Dt=o(He),typeof Dt!="function")throw Error(n(150));return He=Dt.call(He),Wt(De,Ee,He,lt)}if(typeof He.then=="function")return zr(De,Ee,Cf(He),lt);if(He.$$typeof===D)return zr(De,Ee,pf(De,He),lt);Tf(De,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Ee!==null&&Ee.tag===6?(C(De,Ee.sibling),lt=O(Ee,He),lt.return=De,De=lt):(C(De,Ee),lt=C0(He,De.mode,lt),lt.return=De,De=lt),le(De)):C(De,Ee)}return function(De,Ee,He,lt){try{eu=0;var Dt=zr(De,Ee,He,lt);return sl=null,Dt}catch($t){if($t===Wc||$t===mf)throw $t;var pr=hi(29,$t,null,De.mode);return pr.lanes=lt,pr.return=De,pr}finally{}}}var ol=g2(!0),m2=g2(!1),zi=k(null),ls=null;function io(u){var m=u.alternate;L(bn,bn.current&1),L(zi,u),ls===null&&(m===null||tl.current!==null||m.memoizedState!==null)&&(ls=u)}function y2(u){if(u.tag===22){if(L(bn,bn.current),L(zi,u),ls===null){var m=u.alternate;m!==null&&m.memoizedState!==null&&(ls=u)}}else so()}function so(){L(bn,bn.current),L(zi,zi.current)}function zs(u){N(zi),ls===u&&(ls=null),N(bn)}var bn=k(0);function Af(u){for(var m=u;m!==null;){if(m.tag===13){var C=m.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||Jg(C)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function ag(u,m,C,I){m=u.memoizedState,C=C(I,m),C=C==null?m:y({},m,C),u.memoizedState=C,u.lanes===0&&(u.updateQueue.baseState=C)}var lg={enqueueSetState:function(u,m,C){u=u._reactInternals;var I=yi(),O=to(I);O.payload=m,C!=null&&(O.callback=C),m=ro(u,O,I),m!==null&&(vi(m,u,I),Gc(m,u,I))},enqueueReplaceState:function(u,m,C){u=u._reactInternals;var I=yi(),O=to(I);O.tag=1,O.payload=m,C!=null&&(O.callback=C),m=ro(u,O,I),m!==null&&(vi(m,u,I),Gc(m,u,I))},enqueueForceUpdate:function(u,m){u=u._reactInternals;var C=yi(),I=to(C);I.tag=2,m!=null&&(I.callback=m),m=ro(u,I,C),m!==null&&(vi(m,u,C),Gc(m,u,C))}};function v2(u,m,C,I,O,W,le){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(I,W,le):m.prototype&&m.prototype.isPureReactComponent?!Dc(C,I)||!Dc(O,W):!0}function x2(u,m,C,I){u=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(C,I),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(C,I),m.state!==u&&lg.enqueueReplaceState(m,m.state,null)}function sa(u,m){var C=m;if("ref"in m){C={};for(var I in m)I!=="ref"&&(C[I]=m[I])}if(u=u.defaultProps){C===m&&(C=y({},C));for(var O in u)C[O]===void 0&&(C[O]=u[O])}return C}var Rf=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function b2(u){Rf(u)}function w2(u){console.error(u)}function _2(u){Rf(u)}function Ef(u,m){try{var C=u.onUncaughtError;C(m.value,{componentStack:m.stack})}catch(I){setTimeout(function(){throw I})}}function S2(u,m,C){try{var I=u.onCaughtError;I(C.value,{componentStack:C.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function cg(u,m,C){return C=to(C),C.tag=3,C.payload={element:null},C.callback=function(){Ef(u,m)},C}function k2(u){return u=to(u),u.tag=3,u}function j2(u,m,C,I){var O=C.type.getDerivedStateFromError;if(typeof O=="function"){var W=I.value;u.payload=function(){return O(W)},u.callback=function(){S2(m,C,I)}}var le=C.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(u.callback=function(){S2(m,C,I),typeof O!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var de=I.stack;this.componentDidCatch(I.value,{componentStack:de!==null?de:""})})}function jI(u,m,C,I,O){if(C.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(m=C.alternate,m!==null&&$c(m,C,O,!0),C=zi.current,C!==null){switch(C.tag){case 13:return ls===null?zg():C.alternate===null&&rn===0&&(rn=3),C.flags&=-257,C.flags|=65536,C.lanes=O,I===L0?C.flags|=16384:(m=C.updateQueue,m===null?C.updateQueue=new Set([I]):m.add(I),Pg(u,I,O)),!1;case 22:return C.flags|=65536,I===L0?C.flags|=16384:(m=C.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([I])},C.updateQueue=m):(C=m.retryQueue,C===null?m.retryQueue=new Set([I]):C.add(I)),Pg(u,I,O)),!1}throw Error(n(435,C.tag))}return Pg(u,I,O),zg(),!1}if(Tr)return m=zi.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=O,I!==E0&&(u=Error(n(422),{cause:I}),Uc(Ai(u,C)))):(I!==E0&&(m=Error(n(423),{cause:I}),Uc(Ai(m,C))),u=u.current.alternate,u.flags|=65536,O&=-O,u.lanes|=O,I=Ai(I,C),O=cg(u.stateNode,I,O),U0(u,O),rn!==4&&(rn=2)),!1;var W=Error(n(520),{cause:I});if(W=Ai(W,C),lu===null?lu=[W]:lu.push(W),rn!==4&&(rn=2),m===null)return!0;I=Ai(I,C),C=m;do{switch(C.tag){case 3:return C.flags|=65536,u=O&-O,C.lanes|=u,u=cg(C.stateNode,I,u),U0(C,u),!1;case 1:if(m=C.type,W=C.stateNode,(C.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(fo===null||!fo.has(W))))return C.flags|=65536,O&=-O,C.lanes|=O,O=k2(O),j2(O,u,C,I),U0(C,O),!1}C=C.return}while(C!==null);return!1}var M2=Error(n(461)),kn=!1;function Bn(u,m,C,I){m.child=u===null?m2(m,null,C,I):ol(m,u.child,C,I)}function C2(u,m,C,I,O){C=C.render;var W=m.ref;if("ref"in I){var le={};for(var de in I)de!=="ref"&&(le[de]=I[de])}else le=I;return ra(m),I=V0(u,m,C,le,W,O),de=G0(),u!==null&&!kn?(K0(u,m,O),Bs(u,m,O)):(Tr&&de&&A0(m),m.flags|=1,Bn(u,m,I,O),m.child)}function T2(u,m,C,I,O){if(u===null){var W=C.type;return typeof W=="function"&&!M0(W)&&W.defaultProps===void 0&&C.compare===null?(m.tag=15,m.type=W,A2(u,m,W,I,O)):(u=uf(C.type,null,I,m,m.mode,O),u.ref=m.ref,u.return=m,m.child=u)}if(W=u.child,!yg(u,O)){var le=W.memoizedProps;if(C=C.compare,C=C!==null?C:Dc,C(le,I)&&u.ref===m.ref)return Bs(u,m,O)}return m.flags|=1,u=Cs(W,I),u.ref=m.ref,u.return=m,m.child=u}function A2(u,m,C,I,O){if(u!==null){var W=u.memoizedProps;if(Dc(W,I)&&u.ref===m.ref)if(kn=!1,m.pendingProps=I=W,yg(u,O))(u.flags&131072)!==0&&(kn=!0);else return m.lanes=u.lanes,Bs(u,m,O)}return ug(u,m,C,I,O)}function R2(u,m,C){var I=m.pendingProps,O=I.children,W=u!==null?u.memoizedState:null;if(I.mode==="hidden"){if((m.flags&128)!==0){if(I=W!==null?W.baseLanes|C:C,u!==null){for(O=m.child=u.child,W=0;O!==null;)W=W|O.lanes|O.childLanes,O=O.sibling;m.childLanes=W&~I}else m.childLanes=0,m.child=null;return E2(u,m,I,C)}if((C&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},u!==null&&gf(m,W!==null?W.cachePool:null),W!==null?AS(m,W):q0(),y2(m);else return m.lanes=m.childLanes=536870912,E2(u,m,W!==null?W.baseLanes|C:C,C)}else W!==null?(gf(m,W.cachePool),AS(m,W),so(),m.memoizedState=null):(u!==null&&gf(m,null),q0(),so());return Bn(u,m,O,C),m.child}function E2(u,m,C,I){var O=D0();return O=O===null?null:{parent:xn._currentValue,pool:O},m.memoizedState={baseLanes:C,cachePool:O},u!==null&&gf(m,null),q0(),y2(m),u!==null&&$c(u,m,I,!0),null}function If(u,m){var C=m.ref;if(C===null)u!==null&&u.ref!==null&&(m.flags|=4194816);else{if(typeof C!="function"&&typeof C!="object")throw Error(n(284));(u===null||u.ref!==C)&&(m.flags|=4194816)}}function ug(u,m,C,I,O){return ra(m),C=V0(u,m,C,I,void 0,O),I=G0(),u!==null&&!kn?(K0(u,m,O),Bs(u,m,O)):(Tr&&I&&A0(m),m.flags|=1,Bn(u,m,C,O),m.child)}function I2(u,m,C,I,O,W){return ra(m),m.updateQueue=null,C=ES(m,I,C,O),RS(u),I=G0(),u!==null&&!kn?(K0(u,m,W),Bs(u,m,W)):(Tr&&I&&A0(m),m.flags|=1,Bn(u,m,C,W),m.child)}function z2(u,m,C,I,O){if(ra(m),m.stateNode===null){var W=Ja,le=C.contextType;typeof le=="object"&&le!==null&&(W=Un(le)),W=new C(I,W),m.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=lg,m.stateNode=W,W._reactInternals=m,W=m.stateNode,W.props=I,W.state=m.memoizedState,W.refs={},O0(m),le=C.contextType,W.context=typeof le=="object"&&le!==null?Un(le):Ja,W.state=m.memoizedState,le=C.getDerivedStateFromProps,typeof le=="function"&&(ag(m,C,le,I),W.state=m.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(le=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),le!==W.state&&lg.enqueueReplaceState(W,W.state,null),Yc(m,I,W,O),Kc(),W.state=m.memoizedState),typeof W.componentDidMount=="function"&&(m.flags|=4194308),I=!0}else if(u===null){W=m.stateNode;var de=m.memoizedProps,Se=sa(C,de);W.props=Se;var We=W.context,at=C.contextType;le=Ja,typeof at=="object"&&at!==null&&(le=Un(at));var ft=C.getDerivedStateFromProps;at=typeof ft=="function"||typeof W.getSnapshotBeforeUpdate=="function",de=m.pendingProps!==de,at||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de||We!==le)&&x2(m,W,I,le),eo=!1;var Ke=m.memoizedState;W.state=Ke,Yc(m,I,W,O),Kc(),We=m.memoizedState,de||Ke!==We||eo?(typeof ft=="function"&&(ag(m,C,ft,I),We=m.memoizedState),(Se=eo||v2(m,C,Se,I,Ke,We,le))?(at||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(m.flags|=4194308)):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=I,m.memoizedState=We),W.props=I,W.state=We,W.context=le,I=Se):(typeof W.componentDidMount=="function"&&(m.flags|=4194308),I=!1)}else{W=m.stateNode,F0(u,m),le=m.memoizedProps,at=sa(C,le),W.props=at,ft=m.pendingProps,Ke=W.context,We=C.contextType,Se=Ja,typeof We=="object"&&We!==null&&(Se=Un(We)),de=C.getDerivedStateFromProps,(We=typeof de=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(le!==ft||Ke!==Se)&&x2(m,W,I,Se),eo=!1,Ke=m.memoizedState,W.state=Ke,Yc(m,I,W,O),Kc();var et=m.memoizedState;le!==ft||Ke!==et||eo||u!==null&&u.dependencies!==null&&hf(u.dependencies)?(typeof de=="function"&&(ag(m,C,de,I),et=m.memoizedState),(at=eo||v2(m,C,at,I,Ke,et,Se)||u!==null&&u.dependencies!==null&&hf(u.dependencies))?(We||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(I,et,Se),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(I,et,Se)),typeof W.componentDidUpdate=="function"&&(m.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof W.componentDidUpdate!="function"||le===u.memoizedProps&&Ke===u.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===u.memoizedProps&&Ke===u.memoizedState||(m.flags|=1024),m.memoizedProps=I,m.memoizedState=et),W.props=I,W.state=et,W.context=Se,I=at):(typeof W.componentDidUpdate!="function"||le===u.memoizedProps&&Ke===u.memoizedState||(m.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||le===u.memoizedProps&&Ke===u.memoizedState||(m.flags|=1024),I=!1)}return W=I,If(u,m),I=(m.flags&128)!==0,W||I?(W=m.stateNode,C=I&&typeof C.getDerivedStateFromError!="function"?null:W.render(),m.flags|=1,u!==null&&I?(m.child=ol(m,u.child,null,O),m.child=ol(m,null,C,O)):Bn(u,m,C,O),m.memoizedState=W.state,u=m.child):u=Bs(u,m,O),u}function B2(u,m,C,I){return Fc(),m.flags|=256,Bn(u,m,C,I),m.child}var dg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fg(u){return{baseLanes:u,cachePool:wS()}}function hg(u,m,C){return u=u!==null?u.childLanes&~C:0,m&&(u|=Bi),u}function P2(u,m,C){var I=m.pendingProps,O=!1,W=(m.flags&128)!==0,le;if((le=W)||(le=u!==null&&u.memoizedState===null?!1:(bn.current&2)!==0),le&&(O=!0,m.flags&=-129),le=(m.flags&32)!==0,m.flags&=-33,u===null){if(Tr){if(O?io(m):so(),Tr){var de=tn,Se;if(Se=de){e:{for(Se=de,de=as;Se.nodeType!==8;){if(!de){de=null;break e}if(Se=ts(Se.nextSibling),Se===null){de=null;break e}}de=Se}de!==null?(m.memoizedState={dehydrated:de,treeContext:Zo!==null?{id:Ts,overflow:As}:null,retryLane:536870912,hydrationErrors:null},Se=hi(18,null,null,0),Se.stateNode=de,Se.return=m,m.child=Se,Yn=m,tn=null,Se=!0):Se=!1}Se||ea(m)}if(de=m.memoizedState,de!==null&&(de=de.dehydrated,de!==null))return Jg(de)?m.lanes=32:m.lanes=536870912,null;zs(m)}return de=I.children,I=I.fallback,O?(so(),O=m.mode,de=zf({mode:"hidden",children:de},O),I=Jo(I,O,C,null),de.return=m,I.return=m,de.sibling=I,m.child=de,O=m.child,O.memoizedState=fg(C),O.childLanes=hg(u,le,C),m.memoizedState=dg,I):(io(m),pg(m,de))}if(Se=u.memoizedState,Se!==null&&(de=Se.dehydrated,de!==null)){if(W)m.flags&256?(io(m),m.flags&=-257,m=gg(u,m,C)):m.memoizedState!==null?(so(),m.child=u.child,m.flags|=128,m=null):(so(),O=I.fallback,de=m.mode,I=zf({mode:"visible",children:I.children},de),O=Jo(O,de,C,null),O.flags|=2,I.return=m,O.return=m,I.sibling=O,m.child=I,ol(m,u.child,null,C),I=m.child,I.memoizedState=fg(C),I.childLanes=hg(u,le,C),m.memoizedState=dg,m=O);else if(io(m),Jg(de)){if(le=de.nextSibling&&de.nextSibling.dataset,le)var We=le.dgst;le=We,I=Error(n(419)),I.stack="",I.digest=le,Uc({value:I,source:null,stack:null}),m=gg(u,m,C)}else if(kn||$c(u,m,C,!1),le=(C&u.childLanes)!==0,kn||le){if(le=Or,le!==null&&(I=C&-C,I=(I&42)!==0?1:Ve(I),I=(I&(le.suspendedLanes|C))!==0?0:I,I!==0&&I!==Se.retryLane))throw Se.retryLane=I,Ya(u,I),vi(le,u,I),M2;de.data==="$?"||zg(),m=gg(u,m,C)}else de.data==="$?"?(m.flags|=192,m.child=u.child,m=null):(u=Se.treeContext,tn=ts(de.nextSibling),Yn=m,Tr=!0,Qo=null,as=!1,u!==null&&(Ei[Ii++]=Ts,Ei[Ii++]=As,Ei[Ii++]=Zo,Ts=u.id,As=u.overflow,Zo=m),m=pg(m,I.children),m.flags|=4096);return m}return O?(so(),O=I.fallback,de=m.mode,Se=u.child,We=Se.sibling,I=Cs(Se,{mode:"hidden",children:I.children}),I.subtreeFlags=Se.subtreeFlags&65011712,We!==null?O=Cs(We,O):(O=Jo(O,de,C,null),O.flags|=2),O.return=m,I.return=m,I.sibling=O,m.child=I,I=O,O=m.child,de=u.child.memoizedState,de===null?de=fg(C):(Se=de.cachePool,Se!==null?(We=xn._currentValue,Se=Se.parent!==We?{parent:We,pool:We}:Se):Se=wS(),de={baseLanes:de.baseLanes|C,cachePool:Se}),O.memoizedState=de,O.childLanes=hg(u,le,C),m.memoizedState=dg,I):(io(m),C=u.child,u=C.sibling,C=Cs(C,{mode:"visible",children:I.children}),C.return=m,C.sibling=null,u!==null&&(le=m.deletions,le===null?(m.deletions=[u],m.flags|=16):le.push(u)),m.child=C,m.memoizedState=null,C)}function pg(u,m){return m=zf({mode:"visible",children:m},u.mode),m.return=u,u.child=m}function zf(u,m){return u=hi(22,u,null,m),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function gg(u,m,C){return ol(m,u.child,null,C),u=pg(m,m.pendingProps.children),u.flags|=2,m.memoizedState=null,u}function N2(u,m,C){u.lanes|=m;var I=u.alternate;I!==null&&(I.lanes|=m),z0(u.return,m,C)}function mg(u,m,C,I,O){var W=u.memoizedState;W===null?u.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:I,tail:C,tailMode:O}:(W.isBackwards=m,W.rendering=null,W.renderingStartTime=0,W.last=I,W.tail=C,W.tailMode=O)}function D2(u,m,C){var I=m.pendingProps,O=I.revealOrder,W=I.tail;if(Bn(u,m,I.children,C),I=bn.current,(I&2)!==0)I=I&1|2,m.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=m.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&N2(u,C,m);else if(u.tag===19)N2(u,C,m);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===m)break e;for(;u.sibling===null;){if(u.return===null||u.return===m)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}I&=1}switch(L(bn,I),O){case"forwards":for(C=m.child,O=null;C!==null;)u=C.alternate,u!==null&&Af(u)===null&&(O=C),C=C.sibling;C=O,C===null?(O=m.child,m.child=null):(O=C.sibling,C.sibling=null),mg(m,!1,O,C,W);break;case"backwards":for(C=null,O=m.child,m.child=null;O!==null;){if(u=O.alternate,u!==null&&Af(u)===null){m.child=O;break}u=O.sibling,O.sibling=C,C=O,O=u}mg(m,!0,C,null,W);break;case"together":mg(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Bs(u,m,C){if(u!==null&&(m.dependencies=u.dependencies),uo|=m.lanes,(C&m.childLanes)===0)if(u!==null){if($c(u,m,C,!1),(C&m.childLanes)===0)return null}else return null;if(u!==null&&m.child!==u.child)throw Error(n(153));if(m.child!==null){for(u=m.child,C=Cs(u,u.pendingProps),m.child=C,C.return=m;u.sibling!==null;)u=u.sibling,C=C.sibling=Cs(u,u.pendingProps),C.return=m;C.sibling=null}return m.child}function yg(u,m){return(u.lanes&m)!==0?!0:(u=u.dependencies,!!(u!==null&&hf(u)))}function MI(u,m,C){switch(m.tag){case 3:J(m,m.stateNode.containerInfo),Qs(m,xn,u.memoizedState.cache),Fc();break;case 27:case 5:oe(m);break;case 4:J(m,m.stateNode.containerInfo);break;case 10:Qs(m,m.type,m.memoizedProps.value);break;case 13:var I=m.memoizedState;if(I!==null)return I.dehydrated!==null?(io(m),m.flags|=128,null):(C&m.child.childLanes)!==0?P2(u,m,C):(io(m),u=Bs(u,m,C),u!==null?u.sibling:null);io(m);break;case 19:var O=(u.flags&128)!==0;if(I=(C&m.childLanes)!==0,I||($c(u,m,C,!1),I=(C&m.childLanes)!==0),O){if(I)return D2(u,m,C);m.flags|=128}if(O=m.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),L(bn,bn.current),I)break;return null;case 22:case 23:return m.lanes=0,R2(u,m,C);case 24:Qs(m,xn,u.memoizedState.cache)}return Bs(u,m,C)}function L2(u,m,C){if(u!==null)if(u.memoizedProps!==m.pendingProps)kn=!0;else{if(!yg(u,C)&&(m.flags&128)===0)return kn=!1,MI(u,m,C);kn=(u.flags&131072)!==0}else kn=!1,Tr&&(m.flags&1048576)!==0&&pS(m,ff,m.index);switch(m.lanes=0,m.tag){case 16:e:{u=m.pendingProps;var I=m.elementType,O=I._init;if(I=O(I._payload),m.type=I,typeof I=="function")M0(I)?(u=sa(I,u),m.tag=1,m=z2(null,m,I,u,C)):(m.tag=0,m=ug(null,m,I,u,C));else{if(I!=null){if(O=I.$$typeof,O===U){m.tag=11,m=C2(null,m,I,u,C);break e}else if(O===re){m.tag=14,m=T2(null,m,I,u,C);break e}}throw m=h(I)||I,Error(n(306,m,""))}}return m;case 0:return ug(u,m,m.type,m.pendingProps,C);case 1:return I=m.type,O=sa(I,m.pendingProps),z2(u,m,I,O,C);case 3:e:{if(J(m,m.stateNode.containerInfo),u===null)throw Error(n(387));I=m.pendingProps;var W=m.memoizedState;O=W.element,F0(u,m),Yc(m,I,null,C);var le=m.memoizedState;if(I=le.cache,Qs(m,xn,I),I!==W.cache&&B0(m,[xn],C,!0),Kc(),I=le.element,W.isDehydrated)if(W={element:I,isDehydrated:!1,cache:le.cache},m.updateQueue.baseState=W,m.memoizedState=W,m.flags&256){m=B2(u,m,I,C);break e}else if(I!==O){O=Ai(Error(n(424)),m),Uc(O),m=B2(u,m,I,C);break e}else{switch(u=m.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(tn=ts(u.firstChild),Yn=m,Tr=!0,Qo=null,as=!0,C=m2(m,null,I,C),m.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling}else{if(Fc(),I===O){m=Bs(u,m,C);break e}Bn(u,m,I,C)}m=m.child}return m;case 26:return If(u,m),u===null?(C=$6(m.type,null,m.pendingProps,null))?m.memoizedState=C:Tr||(C=m.type,u=m.pendingProps,I=Gf(te.current).createElement(C),I[Be]=m,I[Ue]=u,Nn(I,C,u),wt(I),m.stateNode=I):m.memoizedState=$6(m.type,u.memoizedProps,m.pendingProps,u.memoizedState),null;case 27:return oe(m),u===null&&Tr&&(I=m.stateNode=O6(m.type,m.pendingProps,te.current),Yn=m,as=!0,O=tn,go(m.type)?(Zg=O,tn=ts(I.firstChild)):tn=O),Bn(u,m,m.pendingProps.children,C),If(u,m),u===null&&(m.flags|=4194304),m.child;case 5:return u===null&&Tr&&((O=I=tn)&&(I=ez(I,m.type,m.pendingProps,as),I!==null?(m.stateNode=I,Yn=m,tn=ts(I.firstChild),as=!1,O=!0):O=!1),O||ea(m)),oe(m),O=m.type,W=m.pendingProps,le=u!==null?u.memoizedProps:null,I=W.children,Gg(O,W)?I=null:le!==null&&Gg(O,le)&&(m.flags|=32),m.memoizedState!==null&&(O=V0(u,m,vI,null,null,C),yu._currentValue=O),If(u,m),Bn(u,m,I,C),m.child;case 6:return u===null&&Tr&&((u=C=tn)&&(C=tz(C,m.pendingProps,as),C!==null?(m.stateNode=C,Yn=m,tn=null,u=!0):u=!1),u||ea(m)),null;case 13:return P2(u,m,C);case 4:return J(m,m.stateNode.containerInfo),I=m.pendingProps,u===null?m.child=ol(m,null,I,C):Bn(u,m,I,C),m.child;case 11:return C2(u,m,m.type,m.pendingProps,C);case 7:return Bn(u,m,m.pendingProps,C),m.child;case 8:return Bn(u,m,m.pendingProps.children,C),m.child;case 12:return Bn(u,m,m.pendingProps.children,C),m.child;case 10:return I=m.pendingProps,Qs(m,m.type,I.value),Bn(u,m,I.children,C),m.child;case 9:return O=m.type._context,I=m.pendingProps.children,ra(m),O=Un(O),I=I(O),m.flags|=1,Bn(u,m,I,C),m.child;case 14:return T2(u,m,m.type,m.pendingProps,C);case 15:return A2(u,m,m.type,m.pendingProps,C);case 19:return D2(u,m,C);case 31:return I=m.pendingProps,C=m.mode,I={mode:I.mode,children:I.children},u===null?(C=zf(I,C),C.ref=m.ref,m.child=C,C.return=m,m=C):(C=Cs(u.child,I),C.ref=m.ref,m.child=C,C.return=m,m=C),m;case 22:return R2(u,m,C);case 24:return ra(m),I=Un(xn),u===null?(O=D0(),O===null&&(O=Or,W=P0(),O.pooledCache=W,W.refCount++,W!==null&&(O.pooledCacheLanes|=C),O=W),m.memoizedState={parent:I,cache:O},O0(m),Qs(m,xn,O)):((u.lanes&C)!==0&&(F0(u,m),Yc(m,null,null,C),Kc()),O=u.memoizedState,W=m.memoizedState,O.parent!==I?(O={parent:I,cache:I},m.memoizedState=O,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=O),Qs(m,xn,I)):(I=W.cache,Qs(m,xn,I),I!==O.cache&&B0(m,[xn],C,!0))),Bn(u,m,m.pendingProps.children,C),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function Ps(u){u.flags|=4}function O2(u,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!G6(m)){if(m=zi.current,m!==null&&((Sr&4194048)===Sr?ls!==null:(Sr&62914560)!==Sr&&(Sr&536870912)===0||m!==ls))throw Vc=L0,_S;u.flags|=8192}}function Bf(u,m){m!==null&&(u.flags|=4),u.flags&16384&&(m=u.tag!==22?Ge():536870912,u.lanes|=m,ul|=m)}function ru(u,m){if(!Tr)switch(u.tailMode){case"hidden":m=u.tail;for(var C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?u.tail=null:C.sibling=null;break;case"collapsed":C=u.tail;for(var I=null;C!==null;)C.alternate!==null&&(I=C),C=C.sibling;I===null?m||u.tail===null?u.tail=null:u.tail.sibling=null:I.sibling=null}}function Zr(u){var m=u.alternate!==null&&u.alternate.child===u.child,C=0,I=0;if(m)for(var O=u.child;O!==null;)C|=O.lanes|O.childLanes,I|=O.subtreeFlags&65011712,I|=O.flags&65011712,O.return=u,O=O.sibling;else for(O=u.child;O!==null;)C|=O.lanes|O.childLanes,I|=O.subtreeFlags,I|=O.flags,O.return=u,O=O.sibling;return u.subtreeFlags|=I,u.childLanes=C,m}function CI(u,m,C){var I=m.pendingProps;switch(R0(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(m),null;case 1:return Zr(m),null;case 3:return C=m.stateNode,I=null,u!==null&&(I=u.memoizedState.cache),m.memoizedState.cache!==I&&(m.flags|=2048),Es(xn),ne(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(u===null||u.child===null)&&(Oc(m)?Ps(m):u===null||u.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,yS())),Zr(m),null;case 26:return C=m.memoizedState,u===null?(Ps(m),C!==null?(Zr(m),O2(m,C)):(Zr(m),m.flags&=-16777217)):C?C!==u.memoizedState?(Ps(m),Zr(m),O2(m,C)):(Zr(m),m.flags&=-16777217):(u.memoizedProps!==I&&Ps(m),Zr(m),m.flags&=-16777217),null;case 27:ae(m),C=te.current;var O=m.type;if(u!==null&&m.stateNode!=null)u.memoizedProps!==I&&Ps(m);else{if(!I){if(m.stateNode===null)throw Error(n(166));return Zr(m),null}u=X.current,Oc(m)?gS(m):(u=O6(O,I,C),m.stateNode=u,Ps(m))}return Zr(m),null;case 5:if(ae(m),C=m.type,u!==null&&m.stateNode!=null)u.memoizedProps!==I&&Ps(m);else{if(!I){if(m.stateNode===null)throw Error(n(166));return Zr(m),null}if(u=X.current,Oc(m))gS(m);else{switch(O=Gf(te.current),u){case 1:u=O.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:u=O.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":u=O.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":u=O.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":u=O.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof I.is=="string"?O.createElement("select",{is:I.is}):O.createElement("select"),I.multiple?u.multiple=!0:I.size&&(u.size=I.size);break;default:u=typeof I.is=="string"?O.createElement(C,{is:I.is}):O.createElement(C)}}u[Be]=m,u[Ue]=I;e:for(O=m.child;O!==null;){if(O.tag===5||O.tag===6)u.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===m)break e;for(;O.sibling===null;){if(O.return===null||O.return===m)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}m.stateNode=u;e:switch(Nn(u,C,I),C){case"button":case"input":case"select":case"textarea":u=!!I.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ps(m)}}return Zr(m),m.flags&=-16777217,null;case 6:if(u&&m.stateNode!=null)u.memoizedProps!==I&&Ps(m);else{if(typeof I!="string"&&m.stateNode===null)throw Error(n(166));if(u=te.current,Oc(m)){if(u=m.stateNode,C=m.memoizedProps,I=null,O=Yn,O!==null)switch(O.tag){case 27:case 5:I=O.memoizedProps}u[Be]=m,u=!!(u.nodeValue===C||I!==null&&I.suppressHydrationWarning===!0||I6(u.nodeValue,C)),u||ea(m)}else u=Gf(u).createTextNode(I),u[Be]=m,m.stateNode=u}return Zr(m),null;case 13:if(I=m.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(O=Oc(m),I!==null&&I.dehydrated!==null){if(u===null){if(!O)throw Error(n(318));if(O=m.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(n(317));O[Be]=m}else Fc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Zr(m),O=!1}else O=yS(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=O),O=!0;if(!O)return m.flags&256?(zs(m),m):(zs(m),null)}if(zs(m),(m.flags&128)!==0)return m.lanes=C,m;if(C=I!==null,u=u!==null&&u.memoizedState!==null,C){I=m.child,O=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(O=I.alternate.memoizedState.cachePool.pool);var W=null;I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(W=I.memoizedState.cachePool.pool),W!==O&&(I.flags|=2048)}return C!==u&&C&&(m.child.flags|=8192),Bf(m,m.updateQueue),Zr(m),null;case 4:return ne(),u===null&&$g(m.stateNode.containerInfo),Zr(m),null;case 10:return Es(m.type),Zr(m),null;case 19:if(N(bn),O=m.memoizedState,O===null)return Zr(m),null;if(I=(m.flags&128)!==0,W=O.rendering,W===null)if(I)ru(O,!1);else{if(rn!==0||u!==null&&(u.flags&128)!==0)for(u=m.child;u!==null;){if(W=Af(u),W!==null){for(m.flags|=128,ru(O,!1),u=W.updateQueue,m.updateQueue=u,Bf(m,u),m.subtreeFlags=0,u=C,C=m.child;C!==null;)hS(C,u),C=C.sibling;return L(bn,bn.current&1|2),m.child}u=u.sibling}O.tail!==null&&Je()>Df&&(m.flags|=128,I=!0,ru(O,!1),m.lanes=4194304)}else{if(!I)if(u=Af(W),u!==null){if(m.flags|=128,I=!0,u=u.updateQueue,m.updateQueue=u,Bf(m,u),ru(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!Tr)return Zr(m),null}else 2*Je()-O.renderingStartTime>Df&&C!==536870912&&(m.flags|=128,I=!0,ru(O,!1),m.lanes=4194304);O.isBackwards?(W.sibling=m.child,m.child=W):(u=O.last,u!==null?u.sibling=W:m.child=W,O.last=W)}return O.tail!==null?(m=O.tail,O.rendering=m,O.tail=m.sibling,O.renderingStartTime=Je(),m.sibling=null,u=bn.current,L(bn,I?u&1|2:u&1),m):(Zr(m),null);case 22:case 23:return zs(m),H0(),I=m.memoizedState!==null,u!==null?u.memoizedState!==null!==I&&(m.flags|=8192):I&&(m.flags|=8192),I?(C&536870912)!==0&&(m.flags&128)===0&&(Zr(m),m.subtreeFlags&6&&(m.flags|=8192)):Zr(m),C=m.updateQueue,C!==null&&Bf(m,C.retryQueue),C=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),I=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(I=m.memoizedState.cachePool.pool),I!==C&&(m.flags|=2048),u!==null&&N(na),null;case 24:return C=null,u!==null&&(C=u.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),Es(xn),Zr(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function TI(u,m){switch(R0(m),m.tag){case 1:return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 3:return Es(xn),ne(),u=m.flags,(u&65536)!==0&&(u&128)===0?(m.flags=u&-65537|128,m):null;case 26:case 27:case 5:return ae(m),null;case 13:if(zs(m),u=m.memoizedState,u!==null&&u.dehydrated!==null){if(m.alternate===null)throw Error(n(340));Fc()}return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 19:return N(bn),null;case 4:return ne(),null;case 10:return Es(m.type),null;case 22:case 23:return zs(m),H0(),u!==null&&N(na),u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 24:return Es(xn),null;case 25:return null;default:return null}}function F2(u,m){switch(R0(m),m.tag){case 3:Es(xn),ne();break;case 26:case 27:case 5:ae(m);break;case 4:ne();break;case 13:zs(m);break;case 19:N(bn);break;case 10:Es(m.type);break;case 22:case 23:zs(m),H0(),u!==null&&N(na);break;case 24:Es(xn)}}function nu(u,m){try{var C=m.updateQueue,I=C!==null?C.lastEffect:null;if(I!==null){var O=I.next;C=O;do{if((C.tag&u)===u){I=void 0;var W=C.create,le=C.inst;I=W(),le.destroy=I}C=C.next}while(C!==O)}}catch(de){Dr(m,m.return,de)}}function oo(u,m,C){try{var I=m.updateQueue,O=I!==null?I.lastEffect:null;if(O!==null){var W=O.next;I=W;do{if((I.tag&u)===u){var le=I.inst,de=le.destroy;if(de!==void 0){le.destroy=void 0,O=m;var Se=C,We=de;try{We()}catch(at){Dr(O,Se,at)}}}I=I.next}while(I!==W)}}catch(at){Dr(m,m.return,at)}}function U2(u){var m=u.updateQueue;if(m!==null){var C=u.stateNode;try{TS(m,C)}catch(I){Dr(u,u.return,I)}}}function $2(u,m,C){C.props=sa(u.type,u.memoizedProps),C.state=u.memoizedState;try{C.componentWillUnmount()}catch(I){Dr(u,m,I)}}function iu(u,m){try{var C=u.ref;if(C!==null){switch(u.tag){case 26:case 27:case 5:var I=u.stateNode;break;case 30:I=u.stateNode;break;default:I=u.stateNode}typeof C=="function"?u.refCleanup=C(I):C.current=I}}catch(O){Dr(u,m,O)}}function cs(u,m){var C=u.ref,I=u.refCleanup;if(C!==null)if(typeof I=="function")try{I()}catch(O){Dr(u,m,O)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(O){Dr(u,m,O)}else C.current=null}function q2(u){var m=u.type,C=u.memoizedProps,I=u.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":C.autoFocus&&I.focus();break e;case"img":C.src?I.src=C.src:C.srcSet&&(I.srcset=C.srcSet)}}catch(O){Dr(u,u.return,O)}}function vg(u,m,C){try{var I=u.stateNode;YI(I,u.type,C,m),I[Ue]=m}catch(O){Dr(u,u.return,O)}}function H2(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&go(u.type)||u.tag===4}function xg(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||H2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&go(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function bg(u,m,C){var I=u.tag;if(I===5||I===6)u=u.stateNode,m?(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C).insertBefore(u,m):(m=C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,m.appendChild(u),C=C._reactRootContainer,C!=null||m.onclick!==null||(m.onclick=Vf));else if(I!==4&&(I===27&&go(u.type)&&(C=u.stateNode,m=null),u=u.child,u!==null))for(bg(u,m,C),u=u.sibling;u!==null;)bg(u,m,C),u=u.sibling}function Pf(u,m,C){var I=u.tag;if(I===5||I===6)u=u.stateNode,m?C.insertBefore(u,m):C.appendChild(u);else if(I!==4&&(I===27&&go(u.type)&&(C=u.stateNode),u=u.child,u!==null))for(Pf(u,m,C),u=u.sibling;u!==null;)Pf(u,m,C),u=u.sibling}function W2(u){var m=u.stateNode,C=u.memoizedProps;try{for(var I=u.type,O=m.attributes;O.length;)m.removeAttributeNode(O[0]);Nn(m,I,C),m[Be]=u,m[Ue]=C}catch(W){Dr(u,u.return,W)}}var Ns=!1,dn=!1,wg=!1,V2=typeof WeakSet=="function"?WeakSet:Set,jn=null;function AI(u,m){if(u=u.containerInfo,Wg=Qf,u=nS(u),x0(u)){if("selectionStart"in u)var C={start:u.selectionStart,end:u.selectionEnd};else e:{C=(C=u.ownerDocument)&&C.defaultView||window;var I=C.getSelection&&C.getSelection();if(I&&I.rangeCount!==0){C=I.anchorNode;var O=I.anchorOffset,W=I.focusNode;I=I.focusOffset;try{C.nodeType,W.nodeType}catch{C=null;break e}var le=0,de=-1,Se=-1,We=0,at=0,ft=u,Ke=null;t:for(;;){for(var et;ft!==C||O!==0&&ft.nodeType!==3||(de=le+O),ft!==W||I!==0&&ft.nodeType!==3||(Se=le+I),ft.nodeType===3&&(le+=ft.nodeValue.length),(et=ft.firstChild)!==null;)Ke=ft,ft=et;for(;;){if(ft===u)break t;if(Ke===C&&++We===O&&(de=le),Ke===W&&++at===I&&(Se=le),(et=ft.nextSibling)!==null)break;ft=Ke,Ke=ft.parentNode}ft=et}C=de===-1||Se===-1?null:{start:de,end:Se}}else C=null}C=C||{start:0,end:0}}else C=null;for(Vg={focusedElem:u,selectionRange:C},Qf=!1,jn=m;jn!==null;)if(m=jn,u=m.child,(m.subtreeFlags&1024)!==0&&u!==null)u.return=m,jn=u;else for(;jn!==null;){switch(m=jn,W=m.alternate,u=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&W!==null){u=void 0,C=m,O=W.memoizedProps,W=W.memoizedState,I=C.stateNode;try{var Jt=sa(C.type,O,C.elementType===C.type);u=I.getSnapshotBeforeUpdate(Jt,W),I.__reactInternalSnapshotBeforeUpdate=u}catch(Wt){Dr(C,C.return,Wt)}}break;case 3:if((u&1024)!==0){if(u=m.stateNode.containerInfo,C=u.nodeType,C===9)Yg(u);else if(C===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Yg(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=m.sibling,u!==null){u.return=m.return,jn=u;break}jn=m.return}}function G2(u,m,C){var I=C.flags;switch(C.tag){case 0:case 11:case 15:ao(u,C),I&4&&nu(5,C);break;case 1:if(ao(u,C),I&4)if(u=C.stateNode,m===null)try{u.componentDidMount()}catch(le){Dr(C,C.return,le)}else{var O=sa(C.type,m.memoizedProps);m=m.memoizedState;try{u.componentDidUpdate(O,m,u.__reactInternalSnapshotBeforeUpdate)}catch(le){Dr(C,C.return,le)}}I&64&&U2(C),I&512&&iu(C,C.return);break;case 3:if(ao(u,C),I&64&&(u=C.updateQueue,u!==null)){if(m=null,C.child!==null)switch(C.child.tag){case 27:case 5:m=C.child.stateNode;break;case 1:m=C.child.stateNode}try{TS(u,m)}catch(le){Dr(C,C.return,le)}}break;case 27:m===null&&I&4&&W2(C);case 26:case 5:ao(u,C),m===null&&I&4&&q2(C),I&512&&iu(C,C.return);break;case 12:ao(u,C);break;case 13:ao(u,C),I&4&&J2(u,C),I&64&&(u=C.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(C=LI.bind(null,C),rz(u,C))));break;case 22:if(I=C.memoizedState!==null||Ns,!I){m=m!==null&&m.memoizedState!==null||dn,O=Ns;var W=dn;Ns=I,(dn=m)&&!W?lo(u,C,(C.subtreeFlags&8772)!==0):ao(u,C),Ns=O,dn=W}break;case 30:break;default:ao(u,C)}}function K2(u){var m=u.alternate;m!==null&&(u.alternate=null,K2(m)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(m=u.stateNode,m!==null&&Ut(m)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Gr=null,ri=!1;function Ds(u,m,C){for(C=C.child;C!==null;)Y2(u,m,C),C=C.sibling}function Y2(u,m,C){if(Z&&typeof Z.onCommitFiberUnmount=="function")try{Z.onCommitFiberUnmount(_e,C)}catch{}switch(C.tag){case 26:dn||cs(C,m),Ds(u,m,C),C.memoizedState?C.memoizedState.count--:C.stateNode&&(C=C.stateNode,C.parentNode.removeChild(C));break;case 27:dn||cs(C,m);var I=Gr,O=ri;go(C.type)&&(Gr=C.stateNode,ri=!1),Ds(u,m,C),hu(C.stateNode),Gr=I,ri=O;break;case 5:dn||cs(C,m);case 6:if(I=Gr,O=ri,Gr=null,Ds(u,m,C),Gr=I,ri=O,Gr!==null)if(ri)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(C.stateNode)}catch(W){Dr(C,m,W)}else try{Gr.removeChild(C.stateNode)}catch(W){Dr(C,m,W)}break;case 18:Gr!==null&&(ri?(u=Gr,D6(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,C.stateNode),wu(u)):D6(Gr,C.stateNode));break;case 4:I=Gr,O=ri,Gr=C.stateNode.containerInfo,ri=!0,Ds(u,m,C),Gr=I,ri=O;break;case 0:case 11:case 14:case 15:dn||oo(2,C,m),dn||oo(4,C,m),Ds(u,m,C);break;case 1:dn||(cs(C,m),I=C.stateNode,typeof I.componentWillUnmount=="function"&&$2(C,m,I)),Ds(u,m,C);break;case 21:Ds(u,m,C);break;case 22:dn=(I=dn)||C.memoizedState!==null,Ds(u,m,C),dn=I;break;default:Ds(u,m,C)}}function J2(u,m){if(m.memoizedState===null&&(u=m.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{wu(u)}catch(C){Dr(m,m.return,C)}}function RI(u){switch(u.tag){case 13:case 19:var m=u.stateNode;return m===null&&(m=u.stateNode=new V2),m;case 22:return u=u.stateNode,m=u._retryCache,m===null&&(m=u._retryCache=new V2),m;default:throw Error(n(435,u.tag))}}function _g(u,m){var C=RI(u);m.forEach(function(I){var O=OI.bind(null,u,I);C.has(I)||(C.add(I),I.then(O,O))})}function pi(u,m){var C=m.deletions;if(C!==null)for(var I=0;I<C.length;I++){var O=C[I],W=u,le=m,de=le;e:for(;de!==null;){switch(de.tag){case 27:if(go(de.type)){Gr=de.stateNode,ri=!1;break e}break;case 5:Gr=de.stateNode,ri=!1;break e;case 3:case 4:Gr=de.stateNode.containerInfo,ri=!0;break e}de=de.return}if(Gr===null)throw Error(n(160));Y2(W,le,O),Gr=null,ri=!1,W=O.alternate,W!==null&&(W.return=null),O.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Z2(m,u),m=m.sibling}var es=null;function Z2(u,m){var C=u.alternate,I=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:pi(m,u),gi(u),I&4&&(oo(3,u,u.return),nu(3,u),oo(5,u,u.return));break;case 1:pi(m,u),gi(u),I&512&&(dn||C===null||cs(C,C.return)),I&64&&Ns&&(u=u.updateQueue,u!==null&&(I=u.callbacks,I!==null&&(C=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=C===null?I:C.concat(I))));break;case 26:var O=es;if(pi(m,u),gi(u),I&512&&(dn||C===null||cs(C,C.return)),I&4){var W=C!==null?C.memoizedState:null;if(I=u.memoizedState,C===null)if(I===null)if(u.stateNode===null){e:{I=u.type,C=u.memoizedProps,O=O.ownerDocument||O;t:switch(I){case"title":W=O.getElementsByTagName("title")[0],(!W||W[Ye]||W[Be]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=O.createElement(I),O.head.insertBefore(W,O.querySelector("head > title"))),Nn(W,I,C),W[Be]=u,wt(W),I=W;break e;case"link":var le=W6("link","href",O).get(I+(C.href||""));if(le){for(var de=0;de<le.length;de++)if(W=le[de],W.getAttribute("href")===(C.href==null||C.href===""?null:C.href)&&W.getAttribute("rel")===(C.rel==null?null:C.rel)&&W.getAttribute("title")===(C.title==null?null:C.title)&&W.getAttribute("crossorigin")===(C.crossOrigin==null?null:C.crossOrigin)){le.splice(de,1);break t}}W=O.createElement(I),Nn(W,I,C),O.head.appendChild(W);break;case"meta":if(le=W6("meta","content",O).get(I+(C.content||""))){for(de=0;de<le.length;de++)if(W=le[de],W.getAttribute("content")===(C.content==null?null:""+C.content)&&W.getAttribute("name")===(C.name==null?null:C.name)&&W.getAttribute("property")===(C.property==null?null:C.property)&&W.getAttribute("http-equiv")===(C.httpEquiv==null?null:C.httpEquiv)&&W.getAttribute("charset")===(C.charSet==null?null:C.charSet)){le.splice(de,1);break t}}W=O.createElement(I),Nn(W,I,C),O.head.appendChild(W);break;default:throw Error(n(468,I))}W[Be]=u,wt(W),I=W}u.stateNode=I}else V6(O,u.type,u.stateNode);else u.stateNode=H6(O,I,u.memoizedProps);else W!==I?(W===null?C.stateNode!==null&&(C=C.stateNode,C.parentNode.removeChild(C)):W.count--,I===null?V6(O,u.type,u.stateNode):H6(O,I,u.memoizedProps)):I===null&&u.stateNode!==null&&vg(u,u.memoizedProps,C.memoizedProps)}break;case 27:pi(m,u),gi(u),I&512&&(dn||C===null||cs(C,C.return)),C!==null&&I&4&&vg(u,u.memoizedProps,C.memoizedProps);break;case 5:if(pi(m,u),gi(u),I&512&&(dn||C===null||cs(C,C.return)),u.flags&32){O=u.stateNode;try{Qn(O,"")}catch(et){Dr(u,u.return,et)}}I&4&&u.stateNode!=null&&(O=u.memoizedProps,vg(u,O,C!==null?C.memoizedProps:O)),I&1024&&(wg=!0);break;case 6:if(pi(m,u),gi(u),I&4){if(u.stateNode===null)throw Error(n(162));I=u.memoizedProps,C=u.stateNode;try{C.nodeValue=I}catch(et){Dr(u,u.return,et)}}break;case 3:if(Jf=null,O=es,es=Kf(m.containerInfo),pi(m,u),es=O,gi(u),I&4&&C!==null&&C.memoizedState.isDehydrated)try{wu(m.containerInfo)}catch(et){Dr(u,u.return,et)}wg&&(wg=!1,X2(u));break;case 4:I=es,es=Kf(u.stateNode.containerInfo),pi(m,u),gi(u),es=I;break;case 12:pi(m,u),gi(u);break;case 13:pi(m,u),gi(u),u.child.flags&8192&&u.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Tg=Je()),I&4&&(I=u.updateQueue,I!==null&&(u.updateQueue=null,_g(u,I)));break;case 22:O=u.memoizedState!==null;var Se=C!==null&&C.memoizedState!==null,We=Ns,at=dn;if(Ns=We||O,dn=at||Se,pi(m,u),dn=at,Ns=We,gi(u),I&8192)e:for(m=u.stateNode,m._visibility=O?m._visibility&-2:m._visibility|1,O&&(C===null||Se||Ns||dn||oa(u)),C=null,m=u;;){if(m.tag===5||m.tag===26){if(C===null){Se=C=m;try{if(W=Se.stateNode,O)le=W.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{de=Se.stateNode;var ft=Se.memoizedProps.style,Ke=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;de.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(et){Dr(Se,Se.return,et)}}}else if(m.tag===6){if(C===null){Se=m;try{Se.stateNode.nodeValue=O?"":Se.memoizedProps}catch(et){Dr(Se,Se.return,et)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===u)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break e;for(;m.sibling===null;){if(m.return===null||m.return===u)break e;C===m&&(C=null),m=m.return}C===m&&(C=null),m.sibling.return=m.return,m=m.sibling}I&4&&(I=u.updateQueue,I!==null&&(C=I.retryQueue,C!==null&&(I.retryQueue=null,_g(u,C))));break;case 19:pi(m,u),gi(u),I&4&&(I=u.updateQueue,I!==null&&(u.updateQueue=null,_g(u,I)));break;case 30:break;case 21:break;default:pi(m,u),gi(u)}}function gi(u){var m=u.flags;if(m&2){try{for(var C,I=u.return;I!==null;){if(H2(I)){C=I;break}I=I.return}if(C==null)throw Error(n(160));switch(C.tag){case 27:var O=C.stateNode,W=xg(u);Pf(u,W,O);break;case 5:var le=C.stateNode;C.flags&32&&(Qn(le,""),C.flags&=-33);var de=xg(u);Pf(u,de,le);break;case 3:case 4:var Se=C.stateNode.containerInfo,We=xg(u);bg(u,We,Se);break;default:throw Error(n(161))}}catch(at){Dr(u,u.return,at)}u.flags&=-3}m&4096&&(u.flags&=-4097)}function X2(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var m=u;X2(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),u=u.sibling}}function ao(u,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)G2(u,m.alternate,m),m=m.sibling}function oa(u){for(u=u.child;u!==null;){var m=u;switch(m.tag){case 0:case 11:case 14:case 15:oo(4,m,m.return),oa(m);break;case 1:cs(m,m.return);var C=m.stateNode;typeof C.componentWillUnmount=="function"&&$2(m,m.return,C),oa(m);break;case 27:hu(m.stateNode);case 26:case 5:cs(m,m.return),oa(m);break;case 22:m.memoizedState===null&&oa(m);break;case 30:oa(m);break;default:oa(m)}u=u.sibling}}function lo(u,m,C){for(C=C&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var I=m.alternate,O=u,W=m,le=W.flags;switch(W.tag){case 0:case 11:case 15:lo(O,W,C),nu(4,W);break;case 1:if(lo(O,W,C),I=W,O=I.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(We){Dr(I,I.return,We)}if(I=W,O=I.updateQueue,O!==null){var de=I.stateNode;try{var Se=O.shared.hiddenCallbacks;if(Se!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Se.length;O++)CS(Se[O],de)}catch(We){Dr(I,I.return,We)}}C&&le&64&&U2(W),iu(W,W.return);break;case 27:W2(W);case 26:case 5:lo(O,W,C),C&&I===null&&le&4&&q2(W),iu(W,W.return);break;case 12:lo(O,W,C);break;case 13:lo(O,W,C),C&&le&4&&J2(O,W);break;case 22:W.memoizedState===null&&lo(O,W,C),iu(W,W.return);break;case 30:break;default:lo(O,W,C)}m=m.sibling}}function Sg(u,m){var C=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(C=u.memoizedState.cachePool.pool),u=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(u=m.memoizedState.cachePool.pool),u!==C&&(u!=null&&u.refCount++,C!=null&&qc(C))}function kg(u,m){u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&qc(u))}function us(u,m,C,I){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Q2(u,m,C,I),m=m.sibling}function Q2(u,m,C,I){var O=m.flags;switch(m.tag){case 0:case 11:case 15:us(u,m,C,I),O&2048&&nu(9,m);break;case 1:us(u,m,C,I);break;case 3:us(u,m,C,I),O&2048&&(u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&qc(u)));break;case 12:if(O&2048){us(u,m,C,I),u=m.stateNode;try{var W=m.memoizedProps,le=W.id,de=W.onPostCommit;typeof de=="function"&&de(le,m.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Se){Dr(m,m.return,Se)}}else us(u,m,C,I);break;case 13:us(u,m,C,I);break;case 23:break;case 22:W=m.stateNode,le=m.alternate,m.memoizedState!==null?W._visibility&2?us(u,m,C,I):su(u,m):W._visibility&2?us(u,m,C,I):(W._visibility|=2,al(u,m,C,I,(m.subtreeFlags&10256)!==0)),O&2048&&Sg(le,m);break;case 24:us(u,m,C,I),O&2048&&kg(m.alternate,m);break;default:us(u,m,C,I)}}function al(u,m,C,I,O){for(O=O&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var W=u,le=m,de=C,Se=I,We=le.flags;switch(le.tag){case 0:case 11:case 15:al(W,le,de,Se,O),nu(8,le);break;case 23:break;case 22:var at=le.stateNode;le.memoizedState!==null?at._visibility&2?al(W,le,de,Se,O):su(W,le):(at._visibility|=2,al(W,le,de,Se,O)),O&&We&2048&&Sg(le.alternate,le);break;case 24:al(W,le,de,Se,O),O&&We&2048&&kg(le.alternate,le);break;default:al(W,le,de,Se,O)}m=m.sibling}}function su(u,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var C=u,I=m,O=I.flags;switch(I.tag){case 22:su(C,I),O&2048&&Sg(I.alternate,I);break;case 24:su(C,I),O&2048&&kg(I.alternate,I);break;default:su(C,I)}m=m.sibling}}var ou=8192;function ll(u){if(u.subtreeFlags&ou)for(u=u.child;u!==null;)e6(u),u=u.sibling}function e6(u){switch(u.tag){case 26:ll(u),u.flags&ou&&u.memoizedState!==null&&gz(es,u.memoizedState,u.memoizedProps);break;case 5:ll(u);break;case 3:case 4:var m=es;es=Kf(u.stateNode.containerInfo),ll(u),es=m;break;case 22:u.memoizedState===null&&(m=u.alternate,m!==null&&m.memoizedState!==null?(m=ou,ou=16777216,ll(u),ou=m):ll(u));break;default:ll(u)}}function t6(u){var m=u.alternate;if(m!==null&&(u=m.child,u!==null)){m.child=null;do m=u.sibling,u.sibling=null,u=m;while(u!==null)}}function au(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var C=0;C<m.length;C++){var I=m[C];jn=I,n6(I,u)}t6(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)r6(u),u=u.sibling}function r6(u){switch(u.tag){case 0:case 11:case 15:au(u),u.flags&2048&&oo(9,u,u.return);break;case 3:au(u);break;case 12:au(u);break;case 22:var m=u.stateNode;u.memoizedState!==null&&m._visibility&2&&(u.return===null||u.return.tag!==13)?(m._visibility&=-3,Nf(u)):au(u);break;default:au(u)}}function Nf(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var C=0;C<m.length;C++){var I=m[C];jn=I,n6(I,u)}t6(u)}for(u=u.child;u!==null;){switch(m=u,m.tag){case 0:case 11:case 15:oo(8,m,m.return),Nf(m);break;case 22:C=m.stateNode,C._visibility&2&&(C._visibility&=-3,Nf(m));break;default:Nf(m)}u=u.sibling}}function n6(u,m){for(;jn!==null;){var C=jn;switch(C.tag){case 0:case 11:case 15:oo(8,C,m);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var I=C.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:qc(C.memoizedState.cache)}if(I=C.child,I!==null)I.return=C,jn=I;else e:for(C=u;jn!==null;){I=jn;var O=I.sibling,W=I.return;if(K2(I),I===C){jn=null;break e}if(O!==null){O.return=W,jn=O;break e}jn=W}}}var EI={getCacheForType:function(u){var m=Un(xn),C=m.data.get(u);return C===void 0&&(C=u(),m.data.set(u,C)),C}},II=typeof WeakMap=="function"?WeakMap:Map,Ar=0,Or=null,yr=null,Sr=0,Rr=0,mi=null,co=!1,cl=!1,jg=!1,Ls=0,rn=0,uo=0,aa=0,Mg=0,Bi=0,ul=0,lu=null,ni=null,Cg=!1,Tg=0,Df=1/0,Lf=null,fo=null,Pn=0,ho=null,dl=null,fl=0,Ag=0,Rg=null,i6=null,cu=0,Eg=null;function yi(){if((Ar&2)!==0&&Sr!==0)return Sr&-Sr;if(b.T!==null){var u=Qa;return u!==0?u:Lg()}return Fe()}function s6(){Bi===0&&(Bi=(Sr&536870912)===0||Tr?Ne():536870912);var u=zi.current;return u!==null&&(u.flags|=32),Bi}function vi(u,m,C){(u===Or&&(Rr===2||Rr===9)||u.cancelPendingCommit!==null)&&(hl(u,0),po(u,Sr,Bi,!1)),Oe(u,C),((Ar&2)===0||u!==Or)&&(u===Or&&((Ar&2)===0&&(aa|=C),rn===4&&po(u,Sr,Bi,!1)),ds(u))}function o6(u,m,C){if((Ar&6)!==0)throw Error(n(327));var I=!C&&(m&124)===0&&(m&u.expiredLanes)===0||Ie(u,m),O=I?PI(u,m):Bg(u,m,!0),W=I;do{if(O===0){cl&&!I&&po(u,m,0,!1);break}else{if(C=u.current.alternate,W&&!zI(C)){O=Bg(u,m,!1),W=!1;continue}if(O===2){if(W=m,u.errorRecoveryDisabledLanes&W)var le=0;else le=u.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){m=le;e:{var de=u;O=lu;var Se=de.current.memoizedState.isDehydrated;if(Se&&(hl(de,le).flags|=256),le=Bg(de,le,!1),le!==2){if(jg&&!Se){de.errorRecoveryDisabledLanes|=W,aa|=W,O=4;break e}W=ni,ni=O,W!==null&&(ni===null?ni=W:ni.push.apply(ni,W))}O=le}if(W=!1,O!==2)continue}}if(O===1){hl(u,0),po(u,m,0,!0);break}e:{switch(I=u,W=O,W){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:po(I,m,Bi,!co);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(O=Tg+300-Je(),10<O)){if(po(I,m,Bi,!co),je(I,0,!0)!==0)break e;I.timeoutHandle=P6(a6.bind(null,I,C,ni,Lf,Cg,m,Bi,aa,ul,co,W,2,-0,0),O);break e}a6(I,C,ni,Lf,Cg,m,Bi,aa,ul,co,W,0,-0,0)}}break}while(!0);ds(u)}function a6(u,m,C,I,O,W,le,de,Se,We,at,ft,Ke,et){if(u.timeoutHandle=-1,ft=m.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(mu={stylesheets:null,count:0,unsuspend:pz},e6(m),ft=mz(),ft!==null)){u.cancelPendingCommit=ft(p6.bind(null,u,m,W,C,I,O,le,de,Se,at,1,Ke,et)),po(u,W,le,!We);return}p6(u,m,W,C,I,O,le,de,Se)}function zI(u){for(var m=u;;){var C=m.tag;if((C===0||C===11||C===15)&&m.flags&16384&&(C=m.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var I=0;I<C.length;I++){var O=C[I],W=O.getSnapshot;O=O.value;try{if(!fi(W(),O))return!1}catch{return!1}}if(C=m.child,m.subtreeFlags&16384&&C!==null)C.return=m,m=C;else{if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function po(u,m,C,I){m&=~Mg,m&=~aa,u.suspendedLanes|=m,u.pingedLanes&=~m,I&&(u.warmLanes|=m),I=u.expirationTimes;for(var O=m;0<O;){var W=31-V(O),le=1<<W;I[W]=-1,O&=~le}C!==0&&Lt(u,C,m)}function Of(){return(Ar&6)===0?(uu(0),!1):!0}function Ig(){if(yr!==null){if(Rr===0)var u=yr.return;else u=yr,Rs=ta=null,Y0(u),sl=null,eu=0,u=yr;for(;u!==null;)F2(u.alternate,u),u=u.return;yr=null}}function hl(u,m){var C=u.timeoutHandle;C!==-1&&(u.timeoutHandle=-1,ZI(C)),C=u.cancelPendingCommit,C!==null&&(u.cancelPendingCommit=null,C()),Ig(),Or=u,yr=C=Cs(u.current,null),Sr=m,Rr=0,mi=null,co=!1,cl=Ie(u,m),jg=!1,ul=Bi=Mg=aa=uo=rn=0,ni=lu=null,Cg=!1,(m&8)!==0&&(m|=m&32);var I=u.entangledLanes;if(I!==0)for(u=u.entanglements,I&=m;0<I;){var O=31-V(I),W=1<<O;m|=u[O],I&=~W}return Ls=m,af(),C}function l6(u,m){hr=null,b.H=Mf,m===Wc||m===mf?(m=jS(),Rr=3):m===_S?(m=jS(),Rr=4):Rr=m===M2?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,mi=m,yr===null&&(rn=1,Ef(u,Ai(m,u.current)))}function c6(){var u=b.H;return b.H=Mf,u===null?Mf:u}function u6(){var u=b.A;return b.A=EI,u}function zg(){rn=4,co||(Sr&4194048)!==Sr&&zi.current!==null||(cl=!0),(uo&134217727)===0&&(aa&134217727)===0||Or===null||po(Or,Sr,Bi,!1)}function Bg(u,m,C){var I=Ar;Ar|=2;var O=c6(),W=u6();(Or!==u||Sr!==m)&&(Lf=null,hl(u,m)),m=!1;var le=rn;e:do try{if(Rr!==0&&yr!==null){var de=yr,Se=mi;switch(Rr){case 8:Ig(),le=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(m=!0);var We=Rr;if(Rr=0,mi=null,pl(u,de,Se,We),C&&cl){le=0;break e}break;default:We=Rr,Rr=0,mi=null,pl(u,de,Se,We)}}BI(),le=rn;break}catch(at){l6(u,at)}while(!0);return m&&u.shellSuspendCounter++,Rs=ta=null,Ar=I,b.H=O,b.A=W,yr===null&&(Or=null,Sr=0,af()),le}function BI(){for(;yr!==null;)d6(yr)}function PI(u,m){var C=Ar;Ar|=2;var I=c6(),O=u6();Or!==u||Sr!==m?(Lf=null,Df=Je()+500,hl(u,m)):cl=Ie(u,m);e:do try{if(Rr!==0&&yr!==null){m=yr;var W=mi;t:switch(Rr){case 1:Rr=0,mi=null,pl(u,m,W,1);break;case 2:case 9:if(SS(W)){Rr=0,mi=null,f6(m);break}m=function(){Rr!==2&&Rr!==9||Or!==u||(Rr=7),ds(u)},W.then(m,m);break e;case 3:Rr=7;break e;case 4:Rr=5;break e;case 7:SS(W)?(Rr=0,mi=null,f6(m)):(Rr=0,mi=null,pl(u,m,W,7));break;case 5:var le=null;switch(yr.tag){case 26:le=yr.memoizedState;case 5:case 27:var de=yr;if(!le||G6(le)){Rr=0,mi=null;var Se=de.sibling;if(Se!==null)yr=Se;else{var We=de.return;We!==null?(yr=We,Ff(We)):yr=null}break t}}Rr=0,mi=null,pl(u,m,W,5);break;case 6:Rr=0,mi=null,pl(u,m,W,6);break;case 8:Ig(),rn=6;break e;default:throw Error(n(462))}}NI();break}catch(at){l6(u,at)}while(!0);return Rs=ta=null,b.H=I,b.A=O,Ar=C,yr!==null?0:(Or=null,Sr=0,af(),rn)}function NI(){for(;yr!==null&&!ve();)d6(yr)}function d6(u){var m=L2(u.alternate,u,Ls);u.memoizedProps=u.pendingProps,m===null?Ff(u):yr=m}function f6(u){var m=u,C=m.alternate;switch(m.tag){case 15:case 0:m=I2(C,m,m.pendingProps,m.type,void 0,Sr);break;case 11:m=I2(C,m,m.pendingProps,m.type.render,m.ref,Sr);break;case 5:Y0(m);default:F2(C,m),m=yr=hS(m,Ls),m=L2(C,m,Ls)}u.memoizedProps=u.pendingProps,m===null?Ff(u):yr=m}function pl(u,m,C,I){Rs=ta=null,Y0(m),sl=null,eu=0;var O=m.return;try{if(jI(u,O,m,C,Sr)){rn=1,Ef(u,Ai(C,u.current)),yr=null;return}}catch(W){if(O!==null)throw yr=O,W;rn=1,Ef(u,Ai(C,u.current)),yr=null;return}m.flags&32768?(Tr||I===1?u=!0:cl||(Sr&536870912)!==0?u=!1:(co=u=!0,(I===2||I===9||I===3||I===6)&&(I=zi.current,I!==null&&I.tag===13&&(I.flags|=16384))),h6(m,u)):Ff(m)}function Ff(u){var m=u;do{if((m.flags&32768)!==0){h6(m,co);return}u=m.return;var C=CI(m.alternate,m,Ls);if(C!==null){yr=C;return}if(m=m.sibling,m!==null){yr=m;return}yr=m=u}while(m!==null);rn===0&&(rn=5)}function h6(u,m){do{var C=TI(u.alternate,u);if(C!==null){C.flags&=32767,yr=C;return}if(C=u.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!m&&(u=u.sibling,u!==null)){yr=u;return}yr=u=C}while(u!==null);rn=6,yr=null}function p6(u,m,C,I,O,W,le,de,Se){u.cancelPendingCommit=null;do Uf();while(Pn!==0);if((Ar&6)!==0)throw Error(n(327));if(m!==null){if(m===u.current)throw Error(n(177));if(W=m.lanes|m.childLanes,W|=k0,Ze(u,C,W,le,de,Se),u===Or&&(yr=Or=null,Sr=0),dl=m,ho=u,fl=C,Ag=W,Rg=O,i6=I,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,FI(he,function(){return x6(),null})):(u.callbackNode=null,u.callbackPriority=0),I=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||I){I=b.T,b.T=null,O=M.p,M.p=2,le=Ar,Ar|=4;try{AI(u,m,C)}finally{Ar=le,M.p=O,b.T=I}}Pn=1,g6(),m6(),y6()}}function g6(){if(Pn===1){Pn=0;var u=ho,m=dl,C=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||C){C=b.T,b.T=null;var I=M.p;M.p=2;var O=Ar;Ar|=4;try{Z2(m,u);var W=Vg,le=nS(u.containerInfo),de=W.focusedElem,Se=W.selectionRange;if(le!==de&&de&&de.ownerDocument&&rS(de.ownerDocument.documentElement,de)){if(Se!==null&&x0(de)){var We=Se.start,at=Se.end;if(at===void 0&&(at=We),"selectionStart"in de)de.selectionStart=We,de.selectionEnd=Math.min(at,de.value.length);else{var ft=de.ownerDocument||document,Ke=ft&&ft.defaultView||window;if(Ke.getSelection){var et=Ke.getSelection(),Jt=de.textContent.length,Wt=Math.min(Se.start,Jt),zr=Se.end===void 0?Wt:Math.min(Se.end,Jt);!et.extend&&Wt>zr&&(le=zr,zr=Wt,Wt=le);var De=tS(de,Wt),Ee=tS(de,zr);if(De&&Ee&&(et.rangeCount!==1||et.anchorNode!==De.node||et.anchorOffset!==De.offset||et.focusNode!==Ee.node||et.focusOffset!==Ee.offset)){var He=ft.createRange();He.setStart(De.node,De.offset),et.removeAllRanges(),Wt>zr?(et.addRange(He),et.extend(Ee.node,Ee.offset)):(He.setEnd(Ee.node,Ee.offset),et.addRange(He))}}}}for(ft=[],et=de;et=et.parentNode;)et.nodeType===1&&ft.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<ft.length;de++){var lt=ft[de];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}Qf=!!Wg,Vg=Wg=null}finally{Ar=O,M.p=I,b.T=C}}u.current=m,Pn=2}}function m6(){if(Pn===2){Pn=0;var u=ho,m=dl,C=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||C){C=b.T,b.T=null;var I=M.p;M.p=2;var O=Ar;Ar|=4;try{G2(u,m.alternate,m)}finally{Ar=O,M.p=I,b.T=C}}Pn=3}}function y6(){if(Pn===4||Pn===3){Pn=0,ge();var u=ho,m=dl,C=fl,I=i6;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Pn=5:(Pn=0,dl=ho=null,v6(u,u.pendingLanes));var O=u.pendingLanes;if(O===0&&(fo=null),Bt(C),m=m.stateNode,Z&&typeof Z.onCommitFiberRoot=="function")try{Z.onCommitFiberRoot(_e,m,void 0,(m.current.flags&128)===128)}catch{}if(I!==null){m=b.T,O=M.p,M.p=2,b.T=null;try{for(var W=u.onRecoverableError,le=0;le<I.length;le++){var de=I[le];W(de.value,{componentStack:de.stack})}}finally{b.T=m,M.p=O}}(fl&3)!==0&&Uf(),ds(u),O=u.pendingLanes,(C&4194090)!==0&&(O&42)!==0?u===Eg?cu++:(cu=0,Eg=u):cu=0,uu(0)}}function v6(u,m){(u.pooledCacheLanes&=m)===0&&(m=u.pooledCache,m!=null&&(u.pooledCache=null,qc(m)))}function Uf(u){return g6(),m6(),y6(),x6()}function x6(){if(Pn!==5)return!1;var u=ho,m=Ag;Ag=0;var C=Bt(fl),I=b.T,O=M.p;try{M.p=32>C?32:C,b.T=null,C=Rg,Rg=null;var W=ho,le=fl;if(Pn=0,dl=ho=null,fl=0,(Ar&6)!==0)throw Error(n(331));var de=Ar;if(Ar|=4,r6(W.current),Q2(W,W.current,le,C),Ar=de,uu(0,!1),Z&&typeof Z.onPostCommitFiberRoot=="function")try{Z.onPostCommitFiberRoot(_e,W)}catch{}return!0}finally{M.p=O,b.T=I,v6(u,m)}}function b6(u,m,C){m=Ai(C,m),m=cg(u.stateNode,m,2),u=ro(u,m,2),u!==null&&(Oe(u,2),ds(u))}function Dr(u,m,C){if(u.tag===3)b6(u,u,C);else for(;m!==null;){if(m.tag===3){b6(m,u,C);break}else if(m.tag===1){var I=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(fo===null||!fo.has(I))){u=Ai(C,u),C=k2(2),I=ro(m,C,2),I!==null&&(j2(C,I,m,u),Oe(I,2),ds(I));break}}m=m.return}}function Pg(u,m,C){var I=u.pingCache;if(I===null){I=u.pingCache=new II;var O=new Set;I.set(m,O)}else O=I.get(m),O===void 0&&(O=new Set,I.set(m,O));O.has(C)||(jg=!0,O.add(C),u=DI.bind(null,u,m,C),m.then(u,u))}function DI(u,m,C){var I=u.pingCache;I!==null&&I.delete(m),u.pingedLanes|=u.suspendedLanes&C,u.warmLanes&=~C,Or===u&&(Sr&C)===C&&(rn===4||rn===3&&(Sr&62914560)===Sr&&300>Je()-Tg?(Ar&2)===0&&hl(u,0):Mg|=C,ul===Sr&&(ul=0)),ds(u)}function w6(u,m){m===0&&(m=Ge()),u=Ya(u,m),u!==null&&(Oe(u,m),ds(u))}function LI(u){var m=u.memoizedState,C=0;m!==null&&(C=m.retryLane),w6(u,C)}function OI(u,m){var C=0;switch(u.tag){case 13:var I=u.stateNode,O=u.memoizedState;O!==null&&(C=O.retryLane);break;case 19:I=u.stateNode;break;case 22:I=u.stateNode._retryCache;break;default:throw Error(n(314))}I!==null&&I.delete(m),w6(u,C)}function FI(u,m){return ue(u,m)}var $f=null,gl=null,Ng=!1,qf=!1,Dg=!1,la=0;function ds(u){u!==gl&&u.next===null&&(gl===null?$f=gl=u:gl=gl.next=u),qf=!0,Ng||(Ng=!0,$I())}function uu(u,m){if(!Dg&&qf){Dg=!0;do for(var C=!1,I=$f;I!==null;){if(u!==0){var O=I.pendingLanes;if(O===0)var W=0;else{var le=I.suspendedLanes,de=I.pingedLanes;W=(1<<31-V(42|u)+1)-1,W&=O&~(le&~de),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(C=!0,j6(I,W))}else W=Sr,W=je(I,I===Or?W:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(W&3)===0||Ie(I,W)||(C=!0,j6(I,W));I=I.next}while(C);Dg=!1}}function UI(){_6()}function _6(){qf=Ng=!1;var u=0;la!==0&&(JI()&&(u=la),la=0);for(var m=Je(),C=null,I=$f;I!==null;){var O=I.next,W=S6(I,m);W===0?(I.next=null,C===null?$f=O:C.next=O,O===null&&(gl=C)):(C=I,(u!==0||(W&3)!==0)&&(qf=!0)),I=O}uu(u)}function S6(u,m){for(var C=u.suspendedLanes,I=u.pingedLanes,O=u.expirationTimes,W=u.pendingLanes&-62914561;0<W;){var le=31-V(W),de=1<<le,Se=O[le];Se===-1?((de&C)===0||(de&I)!==0)&&(O[le]=pt(de,m)):Se<=m&&(u.expiredLanes|=de),W&=~de}if(m=Or,C=Sr,C=je(u,u===m?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),I=u.callbackNode,C===0||u===m&&(Rr===2||Rr===9)||u.cancelPendingCommit!==null)return I!==null&&I!==null&&Ce(I),u.callbackNode=null,u.callbackPriority=0;if((C&3)===0||Ie(u,C)){if(m=C&-C,m===u.callbackPriority)return m;switch(I!==null&&Ce(I),Bt(C)){case 2:case 8:C=vt;break;case 32:C=he;break;case 268435456:C=Me;break;default:C=he}return I=k6.bind(null,u),C=ue(C,I),u.callbackPriority=m,u.callbackNode=C,m}return I!==null&&I!==null&&Ce(I),u.callbackPriority=2,u.callbackNode=null,2}function k6(u,m){if(Pn!==0&&Pn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var C=u.callbackNode;if(Uf()&&u.callbackNode!==C)return null;var I=Sr;return I=je(u,u===Or?I:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),I===0?null:(o6(u,I,m),S6(u,Je()),u.callbackNode!=null&&u.callbackNode===C?k6.bind(null,u):null)}function j6(u,m){if(Uf())return null;o6(u,m,!0)}function $I(){XI(function(){(Ar&6)!==0?ue(ze,UI):_6()})}function Lg(){return la===0&&(la=Ne()),la}function M6(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Qd(""+u)}function C6(u,m){var C=m.ownerDocument.createElement("input");return C.name=m.name,C.value=m.value,u.id&&C.setAttribute("form",u.id),m.parentNode.insertBefore(C,m),u=new FormData(u),C.parentNode.removeChild(C),u}function qI(u,m,C,I,O){if(m==="submit"&&C&&C.stateNode===O){var W=M6((O[Ue]||null).action),le=I.submitter;le&&(m=(m=le[Ue]||null)?M6(m.formAction):le.getAttribute("formAction"),m!==null&&(W=m,le=null));var de=new nf("action","action",null,I,O);u.push({event:de,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(la!==0){var Se=le?C6(O,le):new FormData(O);ig(C,{pending:!0,data:Se,method:O.method,action:W},null,Se)}}else typeof W=="function"&&(de.preventDefault(),Se=le?C6(O,le):new FormData(O),ig(C,{pending:!0,data:Se,method:O.method,action:W},W,Se))},currentTarget:O}]})}}for(var Og=0;Og<S0.length;Og++){var Fg=S0[Og],HI=Fg.toLowerCase(),WI=Fg[0].toUpperCase()+Fg.slice(1);Qi(HI,"on"+WI)}Qi(oS,"onAnimationEnd"),Qi(aS,"onAnimationIteration"),Qi(lS,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(lI,"onTransitionRun"),Qi(cI,"onTransitionStart"),Qi(uI,"onTransitionCancel"),Qi(cS,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),we("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),we("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),we("onBeforeInput",["compositionend","keypress","textInput","paste"]),we("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),we("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),we("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function T6(u,m){m=(m&4)!==0;for(var C=0;C<u.length;C++){var I=u[C],O=I.event;I=I.listeners;e:{var W=void 0;if(m)for(var le=I.length-1;0<=le;le--){var de=I[le],Se=de.instance,We=de.currentTarget;if(de=de.listener,Se!==W&&O.isPropagationStopped())break e;W=de,O.currentTarget=We;try{W(O)}catch(at){Rf(at)}O.currentTarget=null,W=Se}else for(le=0;le<I.length;le++){if(de=I[le],Se=de.instance,We=de.currentTarget,de=de.listener,Se!==W&&O.isPropagationStopped())break e;W=de,O.currentTarget=We;try{W(O)}catch(at){Rf(at)}O.currentTarget=null,W=Se}}}}function vr(u,m){var C=m[$e];C===void 0&&(C=m[$e]=new Set);var I=u+"__bubble";C.has(I)||(A6(m,u,2,!1),C.add(I))}function Ug(u,m,C){var I=0;m&&(I|=4),A6(C,u,I,m)}var Hf="_reactListening"+Math.random().toString(36).slice(2);function $g(u){if(!u[Hf]){u[Hf]=!0,St.forEach(function(C){C!=="selectionchange"&&(VI.has(C)||Ug(C,!1,u),Ug(C,!0,u))});var m=u.nodeType===9?u:u.ownerDocument;m===null||m[Hf]||(m[Hf]=!0,Ug("selectionchange",!1,m))}}function A6(u,m,C,I){switch(Q6(m)){case 2:var O=xz;break;case 8:O=bz;break;default:O=rm}C=O.bind(null,m,C,u),O=void 0,!u0||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(O=!0),I?O!==void 0?u.addEventListener(m,C,{capture:!0,passive:O}):u.addEventListener(m,C,!0):O!==void 0?u.addEventListener(m,C,{passive:O}):u.addEventListener(m,C,!1)}function qg(u,m,C,I,O){var W=I;if((m&1)===0&&(m&2)===0&&I!==null)e:for(;;){if(I===null)return;var le=I.tag;if(le===3||le===4){var de=I.stateNode.containerInfo;if(de===O)break;if(le===4)for(le=I.return;le!==null;){var Se=le.tag;if((Se===3||Se===4)&&le.stateNode.containerInfo===O)return;le=le.return}for(;de!==null;){if(le=ye(de),le===null)return;if(Se=le.tag,Se===5||Se===6||Se===26||Se===27){I=W=le;continue e}de=de.parentNode}}I=I.return}N_(function(){var We=W,at=l0(C),ft=[];e:{var Ke=uS.get(u);if(Ke!==void 0){var et=nf,Jt=u;switch(u){case"keypress":if(tf(C)===0)break e;case"keydown":case"keyup":et=F9;break;case"focusin":Jt="focus",et=p0;break;case"focusout":Jt="blur",et=p0;break;case"beforeblur":case"afterblur":et=p0;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=O_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=T9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=q9;break;case oS:case aS:case lS:et=E9;break;case cS:et=W9;break;case"scroll":case"scrollend":et=M9;break;case"wheel":et=G9;break;case"copy":case"cut":case"paste":et=z9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=U_;break;case"toggle":case"beforetoggle":et=Y9}var Wt=(m&4)!==0,zr=!Wt&&(u==="scroll"||u==="scrollend"),De=Wt?Ke!==null?Ke+"Capture":null:Ke;Wt=[];for(var Ee=We,He;Ee!==null;){var lt=Ee;if(He=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||He===null||De===null||(lt=Rc(Ee,De),lt!=null&&Wt.push(fu(Ee,lt,He))),zr)break;Ee=Ee.return}0<Wt.length&&(Ke=new et(Ke,Jt,null,C,at),ft.push({event:Ke,listeners:Wt}))}}if((m&7)===0){e:{if(Ke=u==="mouseover"||u==="pointerover",et=u==="mouseout"||u==="pointerout",Ke&&C!==a0&&(Jt=C.relatedTarget||C.fromElement)&&(ye(Jt)||Jt[It]))break e;if((et||Ke)&&(Ke=at.window===at?at:(Ke=at.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,et?(Jt=C.relatedTarget||C.toElement,et=We,Jt=Jt?ye(Jt):null,Jt!==null&&(zr=i(Jt),Wt=Jt.tag,Jt!==zr||Wt!==5&&Wt!==27&&Wt!==6)&&(Jt=null)):(et=null,Jt=We),et!==Jt)){if(Wt=O_,lt="onMouseLeave",De="onMouseEnter",Ee="mouse",(u==="pointerout"||u==="pointerover")&&(Wt=U_,lt="onPointerLeave",De="onPointerEnter",Ee="pointer"),zr=et==null?Ke:nt(et),He=Jt==null?Ke:nt(Jt),Ke=new Wt(lt,Ee+"leave",et,C,at),Ke.target=zr,Ke.relatedTarget=He,lt=null,ye(at)===We&&(Wt=new Wt(De,Ee+"enter",Jt,C,at),Wt.target=He,Wt.relatedTarget=zr,lt=Wt),zr=lt,et&&Jt)t:{for(Wt=et,De=Jt,Ee=0,He=Wt;He;He=ml(He))Ee++;for(He=0,lt=De;lt;lt=ml(lt))He++;for(;0<Ee-He;)Wt=ml(Wt),Ee--;for(;0<He-Ee;)De=ml(De),He--;for(;Ee--;){if(Wt===De||De!==null&&Wt===De.alternate)break t;Wt=ml(Wt),De=ml(De)}Wt=null}else Wt=null;et!==null&&R6(ft,Ke,et,Wt,!1),Jt!==null&&zr!==null&&R6(ft,zr,Jt,Wt,!0)}}e:{if(Ke=We?nt(We):window,et=Ke.nodeName&&Ke.nodeName.toLowerCase(),et==="select"||et==="input"&&Ke.type==="file")var Dt=Y_;else if(G_(Ke))if(J_)Dt=sI;else{Dt=nI;var pr=rI}else et=Ke.nodeName,!et||et.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?We&&o0(We.elementType)&&(Dt=Y_):Dt=iI;if(Dt&&(Dt=Dt(u,We))){K_(ft,Dt,C,at);break e}pr&&pr(u,Ke,We),u==="focusout"&&We&&Ke.type==="number"&&We.memoizedProps.value!=null&&xt(Ke,"number",Ke.value)}switch(pr=We?nt(We):window,u){case"focusin":(G_(pr)||pr.contentEditable==="true")&&(Va=pr,b0=We,Lc=null);break;case"focusout":Lc=b0=Va=null;break;case"mousedown":w0=!0;break;case"contextmenu":case"mouseup":case"dragend":w0=!1,iS(ft,C,at);break;case"selectionchange":if(aI)break;case"keydown":case"keyup":iS(ft,C,at)}var $t;if(m0)e:{switch(u){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Wa?W_(u,C)&&(Gt="onCompositionEnd"):u==="keydown"&&C.keyCode===229&&(Gt="onCompositionStart");Gt&&($_&&C.locale!=="ko"&&(Wa||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Wa&&($t=D_()):(Xs=at,d0="value"in Xs?Xs.value:Xs.textContent,Wa=!0)),pr=Wf(We,Gt),0<pr.length&&(Gt=new F_(Gt,u,null,C,at),ft.push({event:Gt,listeners:pr}),$t?Gt.data=$t:($t=V_(C),$t!==null&&(Gt.data=$t)))),($t=Z9?X9(u,C):Q9(u,C))&&(Gt=Wf(We,"onBeforeInput"),0<Gt.length&&(pr=new F_("onBeforeInput","beforeinput",null,C,at),ft.push({event:pr,listeners:Gt}),pr.data=$t)),qI(ft,u,We,C,at)}T6(ft,m)})}function fu(u,m,C){return{instance:u,listener:m,currentTarget:C}}function Wf(u,m){for(var C=m+"Capture",I=[];u!==null;){var O=u,W=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||W===null||(O=Rc(u,C),O!=null&&I.unshift(fu(u,O,W)),O=Rc(u,m),O!=null&&I.push(fu(u,O,W))),u.tag===3)return I;u=u.return}return[]}function ml(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function R6(u,m,C,I,O){for(var W=m._reactName,le=[];C!==null&&C!==I;){var de=C,Se=de.alternate,We=de.stateNode;if(de=de.tag,Se!==null&&Se===I)break;de!==5&&de!==26&&de!==27||We===null||(Se=We,O?(We=Rc(C,W),We!=null&&le.unshift(fu(C,We,Se))):O||(We=Rc(C,W),We!=null&&le.push(fu(C,We,Se)))),C=C.return}le.length!==0&&u.push({event:m,listeners:le})}var GI=/\r\n?/g,KI=/\u0000|\uFFFD/g;function E6(u){return(typeof u=="string"?u:""+u).replace(GI,`
`).replace(KI,"")}function I6(u,m){return m=E6(m),E6(u)===m}function Vf(){}function Ir(u,m,C,I,O,W){switch(C){case"children":typeof I=="string"?m==="body"||m==="textarea"&&I===""||Qn(u,I):(typeof I=="number"||typeof I=="bigint")&&m!=="body"&&Qn(u,""+I);break;case"className":fr(u,"class",I);break;case"tabIndex":fr(u,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":fr(u,C,I);break;case"style":B_(u,I,W);break;case"data":if(m!=="object"){fr(u,"data",I);break}case"src":case"href":if(I===""&&(m!=="a"||C!=="href")){u.removeAttribute(C);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){u.removeAttribute(C);break}I=Qd(""+I),u.setAttribute(C,I);break;case"action":case"formAction":if(typeof I=="function"){u.setAttribute(C,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(C==="formAction"?(m!=="input"&&Ir(u,m,"name",O.name,O,null),Ir(u,m,"formEncType",O.formEncType,O,null),Ir(u,m,"formMethod",O.formMethod,O,null),Ir(u,m,"formTarget",O.formTarget,O,null)):(Ir(u,m,"encType",O.encType,O,null),Ir(u,m,"method",O.method,O,null),Ir(u,m,"target",O.target,O,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){u.removeAttribute(C);break}I=Qd(""+I),u.setAttribute(C,I);break;case"onClick":I!=null&&(u.onclick=Vf);break;case"onScroll":I!=null&&vr("scroll",u);break;case"onScrollEnd":I!=null&&vr("scrollend",u);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(n(61));if(C=I.__html,C!=null){if(O.children!=null)throw Error(n(60));u.innerHTML=C}}break;case"multiple":u.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":u.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){u.removeAttribute("xlink:href");break}C=Qd(""+I),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",C);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?u.setAttribute(C,""+I):u.removeAttribute(C);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?u.setAttribute(C,""):u.removeAttribute(C);break;case"capture":case"download":I===!0?u.setAttribute(C,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?u.setAttribute(C,I):u.removeAttribute(C);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?u.setAttribute(C,I):u.removeAttribute(C);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?u.removeAttribute(C):u.setAttribute(C,I);break;case"popover":vr("beforetoggle",u),vr("toggle",u),Kt(u,"popover",I);break;case"xlinkActuate":or(u,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":or(u,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":or(u,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":or(u,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":or(u,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":or(u,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":or(u,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":or(u,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":or(u,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":Kt(u,"is",I);break;case"innerText":case"textContent":break;default:(!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(C=k9.get(C)||C,Kt(u,C,I))}}function Hg(u,m,C,I,O,W){switch(C){case"style":B_(u,I,W);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(n(61));if(C=I.__html,C!=null){if(O.children!=null)throw Error(n(60));u.innerHTML=C}}break;case"children":typeof I=="string"?Qn(u,I):(typeof I=="number"||typeof I=="bigint")&&Qn(u,""+I);break;case"onScroll":I!=null&&vr("scroll",u);break;case"onScrollEnd":I!=null&&vr("scrollend",u);break;case"onClick":I!=null&&(u.onclick=Vf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Le.hasOwnProperty(C))e:{if(C[0]==="o"&&C[1]==="n"&&(O=C.endsWith("Capture"),m=C.slice(2,O?C.length-7:void 0),W=u[Ue]||null,W=W!=null?W[C]:null,typeof W=="function"&&u.removeEventListener(m,W,O),typeof I=="function")){typeof W!="function"&&W!==null&&(C in u?u[C]=null:u.hasAttribute(C)&&u.removeAttribute(C)),u.addEventListener(m,I,O);break e}C in u?u[C]=I:I===!0?u.setAttribute(C,""):Kt(u,C,I)}}}function Nn(u,m,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vr("error",u),vr("load",u);var I=!1,O=!1,W;for(W in C)if(C.hasOwnProperty(W)){var le=C[W];if(le!=null)switch(W){case"src":I=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Ir(u,m,W,le,C,null)}}O&&Ir(u,m,"srcSet",C.srcSet,C,null),I&&Ir(u,m,"src",C.src,C,null);return;case"input":vr("invalid",u);var de=W=le=O=null,Se=null,We=null;for(I in C)if(C.hasOwnProperty(I)){var at=C[I];if(at!=null)switch(I){case"name":O=at;break;case"type":le=at;break;case"checked":Se=at;break;case"defaultChecked":We=at;break;case"value":W=at;break;case"defaultValue":de=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,m));break;default:Ir(u,m,I,at,C,null)}}dt(u,W,de,Se,We,le,O,!1),Wo(u);return;case"select":vr("invalid",u),I=le=W=null;for(O in C)if(C.hasOwnProperty(O)&&(de=C[O],de!=null))switch(O){case"value":W=de;break;case"defaultValue":le=de;break;case"multiple":I=de;default:Ir(u,m,O,de,C,null)}m=W,C=le,u.multiple=!!I,m!=null?ut(u,!!I,m,!1):C!=null&&ut(u,!!I,C,!0);return;case"textarea":vr("invalid",u),W=O=I=null;for(le in C)if(C.hasOwnProperty(le)&&(de=C[le],de!=null))switch(le){case"value":I=de;break;case"defaultValue":O=de;break;case"children":W=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(91));break;default:Ir(u,m,le,de,C,null)}Nr(u,I,O,W),Wo(u);return;case"option":for(Se in C)if(C.hasOwnProperty(Se)&&(I=C[Se],I!=null))switch(Se){case"selected":u.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Ir(u,m,Se,I,C,null)}return;case"dialog":vr("beforetoggle",u),vr("toggle",u),vr("cancel",u),vr("close",u);break;case"iframe":case"object":vr("load",u);break;case"video":case"audio":for(I=0;I<du.length;I++)vr(du[I],u);break;case"image":vr("error",u),vr("load",u);break;case"details":vr("toggle",u);break;case"embed":case"source":case"link":vr("error",u),vr("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in C)if(C.hasOwnProperty(We)&&(I=C[We],I!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Ir(u,m,We,I,C,null)}return;default:if(o0(m)){for(at in C)C.hasOwnProperty(at)&&(I=C[at],I!==void 0&&Hg(u,m,at,I,C,void 0));return}}for(de in C)C.hasOwnProperty(de)&&(I=C[de],I!=null&&Ir(u,m,de,I,C,null))}function YI(u,m,C,I){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,W=null,le=null,de=null,Se=null,We=null,at=null;for(et in C){var ft=C[et];if(C.hasOwnProperty(et)&&ft!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":Se=ft;default:I.hasOwnProperty(et)||Ir(u,m,et,null,I,ft)}}for(var Ke in I){var et=I[Ke];if(ft=C[Ke],I.hasOwnProperty(Ke)&&(et!=null||ft!=null))switch(Ke){case"type":W=et;break;case"name":O=et;break;case"checked":We=et;break;case"defaultChecked":at=et;break;case"value":le=et;break;case"defaultValue":de=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,m));break;default:et!==ft&&Ir(u,m,Ke,et,I,ft)}}tt(u,le,de,Se,We,at,W,O);return;case"select":et=le=de=Ke=null;for(W in C)if(Se=C[W],C.hasOwnProperty(W)&&Se!=null)switch(W){case"value":break;case"multiple":et=Se;default:I.hasOwnProperty(W)||Ir(u,m,W,null,I,Se)}for(O in I)if(W=I[O],Se=C[O],I.hasOwnProperty(O)&&(W!=null||Se!=null))switch(O){case"value":Ke=W;break;case"defaultValue":de=W;break;case"multiple":le=W;default:W!==Se&&Ir(u,m,O,W,I,Se)}m=de,C=le,I=et,Ke!=null?ut(u,!!C,Ke,!1):!!I!=!!C&&(m!=null?ut(u,!!C,m,!0):ut(u,!!C,C?[]:"",!1));return;case"textarea":et=Ke=null;for(de in C)if(O=C[de],C.hasOwnProperty(de)&&O!=null&&!I.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:Ir(u,m,de,null,I,O)}for(le in I)if(O=I[le],W=C[le],I.hasOwnProperty(le)&&(O!=null||W!=null))switch(le){case"value":Ke=O;break;case"defaultValue":et=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:O!==W&&Ir(u,m,le,O,I,W)}qt(u,Ke,et);return;case"option":for(var Jt in C)if(Ke=C[Jt],C.hasOwnProperty(Jt)&&Ke!=null&&!I.hasOwnProperty(Jt))switch(Jt){case"selected":u.selected=!1;break;default:Ir(u,m,Jt,null,I,Ke)}for(Se in I)if(Ke=I[Se],et=C[Se],I.hasOwnProperty(Se)&&Ke!==et&&(Ke!=null||et!=null))switch(Se){case"selected":u.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:Ir(u,m,Se,Ke,I,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in C)Ke=C[Wt],C.hasOwnProperty(Wt)&&Ke!=null&&!I.hasOwnProperty(Wt)&&Ir(u,m,Wt,null,I,Ke);for(We in I)if(Ke=I[We],et=C[We],I.hasOwnProperty(We)&&Ke!==et&&(Ke!=null||et!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(n(137,m));break;default:Ir(u,m,We,Ke,I,et)}return;default:if(o0(m)){for(var zr in C)Ke=C[zr],C.hasOwnProperty(zr)&&Ke!==void 0&&!I.hasOwnProperty(zr)&&Hg(u,m,zr,void 0,I,Ke);for(at in I)Ke=I[at],et=C[at],!I.hasOwnProperty(at)||Ke===et||Ke===void 0&&et===void 0||Hg(u,m,at,Ke,I,et);return}}for(var De in C)Ke=C[De],C.hasOwnProperty(De)&&Ke!=null&&!I.hasOwnProperty(De)&&Ir(u,m,De,null,I,Ke);for(ft in I)Ke=I[ft],et=C[ft],!I.hasOwnProperty(ft)||Ke===et||Ke==null&&et==null||Ir(u,m,ft,Ke,I,et)}var Wg=null,Vg=null;function Gf(u){return u.nodeType===9?u:u.ownerDocument}function z6(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B6(u,m){if(u===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&m==="foreignObject"?0:u}function Gg(u,m){return u==="textarea"||u==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Kg=null;function JI(){var u=window.event;return u&&u.type==="popstate"?u===Kg?!1:(Kg=u,!0):(Kg=null,!1)}var P6=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,N6=typeof Promise=="function"?Promise:void 0,XI=typeof queueMicrotask=="function"?queueMicrotask:typeof N6<"u"?function(u){return N6.resolve(null).then(u).catch(QI)}:P6;function QI(u){setTimeout(function(){throw u})}function go(u){return u==="head"}function D6(u,m){var C=m,I=0,O=0;do{var W=C.nextSibling;if(u.removeChild(C),W&&W.nodeType===8)if(C=W.data,C==="/$"){if(0<I&&8>I){C=I;var le=u.ownerDocument;if(C&1&&hu(le.documentElement),C&2&&hu(le.body),C&4)for(C=le.head,hu(C),le=C.firstChild;le;){var de=le.nextSibling,Se=le.nodeName;le[Ye]||Se==="SCRIPT"||Se==="STYLE"||Se==="LINK"&&le.rel.toLowerCase()==="stylesheet"||C.removeChild(le),le=de}}if(O===0){u.removeChild(W),wu(m);return}O--}else C==="$"||C==="$?"||C==="$!"?O++:I=C.charCodeAt(0)-48;else I=0;C=W}while(C);wu(m)}function Yg(u){var m=u.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var C=m;switch(m=m.nextSibling,C.nodeName){case"HTML":case"HEAD":case"BODY":Yg(C),Ut(C);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(C.rel.toLowerCase()==="stylesheet")continue}u.removeChild(C)}}function ez(u,m,C,I){for(;u.nodeType===1;){var O=C;if(u.nodeName.toLowerCase()!==m.toLowerCase()){if(!I&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(I){if(!u[Ye])switch(m){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(W=u.getAttribute("rel"),W==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(W!==O.rel||u.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||u.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||u.getAttribute("title")!==(O.title==null?null:O.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(W=u.getAttribute("src"),(W!==(O.src==null?null:O.src)||u.getAttribute("type")!==(O.type==null?null:O.type)||u.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&W&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(m==="input"&&u.type==="hidden"){var W=O.name==null?null:""+O.name;if(O.type==="hidden"&&u.getAttribute("name")===W)return u}else return u;if(u=ts(u.nextSibling),u===null)break}return null}function tz(u,m,C){if(m==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!C||(u=ts(u.nextSibling),u===null))return null;return u}function Jg(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function rz(u,m){var C=u.ownerDocument;if(u.data!=="$?"||C.readyState==="complete")m();else{var I=function(){m(),C.removeEventListener("DOMContentLoaded",I)};C.addEventListener("DOMContentLoaded",I),u._reactRetry=I}}function ts(u){for(;u!=null;u=u.nextSibling){var m=u.nodeType;if(m===1||m===3)break;if(m===8){if(m=u.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return u}var Zg=null;function L6(u){u=u.previousSibling;for(var m=0;u;){if(u.nodeType===8){var C=u.data;if(C==="$"||C==="$!"||C==="$?"){if(m===0)return u;m--}else C==="/$"&&m++}u=u.previousSibling}return null}function O6(u,m,C){switch(m=Gf(C),u){case"html":if(u=m.documentElement,!u)throw Error(n(452));return u;case"head":if(u=m.head,!u)throw Error(n(453));return u;case"body":if(u=m.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function hu(u){for(var m=u.attributes;m.length;)u.removeAttributeNode(m[0]);Ut(u)}var Pi=new Map,F6=new Set;function Kf(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Os=M.d;M.d={f:nz,r:iz,D:sz,C:oz,L:az,m:lz,X:uz,S:cz,M:dz};function nz(){var u=Os.f(),m=Of();return u||m}function iz(u){var m=xe(u);m!==null&&m.tag===5&&m.type==="form"?o2(m):Os.r(u)}var yl=typeof document>"u"?null:document;function U6(u,m,C){var I=yl;if(I&&typeof m=="string"&&m){var O=Re(m);O='link[rel="'+u+'"][href="'+O+'"]',typeof C=="string"&&(O+='[crossorigin="'+C+'"]'),F6.has(O)||(F6.add(O),u={rel:u,crossOrigin:C,href:m},I.querySelector(O)===null&&(m=I.createElement("link"),Nn(m,"link",u),wt(m),I.head.appendChild(m)))}}function sz(u){Os.D(u),U6("dns-prefetch",u,null)}function oz(u,m){Os.C(u,m),U6("preconnect",u,m)}function az(u,m,C){Os.L(u,m,C);var I=yl;if(I&&u&&m){var O='link[rel="preload"][as="'+Re(m)+'"]';m==="image"&&C&&C.imageSrcSet?(O+='[imagesrcset="'+Re(C.imageSrcSet)+'"]',typeof C.imageSizes=="string"&&(O+='[imagesizes="'+Re(C.imageSizes)+'"]')):O+='[href="'+Re(u)+'"]';var W=O;switch(m){case"style":W=vl(u);break;case"script":W=xl(u)}Pi.has(W)||(u=y({rel:"preload",href:m==="image"&&C&&C.imageSrcSet?void 0:u,as:m},C),Pi.set(W,u),I.querySelector(O)!==null||m==="style"&&I.querySelector(pu(W))||m==="script"&&I.querySelector(gu(W))||(m=I.createElement("link"),Nn(m,"link",u),wt(m),I.head.appendChild(m)))}}function lz(u,m){Os.m(u,m);var C=yl;if(C&&u){var I=m&&typeof m.as=="string"?m.as:"script",O='link[rel="modulepreload"][as="'+Re(I)+'"][href="'+Re(u)+'"]',W=O;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=xl(u)}if(!Pi.has(W)&&(u=y({rel:"modulepreload",href:u},m),Pi.set(W,u),C.querySelector(O)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(C.querySelector(gu(W)))return}I=C.createElement("link"),Nn(I,"link",u),wt(I),C.head.appendChild(I)}}}function cz(u,m,C){Os.S(u,m,C);var I=yl;if(I&&u){var O=ct(I).hoistableStyles,W=vl(u);m=m||"default";var le=O.get(W);if(!le){var de={loading:0,preload:null};if(le=I.querySelector(pu(W)))de.loading=5;else{u=y({rel:"stylesheet",href:u,"data-precedence":m},C),(C=Pi.get(W))&&Xg(u,C);var Se=le=I.createElement("link");wt(Se),Nn(Se,"link",u),Se._p=new Promise(function(We,at){Se.onload=We,Se.onerror=at}),Se.addEventListener("load",function(){de.loading|=1}),Se.addEventListener("error",function(){de.loading|=2}),de.loading|=4,Yf(le,m,I)}le={type:"stylesheet",instance:le,count:1,state:de},O.set(W,le)}}}function uz(u,m){Os.X(u,m);var C=yl;if(C&&u){var I=ct(C).hoistableScripts,O=xl(u),W=I.get(O);W||(W=C.querySelector(gu(O)),W||(u=y({src:u,async:!0},m),(m=Pi.get(O))&&Qg(u,m),W=C.createElement("script"),wt(W),Nn(W,"link",u),C.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},I.set(O,W))}}function dz(u,m){Os.M(u,m);var C=yl;if(C&&u){var I=ct(C).hoistableScripts,O=xl(u),W=I.get(O);W||(W=C.querySelector(gu(O)),W||(u=y({src:u,async:!0,type:"module"},m),(m=Pi.get(O))&&Qg(u,m),W=C.createElement("script"),wt(W),Nn(W,"link",u),C.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},I.set(O,W))}}function $6(u,m,C,I){var O=(O=te.current)?Kf(O):null;if(!O)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof C.precedence=="string"&&typeof C.href=="string"?(m=vl(C.href),C=ct(O).hoistableStyles,I=C.get(m),I||(I={type:"style",instance:null,count:0,state:null},C.set(m,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(C.rel==="stylesheet"&&typeof C.href=="string"&&typeof C.precedence=="string"){u=vl(C.href);var W=ct(O).hoistableStyles,le=W.get(u);if(le||(O=O.ownerDocument||O,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(u,le),(W=O.querySelector(pu(u)))&&!W._p&&(le.instance=W,le.state.loading=5),Pi.has(u)||(C={rel:"preload",as:"style",href:C.href,crossOrigin:C.crossOrigin,integrity:C.integrity,media:C.media,hrefLang:C.hrefLang,referrerPolicy:C.referrerPolicy},Pi.set(u,C),W||fz(O,u,C,le.state))),m&&I===null)throw Error(n(528,""));return le}if(m&&I!==null)throw Error(n(529,""));return null;case"script":return m=C.async,C=C.src,typeof C=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=xl(C),C=ct(O).hoistableScripts,I=C.get(m),I||(I={type:"script",instance:null,count:0,state:null},C.set(m,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function vl(u){return'href="'+Re(u)+'"'}function pu(u){return'link[rel="stylesheet"]['+u+"]"}function q6(u){return y({},u,{"data-precedence":u.precedence,precedence:null})}function fz(u,m,C,I){u.querySelector('link[rel="preload"][as="style"]['+m+"]")?I.loading=1:(m=u.createElement("link"),I.preload=m,m.addEventListener("load",function(){return I.loading|=1}),m.addEventListener("error",function(){return I.loading|=2}),Nn(m,"link",C),wt(m),u.head.appendChild(m))}function xl(u){return'[src="'+Re(u)+'"]'}function gu(u){return"script[async]"+u}function H6(u,m,C){if(m.count++,m.instance===null)switch(m.type){case"style":var I=u.querySelector('style[data-href~="'+Re(C.href)+'"]');if(I)return m.instance=I,wt(I),I;var O=y({},C,{"data-href":C.href,"data-precedence":C.precedence,href:null,precedence:null});return I=(u.ownerDocument||u).createElement("style"),wt(I),Nn(I,"style",O),Yf(I,C.precedence,u),m.instance=I;case"stylesheet":O=vl(C.href);var W=u.querySelector(pu(O));if(W)return m.state.loading|=4,m.instance=W,wt(W),W;I=q6(C),(O=Pi.get(O))&&Xg(I,O),W=(u.ownerDocument||u).createElement("link"),wt(W);var le=W;return le._p=new Promise(function(de,Se){le.onload=de,le.onerror=Se}),Nn(W,"link",I),m.state.loading|=4,Yf(W,C.precedence,u),m.instance=W;case"script":return W=xl(C.src),(O=u.querySelector(gu(W)))?(m.instance=O,wt(O),O):(I=C,(O=Pi.get(W))&&(I=y({},C),Qg(I,O)),u=u.ownerDocument||u,O=u.createElement("script"),wt(O),Nn(O,"link",I),u.head.appendChild(O),m.instance=O);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(I=m.instance,m.state.loading|=4,Yf(I,C.precedence,u));return m.instance}function Yf(u,m,C){for(var I=C.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=I.length?I[I.length-1]:null,W=O,le=0;le<I.length;le++){var de=I[le];if(de.dataset.precedence===m)W=de;else if(W!==O)break}W?W.parentNode.insertBefore(u,W.nextSibling):(m=C.nodeType===9?C.head:C,m.insertBefore(u,m.firstChild))}function Xg(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.title==null&&(u.title=m.title)}function Qg(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.integrity==null&&(u.integrity=m.integrity)}var Jf=null;function W6(u,m,C){if(Jf===null){var I=new Map,O=Jf=new Map;O.set(C,I)}else O=Jf,I=O.get(C),I||(I=new Map,O.set(C,I));if(I.has(u))return I;for(I.set(u,null),C=C.getElementsByTagName(u),O=0;O<C.length;O++){var W=C[O];if(!(W[Ye]||W[Be]||u==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var le=W.getAttribute(m)||"";le=u+le;var de=I.get(le);de?de.push(W):I.set(le,[W])}}return I}function V6(u,m,C){u=u.ownerDocument||u,u.head.insertBefore(C,m==="title"?u.querySelector("head > title"):null)}function hz(u,m,C){if(C===1||m.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return u=m.disabled,typeof m.precedence=="string"&&u==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function G6(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var mu=null;function pz(){}function gz(u,m,C){if(mu===null)throw Error(n(475));var I=mu;if(m.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var O=vl(C.href),W=u.querySelector(pu(O));if(W){u=W._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(I.count++,I=Zf.bind(I),u.then(I,I)),m.state.loading|=4,m.instance=W,wt(W);return}W=u.ownerDocument||u,C=q6(C),(O=Pi.get(O))&&Xg(C,O),W=W.createElement("link"),wt(W);var le=W;le._p=new Promise(function(de,Se){le.onload=de,le.onerror=Se}),Nn(W,"link",C),m.instance=W}I.stylesheets===null&&(I.stylesheets=new Map),I.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(I.count++,m=Zf.bind(I),u.addEventListener("load",m),u.addEventListener("error",m))}}function mz(){if(mu===null)throw Error(n(475));var u=mu;return u.stylesheets&&u.count===0&&em(u,u.stylesheets),0<u.count?function(m){var C=setTimeout(function(){if(u.stylesheets&&em(u,u.stylesheets),u.unsuspend){var I=u.unsuspend;u.unsuspend=null,I()}},6e4);return u.unsuspend=m,function(){u.unsuspend=null,clearTimeout(C)}}:null}function Zf(){if(this.count--,this.count===0){if(this.stylesheets)em(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Xf=null;function em(u,m){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Xf=new Map,m.forEach(yz,u),Xf=null,Zf.call(u))}function yz(u,m){if(!(m.state.loading&4)){var C=Xf.get(u);if(C)var I=C.get(null);else{C=new Map,Xf.set(u,C);for(var O=u.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<O.length;W++){var le=O[W];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(C.set(le.dataset.precedence,le),I=le)}I&&C.set(null,I)}O=m.instance,le=O.getAttribute("data-precedence"),W=C.get(le)||I,W===I&&C.set(null,O),C.set(le,O),this.count++,I=Zf.bind(this),O.addEventListener("load",I),O.addEventListener("error",I),W?W.parentNode.insertBefore(O,W.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(O,u.firstChild)),m.state.loading|=4}}var yu={$$typeof:D,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function vz(u,m,C,I,O,W,le,de){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.hiddenUpdates=Ot(null),this.identifierPrefix=I,this.onUncaughtError=O,this.onCaughtError=W,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function K6(u,m,C,I,O,W,le,de,Se,We,at,ft){return u=new vz(u,m,C,le,de,Se,We,ft),m=1,W===!0&&(m|=24),W=hi(3,null,null,m),u.current=W,W.stateNode=u,m=P0(),m.refCount++,u.pooledCache=m,m.refCount++,W.memoizedState={element:I,isDehydrated:C,cache:m},O0(W),u}function Y6(u){return u?(u=Ja,u):Ja}function J6(u,m,C,I,O,W){O=Y6(O),I.context===null?I.context=O:I.pendingContext=O,I=to(m),I.payload={element:C},W=W===void 0?null:W,W!==null&&(I.callback=W),C=ro(u,I,m),C!==null&&(vi(C,u,m),Gc(C,u,m))}function Z6(u,m){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var C=u.retryLane;u.retryLane=C!==0&&C<m?C:m}}function tm(u,m){Z6(u,m),(u=u.alternate)&&Z6(u,m)}function X6(u){if(u.tag===13){var m=Ya(u,67108864);m!==null&&vi(m,u,67108864),tm(u,67108864)}}var Qf=!0;function xz(u,m,C,I){var O=b.T;b.T=null;var W=M.p;try{M.p=2,rm(u,m,C,I)}finally{M.p=W,b.T=O}}function bz(u,m,C,I){var O=b.T;b.T=null;var W=M.p;try{M.p=8,rm(u,m,C,I)}finally{M.p=W,b.T=O}}function rm(u,m,C,I){if(Qf){var O=nm(I);if(O===null)qg(u,m,I,eh,C),ek(u,I);else if(_z(O,u,m,C,I))I.stopPropagation();else if(ek(u,I),m&4&&-1<wz.indexOf(u)){for(;O!==null;){var W=xe(O);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var le=ht(W.pendingLanes);if(le!==0){var de=W;for(de.pendingLanes|=2,de.entangledLanes|=2;le;){var Se=1<<31-V(le);de.entanglements[1]|=Se,le&=~Se}ds(W),(Ar&6)===0&&(Df=Je()+500,uu(0))}}break;case 13:de=Ya(W,2),de!==null&&vi(de,W,2),Of(),tm(W,2)}if(W=nm(I),W===null&&qg(u,m,I,eh,C),W===O)break;O=W}O!==null&&I.stopPropagation()}else qg(u,m,I,null,C)}}function nm(u){return u=l0(u),im(u)}var eh=null;function im(u){if(eh=null,u=ye(u),u!==null){var m=i(u);if(m===null)u=null;else{var C=m.tag;if(C===13){if(u=d(m),u!==null)return u;u=null}else if(C===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;u=null}else m!==u&&(u=null)}}return eh=u,null}function Q6(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case ze:return 2;case vt:return 8;case he:case me:return 32;case Me:return 268435456;default:return 32}default:return 32}}var sm=!1,mo=null,yo=null,vo=null,vu=new Map,xu=new Map,xo=[],wz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ek(u,m){switch(u){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":vu.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(m.pointerId)}}function bu(u,m,C,I,O,W){return u===null||u.nativeEvent!==W?(u={blockedOn:m,domEventName:C,eventSystemFlags:I,nativeEvent:W,targetContainers:[O]},m!==null&&(m=xe(m),m!==null&&X6(m)),u):(u.eventSystemFlags|=I,m=u.targetContainers,O!==null&&m.indexOf(O)===-1&&m.push(O),u)}function _z(u,m,C,I,O){switch(m){case"focusin":return mo=bu(mo,u,m,C,I,O),!0;case"dragenter":return yo=bu(yo,u,m,C,I,O),!0;case"mouseover":return vo=bu(vo,u,m,C,I,O),!0;case"pointerover":var W=O.pointerId;return vu.set(W,bu(vu.get(W)||null,u,m,C,I,O)),!0;case"gotpointercapture":return W=O.pointerId,xu.set(W,bu(xu.get(W)||null,u,m,C,I,O)),!0}return!1}function tk(u){var m=ye(u.target);if(m!==null){var C=i(m);if(C!==null){if(m=C.tag,m===13){if(m=d(C),m!==null){u.blockedOn=m,Xe(u.priority,function(){if(C.tag===13){var I=yi();I=Ve(I);var O=Ya(C,I);O!==null&&vi(O,C,I),tm(C,I)}});return}}else if(m===3&&C.stateNode.current.memoizedState.isDehydrated){u.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}u.blockedOn=null}function th(u){if(u.blockedOn!==null)return!1;for(var m=u.targetContainers;0<m.length;){var C=nm(u.nativeEvent);if(C===null){C=u.nativeEvent;var I=new C.constructor(C.type,C);a0=I,C.target.dispatchEvent(I),a0=null}else return m=xe(C),m!==null&&X6(m),u.blockedOn=C,!1;m.shift()}return!0}function rk(u,m,C){th(u)&&C.delete(m)}function Sz(){sm=!1,mo!==null&&th(mo)&&(mo=null),yo!==null&&th(yo)&&(yo=null),vo!==null&&th(vo)&&(vo=null),vu.forEach(rk),xu.forEach(rk)}function rh(u,m){u.blockedOn===m&&(u.blockedOn=null,sm||(sm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Sz)))}var nh=null;function nk(u){nh!==u&&(nh=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){nh===u&&(nh=null);for(var m=0;m<u.length;m+=3){var C=u[m],I=u[m+1],O=u[m+2];if(typeof I!="function"){if(im(I||C)===null)continue;break}var W=xe(C);W!==null&&(u.splice(m,3),m-=3,ig(W,{pending:!0,data:O,method:C.method,action:I},I,O))}}))}function wu(u){function m(Se){return rh(Se,u)}mo!==null&&rh(mo,u),yo!==null&&rh(yo,u),vo!==null&&rh(vo,u),vu.forEach(m),xu.forEach(m);for(var C=0;C<xo.length;C++){var I=xo[C];I.blockedOn===u&&(I.blockedOn=null)}for(;0<xo.length&&(C=xo[0],C.blockedOn===null);)tk(C),C.blockedOn===null&&xo.shift();if(C=(u.ownerDocument||u).$$reactFormReplay,C!=null)for(I=0;I<C.length;I+=3){var O=C[I],W=C[I+1],le=O[Ue]||null;if(typeof W=="function")le||nk(C);else if(le){var de=null;if(W&&W.hasAttribute("formAction")){if(O=W,le=W[Ue]||null)de=le.formAction;else if(im(O)!==null)continue}else de=le.action;typeof de=="function"?C[I+1]=de:(C.splice(I,3),I-=3),nk(C)}}}function om(u){this._internalRoot=u}ih.prototype.render=om.prototype.render=function(u){var m=this._internalRoot;if(m===null)throw Error(n(409));var C=m.current,I=yi();J6(C,I,u,m,null,null)},ih.prototype.unmount=om.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var m=u.containerInfo;J6(u.current,2,null,u,null,null),Of(),m[It]=null}};function ih(u){this._internalRoot=u}ih.prototype.unstable_scheduleHydration=function(u){if(u){var m=Fe();u={blockedOn:null,target:u,priority:m};for(var C=0;C<xo.length&&m!==0&&m<xo[C].priority;C++);xo.splice(C,0,u),C===0&&tk(u)}};var ik=t.version;if(ik!=="19.1.1")throw Error(n(527,ik,"19.1.1"));M.findDOMNode=function(u){var m=u._reactInternals;if(m===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=g(m),u=u!==null?x(u):null,u=u===null?null:u.stateNode,u};var kz={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:b,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{_e=sh.inject(kz),Z=sh}catch{}}return ju.createRoot=function(u,m){if(!l(u))throw Error(n(299));var C=!1,I="",O=b2,W=w2,le=_2,de=null;return m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(W=m.onCaughtError),m.onRecoverableError!==void 0&&(le=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(de=m.unstable_transitionCallbacks)),m=K6(u,1,!1,null,null,C,I,O,W,le,de,null),u[It]=m.current,$g(u),new om(m)},ju.hydrateRoot=function(u,m,C){if(!l(u))throw Error(n(299));var I=!1,O="",W=b2,le=w2,de=_2,Se=null,We=null;return C!=null&&(C.unstable_strictMode===!0&&(I=!0),C.identifierPrefix!==void 0&&(O=C.identifierPrefix),C.onUncaughtError!==void 0&&(W=C.onUncaughtError),C.onCaughtError!==void 0&&(le=C.onCaughtError),C.onRecoverableError!==void 0&&(de=C.onRecoverableError),C.unstable_transitionCallbacks!==void 0&&(Se=C.unstable_transitionCallbacks),C.formState!==void 0&&(We=C.formState)),m=K6(u,1,!0,m,C??null,I,O,W,le,de,Se,We),m.context=Y6(null),C=m.current,I=yi(),I=Ve(I),O=to(I),O.callback=null,ro(C,O,I),C=I,m.current.lanes=C,Oe(m,C),ds(m),u[It]=m.current,$g(u),new ih(m)},ju.version="19.1.1",ju}var fj;function yN(){if(fj)return Sx.exports;fj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sx.exports=mN(),Sx.exports}var vN=yN();const xN="modulepreload",bN=function(e,t){return new URL(e,t).href},hj={},Qt=function(t,r,n){let l=Promise.resolve();if(r&&r.length>0){let x=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");l=x(r.map(y=>{if(y=bN(y,n),y in hj)return;hj[y]=!0;const w=y.endsWith(".css"),j=w?'[rel="stylesheet"]':"";if(n)for(let A=d.length-1;A>=0;A--){const E=d[A];if(E.href===y&&(!w||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${j}`))return;const _=document.createElement("link");if(_.rel=w?"stylesheet":xN,w||(_.as="script"),_.crossOrigin="",_.href=y,g&&_.setAttribute("nonce",g),document.head.appendChild(_),w)return new Promise((A,E)=>{_.addEventListener("load",A),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function i(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&i(p.reason);return t().catch(i)})};var F=fw();const Vt=Bp(F),hw=F.createContext({});function pw(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const gw=typeof window<"u",ZT=gw?F.useLayoutEffect:F.useEffect,Up=F.createContext(null);function mw(e,t){e.indexOf(t)===-1&&e.push(t)}function yw(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Ws=(e,t,r)=>r>t?t:r<e?e:r;let vw=()=>{};const Vs={},XT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function QT(e){return typeof e=="object"&&e!==null}const eA=e=>/^0[^.\s]+$/u.test(e);function xw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Hi=e=>e,wN=(e,t)=>r=>t(e(r)),Pd=(...e)=>e.reduce(wN),fd=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class bw{constructor(){this.subscriptions=[]}add(t){return mw(this.subscriptions,t),()=>yw(this.subscriptions,t)}notify(t,r,n){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,r,n);else for(let i=0;i<l;i++){const d=this.subscriptions[i];d&&d(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ms=e=>e*1e3,ys=e=>e/1e3;function tA(e,t){return t?e*(1e3/t):0}const rA=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,_N=1e-7,SN=12;function kN(e,t,r,n,l){let i,d,p=0;do d=t+(r-t)/2,i=rA(d,n,l)-e,i>0?r=d:t=d;while(Math.abs(i)>_N&&++p<SN);return d}function Nd(e,t,r,n){if(e===t&&r===n)return Hi;const l=i=>kN(i,0,1,e,r);return i=>i===0||i===1?i:rA(l(i),t,n)}const nA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iA=e=>t=>1-e(1-t),sA=Nd(.33,1.53,.69,.99),ww=iA(sA),oA=nA(ww),aA=e=>(e*=2)<1?.5*ww(e):.5*(2-Math.pow(2,-10*(e-1))),_w=e=>1-Math.sin(Math.acos(e)),lA=iA(_w),cA=nA(_w),jN=Nd(.42,0,1,1),MN=Nd(0,0,.58,1),uA=Nd(.42,0,.58,1),CN=e=>Array.isArray(e)&&typeof e[0]!="number",dA=e=>Array.isArray(e)&&typeof e[0]=="number",TN={linear:Hi,easeIn:jN,easeInOut:uA,easeOut:MN,circIn:_w,circInOut:cA,circOut:lA,backIn:ww,backInOut:oA,backOut:sA,anticipate:aA},AN=e=>typeof e=="string",pj=e=>{if(dA(e)){vw(e.length===4);const[t,r,n,l]=e;return Nd(t,r,n,l)}else if(AN(e))return TN[e];return e},wh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function RN(e,t){let r=new Set,n=new Set,l=!1,i=!1;const d=new WeakSet;let p={delta:0,timestamp:0,isProcessing:!1};function g(y){d.has(y)&&(x.schedule(y),e()),y(p)}const x={schedule:(y,w=!1,j=!1)=>{const A=j&&l?r:n;return w&&d.add(y),A.has(y)||A.add(y),y},cancel:y=>{n.delete(y),d.delete(y)},process:y=>{if(p=y,l){i=!0;return}l=!0,[r,n]=[n,r],r.forEach(g),r.clear(),l=!1,i&&(i=!1,x.process(y))}};return x}const EN=40;function fA(e,t){let r=!1,n=!0;const l={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,d=wh.reduce((D,U)=>(D[U]=RN(i),D),{}),{setup:p,read:g,resolveKeyframes:x,preUpdate:y,update:w,preRender:j,render:_,postRender:A}=d,E=()=>{const D=Vs.useManualTiming?l.timestamp:performance.now();r=!1,Vs.useManualTiming||(l.delta=n?1e3/60:Math.max(Math.min(D-l.timestamp,EN),1)),l.timestamp=D,l.isProcessing=!0,p.process(l),g.process(l),x.process(l),y.process(l),w.process(l),j.process(l),_.process(l),A.process(l),l.isProcessing=!1,r&&t&&(n=!1,e(E))},P=()=>{r=!0,n=!0,l.isProcessing||e(E)};return{schedule:wh.reduce((D,U)=>{const G=d[U];return D[U]=($,re=!1,Q=!1)=>(r||P(),G.schedule($,re,Q)),D},{}),cancel:D=>{for(let U=0;U<wh.length;U++)d[wh[U]].cancel(D)},state:l,steps:d}}const{schedule:Yr,cancel:Po,state:Ln,steps:Tx}=fA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hi,!0);let Xh;function IN(){Xh=void 0}const ai={now:()=>(Xh===void 0&&ai.set(Ln.isProcessing||Vs.useManualTiming?Ln.timestamp:performance.now()),Xh),set:e=>{Xh=e,queueMicrotask(IN)}},hA=e=>t=>typeof t=="string"&&t.startsWith(e),Sw=hA("--"),zN=hA("var(--"),kw=e=>zN(e)?BN.test(e.split("/*")[0].trim()):!1,BN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hd={...sc,transform:e=>Ws(0,1,e)},_h={...sc,default:1},Qu=e=>Math.round(e*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PN(e){return e==null}const NN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Mw=(e,t)=>r=>!!(typeof r=="string"&&NN.test(r)&&r.startsWith(e)||t&&!PN(r)&&Object.prototype.hasOwnProperty.call(r,t)),pA=(e,t,r)=>n=>{if(typeof n!="string")return n;const[l,i,d,p]=n.match(jw);return{[e]:parseFloat(l),[t]:parseFloat(i),[r]:parseFloat(d),alpha:p!==void 0?parseFloat(p):1}},DN=e=>Ws(0,255,e),Ax={...sc,transform:e=>Math.round(DN(e))},_a={test:Mw("rgb","red"),parse:pA("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ax.transform(e)+", "+Ax.transform(t)+", "+Ax.transform(r)+", "+Qu(hd.transform(n))+")"};function LN(e){let t="",r="",n="",l="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),l=e.substring(4,5),t+=t,r+=r,n+=n,l+=l),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:l?parseInt(l,16)/255:1}}const P1={test:Mw("#"),parse:LN,transform:_a.transform},Dd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mo=Dd("deg"),vs=Dd("%"),Zt=Dd("px"),ON=Dd("vh"),FN=Dd("vw"),gj={...vs,parse:e=>vs.parse(e)/100,transform:e=>vs.transform(e*100)},Rl={test:Mw("hsl","hue"),parse:pA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+vs.transform(Qu(t))+", "+vs.transform(Qu(r))+", "+Qu(hd.transform(n))+")"},vn={test:e=>_a.test(e)||P1.test(e)||Rl.test(e),parse:e=>_a.test(e)?_a.parse(e):Rl.test(e)?Rl.parse(e):P1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?_a.transform(e):Rl.transform(e),getAnimatableNone:e=>{const t=vn.parse(e);return t.alpha=0,vn.transform(t)}},UN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $N(e){return isNaN(e)&&typeof e=="string"&&(e.match(jw)?.length||0)+(e.match(UN)?.length||0)>0}const gA="number",mA="color",qN="var",HN="var(",mj="${}",WN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pd(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},l=[];let i=0;const p=t.replace(WN,g=>(vn.test(g)?(n.color.push(i),l.push(mA),r.push(vn.parse(g))):g.startsWith(HN)?(n.var.push(i),l.push(qN),r.push(g)):(n.number.push(i),l.push(gA),r.push(parseFloat(g))),++i,mj)).split(mj);return{values:r,split:p,indexes:n,types:l}}function yA(e){return pd(e).values}function vA(e){const{split:t,types:r}=pd(e),n=t.length;return l=>{let i="";for(let d=0;d<n;d++)if(i+=t[d],l[d]!==void 0){const p=r[d];p===gA?i+=Qu(l[d]):p===mA?i+=vn.transform(l[d]):i+=l[d]}return i}}const VN=e=>typeof e=="number"?0:vn.test(e)?vn.getAnimatableNone(e):e;function GN(e){const t=yA(e);return vA(e)(t.map(VN))}const No={test:$N,parse:yA,createTransformer:vA,getAnimatableNone:GN};function Rx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function KN({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let l=0,i=0,d=0;if(!t)l=i=d=r;else{const p=r<.5?r*(1+t):r+t-r*t,g=2*r-p;l=Rx(g,p,e+1/3),i=Rx(g,p,e),d=Rx(g,p,e-1/3)}return{red:Math.round(l*255),green:Math.round(i*255),blue:Math.round(d*255),alpha:n}}function op(e,t){return r=>r>0?t:e}const en=(e,t,r)=>e+(t-e)*r,Ex=(e,t,r)=>{const n=e*e,l=r*(t*t-n)+n;return l<0?0:Math.sqrt(l)},YN=[P1,_a,Rl],JN=e=>YN.find(t=>t.test(e));function yj(e){const t=JN(e);if(!t)return!1;let r=t.parse(e);return t===Rl&&(r=KN(r)),r}const vj=(e,t)=>{const r=yj(e),n=yj(t);if(!r||!n)return op(e,t);const l={...r};return i=>(l.red=Ex(r.red,n.red,i),l.green=Ex(r.green,n.green,i),l.blue=Ex(r.blue,n.blue,i),l.alpha=en(r.alpha,n.alpha,i),_a.transform(l))},N1=new Set(["none","hidden"]);function ZN(e,t){return N1.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function XN(e,t){return r=>en(e,t,r)}function Cw(e){return typeof e=="number"?XN:typeof e=="string"?kw(e)?op:vn.test(e)?vj:tD:Array.isArray(e)?xA:typeof e=="object"?vn.test(e)?vj:QN:op}function xA(e,t){const r=[...e],n=r.length,l=e.map((i,d)=>Cw(i)(i,t[d]));return i=>{for(let d=0;d<n;d++)r[d]=l[d](i);return r}}function QN(e,t){const r={...e,...t},n={};for(const l in r)e[l]!==void 0&&t[l]!==void 0&&(n[l]=Cw(e[l])(e[l],t[l]));return l=>{for(const i in n)r[i]=n[i](l);return r}}function eD(e,t){const r=[],n={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const i=t.types[l],d=e.indexes[i][n[i]],p=e.values[d]??0;r[l]=p,n[i]++}return r}const tD=(e,t)=>{const r=No.createTransformer(t),n=pd(e),l=pd(t);return n.indexes.var.length===l.indexes.var.length&&n.indexes.color.length===l.indexes.color.length&&n.indexes.number.length>=l.indexes.number.length?N1.has(e)&&!l.values.length||N1.has(t)&&!n.values.length?ZN(e,t):Pd(xA(eD(n,l),l.values),r):op(e,t)};function bA(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?en(e,t,r):Cw(e)(e,t)}const rD=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Yr.update(t,r),stop:()=>Po(t),now:()=>Ln.isProcessing?Ln.timestamp:ai.now()}},wA=(e,t,r=10)=>{let n="";const l=Math.max(Math.round(t/r),2);for(let i=0;i<l;i++)n+=Math.round(e(i/(l-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ap=2e4;function Tw(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<ap;)t+=r,n=e.next(t);return t>=ap?1/0:t}function nD(e,t=100,r){const n=r({...e,keyframes:[0,t]}),l=Math.min(Tw(n),ap);return{type:"keyframes",ease:i=>n.next(l*i).value/t,duration:ys(l)}}const iD=5;function _A(e,t,r){const n=Math.max(t-iD,0);return tA(r-e(n),t-n)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ix=.001;function sD({duration:e=nn.duration,bounce:t=nn.bounce,velocity:r=nn.velocity,mass:n=nn.mass}){let l,i,d=1-t;d=Ws(nn.minDamping,nn.maxDamping,d),e=Ws(nn.minDuration,nn.maxDuration,ys(e)),d<1?(l=x=>{const y=x*d,w=y*e,j=y-r,_=D1(x,d),A=Math.exp(-w);return Ix-j/_*A},i=x=>{const w=x*d*e,j=w*r+r,_=Math.pow(d,2)*Math.pow(x,2)*e,A=Math.exp(-w),E=D1(Math.pow(x,2),d);return(-l(x)+Ix>0?-1:1)*((j-_)*A)/E}):(l=x=>{const y=Math.exp(-x*e),w=(x-r)*e+1;return-Ix+y*w},i=x=>{const y=Math.exp(-x*e),w=(r-x)*(e*e);return y*w});const p=5/e,g=aD(l,i,p);if(e=ms(e),isNaN(g))return{stiffness:nn.stiffness,damping:nn.damping,duration:e};{const x=Math.pow(g,2)*n;return{stiffness:x,damping:d*2*Math.sqrt(n*x),duration:e}}}const oD=12;function aD(e,t,r){let n=r;for(let l=1;l<oD;l++)n=n-e(n)/t(n);return n}function D1(e,t){return e*Math.sqrt(1-t*t)}const lD=["duration","bounce"],cD=["stiffness","damping","mass"];function xj(e,t){return t.some(r=>e[r]!==void 0)}function uD(e){let t={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...e};if(!xj(e,cD)&&xj(e,lD))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),l=n*n,i=2*Ws(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:nn.mass,stiffness:l,damping:i}}else{const r=sD(e);t={...t,...r,mass:nn.mass},t.isResolvedFromDuration=!0}return t}function lp(e=nn.visualDuration,t=nn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:l}=r;const i=r.keyframes[0],d=r.keyframes[r.keyframes.length-1],p={done:!1,value:i},{stiffness:g,damping:x,mass:y,duration:w,velocity:j,isResolvedFromDuration:_}=uD({...r,velocity:-ys(r.velocity||0)}),A=j||0,E=x/(2*Math.sqrt(g*y)),P=d-i,z=ys(Math.sqrt(g/y)),B=Math.abs(P)<5;n||(n=B?nn.restSpeed.granular:nn.restSpeed.default),l||(l=B?nn.restDelta.granular:nn.restDelta.default);let D;if(E<1){const G=D1(z,E);D=$=>{const re=Math.exp(-E*z*$);return d-re*((A+E*z*P)/G*Math.sin(G*$)+P*Math.cos(G*$))}}else if(E===1)D=G=>d-Math.exp(-z*G)*(P+(A+z*P)*G);else{const G=z*Math.sqrt(E*E-1);D=$=>{const re=Math.exp(-E*z*$),Q=Math.min(G*$,300);return d-re*((A+E*z*P)*Math.sinh(Q)+G*P*Math.cosh(Q))/G}}const U={calculatedDuration:_&&w||null,next:G=>{const $=D(G);if(_)p.done=G>=w;else{let re=G===0?A:0;E<1&&(re=G===0?ms(A):_A(D,G,$));const Q=Math.abs(re)<=n,H=Math.abs(d-$)<=l;p.done=Q&&H}return p.value=p.done?d:$,p},toString:()=>{const G=Math.min(Tw(U),ap),$=wA(re=>U.next(G*re).value,G,30);return G+"ms "+$},toTransition:()=>{}};return U}lp.applyToOptions=e=>{const t=nD(e,100,lp);return e.ease=t.ease,e.duration=ms(t.duration),e.type="keyframes",e};function L1({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:l=10,bounceStiffness:i=500,modifyTarget:d,min:p,max:g,restDelta:x=.5,restSpeed:y}){const w=e[0],j={done:!1,value:w},_=Q=>p!==void 0&&Q<p||g!==void 0&&Q>g,A=Q=>p===void 0?g:g===void 0||Math.abs(p-Q)<Math.abs(g-Q)?p:g;let E=r*t;const P=w+E,z=d===void 0?P:d(P);z!==P&&(E=z-w);const B=Q=>-E*Math.exp(-Q/n),D=Q=>z+B(Q),U=Q=>{const H=B(Q),Y=D(Q);j.done=Math.abs(H)<=x,j.value=j.done?z:Y};let G,$;const re=Q=>{_(j.value)&&(G=Q,$=lp({keyframes:[j.value,A(j.value)],velocity:_A(D,Q,j.value),damping:l,stiffness:i,restDelta:x,restSpeed:y}))};return re(0),{calculatedDuration:null,next:Q=>{let H=!1;return!$&&G===void 0&&(H=!0,U(Q),re(Q)),G!==void 0&&Q>=G?$.next(Q-G):(!H&&U(Q),j)}}}function dD(e,t,r){const n=[],l=r||Vs.mix||bA,i=e.length-1;for(let d=0;d<i;d++){let p=l(e[d],e[d+1]);if(t){const g=Array.isArray(t)?t[d]||Hi:t;p=Pd(g,p)}n.push(p)}return n}function fD(e,t,{clamp:r=!0,ease:n,mixer:l}={}){const i=e.length;if(vw(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const p=dD(t,n,l),g=p.length,x=y=>{if(d&&y<e[0])return t[0];let w=0;if(g>1)for(;w<e.length-2&&!(y<e[w+1]);w++);const j=fd(e[w],e[w+1],y);return p[w](j)};return r?y=>x(Ws(e[0],e[i-1],y)):x}function hD(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const l=fd(0,t,n);e.push(en(r,1,l))}}function pD(e){const t=[0];return hD(t,e.length-1),t}function gD(e,t){return e.map(r=>r*t)}function mD(e,t){return e.map(()=>t||uA).splice(0,e.length-1)}function ed({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const l=CN(n)?n.map(pj):pj(n),i={done:!1,value:t[0]},d=gD(r&&r.length===t.length?r:pD(t),e),p=fD(d,t,{ease:Array.isArray(l)?l:mD(t,l)});return{calculatedDuration:e,next:g=>(i.value=p(g),i.done=g>=e,i)}}const yD=e=>e!==null;function Aw(e,{repeat:t,repeatType:r="loop"},n,l=1){const i=e.filter(yD),p=l<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!p||n===void 0?i[p]:n}const vD={decay:L1,inertia:L1,tween:ed,keyframes:ed,spring:lp};function SA(e){typeof e.type=="string"&&(e.type=vD[e.type])}class Rw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const xD=e=>e/100;class Ew extends Rw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==ai.now()&&this.tick(ai.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;SA(t);const{type:r=ed,repeat:n=0,repeatDelay:l=0,repeatType:i,velocity:d=0}=t;let{keyframes:p}=t;const g=r||ed;g!==ed&&typeof p[0]!="number"&&(this.mixKeyframes=Pd(xD,bA(p[0],p[1])),p=[0,100]);const x=g({...t,keyframes:p});i==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...p].reverse(),velocity:-d})),x.calculatedDuration===null&&(x.calculatedDuration=Tw(x));const{calculatedDuration:y}=x;this.calculatedDuration=y,this.resolvedDuration=y+l,this.totalDuration=this.resolvedDuration*(n+1)-l,this.generator=x}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:l,mixKeyframes:i,mirroredGenerator:d,resolvedDuration:p,calculatedDuration:g}=this;if(this.startTime===null)return n.next(0);const{delay:x=0,keyframes:y,repeat:w,repeatType:j,repeatDelay:_,type:A,onUpdate:E,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const z=this.currentTime-x*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?z<0:z>l;this.currentTime=Math.max(z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let D=this.currentTime,U=n;if(w){const Q=Math.min(this.currentTime,l)/p;let H=Math.floor(Q),Y=Q%1;!Y&&Q>=1&&(Y=1),Y===1&&H--,H=Math.min(H,w+1),!!(H%2)&&(j==="reverse"?(Y=1-Y,_&&(Y-=_/p)):j==="mirror"&&(U=d)),D=Ws(0,1,Y)*p}const G=B?{done:!1,value:y[0]}:U.next(D);i&&(G.value=i(G.value));let{done:$}=G;!B&&g!==null&&($=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const re=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return re&&A!==L1&&(G.value=Aw(y,this.options,P,this.speed)),E&&E(G.value),re&&this.finish(),G}then(t,r){return this.finished.then(t,r)}get duration(){return ys(this.calculatedDuration)}get time(){return ys(this.currentTime)}set time(t){t=ms(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ai.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ys(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=rD,startTime:r}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ai.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function bD(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Sa=e=>e*180/Math.PI,O1=e=>{const t=Sa(Math.atan2(e[1],e[0]));return F1(t)},wD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:O1,rotateZ:O1,skewX:e=>Sa(Math.atan(e[1])),skewY:e=>Sa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},F1=e=>(e=e%360,e<0&&(e+=360),e),bj=O1,wj=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),_j=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),_D={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wj,scaleY:_j,scale:e=>(wj(e)+_j(e))/2,rotateX:e=>F1(Sa(Math.atan2(e[6],e[5]))),rotateY:e=>F1(Sa(Math.atan2(-e[2],e[0]))),rotateZ:bj,rotate:bj,skewX:e=>Sa(Math.atan(e[4])),skewY:e=>Sa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function U1(e){return e.includes("scale")?1:0}function $1(e,t){if(!e||e==="none")return U1(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,l;if(r)n=_D,l=r;else{const p=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=wD,l=p}if(!l)return U1(t);const i=n[t],d=l[1].split(",").map(kD);return typeof i=="function"?i(d):d[i]}const SD=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return $1(r,t)};function kD(e){return parseFloat(e.trim())}const oc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ac=new Set(oc),Sj=e=>e===sc||e===Zt,jD=new Set(["x","y","z"]),MD=oc.filter(e=>!jD.has(e));function CD(e){const t=[];return MD.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const ja={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>$1(t,"x"),y:(e,{transform:t})=>$1(t,"y")};ja.translateX=ja.x;ja.translateY=ja.y;const Ma=new Set;let q1=!1,H1=!1,W1=!1;function kA(){if(H1){const e=Array.from(Ma).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const l=CD(n);l.length&&(r.set(n,l),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const l=r.get(n);l&&l.forEach(([i,d])=>{n.getValue(i)?.set(d)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}H1=!1,q1=!1,Ma.forEach(e=>e.complete(W1)),Ma.clear()}function jA(){Ma.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(H1=!0)})}function TD(){W1=!0,jA(),kA(),W1=!1}class Iw{constructor(t,r,n,l,i,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=l,this.element=i,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(Ma.add(this),q1||(q1=!0,Yr.read(jA),Yr.resolveKeyframes(kA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:l}=this;if(t[0]===null){const i=l?.get(),d=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const p=n.readValue(r,d);p!=null&&(t[0]=p)}t[0]===void 0&&(t[0]=d),l&&i===void 0&&l.set(t[0])}bD(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ma.delete(this)}cancel(){this.state==="scheduled"&&(Ma.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const AD=e=>e.startsWith("--");function RD(e,t,r){AD(t)?e.style.setProperty(t,r):e.style[t]=r}const ED=xw(()=>window.ScrollTimeline!==void 0),ID={};function zD(e,t){const r=xw(e);return()=>ID[t]??r()}const MA=zD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uu=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,kj={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uu([0,.65,.55,1]),circOut:Uu([.55,0,1,.45]),backIn:Uu([.31,.01,.66,-.59]),backOut:Uu([.33,1.53,.69,.99])};function CA(e,t){if(e)return typeof e=="function"?MA()?wA(e,t):"ease-out":dA(e)?Uu(e):Array.isArray(e)?e.map(r=>CA(r,t)||kj.easeOut):kj[e]}function BD(e,t,r,{delay:n=0,duration:l=300,repeat:i=0,repeatType:d="loop",ease:p="easeOut",times:g}={},x=void 0){const y={[t]:r};g&&(y.offset=g);const w=CA(p,l);Array.isArray(w)&&(y.easing=w);const j={delay:n,duration:l,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:i+1,direction:d==="reverse"?"alternate":"normal"};return x&&(j.pseudoElement=x),e.animate(y,j)}function TA(e){return typeof e=="function"&&"applyToOptions"in e}function PD({type:e,...t}){return TA(e)&&MA()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ND extends Rw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:l,pseudoElement:i,allowFlatten:d=!1,finalKeyframe:p,onComplete:g}=t;this.isPseudoElement=!!i,this.allowFlatten=d,this.options=t,vw(typeof t.type!="string");const x=PD(t);this.animation=BD(r,n,l,x,i),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const y=Aw(l,this.options,p,this.speed);this.updateMotionValue?this.updateMotionValue(y):RD(r,n,y),this.animation.cancel()}g?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ys(Number(t))}get time(){return ys(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ms(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ED()?(this.animation.timeline=t,Hi):r(this)}}const AA={anticipate:aA,backInOut:oA,circInOut:cA};function DD(e){return e in AA}function LD(e){typeof e.ease=="string"&&DD(e.ease)&&(e.ease=AA[e.ease])}const jj=10;class OD extends ND{constructor(t){LD(t),SA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:l,element:i,...d}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const p=new Ew({...d,autoplay:!1}),g=ms(this.finishedTime??this.time);r.setWithVelocity(p.sample(g-jj).value,p.sample(g).value,jj),p.stop()}}const Mj=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(No.test(e)||e==="0")&&!e.startsWith("url("));function FD(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function UD(e,t,r,n){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],d=Mj(l,t),p=Mj(i,t);return!d||!p?!1:FD(e)||(r==="spring"||TA(r))&&n}function V1(e){e.duration=0,e.type}const $D=new Set(["opacity","clipPath","filter","transform"]),qD=xw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HD(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:l,damping:i,type:d}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:x}=t.owner.getProps();return qD()&&r&&$D.has(r)&&(r!=="transform"||!x)&&!g&&!n&&l!=="mirror"&&i!==0&&d!=="inertia"}const WD=40;class VD extends Rw{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:l=0,repeatDelay:i=0,repeatType:d="loop",keyframes:p,name:g,motionValue:x,element:y,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ai.now();const j={autoplay:t,delay:r,type:n,repeat:l,repeatDelay:i,repeatType:d,name:g,motionValue:x,element:y,...w},_=y?.KeyframeResolver||Iw;this.keyframeResolver=new _(p,(A,E,P)=>this.onKeyframesResolved(A,E,j,!P),g,x,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,l){this.keyframeResolver=void 0;const{name:i,type:d,velocity:p,delay:g,isHandoff:x,onUpdate:y}=n;this.resolvedAt=ai.now(),UD(t,i,d,p)||((Vs.instantAnimations||!g)&&y?.(Aw(t,n,r)),t[0]=t[t.length-1],V1(n),n.repeat=0);const j={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>WD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},_=!x&&HD(j)?new OD({...j,element:j.motionValue.owner.current}):new Ew(j);_.finished.then(()=>this.notifyFinished()).catch(Hi),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),TD()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KD(e){const t=GD.exec(e);if(!t)return[,];const[,r,n,l]=t;return[`--${r??n}`,l]}function RA(e,t,r=1){const[n,l]=KD(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const d=i.trim();return XT(d)?parseFloat(d):d}return kw(l)?RA(l,t,r+1):l}function zw(e,t){return e?.[t]??e?.default??e}const EA=new Set(["width","height","top","left","right","bottom",...oc]),YD={test:e=>e==="auto",parse:e=>e},IA=e=>t=>t.test(e),zA=[sc,Zt,vs,Mo,FN,ON,YD],Cj=e=>zA.find(IA(e));function JD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||eA(e):!0}const ZD=new Set(["brightness","contrast","saturate","opacity"]);function XD(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(jw)||[];if(!n)return e;const l=r.replace(n,"");let i=ZD.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+l+")"}const QD=/\b([a-z-]*)\(.*?\)/gu,G1={...No,getAnimatableNone:e=>{const t=e.match(QD);return t?t.map(XD).join(" "):e}},Tj={...sc,transform:Math.round},eL={rotate:Mo,rotateX:Mo,rotateY:Mo,rotateZ:Mo,scale:_h,scaleX:_h,scaleY:_h,scaleZ:_h,skew:Mo,skewX:Mo,skewY:Mo,distance:Zt,translateX:Zt,translateY:Zt,translateZ:Zt,x:Zt,y:Zt,z:Zt,perspective:Zt,transformPerspective:Zt,opacity:hd,originX:gj,originY:gj,originZ:Zt},Bw={borderWidth:Zt,borderTopWidth:Zt,borderRightWidth:Zt,borderBottomWidth:Zt,borderLeftWidth:Zt,borderRadius:Zt,radius:Zt,borderTopLeftRadius:Zt,borderTopRightRadius:Zt,borderBottomRightRadius:Zt,borderBottomLeftRadius:Zt,width:Zt,maxWidth:Zt,height:Zt,maxHeight:Zt,top:Zt,right:Zt,bottom:Zt,left:Zt,padding:Zt,paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt,margin:Zt,marginTop:Zt,marginRight:Zt,marginBottom:Zt,marginLeft:Zt,backgroundPositionX:Zt,backgroundPositionY:Zt,...eL,zIndex:Tj,fillOpacity:hd,strokeOpacity:hd,numOctaves:Tj},tL={...Bw,color:vn,backgroundColor:vn,outlineColor:vn,fill:vn,stroke:vn,borderColor:vn,borderTopColor:vn,borderRightColor:vn,borderBottomColor:vn,borderLeftColor:vn,filter:G1,WebkitFilter:G1},BA=e=>tL[e];function PA(e,t){let r=BA(e);return r!==G1&&(r=No),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const rL=new Set(["auto","none","0"]);function nL(e,t,r){let n=0,l;for(;n<e.length&&!l;){const i=e[n];typeof i=="string"&&!rL.has(i)&&pd(i).values.length&&(l=e[n]),n++}if(l&&r)for(const i of t)e[i]=PA(r,l)}class iL extends Iw{constructor(t,r,n,l,i){super(t,r,n,l,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let x=t[g];if(typeof x=="string"&&(x=x.trim(),kw(x))){const y=RA(x,r.current);y!==void 0&&(t[g]=y),g===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!EA.has(n)||t.length!==2)return;const[l,i]=t,d=Cj(l),p=Cj(i);if(d!==p)if(Sj(d)&&Sj(p))for(let g=0;g<t.length;g++){const x=t[g];typeof x=="string"&&(t[g]=parseFloat(x))}else ja[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let l=0;l<t.length;l++)(t[l]===null||JD(t[l]))&&n.push(l);n.length&&nL(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ja[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const l=r[r.length-1];l!==void 0&&t.getValue(n,l).jump(l,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const l=t.getValue(r);l&&l.jump(this.measuredOrigin,!1);const i=n.length-1,d=n[i];n[i]=ja[r](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([p,g])=>{t.getValue(p).set(g)}),this.resolveNoneKeyframes()}}function sL(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const l=r?.[e]??n.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const NA=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function DA(e){return QT(e)&&"offsetHeight"in e}const Aj=30,oL=e=>!isNaN(parseFloat(e));class aL{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const l=ai.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=ai.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=oL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new bw);const n=this.events[t].add(r);return t==="change"?()=>{n(),Yr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ai.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Aj)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Aj);return tA(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yl(e,t){return new aL(e,t)}const{schedule:Pw}=fA(queueMicrotask,!1),ns={x:!1,y:!1};function LA(){return ns.x||ns.y}function lL(e){return e==="x"||e==="y"?ns[e]?null:(ns[e]=!0,()=>{ns[e]=!1}):ns.x||ns.y?null:(ns.x=ns.y=!0,()=>{ns.x=ns.y=!1})}function OA(e,t){const r=sL(e),n=new AbortController,l={passive:!0,...t,signal:n.signal};return[r,l,()=>n.abort()]}function Rj(e){return!(e.pointerType==="touch"||LA())}function cL(e,t,r={}){const[n,l,i]=OA(e,r),d=p=>{if(!Rj(p))return;const{target:g}=p,x=t(g,p);if(typeof x!="function"||!g)return;const y=w=>{Rj(w)&&(x(w),g.removeEventListener("pointerleave",y))};g.addEventListener("pointerleave",y,l)};return n.forEach(p=>{p.addEventListener("pointerenter",d,l)}),i}const FA=(e,t)=>t?e===t?!0:FA(e,t.parentElement):!1,Nw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,uL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dL(e){return uL.has(e.tagName)||e.tabIndex!==-1}const Qh=new WeakSet;function Ej(e){return t=>{t.key==="Enter"&&e(t)}}function zx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const fL=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=Ej(()=>{if(Qh.has(r))return;zx(r,"down");const l=Ej(()=>{zx(r,"up")}),i=()=>zx(r,"cancel");r.addEventListener("keyup",l,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function Ij(e){return Nw(e)&&!LA()}function hL(e,t,r={}){const[n,l,i]=OA(e,r),d=p=>{const g=p.currentTarget;if(!Ij(p))return;Qh.add(g);const x=t(g,p),y=(_,A)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",j),Qh.has(g)&&Qh.delete(g),Ij(_)&&typeof x=="function"&&x(_,{success:A})},w=_=>{y(_,g===window||g===document||r.useGlobalTarget||FA(g,_.target))},j=_=>{y(_,!1)};window.addEventListener("pointerup",w,l),window.addEventListener("pointercancel",j,l)};return n.forEach(p=>{(r.useGlobalTarget?window:p).addEventListener("pointerdown",d,l),DA(p)&&(p.addEventListener("focus",x=>fL(x,l)),!dL(p)&&!p.hasAttribute("tabindex")&&(p.tabIndex=0))}),i}function UA(e){return QT(e)&&"ownerSVGElement"in e}function pL(e){return UA(e)&&e.tagName==="svg"}const Vn=e=>!!(e&&e.getVelocity),gL=[...zA,vn,No],mL=e=>gL.find(IA(e)),Dw=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function zj(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yL(...e){return t=>{let r=!1;const n=e.map(l=>{const i=zj(l,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let l=0;l<n.length;l++){const i=n[l];typeof i=="function"?i():zj(e[l],null)}}}}function vL(...e){return F.useCallback(yL(...e),e)}class xL extends F.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,l=DA(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=l-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function bL({children:e,isPresent:t,anchorX:r,root:n}){const l=F.useId(),i=F.useRef(null),d=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=F.useContext(Dw),g=vL(i,e?.ref);return F.useInsertionEffect(()=>{const{width:x,height:y,top:w,left:j,right:_}=d.current;if(t||!i.current||!x||!y)return;const A=r==="left"?`left: ${j}`:`right: ${_}`;i.current.dataset.motionPopId=l;const E=document.createElement("style");p&&(E.nonce=p);const P=n??document.head;return P.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${y}px !important;
            ${A}px !important;
            top: ${w}px !important;
          }
        `),()=>{P.contains(E)&&P.removeChild(E)}},[t]),s.jsx(xL,{isPresent:t,childRef:i,sizeRef:d,children:F.cloneElement(e,{ref:g})})}const wL=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:l,presenceAffectsLayout:i,mode:d,anchorX:p,root:g})=>{const x=pw(_L),y=F.useId();let w=!0,j=F.useMemo(()=>(w=!1,{id:y,initial:t,isPresent:r,custom:l,onExitComplete:_=>{x.set(_,!0);for(const A of x.values())if(!A)return;n&&n()},register:_=>(x.set(_,!1),()=>x.delete(_))}),[r,x,n]);return i&&w&&(j={...j}),F.useMemo(()=>{x.forEach((_,A)=>x.set(A,!1))},[r]),F.useEffect(()=>{!r&&!x.size&&n&&n()},[r]),d==="popLayout"&&(e=s.jsx(bL,{isPresent:r,anchorX:p,root:g,children:e})),s.jsx(Up.Provider,{value:j,children:e})};function _L(){return new Map}function $A(e=!0){const t=F.useContext(Up);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:l}=t,i=F.useId();F.useEffect(()=>{if(e)return l(i)},[e]);const d=F.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,d]:[!0]}const Sh=e=>e.key||"";function Bj(e){const t=[];return F.Children.forEach(e,r=>{F.isValidElement(r)&&t.push(r)}),t}const Wr=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:l=!0,mode:i="sync",propagate:d=!1,anchorX:p="left",root:g})=>{const[x,y]=$A(d),w=F.useMemo(()=>Bj(e),[e]),j=d&&!x?[]:w.map(Sh),_=F.useRef(!0),A=F.useRef(w),E=pw(()=>new Map),[P,z]=F.useState(w),[B,D]=F.useState(w);ZT(()=>{_.current=!1,A.current=w;for(let $=0;$<B.length;$++){const re=Sh(B[$]);j.includes(re)?E.delete(re):E.get(re)!==!0&&E.set(re,!1)}},[B,j.length,j.join("-")]);const U=[];if(w!==P){let $=[...w];for(let re=0;re<B.length;re++){const Q=B[re],H=Sh(Q);j.includes(H)||($.splice(re,0,Q),U.push(Q))}return i==="wait"&&U.length&&($=U),D(Bj($)),z(w),null}const{forceRender:G}=F.useContext(hw);return s.jsx(s.Fragment,{children:B.map($=>{const re=Sh($),Q=d&&!x?!1:w===B||j.includes(re),H=()=>{if(E.has(re))E.set(re,!0);else return;let Y=!0;E.forEach(T=>{T||(Y=!1)}),Y&&(G?.(),D(A.current),d&&y?.(),n&&n())};return s.jsx(wL,{isPresent:Q,initial:!_.current||r?void 0:!1,custom:t,presenceAffectsLayout:l,mode:i,root:g,onExitComplete:Q?void 0:H,anchorX:p,children:$},re)})})},qA=F.createContext({strict:!1}),Pj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jl={};for(const e in Pj)Jl[e]={isEnabled:t=>Pj[e].some(r=>!!t[r])};function SL(e){for(const t in e)Jl[t]={...Jl[t],...e[t]}}const kL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||kL.has(e)}let HA=e=>!cp(e);function jL(e){typeof e=="function"&&(HA=t=>t.startsWith("on")?!cp(t):e(t))}try{jL(require("@emotion/is-prop-valid").default)}catch{}function ML(e,t,r){const n={};for(const l in e)l==="values"&&typeof e.values=="object"||(HA(l)||r===!0&&cp(l)||!t&&!cp(l)||e.draggable&&l.startsWith("onDrag"))&&(n[l]=e[l]);return n}const $p=F.createContext({});function qp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function gd(e){return typeof e=="string"||Array.isArray(e)}const Lw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ow=["initial",...Lw];function Hp(e){return qp(e.animate)||Ow.some(t=>gd(e[t]))}function WA(e){return!!(Hp(e)||e.variants)}function CL(e,t){if(Hp(e)){const{initial:r,animate:n}=e;return{initial:r===!1||gd(r)?r:void 0,animate:gd(n)?n:void 0}}return e.inherit!==!1?t:{}}function TL(e){const{initial:t,animate:r}=CL(e,F.useContext($p));return F.useMemo(()=>({initial:t,animate:r}),[Nj(t),Nj(r)])}function Nj(e){return Array.isArray(e)?e.join(" "):e}const md={};function AL(e){for(const t in e)md[t]=e[t],Sw(t)&&(md[t].isCSSVariable=!0)}function VA(e,{layout:t,layoutId:r}){return ac.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!md[e]||e==="opacity")}const RL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EL=oc.length;function IL(e,t,r){let n="",l=!0;for(let i=0;i<EL;i++){const d=oc[i],p=e[d];if(p===void 0)continue;let g=!0;if(typeof p=="number"?g=p===(d.startsWith("scale")?1:0):g=parseFloat(p)===0,!g||r){const x=NA(p,Bw[d]);if(!g){l=!1;const y=RL[d]||d;n+=`${y}(${x}) `}r&&(t[d]=x)}}return n=n.trim(),r?n=r(t,l?"":n):l&&(n="none"),n}function Fw(e,t,r){const{style:n,vars:l,transformOrigin:i}=e;let d=!1,p=!1;for(const g in t){const x=t[g];if(ac.has(g)){d=!0;continue}else if(Sw(g)){l[g]=x;continue}else{const y=NA(x,Bw[g]);g.startsWith("origin")?(p=!0,i[g]=y):n[g]=y}}if(t.transform||(d||r?n.transform=IL(t,e.transform,r):n.transform&&(n.transform="none")),p){const{originX:g="50%",originY:x="50%",originZ:y=0}=i;n.transformOrigin=`${g} ${x} ${y}`}}const Uw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GA(e,t,r){for(const n in t)!Vn(t[n])&&!VA(n,r)&&(e[n]=t[n])}function zL({transformTemplate:e},t){return F.useMemo(()=>{const r=Uw();return Fw(r,t,e),Object.assign({},r.vars,r.style)},[t])}function BL(e,t){const r=e.style||{},n={};return GA(n,r,e),Object.assign(n,zL(e,t)),n}function PL(e,t){const r={},n=BL(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const NL={offset:"stroke-dashoffset",array:"stroke-dasharray"},DL={offset:"strokeDashoffset",array:"strokeDasharray"};function LL(e,t,r=1,n=0,l=!0){e.pathLength=1;const i=l?NL:DL;e[i.offset]=Zt.transform(-n);const d=Zt.transform(t),p=Zt.transform(r);e[i.array]=`${d} ${p}`}function KA(e,{attrX:t,attrY:r,attrScale:n,pathLength:l,pathSpacing:i=1,pathOffset:d=0,...p},g,x,y){if(Fw(e,p,x),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:j}=e;w.transform&&(j.transform=w.transform,delete w.transform),(j.transform||w.transformOrigin)&&(j.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),j.transform&&(j.transformBox=y?.transformBox??"fill-box",delete w.transformBox),t!==void 0&&(w.x=t),r!==void 0&&(w.y=r),n!==void 0&&(w.scale=n),l!==void 0&&LL(w,l,i,d,!1)}const YA=()=>({...Uw(),attrs:{}}),JA=e=>typeof e=="string"&&e.toLowerCase()==="svg";function OL(e,t,r,n){const l=F.useMemo(()=>{const i=YA();return KA(i,t,JA(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};GA(i,e.style,e),l.style={...i,...l.style}}return l}const FL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $w(e){return typeof e!="string"||e.includes("-")?!1:!!(FL.indexOf(e)>-1||/[A-Z]/u.test(e))}function UL(e,t,r,{latestValues:n},l,i=!1){const p=($w(e)?OL:PL)(t,n,l,e),g=ML(t,typeof e=="string",i),x=e!==F.Fragment?{...g,...p,ref:r}:{},{children:y}=t,w=F.useMemo(()=>Vn(y)?y.get():y,[y]);return F.createElement(e,{...x,children:w})}function Dj(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function qw(e,t,r,n){if(typeof t=="function"){const[l,i]=Dj(n);t=t(r!==void 0?r:e.custom,l,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,i]=Dj(n);t=t(r!==void 0?r:e.custom,l,i)}return t}function ep(e){return Vn(e)?e.get():e}function $L({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,l){return{latestValues:qL(r,n,l,e),renderState:t()}}function qL(e,t,r,n){const l={},i=n(e,{});for(const j in i)l[j]=ep(i[j]);let{initial:d,animate:p}=e;const g=Hp(e),x=WA(e);t&&x&&!g&&e.inherit!==!1&&(d===void 0&&(d=t.initial),p===void 0&&(p=t.animate));let y=r?r.initial===!1:!1;y=y||d===!1;const w=y?p:d;if(w&&typeof w!="boolean"&&!qp(w)){const j=Array.isArray(w)?w:[w];for(let _=0;_<j.length;_++){const A=qw(e,j[_]);if(A){const{transitionEnd:E,transition:P,...z}=A;for(const B in z){let D=z[B];if(Array.isArray(D)){const U=y?D.length-1:0;D=D[U]}D!==null&&(l[B]=D)}for(const B in E)l[B]=E[B]}}}return l}const ZA=e=>(t,r)=>{const n=F.useContext($p),l=F.useContext(Up),i=()=>$L(e,t,n,l);return r?i():pw(i)};function Hw(e,t,r){const{style:n}=e,l={};for(const i in n)(Vn(n[i])||t.style&&Vn(t.style[i])||VA(i,e)||r?.getValue(i)?.liveStyle!==void 0)&&(l[i]=n[i]);return l}const HL=ZA({scrapeMotionValuesFromProps:Hw,createRenderState:Uw});function XA(e,t,r){const n=Hw(e,t,r);for(const l in e)if(Vn(e[l])||Vn(t[l])){const i=oc.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;n[i]=e[l]}return n}const WL=ZA({scrapeMotionValuesFromProps:XA,createRenderState:YA}),VL=Symbol.for("motionComponentSymbol");function El(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function GL(e,t,r){return F.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):El(r)&&(r.current=n))},[t])}const Ww=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),KL="framerAppearId",QA="data-"+Ww(KL),eR=F.createContext({});function YL(e,t,r,n,l){const{visualElement:i}=F.useContext($p),d=F.useContext(qA),p=F.useContext(Up),g=F.useContext(Dw).reducedMotion,x=F.useRef(null);n=n||d.renderer,!x.current&&n&&(x.current=n(e,{visualState:t,parent:i,props:r,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const y=x.current,w=F.useContext(eR);y&&!y.projection&&l&&(y.type==="html"||y.type==="svg")&&JL(x.current,r,l,w);const j=F.useRef(!1);F.useInsertionEffect(()=>{y&&j.current&&y.update(r,p)});const _=r[QA],A=F.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return ZT(()=>{y&&(j.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),A.current&&y.animationState&&y.animationState.animateChanges())}),F.useEffect(()=>{y&&(!A.current&&y.animationState&&y.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),A.current=!1),y.enteringChildren=void 0)}),y}function JL(e,t,r,n){const{layoutId:l,layout:i,drag:d,dragConstraints:p,layoutScroll:g,layoutRoot:x,layoutCrossfade:y}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:tR(e.parent)),e.projection.setOptions({layoutId:l,layout:i,alwaysMeasureLayout:!!d||p&&El(p),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:y,layoutScroll:g,layoutRoot:x})}function tR(e){if(e)return e.options.allowProjection!==!1?e.projection:tR(e.parent)}function Bx(e,{forwardMotionProps:t=!1}={},r,n){r&&SL(r);const l=$w(e)?WL:HL;function i(p,g){let x;const y={...F.useContext(Dw),...p,layoutId:ZL(p)},{isStatic:w}=y,j=TL(p),_=l(p,w);if(!w&&gw){XL();const A=QL(y);x=A.MeasureLayout,j.visualElement=YL(e,_,y,n,A.ProjectionNode)}return s.jsxs($p.Provider,{value:j,children:[x&&j.visualElement?s.jsx(x,{visualElement:j.visualElement,...y}):null,UL(e,p,GL(_,j.visualElement,g),_,w,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=F.forwardRef(i);return d[VL]=e,d}function ZL({layoutId:e}){const t=F.useContext(hw).id;return t&&e!==void 0?t+"-"+e:e}function XL(e,t){F.useContext(qA).strict}function QL(e){const{drag:t,layout:r}=Jl;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function eO(e,t){if(typeof Proxy>"u")return Bx;const r=new Map,n=(i,d)=>Bx(i,d,e,t),l=(i,d)=>n(i,d);return new Proxy(l,{get:(i,d)=>d==="create"?n:(r.has(d)||r.set(d,Bx(d,void 0,e,t)),r.get(d))})}function rR({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function tO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rO(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Px(e){return e===void 0||e===1}function K1({scale:e,scaleX:t,scaleY:r}){return!Px(e)||!Px(t)||!Px(r)}function va(e){return K1(e)||nR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function nR(e){return Lj(e.x)||Lj(e.y)}function Lj(e){return e&&e!=="0%"}function up(e,t,r){const n=e-r,l=t*n;return r+l}function Oj(e,t,r,n,l){return l!==void 0&&(e=up(e,l,n)),up(e,r,n)+t}function Y1(e,t=0,r=1,n,l){e.min=Oj(e.min,t,r,n,l),e.max=Oj(e.max,t,r,n,l)}function iR(e,{x:t,y:r}){Y1(e.x,t.translate,t.scale,t.originPoint),Y1(e.y,r.translate,r.scale,r.originPoint)}const Fj=.999999999999,Uj=1.0000000000001;function nO(e,t,r,n=!1){const l=r.length;if(!l)return;t.x=t.y=1;let i,d;for(let p=0;p<l;p++){i=r[p],d=i.projectionDelta;const{visualElement:g}=i.options;g&&g.props.style&&g.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,iR(e,d)),n&&va(i.latestValues)&&zl(e,i.latestValues))}t.x<Uj&&t.x>Fj&&(t.x=1),t.y<Uj&&t.y>Fj&&(t.y=1)}function Il(e,t){e.min=e.min+t,e.max=e.max+t}function $j(e,t,r,n,l=.5){const i=en(e.min,e.max,l);Y1(e,t,r,i,n)}function zl(e,t){$j(e.x,t.x,t.scaleX,t.scale,t.originX),$j(e.y,t.y,t.scaleY,t.scale,t.originY)}function sR(e,t){return rR(rO(e.getBoundingClientRect(),t))}function iO(e,t,r){const n=sR(e,r),{scroll:l}=t;return l&&(Il(n.x,l.offset.x),Il(n.y,l.offset.y)),n}const qj=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bl=()=>({x:qj(),y:qj()}),Hj=()=>({min:0,max:0}),fn=()=>({x:Hj(),y:Hj()}),J1={current:null},oR={current:!1};function sO(){if(oR.current=!0,!!gw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>J1.current=e.matches;e.addEventListener("change",t),t()}else J1.current=!1}const oO=new WeakMap;function aO(e,t,r){for(const n in t){const l=t[n],i=r[n];if(Vn(l))e.addValue(n,l);else if(Vn(i))e.addValue(n,Yl(l,{owner:e}));else if(i!==l)if(e.hasValue(n)){const d=e.getValue(n);d.liveStyle===!0?d.jump(l):d.hasAnimated||d.set(l)}else{const d=e.getStaticValue(n);e.addValue(n,Yl(d!==void 0?d:l,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const Wj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lO{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:l,blockInitialAnimation:i,visualState:d},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Iw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const j=ai.now();this.renderScheduledAt<j&&(this.renderScheduledAt=j,Yr.render(this.render,!1,!0))};const{latestValues:g,renderState:x}=d;this.latestValues=g,this.baseTarget={...g},this.initialValues=r.initial?{...g}:{},this.renderState=x,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=p,this.blockInitialAnimation=!!i,this.isControllingVariants=Hp(r),this.isVariantNode=WA(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(r,{},this);for(const j in w){const _=w[j];g[j]!==void 0&&Vn(_)&&_.set(g[j])}}mount(t){this.current=t,oO.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),oR.current||sO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:J1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Po(this.notifyUpdate),Po(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ac.has(t);n&&this.onBindTransform&&this.onBindTransform();const l=r.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Yr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{l(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Jl){const r=Jl[t];if(!r)continue;const{isEnabled:n,Feature:l}=r;if(!this.features[t]&&l&&n(this.props)&&(this.features[t]=new l(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Wj.length;n++){const l=Wj[n];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const i="on"+l,d=t[i];d&&(this.propEventSubscriptions[l]=this.on(l,d))}this.prevMotionValues=aO(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Yl(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(XT(n)||eA(n))?n=parseFloat(n):!mL(n)&&No.test(r)&&(n=PA(t,r)),this.setBaseTarget(t,Vn(n)?n.get():n)),Vn(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=qw(this.props,r,this.presenceContext?.custom);i&&(n=i[t])}if(r&&n!==void 0)return n;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Vn(l)?l:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new bw),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Pw.render(this.render)}}class aR extends lO{constructor(){super(...arguments),this.KeyframeResolver=iL}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Vn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function lR(e,{style:t,vars:r},n,l){const i=e.style;let d;for(d in t)i[d]=t[d];l?.applyProjectionStyles(i,n);for(d in r)i.setProperty(d,r[d])}function cO(e){return window.getComputedStyle(e)}class uO extends aR{constructor(){super(...arguments),this.type="html",this.renderInstance=lR}readValueFromInstance(t,r){if(ac.has(r))return this.projection?.isProjecting?U1(r):SD(t,r);{const n=cO(t),l=(Sw(r)?n.getPropertyValue(r):n[r])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:r}){return sR(t,r)}build(t,r,n){Fw(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Hw(t,r,n)}}const cR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dO(e,t,r,n){lR(e,t,void 0,n);for(const l in t.attrs)e.setAttribute(cR.has(l)?l:Ww(l),t.attrs[l])}class fO extends aR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fn}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ac.has(r)){const n=BA(r);return n&&n.default||0}return r=cR.has(r)?r:Ww(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return XA(t,r,n)}build(t,r,n){KA(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,l){dO(t,r,n,l)}mount(t){this.isSVGTag=JA(t.tagName),super.mount(t)}}const hO=(e,t)=>$w(e)?new fO(t):new uO(t,{allowProjection:e!==F.Fragment});function $l(e,t,r){const n=e.getProps();return qw(n,t,r!==void 0?r:n.custom,e)}const Z1=e=>Array.isArray(e);function pO(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Yl(r))}function gO(e){return Z1(e)?e[e.length-1]||0:e}function mO(e,t){const r=$l(e,t);let{transitionEnd:n={},transition:l={},...i}=r||{};i={...i,...n};for(const d in i){const p=gO(i[d]);pO(e,d,p)}}function yO(e){return!!(Vn(e)&&e.add)}function X1(e,t){const r=e.getValue("willChange");if(yO(r))return r.add(t);if(!r&&Vs.WillChange){const n=new Vs.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function uR(e){return e.props[QA]}const vO=e=>e!==null;function xO(e,{repeat:t,repeatType:r="loop"},n){const l=e.filter(vO),i=t&&r!=="loop"&&t%2===1?0:l.length-1;return l[i]}const bO={type:"spring",stiffness:500,damping:25,restSpeed:10},wO=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_O={type:"keyframes",duration:.8},SO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kO=(e,{keyframes:t})=>t.length>2?_O:ac.has(e)?e.startsWith("scale")?wO(t[1]):bO:SO;function jO({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:l,repeat:i,repeatType:d,repeatDelay:p,from:g,elapsed:x,...y}){return!!Object.keys(y).length}const Vw=(e,t,r,n={},l,i)=>d=>{const p=zw(n,e)||{},g=p.delay||n.delay||0;let{elapsed:x=0}=n;x=x-ms(g);const y={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...p,delay:-x,onUpdate:j=>{t.set(j),p.onUpdate&&p.onUpdate(j)},onComplete:()=>{d(),p.onComplete&&p.onComplete()},name:e,motionValue:t,element:i?void 0:l};jO(p)||Object.assign(y,kO(e,y)),y.duration&&(y.duration=ms(y.duration)),y.repeatDelay&&(y.repeatDelay=ms(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(V1(y),y.delay===0&&(w=!0)),(Vs.instantAnimations||Vs.skipAnimations)&&(w=!0,V1(y),y.delay=0),y.allowFlatten=!p.type&&!p.ease,w&&!i&&t.get()!==void 0){const j=xO(y.keyframes,p);if(j!==void 0){Yr.update(()=>{y.onUpdate(j),y.onComplete()});return}}return p.isSync?new Ew(y):new VD(y)};function MO({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function dR(e,t,{delay:r=0,transitionOverride:n,type:l}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:d,...p}=t;n&&(i=n);const g=[],x=l&&e.animationState&&e.animationState.getState()[l];for(const y in p){const w=e.getValue(y,e.latestValues[y]??null),j=p[y];if(j===void 0||x&&MO(x,y))continue;const _={delay:r,...zw(i||{},y)},A=w.get();if(A!==void 0&&!w.isAnimating&&!Array.isArray(j)&&j===A&&!_.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const z=uR(e);if(z){const B=window.MotionHandoffAnimation(z,y,Yr);B!==null&&(_.startTime=B,E=!0)}}X1(e,y),w.start(Vw(y,w,j,e.shouldReduceMotion&&EA.has(y)?{type:!1}:_,e,E));const P=w.animation;P&&g.push(P)}return d&&Promise.all(g).then(()=>{Yr.update(()=>{d&&mO(e,d)})}),g}function fR(e,t,r,n=0,l=1){const i=Array.from(e).sort((x,y)=>x.sortNodePosition(y)).indexOf(t),d=e.size,p=(d-1)*n;return typeof r=="function"?r(i,d):l===1?i*n:p-i*n}function Q1(e,t,r={}){const n=$l(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(l=r.transitionOverride);const i=n?()=>Promise.all(dR(e,n,r)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(g=0)=>{const{delayChildren:x=0,staggerChildren:y,staggerDirection:w}=l;return CO(e,t,g,x,y,w,r)}:()=>Promise.resolve(),{when:p}=l;if(p){const[g,x]=p==="beforeChildren"?[i,d]:[d,i];return g().then(()=>x())}else return Promise.all([i(),d(r.delay)])}function CO(e,t,r=0,n=0,l=0,i=1,d){const p=[];for(const g of e.variantChildren)g.notify("AnimationStart",t),p.push(Q1(g,t,{...d,delay:r+(typeof n=="function"?0:n)+fR(e.variantChildren,g,n,l,i)}).then(()=>g.notify("AnimationComplete",t)));return Promise.all(p)}function TO(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const l=t.map(i=>Q1(e,i,r));n=Promise.all(l)}else if(typeof t=="string")n=Q1(e,t,r);else{const l=typeof t=="function"?$l(e,t,r.custom):t;n=Promise.all(dR(e,l,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function hR(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const AO=Ow.length;function pR(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?pR(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<AO;r++){const n=Ow[r],l=e.props[n];(gd(l)||l===!1)&&(t[n]=l)}return t}const RO=[...Lw].reverse(),EO=Lw.length;function IO(e){return t=>Promise.all(t.map(({animation:r,options:n})=>TO(e,r,n)))}function zO(e){let t=IO(e),r=Vj(),n=!0;const l=g=>(x,y)=>{const w=$l(e,y,g==="exit"?e.presenceContext?.custom:void 0);if(w){const{transition:j,transitionEnd:_,...A}=w;x={...x,...A,..._}}return x};function i(g){t=g(e)}function d(g){const{props:x}=e,y=pR(e.parent)||{},w=[],j=new Set;let _={},A=1/0;for(let P=0;P<EO;P++){const z=RO[P],B=r[z],D=x[z]!==void 0?x[z]:y[z],U=gd(D),G=z===g?B.isActive:null;G===!1&&(A=P);let $=D===y[z]&&D!==x[z]&&U;if($&&n&&e.manuallyAnimateOnMount&&($=!1),B.protectedKeys={..._},!B.isActive&&G===null||!D&&!B.prevProp||qp(D)||typeof D=="boolean")continue;const re=BO(B.prevProp,D);let Q=re||z===g&&B.isActive&&!$&&U||P>A&&U,H=!1;const Y=Array.isArray(D)?D:[D];let T=Y.reduce(l(z),{});G===!1&&(T={});const{prevResolvedValues:o={}}=B,c={...o,...T},h=M=>{Q=!0,j.has(M)&&(H=!0,j.delete(M)),B.needsAnimating[M]=!0;const R=e.getValue(M);R&&(R.liveStyle=!1)};for(const M in c){const R=T[M],S=o[M];if(_.hasOwnProperty(M))continue;let a=!1;Z1(R)&&Z1(S)?a=!hR(R,S):a=R!==S,a?R!=null?h(M):j.add(M):R!==void 0&&j.has(M)?h(M):B.protectedKeys[M]=!0}B.prevProp=D,B.prevResolvedValues=T,B.isActive&&(_={..._,...T}),n&&e.blockInitialAnimation&&(Q=!1);const v=$&&re;Q&&(!v||H)&&w.push(...Y.map(M=>{const R={type:z};if(typeof M=="string"&&n&&!v&&e.manuallyAnimateOnMount&&e.parent){const{parent:S}=e,a=$l(S,M);if(S.enteringChildren&&a){const{delayChildren:k}=a.transition||{};R.delay=fR(S.enteringChildren,e,k)}}return{animation:M,options:R}}))}if(j.size){const P={};if(typeof x.initial!="boolean"){const z=$l(e,Array.isArray(x.initial)?x.initial[0]:x.initial);z&&z.transition&&(P.transition=z.transition)}j.forEach(z=>{const B=e.getBaseTarget(z),D=e.getValue(z);D&&(D.liveStyle=!0),P[z]=B??null}),w.push({animation:P})}let E=!!w.length;return n&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(E=!1),n=!1,E?t(w):Promise.resolve()}function p(g,x){if(r[g].isActive===x)return Promise.resolve();e.variantChildren?.forEach(w=>w.animationState?.setActive(g,x)),r[g].isActive=x;const y=d(g);for(const w in r)r[w].protectedKeys={};return y}return{animateChanges:d,setActive:p,setAnimateFunction:i,getState:()=>r,reset:()=>{r=Vj(),n=!0}}}function BO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!hR(t,e):!1}function fa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vj(){return{animate:fa(!0),whileInView:fa(),whileHover:fa(),whileTap:fa(),whileDrag:fa(),whileFocus:fa(),exit:fa()}}class Fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class PO extends Fo{constructor(t){super(t),t.animationState||(t.animationState=zO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();qp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let NO=0;class DO extends Fo{constructor(){super(...arguments),this.id=NO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const l=this.node.animationState.setActive("exit",!t);r&&!t&&l.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const LO={animation:{Feature:PO},exit:{Feature:DO}};function yd(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Ld(e){return{point:{x:e.pageX,y:e.pageY}}}const OO=e=>t=>Nw(t)&&e(t,Ld(t));function td(e,t,r,n){return yd(e,t,OO(r),n)}const gR=1e-4,FO=1-gR,UO=1+gR,mR=.01,$O=0-mR,qO=0+mR;function Xn(e){return e.max-e.min}function HO(e,t,r){return Math.abs(e-t)<=r}function Gj(e,t,r,n=.5){e.origin=n,e.originPoint=en(t.min,t.max,e.origin),e.scale=Xn(r)/Xn(t),e.translate=en(r.min,r.max,e.origin)-e.originPoint,(e.scale>=FO&&e.scale<=UO||isNaN(e.scale))&&(e.scale=1),(e.translate>=$O&&e.translate<=qO||isNaN(e.translate))&&(e.translate=0)}function rd(e,t,r,n){Gj(e.x,t.x,r.x,n?n.originX:void 0),Gj(e.y,t.y,r.y,n?n.originY:void 0)}function Kj(e,t,r){e.min=r.min+t.min,e.max=e.min+Xn(t)}function WO(e,t,r){Kj(e.x,t.x,r.x),Kj(e.y,t.y,r.y)}function Yj(e,t,r){e.min=t.min-r.min,e.max=e.min+Xn(t)}function nd(e,t,r){Yj(e.x,t.x,r.x),Yj(e.y,t.y,r.y)}function Fi(e){return[e("x"),e("y")]}const yR=({current:e})=>e?e.ownerDocument.defaultView:null,Jj=(e,t)=>Math.abs(e-t);function VO(e,t){const r=Jj(e.x,t.x),n=Jj(e.y,t.y);return Math.sqrt(r**2+n**2)}class vR{constructor(t,r,{transformPagePoint:n,contextWindow:l=window,dragSnapToOrigin:i=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Dx(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,A=VO(j.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!A)return;const{point:E}=j,{timestamp:P}=Ln;this.history.push({...E,timestamp:P});const{onStart:z,onMove:B}=this.handlers;_||(z&&z(this.lastMoveEvent,j),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,j)},this.handlePointerMove=(j,_)=>{this.lastMoveEvent=j,this.lastMoveEventInfo=Nx(_,this.transformPagePoint),Yr.update(this.updatePoint,!0)},this.handlePointerUp=(j,_)=>{this.end();const{onEnd:A,onSessionEnd:E,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=Dx(j.type==="pointercancel"?this.lastMoveEventInfo:Nx(_,this.transformPagePoint),this.history);this.startEvent&&A&&A(j,z),E&&E(j,z)},!Nw(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=d,this.contextWindow=l||window;const p=Ld(t),g=Nx(p,this.transformPagePoint),{point:x}=g,{timestamp:y}=Ln;this.history=[{...x,timestamp:y}];const{onSessionStart:w}=r;w&&w(t,Dx(g,this.history)),this.removeListeners=Pd(td(this.contextWindow,"pointermove",this.handlePointerMove),td(this.contextWindow,"pointerup",this.handlePointerUp),td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Po(this.updatePoint)}}function Nx(e,t){return t?{point:t(e.point)}:e}function Zj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Dx({point:e},t){return{point:e,delta:Zj(e,xR(t)),offset:Zj(e,GO(t)),velocity:KO(t,.1)}}function GO(e){return e[0]}function xR(e){return e[e.length-1]}function KO(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const l=xR(e);for(;r>=0&&(n=e[r],!(l.timestamp-n.timestamp>ms(t)));)r--;if(!n)return{x:0,y:0};const i=ys(l.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const d={x:(l.x-n.x)/i,y:(l.y-n.y)/i};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function YO(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?en(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?en(r,e,n.max):Math.min(e,r)),e}function Xj(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function JO(e,{top:t,left:r,bottom:n,right:l}){return{x:Xj(e.x,r,l),y:Xj(e.y,t,n)}}function Qj(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function ZO(e,t){return{x:Qj(e.x,t.x),y:Qj(e.y,t.y)}}function XO(e,t){let r=.5;const n=Xn(e),l=Xn(t);return l>n?r=fd(t.min,t.max-n,e.min):n>l&&(r=fd(e.min,e.max-l,t.min)),Ws(0,1,r)}function QO(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const eb=.35;function eF(e=eb){return e===!1?e=0:e===!0&&(e=eb),{x:eM(e,"left","right"),y:eM(e,"top","bottom")}}function eM(e,t,r){return{min:tM(e,t),max:tM(e,r)}}function tM(e,t){return typeof e=="number"?e:e[t]||0}const tF=new WeakMap;class rF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const i=w=>{const{dragSnapToOrigin:j}=this.getProps();j?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Ld(w).point)},d=(w,j)=>{const{drag:_,dragPropagation:A,onDragStart:E}=this.getProps();if(_&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lL(_),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=j,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fi(z=>{let B=this.getAxisMotionValue(z).get()||0;if(vs.test(B)){const{projection:D}=this.visualElement;if(D&&D.layout){const U=D.layout.layoutBox[z];U&&(B=Xn(U)*(parseFloat(B)/100))}}this.originPoint[z]=B}),E&&Yr.postRender(()=>E(w,j)),X1(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},p=(w,j)=>{this.latestPointerEvent=w,this.latestPanInfo=j;const{dragPropagation:_,dragDirectionLock:A,onDirectionLock:E,onDrag:P}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:z}=j;if(A&&this.currentDirection===null){this.currentDirection=nF(z),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",j.point,z),this.updateAxis("y",j.point,z),this.visualElement.render(),P&&P(w,j)},g=(w,j)=>{this.latestPointerEvent=w,this.latestPanInfo=j,this.stop(w,j),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Fi(w=>this.getAnimationState(w)==="paused"&&this.getAxisMotionValue(w).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new vR(t,{onSessionStart:i,onStart:d,onMove:p,onSessionEnd:g,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:n,contextWindow:yR(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,l=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!l||!n)return;const{velocity:d}=l;this.startAnimation(d);const{onDragEnd:p}=this.getProps();p&&Yr.postRender(()=>p(n,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:l}=this.getProps();if(!n||!kh(t,l,this.currentDirection))return;const i=this.getAxisMotionValue(t);let d=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(d=YO(d,this.constraints[t],this.elastic[t])),i.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&El(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=JO(n.layoutBox,t):this.constraints=!1,this.elastic=eF(r),l!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Fi(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=QO(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!El(t))return!1;const n=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const i=iO(n,l.root,this.visualElement.getTransformPagePoint());let d=ZO(l.layout.layoutBox,i);if(r){const p=r(tO(d));this.hasMutatedConstraints=!!p,p&&(d=rR(p))}return d}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:l,dragTransition:i,dragSnapToOrigin:d,onDragTransitionEnd:p}=this.getProps(),g=this.constraints||{},x=Fi(y=>{if(!kh(y,r,this.currentDirection))return;let w=g&&g[y]||{};d&&(w={min:0,max:0});const j=l?200:1e6,_=l?40:1e7,A={type:"inertia",velocity:n?t[y]:0,bounceStiffness:j,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...i,...w};return this.startAxisValueAnimation(y,A)});return Promise.all(x).then(p)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return X1(this.visualElement,t),n.start(Vw(t,n,0,r,this.visualElement,!1))}stopAnimation(){Fi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Fi(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),l=n[r];return l||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Fi(r=>{const{drag:n}=this.getProps();if(!kh(r,n,this.currentDirection))return;const{projection:l}=this.visualElement,i=this.getAxisMotionValue(r);if(l&&l.layout){const{min:d,max:p}=l.layout.layoutBox[r];i.set(t[r]-en(d,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!El(r)||!n||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};Fi(d=>{const p=this.getAxisMotionValue(d);if(p&&this.constraints!==!1){const g=p.get();l[d]=XO({min:g,max:g},this.constraints[d])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Fi(d=>{if(!kh(d,t,null))return;const p=this.getAxisMotionValue(d),{min:g,max:x}=this.constraints[d];p.set(en(g,x,l[d]))})}addListeners(){if(!this.visualElement.current)return;tF.set(this.visualElement,this);const t=this.visualElement.current,r=td(t,"pointerdown",g=>{const{drag:x,dragListener:y=!0}=this.getProps();x&&y&&this.start(g)}),n=()=>{const{dragConstraints:g}=this.getProps();El(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,i=l.addEventListener("measure",n);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),Yr.read(n);const d=yd(window,"resize",()=>this.scalePositionWithinConstraints()),p=l.addEventListener("didUpdate",(({delta:g,hasLayoutChanged:x})=>{this.isDragging&&x&&(Fi(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=g[y].translate,w.set(w.get()+g[y].translate))}),this.visualElement.render())}));return()=>{d(),r(),i(),p&&p()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:l=!1,dragConstraints:i=!1,dragElastic:d=eb,dragMomentum:p=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:l,dragConstraints:i,dragElastic:d,dragMomentum:p}}}function kh(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function nF(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class iF extends Fo{constructor(t){super(t),this.removeGroupControls=Hi,this.removeListeners=Hi,this.controls=new rF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hi}unmount(){this.removeGroupControls(),this.removeListeners()}}const rM=e=>(t,r)=>{e&&Yr.postRender(()=>e(t,r))};class sF extends Fo{constructor(){super(...arguments),this.removePointerDownListener=Hi}onPointerDown(t){this.session=new vR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:l}=this.node.getProps();return{onSessionStart:rM(t),onStart:rM(r),onMove:n,onEnd:(i,d)=>{delete this.session,l&&Yr.postRender(()=>l(i,d))}}}mount(){this.removePointerDownListener=td(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Zt.test(e))e=parseFloat(e);else return e;const r=nM(e,t.target.x),n=nM(e,t.target.y);return`${r}% ${n}%`}},oF={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,l=No.parse(e);if(l.length>5)return n;const i=No.createTransformer(e),d=typeof l[0]!="number"?1:0,p=r.x.scale*t.x,g=r.y.scale*t.y;l[0+d]/=p,l[1+d]/=g;const x=en(p,g,.5);return typeof l[2+d]=="number"&&(l[2+d]/=x),typeof l[3+d]=="number"&&(l[3+d]/=x),i(l)}};let Lx=!1;class aF extends F.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:l}=this.props,{projection:i}=t;AL(lF),i&&(r.group&&r.group.add(i),n&&n.register&&l&&n.register(i),Lx&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:l,isPresent:i}=this.props,{projection:d}=n;return d&&(d.isPresent=i,Lx=!0,l||t.layoutDependency!==r||r===void 0||t.isPresent!==i?d.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?d.promote():d.relegate()||Yr.postRender(()=>{const p=d.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Pw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:l}=t;Lx=!0,l&&(l.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(l),n&&n.deregister&&n.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function bR(e){const[t,r]=$A(),n=F.useContext(hw);return s.jsx(aF,{...e,layoutGroup:n,switchLayoutGroup:F.useContext(eR),isPresent:t,safeToRemove:r})}const lF={borderRadius:{...Mu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mu,borderTopRightRadius:Mu,borderBottomLeftRadius:Mu,borderBottomRightRadius:Mu,boxShadow:oF};function cF(e,t,r){const n=Vn(e)?e:Yl(e);return n.start(Vw("",n,t,r)),n.animation}const uF=(e,t)=>e.depth-t.depth;class dF{constructor(){this.children=[],this.isDirty=!1}add(t){mw(this.children,t),this.isDirty=!0}remove(t){yw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(uF),this.isDirty=!1,this.children.forEach(t)}}function fF(e,t){const r=ai.now(),n=({timestamp:l})=>{const i=l-r;i>=t&&(Po(n),e(i-t))};return Yr.setup(n,!0),()=>Po(n)}const wR=["TopLeft","TopRight","BottomLeft","BottomRight"],hF=wR.length,iM=e=>typeof e=="string"?parseFloat(e):e,sM=e=>typeof e=="number"||Zt.test(e);function pF(e,t,r,n,l,i){l?(e.opacity=en(0,r.opacity??1,gF(n)),e.opacityExit=en(t.opacity??1,0,mF(n))):i&&(e.opacity=en(t.opacity??1,r.opacity??1,n));for(let d=0;d<hF;d++){const p=`border${wR[d]}Radius`;let g=oM(t,p),x=oM(r,p);if(g===void 0&&x===void 0)continue;g||(g=0),x||(x=0),g===0||x===0||sM(g)===sM(x)?(e[p]=Math.max(en(iM(g),iM(x),n),0),(vs.test(x)||vs.test(g))&&(e[p]+="%")):e[p]=x}(t.rotate||r.rotate)&&(e.rotate=en(t.rotate||0,r.rotate||0,n))}function oM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gF=_R(0,.5,lA),mF=_R(.5,.95,Hi);function _R(e,t,r){return n=>n<e?0:n>t?1:r(fd(e,t,n))}function aM(e,t){e.min=t.min,e.max=t.max}function Oi(e,t){aM(e.x,t.x),aM(e.y,t.y)}function lM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cM(e,t,r,n,l){return e-=t,e=up(e,1/r,n),l!==void 0&&(e=up(e,1/l,n)),e}function yF(e,t=0,r=1,n=.5,l,i=e,d=e){if(vs.test(t)&&(t=parseFloat(t),t=en(d.min,d.max,t/100)-d.min),typeof t!="number")return;let p=en(i.min,i.max,n);e===i&&(p-=t),e.min=cM(e.min,t,r,p,l),e.max=cM(e.max,t,r,p,l)}function uM(e,t,[r,n,l],i,d){yF(e,t[r],t[n],t[l],t.scale,i,d)}const vF=["x","scaleX","originX"],xF=["y","scaleY","originY"];function dM(e,t,r,n){uM(e.x,t,vF,r?r.x:void 0,n?n.x:void 0),uM(e.y,t,xF,r?r.y:void 0,n?n.y:void 0)}function fM(e){return e.translate===0&&e.scale===1}function SR(e){return fM(e.x)&&fM(e.y)}function hM(e,t){return e.min===t.min&&e.max===t.max}function bF(e,t){return hM(e.x,t.x)&&hM(e.y,t.y)}function pM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function kR(e,t){return pM(e.x,t.x)&&pM(e.y,t.y)}function gM(e){return Xn(e.x)/Xn(e.y)}function mM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class wF{constructor(){this.members=[]}add(t){mw(this.members,t),t.scheduleRender()}remove(t){if(yw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(l=>t===l);if(r===0)return!1;let n;for(let l=r;l>=0;l--){const i=this.members[l];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _F(e,t,r){let n="";const l=e.x.translate/t.x,i=e.y.translate/t.y,d=r?.z||0;if((l||i||d)&&(n=`translate3d(${l}px, ${i}px, ${d}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:x,rotate:y,rotateX:w,rotateY:j,skewX:_,skewY:A}=r;x&&(n=`perspective(${x}px) ${n}`),y&&(n+=`rotate(${y}deg) `),w&&(n+=`rotateX(${w}deg) `),j&&(n+=`rotateY(${j}deg) `),_&&(n+=`skewX(${_}deg) `),A&&(n+=`skewY(${A}deg) `)}const p=e.x.scale*t.x,g=e.y.scale*t.y;return(p!==1||g!==1)&&(n+=`scale(${p}, ${g})`),n||"none"}const Ox=["","X","Y","Z"],SF=1e3;let kF=0;function Fx(e,t,r,n){const{latestValues:l}=t;l[e]&&(r[e]=l[e],t.setStaticValue(e,0),n&&(n[e]=0))}function jR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=uR(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:l,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Yr,!(l||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&jR(n)}function MR({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:l}){return class{constructor(d={},p=t?.()){this.id=kF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CF),this.nodes.forEach(EF),this.nodes.forEach(IF),this.nodes.forEach(TF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new dF)}addEventListener(d,p){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new bw),this.eventHandlers.get(d).add(p)}notifyListeners(d,...p){const g=this.eventHandlers.get(d);g&&g.notify(...p)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=UA(d)&&!pL(d),this.instance=d;const{layoutId:p,layout:g,visualElement:x}=this.options;if(x&&!x.current&&x.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||p)&&(this.isLayoutDirty=!0),e){let y,w=0;const j=()=>this.root.updateBlockedByResize=!1;Yr.read(()=>{w=window.innerWidth}),e(d,()=>{const _=window.innerWidth;_!==w&&(w=_,this.root.updateBlockedByResize=!0,y&&y(),y=fF(j,250),tp.hasAnimatedSinceResize&&(tp.hasAnimatedSinceResize=!1,this.nodes.forEach(xM)))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&x&&(p||g)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeLayoutChanged:j,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||x.getDefaultTransition()||DF,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=x.getProps(),z=!this.targetLayout||!kR(this.targetLayout,_),B=!w&&j;if(this.options.layoutRoot||this.resumeFrom||B||w&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...zw(A,"layout"),onPlay:E,onComplete:P};(x.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(y,B)}else w||xM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zF),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:p,layout:g}=this.options;if(p===void 0&&!g)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(RF),this.nodes.forEach(jF),this.nodes.forEach(MF)):this.nodes.forEach(vM),this.clearAllSnapshots();const p=ai.now();Ln.delta=Ws(0,1e3/60,p-Ln.timestamp),Ln.timestamp=p,Ln.isProcessing=!0,Tx.update.process(Ln),Tx.preRender.process(Ln),Tx.render.process(Ln),Ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AF),this.sharedNodes.forEach(BF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xn(this.snapshot.measuredBox.x)&&!Xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(p=!1),p&&this.instance){const g=n(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:g,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!l)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!SR(this.projectionDelta),g=this.getTransformTemplate(),x=g?g(this.latestValues,""):void 0,y=x!==this.prevTransformTemplateValue;d&&this.instance&&(p||va(this.latestValues)||y)&&(l(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const p=this.measurePageBox();let g=this.removeElementScroll(p);return d&&(g=this.removeTransform(g)),LF(g),{animationId:this.root.animationId,measuredBox:p,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return fn();const p=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(OF))){const{scroll:x}=this.root;x&&(Il(p.x,x.offset.x),Il(p.y,x.offset.y))}return p}removeElementScroll(d){const p=fn();if(Oi(p,d),this.scroll?.wasRoot)return p;for(let g=0;g<this.path.length;g++){const x=this.path[g],{scroll:y,options:w}=x;x!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&Oi(p,d),Il(p.x,y.offset.x),Il(p.y,y.offset.y))}return p}applyTransform(d,p=!1){const g=fn();Oi(g,d);for(let x=0;x<this.path.length;x++){const y=this.path[x];!p&&y.options.layoutScroll&&y.scroll&&y!==y.root&&zl(g,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),va(y.latestValues)&&zl(g,y.latestValues)}return va(this.latestValues)&&zl(g,this.latestValues),g}removeTransform(d){const p=fn();Oi(p,d);for(let g=0;g<this.path.length;g++){const x=this.path[g];if(!x.instance||!va(x.latestValues))continue;K1(x.latestValues)&&x.updateSnapshot();const y=fn(),w=x.measurePageBox();Oi(y,w),dM(p,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,y)}return va(this.latestValues)&&dM(p,this.latestValues),p}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==p;if(!(d||g&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=Ln.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),nd(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oi(this.target,this.layout.layoutBox),iR(this.target,this.targetDelta)):Oi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),nd(this.relativeTargetOrigin,this.target,j.target),Oi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||K1(this.parent.latestValues)||nR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),p=!!this.resumingFrom||this!==d;let g=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(g=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Ln.timestamp&&(g=!1),g)return;const{layout:x,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||y))return;Oi(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,j=this.treeScale.y;nO(this.layoutCorrected,this.treeScale,this.path,p),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=fn());const{target:_}=d;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lM(this.prevProjectionDelta.x,this.projectionDelta.x),lM(this.prevProjectionDelta.y,this.projectionDelta.y)),rd(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==j||!mM(this.projectionDelta.x,this.prevProjectionDelta.x)||!mM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bl(),this.projectionDelta=Bl(),this.projectionDeltaWithTransform=Bl()}setAnimationOrigin(d,p=!1){const g=this.snapshot,x=g?g.latestValues:{},y={...this.latestValues},w=Bl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const j=fn(),_=g?g.source:void 0,A=this.layout?this.layout.source:void 0,E=_!==A,P=this.getStack(),z=!P||P.members.length<=1,B=!!(E&&!z&&this.options.crossfade===!0&&!this.path.some(NF));this.animationProgress=0;let D;this.mixTargetDelta=U=>{const G=U/1e3;bM(w.x,d.x,G),bM(w.y,d.y,G),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nd(j,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PF(this.relativeTarget,this.relativeTargetOrigin,j,G),D&&bF(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=fn()),Oi(D,this.relativeTarget)),E&&(this.animationValues=y,pF(y,x,this.latestValues,G,B,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yr.update(()=>{tp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yl(0)),this.currentAnimation=cF(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),d.onUpdate&&d.onUpdate(p)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:p,target:g,layout:x,latestValues:y}=d;if(!(!p||!g||!x)){if(this!==d&&this.layout&&x&&CR(this.options.animationType,this.layout.layoutBox,x.layoutBox)){g=this.target||fn();const w=Xn(this.layout.layoutBox.x);g.x.min=d.target.x.min,g.x.max=g.x.min+w;const j=Xn(this.layout.layoutBox.y);g.y.min=d.target.y.min,g.y.max=g.y.min+j}Oi(p,g),zl(p,y),rd(this.projectionDeltaWithTransform,this.layoutCorrected,p,y)}}registerSharedNode(d,p){this.sharedNodes.has(d)||this.sharedNodes.set(d,new wF),this.sharedNodes.get(d).add(p);const x=p.options.initialPromotionConfig;p.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(p):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:p,preserveFollowOpacity:g}={}){const x=this.getStack();x&&x.promote(this,g),d&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let p=!1;const{latestValues:g}=d;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(p=!0),!p)return;const x={};g.z&&Fx("z",d,x,this.animationValues);for(let y=0;y<Ox.length;y++)Fx(`rotate${Ox[y]}`,d,x,this.animationValues),Fx(`skew${Ox[y]}`,d,x,this.animationValues);d.render();for(const y in x)d.setStaticValue(y,x[y]),this.animationValues&&(this.animationValues[y]=x[y]);d.scheduleRender()}applyProjectionStyles(d,p){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=ep(p?.pointerEvents)||"",d.transform=g?g(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=ep(p?.pointerEvents)||""),this.hasProjected&&!va(this.latestValues)&&(d.transform=g?g({},""):"none",this.hasProjected=!1);return}d.visibility="";const y=x.animationValues||x.latestValues;this.applyTransformsToTarget();let w=_F(this.projectionDeltaWithTransform,this.treeScale,y);g&&(w=g(y,w)),d.transform=w;const{x:j,y:_}=this.projectionDelta;d.transformOrigin=`${j.origin*100}% ${_.origin*100}% 0`,x.animationValues?d.opacity=x===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:d.opacity=x===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const A in md){if(y[A]===void 0)continue;const{correct:E,applyTo:P,isCSSVariable:z}=md[A],B=w==="none"?y[A]:E(y[A],x);if(P){const D=P.length;for(let U=0;U<D;U++)d[P[U]]=B}else z?this.options.visualElement.renderState.vars[A]=B:d[A]=B}this.options.layoutId&&(d.pointerEvents=x===this?ep(p?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(yM),this.root.sharedNodes.clear()}}}function jF(e){e.updateLayout()}function MF(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:l}=e.options,i=t.source!==e.layout.source;l==="size"?Fi(y=>{const w=i?t.measuredBox[y]:t.layoutBox[y],j=Xn(w);w.min=r[y].min,w.max=w.min+j}):CR(l,t.layoutBox,r)&&Fi(y=>{const w=i?t.measuredBox[y]:t.layoutBox[y],j=Xn(r[y]);w.max=w.min+j,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[y].max=e.relativeTarget[y].min+j)});const d=Bl();rd(d,r,t.layoutBox);const p=Bl();i?rd(p,e.applyTransform(n,!0),t.measuredBox):rd(p,r,t.layoutBox);const g=!SR(d);let x=!1;if(!e.resumeFrom){const y=e.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:j}=y;if(w&&j){const _=fn();nd(_,t.layoutBox,w.layoutBox);const A=fn();nd(A,r,j.layoutBox),kR(_,A)||(x=!0),y.options.layoutRoot&&(e.relativeTarget=A,e.relativeTargetOrigin=_,e.relativeParent=y)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:p,layoutDelta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:x})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function CF(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function TF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function AF(e){e.clearSnapshot()}function yM(e){e.clearMeasurements()}function vM(e){e.isLayoutDirty=!1}function RF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EF(e){e.resolveTargetDelta()}function IF(e){e.calcProjection()}function zF(e){e.resetSkewAndRotation()}function BF(e){e.removeLeadSnapshot()}function bM(e,t,r){e.translate=en(t.translate,0,r),e.scale=en(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function wM(e,t,r,n){e.min=en(t.min,r.min,n),e.max=en(t.max,r.max,n)}function PF(e,t,r,n){wM(e.x,t.x,r.x,n),wM(e.y,t.y,r.y,n)}function NF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const DF={duration:.45,ease:[.4,0,.1,1]},_M=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),SM=_M("applewebkit/")&&!_M("chrome/")?Math.round:Hi;function kM(e){e.min=SM(e.min),e.max=SM(e.max)}function LF(e){kM(e.x),kM(e.y)}function CR(e,t,r){return e==="position"||e==="preserve-aspect"&&!HO(gM(t),gM(r),.2)}function OF(e){return e!==e.root&&e.scroll?.wasRoot}const FF=MR({attachResizeListener:(e,t)=>yd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ux={current:void 0},TR=MR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ux.current){const e=new FF({});e.mount(window),e.setOptions({layoutScroll:!0}),Ux.current=e}return Ux.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),UF={pan:{Feature:sF},drag:{Feature:iF,ProjectionNode:TR,MeasureLayout:bR}};function jM(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const l="onHover"+r,i=n[l];i&&Yr.postRender(()=>i(t,Ld(t)))}class $F extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=cL(t,(r,n)=>(jM(this.node,n,"Start"),l=>jM(this.node,l,"End"))))}unmount(){}}class qF extends Fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Pd(yd(this.node.current,"focus",()=>this.onFocus()),yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MM(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const l="onTap"+(r==="End"?"":r),i=n[l];i&&Yr.postRender(()=>i(t,Ld(t)))}class HF extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=hL(t,(r,n)=>(MM(this.node,n,"Start"),(l,{success:i})=>MM(this.node,l,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tb=new WeakMap,$x=new WeakMap,WF=e=>{const t=tb.get(e.target);t&&t(e)},VF=e=>{e.forEach(WF)};function GF({root:e,...t}){const r=e||document;$x.has(r)||$x.set(r,{});const n=$x.get(r),l=JSON.stringify(t);return n[l]||(n[l]=new IntersectionObserver(VF,{root:e,...t})),n[l]}function KF(e,t,r){const n=GF(t);return tb.set(e,r),n.observe(e),()=>{tb.delete(e),n.unobserve(e)}}const YF={some:0,all:1};class JF extends Fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:l="some",once:i}=t,d={root:r?r.current:void 0,rootMargin:n,threshold:typeof l=="number"?l:YF[l]},p=g=>{const{isIntersecting:x}=g;if(this.isInView===x||(this.isInView=x,i&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),j=x?y:w;j&&j(g)};return KF(this.node.current,d,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(ZF(t,r))&&this.startObserver()}unmount(){}}function ZF({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const XF={inView:{Feature:JF},tap:{Feature:HF},focus:{Feature:qF},hover:{Feature:$F}},QF={layout:{ProjectionNode:TR,MeasureLayout:bR}},eU={...LO,...XF,...UF,...QF},jt=eO(eU,hO),qx="current_agent_run_id",ha="current_agent_run_data",Hx="current_workflow_run_id",Cu="current_workflow_run_data",jh="agent_run_",Mh="workflow_run_";class nr{static setCurrentRunId(t){try{localStorage.setItem(qx,t),localStorage.removeItem(Hx)}catch(r){console.error("Failed to save current run ID to localStorage:",r)}}static getCurrentRunId(){try{const t=localStorage.getItem(qx);if(t)return t;const r=localStorage.getItem(Hx);return r?(this.setCurrentRunId(r),r):null}catch(t){return console.error("Failed to get current run ID from localStorage:",t),null}}static setCurrentRunData(t){try{const r={id:t.id,workflow_id:t.workflow_id,run_name:t.run_name,status:t.status,blacklist_companies:t.blacklist_companies,generate_cover_letter:t.generate_cover_letter,send_connection_request:t.send_connection_request,auto_apply:t.auto_apply,submit_confident_application:t.submit_confident_application,daily_application_limit:t.daily_application_limit,timestamp:Date.now()};localStorage.setItem(ha,JSON.stringify(r)),localStorage.removeItem(Cu),this.setCurrentRunId(t.id)}catch(r){console.error("Failed to save current run data to localStorage:",r)}}static getCurrentRunData(){try{const t=localStorage.getItem(ha)||localStorage.getItem(Cu);if(!t)return null;const r=JSON.parse(t);return Date.now()-r.timestamp>36e5?(this.clearCurrentRunData(),null):(localStorage.getItem(ha)||(localStorage.setItem(ha,JSON.stringify(r)),localStorage.removeItem(Cu)),r)}catch(t){return console.error("Failed to get current run data from localStorage:",t),null}}static clearCurrentRun(){try{localStorage.removeItem(qx),localStorage.removeItem(ha),localStorage.removeItem(Hx),localStorage.removeItem(Cu)}catch(t){console.error("Failed to clear current run from localStorage:",t)}}static clearCurrentRunData(){try{localStorage.removeItem(ha),localStorage.removeItem(Cu)}catch(t){console.error("Failed to clear current run data from localStorage:",t)}}static hasCurrentRun(){return this.getCurrentRunId()!==null}static getCurrentRunSettings(){const t=this.getCurrentRunData();return t?{blacklist_companies:t.blacklist_companies,generate_cover_letter:t.generate_cover_letter,send_connection_request:t.send_connection_request,auto_apply:t.auto_apply,submit_confident_application:t.submit_confident_application,daily_application_limit:t.daily_application_limit}:{}}static updateCurrentRunSettings(t){try{const r=this.getCurrentRunData();if(!r){console.warn("No current run data to update");return}const n={...r,...t,timestamp:Date.now()};localStorage.setItem(ha,JSON.stringify(n))}catch(r){console.error("Failed to update current run settings:",r)}}static getAllRunIds(){try{const t=Object.keys(localStorage),r=t.filter(l=>l.startsWith(jh)).map(l=>l.replace(jh,"")),n=t.filter(l=>l.startsWith(Mh)).map(l=>l.replace(Mh,""));return Array.from(new Set([...r,...n]))}catch(t){return console.error("Failed to get all run IDs:",t),[]}}static cacheAgentRun(t){try{const r=`${jh}${t.id}`,n={...t,cached_at:Date.now()};localStorage.setItem(r,JSON.stringify(n)),localStorage.removeItem(`${Mh}${t.id}`)}catch(r){console.error("Failed to cache agent run:",r)}}static getCachedAgentRun(t){try{const r=`${jh}${t}`,n=`${Mh}${t}`,l=localStorage.getItem(r)||localStorage.getItem(n);if(!l)return null;const i=JSON.parse(l);return Date.now()-i.cached_at>18e5?(localStorage.removeItem(r),localStorage.removeItem(n),null):(delete i.cached_at,localStorage.getItem(r)||(localStorage.setItem(r,JSON.stringify({...i,cached_at:Date.now()})),localStorage.removeItem(n)),i)}catch(r){return console.error("Failed to get cached agent run:",r),null}}}const{setCurrentRunId:kre,getCurrentRunId:jre,setCurrentRunData:Mre,getCurrentRunData:Cre,clearCurrentRun:Tre,hasCurrentRun:Are,getCurrentRunSettings:Rre,updateCurrentRunSettings:Ere}=nr,tU=e=>{try{const t=JSON.parse(atob(e.split(".")[1])),r=Math.floor(Date.now()/1e3);return t.exp<r}catch(t){return console.error("Error checking token expiration:",t),!0}},vd=(e,t)=>{if(t?.status===401||e?.message?.includes("401")||e?.message?.includes("unauthorized")||e?.message?.includes("No authentication token available")||e?.message?.includes("Invalid authentication credentials")||e?.message?.includes("Token has expired")){console.log(" Authentication error detected, redirecting to login...");const r=localStorage.getItem("jobhuntr_auth");if(r)try{const n=JSON.parse(r);n.token&&tU(n.token)&&console.log(" Confirmed: JWT token has expired")}catch{console.log(" Could not parse auth data")}throw console.log(" Auth error detected - should use AuthService.logout() instead of direct localStorage clearing"),console.log(" PREVENTING AUTO-RELOAD FOR DEBUGGING"),new Error("REDIRECT_TO_LOGIN")}throw e},ql=async(e,t={})=>{try{const r=await fetch(e,t);return r.status===401&&vd(new Error("401 Unauthorized"),r),r}catch(r){throw vd(r),r}},Pl=e=>e?.message==="REDIRECT_TO_LOGIN",rU={},Rn="https://democratized-service-gateway-production.up.railway.app",nU=Number(rU.VITE_LOCAL_BACKEND_PORT||58273),rr=`http://localhost:${nU}`,iU={CONTACTS:`${Rn}/api/contacts/`};class sU{constructor(){this.authToken=null,this.serviceGatewayUrl=Rn,console.log("AgentRunsApiService initialized with URL:",this.serviceGatewayUrl)}setAuthToken(t){this.authToken=t}clearAuthToken(){this.authToken=null}getAuthToken(){try{const t=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const r of t){const n=localStorage.getItem(r);if(n){const l=JSON.parse(n);if(l.token)return l.token;if(l.access_token)return l.access_token;if(typeof l=="string")return l}}return null}catch(t){return console.error("Failed to parse auth data from localStorage:",t),null}}async makeAuthenticatedRequest(t,r={}){const{apiService:n}=await Qt(async()=>{const{apiService:x}=await Promise.resolve().then(()=>Nl);return{apiService:x}},void 0,import.meta.url),l=`${this.serviceGatewayUrl}${t}`;console.log(`Making ${r.method||"GET"} request to:`,l);let i;const d=r.method?.toUpperCase()||"GET",p=r.body?JSON.parse(r.body):null,g=r.headers||{};switch(d){case"GET":i=await n.get(l,g);break;case"POST":i=await n.post(l,p,g);break;case"PUT":i=await n.put(l,p,g);break;case"DELETE":i=await n.delete(l,g);break;case"PATCH":i=await n.patch(l,p,g);break;default:throw new Error(`Unsupported HTTP method: ${d}`)}if(!i.ok){const x=await i.text();console.error(`API request failed: ${i.status} ${i.statusText}`,x);const y=new Error(`Request failed: ${i.status} ${i.statusText} - ${x}`);vd(y,i)}return i}async createAgentRun(t){return(await this.makeAuthenticatedRequest("/api/workflow-runs/",{method:"POST",body:JSON.stringify(t)})).json()}async listAgentRuns(t){const r=new URLSearchParams;t?.page&&r.set("page",t.page.toString()),t?.page_size&&r.set("page_size",t.page_size.toString()),t?.status&&r.set("status",t.status),t?.workflow_id&&r.set("workflow_id",t.workflow_id),t?.infinite_hunt_session_id&&r.set("infinite_hunt_session_id",t.infinite_hunt_session_id),t?.infinite_hunt_only&&r.set("infinite_hunt_only","true"),t?.manual_only&&r.set("manual_only","true");const n=r.toString(),l=n?`/api/workflow-runs/?${n}`:"/api/workflow-runs/";return(await this.makeAuthenticatedRequest(l)).json()}async getAgentRun(t){const n=await(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}`)).text();if(!n)throw new Error("Empty response from server");try{return JSON.parse(n)}catch{throw console.error("Failed to parse JSON response:",n),new Error(`Invalid JSON response: ${n}`)}}async updateAgentRun(t,r){const l=await(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}`,{method:"PUT",body:JSON.stringify(r)})).text();if(!l)throw new Error("Empty response from server");try{return JSON.parse(l)}catch{throw console.error("Failed to parse JSON response:",l),new Error(`Invalid JSON response: ${l}`)}}async deleteAgentRun(t){const r=await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}`,{method:"DELETE"});console.log("Delete response status:",r.status),console.log("Delete response headers:",r.headers);const n=r.headers.get("content-type");if(console.log("Content-Type:",n),n&&n.includes("application/json")){const l=await r.text();if(console.log("Response text:",l),l)return JSON.parse(l)}if(r.ok)return console.log("DELETE successful, no JSON content - assuming success"),{success:!0,message:"Agent run deleted successfully"};throw new Error(`Delete failed with status: ${r.status}`)}async startAgentRun(t){return(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}/start`,{method:"POST"})).json()}async pauseAgentRun(t){return(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}/pause`,{method:"POST"})).json()}async completeAgentRun(t){return(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}/complete`,{method:"POST"})).json()}async setCurrentAgentRun(t){return(await this.makeAuthenticatedRequest(`/api/workflow-runs/${t}/current`)).json()}async getLatestAgentRun(){try{const t=await this.listAgentRuns({page:1,page_size:1});return t.runs.length>0?t.runs[0]:null}catch(t){return console.error("Failed to get latest agent run:",t),null}}}const gr=new sU,oU=Object.freeze(Object.defineProperty({__proto__:null,agentRunsApiService:gr},Symbol.toStringTag,{value:"Module"}));class $u extends Error{}$u.prototype.name="InvalidTokenError";function aU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function lU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return aU(t)}catch{return atob(t)}}function rb(e,t){if(typeof e!="string")throw new $u("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new $u(`Invalid token specified: missing part #${r+1}`);let l;try{l=lU(n)}catch(i){throw new $u(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(l)}catch(i){throw new $u(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}class cU{constructor(){this.refreshPromise=null,this.refreshTimer=null,this.REFRESH_BUFFER_MS=300*1e3,this.STORAGE_KEY="jobhuntr_auth",this.loginAttempts=0,this.lastLoginAttempt=0,this.MAX_LOGIN_ATTEMPTS=3,this.LOGIN_COOLDOWN_MS=30*1e3,this.isEmergencyStop=!1,this.GATEWAY_URL="https://democratized-service-gateway-production.up.railway.app",this.initializeAutoRefresh(),this.syncTokenWithBackend(),this.setupPeriodicSync()}initializeAutoRefresh(){const t=this.getStoredAuth();if(t&&t.token){const r=this.isTokenExpired(t.token),n=this.getTimeUntilRefresh(t.token);if(t.refreshToken)n>0?this.scheduleRefresh(n):r?this.scheduleRefresh(100):this.scheduleRefresh(1e3);else{const l=setInterval(()=>{this.getStoredAuth()?.refreshToken&&(clearInterval(l),this.initializeAutoRefresh())},3e4)}}else{const r=setInterval(()=>{this.getStoredAuth()?.token&&(clearInterval(r),this.initializeAutoRefresh())},3e4)}}getStoredAuth(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):null}catch(t){return console.error("Failed to parse stored auth data:",t),null}}storeAuth(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),this.syncTokenWithBackend().catch(r=>{console.error("Failed to sync token with backend after storage:",r)})}updateStoredUserMetadata(t){const r=this.getStoredAuth();if(!r)return;const n=r.user||{},l={...n,user_metadata:{...n.user_metadata||{},...t}};this.storeAuth({...r,user:l})}clearStoredAuth(){localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem("auth"),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-auth-token"),localStorage.removeItem("current_agent_run_id"),localStorage.removeItem("current_agent_run_data"),localStorage.removeItem("current_workflow_run_id"),localStorage.removeItem("current_workflow_run_data");const t=[];for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&(n.startsWith("agent_run_")||n.startsWith("workflow_run_"))&&t.push(n)}t.forEach(r=>localStorage.removeItem(r));for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);n&&n.startsWith("page_state_")&&t.push(n)}t.forEach(r=>localStorage.removeItem(r)),console.log(" Cleared all user-specific data on logout")}isTokenExpired(t){try{const r=rb(t),n=Math.floor(Date.now()/1e3);return r.exp<n}catch(r){return console.error("Failed to decode JWT token:",r),!0}}getTimeUntilRefresh(t){try{const r=rb(t),n=Math.floor(Date.now()/1e3),i=(r.exp-this.REFRESH_BUFFER_MS/1e3-n)*1e3;return Math.max(0,i)}catch(r){return console.error("Failed to calculate refresh time:",r),0}}scheduleRefresh(t){this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=setTimeout(async()=>{try{const r=this.getStoredAuth();if(!r){this.handleRefreshFailure();return}if(!r.refreshToken){this.handleRefreshFailure();return}const n=await this.refreshToken(),l=this.getTimeUntilRefresh(n);l>0&&this.scheduleRefresh(l)}catch(r){(r instanceof Error?r.message:"Unknown error").includes("No refresh token available")||this.handleRefreshFailure(),setTimeout(()=>{this.scheduleRefresh(300*1e3)},300*1e3)}},t)}handleRefreshFailure(){this.clearStoredAuth()}async refreshToken(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.performTokenRefresh();try{return await this.refreshPromise}catch(t){throw console.error("TOKEN REFRESH FAILED:",t instanceof Error?t.message:"Unknown error"),t}finally{this.refreshPromise=null}}async performTokenRefresh(){const t=this.getStoredAuth();if(!t||!t.token)throw new Error("No token available for refresh");if(!t.refreshToken)throw new Error("No refresh token available - manual login required");try{const r=await fetch(`${this.GATEWAY_URL}/api/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.token}`},body:JSON.stringify({refresh_token:t.refreshToken})});if(!r.ok)throw new Error(`Token refresh failed: ${r.status}`);const n=await r.json();if(!n.access_token)throw new Error("No access token received from refresh");const l={...t,token:n.access_token,refreshToken:n.refresh_token||t.refreshToken||void 0,user:n.user||t.user,timestamp:Date.now()};this.storeAuth(l);const i=this.getTimeUntilRefresh(n.access_token);return i>0&&this.scheduleRefresh(i),await this.notifyBackendTokenUpdate(n.access_token,n.user,!0),n.access_token}catch(r){throw console.error("Token refresh failed:",r),r}}setupPeriodicSync(){setInterval(async()=>{try{const t=this.getStoredAuth();t?.token&&t?.user&&await this.notifyBackendTokenUpdate(t.token,t.user,!1)}catch(t){console.error("Periodic token sync failed:",t)}},300*1e3)}async syncTokenWithBackend(){try{const t=this.getStoredAuth();t?.token&&t?.user&&await this.notifyBackendTokenUpdate(t.token,t.user,!1)}catch(t){console.error("Failed to sync token with backend:",t)}}async notifyBackendTokenUpdate(t,r,n){try{const l=new Promise((p,g)=>setTimeout(()=>g(new Error("Request timeout")),5e3)),i=fetch(`${rr}/api/auth/save-jwt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt_token:t,user_info:r,is_refresh:n})}),d=await Promise.race([i,l]);d.ok||console.error(`Failed to notify backend of token ${n?"refresh":"login"}: ${d.status}`)}catch{try{await this.writeTokenToFileBackup(t,r,n)}catch(i){console.error("Backup token write also failed:",i)}}}async writeTokenToFileBackup(t,r,n){try{if(typeof window<"u"&&window.electronAPI){const l={jwt_token:t,user_info:r,timestamp:Date.now().toString(),is_refresh:n};await window.electronAPI.writeUserAuth(l)}else{const l=await Qt(()=>Promise.resolve().then(()=>Hh),void 0,import.meta.url).catch(()=>null),i=await Qt(()=>Promise.resolve().then(()=>Hh),void 0,import.meta.url).catch(()=>null),d=await Qt(()=>Promise.resolve().then(()=>Hh),void 0,import.meta.url).catch(()=>null);if(l&&i&&d){const p=d.homedir();let g;process.platform==="darwin"?g=i.join(p,"Library","Application Support","JobHuntr"):process.platform==="win32"?g=i.join(p,"AppData","Local","jobhuntr"):g=i.join(p,".jobhuntr");const x=i.join(g,"user_auth.json");await l.promises.mkdir(g,{recursive:!0});const y={jwt_token:t,user_info:r,timestamp:Date.now().toString()};await l.promises.writeFile(x,JSON.stringify(y,null,2))}else throw new Error("No file system access available for backup")}}catch(l){throw console.error("Backup token write failed:",l),l}}async getValidToken(){const t=this.getStoredAuth();if(!t||!t.token||this.isTokenExpired(t.token))return null;if(this.getTimeUntilRefresh(t.token)<=0)try{return await this.refreshToken()}catch(n){return console.error("Failed to refresh token:",n),null}return t.token}async login(t,r){if(this.isEmergencyStop)throw new Error("Authentication temporarily disabled due to emergency stop. Please refresh the page.");const n=Date.now();if(this.loginAttempts>=this.MAX_LOGIN_ATTEMPTS){const l=n-this.lastLoginAttempt;if(l<this.LOGIN_COOLDOWN_MS){const i=Math.ceil((this.LOGIN_COOLDOWN_MS-l)/1e3);throw new Error(`Too many login attempts. Please wait ${i} seconds before trying again.`)}else this.loginAttempts=0}this.loginAttempts++,this.lastLoginAttempt=n;try{const l=await fetch(`${this.GATEWAY_URL}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});if(!l.ok){const g=await l.json().catch(()=>({}));throw new Error(g.detail||g.message||"Login failed")}const i=await l.json();if(!i.access_token)throw new Error("No access token received");const d={token:i.access_token,refreshToken:i.refresh_token||void 0,user:i.user,email:t,timestamp:Date.now()};this.storeAuth(d);const p=this.getTimeUntilRefresh(i.access_token);return p>0&&this.scheduleRefresh(p),this.loginAttempts=0,await this.notifyBackendTokenUpdate(i.access_token,i.user,!1),{token:i.access_token,user:i.user}}catch(l){throw console.error("Login failed:",l),l}}async getCoachesByStudentToken(t){try{const r=await this.getValidToken();if(!r)throw new Error("No authentication token available");const n=await fetch(`${this.GATEWAY_URL}/api/auth/student-coaches/${t.trim().toUpperCase()}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.detail||i.message||"Failed to get coaches")}return await n.json()}catch(r){throw console.error(" Failed to get coaches by student token:",r),r}}async updateProfile(t){const r=await this.getValidToken();if(!r)throw new Error("No authentication token available");const n={};t.firstName!==void 0&&(n.first_name=t.firstName.trim()),t.lastName!==void 0&&(n.last_name=t.lastName.trim()),t.npsScore!==void 0&&(n.nps_score=t.npsScore);const l=await fetch(`${this.GATEWAY_URL}/api/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(n)});if(!l.ok){const d=await l.json().catch(()=>({}));throw new Error(d.detail||d.message||"Failed to update profile")}const i=await l.json();return this.updateStoredUserMetadata({first_name:i.first_name??"",last_name:i.last_name??"",...t.npsScore!==void 0?{nps_score:i.nps_score??t.npsScore}:{}}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("userProfileUpdated",{detail:{first_name:i.first_name??"",last_name:i.last_name??"",...t.npsScore!==void 0?{nps_score:i.nps_score??t.npsScore}:{}}})),{first_name:i.first_name??"",last_name:i.last_name??"",nps_score:i.nps_score}}logout(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),this.clearStoredAuth()}emergencyStop(){this.isEmergencyStop=!0,this.loginAttempts=this.MAX_LOGIN_ATTEMPTS,this.clearStoredAuth(),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)}resetEmergencyStop(){this.isEmergencyStop=!1,this.loginAttempts=0}isAuthenticated(){if(this.isEmergencyStop)return!1;const t=this.getStoredAuth();return!(!t||!t.token||this.isTokenExpired(t.token))}getCurrentUser(){return this.getStoredAuth()?.user||null}getCurrentUserEmail(){return this.getStoredAuth()?.email||""}cleanup(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)}}const mr=new cU;typeof globalThis<"u"&&(globalThis.authEmergencyStop=()=>mr.emergencyStop(),globalThis.authEmergencyReset=()=>mr.resetEmergencyStop());const uU=Object.freeze(Object.defineProperty({__proto__:null,authService:mr},Symbol.toStringTag,{value:"Module"}));class dU{constructor(){this.baseUrl=Rn}getTimezoneOffset(){return new Date().getTimezoneOffset()*-1}getClientContext(){try{const t=sessionStorage.getItem("coachViewingClient");return t?JSON.parse(t):null}catch(t){return console.error("Error parsing client context:",t),null}}async handleResponse(t,r,n){if(t.status===403){const l=this.getClientContext();if(l&&l.coachMode){const i=new CustomEvent("showReadOnlyModal",{detail:{studentName:l.clientName,attemptedAction:`${r} ${n}`,response:t.clone()}});window.dispatchEvent(i)}}if(t.status===402)try{const l=await t.clone().json(),i=l.detail||l,d=new CustomEvent("showSubscriptionModal",{detail:{errorDetails:i,attemptedAction:`${r} ${n}`}});window.dispatchEvent(d)}catch(l){console.error("Error parsing subscription error response:",l);const i=new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:"SUBSCRIPTION_REQUIRED",message:"This feature requires a premium subscription",current_tier:"free"},attemptedAction:`${r} ${n}`}});window.dispatchEvent(i)}if(t.status===429)try{const l=await t.clone().json(),i=l.detail||l;if(i.error_code==="DAILY_LIMIT_REACHED"){const d=new CustomEvent("showDailyLimitModal",{detail:{errorDetails:i,attemptedAction:`${r} ${n}`}});window.dispatchEvent(d)}}catch(l){console.error("Error parsing daily limit error response:",l)}return t}async getHeaders(t={}){const r=await mr.getValidToken();if(!r)throw new Error("No authentication token available. Please log in again.");const n={Authorization:`Bearer ${r}`,"Content-Type":"application/json",...t},l=this.getClientContext();return l&&l.studentToken&&(n["X-Student-Token"]=l.studentToken),n}async get(t,r={}){const n=await this.getHeaders(r),l=t.startsWith("http")?t:`${this.baseUrl}${t}`,i=await fetch(l,{method:"GET",headers:n});return this.handleResponse(i,"GET",t)}async post(t,r=null,n={}){const l=await this.getHeaders(n),i=t.startsWith("http")?t:`${this.baseUrl}${t}`,d=await fetch(i,{method:"POST",headers:l,body:r?JSON.stringify(r):null});return this.handleResponse(d,"POST",t)}async put(t,r=null,n={}){const l=await this.getHeaders(n),i=t.startsWith("http")?t:`${this.baseUrl}${t}`,d=await fetch(i,{method:"PUT",headers:l,body:r?JSON.stringify(r):null});return this.handleResponse(d,"PUT",t)}async delete(t,r={}){const n=await this.getHeaders(r),l=t.startsWith("http")?t:`${this.baseUrl}${t}`,i=await fetch(l,{method:"DELETE",headers:n});return this.handleResponse(i,"DELETE",t)}async patch(t,r=null,n={}){const l=await this.getHeaders(n),i=t.startsWith("http")?t:`${this.baseUrl}${t}`,d=await fetch(i,{method:"PATCH",headers:l,body:r?JSON.stringify(r):null});return this.handleResponse(d,"PATCH",t)}}const Cr=new dU,Nl=Object.freeze(Object.defineProperty({__proto__:null,apiService:Cr},Symbol.toStringTag,{value:"Module"}));class fU{async listTemplates(){const t=await Cr.get("/api/agent-run-templates/");if(!t.ok){const r=await t.text();throw new Error(r||"Failed to fetch agent run templates")}return t.json()}}const lc=new fU,f={colors:{primary:{main:"#1f2937",hover:"#111827",light:"#374151",text:"#ffffff"},secondary:{main:"#ffffff",border:"#d1d5db",text:"#1f2937"},icon:{primary:"#1f2937",secondary:"#6b7280",light:"#9ca3af",white:"#ffffff"},accent:{success:"#059669",successLight:"#d1fae5",successDark:"#047857",warning:"#f59e0b",warningLight:"#fef3c7",warningBorder:"#fbbf24",warningDark:"#b45309",warningDarkest:"#92400e",error:"#dc2626",info:"#3b82f6",infoLight:"#dbeafe"},neutral:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},tags:[{bg:"#D1FAE5",text:"#065F46"},{bg:"#E5E7EB",text:"#1F2937"},{bg:"#DBEAFE",text:"#1E40AF"},{bg:"#FEF3C7",text:"#92400E"},{bg:"#FCE7F3",text:"#9F1239"},{bg:"#FECACA",text:"#991B1B"},{bg:"#FBCFE8",text:"#831843"},{bg:"#FED7AA",text:"#9A3412"},{bg:"#E0E7FF",text:"#3730A3"},{bg:"#FFEDD5",text:"#9A3412"}]},typography:{fontFamily:"system-ui, -apple-system, sans-serif",fontSize:{display:"2.5rem",h1:"2rem",h2:"1.625rem",h3:"1.375rem",h4:"1.25rem",xl:"1.125rem",lg:"1.0625rem",base:"1rem",md:"1rem",sm:"0.9375rem",xs:"0.875rem",xxs:"0.8125rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},lineHeight:{tight:"1.25",normal:"1.5",relaxed:"1.625"},letterSpacing:{normal:"0",wide:"0.025em"},presets:{displayLarge:{fontSize:"2.5rem",fontWeight:"700",lineHeight:"1.25",letterSpacing:"-0.025em"},heading1:{fontSize:"2rem",fontWeight:"600",lineHeight:"1.25"},heading2:{fontSize:"1.625rem",fontWeight:"600",lineHeight:"1.25"},heading3:{fontSize:"1.375rem",fontWeight:"500",lineHeight:"1.25"},heading4:{fontSize:"1.25rem",fontWeight:"500",lineHeight:"1.5"},bodyLarge:{fontSize:"1.125rem",fontWeight:"400",lineHeight:"1.5"},body:{fontSize:"1rem",fontWeight:"400",lineHeight:"1.5"},bodySmall:{fontSize:"0.9375rem",fontWeight:"400",lineHeight:"1.5"},button:{fontSize:"1rem",fontWeight:"500",lineHeight:"1.25"},buttonSmall:{fontSize:"0.9375rem",fontWeight:"500",lineHeight:"1.25"},label:{fontSize:"1rem",fontWeight:"500",lineHeight:"1.5"},caption:{fontSize:"0.875rem",fontWeight:"400",lineHeight:"1.5"},overline:{fontSize:"0.8125rem",fontWeight:"500",lineHeight:"1.5",letterSpacing:"0.025em",textTransform:"uppercase"}}},spacing:{xs:"4px",sm:"8px",md:"12px",lg:"16px",xl:"20px","2xl":"24px"},borderRadius:{sm:"4px",md:"6px",lg:"8px",xl:"12px",full:"9999px"},shadows:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)"},transitions:{fast:"0.15s ease",normal:"0.2s ease"}},nb=(e="primary")=>f.colors.icon[e],hU=e=>f.typography.presets[e],ot=({children:e,variant:t="primary",size:r="md",disabled:n=!1,onClick:l,type:i="button",className:d="",style:p={}})=>{const[g,x]=F.useState(!1),y={border:"none",borderRadius:f.borderRadius.lg,fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.medium,cursor:n?"not-allowed":"pointer",transition:`all ${f.transitions.normal}`,display:"inline-flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm,fontFamily:f.typography.fontFamily,opacity:1,...p},w={sm:{padding:`${f.spacing.sm} ${f.spacing.lg}`,fontSize:f.typography.fontSize.sm,borderRadius:f.borderRadius.md},md:{padding:`${f.spacing.md} ${f.spacing.xl}`,fontSize:f.typography.fontSize.md},lg:{padding:`${f.spacing.lg} ${f.spacing["2xl"]}`,fontSize:f.typography.fontSize.lg}},_=n?{backgroundColor:"var(--theme-disabled)",color:"var(--theme-disabled-text)",border:"1px solid var(--theme-disabled)"}:{primary:{backgroundColor:"var(--accent-primary)",color:"var(--theme-primary-text)",border:"1px solid var(--accent-primary)"},secondary:{backgroundColor:f.colors.secondary.main,color:f.colors.secondary.text,border:`1px solid ${f.colors.secondary.border}`},text:{backgroundColor:g&&!n?f.colors.neutral[100]:"transparent",color:g&&!n?f.colors.neutral[800]:f.colors.neutral[600],border:"none"},outline:{backgroundColor:"transparent",color:"var(--accent-primary)",border:"1px solid var(--accent-primary)"},danger:{backgroundColor:f.colors.accent.error,color:"#ffffff",border:`1px solid ${f.colors.accent.error}`}}[t],A={...y,...w[r],..._},E=`button-component button-${t} button-${r} ${d}`.trim();return s.jsx("button",{type:i,disabled:n,onClick:l,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:E,style:A,children:e})};class pU{get serviceUrl(){return this.serviceGatewayUrl}constructor(){this.serviceGatewayUrl=Rn}setAuthToken(t){}clearAuthToken(){}async makeAuthenticatedRequest(t,r={}){const n=`${this.serviceGatewayUrl}${t}`,l=r.method||"GET";let i;if(l==="GET")i=await Cr.get(n,r.headers||{});else if(l==="POST"){const d=r.body?JSON.parse(r.body):null;i=await Cr.post(n,d,r.headers||{})}else if(l==="PUT"){const d=r.body?JSON.parse(r.body):null;i=await Cr.put(n,d,r.headers||{})}else if(l==="DELETE")i=await Cr.delete(n,r.headers||{});else if(l==="PATCH"){const d=r.body?JSON.parse(r.body):null;i=await Cr.patch(n,d,r.headers||{})}else{const d=await mr.getValidToken();if(!d)throw new Error("No authentication token available");const p={...r,headers:{Authorization:`Bearer ${d}`,...r.headers}};i=await ql(n,p)}if(!i.ok){let d="";try{d=await i.text()}catch{}const p=new Error(`API request failed: ${i.status} ${i.statusText}${d?` - ${d}`:""}`);vd(p,i)}return i}async testConnection(){try{return await(await fetch(`${this.serviceGatewayUrl}/api/resume/test`)).json()}catch(t){throw console.error("Failed to test resume connection:",t),t}}async processResume(t){try{const r=await mr.getValidToken();if(!r)throw new Error("No authentication found. Please login first.");const n=new FormData;n.append("file",t);const l=await fetch(`${this.serviceGatewayUrl}/api/resume/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!l.ok){let d="";try{d=await l.text()}catch{}throw new Error(`Upload failed: ${l.status} ${l.statusText}${d?` - ${d}`:""}`)}return await l.json()}catch(r){throw console.error("Resume upload failed:",r),r}}async generateBlacklistFromResume(t){try{return await(await this.makeAuthenticatedRequest(`/api/resume/${t}/generate-blacklist`,{method:"POST"})).json()}catch(r){throw console.error("Blacklist generation failed:",r),r}}async generateKeywordsFromResume(t){try{return await(await this.makeAuthenticatedRequest(`/api/resume/${t}/generate-keywords`,{method:"POST"})).json()}catch(r){throw console.error("Keywords generation failed:",r),r}}async getSupportedLocations(){try{return await(await this.makeAuthenticatedRequest("/api/resume/supported-locations",{method:"GET"})).json()}catch(t){throw console.error("Failed to get supported locations:",t),t}}async uploadResumeToSupabase(t){try{const r=new FormData;return r.append("file",t),await(await this.makeAuthenticatedRequest("/api/resume/upload",{method:"POST",body:r})).json()}catch(r){throw console.error("Resume upload to Supabase failed:",r),r}}async uploadResume(t){try{const r=new FormData;return r.append("file",t),await(await this.makeAuthenticatedRequest("/api/resume/upload",{method:"POST",body:r})).json()}catch(r){throw console.error("Resume upload failed:",r),r}}async listResumes(){try{return(await(await this.makeAuthenticatedRequest("/api/resume/list")).json()).resumes||[]}catch(t){throw console.error("Failed to list resumes:",t),t}}async getResume(t){try{return await(await this.makeAuthenticatedRequest(`/api/resume/${t}`)).json()}catch(r){throw console.error("Failed to get resume:",r),r}}async downloadAndOpenResume(t,r){try{const n=r||"resume.pdf";if(window.electronAPI&&window.electronAPI.autoDownloadFile){const l=await window.electronAPI.autoDownloadFile(t,n);if(l.success){if(window.electronAPI.openFile){const i=await window.electronAPI.openFile(l.filePath);i.success||console.error("Failed to open resume:",i.error)}}else throw new Error(`Download failed: ${l.error}`)}else{const l=await fetch(t);if(!l.ok)throw new Error(`Failed to download resume: ${l.statusText}`);const i=await l.blob(),d=URL.createObjectURL(i);if(!window.open(d,"_blank","noopener,noreferrer")){const g=document.createElement("a");g.href=d,g.download=n,document.body.appendChild(g),g.click(),document.body.removeChild(g)}setTimeout(()=>{URL.revokeObjectURL(d)},5e3)}}catch(n){throw console.error("Failed to download and open resume:",n),n}}async generateFAQ(t){try{return await(await this.makeAuthenticatedRequest(`/api/resume/${t}/generate-faq`,{method:"POST"})).json()}catch(r){throw console.error("Failed to generate FAQ:",r),r}}async deleteResume(t){try{await this.makeAuthenticatedRequest(`/api/resume/${t}`,{method:"DELETE"})}catch(r){throw console.error("Failed to delete resume:",r),r}}async downloadResume(t){try{const n=await(await this.makeAuthenticatedRequest(`/api/azure-blob/download/${t}`)).json();return{downloadUrl:n.download_url,filename:n.filename}}catch(r){throw console.error("Failed to download resume:",r),r}}}const _r=new pU,CM={4e4:1,6e4:2,8e4:3,1e5:4,12e4:5,14e4:6,16e4:7,18e4:8,2e5:9},TM={usa:"103644278",canada:"101174742",australia:"101452733",uk:"101165590",germany:"101282230",poland:"105072130",italy:"103350119",denmark:"104514075",sweden:"105117694",norway:"103819153",finland:"100456013",netherlands:"102890719"},gU={"new york, ny":"102571732","houston, tx":"103743442","chicago, il":"103112676","atlanta, ga":"102448103","los angeles, ca":"106224388","dallas, tx":"104194190","austin, tx":"104472865","boston, ma":"102380872","seattle, wa":"102264677","charlotte, nc":"104727230","portland, or":"104116203","san francisco, ca":"102277331","toronto, on":"100761630","vancouver, bc":"103366113","montreal, qc":"101728226","calgary, ab":"102199904","ottawa, on":"101728226","sydney, nsw":"104769905","melbourne, vic":"100992797","brisbane, qld":"104468365","perth, wa":"103392068","london, uk":"100495523","birmingham, uk":"100356971","manchester, uk":"114456426","liverpool, uk":"103024982","berlin, de":"116724764","munich, de":"100477049","hamburg, de":"106430557","frankfurt, de":"106772406","warsaw, pl":"102560051","krakow, pl":"103348205","wroclaw, pl":"101832192","poznan, pl":"102513900","rome, it":"102334534","milan, it":"102873640","naples, it":"102361685","turin, it":"106742401","copenhagen, dk":"102194656","aarhus, dk":"107956996","odense, dk":"106628909","aalborg, dk":"100951797","stockholm, se":"103264854","gothenburg, se":"104114836","malmo, se":"101759788","uppsala, se":"100584176","oslo, no":"104216264","bergen, no":"100492051","trondheim, no":"100190214","stavanger, no":"104804239","helsinki, fi":"106591199","espoo, fi":"107130126","tampere, fi":"102656323","oulu, fi":"106842242","amsterdam, nl":"103100785","rotterdam, nl":"103447814","utrecht, nl":"102434816","eindhoven, nl":"10292214"};function AR(e){const t=[];if(e.jobDescription?.trim()&&t.push(`keywords=${encodeURIComponent(e.jobDescription.trim())}`),e.country&&TM[e.country]&&t.push(`geoId=${TM[e.country]}`),e.salaryBound&&CM[e.salaryBound]&&t.push(`f_SB2=${CM[e.salaryBound]}`),e.experienceLevels&&e.experienceLevels.length>0){const l=e.experienceLevels.map(i=>i.toString());t.push(`f_E=${l.join("%2C")}`)}if(e.remoteTypes&&e.remoteTypes.length>0){const l=e.remoteTypes.map(i=>i.toString());t.push(`f_WT=${l.join("%2C")}`)}if(e.jobTypes&&e.jobTypes.length>0&&t.push(`f_JT=${e.jobTypes.join("%2C")}`),e.specificLocations&&e.specificLocations.length>0){const l=e.specificLocations.map(i=>gU[i.toLowerCase()]).filter(i=>i);l.length>0&&t.push(`f_PP=${l.join("%2C")}`)}t.push("f_AL=true"),t.push("origin=JOB_SEARCH_PAGE_SEARCH_BUTTON"),t.push("refresh=true");const r="https://www.linkedin.com/jobs/search/",n=t.join("&");return`${r}?${n}`}function mU(e){const t=AR(e),r=[];if(e.jobDescription?.trim()&&r.push({name:"Keywords",value:e.jobDescription.trim()}),e.country&&r.push({name:"Country",value:e.country.toUpperCase()}),e.salaryBound&&r.push({name:"Min Salary",value:`$${e.salaryBound.toLocaleString()}+`}),e.experienceLevels&&e.experienceLevels.length>0){const n=e.experienceLevels.map(l=>({1:"Internship",2:"Entry Level",3:"Associate",4:"Mid-Senior Level",5:"Director",6:"Executive"})[l]||`Level ${l}`);r.push({name:"Experience",value:n.join(", ")})}if(e.remoteTypes&&e.remoteTypes.length>0){const n=e.remoteTypes.map(l=>({1:"On-site",2:"Remote",3:"Hybrid"})[l]||`Type ${l}`);r.push({name:"Work Type",value:n.join(", ")})}if(e.jobTypes&&e.jobTypes.length>0){const n=e.jobTypes.map(l=>({F:"Full-time",P:"Part-time",C:"Contract",T:"Temporary",V:"Volunteer",I:"Internship",O:"Other"})[l]||l);r.push({name:"Job Type",value:n.join(", ")})}if(e.specificLocations&&e.specificLocations.length>0){const n=e.specificLocations.map(l=>l.split(", ").map(i=>i.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ")).join(", "));r.push({name:"Locations",value:n.join(", ")})}return{url:t,activeFilters:r}}const Dl=async()=>{try{return await mr.getValidToken()}catch(e){return console.error("Failed to get auth token:",e),null}},Do=()=>{try{return mr.getCurrentUser()?.id||null}catch(e){return console.error("Failed to get user ID:",e),null}};class Ll{constructor(){this.cachedStatus=null,this.cacheTimestamp=0,this.CACHE_DURATION=300*1e3}static getInstance(){return Ll.instance||(Ll.instance=new Ll),Ll.instance}async getSubscriptionStatus(){const t=Date.now();if(this.cachedStatus&&t-this.cacheTimestamp<this.CACHE_DURATION)return this.cachedStatus;try{const n=await(await Cr.get("/api/subscription/status")).json(),l=n.subscription.tier==="free"&&n.subscription.status==="error"?"active":n.subscription.status,i={tier:n.subscription.tier,status:l,limit:n.subscription.limit===null?1/0:n.subscription.limit,used:n.usage.used,remaining:n.usage.remaining===null?1/0:n.usage.remaining,...n.subscription.period_end!==void 0&&{current_period_end:n.subscription.period_end},...n.subscription.should_upgrade!==void 0&&{should_upgrade:n.subscription.should_upgrade}};return this.cachedStatus=i,this.cacheTimestamp=t,i}catch(r){return console.error("Error fetching subscription status:",r),{tier:"free",status:"active",limit:10,used:0,remaining:10}}}async upgradeSubscription(t){try{const r=await Cr.post("/api/subscription/upgrade",{tier:t});if(!r.ok)return{success:!1,message:(await r.json().catch(()=>({detail:"Unknown error"}))).detail||"Failed to upgrade subscription"};const n=await r.json();return n.success&&this.clearCache(),n}catch(r){throw console.error("Error upgrading subscription:",r),r}}async createCheckoutSession(t){try{const r=await Cr.post("/api/subscription/create-checkout-session",{tier:t});if(!r.ok){const l=await r.json().catch(()=>({detail:"Unknown error"}));throw new Error(l.detail||"Failed to create checkout session")}const n=await r.json();if(!n.checkout_url)throw new Error("No checkout URL returned from server");return n.checkout_url}catch(r){throw console.error("Error creating checkout session:",r),r}}async getCustomerPortalUrl(){try{const t=await Cr.post("/api/subscription/portal",{});if(!t.ok){const n=await t.json().catch(()=>({detail:"Unknown error"}));throw new Error(n.detail||"Failed to get customer portal URL")}const r=await t.json();if(!r.portal_url)throw new Error("No portal URL returned from server");return r.portal_url}catch(t){throw console.error("Error getting customer portal URL:",t),t}}async getUsage(){try{const t=Cr.getTimezoneOffset(),n=await(await Cr.get(`/api/subscription/usage?timezone_offset=${t}`)).json();return{tier:n.tier,status:n.status,monthly_limit:n.monthly_limit===null?1/0:n.monthly_limit,monthly_used:n.monthly_used,monthly_remaining:n.monthly_remaining===null?1/0:n.monthly_remaining,current_period_end:n.current_period_end,can_create_application:n.can_create_application,daily_limit:n.daily_limit,daily_used:n.daily_used,daily_remaining:n.daily_remaining,next_reset:n.next_reset,ai_resume_limit:n.ai_resume_limit===null?1/0:n.ai_resume_limit,ai_resume_used:n.ai_resume_used,ai_resume_remaining:n.ai_resume_remaining===null?1/0:n.ai_resume_remaining}}catch(t){console.error("Error fetching usage status:",t);const r=new Date,n=new Date(r);return n.setDate(n.getDate()+1),n.setHours(8,0,0,0),{tier:"free",status:"active",monthly_limit:10,monthly_used:0,monthly_remaining:10,can_create_application:!1,daily_limit:40,daily_used:0,daily_remaining:40,next_reset:n.toISOString(),ai_resume_limit:10,ai_resume_used:0,ai_resume_remaining:10}}}async getDailyLimitStatus(){const t=await this.getUsage();return{dailyLimit:t.daily_limit,dailyUsed:t.daily_used,dailyRemaining:t.daily_remaining,nextReset:t.next_reset,aiResumeLimit:t.ai_resume_limit,aiResumeUsed:t.ai_resume_used,aiResumeRemaining:t.ai_resume_remaining}}clearCache(){this.cachedStatus=null,this.cacheTimestamp=0}hasActiveSubscription(){return this.cachedStatus?.tier!=="free"}}const sn=Ll.getInstance();var RR=JT();/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),AM=e=>{const t=vU(e);return t.charAt(0).toUpperCase()+t.slice(1)},ER=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),xU=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=F.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:i,iconNode:d,...p},g)=>F.createElement("svg",{ref:g,...bU,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ER("lucide",l),...!i&&!xU(p)&&{"aria-hidden":"true"},...p},[...d.map(([x,y])=>F.createElement(x,y)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=(e,t)=>{const r=F.forwardRef(({className:n,...l},i)=>F.createElement(wU,{ref:i,iconNode:t,className:ER(`lucide-${yU(AM(e))}`,`lucide-${e}`,n),...l}));return r.displayName=AM(e),r};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],SU=kt("activity",_U);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],jU=kt("arrow-down-wide-narrow",kU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Od=kt("arrow-left",MU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Gs=kt("arrow-right",CU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],AU=kt("arrow-up-narrow-wide",TU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Gw=kt("brain",RU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],IR=kt("briefcase",EU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xs=kt("calendar",IU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ib=kt("chart-column",zU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ia=kt("check",BU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ks=kt("chevron-down",PU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fd=kt("chevron-left",NU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],za=kt("chevron-right",DU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ud=kt("chevron-up",LU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ki=kt("circle-alert",OU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mi=kt("circle-check-big",FU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ba=kt("circle-x",UU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qU=kt("circle",$U);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Wi=kt("clock",HU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],VU=kt("code",WU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sb=kt("copy",GU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],YU=kt("credit-card",KU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ob=kt("crown",JU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pa=kt("download",ZU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Kw=kt("ellipsis",XU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],e$=kt("expand",QU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$i=kt("external-link",t$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$d=kt("eye-off",r$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],os=kt("eye",n$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lo=kt("file-text",i$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],RM=kt("folder-open",s$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Uo=kt("funnel",o$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],l$=kt("infinity",a$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],id=kt("key",c$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d$=kt("layout-dashboard",u$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],h$=kt("list",f$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zR=kt("loader-circle",p$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Yw=kt("loader",g$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],BR=kt("lock",m$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],PR=kt("log-out",y$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$o=kt("mail",v$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],NR=kt("map-pin",x$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M5 12h14",key:"1ays0h"}]],DR=kt("minus",b$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],LR=kt("mouse-pointer-click",w$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],S$=kt("octagon-alert",_$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],dp=kt("panels-top-left",k$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Jw=kt("pen",j$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ab=kt("play",M$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qi=kt("plus",C$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],A$=kt("redo",T$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],E$=kt("refresh-ccw",R$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],An=kt("refresh-cw",I$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],B$=kt("rotate-ccw",z$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],N$=kt("save",P$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zw=kt("search",D$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wp=kt("settings",L$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],F$=kt("shield-alert",O$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$$=kt("shield-check",U$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fp=kt("shield",q$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],W$=kt("skip-forward",H$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["rect",{width:"3",height:"8",x:"13",y:"2",rx:"1.5",key:"diqz80"}],["path",{d:"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5",key:"183iwg"}],["rect",{width:"3",height:"8",x:"8",y:"14",rx:"1.5",key:"hqg7r1"}],["path",{d:"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5",key:"76g71w"}],["rect",{width:"8",height:"3",x:"14",y:"13",rx:"1.5",key:"1kmz0a"}],["path",{d:"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5",key:"jc4sz0"}],["rect",{width:"8",height:"3",x:"2",y:"8",rx:"1.5",key:"1omvl4"}],["path",{d:"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5",key:"16f3cl"}]],OR=kt("slack",V$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],K$=kt("sparkles",G$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],J$=kt("square-pen",Y$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],X$=kt("star",Z$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],eq=kt("target",Q$);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],rq=kt("ticket",tq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],iq=kt("timer",nq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ca=kt("trash-2",sq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]],aq=kt("trello",oq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],FR=kt("trending-down",lq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xw=kt("trending-up",cq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ta=kt("triangle-alert",uq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],fq=kt("undo-2",dq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],pq=kt("undo",hq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mq=kt("upload",gq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cc=kt("user",yq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hs=kt("users",vq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],UR=kt("wand-sparkles",xq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],wq=kt("wifi",bq);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cn=kt("x",_q);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hp=kt("zap",Sq),To={pro:{id:"pro",name:"Pro",price:"$29/month",priceValue:29,originalPrice:"$49/month",originalPriceValue:49,applications_limit:300,features:["Access to all AI features","300 applications per month","Enhanced contact management"],color:{primary:"#3b82f6",light:"#dbeafe"}},unlimited:{id:"unlimited",name:"Unlimited",price:"$49/month",priceValue:49,originalPrice:"$79/month",originalPriceValue:79,applications_limit:"unlimited",features:["Everything in Pro","Unlimited applications","Custom integrations","Priority support"],highlighted:!0,color:{primary:"#8b5cf6",light:"#ede9fe"}}},uc=()=>({pro:{price:To.pro.price,applications_limit:To.pro.applications_limit,features:To.pro.features},unlimited:{price:To.unlimited.price,applications_limit:To.unlimited.applications_limit,features:To.unlimited.features}}),kq=()=>[To.pro,To.unlimited];var st=typeof window<"u"?window:void 0,li=typeof globalThis<"u"?globalThis:st,$R=Array.prototype,EM=$R.forEach,IM=$R.indexOf,Si=li?.navigator,Rt=li?.document,oi=li?.location,lb=li?.fetch,cb=li!=null&&li.XMLHttpRequest&&"withCredentials"in new li.XMLHttpRequest?li.XMLHttpRequest:void 0,zM=li?.AbortController,si=Si?.userAgent,tr=st??{},Ao={DEBUG:!1,LIB_VERSION:"1.275.1"};function BM(e,t,r,n,l,i,d){try{var p=e[i](d),g=p.value}catch(x){return void r(x)}p.done?t(g):Promise.resolve(g).then(n,l)}function PM(e){return function(){var t=this,r=arguments;return new Promise((function(n,l){var i=e.apply(t,r);function d(g){BM(i,n,l,d,p,"next",g)}function p(g){BM(i,n,l,d,p,"throw",g)}d(void 0)}))}}function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zt.apply(null,arguments)}function qR(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jq=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function xr(e,t){return e.indexOf(t)!==-1}var Vp=function(e){return e.trim()},ub=function(e){return e.replace(/^\$/,"")},Mq=Array.isArray,HR=Object.prototype,WR=HR.hasOwnProperty,Gp=HR.toString,$r=Mq||function(e){return Gp.call(e)==="[object Array]"},Eo=e=>typeof e=="function",Hn=e=>e===Object(e)&&!$r(e),Ol=e=>{if(Hn(e)){for(var t in e)if(WR.call(e,t))return!1;return!0}return!1},Mt=e=>e===void 0,_n=e=>Gp.call(e)=="[object String]",db=e=>_n(e)&&e.trim().length===0,Ys=e=>e===null,Kr=e=>Mt(e)||Ys(e),ws=e=>Gp.call(e)=="[object Number]",xd=e=>Gp.call(e)==="[object Boolean]",Cq=e=>e instanceof FormData,Tq=e=>xr(jq,e);function fb(e){return e===null||typeof e!="object"}function pp(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function VR(e){return!Mt(Event)&&(function(t,r){try{return t instanceof r}catch{return!1}})(e,Event)}var Aq=[!0,"true",1,"1","yes"],Wx=e=>xr(Aq,e),Rq=[!1,"false",0,"0","no"];function ps(e,t,r,n,l){return t>r&&(n.warn("min cannot be greater than max."),t=r),ws(e)?e>r?(n.warn(" cannot be  greater than max: "+r+". Using max value instead."),r):e<t?(n.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(n.warn(" must be a number. using max or fallback. max: "+r+", fallback: "+l),ps(l||r,t,r,n))}class Eq{constructor(t){this.t=t,this.i={},this.o=()=>{Object.keys(this.i).forEach((r=>{var n=this.h(r)+this.m;n>=this.S?delete this.i[r]:this.$(r,n)}))},this.h=r=>this.i[String(r)],this.$=(r,n)=>{this.i[String(r)]=n},this.consumeRateLimit=r=>{var n,l,i=(n=this.h(r))!==null&&n!==void 0?n:this.S;if((i=Math.max(i-1,0))===0)return!0;this.$(r,i);var d=i===0;return d&&((l=this.k)==null||l.call(this,r)),d},this.k=this.t.k,this.S=ps(this.t.bucketSize,0,100,this.t.P),this.m=ps(this.t.refillRate,0,this.S,this.t.P),this.T=ps(this.t.refillInterval,0,864e5,this.t.P),this.I=setInterval((()=>{this.o()}),this.T)}stop(){this.I&&(clearInterval(this.I),this.I=void 0)}}var Ch,NM,Vx,Iq=e=>e instanceof Error;function zq(e){var t=globalThis._posthogChunkIds;if(t){var r=Object.keys(t);return Vx&&r.length===NM||(NM=r.length,Vx=r.reduce(((n,l)=>{Ch||(Ch={});var i=Ch[l];if(i)n[i[0]]=i[1];else for(var d=e(l),p=d.length-1;p>=0;p--){var g=d[p],x=g?.filename,y=t[l];if(x&&y){n[x]=y,Ch[l]=[x,y];break}}return n}),{})),Vx}}var Zl="?";function hb(e,t,r,n){var l={platform:"web:javascript",filename:e,function:t==="<anonymous>"?Zl:t,in_app:!0};return Mt(r)||(l.lineno=r),Mt(n)||(l.colno=n),l}var GR=(e,t)=>{var r=e.indexOf("safari-extension")!==-1,n=e.indexOf("safari-web-extension")!==-1;return r||n?[e.indexOf("@")!==-1?e.split("@")[0]:Zl,r?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},Bq=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Pq=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Nq=/\((\S*)(?::(\d+))(?::(\d+))\)/,Dq=e=>{var t=Bq.exec(e);if(t){var[,r,n,l]=t;return hb(r,Zl,+n,+l)}var i=Pq.exec(e);if(i){if(i[2]&&i[2].indexOf("eval")===0){var d=Nq.exec(i[2]);d&&(i[2]=d[1],i[3]=d[2],i[4]=d[3])}var[p,g]=GR(i[1]||Zl,i[2]);return hb(g,p,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}},Lq=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Oq=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Fq=e=>{var t=Lq.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var r=Oq.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}var n=t[3],l=t[1]||Zl;return[l,n]=GR(l,n),hb(n,l,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},DM=/\(error: (.*)\)/,LM=50;function Uq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n,l){l===void 0&&(l=0);for(var i=[],d=n.split(`
`),p=l;p<d.length;p++){var g=d[p];if(!(g.length>1024)){var x=DM.test(g)?g.replace(DM,"$1"):g;if(!x.match(/\S*Error: /)){for(var y of t){var w=y(x);if(w){i.push(w);break}}if(i.length>=LM)break}}}return(function(j){if(!j.length)return[];var _=Array.from(j);return _.reverse(),_.slice(0,LM).map((A=>{return zt({},A,{filename:A.filename||(E=_,E[E.length-1]||{}).filename,function:A.function||Zl});var E}))})(i)}}class $q{constructor(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n=[]),this.coercers=t,this.modifiers=n,this.stackParser=Uq(...r)}buildFromUnknown(t,r){r===void 0&&(r={});var n=r&&r.mechanism||{handled:!0,type:"generic"},l=this.buildCoercingContext(n,r,0).apply(t),i=this.buildParsingContext(),d=this.parseStacktrace(l,i);return{$exception_list:this.convertToExceptionList(d,n),$exception_level:"error"}}modifyFrames(t){var r=this;return PM((function*(){for(var n of t)n.stacktrace&&n.stacktrace.frames&&$r(n.stacktrace.frames)&&(n.stacktrace.frames=yield r.applyModifiers(n.stacktrace.frames));return t}))()}coerceFallback(t){var r;return{type:"Error",value:"Unknown error",stack:(r=t.syntheticException)==null?void 0:r.stack,synthetic:!0}}parseStacktrace(t,r){var n,l;return t.cause!=null&&(n=this.parseStacktrace(t.cause,r)),t.stack!=""&&t.stack!=null&&(l=this.applyChunkIds(this.stackParser(t.stack,t.synthetic?1:0),r.chunkIdMap)),zt({},t,{cause:n,stack:l})}applyChunkIds(t,r){return t.map((n=>(n.filename&&r&&(n.chunk_id=r[n.filename]),n)))}applyCoercers(t,r){for(var n of this.coercers)if(n.match(t))return n.coerce(t,r);return this.coerceFallback(r)}applyModifiers(t){var r=this;return PM((function*(){var n=t;for(var l of r.modifiers)n=yield l(n);return n}))()}convertToExceptionList(t,r){var n,l,i,d={type:t.type,value:t.value,mechanism:{type:(n=r.type)!==null&&n!==void 0?n:"generic",handled:(l=r.handled)===null||l===void 0||l,synthetic:(i=t.synthetic)!==null&&i!==void 0&&i}};t.stack&&(d.stacktrace={type:"raw",frames:t.stack});var p=[d];return t.cause!=null&&p.push(...this.convertToExceptionList(t.cause,zt({},r,{handled:!0}))),p}buildParsingContext(){return{chunkIdMap:zq(this.stackParser)}}buildCoercingContext(t,r,n){n===void 0&&(n=0);var l=(i,d)=>{if(d<=4){var p=this.buildCoercingContext(t,r,d);return this.applyCoercers(i,p)}};return zt({},r,{syntheticException:n==0?r.syntheticException:void 0,mechanism:t,apply:i=>l(i,n),next:i=>l(i,n+1)})}}class qq{match(t){return this.isDOMException(t)||this.isDOMError(t)}coerce(t,r){var n=_n(t.stack);return{type:this.getType(t),value:this.getValue(t),stack:n?t.stack:void 0,cause:t.cause?r.next(t.cause):void 0,synthetic:!1}}getType(t){return this.isDOMError(t)?"DOMError":"DOMException"}getValue(t){var r=t.name||(this.isDOMError(t)?"DOMError":"DOMException");return t.message?r+": "+t.message:r}isDOMException(t){return pp(t,"DOMException")}isDOMError(t){return pp(t,"DOMError")}}class Hq{match(t){return(r=>r instanceof Error)(t)}coerce(t,r){return{type:this.getType(t),value:this.getMessage(t,r),stack:this.getStack(t),cause:t.cause?r.next(t.cause):void 0,synthetic:!1}}getType(t){return t.name||t.constructor.name}getMessage(t,r){var n=t.message;return n.error&&typeof n.error.message=="string"?String(n.error.message):String(n)}getStack(t){return t.stacktrace||t.stack||void 0}}class Wq{constructor(){}match(t){return pp(t,"ErrorEvent")&&t.error!=null}coerce(t,r){var n,l=r.apply(t.error);return l||{type:"ErrorEvent",value:t.message,stack:(n=r.syntheticException)==null?void 0:n.stack,synthetic:!0}}}var Vq=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class Gq{match(t){return typeof t=="string"}coerce(t,r){var n,[l,i]=this.getInfos(t);return{type:l??"Error",value:i??t,stack:(n=r.syntheticException)==null?void 0:n.stack,synthetic:!0}}getInfos(t){var r="Error",n=t,l=t.match(Vq);return l&&(r=l[1],n=l[2]),[r,n]}}var Kq=["fatal","error","warning","log","info","debug"];function KR(e,t){t===void 0&&(t=40);var r=Object.keys(e);if(r.sort(),!r.length)return"[object has no keys]";for(var n=r.length;n>0;n--){var l=r.slice(0,n).join(", ");if(!(l.length>t))return n===r.length||l.length<=t?l:l.slice(0,t)+"..."}return""}class Yq{match(t){return typeof t=="object"&&t!==null}coerce(t,r){var n,l=this.getErrorPropertyFromObject(t);return l?r.apply(l):{type:this.getType(t),value:this.getValue(t),stack:(n=r.syntheticException)==null?void 0:n.stack,level:this.isSeverityLevel(t.level)?t.level:"error",synthetic:!0}}getType(t){return VR(t)?t.constructor.name:"Error"}getValue(t){if("name"in t&&typeof t.name=="string"){var r="'"+t.name+"' captured as exception";return"message"in t&&typeof t.message=="string"&&(r+=" with message: '"+t.message+"'"),r}if("message"in t&&typeof t.message=="string")return t.message;var n=this.getObjectClassName(t);return(n&&n!=="Object"?"'"+n+"'":"Object")+" captured as exception with keys: "+KR(t)}isSeverityLevel(t){return _n(t)&&!db(t)&&Kq.indexOf(t)>=0}getErrorPropertyFromObject(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=t[r];if(Iq(n))return n}}getObjectClassName(t){try{var r=Object.getPrototypeOf(t);return r?r.constructor.name:void 0}catch{return}}}class Jq{match(t){return VR(t)}coerce(t,r){var n,l=t.constructor.name;return{type:l,value:l+" captured as exception with keys: "+KR(t),stack:(n=r.syntheticException)==null?void 0:n.stack,synthetic:!0}}}class Zq{match(t){return fb(t)}coerce(t,r){var n;return{type:"Error",value:"Primitive value captured as exception: "+String(t),stack:(n=r.syntheticException)==null?void 0:n.stack,synthetic:!0}}}class Xq{match(t){return pp(t,"PromiseRejectionEvent")}coerce(t,r){var n,l=this.getUnhandledRejectionReason(t);return fb(l)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(l),stack:(n=r.syntheticException)==null?void 0:n.stack,synthetic:!0}:r.apply(l)}getUnhandledRejectionReason(t){if(fb(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}}var YR=e=>{var t={R:function(r){if(st&&(Ao.DEBUG||tr.POSTHOG_DEBUG)&&!Mt(st.console)&&st.console){for(var n=("__rrweb_original__"in st.console[r])?st.console[r].__rrweb_original__:st.console[r],l=arguments.length,i=new Array(l>1?l-1:0),d=1;d<l;d++)i[d-1]=arguments[d];n(e,...i)}},info:function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];t.R("log",...n)},warn:function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];t.R("warn",...n)},error:function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];t.R("error",...n)},critical:function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];console.error(e,...n)},uninitializedWarning:r=>{t.error("You must initialize PostHog before calling "+r)},createLogger:r=>YR(e+" "+r)};return t},At=YR("[PostHog.js]"),In=At.createLogger,Qq=In("[ExternalScriptsLoader]"),OM=(e,t,r)=>{if(e.config.disable_external_dependency_loading)return Qq.warn(t+" was requested but loading of external scripts is disabled."),r("Loading of external scripts is disabled");var n=Rt?.querySelectorAll("script");if(n){for(var l,i=function(){if(n[d].src===t){var g=n[d];return g.__posthog_loading_callback_fired?{v:r()}:(g.addEventListener("load",(x=>{g.__posthog_loading_callback_fired=!0,r(void 0,x)})),g.onerror=x=>r(x),{v:void 0})}},d=0;d<n.length;d++)if(l=i())return l.v}var p=()=>{if(!Rt)return r("document not found");var g=Rt.createElement("script");if(g.type="text/javascript",g.crossOrigin="anonymous",g.src=t,g.onload=w=>{g.__posthog_loading_callback_fired=!0,r(void 0,w)},g.onerror=w=>r(w),e.config.prepare_external_dependency_script&&(g=e.config.prepare_external_dependency_script(g)),!g)return r("prepare_external_dependency_script returned null");var x,y=Rt.querySelectorAll("body > script");y.length>0?(x=y[0].parentNode)==null||x.insertBefore(g,y[0]):Rt.body.appendChild(g)};Rt!=null&&Rt.body?p():Rt?.addEventListener("DOMContentLoaded",p)};tr.__PosthogExtensions__=tr.__PosthogExtensions__||{},tr.__PosthogExtensions__.loadExternalDependency=(e,t,r)=>{var n="/static/"+t+".js?v="+e.version;if(t==="remote-config"&&(n="/array/"+e.config.token+"/config.js"),t==="toolbar"){var l=3e5;n=n+"&t="+Math.floor(Date.now()/l)*l}var i=e.requestRouter.endpointFor("assets",n);OM(e,i,r)},tr.__PosthogExtensions__.loadSiteApp=(e,t,r)=>{var n=e.requestRouter.endpointFor("api",t);OM(e,n,r)};var gp={};function Io(e,t,r){if($r(e)){if(EM&&e.forEach===EM)e.forEach(t,r);else if("length"in e&&e.length===+e.length){for(var n=0,l=e.length;n<l;n++)if(n in e&&t.call(r,e[n],n)===gp)return}}}function Ur(e,t,r){if(!Kr(e)){if($r(e))return Io(e,t,r);if(Cq(e)){for(var n of e.entries())if(t.call(r,n[1],n[0])===gp)return}else for(var l in e)if(WR.call(e,l)&&t.call(r,e[l],l)===gp)return}}var hn=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Io(r,(function(l){for(var i in l)l[i]!==void 0&&(e[i]=l[i])})),e},dc=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Io(r,(function(l){Io(l,(function(i){e.push(i)}))})),e};function rp(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}var FM=function(e){try{return e()}catch{return}},eH=function(e){return function(){try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}catch(l){At.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),At.critical(l)}}},Qw=function(e){var t={};return Ur(e,(function(r,n){(_n(r)&&r.length>0||ws(r))&&(t[n]=r)})),t};function tH(e,t){return r=e,n=i=>_n(i)&&!Ys(t)?i.slice(0,t):i,l=new Set,(function i(d,p){return d!==Object(d)?n?n(d,p):d:l.has(d)?void 0:(l.add(d),$r(d)?(g=[],Io(d,(x=>{g.push(i(x))}))):(g={},Ur(d,((x,y)=>{l.has(x)||(g[y]=i(x,y))}))),g);var g})(r);var r,n,l}var rH=["herokuapp.com","vercel.app","netlify.app"];function nH(e){var t=e?.hostname;if(!_n(t))return!1;var r=t.split(".").slice(-2).join(".");for(var n of rH)if(r===n)return!1;return!0}function JR(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]}function Sn(e,t,r,n){var{capture:l=!1,passive:i=!0}=n??{};e?.addEventListener(t,r,{capture:l,passive:i})}var ZR="$people_distinct_id",qu="__alias",Hu="__timers",UM="$autocapture_disabled_server_side",pb="$heatmaps_enabled_server_side",$M="$exception_capture_enabled_server_side",gb="$error_tracking_suppression_rules",qM="$error_tracking_capture_extension_exceptions",HM="$web_vitals_enabled_server_side",XR="$dead_clicks_enabled_server_side",WM="$web_vitals_allowed_metrics",Gx="$session_recording_remote_config",mp="$sesid",QR="$session_is_sampled",Fl="$enabled_feature_flags",Wu="$early_access_features",mb="$feature_flag_details",Vu="$stored_person_properties",xa="$stored_group_properties",yb="$surveys",Th="$surveys_activated",yp="$flag_call_reported",Us="$user_state",vb="$client_session_props",xb="$capture_rate_limit",bb="$initial_campaign_params",wb="$initial_referrer_info",vp="$initial_person_info",xp="$epp",eE="__POSTHOG_TOOLBAR__",Tu="$posthog_cookieless",iH=[ZR,qu,"__cmpns",Hu,"$session_recording_enabled_server_side",pb,mp,Fl,gb,Us,Wu,mb,xa,Vu,yb,yp,vb,xb,bb,wb,xp,vp];function VM(e){return e instanceof Element&&(e.id===eE||!(e.closest==null||!e.closest(".toolbar-global-fade-container")))}function Kp(e){return!!e&&e.nodeType===1}function zo(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function tE(e){return!!e&&e.nodeType===3}function rE(e){return!!e&&e.nodeType===11}function e_(e){return e?Vp(e).split(/\s+/):[]}function GM(e){var t=st?.location.href;return!!(t&&e&&e.some((r=>t.match(r))))}function bp(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return e_(t)}function nE(e){return Kr(e)?null:Vp(e).split(/(\s+)/).filter((t=>bd(t))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Yp(e){var t="";return _b(e)&&!lE(e)&&e.childNodes&&e.childNodes.length&&Ur(e.childNodes,(function(r){var n;tE(r)&&r.textContent&&(t+=(n=nE(r.textContent))!==null&&n!==void 0?n:"")})),Vp(t)}function iE(e){return Mt(e.target)?e.srcElement||null:(t=e.target)!=null&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var t_=["a","button","form","input","select","textarea","label"];function sE(e,t){if(Mt(t))return!0;var r,n=function(i){if(t.some((d=>i.matches(d))))return{v:!0}};for(var l of e)if(r=n(l))return r.v;return!1}function oE(e){var t=e.parentNode;return!(!t||!Kp(t))&&t}var KM=[".ph-no-rageclick",".ph-no-capture"],r_=e=>!e||zo(e,"html")||!Kp(e),aE=(e,t)=>{if(!st||r_(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var r=!1,n=[e],l=e;l.parentNode&&!zo(l,"body");)if(rE(l.parentNode))n.push(l.parentNode.host),l=l.parentNode.host;else{var i=oE(l);if(!i)break;if(t||t_.indexOf(i.tagName.toLowerCase())>-1)r=!0;else{var d=st.getComputedStyle(i);d&&d.getPropertyValue("cursor")==="pointer"&&(r=!0)}n.push(i),l=i}return{parentIsUsefulElement:r,targetElementList:n}};function sH(e,t,r,n,l){var i,d,p,g;if(r===void 0&&(r=void 0),!st||r_(e)||(i=r)!=null&&i.url_allowlist&&!GM(r.url_allowlist)||(d=r)!=null&&d.url_ignorelist&&GM(r.url_ignorelist))return!1;if((p=r)!=null&&p.dom_event_allowlist){var x=r.dom_event_allowlist;if(x&&!x.some((A=>t.type===A)))return!1}var{parentIsUsefulElement:y,targetElementList:w}=aE(e,n);if(!(function(A,E){var P=E?.element_allowlist;if(Mt(P))return!0;var z,B=function(U){if(P.some((G=>U.tagName.toLowerCase()===G)))return{v:!0}};for(var D of A)if(z=B(D))return z.v;return!1})(w,r)||!sE(w,(g=r)==null?void 0:g.css_selector_allowlist))return!1;var j=st.getComputedStyle(e);if(j&&j.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var _=e.tagName.toLowerCase();switch(_){case"html":return!1;case"form":return(l||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(l||["change","click"]).indexOf(t.type)>=0;default:return y?(l||["click"]).indexOf(t.type)>=0:(l||["click"]).indexOf(t.type)>=0&&(t_.indexOf(_)>-1||e.getAttribute("contenteditable")==="true")}}function _b(e){for(var t=e;t.parentNode&&!zo(t,"body");t=t.parentNode){var r=bp(t);if(xr(r,"ph-sensitive")||xr(r,"ph-no-capture"))return!1}if(xr(bp(e),"ph-include"))return!0;var n=e.type||"";if(_n(n))switch(n.toLowerCase()){case"hidden":case"password":return!1}var l=e.name||e.id||"";return!(_n(l)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(l.replace(/[^a-zA-Z0-9]/g,"")))}function lE(e){return!!(zo(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||zo(e,"select")||zo(e,"textarea")||e.getAttribute("contenteditable")==="true")}var cE="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",oH=new RegExp("^(?:"+cE+")$"),aH=new RegExp(cE),uE="\\d{3}-?\\d{2}-?\\d{4}",lH=new RegExp("^("+uE+")$"),cH=new RegExp("("+uE+")");function bd(e,t){return t===void 0&&(t=!0),!(Kr(e)||_n(e)&&(e=Vp(e),(t?oH:aH).test((e||"").replace(/[- ]/g,""))||(t?lH:cH).test(e)))}function dE(e){var t=Yp(e);return bd(t=(t+" "+fE(e)).trim())?t:""}function fE(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Ur(e.childNodes,(function(r){var n;if(r&&((n=r.tagName)==null?void 0:n.toLowerCase())==="span")try{var l=Yp(r);t=(t+" "+l).trim(),r.childNodes&&r.childNodes.length&&(t=(t+" "+fE(r)).trim())}catch(i){At.error("[AutoCapture]",i)}})),t}function uH(e){return(function(t){var r=t.map((n=>{var l,i,d="";if(n.tag_name&&(d+=n.tag_name),n.attr_class)for(var p of(n.attr_class.sort(),n.attr_class))d+="."+p.replace(/"/g,"");var g=zt({},n.text?{text:n.text}:{},{"nth-child":(l=n.nth_child)!==null&&l!==void 0?l:0,"nth-of-type":(i=n.nth_of_type)!==null&&i!==void 0?i:0},n.href?{href:n.href}:{},n.attr_id?{attr_id:n.attr_id}:{},n.attributes),x={};return rp(g).sort(((y,w)=>{var[j]=y,[_]=w;return j.localeCompare(_)})).forEach((y=>{var[w,j]=y;return x[YM(w.toString())]=YM(j.toString())})),d+=":",d+=rp(x).map((y=>{var[w,j]=y;return w+'="'+j+'"'})).join("")}));return r.join(";")})((function(t){return t.map((r=>{var n,l,i={text:(n=r.$el_text)==null?void 0:n.slice(0,400),tag_name:r.tag_name,href:(l=r.attr__href)==null?void 0:l.slice(0,2048),attr_class:dH(r),attr_id:r.attr__id,nth_child:r.nth_child,nth_of_type:r.nth_of_type,attributes:{}};return rp(r).filter((d=>{var[p]=d;return p.indexOf("attr__")===0})).forEach((d=>{var[p,g]=d;return i.attributes[p]=g})),i}))})(e))}function YM(e){return e.replace(/"|\\"/g,'\\"')}function dH(e){var t=e.attr__class;return t?$r(t)?t:e_(t):void 0}class hE{constructor(){this.clicks=[]}isRageClick(t,r,n){var l=this.clicks[this.clicks.length-1];if(l&&Math.abs(t-l.x)+Math.abs(r-l.y)<30&&n-l.timestamp<1e3){if(this.clicks.push({x:t,y:r,timestamp:n}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:r,timestamp:n}];return!1}}var Kx="$copy_autocapture",qs=(function(e){return e.GZipJS="gzip-js",e.Base64="base64",e})({}),wp=e=>{var t=Rt?.createElement("a");return Mt(t)?null:(t.href=e,t)},fH=function(e,t){var r,n;t===void 0&&(t="&");var l=[];return Ur(e,(function(i,d){Mt(i)||Mt(d)||d==="undefined"||(r=encodeURIComponent((p=>p instanceof File)(i)?i.name:i.toString()),n=encodeURIComponent(d),l[l.length]=n+"="+r)})),l.join(t)},_p=function(e,t){for(var r,n=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),l=0;l<n.length;l++){var i=n[l].split("=");if(i[0]===t){r=i;break}}if(!$r(r)||r.length<2)return"";var d=r[1];try{d=decodeURIComponent(d)}catch{At.error("Skipping decoding for malformed query param: "+d)}return d.replace(/\+/g," ")},qd=function(e,t,r){if(!e||!t||!t.length)return e;for(var n=e.split("#"),l=n[0]||"",i=n[1],d=l.split("?"),p=d[1],g=d[0],x=(p||"").split("&"),y=[],w=0;w<x.length;w++){var j=x[w].split("=");$r(j)&&(t.includes(j[0])?y.push(j[0]+"="+r):y.push(x[w]))}var _=g;return p!=null&&(_+="?"+y.join("&")),i!=null&&(_+="#"+i),_},Sp=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},JM=In("[AutoCapture]");function Yx(e,t){return t.length>e?t.slice(0,e)+"...":t}function hH(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!Kp(t));return t}function pH(e,t,r,n){var l=e.tagName.toLowerCase(),i={tag_name:l};t_.indexOf(l)>-1&&!r&&(l.toLowerCase()==="a"||l.toLowerCase()==="button"?i.$el_text=Yx(1024,dE(e)):i.$el_text=Yx(1024,Yp(e)));var d=bp(e);d.length>0&&(i.classes=d.filter((function(y){return y!==""}))),Ur(e.attributes,(function(y){var w;if((!lE(e)||["name","id","class","aria-label"].indexOf(y.name)!==-1)&&(n==null||!n.includes(y.name))&&!t&&bd(y.value)&&(w=y.name,!_n(w)||w.substring(0,10)!=="_ngcontent"&&w.substring(0,7)!=="_nghost")){var j=y.value;y.name==="class"&&(j=e_(j).join(" ")),i["attr__"+y.name]=Yx(1024,j)}}));for(var p=1,g=1,x=e;x=hH(x);)p++,x.tagName===e.tagName&&g++;return i.nth_child=p,i.nth_of_type=g,i}function gH(e,t){for(var r,n,{e:l,maskAllElementAttributes:i,maskAllText:d,elementAttributeIgnoreList:p,elementsChainAsString:g}=t,x=[e],y=e;y.parentNode&&!zo(y,"body");)rE(y.parentNode)?(x.push(y.parentNode.host),y=y.parentNode.host):(x.push(y.parentNode),y=y.parentNode);var w,j=[],_={},A=!1,E=!1;if(Ur(x,(U=>{var G=_b(U);U.tagName.toLowerCase()==="a"&&(A=U.getAttribute("href"),A=G&&A&&bd(A)&&A),xr(bp(U),"ph-no-capture")&&(E=!0),j.push(pH(U,i,d,p));var $=(function(re){if(!_b(re))return{};var Q={};return Ur(re.attributes,(function(H){if(H.name&&H.name.indexOf("data-ph-capture-attribute")===0){var Y=H.name.replace("data-ph-capture-attribute-",""),T=H.value;Y&&T&&bd(T)&&(Q[Y]=T)}})),Q})(U);hn(_,$)})),E)return{props:{},explicitNoCapture:E};if(d||(e.tagName.toLowerCase()==="a"||e.tagName.toLowerCase()==="button"?j[0].$el_text=dE(e):j[0].$el_text=Yp(e)),A){var P,z;j[0].attr__href=A;var B=(P=wp(A))==null?void 0:P.host,D=st==null||(z=st.location)==null?void 0:z.host;B&&D&&B!==D&&(w=A)}return{props:hn({$event_type:l.type,$ce_version:1},g?{}:{$elements:j},{$elements_chain:uH(j)},(r=j[0])!=null&&r.$el_text?{$el_text:(n=j[0])==null?void 0:n.$el_text}:{},w&&l.type==="click"?{$external_click_url:w}:{},_)}}class mH{constructor(t){this.C=!1,this.O=null,this.rageclicks=new hE,this.F=!1,this.instance=t,this.M=null}get A(){var t,r,n=Hn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=(t=n.url_allowlist)==null?void 0:t.map((l=>new RegExp(l))),n.url_ignorelist=(r=n.url_ignorelist)==null?void 0:r.map((l=>new RegExp(l))),n}j(){if(this.isBrowserSupported()){if(st&&Rt){var t=n=>{n=n||st?.event;try{this.D(n)}catch(l){JM.error("Failed to capture event",l)}};if(Sn(Rt,"submit",t,{capture:!0}),Sn(Rt,"change",t,{capture:!0}),Sn(Rt,"click",t,{capture:!0}),this.A.capture_copied_text){var r=n=>{n=n||st?.event,this.D(n,Kx)};Sn(Rt,"copy",r,{capture:!0}),Sn(Rt,"cut",r,{capture:!0})}}}else JM.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.C&&(this.j(),this.C=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.F=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[UM]:!!t.autocapture_opt_out}),this.O=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.M=t}getElementSelectors(t){var r,n=[];return(r=this.M)==null||r.forEach((l=>{var i=Rt?.querySelectorAll(l);i?.forEach((d=>{t===d&&n.push(l)}))})),n}get isEnabled(){var t,r,n=(t=this.instance.persistence)==null?void 0:t.props[UM],l=this.O;if(Ys(l)&&!xd(n)&&!this.instance.L())return!1;var i=(r=this.O)!==null&&r!==void 0?r:!!n;return!!this.instance.config.autocapture&&!i}D(t,r){if(r===void 0&&(r="$autocapture"),this.isEnabled){var n,l=iE(t);tE(l)&&(l=l.parentNode||null),r==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(n=this.rageclicks)!=null&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&(function(j,_){if(!st||r_(j))return!1;var A,E;if((A=xd(_)?!!_&&KM:(E=_?.css_selector_ignorelist)!==null&&E!==void 0?E:KM)===!1)return!1;var{targetElementList:P}=aE(j,!1);return!sE(P,A)})(l,this.instance.config.rageclick)&&this.D(t,"$rageclick");var i=r===Kx;if(l&&sH(l,t,this.A,i,i?["copy","cut"]:void 0)){var{props:d,explicitNoCapture:p}=gH(l,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.A.element_attribute_ignorelist,elementsChainAsString:this.F});if(p)return!1;var g=this.getElementSelectors(l);if(g&&g.length>0&&(d.$element_selectors=g),r===Kx){var x,y=nE(st==null||(x=st.getSelection())==null?void 0:x.toString()),w=t.type||"clipboard";if(!y)return!1;d.$selected_content=y,d.$copy_type=w}return this.instance.capture(r,d),!0}}}isBrowserSupported(){return Eo(Rt?.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return ws(e)&&isFinite(e)&&Math.floor(e)===e});var ZM="0123456789abcdef";class kp{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,r,n,l){if(!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(n)||!Number.isInteger(l)||t<0||r<0||n<0||l<0||t>0xffffffffffff||r>4095||n>1073741823||l>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=t/Math.pow(2,40),i[1]=t/Math.pow(2,32),i[2]=t/Math.pow(2,24),i[3]=t/Math.pow(2,16),i[4]=t/Math.pow(2,8),i[5]=t,i[6]=112|r>>>8,i[7]=r,i[8]=128|n>>>24,i[9]=n>>>16,i[10]=n>>>8,i[11]=n,i[12]=l>>>24,i[13]=l>>>16,i[14]=l>>>8,i[15]=l,new kp(i)}toString(){for(var t="",r=0;r<this.bytes.length;r++)t=t+ZM.charAt(this.bytes[r]>>>4)+ZM.charAt(15&this.bytes[r]),r!==3&&r!==5&&r!==7&&r!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new kp(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var r=0;r<16;r++){var n=this.bytes[r]-t.bytes[r];if(n!==0)return Math.sign(n)}return 0}}class yH{constructor(){this.N=0,this.U=0,this.H=new vH}generate(){var t=this.generateOrAbort();if(Mt(t)){this.N=0;var r=this.generateOrAbort();if(Mt(r))throw new Error("Could not generate UUID after timestamp reset");return r}return t}generateOrAbort(){var t=Date.now();if(t>this.N)this.N=t,this.B();else{if(!(t+1e4>this.N))return;this.U++,this.U>4398046511103&&(this.N++,this.B())}return kp.fromFieldsV7(this.N,Math.trunc(this.U/Math.pow(2,30)),this.U&Math.pow(2,30)-1,this.H.nextUint32())}B(){this.U=1024*this.H.nextUint32()+(1023&this.H.nextUint32())}}var XM,pE=e=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};st&&!Mt(st.crypto)&&crypto.getRandomValues&&(pE=e=>crypto.getRandomValues(e));class vH{constructor(){this.q=new Uint32Array(8),this.W=1/0}nextUint32(){return this.W>=this.q.length&&(pE(this.q),this.W=0),this.q[this.W++]}}var Ro=()=>xH().toString(),xH=()=>(XM||(XM=new yH)).generate(),Au="",bH=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function wH(e,t){if(t){var r=(function(l,i){if(i===void 0&&(i=Rt),Au)return Au;if(!i||["localhost","127.0.0.1"].includes(l))return"";for(var d=l.split("."),p=Math.min(d.length,8),g="dmn_chk_"+Ro();!Au&&p--;){var x=d.slice(p).join("."),y=g+"=1;domain=."+x+";path=/";i.cookie=y+";max-age=3",i.cookie.includes(g)&&(i.cookie=y+";max-age=0",Au=x)}return Au})(e);if(!r){var n=(l=>{var i=l.match(bH);return i?i[0]:""})(e);n!==r&&At.info("Warning: cookie subdomain discovery mismatch",n,r),r=n}return r?"; domain=."+r:""}return""}var bs={G:()=>!!Rt,V:function(e){At.error("cookieStore error: "+e)},J:function(e){if(Rt){try{for(var t=e+"=",r=Rt.cookie.split(";").filter((i=>i.length)),n=0;n<r.length;n++){for(var l=r[n];l.charAt(0)==" ";)l=l.substring(1,l.length);if(l.indexOf(t)===0)return decodeURIComponent(l.substring(t.length,l.length))}}catch{}return null}},K:function(e){var t;try{t=JSON.parse(bs.J(e))||{}}catch{}return t},Y:function(e,t,r,n,l){if(Rt)try{var i="",d="",p=wH(Rt.location.hostname,n);if(r){var g=new Date;g.setTime(g.getTime()+24*r*60*60*1e3),i="; expires="+g.toUTCString()}l&&(d="; secure");var x=e+"="+encodeURIComponent(JSON.stringify(t))+i+"; SameSite=Lax; path=/"+p+d;return x.length>3686.4&&At.warn("cookieStore warning: large cookie, len="+x.length),Rt.cookie=x,x}catch{return}},X:function(e,t){if(Rt!=null&&Rt.cookie)try{bs.Y(e,"",-1,t)}catch{return}}},Jx=null,wn={G:function(){if(!Ys(Jx))return Jx;var e=!0;if(Mt(st))e=!1;else try{var t="__mplssupport__";wn.Y(t,"xyz"),wn.J(t)!=='"xyz"'&&(e=!1),wn.X(t)}catch{e=!1}return e||At.error("localStorage unsupported; falling back to cookie store"),Jx=e,e},V:function(e){At.error("localStorage error: "+e)},J:function(e){try{return st?.localStorage.getItem(e)}catch(t){wn.V(t)}return null},K:function(e){try{return JSON.parse(wn.J(e))||{}}catch{}return null},Y:function(e,t){try{st?.localStorage.setItem(e,JSON.stringify(t))}catch(r){wn.V(r)}},X:function(e){try{st?.localStorage.removeItem(e)}catch(t){wn.V(t)}}},_H=["distinct_id",mp,QR,xp,vp],Ah=zt({},wn,{K:function(e){try{var t={};try{t=bs.K(e)||{}}catch{}var r=hn(t,JSON.parse(wn.J(e)||"{}"));return wn.Y(e,r),r}catch{}return null},Y:function(e,t,r,n,l,i){try{wn.Y(e,t,void 0,void 0,i);var d={};_H.forEach((p=>{t[p]&&(d[p]=t[p])})),Object.keys(d).length&&bs.Y(e,d,r,n,l,i)}catch(p){wn.V(p)}},X:function(e,t){try{st?.localStorage.removeItem(e),bs.X(e,t)}catch(r){wn.V(r)}}}),Rh={},SH={G:function(){return!0},V:function(e){At.error("memoryStorage error: "+e)},J:function(e){return Rh[e]||null},K:function(e){return Rh[e]||null},Y:function(e,t){Rh[e]=t},X:function(e){delete Rh[e]}},pa=null,On={G:function(){if(!Ys(pa))return pa;if(pa=!0,Mt(st))pa=!1;else try{var e="__support__";On.Y(e,"xyz"),On.J(e)!=='"xyz"'&&(pa=!1),On.X(e)}catch{pa=!1}return pa},V:function(e){At.error("sessionStorage error: ",e)},J:function(e){try{return st?.sessionStorage.getItem(e)}catch(t){On.V(t)}return null},K:function(e){try{return JSON.parse(On.J(e))||null}catch{}return null},Y:function(e,t){try{st?.sessionStorage.setItem(e,JSON.stringify(t))}catch(r){On.V(r)}},X:function(e){try{st?.sessionStorage.removeItem(e)}catch(t){On.V(t)}}},$s=(function(e){return e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED",e})({});class kH{constructor(t){this._instance=t}get A(){return this._instance.config}get consent(){return this.Z()?$s.DENIED:this.tt}isOptedOut(){return this.A.cookieless_mode==="always"||this.consent===$s.DENIED||this.consent===$s.PENDING&&(this.A.opt_out_capturing_by_default||this.A.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===$s.DENIED}optInOut(t){this.it.Y(this.et,t?1:0,this.A.cookie_expiration,this.A.cross_subdomain_cookie,this.A.secure_cookie)}reset(){this.it.X(this.et,this.A.cross_subdomain_cookie)}get et(){var{token:t,opt_out_capturing_cookie_prefix:r,consent_persistence_name:n}=this._instance.config;return n||(r?r+t:"__ph_opt_in_out_"+t)}get tt(){var t=this.it.J(this.et);return Wx(t)?$s.GRANTED:xr(Rq,t)?$s.DENIED:$s.PENDING}get it(){if(!this.rt){var t=this.A.opt_out_capturing_persistence_type;this.rt=t==="localStorage"?wn:bs;var r=t==="localStorage"?bs:wn;r.J(this.et)&&(this.rt.J(this.et)||this.optInOut(Wx(r.J(this.et))),r.X(this.et,this.A.cross_subdomain_cookie))}return this.rt}Z(){return!!this.A.respect_dnt&&!!JR([Si?.doNotTrack,Si?.msDoNotTrack,tr.doNotTrack],(t=>Wx(t)))}}var Eh=In("[Dead Clicks]"),jH=()=>!0,MH=e=>{var t,r=!((t=e.instance.persistence)==null||!t.get_property(XR)),n=e.instance.config.capture_dead_clicks;return xd(n)?n:r};class gE{get lazyLoadedDeadClicksAutocapture(){return this.st}constructor(t,r,n){this.instance=t,this.isEnabled=r,this.onCapture=n,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[XR]:t?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.nt((()=>{this.ot()}))}nt(t){var r,n;(r=tr.__PosthogExtensions__)!=null&&r.initDeadClicksAutocapture&&t(),(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this.instance,"dead-clicks-autocapture",(l=>{l?Eh.error("failed to load script",l):t()}))}ot(){var t;if(Rt){if(!this.st&&(t=tr.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var r=Hn(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};r.__onCapture=this.onCapture,this.st=tr.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,r),this.st.start(Rt),Eh.info("starting...")}}else Eh.error("`document` not found. Cannot start.")}stop(){this.st&&(this.st.stop(),this.st=void 0,Eh.info("stopping..."))}}var Ru=In("[ExceptionAutocapture]");class CH{constructor(t){var r,n,l;this.lt=()=>{var i;if(st&&this.isEnabled&&(i=tr.__PosthogExtensions__)!=null&&i.errorWrappingFunctions){var d=tr.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,p=tr.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,g=tr.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ut&&this.A.capture_unhandled_errors&&(this.ut=d(this.captureException.bind(this))),!this.ht&&this.A.capture_unhandled_rejections&&(this.ht=p(this.captureException.bind(this))),!this.dt&&this.A.capture_console_errors&&(this.dt=g(this.captureException.bind(this)))}catch(x){Ru.error("failed to start",x),this.vt()}}},this._instance=t,this.ct=!((r=this._instance.persistence)==null||!r.props[$M]),this.A=this.ft(),this.gt=new Eq({refillRate:(n=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&n!==void 0?n:1,bucketSize:(l=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&l!==void 0?l:10,refillInterval:1e4,P:Ru}),this.startIfEnabled()}ft(){var t=this._instance.config.capture_exceptions,r={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Hn(t)?r=zt({},r,t):(Mt(t)?this.ct:t)&&(r=zt({},r,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),r}get isEnabled(){return this.A.capture_console_errors||this.A.capture_unhandled_errors||this.A.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Ru.info("enabled"),this.nt(this.lt))}nt(t){var r,n;(r=tr.__PosthogExtensions__)!=null&&r.errorWrappingFunctions&&t(),(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,"exception-autocapture",(l=>{if(l)return Ru.error("failed to load script",l);t()}))}vt(){var t,r,n;(t=this.ut)==null||t.call(this),this.ut=void 0,(r=this.ht)==null||r.call(this),this.ht=void 0,(n=this.dt)==null||n.call(this),this.dt=void 0}onRemoteConfig(t){var r=t.autocaptureExceptions;this.ct=!!r||!1,this.A=this.ft(),this._instance.persistence&&this._instance.persistence.register({[$M]:this.ct}),this.startIfEnabled()}captureException(t){var r,n,l=(r=t==null||(n=t.$exception_list)==null||(n=n[0])==null?void 0:n.type)!==null&&r!==void 0?r:"Exception";this.gt.consumeRateLimit(l)?Ru.info("Skipping exception capture because of client rate limiting.",{exception:l}):this._instance.exceptions.sendExceptionEvent(t)}}function QM(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],l=r(n);return Eo(l)&&(l.prototype=l.prototype||{},Object.defineProperties(l,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=l,()=>{e[t]=n}}catch{return()=>{}}}class TH{constructor(t){var r;this._instance=t,this._t=(st==null||(r=st.location)==null?void 0:r.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(At.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.yt&&this.yt(),this.yt=void 0,At.info("History API monitoring stopped")}monitorHistoryChanges(){var t,r;if(st&&st.history){var n=this;(t=st.history.pushState)!=null&&t.__posthog_wrapped__||QM(st.history,"pushState",(l=>function(i,d,p){l.call(this,i,d,p),n.bt("pushState")})),(r=st.history.replaceState)!=null&&r.__posthog_wrapped__||QM(st.history,"replaceState",(l=>function(i,d,p){l.call(this,i,d,p),n.bt("replaceState")})),this.wt()}}bt(t){try{var r,n=st==null||(r=st.location)==null?void 0:r.pathname;if(!n)return;n!==this._t&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this._t=n}catch(l){At.error("Error capturing "+t+" pageview",l)}}wt(){if(!this.yt){var t=()=>{this.bt("popstate")};Sn(st,"popstate",t),this.yt=()=>{st&&st.removeEventListener("popstate",t)}}}}var Zx=In("[SegmentIntegration]");function AH(e,t){var r=e.config.segment;if(!r)return t();(function(n,l){var i=n.config.segment;if(!i)return l();var d=g=>{var x=()=>g.anonymousId()||Ro();n.config.get_device_id=x,g.id()&&(n.register({distinct_id:g.id(),$device_id:x()}),n.persistence.set_property(Us,"identified")),l()},p=i.user();"then"in p&&Eo(p.then)?p.then((g=>d(g))):d(p)})(e,(()=>{r.register((n=>{Promise&&Promise.resolve||Zx.warn("This browser does not have Promise support, and can not use the segment integration");var l=(i,d)=>{if(!d)return i;i.event.userId||i.event.anonymousId===n.get_distinct_id()||(Zx.info("No userId set, resetting PostHog"),n.reset()),i.event.userId&&i.event.userId!==n.get_distinct_id()&&(Zx.info("UserId set, identifying with PostHog"),n.identify(i.event.userId));var p=n.calculateEventProperties(d,i.event.properties);return i.event.properties=Object.assign({},p,i.event.properties),i};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:i=>l(i,i.event.event),page:i=>l(i,"$pageview"),identify:i=>l(i,"$identify"),screen:i=>l(i,"$screen")}})(e)).then((()=>{t()}))}))}var mE="posthog-js";function yE(e,t){var{organization:r,projectId:n,prefix:l,severityAllowList:i=["error"],sendExceptionsToPostHog:d=!0}=t===void 0?{}:t;return p=>{var g,x,y,w,j;if(!(i==="*"||i.includes(p.level))||!e.__loaded)return p;p.tags||(p.tags={});var _=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());p.tags["PostHog Person URL"]=_,e.sessionRecordingStarted()&&(p.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var A=((g=p.exception)==null?void 0:g.values)||[],E=A.map((z=>zt({},z,{stacktrace:z.stacktrace?zt({},z.stacktrace,{type:"raw",frames:(z.stacktrace.frames||[]).map((B=>zt({},B,{platform:"web:javascript"})))}):void 0}))),P={$exception_message:((x=A[0])==null?void 0:x.value)||p.message,$exception_type:(y=A[0])==null?void 0:y.type,$exception_personURL:_,$exception_level:p.level,$exception_list:E,$sentry_event_id:p.event_id,$sentry_exception:p.exception,$sentry_exception_message:((w=A[0])==null?void 0:w.value)||p.message,$sentry_exception_type:(j=A[0])==null?void 0:j.type,$sentry_tags:p.tags};return r&&n&&(P.$sentry_url=(l||"https://sentry.io/organizations/")+r+"/issues/?project="+n+"&query="+p.event_id),d&&e.exceptions.sendExceptionEvent(P),p}}class RH{constructor(t,r,n,l,i,d){this.name=mE,this.setupOnce=function(p){p(yE(t,{organization:r,projectId:n,prefix:l,severityAllowList:i,sendExceptionsToPostHog:d==null||d}))}}}var EH=st!=null&&st.location?Sp(st.location.hash,"__posthog")||Sp(location.hash,"state"):null,eC="_postHogToolbarParams",tC=In("[Toolbar]"),Co=(function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e})(Co||{});class IH{constructor(t){this.instance=t}St(t){tr.ph_toolbar_state=t}xt(){var t;return(t=tr.ph_toolbar_state)!==null&&t!==void 0?t:Co.UNINITIALIZED}maybeLoadToolbar(t,r,n){if(t===void 0&&(t=void 0),r===void 0&&(r=void 0),n===void 0&&(n=void 0),!st||!Rt)return!1;t=t??st.location,n=n??st.history;try{if(!r){try{st.localStorage.setItem("test","test"),st.localStorage.removeItem("test")}catch{return!1}r=st?.localStorage}var l,i=EH||Sp(t.hash,"__posthog")||Sp(t.hash,"state"),d=i?FM((()=>JSON.parse(atob(decodeURIComponent(i)))))||FM((()=>JSON.parse(decodeURIComponent(i)))):null;return d&&d.action==="ph_authorize"?((l=d).source="url",l&&Object.keys(l).length>0&&(d.desiredHash?t.hash=d.desiredHash:n?n.replaceState(n.state,"",t.pathname+t.search):t.hash="")):((l=JSON.parse(r.getItem(eC)||"{}")).source="localstorage",delete l.userIntent),!(!l.token||this.instance.config.token!==l.token)&&(this.loadToolbar(l),!0)}catch{return!1}}Et(t){var r=tr.ph_load_toolbar||tr.ph_load_editor;!Kr(r)&&Eo(r)?r(t,this.instance):tC.warn("No toolbar load function found")}loadToolbar(t){var r=!(Rt==null||!Rt.getElementById(eE));if(!st||r)return!1;var n=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,l=zt({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(st.localStorage.setItem(eC,JSON.stringify(zt({},l,{source:void 0}))),this.xt()===Co.LOADED)this.Et(l);else if(this.xt()===Co.UNINITIALIZED){var i;this.St(Co.LOADING),(i=tr.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"toolbar",(d=>{if(d)return tC.error("[Toolbar] Failed to load",d),void this.St(Co.UNINITIALIZED);this.St(Co.LOADED),this.Et(l)})),Sn(st,"turbolinks:load",(()=>{this.St(Co.UNINITIALIZED),this.loadToolbar(l)}))}return!0}$t(t){return this.loadToolbar(t)}maybeLoadEditor(t,r,n){return t===void 0&&(t=void 0),r===void 0&&(r=void 0),n===void 0&&(n=void 0),this.maybeLoadToolbar(t,r,n)}}var zH=In("[TracingHeaders]");class BH{constructor(t){this.kt=void 0,this.Pt=void 0,this.lt=()=>{var r,n;Mt(this.kt)&&((r=tr.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),Mt(this.Pt)&&((n=tr.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=t}nt(t){var r,n;(r=tr.__PosthogExtensions__)!=null&&r.tracingHeadersPatchFns&&t(),(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,"tracing-headers",(l=>{if(l)return zH.error("failed to load script",l);t()}))}startIfEnabledOrStop(){var t,r;this._instance.config.__add_tracing_headers?this.nt(this.lt):((t=this.kt)==null||t.call(this),(r=this.Pt)==null||r.call(this),this.kt=void 0,this.Pt=void 0)}}var Vi="Mobile",jp="iOS",gs="Android",wd="Tablet",vE=gs+" "+wd,xE="iPad",bE="Apple",wE=bE+" Watch",_d="Safari",Xl="BlackBerry",_E="Samsung",SE=_E+"Browser",kE=_E+" Internet",Aa="Chrome",PH=Aa+" OS",jE=Aa+" "+jp,n_="Internet Explorer",ME=n_+" "+Vi,i_="Opera",NH=i_+" Mini",s_="Edge",CE="Microsoft "+s_,Hl="Firefox",TE=Hl+" "+jp,Sd="Nintendo",kd="PlayStation",Wl="Xbox",AE=gs+" "+Vi,RE=Vi+" "+_d,Gu="Windows",Sb=Gu+" Phone",rC="Nokia",kb="Ouya",EE="Generic",DH=EE+" "+Vi.toLowerCase(),IE=EE+" "+wd.toLowerCase(),jb="Konqueror",Jn="(\\d+(\\.\\d+)?)",Xx=new RegExp("Version/"+Jn),LH=new RegExp(Wl,"i"),OH=new RegExp(kd+" \\w+","i"),FH=new RegExp(Sd+" \\w+","i"),o_=new RegExp(Xl+"|PlayBook|BB10","i"),UH={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},$H=(e,t)=>t&&xr(t,bE)||(function(r){return xr(r,_d)&&!xr(r,Aa)&&!xr(r,gs)})(e),zE=function(e,t){return t=t||"",xr(e," OPR/")&&xr(e,"Mini")?NH:xr(e," OPR/")?i_:o_.test(e)?Xl:xr(e,"IE"+Vi)||xr(e,"WPDesktop")?ME:xr(e,SE)?kE:xr(e,s_)||xr(e,"Edg/")?CE:xr(e,"FBIOS")?"Facebook "+Vi:xr(e,"UCWEB")||xr(e,"UCBrowser")?"UC Browser":xr(e,"CriOS")?jE:xr(e,"CrMo")||xr(e,Aa)?Aa:xr(e,gs)&&xr(e,_d)?AE:xr(e,"FxiOS")?TE:xr(e.toLowerCase(),jb.toLowerCase())?jb:$H(e,t)?xr(e,Vi)?RE:_d:xr(e,Hl)?Hl:xr(e,"MSIE")||xr(e,"Trident/")?n_:xr(e,"Gecko")?Hl:""},qH={[ME]:[new RegExp("rv:"+Jn)],[CE]:[new RegExp(s_+"?\\/"+Jn)],[Aa]:[new RegExp("("+Aa+"|CrMo)\\/"+Jn)],[jE]:[new RegExp("CriOS\\/"+Jn)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Jn)],[_d]:[Xx],[RE]:[Xx],[i_]:[new RegExp("(Opera|OPR)\\/"+Jn)],[Hl]:[new RegExp(Hl+"\\/"+Jn)],[TE]:[new RegExp("FxiOS\\/"+Jn)],[jb]:[new RegExp("Konqueror[:/]?"+Jn,"i")],[Xl]:[new RegExp(Xl+" "+Jn),Xx],[AE]:[new RegExp("android\\s"+Jn,"i")],[kE]:[new RegExp(SE+"\\/"+Jn)],[n_]:[new RegExp("(rv:|MSIE )"+Jn)],Mozilla:[new RegExp("rv:"+Jn)]},HH=function(e,t){var r=zE(e,t),n=qH[r];if(Mt(n))return null;for(var l=0;l<n.length;l++){var i=n[l],d=e.match(i);if(d)return parseFloat(d[d.length-2])}return null},nC=[[new RegExp(Wl+"; "+Wl+" (.*?)[);]","i"),e=>[Wl,e&&e[1]||""]],[new RegExp(Sd,"i"),[Sd,""]],[new RegExp(kd,"i"),[kd,""]],[o_,[Xl,""]],[new RegExp(Gu,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Sb,""];if(new RegExp(Vi).test(t)&&!/IEMobile\b/.test(t))return[Gu+" "+Vi,""];var r=/Windows NT ([0-9.]+)/i.exec(t);if(r&&r[1]){var n=r[1],l=UH[n]||"";return/arm/i.test(t)&&(l="RT"),[Gu,l]}return[Gu,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[jp,t.join(".")]}return[jp,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=Mt(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+gs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+gs+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[gs,t.join(".")]}return[gs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var r=[e[1],e[2],e[3]||"0"];t[1]=r.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[PH,""]],[/Linux|debian/i,["Linux",""]]],iC=function(e){return FH.test(e)?Sd:OH.test(e)?kd:LH.test(e)?Wl:new RegExp(kb,"i").test(e)?kb:new RegExp("("+Sb+"|WPDesktop)","i").test(e)?Sb:/iPad/.test(e)?xE:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?wE:o_.test(e)?Xl:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(rC,"i").test(e)?rC:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Vi).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?gs:vE:gs:new RegExp("(pda|"+Vi+")","i").test(e)?DH:new RegExp(wd,"i").test(e)&&!new RegExp(wd+" pc","i").test(e)?IE:""},Ih="https?://(.*)",fc=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],WH=dc(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],fc),Hd="<masked>",VH=["li_fat_id"];function BE(e,t,r){if(!Rt)return{};var n,l=t?dc([],fc,r||[]):[],i=PE(qd(Rt.URL,l,Hd),e),d=(n={},Ur(VH,(function(p){var g=bs.J(p);n[p]=g||null})),n);return hn(d,i)}function PE(e,t){var r=WH.concat(t||[]),n={};return Ur(r,(function(l){var i=_p(e,l);n[l]=i||null})),n}function NE(e){var t=(function(i){return i?i.search(Ih+"google.([^/?]*)")===0?"google":i.search(Ih+"bing.com")===0?"bing":i.search(Ih+"yahoo.com")===0?"yahoo":i.search(Ih+"duckduckgo.com")===0?"duckduckgo":null:null})(e),r=t!="yahoo"?"q":"p",n={};if(!Ys(t)){n.$search_engine=t;var l=Rt?_p(Rt.referrer,r):"";l.length&&(n.ph_keyword=l)}return n}function sC(){return navigator.language||navigator.userLanguage}function DE(){return Rt?.referrer||"$direct"}function LE(e,t){var r=e?dc([],fc,t||[]):[],n=oi?.href.substring(0,1e3);return{r:DE().substring(0,1e3),u:n?qd(n,r,Hd):void 0}}function OE(e){var t,{r,u:n}=e,l={$referrer:r,$referring_domain:r==null?void 0:r=="$direct"?"$direct":(t=wp(r))==null?void 0:t.host};if(n){l.$current_url=n;var i=wp(n);l.$host=i?.host,l.$pathname=i?.pathname;var d=PE(n);hn(l,d)}if(r){var p=NE(r);hn(l,p)}return l}function FE(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function GH(){try{return new Date().getTimezoneOffset()}catch{return}}function KH(e,t){if(!si)return{};var r,n,l,i=e?dc([],fc,t||[]):[],[d,p]=(function(g){for(var x=0;x<nC.length;x++){var[y,w]=nC[x],j=y.exec(g),_=j&&(Eo(w)?w(j,g):w);if(_)return _}return["",""]})(si);return hn(Qw({$os:d,$os_version:p,$browser:zE(si,navigator.vendor),$device:iC(si),$device_type:(n=si,l=iC(n),l===xE||l===vE||l==="Kobo"||l==="Kindle Fire"||l===IE?wd:l===Sd||l===Wl||l===kd||l===kb?"Console":l===wE?"Wearable":l?Vi:"Desktop"),$timezone:FE(),$timezone_offset:GH()}),{$current_url:qd(oi?.href,i,Hd),$host:oi?.host,$pathname:oi?.pathname,$raw_user_agent:si.length>1e3?si.substring(0,997)+"...":si,$browser_version:HH(si,navigator.vendor),$browser_language:sC(),$browser_language_prefix:(r=sC(),typeof r=="string"?r.split("-")[0]:void 0),$screen_height:st?.screen.height,$screen_width:st?.screen.width,$viewport_height:st?.innerHeight,$viewport_width:st?.innerWidth,$lib:"web",$lib_version:Ao.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var wo=In("[Web Vitals]"),oC=9e5;class YH{constructor(t){var r;this.Tt=!1,this.C=!1,this.q={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.It=()=>{clearTimeout(this.Rt),this.q.metrics.length!==0&&(this._instance.capture("$web_vitals",this.q.metrics.reduce(((n,l)=>zt({},n,{["$web_vitals_"+l.name+"_event"]:zt({},l),["$web_vitals_"+l.name+"_value"]:l.value})),{})),this.q={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Ct=n=>{var l,i=(l=this._instance.sessionManager)==null?void 0:l.checkAndGetSessionAndWindowId(!0);if(Mt(i))wo.error("Could not read session ID. Dropping metrics!");else{this.q=this.q||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var d=this.Ot();Mt(d)||(Kr(n?.name)||Kr(n?.value)?wo.error("Invalid metric received",n):this.Ft&&n.value>=this.Ft?wo.error("Ignoring metric with value >= "+this.Ft,n):(this.q.url!==d&&(this.It(),this.Rt=setTimeout(this.It,this.flushToCaptureTimeoutMs)),Mt(this.q.url)&&(this.q.url=d),this.q.firstMetricTimestamp=Mt(this.q.firstMetricTimestamp)?Date.now():this.q.firstMetricTimestamp,n.attribution&&n.attribution.interactionTargetElement&&(n.attribution.interactionTargetElement=void 0),this.q.metrics.push(zt({},n,{$current_url:d,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.q.metrics.length===this.allowedMetrics.length&&this.It()))}},this.lt=()=>{var n,l,i,d,p=tr.__PosthogExtensions__;Mt(p)||Mt(p.postHogWebVitalsCallbacks)||({onLCP:n,onCLS:l,onFCP:i,onINP:d}=p.postHogWebVitalsCallbacks),n&&l&&i&&d?(this.allowedMetrics.indexOf("LCP")>-1&&n(this.Ct.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&l(this.Ct.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.Ct.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&d(this.Ct.bind(this)),this.C=!0):wo.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Tt=!((r=this._instance.persistence)==null||!r.props[HM]),this.startIfEnabled()}get allowedMetrics(){var t,r,n=Hn(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return Mt(n)?((r=this._instance.persistence)==null?void 0:r.props[WM])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(Hn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Ft(){var t=Hn(this._instance.config.capture_performance)&&ws(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:oC;return 0<t&&t<=6e4?oC:t}get isEnabled(){var t=oi?.protocol;if(t!=="http:"&&t!=="https:")return wo.info("Web Vitals are disabled on non-http/https protocols"),!1;var r=Hn(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:xd(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return xd(r)?r:this.Tt}startIfEnabled(){this.isEnabled&&!this.C&&(wo.info("enabled, starting..."),this.nt(this.lt))}onRemoteConfig(t){var r=Hn(t.capturePerformance)&&!!t.capturePerformance.web_vitals,n=Hn(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[HM]:r}),this._instance.persistence.register({[WM]:n})),this.Tt=r,this.startIfEnabled()}nt(t){var r,n;(r=tr.__PosthogExtensions__)!=null&&r.postHogWebVitalsCallbacks&&t(),(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,"web-vitals",(l=>{l?wo.error("failed to load script",l):t()}))}Ot(){var t=st?st.location.href:void 0;if(t){var r=this._instance.config.mask_personal_data_properties,n=this._instance.config.custom_personal_data_properties,l=r?dc([],fc,n||[]):[];return qd(t,l,Hd)}wo.error("Could not determine current URL")}}var JH=In("[Heatmaps]");function aC(e){return Hn(e)&&"clientX"in e&&"clientY"in e&&ws(e.clientX)&&ws(e.clientY)}class ZH{constructor(t){var r;this.rageclicks=new hE,this.Tt=!1,this.C=!1,this.Mt=null,this.instance=t,this.Tt=!((r=this.instance.persistence)==null||!r.props[pb])}get flushIntervalMilliseconds(){var t=5e3;return Hn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return Mt(this.instance.config.capture_heatmaps)?Mt(this.instance.config.enable_heatmaps)?this.Tt:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.C)return;JH.info("starting..."),this.At(),this.Mt=setInterval(this.jt.bind(this),this.flushIntervalMilliseconds)}else{var t,r;clearInterval((t=this.Mt)!==null&&t!==void 0?t:void 0),(r=this.Dt)==null||r.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var r=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[pb]:r}),this.Tt=r,this.startIfEnabled()}getAndClearBuffer(){var t=this.q;return this.q=void 0,t}Lt(t){this.Nt(t.originalEvent,"deadclick")}At(){st&&Rt&&(Sn(st,"beforeunload",this.jt.bind(this)),Sn(Rt,"click",(t=>this.Nt(t||st?.event)),{capture:!0}),Sn(Rt,"mousemove",(t=>this.Ut(t||st?.event)),{capture:!0}),this.Dt=new gE(this.instance,jH,this.Lt.bind(this)),this.Dt.startIfEnabled(),this.C=!0)}zt(t,r){var n=this.instance.scrollManager.scrollY(),l=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),d=(function(p,g,x){for(var y=p;y&&Kp(y)&&!zo(y,"body");){if(y===x)return!1;if(xr(g,st?.getComputedStyle(y).position))return!0;y=oE(y)}return!1})(iE(t),["fixed","sticky"],i);return{x:t.clientX+(d?0:l),y:t.clientY+(d?0:n),target_fixed:d,type:r}}Nt(t,r){var n;if(r===void 0&&(r="click"),!VM(t.target)&&aC(t)){var l=this.zt(t,r);(n=this.rageclicks)!=null&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.Ht(zt({},l,{type:"rageclick"})),this.Ht(l)}}Ut(t){!VM(t.target)&&aC(t)&&(clearTimeout(this.Bt),this.Bt=setTimeout((()=>{this.Ht(this.zt(t,"mousemove"))}),500))}Ht(t){if(st){var r=st.location.href,n=this.instance.config.mask_personal_data_properties,l=this.instance.config.custom_personal_data_properties,i=n?dc([],fc,l||[]):[],d=qd(r,i,Hd);this.q=this.q||{},this.q[d]||(this.q[d]=[]),this.q[d].push(t)}}jt(){this.q&&!Ol(this.q)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class XH{constructor(t){this._instance=t}doPageView(t,r){var n,l=this.qt(t,r);return this.Wt={pathname:(n=st?.location.pathname)!==null&&n!==void 0?n:"",pageViewId:r,timestamp:t},this._instance.scrollManager.resetContext(),l}doPageLeave(t){var r;return this.qt(t,(r=this.Wt)==null?void 0:r.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.Wt)==null?void 0:t.pageViewId}}qt(t,r){var n=this.Wt;if(!n)return{$pageview_id:r};var l={$pageview_id:r,$prev_pageview_id:n.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:d,lastScrollY:p,maxScrollY:g,maxContentHeight:x,lastContentY:y,maxContentY:w}=i;if(!(Mt(d)||Mt(p)||Mt(g)||Mt(x)||Mt(y)||Mt(w))){d=Math.ceil(d),p=Math.ceil(p),g=Math.ceil(g),x=Math.ceil(x),y=Math.ceil(y),w=Math.ceil(w);var j=d<=1?1:ps(p/d,0,1,At),_=d<=1?1:ps(g/d,0,1,At),A=x<=1?1:ps(y/x,0,1,At),E=x<=1?1:ps(w/x,0,1,At);l=hn(l,{$prev_pageview_last_scroll:p,$prev_pageview_last_scroll_percentage:j,$prev_pageview_max_scroll:g,$prev_pageview_max_scroll_percentage:_,$prev_pageview_last_content:y,$prev_pageview_last_content_percentage:A,$prev_pageview_max_content:w,$prev_pageview_max_content_percentage:E})}}return n.pathname&&(l.$prev_pageview_pathname=n.pathname),n.timestamp&&(l.$prev_pageview_duration=(t.getTime()-n.timestamp.getTime())/1e3),l}}var Gi=Uint8Array,ci=Uint16Array,Ql=Uint32Array,a_=new Gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l_=new Gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lC=new Gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UE=function(e,t){for(var r=new ci(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var l=new Ql(r[30]);for(n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)l[i]=i-r[n]<<5|n;return[r,l]},$E=UE(a_,2),QH=$E[0],Mb=$E[1];QH[28]=258,Mb[258]=28;for(var cC=UE(l_,0)[1],qE=new ci(32768),Vr=0;Vr<32768;++Vr){var ga=(43690&Vr)>>>1|(21845&Vr)<<1;ga=(61680&(ga=(52428&ga)>>>2|(13107&ga)<<2))>>>4|(3855&ga)<<4,qE[Vr]=((65280&ga)>>>8|(255&ga)<<8)>>>1}var sd=function(e,t,r){for(var n=e.length,l=0,i=new ci(t);l<n;++l)++i[e[l]-1];var d,p=new ci(t);for(l=0;l<t;++l)p[l]=p[l-1]+i[l-1]<<1;for(d=new ci(n),l=0;l<n;++l)d[l]=qE[p[e[l]-1]++]>>>15-e[l];return d},Ra=new Gi(288);for(Vr=0;Vr<144;++Vr)Ra[Vr]=8;for(Vr=144;Vr<256;++Vr)Ra[Vr]=9;for(Vr=256;Vr<280;++Vr)Ra[Vr]=7;for(Vr=280;Vr<288;++Vr)Ra[Vr]=8;var Mp=new Gi(32);for(Vr=0;Vr<32;++Vr)Mp[Vr]=5;var eW=sd(Ra,9),tW=sd(Mp,5),HE=function(e){return(e/8>>0)+(7&e&&1)},WE=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var n=new(e instanceof ci?ci:e instanceof Ql?Ql:Gi)(r-t);return n.set(e.subarray(t,r)),n},Fs=function(e,t,r){r<<=7&t;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8},Eu=function(e,t,r){r<<=7&t;var n=t/8>>0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},Qx=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var l=r.length,i=r.slice();if(!l)return[new Gi(0),0];if(l==1){var d=new Gi(r[0].s+1);return d[r[0].s]=1,[d,1]}r.sort((function(G,$){return G.f-$.f})),r.push({s:-1,f:25001});var p=r[0],g=r[1],x=0,y=1,w=2;for(r[0]={s:-1,f:p.f+g.f,l:p,r:g};y!=l-1;)p=r[r[x].f<r[w].f?x++:w++],g=r[x!=y&&r[x].f<r[w].f?x++:w++],r[y++]={s:-1,f:p.f+g.f,l:p,r:g};var j=i[0].s;for(n=1;n<l;++n)i[n].s>j&&(j=i[n].s);var _=new ci(j+1),A=Cb(r[y-1],_,0);if(A>t){n=0;var E=0,P=A-t,z=1<<P;for(i.sort((function(G,$){return _[$.s]-_[G.s]||G.f-$.f}));n<l;++n){var B=i[n].s;if(!(_[B]>t))break;E+=z-(1<<A-_[B]),_[B]=t}for(E>>>=P;E>0;){var D=i[n].s;_[D]<t?E-=1<<t-_[D]++-1:++n}for(;n>=0&&E;--n){var U=i[n].s;_[U]==t&&(--_[U],++E)}A=t}return[new Gi(_),A]},Cb=function(e,t,r){return e.s==-1?Math.max(Cb(e.l,t,r+1),Cb(e.r,t,r+1)):t[e.s]=r},uC=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ci(++t),n=0,l=e[0],i=1,d=function(g){r[n++]=g},p=1;p<=t;++p)if(e[p]==l&&p!=t)++i;else{if(!l&&i>2){for(;i>138;i-=138)d(32754);i>2&&(d(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(d(l),--i;i>6;i-=6)d(8304);i>2&&(d(i-3<<5|8208),i=0)}for(;i--;)d(l);i=1,l=e[p]}return[r.subarray(0,n),t]},Iu=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Tb=function(e,t,r){var n=r.length,l=HE(t+2);e[l]=255&n,e[l+1]=n>>>8,e[l+2]=255^e[l],e[l+3]=255^e[l+1];for(var i=0;i<n;++i)e[l+i+4]=r[i];return 8*(l+4+n)},dC=function(e,t,r,n,l,i,d,p,g,x,y){Fs(t,y++,r),++l[256];for(var w=Qx(l,15),j=w[0],_=w[1],A=Qx(i,15),E=A[0],P=A[1],z=uC(j),B=z[0],D=z[1],U=uC(E),G=U[0],$=U[1],re=new ci(19),Q=0;Q<B.length;++Q)re[31&B[Q]]++;for(Q=0;Q<G.length;++Q)re[31&G[Q]]++;for(var H=Qx(re,7),Y=H[0],T=H[1],o=19;o>4&&!Y[lC[o-1]];--o);var c,h,v,b,M=x+5<<3,R=Iu(l,Ra)+Iu(i,Mp)+d,S=Iu(l,j)+Iu(i,E)+d+14+3*o+Iu(re,Y)+(2*re[16]+3*re[17]+7*re[18]);if(M<=R&&M<=S)return Tb(t,y,e.subarray(g,g+x));if(Fs(t,y,1+(S<R)),y+=2,S<R){c=sd(j,_),h=j,v=sd(E,P),b=E;var a=sd(Y,T);for(Fs(t,y,D-257),Fs(t,y+5,$-1),Fs(t,y+10,o-4),y+=14,Q=0;Q<o;++Q)Fs(t,y+3*Q,Y[lC[Q]]);y+=3*o;for(var k=[B,G],N=0;N<2;++N){var L=k[N];for(Q=0;Q<L.length;++Q){var X=31&L[Q];Fs(t,y,a[X]),y+=Y[X],X>15&&(Fs(t,y,L[Q]>>>5&127),y+=L[Q]>>>12)}}}else c=eW,h=Ra,v=tW,b=Mp;for(Q=0;Q<p;++Q)if(n[Q]>255){X=n[Q]>>>18&31,Eu(t,y,c[X+257]),y+=h[X+257],X>7&&(Fs(t,y,n[Q]>>>23&31),y+=a_[X]);var se=31&n[Q];Eu(t,y,v[se]),y+=b[se],se>3&&(Eu(t,y,n[Q]>>>5&8191),y+=l_[se])}else Eu(t,y,c[n[Q]]),y+=h[n[Q]];return Eu(t,y,c[256]),y+h[256]},rW=new Ql([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nW=(function(){for(var e=new Ql(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&3988292384)^r>>>1;e[t]=r}return e})(),iW=function(e,t,r,n,l){return(function(i,d,p,g,x,y){var w=i.length,j=new Gi(g+w+5*(1+Math.floor(w/7e3))+x),_=j.subarray(g,j.length-x),A=0;if(!d||w<8)for(var E=0;E<=w;E+=65535){var P=E+65535;P<w?A=Tb(_,A,i.subarray(E,P)):(_[E]=y,A=Tb(_,A,i.subarray(E,w)))}else{for(var z=rW[d-1],B=z>>>13,D=8191&z,U=(1<<p)-1,G=new ci(32768),$=new ci(U+1),re=Math.ceil(p/3),Q=2*re,H=function(Je){return(i[Je]^i[Je+1]<<re^i[Je+2]<<Q)&U},Y=new Ql(25e3),T=new ci(288),o=new ci(32),c=0,h=0,v=(E=0,0),b=0,M=0;E<w;++E){var R=H(E),S=32767&E,a=$[R];if(G[S]=a,$[R]=S,b<=E){var k=w-E;if((c>7e3||v>24576)&&k>423){A=dC(i,_,0,Y,T,o,h,v,M,E-M,A),v=c=h=0,M=E;for(var N=0;N<286;++N)T[N]=0;for(N=0;N<30;++N)o[N]=0}var L=2,X=0,se=D,te=S-a&32767;if(k>2&&R==H(E-te))for(var K=Math.min(B,k)-1,J=Math.min(32767,E),ne=Math.min(258,k);te<=J&&--se&&S!=a;){if(i[E+L]==i[E+L-te]){for(var oe=0;oe<ne&&i[E+oe]==i[E+oe-te];++oe);if(oe>L){if(L=oe,X=te,oe>K)break;var ae=Math.min(te,oe-2),ee=0;for(N=0;N<ae;++N){var ue=E-te+N+32768&32767,Ce=ue-G[ue]+32768&32767;Ce>ee&&(ee=Ce,a=ue)}}}te+=(S=a)-(a=G[S])+32768&32767}if(X){Y[v++]=268435456|Mb[L]<<18|cC[X];var ve=31&Mb[L],ge=31&cC[X];h+=a_[ve]+l_[ge],++T[257+ve],++o[ge],b=E+L,++c}else Y[v++]=i[E],++T[i[E]]}}A=dC(i,_,y,Y,T,o,h,v,M,E-M,A)}return WE(j,0,g+HE(A)+x)})(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n,!0)},e1=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function sW(e,t){t===void 0&&(t={});var r=(function(){var p=4294967295;return{p:function(g){for(var x=p,y=0;y<g.length;++y)x=nW[255&x^g[y]]^x>>>8;p=x},d:function(){return 4294967295^p}}})(),n=e.length;r.p(e);var l,i=iW(e,t,10+((l=t).filename&&l.filename.length+1||0),8),d=i.length;return(function(p,g){var x=g.filename;if(p[0]=31,p[1]=139,p[2]=8,p[8]=g.level<2?4:g.level==9?2:0,p[9]=3,g.mtime!=0&&e1(p,4,Math.floor(new Date(g.mtime||Date.now())/1e3)),x){p[3]=8;for(var y=0;y<=x.length;++y)p[y+10]=x.charCodeAt(y)}})(i,t),e1(i,d-8,r.d()),e1(i,d-4,n),i}var oW=function(e){var t,r,n,l,i="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,l=0;l<n;l++){var d=e.charCodeAt(l),p=null;d<128?r++:p=d>127&&d<2048?String.fromCharCode(d>>6|192,63&d|128):String.fromCharCode(d>>12|224,d>>6&63|128,63&d|128),Ys(p)||(r>t&&(i+=e.substring(t,r)),i+=p,t=r=l+1)}return r>t&&(i+=e.substring(t,e.length)),i},aW=!!cb||!!lb,fC="text/plain",Cp=(e,t)=>{var[r,n]=e.split("?"),l=zt({},t);n?.split("&").forEach((d=>{var[p]=d.split("=");delete l[p]}));var i=fH(l);return r+"?"+(i=i?(n?n+"&":"")+i:n)},Ku=(e,t)=>JSON.stringify(e,((r,n)=>typeof n=="bigint"?n.toString():n),t),t1=e=>{var{data:t,compression:r}=e;if(t){if(r===qs.GZipJS){var n=sW((function(g,x){var y=g.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(g);for(var w=new Gi(g.length+(g.length>>>1)),j=0,_=function(z){w[j++]=z},A=0;A<y;++A){if(j+5>w.length){var E=new Gi(j+8+(y-A<<1));E.set(w),w=E}var P=g.charCodeAt(A);P<128||x?_(P):P<2048?(_(192|P>>>6),_(128|63&P)):P>55295&&P<57344?(_(240|(P=65536+(1047552&P)|1023&g.charCodeAt(++A))>>>18),_(128|P>>>12&63),_(128|P>>>6&63),_(128|63&P)):(_(224|P>>>12),_(128|P>>>6&63),_(128|63&P))}return WE(w,0,j)})(Ku(t)),{mtime:0}),l=new Blob([n],{type:fC});return{contentType:fC,body:l,estimatedSize:l.size}}if(r===qs.Base64){var i=(function(g){var x,y,w,j,_,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E=0,P=0,z="",B=[];if(!g)return g;g=oW(g);do x=(_=g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<8|g.charCodeAt(E++))>>18&63,y=_>>12&63,w=_>>6&63,j=63&_,B[P++]=A.charAt(x)+A.charAt(y)+A.charAt(w)+A.charAt(j);while(E<g.length);switch(z=B.join(""),g.length%3){case 1:z=z.slice(0,-2)+"==";break;case 2:z=z.slice(0,-1)+"="}return z})(Ku(t)),d=(g=>"data="+encodeURIComponent(typeof g=="string"?g:Ku(g)))(i);return{contentType:"application/x-www-form-urlencoded",body:d,estimatedSize:new Blob([d]).size}}var p=Ku(t);return{contentType:"application/json",body:p,estimatedSize:new Blob([p]).size}}},np=[];lb&&np.push({transport:"fetch",method:e=>{var t,r,{contentType:n,body:l,estimatedSize:i}=(t=t1(e))!==null&&t!==void 0?t:{},d=new Headers;Ur(e.headers,(function(y,w){d.append(w,y)})),n&&d.append("Content-Type",n);var p=e.url,g=null;if(zM){var x=new zM;g={signal:x.signal,timeout:setTimeout((()=>x.abort()),e.timeout)}}lb(p,zt({method:e?.method||"GET",headers:d,keepalive:e.method==="POST"&&(i||0)<52428.8,body:l,signal:(r=g)==null?void 0:r.signal},e.fetchOptions)).then((y=>y.text().then((w=>{var j={statusCode:y.status,text:w};if(y.status===200)try{j.json=JSON.parse(w)}catch(_){At.error(_)}e.callback==null||e.callback(j)})))).catch((y=>{At.error(y),e.callback==null||e.callback({statusCode:0,text:y})})).finally((()=>g?clearTimeout(g.timeout):null))}}),cb&&np.push({transport:"XHR",method:e=>{var t,r=new cb;r.open(e.method||"GET",e.url,!0);var{contentType:n,body:l}=(t=t1(e))!==null&&t!==void 0?t:{};Ur(e.headers,(function(i,d){r.setRequestHeader(d,i)})),n&&r.setRequestHeader("Content-Type",n),e.timeout&&(r.timeout=e.timeout),e.disableXHRCredentials||(r.withCredentials=!0),r.onreadystatechange=()=>{if(r.readyState===4){var i={statusCode:r.status,text:r.responseText};if(r.status===200)try{i.json=JSON.parse(r.responseText)}catch{}e.callback==null||e.callback(i)}},r.send(l)}}),Si!=null&&Si.sendBeacon&&np.push({transport:"sendBeacon",method:e=>{var t=Cp(e.url,{beacon:"1"});try{var r,{contentType:n,body:l}=(r=t1(e))!==null&&r!==void 0?r:{},i=typeof l=="string"?new Blob([l],{type:n}):l;Si.sendBeacon(t,i)}catch{}}});var ec=function(e,t){if(!(function(r){try{new RegExp(r)}catch{return!1}return!0})(t))return!1;try{return new RegExp(t).test(e)}catch{return!1}};function hC(e,t,r){return Ku({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:r})}var VE={exact:(e,t)=>t.some((r=>e.some((n=>r===n)))),is_not:(e,t)=>t.every((r=>e.every((n=>r!==n)))),regex:(e,t)=>t.some((r=>e.some((n=>ec(r,n))))),not_regex:(e,t)=>t.every((r=>e.every((n=>!ec(r,n))))),icontains:(e,t)=>t.map(zh).some((r=>e.map(zh).some((n=>r.includes(n))))),not_icontains:(e,t)=>t.map(zh).every((r=>e.map(zh).every((n=>!r.includes(n)))))},zh=e=>e.toLowerCase(),pC=In("[Error tracking]");class lW{constructor(t){var r,n;this.Gt=[],this.Vt=new $q([new qq,new Xq,new Wq,new Hq,new Jq,new Yq,new Gq,new Zq],[Dq,Fq]),this._instance=t,this.Gt=(r=(n=this._instance.persistence)==null?void 0:n.get_property(gb))!==null&&r!==void 0?r:[]}onRemoteConfig(t){var r,n,l,i=(r=(n=t.errorTracking)==null?void 0:n.suppressionRules)!==null&&r!==void 0?r:[],d=(l=t.errorTracking)==null?void 0:l.captureExtensionExceptions;this.Gt=i,this._instance.persistence&&this._instance.persistence.register({[gb]:this.Gt,[qM]:d})}get Jt(){var t,r=!!this._instance.get_property(qM),n=this._instance.config.error_tracking.captureExtensionExceptions;return(t=n??r)!==null&&t!==void 0&&t}buildProperties(t,r){return this.Vt.buildFromUnknown(t,{syntheticException:r?.syntheticException,mechanism:{handled:r?.handled}})}sendExceptionEvent(t){if(this.Kt(t))pC.info("Skipping exception capture because a suppression rule matched");else{if(this.Jt||!this.Yt(t))return this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"});pC.info("Skipping exception capture because it was thrown by an extension")}}Kt(t){var r=t.$exception_list;if(!r||!$r(r)||r.length===0)return!1;var n=r.reduce(((l,i)=>{var{type:d,value:p}=i;return _n(d)&&d.length>0&&l.$exception_types.push(d),_n(p)&&p.length>0&&l.$exception_values.push(p),l}),{$exception_types:[],$exception_values:[]});return this.Gt.some((l=>{var i=l.values.map((d=>{var p,g=VE[d.operator],x=$r(d.value)?d.value:[d.value],y=(p=n[d.key])!==null&&p!==void 0?p:[];return x.length>0&&g(x,y)}));return l.type==="OR"?i.some(Boolean):i.every(Boolean)}))}Yt(t){var r=t.$exception_list;return!(!r||!$r(r))&&r.flatMap((n=>{var l,i;return(l=(i=n.stacktrace)==null?void 0:i.frames)!==null&&l!==void 0?l:[]})).some((n=>n.filename&&n.filename.startsWith("chrome-extension://")))}}var rs=In("[FeatureFlags]"),r1="$active_feature_flags",wl="$override_feature_flags",gC="$feature_flag_payloads",zu="$override_feature_flag_payloads",mC="$feature_flag_request_id",yC=e=>{var t={};for(var[r,n]of rp(e||{}))n&&(t[r]=n);return t},cW=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map((r=>{var n;return[r,(n=t[r].variant)!==null&&n!==void 0?n:t[r].enabled]}))),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter((r=>t[r].enabled)).filter((r=>{var n;return(n=t[r].metadata)==null?void 0:n.payload})).map((r=>{var n;return[r,(n=t[r].metadata)==null?void 0:n.payload]})))):rs.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e},uW=(function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e})({});class dW{constructor(t){this.Xt=!1,this.Qt=!1,this.Zt=!1,this.ti=!1,this.ii=!1,this.ei=!1,this.ri=!1,this._instance=t,this.featureFlagEventHandlers=[]}si(){var t=this._instance.config.evaluation_environments;return t!=null&&t.length?t.filter((r=>{var n=r&&typeof r=="string"&&r.trim().length>0;return n||rs.error("Invalid evaluation environment found:",r,"Expected non-empty string"),n})):[]}ni(){return this.si().length>0}flags(){if(this._instance.config.__preview_remote_config)this.ei=!0;else{var t=!this.oi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ai({disableFlags:t})}}get hasLoadedFlags(){return this.Qt}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(mb),r=this._instance.get_property(wl),n=this._instance.get_property(zu);if(!n&&!r)return t||{};var l=hn({},t||{}),i=[...new Set([...Object.keys(n||{}),...Object.keys(r||{})])];for(var d of i){var p,g,x=l[d],y=r?.[d],w=Mt(y)?(p=x?.enabled)!==null&&p!==void 0&&p:!!y,j=Mt(y)?x.variant:typeof y=="string"?y:void 0,_=n?.[d],A=zt({},x,{enabled:w,variant:w?j??x?.variant:void 0});w!==x?.enabled&&(A.original_enabled=x?.enabled),j!==x?.variant&&(A.original_variant=x?.variant),_&&(A.metadata=zt({},x?.metadata,{payload:_,original_payload:x==null||(g=x.metadata)==null?void 0:g.payload})),l[d]=A}return this.Xt||(rs.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:n,finalDetails:l}),this.Xt=!0),l}getFlagVariants(){var t=this._instance.get_property(Fl),r=this._instance.get_property(wl);if(!r)return t||{};for(var n=hn({},t),l=Object.keys(r),i=0;i<l.length;i++)n[l[i]]=r[l[i]];return this.Xt||(rs.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:r,finalFlags:n}),this.Xt=!0),n}getFlagPayloads(){var t=this._instance.get_property(gC),r=this._instance.get_property(zu);if(!r)return t||{};for(var n=hn({},t||{}),l=Object.keys(r),i=0;i<l.length;i++)n[l[i]]=r[l[i]];return this.Xt||(rs.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:r,finalPayloads:n}),this.Xt=!0),n}reloadFeatureFlags(){this.ti||this._instance.config.advanced_disable_feature_flags||this.oi||(this.oi=setTimeout((()=>{this.ai()}),5))}li(){clearTimeout(this.oi),this.oi=void 0}ensureFlagsLoaded(){this.Qt||this.Zt||this.oi||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.ti=t}ai(t){var r;if(this.li(),!this._instance.L())if(this.Zt)this.ii=!0;else{var n={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:zt({},((r=this._instance.persistence)==null?void 0:r.get_initial_props())||{},this._instance.get_property(Vu)||{}),group_properties:this._instance.get_property(xa)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(n.disable_flags=!0),this.ni()&&(n.evaluation_environments=this.si());var l=this._instance.config.__preview_remote_config,i=l?"/flags/?v=2":"/flags/?v=2&config=true",d=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",p=this._instance.requestRouter.endpointFor("api",i+d);l&&(n.timezone=FE()),this.Zt=!0,this._instance.ui({method:"POST",url:p,data:n,compression:this._instance.config.disable_compression?void 0:qs.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:g=>{var x,y,w=!0;if(g.statusCode===200&&(this.ii||(this.$anon_distinct_id=void 0),w=!1),this.Zt=!1,this.ei||(this.ei=!0,this._instance.hi((y=g.json)!==null&&y!==void 0?y:{})),!n.disable_flags||this.ii)if(this.ri=!w,g.json&&(x=g.json.quotaLimited)!=null&&x.includes(uW.FeatureFlags))rs.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var j;n.disable_flags||this.receivedFeatureFlags((j=g.json)!==null&&j!==void 0?j:{},w),this.ii&&(this.ii=!1,this.ai())}}})}}getFeatureFlag(t,r){if(r===void 0&&(r={}),this.Qt||this.getFlags()&&this.getFlags().length>0){var n=this.getFlagVariants()[t],l=""+n,i=this._instance.get_property(mC)||void 0,d=this._instance.get_property(yp)||{};if((r.send_event||!("send_event"in r))&&(!(t in d)||!d[t].includes(l))){var p,g,x,y,w,j,_,A,E;$r(d[t])?d[t].push(l):d[t]=[l],(p=this._instance.persistence)==null||p.register({[yp]:d});var P=this.getFeatureFlagDetails(t),z={$feature_flag:t,$feature_flag_response:n,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:i,$feature_flag_bootstrapped_response:((g=this._instance.config.bootstrap)==null||(g=g.featureFlags)==null?void 0:g[t])||null,$feature_flag_bootstrapped_payload:((x=this._instance.config.bootstrap)==null||(x=x.featureFlagPayloads)==null?void 0:x[t])||null,$used_bootstrap_value:!this.ri};Mt(P==null||(y=P.metadata)==null?void 0:y.version)||(z.$feature_flag_version=P.metadata.version);var B,D=(w=P==null||(j=P.reason)==null?void 0:j.description)!==null&&w!==void 0?w:P==null||(_=P.reason)==null?void 0:_.code;D&&(z.$feature_flag_reason=D),P!=null&&(A=P.metadata)!=null&&A.id&&(z.$feature_flag_id=P.metadata.id),Mt(P?.original_variant)&&Mt(P?.original_enabled)||(z.$feature_flag_original_response=Mt(P.original_variant)?P.original_enabled:P.original_variant),P!=null&&(E=P.metadata)!=null&&E.original_payload&&(z.$feature_flag_original_payload=P==null||(B=P.metadata)==null?void 0:B.original_payload),this._instance.capture("$feature_flag_called",z)}return n}rs.warn('getFeatureFlag for key "'+t+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,r){var n=this._instance.config.token,l={distinct_id:this._instance.get_distinct_id(),token:n};this.ni()&&(l.evaluation_environments=this.si()),this._instance.ui({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:l,compression:this._instance.config.disable_compression?void 0:qs.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var d,p=(d=i.json)==null?void 0:d.featureFlagPayloads;r(p?.[t]||void 0)}})}isFeatureEnabled(t,r){if(r===void 0&&(r={}),this.Qt||this.getFlags()&&this.getFlags().length>0){var n=this.getFeatureFlag(t,r);return Mt(n)?void 0:!!n}rs.warn('isFeatureEnabled for key "'+t+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((r=>r!==t))}receivedFeatureFlags(t,r){if(this._instance.persistence){this.Qt=!0;var n=this.getFlagVariants(),l=this.getFlagPayloads(),i=this.getFlagsWithDetails();(function(d,p,g,x,y){g===void 0&&(g={}),x===void 0&&(x={}),y===void 0&&(y={});var w=cW(d),j=w.flags,_=w.featureFlags,A=w.featureFlagPayloads;if(_){var E=d.requestId;if($r(_)){rs.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var P={};if(_)for(var z=0;z<_.length;z++)P[_[z]]=!0;p&&p.register({[r1]:_,[Fl]:P})}else{var B=_,D=A,U=j;d.errorsWhileComputingFlags&&(B=zt({},g,B),D=zt({},x,D),U=zt({},y,U)),p&&p.register(zt({[r1]:Object.keys(yC(B)),[Fl]:B||{},[gC]:D||{},[mb]:U||{}},E?{[mC]:E}:{}))}}})(t,this._instance.persistence,n,l,i),this.di(r)}}override(t,r){r===void 0&&(r=!1),rs.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:r})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return rs.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(wl),this._instance.persistence.unregister(zu),void this.di();if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var r,n=t;if(this.Xt=!!((r=n.suppressWarning)!==null&&r!==void 0&&r),"flags"in n){if(n.flags===!1)this._instance.persistence.unregister(wl);else if(n.flags)if($r(n.flags)){for(var l={},i=0;i<n.flags.length;i++)l[n.flags[i]]=!0;this._instance.persistence.register({[wl]:l})}else this._instance.persistence.register({[wl]:n.flags})}return"payloads"in n&&(n.payloads===!1?this._instance.persistence.unregister(zu):n.payloads&&this._instance.persistence.register({[zu]:n.payloads})),void this.di()}this.di()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.Qt){var{flags:r,flagVariants:n}=this.vi();t(r,n)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,r,n){var l,i=(this._instance.get_property(Wu)||[]).find((x=>x.flagKey===t)),d={["$feature_enrollment/"+t]:r},p={$feature_flag:t,$feature_enrollment:r,$set:d};i&&(p.$early_access_feature_name=i.name),n&&(p.$feature_enrollment_stage=n),this._instance.capture("$feature_enrollment_update",p),this.setPersonPropertiesForFlags(d,!1);var g=zt({},this.getFlagVariants(),{[t]:r});(l=this._instance.persistence)==null||l.register({[r1]:Object.keys(yC(g)),[Fl]:g}),this.di()}getEarlyAccessFeatures(t,r,n){r===void 0&&(r=!1);var l=this._instance.get_property(Wu),i=n?"&"+n.map((d=>"stage="+d)).join("&"):"";if(l&&!r)return t(l);this._instance.ui({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:d=>{var p,g;if(d.json){var x=d.json.earlyAccessFeatures;return(p=this._instance.persistence)==null||p.unregister(Wu),(g=this._instance.persistence)==null||g.register({[Wu]:x}),t(x)}}})}vi(){var t=this.getFlags(),r=this.getFlagVariants();return{flags:t.filter((n=>r[n])),flagVariants:Object.keys(r).filter((n=>r[n])).reduce(((n,l)=>(n[l]=r[l],n)),{})}}di(t){var{flags:r,flagVariants:n}=this.vi();this.featureFlagEventHandlers.forEach((l=>l(r,n,{errorsLoading:t})))}setPersonPropertiesForFlags(t,r){r===void 0&&(r=!0);var n=this._instance.get_property(Vu)||{};this._instance.register({[Vu]:zt({},n,t)}),r&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Vu)}setGroupPropertiesForFlags(t,r){r===void 0&&(r=!0);var n=this._instance.get_property(xa)||{};Object.keys(n).length!==0&&Object.keys(n).forEach((l=>{n[l]=zt({},n[l],t[l]),delete t[l]})),this._instance.register({[xa]:zt({},n,t)}),r&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var r=this._instance.get_property(xa)||{};this._instance.register({[xa]:zt({},r,{[t]:{}})})}else this._instance.unregister(xa)}reset(){this.Qt=!1,this.Zt=!1,this.ti=!1,this.ii=!1,this.ei=!1,this.ri=!1,this.$anon_distinct_id=void 0,this.li(),this.Xt=!1}}var fW=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class n1{constructor(t,r){this.A=t,this.props={},this.ci=!1,this.fi=(n=>{var l="";return n.token&&(l=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+l+"_posthog"})(t),this.it=this.pi(t),this.load(),t.debug&&At.info("Persistence loaded",t.persistence,zt({},this.props)),this.update_config(t,t,r),this.save()}isDisabled(){return!!this.gi}pi(t){fW.indexOf(t.persistence.toLowerCase())===-1&&(At.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var r=t.persistence.toLowerCase();return r==="localstorage"&&wn.G()?wn:r==="localstorage+cookie"&&Ah.G()?Ah:r==="sessionstorage"&&On.G()?On:r==="memory"?SH:r==="cookie"?bs:Ah.G()?Ah:bs}properties(){var t={};return Ur(this.props,(function(r,n){if(n===Fl&&Hn(r))for(var l=Object.keys(r),i=0;i<l.length;i++)t["$feature/"+l[i]]=r[l[i]];else p=n,g=!1,(Ys(d=iH)?g:IM&&d.indexOf===IM?d.indexOf(p)!=-1:(Ur(d,(function(x){if(g||(g=x===p))return gp})),g))||(t[n]=r);var d,p,g})),t}load(){if(!this.gi){var t=this.it.K(this.fi);t&&(this.props=hn({},t))}}save(){this.gi||this.it.Y(this.fi,this.props,this.mi,this.yi,this.bi,this.A.debug)}remove(){this.it.X(this.fi,!1),this.it.X(this.fi,!0)}clear(){this.remove(),this.props={}}register_once(t,r,n){if(Hn(t)){Mt(r)&&(r="None"),this.mi=Mt(n)?this.wi:n;var l=!1;if(Ur(t,((i,d)=>{this.props.hasOwnProperty(d)&&this.props[d]!==r||(this.props[d]=i,l=!0)})),l)return this.save(),!0}return!1}register(t,r){if(Hn(t)){this.mi=Mt(r)?this.wi:r;var n=!1;if(Ur(t,((l,i)=>{t.hasOwnProperty(i)&&this.props[i]!==l&&(this.props[i]=l,n=!0)})),n)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.ci){var t=BE(this.A.custom_campaign_params,this.A.mask_personal_data_properties,this.A.custom_personal_data_properties);Ol(Qw(t))||this.register(t),this.ci=!0}}update_search_keyword(){var t;this.register((t=Rt?.referrer)?NE(t):{})}update_referrer_info(){var t;this.register_once({$referrer:DE(),$referring_domain:Rt!=null&&Rt.referrer&&((t=wp(Rt.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[bb]||this.props[wb]||this.register_once({[vp]:LE(this.A.mask_personal_data_properties,this.A.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};Ur([wb,bb],(d=>{var p=this.props[d];p&&Ur(p,(function(g,x){t["$initial_"+ub(x)]=g}))}));var r,n,l=this.props[vp];if(l){var i=(r=OE(l),n={},Ur(r,(function(d,p){n["$initial_"+ub(p)]=d})),n);hn(t,i)}return t}safe_merge(t){return Ur(this.props,(function(r,n){n in t||(t[n]=r)})),t}update_config(t,r,n){if(this.wi=this.mi=t.cookie_expiration,this.set_disabled(t.disable_persistence||!!n),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==r.persistence){var l=this.pi(t),i=this.props;this.clear(),this.it=l,this.props=i,this.save()}}set_disabled(t){this.gi=t,this.gi?this.remove():this.save()}set_cross_subdomain(t){t!==this.yi&&(this.yi=t,this.remove(),this.save())}set_secure(t){t!==this.bi&&(this.bi=t,this.remove(),this.save())}set_event_timer(t,r){var n=this.props[Hu]||{};n[t]=r,this.props[Hu]=n,this.save()}remove_event_timer(t){var r=(this.props[Hu]||{})[t];return Mt(r)||(delete this.props[Hu][t],this.save()),r}get_property(t){return this.props[t]}set_property(t,r){this.props[t]=r,this.save()}}(function(e){return e.Button="button",e.Tab="tab",e.Selector="selector",e})({});(function(e){return e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger",e})({});var i1=(function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e})({});(function(e){return e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link",e})({});(function(e){return e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question",e})({});(function(e){return e.Once="once",e.Recurring="recurring",e.Always="always",e})({});var ip=(function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e})({}),vC=(function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e})({}),GE=(function(e){return e.Popover="popover",e.Inline="inline",e})({});class c_{constructor(){this.Si={},this.Si={}}on(t,r){return this.Si[t]||(this.Si[t]=[]),this.Si[t].push(r),()=>{this.Si[t]=this.Si[t].filter((n=>n!==r))}}emit(t,r){for(var n of this.Si[t]||[])n(r);for(var l of this.Si["*"]||[])l(t,r)}}class wa{constructor(t){this.xi=new c_,this.Ei=(r,n)=>this.$i(r,n)&&this.ki(r,n)&&this.Pi(r,n),this.$i=(r,n)=>n==null||!n.event||r?.event===n?.event,this._instance=t,this.Ti=new Set,this.Ii=new Set}init(){var t;if(!Mt((t=this._instance)==null?void 0:t.Ri)){var r;(r=this._instance)==null||r.Ri(((n,l)=>{this.on(n,l)}))}}register(t){var r,n;if(!Mt((r=this._instance)==null?void 0:r.Ri)&&(t.forEach((d=>{var p,g;(p=this.Ii)==null||p.add(d),(g=d.steps)==null||g.forEach((x=>{var y;(y=this.Ti)==null||y.add(x?.event||"")}))})),(n=this._instance)!=null&&n.autocapture)){var l,i=new Set;t.forEach((d=>{var p;(p=d.steps)==null||p.forEach((g=>{g!=null&&g.selector&&i.add(g?.selector)}))})),(l=this._instance)==null||l.autocapture.setElementSelectors(i)}}on(t,r){var n;r!=null&&t.length!=0&&(this.Ti.has(t)||this.Ti.has(r?.event))&&this.Ii&&((n=this.Ii)==null?void 0:n.size)>0&&this.Ii.forEach((l=>{this.Ci(r,l)&&this.xi.emit("actionCaptured",l.name)}))}Oi(t){this.onAction("actionCaptured",(r=>t(r)))}Ci(t,r){if(r?.steps==null)return!1;for(var n of r.steps)if(this.Ei(t,n))return!0;return!1}onAction(t,r){return this.xi.on(t,r)}ki(t,r){if(r!=null&&r.url){var n,l=t==null||(n=t.properties)==null?void 0:n.$current_url;if(!l||typeof l!="string"||!wa.Fi(l,r?.url,r?.url_matching||"contains"))return!1}return!0}static Fi(t,r,n){switch(n){case"regex":return!!st&&ec(t,r);case"exact":return r===t;case"contains":var l=wa.Mi(r).replace(/_/g,".").replace(/%/g,".*");return ec(t,l);default:return!1}}static Mi(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Pi(t,r){if((r!=null&&r.href||r!=null&&r.tag_name||r!=null&&r.text)&&!this.Ai(t).some((i=>!(r!=null&&r.href&&!wa.Fi(i.href||"",r?.href,r?.href_matching||"exact"))&&(r==null||!r.tag_name||i.tag_name===r?.tag_name)&&!(r!=null&&r.text&&!wa.Fi(i.text||"",r?.text,r?.text_matching||"exact")&&!wa.Fi(i.$el_text||"",r?.text,r?.text_matching||"exact")))))return!1;if(r!=null&&r.selector){var n,l=t==null||(n=t.properties)==null?void 0:n.$element_selectors;if(!l||!l.includes(r?.selector))return!1}return!0}Ai(t){return t?.properties.$elements==null?[]:t?.properties.$elements}}var Pr=In("[Surveys]"),Ab="seenSurvey_",hW=(e,t)=>{var r="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(r="$survey_"+t+"/"+e.id+"/"+e.current_iteration),r},xC=e=>{var t=""+Ab+e.id;return e.current_iteration&&e.current_iteration>0&&(t=""+Ab+e.id+"_"+e.current_iteration),t},pW=[i1.Popover,i1.Widget,i1.API],gW={ignoreConditions:!1,ignoreDelay:!1,displayType:GE.Popover};class mW{constructor(t){this._instance=t,this.ji=new Map,this.Di=new Map}register(t){var r;Mt((r=this._instance)==null?void 0:r.Ri)||(this.Li(t),this.Ni(t))}Ni(t){var r=t.filter((n=>{var l,i;return((l=n.conditions)==null?void 0:l.actions)&&((i=n.conditions)==null||(i=i.actions)==null||(i=i.values)==null?void 0:i.length)>0}));r.length!==0&&(this.Ui==null&&(this.Ui=new wa(this._instance),this.Ui.init(),this.Ui.Oi((n=>{this.onAction(n)}))),r.forEach((n=>{var l,i,d,p,g;n.conditions&&(l=n.conditions)!=null&&l.actions&&(i=n.conditions)!=null&&(i=i.actions)!=null&&i.values&&((d=n.conditions)==null||(d=d.actions)==null||(d=d.values)==null?void 0:d.length)>0&&((p=this.Ui)==null||p.register(n.conditions.actions.values),(g=n.conditions)==null||(g=g.actions)==null||(g=g.values)==null||g.forEach((x=>{if(x&&x.name){var y=this.Di.get(x.name);y&&y.push(n.id),this.Di.set(x.name,y||[n.id])}})))})))}Li(t){var r;t.filter((n=>{var l,i;return((l=n.conditions)==null?void 0:l.events)&&((i=n.conditions)==null||(i=i.events)==null||(i=i.values)==null?void 0:i.length)>0})).length!==0&&((r=this._instance)==null||r.Ri(((n,l)=>{this.onEvent(n,l)})),t.forEach((n=>{var l;(l=n.conditions)==null||(l=l.events)==null||(l=l.values)==null||l.forEach((i=>{if(i&&i.name){var d=this.ji.get(i.name);d&&d.push(n.id),this.ji.set(i.name,d||[n.id])}}))})))}onEvent(t,r){var n,l,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[Th])||[];if(ip.SHOWN===t&&r&&i.length>0){var d;Pr.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:r,existingActivatedSurveys:i});var p=r==null||(d=r.properties)==null?void 0:d.$survey_id;if(p){var g=i.indexOf(p);g>=0&&(i.splice(g,1),this.zi(i))}}else if(this.ji.has(t)){Pr.info("survey event name matched",{event:t,eventPayload:r,surveys:this.ji.get(t)});var x=[];(l=this._instance)==null||l.getSurveys((w=>{x=w.filter((j=>{var _;return(_=this.ji.get(t))==null?void 0:_.includes(j.id)}))}));var y=x.filter((w=>{var j,_=(j=w.conditions)==null||(j=j.events)==null||(j=j.values)==null?void 0:j.find((A=>A.name===t));return!!_&&(!_.propertyFilters||Object.entries(_.propertyFilters).every((A=>{var E,[P,z]=A,B=r==null||(E=r.properties)==null?void 0:E[P];if(Mt(B)||Ys(B))return!1;var D=[String(B)],U=VE[z.operator];return U?U(z.values,D):(Pr.warn("Unknown property comparison operator: "+z.operator),!1)})))}));this.zi(i.concat(y.map((w=>w.id))||[]))}}onAction(t){var r,n=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[Th])||[];this.Di.has(t)&&this.zi(n.concat(this.Di.get(t)||[]))}zi(t){var r;Pr.info("updating activated surveys",{activatedSurveys:t}),(r=this._instance)==null||(r=r.persistence)==null||r.register({[Th]:[...new Set(t)]})}getSurveys(){var t,r=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[Th];return r||[]}getEventToSurveys(){return this.ji}Hi(){return this.Ui}}class yW{constructor(t){this.Bi=void 0,this._surveyManager=null,this.qi=!1,this.Wi=!1,this.Gi=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){if(!this._instance.config.disable_surveys){var r=t.surveys;if(Kr(r))return Pr.warn("Flags not loaded yet. Not loading surveys.");var n=$r(r);this.Bi=n?r.length>0:r,Pr.info("flags response received, isSurveysEnabled: "+this.Bi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);(n!=null&&n.startsWith(Ab)||n!=null&&n.startsWith("inProgressSurvey_"))&&t.push(n)}t.forEach((l=>localStorage.removeItem(l)))}loadIfEnabled(){if(!this._surveyManager)if(this.Wi)Pr.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Pr.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Pr.info("Not loading surveys in cookieless mode without consent.");else{var t=tr?.__PosthogExtensions__;if(t){if(!Mt(this.Bi)||this._instance.config.advanced_enable_surveys){var r=this.Bi||this._instance.config.advanced_enable_surveys;this.Wi=!0;try{var n=t.generateSurveys;if(n)return void this.Vi(n,r);var l=t.loadExternalDependency;if(!l)return void this.Ji("PostHog loadExternalDependency extension not found.");l(this._instance,"surveys",(i=>{i||!t.generateSurveys?this.Ji("Could not load surveys script",i):this.Vi(t.generateSurveys,r)}))}catch(i){throw this.Ji("Error initializing surveys",i),i}finally{this.Wi=!1}}}else Pr.error("PostHog Extensions not found.")}}Vi(t,r){this._surveyManager=t(this._instance,r),this._surveyEventReceiver=new mW(this._instance),Pr.info("Surveys loaded successfully"),this.Ki({isLoaded:!0})}Ji(t,r){Pr.error(t,r),this.Ki({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Gi.push(t),this._surveyManager&&this.Ki({isLoaded:!0}),()=>{this.Gi=this.Gi.filter((r=>r!==t))}}getSurveys(t,r){if(r===void 0&&(r=!1),this._instance.config.disable_surveys)return Pr.info("Disabled. Not loading surveys."),t([]);var n=this._instance.get_property(yb);if(n&&!r)return t(n,{isLoaded:!0});if(this.qi)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.qi=!0,this._instance.ui({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:l=>{var i;this.qi=!1;var d=l.statusCode;if(d!==200||!l.json){var p="Surveys API could not be loaded, status: "+d;return Pr.error(p),t([],{isLoaded:!1,error:p})}var g,x=l.json.surveys||[],y=x.filter((w=>(function(j){return!(!j.start_date||j.end_date)})(w)&&((function(j){var _;return!((_=j.conditions)==null||(_=_.events)==null||(_=_.values)==null||!_.length)})(w)||(function(j){var _;return!((_=j.conditions)==null||(_=_.actions)==null||(_=_.values)==null||!_.length)})(w))));return y.length>0&&((g=this._surveyEventReceiver)==null||g.register(y)),(i=this._instance.persistence)==null||i.register({[yb]:x}),t(x,{isLoaded:!0})}})}catch(l){throw this.qi=!1,l}}Ki(t){for(var r of this.Gi)try{if(!t.isLoaded)return r([],t);this.getSurveys(r)}catch(n){Pr.error("Error in survey callback",n)}}getActiveMatchingSurveys(t,r){if(r===void 0&&(r=!1),!Kr(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(t,r);Pr.warn("init was not called")}Yi(t){var r=null;return this.getSurveys((n=>{var l;r=(l=n.find((i=>i.id===t)))!==null&&l!==void 0?l:null})),r}Xi(t){if(Kr(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var r=typeof t=="string"?this.Yi(t):t;return r?this._surveyManager.checkSurveyEligibility(r):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(Kr(this._surveyManager))return Pr.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var r=this.Xi(t);return{visible:r.eligible,disabledReason:r.reason}}canRenderSurveyAsync(t,r){return Kr(this._surveyManager)?(Pr.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((n=>{this.getSurveys((l=>{var i,d=(i=l.find((g=>g.id===t)))!==null&&i!==void 0?i:null;if(d){var p=this.Xi(d);n({visible:p.eligible,disabledReason:p.reason})}else n({visible:!1,disabledReason:"Survey not found"})}),r)}))}renderSurvey(t,r){var n;if(Kr(this._surveyManager))Pr.warn("init was not called");else{var l=typeof t=="string"?this.Yi(t):t;if(l!=null&&l.id)if(pW.includes(l.type)){var i=Rt?.querySelector(r);if(i)return(n=l.appearance)!=null&&n.surveyPopupDelaySeconds?(Pr.info("Rendering survey "+l.id+" with delay of "+l.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var d,p;Pr.info("Rendering survey "+l.id+" with delay of "+((d=l.appearance)==null?void 0:d.surveyPopupDelaySeconds)+" seconds"),(p=this._surveyManager)==null||p.renderSurvey(l,i),Pr.info("Survey "+l.id+" rendered")}),1e3*l.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(l,i);Pr.warn("Survey element not found")}else Pr.warn("Surveys of type "+l.type+" cannot be rendered in the app");else Pr.warn("Survey not found")}}displaySurvey(t,r){var n;if(Kr(this._surveyManager))Pr.warn("init was not called");else{var l=this.Yi(t);if(l){var i=l;if((n=l.appearance)!=null&&n.surveyPopupDelaySeconds&&r.ignoreDelay&&(i=zt({},l,{appearance:zt({},l.appearance,{surveyPopupDelaySeconds:0})})),r.ignoreConditions===!1){var d=this.canRenderSurvey(l);if(!d.visible)return void Pr.warn("Survey is not eligible to be displayed: ",d.disabledReason)}r.displayType!==GE.Inline?this._surveyManager.handlePopoverSurvey(i):this.renderSurvey(i,r.selector)}else Pr.warn("Survey not found")}}}var bC=In("[RateLimiter]");class vW{constructor(t){var r,n;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=l=>{var i=l.text;if(i&&i.length)try{(JSON.parse(i).quota_limited||[]).forEach((d=>{bC.info((d||"events")+" is quota limited."),this.serverLimits[d]=new Date().getTime()+6e4}))}catch(d){return void bC.warn('could not rate limit - continuing. Error: "'+d?.message+'"',{text:i})}},this.instance=t,this.captureEventsPerSecond=((r=t.config.rate_limiting)==null?void 0:r.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((n=t.config.rate_limiting)==null?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var r,n,l;t===void 0&&(t=!1);var i=new Date().getTime(),d=(r=(n=this.instance.persistence)==null?void 0:n.get_property(xb))!==null&&r!==void 0?r:{tokens:this.captureEventsBurstLimit,last:i};d.tokens+=(i-d.last)/1e3*this.captureEventsPerSecond,d.last=i,d.tokens>this.captureEventsBurstLimit&&(d.tokens=this.captureEventsBurstLimit);var p=d.tokens<1;return p||t||(d.tokens=Math.max(0,d.tokens-1)),!p||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=p,(l=this.instance.persistence)==null||l.set_property(xb,d),{isRateLimited:p,remainingTokens:d.tokens}}isServerRateLimited(t){var r=this.serverLimits[t||"events"]||!1;return r!==!1&&new Date().getTime()<r}}var ma=In("[RemoteConfig]");class xW{constructor(t){this._instance=t}get remoteConfig(){var t;return(t=tr._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.config}Qi(t){var r,n;(r=tr.__PosthogExtensions__)!=null&&r.loadExternalDependency?(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,"remote-config",(()=>t(this.remoteConfig))):(ma.error("PostHog Extensions not found. Cannot load remote config."),t())}Zi(t){this._instance.ui({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:r=>{t(r.json)}})}load(){try{if(this.remoteConfig)return ma.info("Using preloaded remote config",this.remoteConfig),void this.hi(this.remoteConfig);if(this._instance.L())return void ma.warn("Remote config is disabled. Falling back to local config.");this.Qi((t=>{if(!t)return ma.info("No config found after loading remote JS config. Falling back to JSON."),void this.Zi((r=>{this.hi(r)}));this.hi(t)}))}catch(t){ma.error("Error loading remote config",t)}}hi(t){t?this._instance.config.__preview_remote_config?(this._instance.hi(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):ma.info("__preview_remote_config is disabled. Logging config instead",t):ma.error("Failed to fetch remote config from PostHog.")}}var Rb=3e3;class bW{constructor(t,r){this.te=!0,this.ie=[],this.ee=ps(r?.flush_interval_ms||Rb,250,5e3,At.createLogger("flush interval"),Rb),this.re=t}enqueue(t){this.ie.push(t),this.se||this.ne()}unload(){this.oe();var t=this.ie.length>0?this.ae():{},r=Object.values(t);[...r.filter((n=>n.url.indexOf("/e")===0)),...r.filter((n=>n.url.indexOf("/e")!==0))].map((n=>{this.re(zt({},n,{transport:"sendBeacon"}))}))}enable(){this.te=!1,this.ne()}ne(){var t=this;this.te||(this.se=setTimeout((()=>{if(this.oe(),this.ie.length>0){var r=this.ae(),n=function(){var i=r[l],d=new Date().getTime();i.data&&$r(i.data)&&Ur(i.data,(p=>{p.offset=Math.abs(p.timestamp-d),delete p.timestamp})),t.re(i)};for(var l in r)n()}}),this.ee))}oe(){clearTimeout(this.se),this.se=void 0}ae(){var t={};return Ur(this.ie,(r=>{var n,l=r,i=(l?l.batchKey:null)||l.url;Mt(t[i])&&(t[i]=zt({},l,{data:[]})),(n=t[i].data)==null||n.push(l.data)})),this.ie=[],t}}var wW=["retriesPerformedSoFar"];class _W{constructor(t){this.le=!1,this.ue=3e3,this.ie=[],this._instance=t,this.ie=[],this.he=!0,!Mt(st)&&"onLine"in st.navigator&&(this.he=st.navigator.onLine,Sn(st,"online",(()=>{this.he=!0,this.jt()})),Sn(st,"offline",(()=>{this.he=!1})))}get length(){return this.ie.length}retriableRequest(t){var{retriesPerformedSoFar:r}=t,n=qR(t,wW);ws(r)&&r>0&&(n.url=Cp(n.url,{retry_count:r})),this._instance.ui(zt({},n,{callback:l=>{l.statusCode!==200&&(l.statusCode<400||l.statusCode>=500)&&(r??0)<10?this.de(zt({retriesPerformedSoFar:r},n)):n.callback==null||n.callback(l)}}))}de(t){var r=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=r+1;var n=(function(d){var p=3e3*Math.pow(2,d),g=p/2,x=Math.min(18e5,p),y=(Math.random()-.5)*(x-g);return Math.ceil(x+y)})(r),l=Date.now()+n;this.ie.push({retryAt:l,requestOptions:t});var i="Enqueued failed request for retry in "+n;navigator.onLine||(i+=" (Browser is offline)"),At.warn(i),this.le||(this.le=!0,this.ve())}ve(){this.ce&&clearTimeout(this.ce),this.ce=setTimeout((()=>{this.he&&this.ie.length>0&&this.jt(),this.ve()}),this.ue)}jt(){var t=Date.now(),r=[],n=this.ie.filter((i=>i.retryAt<t||(r.push(i),!1)));if(this.ie=r,n.length>0)for(var{requestOptions:l}of n)this.retriableRequest(l)}unload(){for(var{requestOptions:t}of(this.ce&&(clearTimeout(this.ce),this.ce=void 0),this.ie))try{this._instance.ui(zt({},t,{transport:"sendBeacon"}))}catch(r){At.error(r)}this.ie=[]}}class SW{constructor(t){this.fe=()=>{var r,n,l,i;this.pe||(this.pe={});var d=this.scrollElement(),p=this.scrollY(),g=d?Math.max(0,d.scrollHeight-d.clientHeight):0,x=p+(d?.clientHeight||0),y=d?.scrollHeight||0;this.pe.lastScrollY=Math.ceil(p),this.pe.maxScrollY=Math.max(p,(r=this.pe.maxScrollY)!==null&&r!==void 0?r:0),this.pe.maxScrollHeight=Math.max(g,(n=this.pe.maxScrollHeight)!==null&&n!==void 0?n:0),this.pe.lastContentY=x,this.pe.maxContentY=Math.max(x,(l=this.pe.maxContentY)!==null&&l!==void 0?l:0),this.pe.maxContentHeight=Math.max(y,(i=this.pe.maxContentHeight)!==null&&i!==void 0?i:0)},this._instance=t}getContext(){return this.pe}resetContext(){var t=this.pe;return setTimeout(this.fe,0),t}startMeasuringScrollPosition(){Sn(st,"scroll",this.fe,{capture:!0}),Sn(st,"scrollend",this.fe,{capture:!0}),Sn(st,"resize",this.fe)}scrollElement(){if(!this._instance.config.scroll_root_selector)return st?.document.documentElement;var t=$r(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var r of t){var n=st?.document.querySelector(r);if(n)return n}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return st&&(st.scrollY||st.pageYOffset||st.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return st&&(st.scrollX||st.pageXOffset||st.document.documentElement.scrollLeft)||0}}var kW=e=>LE(e?.config.mask_personal_data_properties,e?.config.custom_personal_data_properties);class wC{constructor(t,r,n,l){this.ge=i=>{var d=this._e();if(!d||d.sessionId!==i){var p={sessionId:i,props:this.me(this._instance)};this.ye.register({[vb]:p})}},this._instance=t,this.be=r,this.ye=n,this.me=l||kW,this.be.onSessionId(this.ge)}_e(){return this.ye.props[vb]}getSetOnceProps(){var t,r=(t=this._e())==null?void 0:t.props;return r?"r"in r?OE(r):{$referring_domain:r.referringDomain,$pathname:r.initialPathName,utm_source:r.utm_source,utm_campaign:r.utm_campaign,utm_medium:r.utm_medium,utm_content:r.utm_content,utm_term:r.utm_term}:{}}getSessionProps(){var t={};return Ur(Qw(this.getSetOnceProps()),((r,n)=>{n==="$current_url"&&(n="url"),t["$session_entry_"+ub(n)]=r})),t}}var s1=In("[SessionId]");class _C{on(t,r){return this.we.on(t,r)}constructor(t,r,n){var l;if(this.Se=[],this.xe=void 0,this.we=new c_,this.Ee=(y,w)=>Math.abs(y-w)>this.sessionTimeoutMs,!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.A=t.config,this.ye=t.persistence,this.$e=void 0,this.ke=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Pe=r||Ro,this.Te=n||Ro;var i=this.A.persistence_name||this.A.token,d=this.A.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ps(d,60,36e3,s1.createLogger("session_idle_timeout_seconds"),1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ie(),this.Re="ph_"+i+"_window_id",this.Ce="ph_"+i+"_primary_window_exists",this.Oe()){var p=On.K(this.Re),g=On.K(this.Ce);p&&!g?this.$e=p:On.X(this.Re),On.Y(this.Ce,!0)}if((l=this.A.bootstrap)!=null&&l.sessionID)try{var x=(y=>{var w=y.replace(/-/g,"");if(w.length!==32)throw new Error("Not a valid UUID");if(w[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(w.substring(0,12),16)})(this.A.bootstrap.sessionID);this.Fe(this.A.bootstrap.sessionID,new Date().getTime(),x)}catch(y){s1.error("Invalid sessionID in bootstrap",y)}this.Me()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return Mt(this.Se)&&(this.Se=[]),this.Se.push(t),this.ke&&t(this.ke,this.$e),()=>{this.Se=this.Se.filter((r=>r!==t))}}Oe(){return this.A.persistence!=="memory"&&!this.ye.gi&&On.G()}Ae(t){t!==this.$e&&(this.$e=t,this.Oe()&&On.Y(this.Re,t))}je(){return this.$e?this.$e:this.Oe()?On.K(this.Re):null}Fe(t,r,n){t===this.ke&&r===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=r,this.ke=t,this.ye.register({[mp]:[r,t,n]}))}De(){if(this.ke&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.ke,this._sessionStartTimestamp];var t=this.ye.props[mp];return $r(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Fe(null,null,null)}destroy(){clearTimeout(this.Le),this.Le=void 0,this.xe&&st&&(st.removeEventListener("beforeunload",this.xe,{capture:!1}),this.xe=void 0),this.Se=[]}Me(){this.xe=()=>{this.Oe()&&On.X(this.Ce)},Sn(st,"beforeunload",this.xe,{capture:!1})}checkAndGetSessionAndWindowId(t,r){if(t===void 0&&(t=!1),r===void 0&&(r=null),this.A.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var n=r||new Date().getTime(),[l,i,d]=this.De(),p=this.je(),g=ws(d)&&d>0&&Math.abs(n-d)>864e5,x=!1,y=!i,w=!t&&this.Ee(n,l);y||w||g?(i=this.Pe(),p=this.Te(),s1.info("new session ID generated",{sessionId:i,windowId:p,changeReason:{noSessionId:y,activityTimeout:w,sessionPastMaximumLength:g}}),d=n,x=!0):p||(p=this.Te(),x=!0);var j=l===0||!t||g?n:l,_=d===0?new Date().getTime():d;return this.Ae(p),this.Fe(i,j,_),t||this.Ie(),x&&this.Se.forEach((A=>A(i,p,x?{noSessionId:y,activityTimeout:w,sessionPastMaximumLength:g}:void 0))),{sessionId:i,windowId:p,sessionStartTimestamp:_,changeReason:x?{noSessionId:y,activityTimeout:w,sessionPastMaximumLength:g}:void 0,lastActivityTimestamp:l}}Ie(){clearTimeout(this.Le),this.Le=setTimeout((()=>{var[t]=this.De();if(this.Ee(new Date().getTime(),t)){var r=this.ke;this.resetSessionId(),this.we.emit("forcedIdleReset",{idleSessionId:r})}}),1.1*this.sessionTimeoutMs)}}var jW=["$set_once","$set"],_o=In("[SiteApps]");class MW{constructor(t){this._instance=t,this.Ne=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Ue(t,r){if(r){var n=this.globalsForEvent(r);this.Ne.push(n),this.Ne.length>1e3&&(this.Ne=this.Ne.slice(10))}}get siteAppLoaders(){var t;return(t=tr._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.siteApps}init(){if(this.isEnabled){var t=this._instance.Ri(this.Ue.bind(this));this.ze=()=>{t(),this.Ne=[],this.ze=void 0}}}globalsForEvent(t){var r,n,l,i,d,p,g;if(!t)throw new Error("Event payload is required");var x={},y=this._instance.get_property("$groups")||[],w=this._instance.get_property("$stored_group_properties")||{};for(var[j,_]of Object.entries(w))x[j]={id:y[j],type:j,properties:_};var{$set_once:A,$set:E}=t;return{event:zt({},qR(t,jW),{properties:zt({},t.properties,E?{$set:zt({},(r=(n=t.properties)==null?void 0:n.$set)!==null&&r!==void 0?r:{},E)}:{},A?{$set_once:zt({},(l=(i=t.properties)==null?void 0:i.$set_once)!==null&&l!==void 0?l:{},A)}:{}),elements_chain:(d=(p=t.properties)==null?void 0:p.$elements_chain)!==null&&d!==void 0?d:"",distinct_id:(g=t.properties)==null?void 0:g.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:x}}setupSiteApp(t){var r=this.apps[t.id],n=()=>{var p;!r.errored&&this.Ne.length&&(_o.info("Processing "+this.Ne.length+" events for site app with id "+t.id),this.Ne.forEach((g=>r.processEvent==null?void 0:r.processEvent(g))),r.processedBuffer=!0),Object.values(this.apps).every((g=>g.processedBuffer||g.errored))&&((p=this.ze)==null||p.call(this))},l=!1,i=p=>{r.errored=!p,r.loaded=!0,_o.info("Site app with id "+t.id+" "+(p?"loaded":"errored")),l&&n()};try{var{processEvent:d}=t.init({posthog:this._instance,callback:p=>{i(p)}});d&&(r.processEvent=d),l=!0}catch(p){_o.error("Error while initializing PostHog app with config id "+t.id,p),i(!1)}if(l&&r.loaded)try{n()}catch(p){_o.error("Error while processing buffered events PostHog app with config id "+t.id,p),r.errored=!0}}He(){var t=this.siteAppLoaders||[];for(var r of t)this.apps[r.id]={id:r.id,loaded:!1,errored:!1,processedBuffer:!1};for(var n of t)this.setupSiteApp(n)}Be(t){if(Object.keys(this.apps).length!==0){var r=this.globalsForEvent(t);for(var n of Object.values(this.apps))try{n.processEvent==null||n.processEvent(r)}catch(l){_o.error("Error while processing event "+t.event+" for site app "+n.id,l)}}}onRemoteConfig(t){var r,n,l,i=this;if((r=this.siteAppLoaders)!=null&&r.length)return this.isEnabled?(this.He(),void this._instance.on("eventCaptured",(x=>this.Be(x)))):void _o.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((n=this.ze)==null||n.call(this),(l=t.siteApps)!=null&&l.length)if(this.isEnabled){var d=function(x){var y;tr["__$$ph_site_app_"+x]=i._instance,(y=tr.__PosthogExtensions__)==null||y.loadSiteApp==null||y.loadSiteApp(i._instance,g,(w=>{if(w)return _o.error("Error while initializing PostHog app with config id "+x,w)}))};for(var{id:p,url:g}of t.siteApps)d(p)}else _o.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var CW=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],SC=function(e,t){if(!e)return!1;var r=e.toLowerCase();return CW.concat(t||[]).some((n=>{var l=n.toLowerCase();return r.indexOf(l)!==-1}))},KE=function(e,t){if(!e)return!1;var r=e.userAgent;if(r&&SC(r,t))return!0;try{var n=e?.userAgentData;if(n!=null&&n.brands&&n.brands.some((l=>SC(l?.brand,t))))return!0}catch{}return!!e.webdriver},Yu=(function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e})({}),kC="i.posthog.com";class TW{constructor(t){this.qe={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get uiHost(){var t,r=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return r||(r=this.apiHost.replace("."+kC,".posthog.com")),r==="https://app.posthog.com"?"https://us.posthog.com":r}get region(){return this.qe[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.qe[this.apiHost]=Yu.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.qe[this.apiHost]=Yu.EU:this.qe[this.apiHost]=Yu.CUSTOM),this.qe[this.apiHost]}endpointFor(t,r){if(r===void 0&&(r=""),r&&(r=r[0]==="/"?r:"/"+r),t==="ui")return this.uiHost+r;if(this.region===Yu.CUSTOM)return this.apiHost+r;var n=kC+r;switch(t){case"assets":return"https://"+this.region+"-assets."+n;case"api":return"https://"+this.region+"."+n}}}var AW={icontains:(e,t)=>!!st&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!st&&t.href.toLowerCase().indexOf(e.toLowerCase())===-1,regex:(e,t)=>!!st&&ec(t.href,e),not_regex:(e,t)=>!!st&&!ec(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class qn{constructor(t){var r=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(n){n===void 0&&(n=!1),r.getWebExperiments((l=>{qn.We("retrieved web experiments from the server"),r.Ge=new Map,l.forEach((i=>{if(i.feature_flag_key){var d;r.Ge&&(qn.We("setting flag key ",i.feature_flag_key," to web experiment ",i),(d=r.Ge)==null||d.set(i.feature_flag_key,i));var p=r._instance.getFeatureFlag(i.feature_flag_key);_n(p)&&i.variants[p]&&r.Ve(i.name,p,i.variants[p].transforms)}else if(i.variants)for(var g in i.variants){var x=i.variants[g];qn.Je(x)&&r.Ve(i.name,g,x.transforms)}}))}),n)},this._instance=t,this._instance.onFeatureFlags((n=>{this.onFeatureFlags(n)}))}onFeatureFlags(t){if(this._is_bot())qn.We("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(Kr(this.Ge))return this.Ge=new Map,this.loadIfEnabled(),void this.previewWebExperiment();qn.We("applying feature flags",t),t.forEach((r=>{var n;if(this.Ge&&(n=this.Ge)!=null&&n.has(r)){var l,i=this._instance.getFeatureFlag(r),d=(l=this.Ge)==null?void 0:l.get(r);i&&d!=null&&d.variants[i]&&this.Ve(d.name,i,d.variants[i].transforms)}}))}}previewWebExperiment(){var t=qn.getWindowLocation();if(t!=null&&t.search){var r=_p(t?.search,"__experiment_id"),n=_p(t?.search,"__experiment_variant");r&&n&&(qn.We("previewing web experiments "+r+" && "+n),this.getWebExperiments((l=>{this.Ke(parseInt(r),n,l)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,r,n){if(this._instance.config.disable_web_experiments&&!n)return t([]);var l=this._instance.get_property("$web_experiments");if(l&&!r)return t(l);this._instance.ui({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:i=>{if(i.statusCode!==200||!i.json)return t([]);var d=i.json.experiments||[];return t(d)}})}Ke(t,r,n){var l=n.filter((i=>i.id===t));l&&l.length>0&&(qn.We("Previewing web experiment ["+l[0].name+"] with variant ["+r+"]"),this.Ve(l[0].name,r,l[0].variants[r].transforms))}static Je(t){return!Kr(t.conditions)&&qn.Ye(t)&&qn.Xe(t)}static Ye(t){var r;if(Kr(t.conditions)||Kr((r=t.conditions)==null?void 0:r.url))return!0;var n,l,i,d=qn.getWindowLocation();return!!d&&((n=t.conditions)==null||!n.url||AW[(l=(i=t.conditions)==null?void 0:i.urlMatchType)!==null&&l!==void 0?l:"icontains"](t.conditions.url,d))}static getWindowLocation(){return st?.location}static Xe(t){var r;if(Kr(t.conditions)||Kr((r=t.conditions)==null?void 0:r.utm))return!0;var n=BE();if(n.utm_source){var l,i,d,p,g,x,y,w,j=(l=t.conditions)==null||(l=l.utm)==null||!l.utm_campaign||((i=t.conditions)==null||(i=i.utm)==null?void 0:i.utm_campaign)==n.utm_campaign,_=(d=t.conditions)==null||(d=d.utm)==null||!d.utm_source||((p=t.conditions)==null||(p=p.utm)==null?void 0:p.utm_source)==n.utm_source,A=(g=t.conditions)==null||(g=g.utm)==null||!g.utm_medium||((x=t.conditions)==null||(x=x.utm)==null?void 0:x.utm_medium)==n.utm_medium,E=(y=t.conditions)==null||(y=y.utm)==null||!y.utm_term||((w=t.conditions)==null||(w=w.utm)==null?void 0:w.utm_term)==n.utm_term;return j&&A&&E&&_}return!1}static We(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),l=1;l<r;l++)n[l-1]=arguments[l];At.info("[WebExperiments] "+t,n)}Ve(t,r,n){this._is_bot()?qn.We("Refusing to render web experiment since the viewer is a likely bot"):r!=="control"?n.forEach((l=>{if(l.selector){var i;qn.We("applying transform of variant "+r+" for experiment "+t+" ",l);var d=(i=document)==null?void 0:i.querySelectorAll(l.selector);d?.forEach((p=>{var g=p;l.html&&(g.innerHTML=l.html),l.css&&g.setAttribute("style",l.css)}))}})):qn.We("Control variants leave the page unmodified.")}_is_bot(){return Si&&this._instance?KE(Si,this._instance.config.custom_blocked_useragents):void 0}}var RW=In("[PostHog ExternalIntegrations]"),EW={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class IW{constructor(t){this._instance=t}nt(t,r){var n;(n=tr.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,t,(l=>{if(l)return RW.error("failed to load script",l);r()}))}startIfEnabledOrStop(){var t=this,r=function(d){var p,g,x;!l||(p=tr.__PosthogExtensions__)!=null&&(p=p.integrations)!=null&&p[d]||t.nt(EW[d],(()=>{var y;(y=tr.__PosthogExtensions__)==null||(y=y.integrations)==null||(y=y[d])==null||y.start(t._instance)})),!l&&(g=tr.__PosthogExtensions__)!=null&&(g=g.integrations)!=null&&g[d]&&((x=tr.__PosthogExtensions__)==null||(x=x.integrations)==null||(x=x[d])==null||x.stop())};for(var[n,l]of Object.entries((i=this._instance.config.integrations)!==null&&i!==void 0?i:{})){var i;r(n)}}}var Eb="[SessionRecording]",Bu=In(Eb);class jC{get started(){var t;return!((t=this.Qe)==null||!t.isStarted)}get status(){return this.Qe?this.Qe.status:this.Ze&&!this.tr?"disabled":"lazy_loading"}constructor(t){if(this._forceAllowLocalhostNetworkCapture=!1,this.Ze=!1,this.ir=void 0,this._instance=t,!this._instance.sessionManager)throw Bu.error("started without valid sessionManager"),new Error(Eb+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(Eb+' cannot be used with cookieless_mode="always"')}get tr(){var t,r=!((t=this._instance.get_property(Gx))==null||!t.enabled),n=!this._instance.config.disable_session_recording,l=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return st&&r&&n&&!l}startIfEnabledOrStop(t){var r;if(!this.tr||(r=this.Qe)==null||!r.isStarted){var n=!Mt(Object.assign)&&!Mt(Array.from);this.tr&&n?(this.er(t),Bu.info("starting")):this.stopRecording()}}er(t){var r,n,l;this.tr&&(tr!=null&&(r=tr.__PosthogExtensions__)!=null&&(r=r.rrweb)!=null&&r.record&&(n=tr.__PosthogExtensions__)!=null&&n.initSessionRecording?this.rr(t):(l=tr.__PosthogExtensions__)==null||l.loadExternalDependency==null||l.loadExternalDependency(this._instance,this.sr,(i=>{if(i)return Bu.error("could not load recorder",i);this.rr(t)})))}stopRecording(){var t,r;(t=this.ir)==null||t.call(this),this.ir=void 0,(r=this.Qe)==null||r.stop()}nr(){var t;(t=this._instance.persistence)==null||t.unregister(QR)}ar(t){if(this._instance.persistence){var r,n,l=this._instance.persistence,i=()=>{var d=t.sessionRecording===!1?void 0:t.sessionRecording,p=d?.sampleRate,g=Kr(p)?null:parseFloat(p);Kr(g)&&this.nr();var x=d?.minimumDurationMilliseconds;l.register({[Gx]:zt({enabled:!!d},d,{networkPayloadCapture:zt({capturePerformance:t.capturePerformance},d?.networkPayloadCapture),canvasRecording:{enabled:d?.recordCanvas,fps:d?.canvasFps,quality:d?.canvasQuality},sampleRate:g,minimumDurationMilliseconds:Mt(x)?null:x,endpoint:d?.endpoint,triggerMatchType:d?.triggerMatchType,masking:d?.masking,urlTriggers:d?.urlTriggers})})};i(),(r=this.ir)==null||r.call(this),this.ir=(n=this._instance.sessionManager)==null?void 0:n.onSessionId(i)}}onRemoteConfig(t){"sessionRecording"in t?t.sessionRecording!==!1?(this.ar(t),this.Ze=!0,this.startIfEnabledOrStop()):this.Ze=!0:Bu.info("skipping remote config with no sessionRecording",t)}log(t,r){var n;r===void 0&&(r="log"),(n=this.Qe)!=null&&n.log?this.Qe.log(t,r):Bu.warn("log called before recorder was ready")}get sr(){var t,r,n=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.get_property(Gx);return(n==null||(r=n.scriptConfig)==null?void 0:r.script)||"lazy-recorder"}rr(t){var r,n;if((r=tr.__PosthogExtensions__)==null||!r.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Qe||(this.Qe=(n=tr.__PosthogExtensions__)==null?void 0:n.initSessionRecording(this._instance),this.Qe._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Qe.start(t)}onRRwebEmit(t){var r;(r=this.Qe)==null||r.onRRwebEmit==null||r.onRRwebEmit(t)}overrideLinkedFlag(){var t;(t=this.Qe)==null||t.overrideLinkedFlag()}overrideSampling(){var t;(t=this.Qe)==null||t.overrideSampling()}overrideTrigger(t){var r;(r=this.Qe)==null||r.overrideTrigger(t)}get sdkDebugProperties(){var t;return((t=this.Qe)==null?void 0:t.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(t,r){var n;return!((n=this.Qe)==null||!n.tryAddCustomEvent(t,r))}}var od={},Ib=()=>{},Ml="posthog",YE=!aW&&si?.indexOf("MSIE")===-1&&si?.indexOf("Mozilla")===-1,MC=e=>{var t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:nH(Rt?.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Ib,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:e!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:e??"unset",debug:oi&&_n(oi?.search)&&oi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(st==null||(t=st.location)==null?void 0:t.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:r=>{var n="Bad HTTP status: "+r.statusCode+" "+r.text;At.error(n)},get_device_id:r=>r,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Rb},error_tracking:{},_onCapture:Ib,__preview_eager_load_replay:!1}},CC=e=>{var t={};Mt(e.process_person)||(t.person_profiles=e.process_person),Mt(e.xhr_headers)||(t.request_headers=e.xhr_headers),Mt(e.cookie_name)||(t.persistence_name=e.cookie_name),Mt(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),Mt(e.store_google)||(t.save_campaign_params=e.store_google),Mt(e.verbose)||(t.debug=e.verbose);var r=hn({},t,e);return $r(e.property_blacklist)&&(Mt(e.property_denylist)?r.property_denylist=e.property_blacklist:$r(e.property_denylist)?r.property_denylist=[...e.property_blacklist,...e.property_denylist]:At.error("Invalid value for property_denylist config: "+e.property_denylist)),r};class zW{constructor(){this.__forceAllowLocalhost=!1}get lr(){return this.__forceAllowLocalhost}set lr(t){At.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class Jp{get decideEndpointWasHit(){var t,r;return(t=(r=this.featureFlags)==null?void 0:r.hasLoadedFlags)!==null&&t!==void 0&&t}get flagsEndpointWasHit(){var t,r;return(t=(r=this.featureFlags)==null?void 0:r.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new zW,this.ur=!1,this.version=Ao.LIB_VERSION,this.hr=new c_,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=MC(),this.SentryIntegration=RH,this.sentryIntegration=t=>(function(r,n){var l=yE(r,n);return{name:mE,processEvent:i=>l(i)}})(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.dr=!1,this.vr=null,this.cr=null,this.pr=null,this.featureFlags=new dW(this),this.toolbar=new IH(this),this.scrollManager=new SW(this),this.pageViewManager=new XH(this),this.surveys=new yW(this),this.experiments=new qn(this),this.exceptions=new lW(this),this.rateLimiter=new vW(this),this.requestRouter=new TW(this),this.consent=new kH(this),this.externalIntegrations=new IW(this),this.people={set:(t,r,n)=>{var l=_n(t)?{[t]:r}:t;this.setPersonProperties(l),n?.({})},set_once:(t,r,n)=>{var l=_n(t)?{[t]:r}:t;this.setPersonProperties(void 0,l),n?.({})}},this.on("eventCaptured",(t=>At.info('send "'+t?.event+'"',t)))}init(t,r,n){if(n&&n!==Ml){var l,i=(l=od[n])!==null&&l!==void 0?l:new Jp;return i._init(t,r,n),od[n]=i,od[Ml][n]=i,i}return this._init(t,r,n)}_init(t,r,n){var l,i;if(r===void 0&&(r={}),Mt(t)||db(t))return At.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return At.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.gr=r,this._r=[],r.person_profiles&&(this.cr=r.person_profiles),this.set_config(hn({},MC(r.defaults),CC(r),{name:n,token:t})),this.config.on_xhr_error&&At.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=r.disable_compression?void 0:qs.GZipJS;var d=this.mr();this.persistence=new n1(this.config,d),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new n1(zt({},this.config,{persistence:"sessionStorage"}),d);var p=zt({},this.persistence.props),g=zt({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.yr=new bW((D=>this.br(D)),this.config.request_queue_config),this.wr=new _W(this),this.__request_queue=[];var x=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(x||(this.sessionManager=new _C(this),this.sessionPropsManager=new wC(this,this.sessionManager,this.persistence)),new BH(this).startIfEnabledOrStop(),this.siteApps=new MW(this),(l=this.siteApps)==null||l.init(),x||(this.sessionRecording=new jC(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new mH(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new ZH(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new YH(this),this.exceptionObserver=new CH(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new gE(this,MH),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new TH(this),this.historyAutocapture.startIfEnabled(),Ao.DEBUG=Ao.DEBUG||this.config.debug,Ao.DEBUG&&At.info("Starting in debug mode",{this:this,config:r,thisC:zt({},this.config),p,s:g}),((i=r.bootstrap)==null?void 0:i.distinctID)!==void 0){var y,w,j=this.config.get_device_id(Ro()),_=(y=r.bootstrap)!=null&&y.isIdentifiedID?j:r.bootstrap.distinctID;this.persistence.set_property(Us,(w=r.bootstrap)!=null&&w.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:r.bootstrap.distinctID,$device_id:_})}if(this.Sr()){var A,E,P=Object.keys(((A=r.bootstrap)==null?void 0:A.featureFlags)||{}).filter((D=>{var U;return!((U=r.bootstrap)==null||(U=U.featureFlags)==null||!U[D])})).reduce(((D,U)=>{var G;return D[U]=((G=r.bootstrap)==null||(G=G.featureFlags)==null?void 0:G[U])||!1,D}),{}),z=Object.keys(((E=r.bootstrap)==null?void 0:E.featureFlagPayloads)||{}).filter((D=>P[D])).reduce(((D,U)=>{var G,$;return(G=r.bootstrap)!=null&&(G=G.featureFlagPayloads)!=null&&G[U]&&(D[U]=($=r.bootstrap)==null||($=$.featureFlagPayloads)==null?void 0:$[U]),D}),{});this.featureFlags.receivedFeatureFlags({featureFlags:P,featureFlagPayloads:z})}if(x)this.register_once({distinct_id:Tu,$device_id:null},"");else if(!this.get_distinct_id()){var B=this.config.get_device_id(Ro());this.register_once({distinct_id:B,$device_id:B},""),this.persistence.set_property(Us,"anonymous")}return Sn(st,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),r.segment?AH(this,(()=>this.Er())):this.Er(),Eo(this.config._onCapture)&&this.config._onCapture!==Ib&&(At.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(D=>this.config._onCapture(D.event,D)))),this.config.ip&&At.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}hi(t){var r,n,l,i,d,p,g,x;if(!Rt||!Rt.body)return At.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.hi(t)}),500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=xr(t.supportedCompression,qs.GZipJS)?qs.GZipJS:xr(t.supportedCompression,qs.Base64)?qs.Base64:void 0),(r=t.analytics)!=null&&r.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.cr?this.cr:"identified_only"}),(n=this.siteApps)==null||n.onRemoteConfig(t),(l=this.sessionRecording)==null||l.onRemoteConfig(t),(i=this.autocapture)==null||i.onRemoteConfig(t),(d=this.heatmaps)==null||d.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(p=this.webVitalsAutocapture)==null||p.onRemoteConfig(t),(g=this.exceptionObserver)==null||g.onRemoteConfig(t),this.exceptions.onRemoteConfig(t),(x=this.deadClicksAutocapture)==null||x.onRemoteConfig(t)}Er(){try{this.config.loaded(this)}catch(t){At.critical("`loaded` function failed",t)}this.$r(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.kr()}),1),new xW(this).load(),this.featureFlags.flags()}$r(){var t;this.is_capturing()&&this.config.request_batching&&((t=this.yr)==null||t.enable())}_dom_loaded(){this.is_capturing()&&Io(this.__request_queue,(t=>this.br(t))),this.__request_queue=[],this.$r()}_handle_unload(){var t,r;this.config.request_batching?(this.Pr()&&this.capture("$pageleave"),(t=this.yr)==null||t.unload(),(r=this.wr)==null||r.unload()):this.Pr()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ui(t){this.__loaded&&(YE?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=Cp(t.url,{ip:this.config.ip?1:0}),t.headers=zt({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(t.disableTransport=["sendBeacon"]),t.fetchOptions=t.fetchOptions||this.config.fetch_options,(r=>{var n,l,i,d=zt({},r);d.timeout=d.timeout||6e4,d.url=Cp(d.url,{_:new Date().getTime().toString(),ver:Ao.LIB_VERSION,compression:d.compression});var p=(n=d.transport)!==null&&n!==void 0?n:"fetch",g=np.filter((y=>!d.disableTransport||!y.transport||!d.disableTransport.includes(y.transport))),x=(l=(i=JR(g,(y=>y.transport===p)))==null?void 0:i.method)!==null&&l!==void 0?l:g[0].method;if(!x)throw new Error("No available transport method");x(d)})(zt({},t,{callback:r=>{var n,l;this.rateLimiter.checkForLimiting(r),r.statusCode>=400&&((n=(l=this.config).on_request_error)==null||n.call(l,r)),t.callback==null||t.callback(r)}}))))}br(t){this.wr?this.wr.retriableRequest(t):this.ui(t)}_execute_array(t){var r,n=[],l=[],i=[];Io(t,(p=>{p&&(r=p[0],$r(r)?i.push(p):Eo(p)?p.call(this):$r(p)&&r==="alias"?n.push(p):$r(p)&&r.indexOf("capture")!==-1&&Eo(this[r])?i.push(p):l.push(p))}));var d=function(p,g){Io(p,(function(x){if($r(x[0])){var y=g;Ur(x,(function(w){y=y[w[0]].apply(y,w.slice(1))}))}else this[x[0]].apply(this,x.slice(1))}),g)};d(n,this),d(l,this),d(i,this)}Sr(){var t,r;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((r=this.config.bootstrap)==null?void 0:r.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,r,n){var l;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.yr){if(this.is_capturing())if(!Mt(t)&&_n(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var i=n!=null&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(i==null||!i.isRateLimited){r!=null&&r.$current_url&&!_n(r?.$current_url)&&(At.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),r==null||delete r.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var d=new Date,p=n?.timestamp||d,g=Ro(),x={uuid:g,event:t,properties:this.calculateEventProperties(t,r||{},p,g)};i&&(x.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),n?.$set&&(x.$set=n?.$set);var y,w=this.Tr(n?.$set_once);if(w&&(x.$set_once=w),(x=tH(x,n!=null&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=p,Mt(n?.timestamp)||(x.properties.$event_time_override_provided=!0,x.properties.$event_time_override_system_time=d),t===ip.DISMISSED||t===ip.SENT){var j=r?.[vC.SURVEY_ID],_=r?.[vC.SURVEY_ITERATION];y={id:j,current_iteration:_},localStorage.getItem(xC(y))||localStorage.setItem(xC(y),"true"),x.$set=zt({},x.$set,{[hW({id:j,current_iteration:_},t===ip.SENT?"responded":"dismissed")]:!0})}var A=zt({},x.properties.$set,x.$set);if(Ol(A)||this.setPersonPropertiesForFlags(A),!Kr(this.config.before_send)){var E=this.Ir(x);if(!E)return;x=E}this.hr.emit("eventCaptured",x);var P={method:"POST",url:(l=n?._url)!==null&&l!==void 0?l:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:x,compression:"best-available",batchKey:n?._batchKey};return!this.config.request_batching||n&&(n==null||!n._batchKey)||n!=null&&n.send_instantly?this.br(P):this.yr.enqueue(P),x}At.critical("This capture call is ignored due to client rate limiting.")}}else At.error("No event name provided to posthog.capture")}else At.uninitializedWarning("posthog.capture")}Ri(t){return this.on("eventCaptured",(r=>t(r.event,r)))}calculateEventProperties(t,r,n,l,i){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return r;var d=i?void 0:this.persistence.remove_event_timer(t),p=zt({},r);if(p.token=this.config.token,p.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(p.$cookieless_mode=!0),t==="$snapshot"){var g=zt({},this.persistence.properties(),this.sessionPersistence.properties());return p.distinct_id=g.distinct_id,(!_n(p.distinct_id)&&!ws(p.distinct_id)||db(p.distinct_id))&&At.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),p}var x,y=KH(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:w,windowId:j}=this.sessionManager.checkAndGetSessionAndWindowId(i,n.getTime());p.$session_id=w,p.$window_id=j}this.sessionPropsManager&&hn(p,this.sessionPropsManager.getSessionProps());try{var _;this.sessionRecording&&hn(p,this.sessionRecording.sdkDebugProperties),p.$sdk_debug_retry_queue_size=(_=this.wr)==null?void 0:_.length}catch(z){p.$sdk_debug_error_capturing_properties=String(z)}if(this.requestRouter.region===Yu.CUSTOM&&(p.$lib_custom_api_host=this.config.api_host),x=t!=="$pageview"||i?t!=="$pageleave"||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(n):this.pageViewManager.doPageView(n,l),p=hn(p,x),t==="$pageview"&&Rt&&(p.title=Rt.title),!Mt(d)){var A=n.getTime()-d;p.$duration=parseFloat((A/1e3).toFixed(3))}si&&this.config.opt_out_useragent_filter&&(p.$browser_type=this._is_bot()?"bot":"browser"),(p=hn({},y,this.persistence.properties(),this.sessionPersistence.properties(),p)).$is_identified=this._isIdentified(),$r(this.config.property_denylist)?Ur(this.config.property_denylist,(function(z){delete p[z]})):At.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var E=this.config.sanitize_properties;E&&(At.error("sanitize_properties is deprecated. Use before_send instead"),p=E(p,t));var P=this.Rr();return p.$process_person_profile=P,P&&!i&&this.Cr("_calculate_event_properties"),p}Tr(t){var r;if(!this.persistence||!this.Rr()||this.ur)return t;var n=this.persistence.get_initial_props(),l=(r=this.sessionPropsManager)==null?void 0:r.getSetOnceProps(),i=hn({},n,l||{},t||{}),d=this.config.sanitize_properties;return d&&(At.error("sanitize_properties is deprecated. Use before_send instead"),i=d(i,"$set_once")),this.ur=!0,Ol(i)?void 0:i}register(t,r){var n;(n=this.persistence)==null||n.register(t,r)}register_once(t,r,n){var l;(l=this.persistence)==null||l.register_once(t,r,n)}register_for_session(t){var r;(r=this.sessionPersistence)==null||r.register(t)}unregister(t){var r;(r=this.persistence)==null||r.unregister(t)}unregister_for_session(t){var r;(r=this.sessionPersistence)==null||r.unregister(t)}Or(t,r){this.register({[t]:r})}getFeatureFlag(t,r){return this.featureFlags.getFeatureFlag(t,r)}getFeatureFlagPayload(t){var r=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(r)}catch{return r}}isFeatureEnabled(t,r){return this.featureFlags.isFeatureEnabled(t,r)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,r,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,r,n)}getEarlyAccessFeatures(t,r,n){return r===void 0&&(r=!1),this.featureFlags.getEarlyAccessFeatures(t,r,n)}on(t,r){return this.hr.on(t,r)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var r,n;return(r=(n=this.sessionManager)==null?void 0:n.onSessionId(t))!==null&&r!==void 0?r:()=>{}}getSurveys(t,r){r===void 0&&(r=!1),this.surveys.getSurveys(t,r)}getActiveMatchingSurveys(t,r){r===void 0&&(r=!1),this.surveys.getActiveMatchingSurveys(t,r)}renderSurvey(t,r){this.surveys.renderSurvey(t,r)}displaySurvey(t,r){r===void 0&&(r=gW),this.surveys.displaySurvey(t,r)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,r){return r===void 0&&(r=!1),this.surveys.canRenderSurveyAsync(t,r)}identify(t,r,n){if(!this.__loaded||!this.persistence)return At.uninitializedWarning("posthog.identify");if(ws(t)&&(t=t.toString(),At.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t)if(["distinct_id","distinctid"].includes(t.toLowerCase()))At.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(t!==Tu){if(this.Cr("posthog.identify")){var l=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var i=l;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}t!==l&&t!==this.get_property(qu)&&(this.unregister(qu),this.register({distinct_id:t}));var d=(this.persistence.get_property(Us)||"anonymous")==="anonymous";t!==l&&d?(this.persistence.set_property(Us,"identified"),this.setPersonPropertiesForFlags(zt({},n||{},r||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:l},{$set:r||{},$set_once:n||{}}),this.pr=hC(t,r,n),this.featureFlags.setAnonymousDistinctId(l)):(r||n)&&this.setPersonProperties(r,n),t!==l&&(this.reloadFeatureFlags(),this.unregister(yp))}}else At.critical('The string "'+Tu+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else At.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,r){if((t||r)&&this.Cr("posthog.setPersonProperties")){var n=hC(this.get_distinct_id(),t,r);this.pr!==n?(this.setPersonPropertiesForFlags(zt({},r||{},t||{})),this.capture("$set",{$set:t||{},$set_once:r||{}}),this.pr=n):At.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,r,n){if(t&&r){if(this.Cr("posthog.group")){var l=this.getGroups();l[t]!==r&&this.resetGroupPropertiesForFlags(t),this.register({$groups:zt({},l,{[t]:r})}),n&&(this.capture("$groupidentify",{$group_type:t,$group_key:r,$group_set:n}),this.setGroupPropertiesForFlags({[t]:n})),l[t]===r||n||this.reloadFeatureFlags()}}else At.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,r){r===void 0&&(r=!0),this.featureFlags.setPersonPropertiesForFlags(t,r)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,r){r===void 0&&(r=!0),this.Cr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,r)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var r,n,l,i;if(At.info("reset"),!this.__loaded)return At.uninitializedWarning("posthog.reset");var d=this.get_property("$device_id");if(this.consent.reset(),(r=this.persistence)==null||r.clear(),(n=this.sessionPersistence)==null||n.clear(),this.surveys.reset(),this.featureFlags.reset(),(l=this.persistence)==null||l.set_property(Us,"anonymous"),(i=this.sessionManager)==null||i.resetSessionId(),this.pr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Tu,$device_id:null},"");else{var p=this.config.get_device_id(Ro());this.register_once({distinct_id:p,$device_id:t?p:d},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,r;return(t=(r=this.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:r,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),l=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+r);if(t!=null&&t.withTimestamp&&n){var i,d=(i=t.timestampLookBack)!==null&&i!==void 0?i:10;if(!n)return l;l+="?t="+Math.max(Math.floor((new Date().getTime()-n)/1e3)-d,0)}return l}alias(t,r){return t===this.get_property(ZR)?(At.critical("Attempting to create alias for existing People user - aborting."),-2):this.Cr("posthog.alias")?(Mt(r)&&(r=this.get_distinct_id()),t!==r?(this.Or(qu,t),this.capture("$create_alias",{alias:t,distinct_id:r})):(At.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var r=zt({},this.config);if(Hn(t)){var n,l,i,d,p;hn(this.config,CC(t));var g=this.mr();(n=this.persistence)==null||n.update_config(this.config,r,g),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new n1(zt({},this.config,{persistence:"sessionStorage"}),g),wn.G()&&wn.J("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Ao.DEBUG=!0,At.info("set_config",{config:t,oldConfig:r,newConfig:zt({},this.config)})),(l=this.sessionRecording)==null||l.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(d=this.heatmaps)==null||d.startIfEnabled(),this.surveys.loadIfEnabled(),this.Fr(),(p=this.externalIntegrations)==null||p.startIfEnabledOrStop()}}startSessionRecording(t){var r=t===!0,n={sampling:r||!(t==null||!t.sampling),linked_flag:r||!(t==null||!t.linked_flag),url_trigger:r||!(t==null||!t.url_trigger),event_trigger:r||!(t==null||!t.event_trigger)};if(Object.values(n).some(Boolean)){var l,i,d,p,g;(l=this.sessionManager)==null||l.checkAndGetSessionAndWindowId(),n.sampling&&((i=this.sessionRecording)==null||i.overrideSampling()),n.linked_flag&&((d=this.sessionRecording)==null||d.overrideLinkedFlag()),n.url_trigger&&((p=this.sessionRecording)==null||p.overrideTrigger("url")),n.event_trigger&&((g=this.sessionRecording)==null||g.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,r){var n=new Error("PostHog syntheticException"),l=this.exceptions.buildProperties(t,{handled:!0,syntheticException:n});return this.exceptions.sendExceptionEvent(zt({},l,r))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var r;return(r=this.persistence)==null?void 0:r.props[t]}getSessionProperty(t){var r;return(r=this.sessionPersistence)==null?void 0:r.props[t]}toString(){var t,r=(t=this.config.name)!==null&&t!==void 0?t:Ml;return r!==Ml&&(r=Ml+"."+r),r}_isIdentified(){var t,r;return((t=this.persistence)==null?void 0:t.get_property(Us))==="identified"||((r=this.sessionPersistence)==null?void 0:r.get_property(Us))==="identified"}Rr(){var t,r;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Ol(this.getGroups())&&((t=this.persistence)==null||(t=t.props)==null||!t[qu])&&((r=this.persistence)==null||(r=r.props)==null||!r[xp]))}Pr(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Rr()||this.Cr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Cr(t){return this.config.person_profiles==="never"?(At.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Or(xp,!0),!0)}mr(){if(this.config.cookieless_mode==="always")return!0;var t=this.consent.isOptedOut(),r=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||t&&!!r}Fr(){var t,r,n,l,i=this.mr();return((t=this.persistence)==null?void 0:t.gi)!==i&&((n=this.persistence)==null||n.set_disabled(i)),((r=this.sessionPersistence)==null?void 0:r.gi)!==i&&((l=this.sessionPersistence)==null||l.set_disabled(i)),i}opt_in_capturing(t){if(this.config.cookieless_mode!=="always"){var r,n;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(r=this.sessionManager)==null||r.destroy(),this.sessionManager=new _C(this),this.persistence&&(this.sessionPropsManager=new wC(this,this.sessionManager,this.persistence)),this.sessionRecording=new jC(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Fr(),this.$r(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(Mt(t?.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t?.captureEventName)!==null&&n!==void 0?n:"$opt_in",t?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.kr()}else At.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var t,r;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Fr(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Tu,$device_id:null}),(t=this.sessionManager)==null||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(r=this.sessionRecording)==null||r.stopRecording(),this.sessionRecording=void 0,this.kr())):At.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var t=this.consent.consent;return t===$s.GRANTED?"granted":t===$s.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Fr()}_is_bot(){return Si?KE(Si,this.config.custom_blocked_useragents):void 0}kr(){Rt&&(Rt.visibilityState==="visible"?this.dr||(this.dr=!0,this.capture("$pageview",{title:Rt.title},{send_instantly:!0}),this.vr&&(Rt.removeEventListener("visibilitychange",this.vr),this.vr=null)):this.vr||(this.vr=this.kr.bind(this),Sn(Rt,"visibilitychange",this.vr)))}debug(t){t===!1?(st?.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(st?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}L(){var t,r,n,l,i,d,p,g=this.gr||{};return"advanced_disable_flags"in g?!!g.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(At.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(n="advanced_disable_decide",l=!1,i=At,d=(r="advanced_disable_flags")in(t=g)&&!Mt(t[r]),p=n in t&&!Mt(t[n]),d?t[r]:p?(i&&i.warn("Config field '"+n+"' is deprecated. Please use '"+r+"' instead. The old field will be removed in a future major version."),t[n]):l)}Ir(t){if(Kr(this.config.before_send))return t;var r=$r(this.config.before_send)?this.config.before_send:[this.config.before_send],n=t;for(var l of r){if(n=l(n),Kr(n)){var i="Event '"+t.event+"' was rejected in beforeSend function";return Tq(t.event)?At.warn(i+". This can cause unexpected behavior."):At.info(i),null}n.properties&&!Ol(n.properties)||At.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return n}getPageViewId(){var t;return(t=this.pageViewManager.Wt)==null?void 0:t.pageViewId}captureTraceFeedback(t,r){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:r})}captureTraceMetric(t,r,n){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:r,$ai_metric_value:String(n)})}}(function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=eH(e.prototype[t[r]])})(Jp,["identify"]);var TC,_l=(TC=od[Ml]=new Jp,(function(){function e(){e.done||(e.done=!0,YE=!1,Ur(od,(function(t){t._dom_loaded()})))}Rt!=null&&Rt.addEventListener?Rt.readyState==="complete"?e():Sn(Rt,"DOMContentLoaded",e,{capture:!1}):st&&At.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),TC),BW={};const JE="production",PW=JE==="test",NW="https://democratized-service-gateway-production.up.railway.app",DW=Number(BW.LOCAL_BACKEND_PORT||58273),LW=`http://localhost:${DW}`,o1={analytics:{posthog:{apiKey:"phc_Lmpw09moMXPCinm0qGGBWIMPWsrsxp9nY9isjd348Z0",apiHost:"https://us.i.posthog.com",enabled:!0,options:{person_profiles:"identified_only",capture_pageview:!1,capture_pageleave:!1,autocapture:!0,session_recording:{recordCrossOriginIframes:!1}}}},api:{backend:{url:LW},serviceGateway:{url:NW}},app:{name:"JobHuntr",version:"0.0.3",isDevelopment:PW,environment:JE},features:{enableCoachMode:!0,enableJobTracker:!0,enableATSTemplates:!0,enableCoverLetterGenerator:!0,enableLinkedInBot:!0}};class OW{constructor(){this.initialized=!1,this.authToken=null,this.livePingIntervalId=null}initialize(){if(!this.initialized)try{_l.init(o1.analytics.posthog.apiKey,{api_host:o1.analytics.posthog.apiHost,...o1.analytics.posthog.options}),this.initialized=!0,this.silencePostHogConsoleLogs()}catch(t){console.error("Failed to initialize PostHog:",t)}}silencePostHogConsoleLogs(){const t=console.log;console.log=(...r)=>{const n=r[0];typeof n=="string"&&n.includes("[PostHog.js]")||t.apply(console,r)}}identify(t,r){this.initialized&&_l.identify(t,r)}trackEvent(t,r){this.initialized&&_l.capture(t,r)}trackPageView(t,r){this.trackEvent("$pageview",{$current_url:t,...r})}setUserProperties(t){this.initialized&&_l.people.set(t)}reset(){this.initialized&&(_l.reset(),this.authToken=null,this.stopLivePing())}shutdown(){this.initialized&&(_l.reset(),this.initialized=!1,this.authToken=null,this.stopLivePing())}setAuthToken(t){this.authToken=t}clearAuthToken(){this.authToken=null}getAuthTokenOrThrow(){if(this.authToken)return this.authToken;const r=mr.getStoredAuth()?.token;if(!r)throw new Error("No authentication token available. Please log in again.");return this.authToken=r,r}async trackMixpanelEvent(t,r={}){const n=this.getAuthTokenOrThrow();try{const l=`${Rn}/api/analytics/mixpanel`,i=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({event_name:t,properties:r})});if(!i.ok){const d=await i.text();throw new Error(`Failed to track Mixpanel event: ${i.statusText} - ${d}`)}}catch(l){throw console.error("Error tracking Mixpanel event:",l),l}}startLivePing(){if(this.livePingIntervalId)return;const t=async()=>{try{await this.trackMixpanelEvent("ping",{})}catch{}};t(),this.livePingIntervalId=setInterval(t,3600*1e3)}stopLivePing(){this.livePingIntervalId&&(clearInterval(this.livePingIntervalId),this.livePingIntervalId=null)}async trackSubscriptionModalOpened(t){const r=this.getAuthTokenOrThrow();try{const n=`${Rn}/api/analytics/subscription-modal-opened`,l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({trigger:t})});if(!l.ok){const i=await l.text();throw new Error(`Failed to track subscription modal opened: ${l.statusText} - ${i}`)}}catch(n){console.error("Error tracking subscription modal opened:",n)}}async sendSlackNotification(t,r,n={}){const l=this.getAuthTokenOrThrow();try{const i=`${Rn}/api/analytics/slack`,d=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({channel:t,text:r,...n.blocks?{blocks:n.blocks}:{}})});if(!d.ok){const p=await d.text();throw new Error(`Failed to send Slack notification: ${d.statusText} - ${p}`)}}catch(i){throw console.error("Error sending Slack notification:",i),i}}}const Tn=new OW,Na=({isOpen:e,onClose:t,errorDetails:r,trigger:n})=>{const[l,i]=F.useState(null),[d,p]=F.useState(!1),[g,x]=F.useState({days:0,hours:0,minutes:0,seconds:0}),[y,w]=F.useState(null),j=()=>{const Y=new Date,T=Y.getDate(),o=T%2===0?T+1:T+2,c=new Date(Y.getFullYear(),Y.getMonth(),o);return c.setHours(23,59,59,999),c},_=()=>{const Y=j(),T=new Date,o=Y.getTime()-T.getTime();return o>0?{days:Math.floor(o/(1e3*60*60*24)),hours:Math.floor(o/(1e3*60*60)%24),minutes:Math.floor(o/1e3/60%60),seconds:Math.floor(o/1e3%60)}:{days:0,hours:0,minutes:0,seconds:0}};F.useEffect(()=>{if(e){A(),Tn.trackSubscriptionModalOpened(n),x(_());const Y=setInterval(()=>{x(_())},1e3);return()=>clearInterval(Y)}},[e,n]);const A=async()=>{try{p(!0),sn.clearCache();const Y=await sn.getSubscriptionStatus();i(Y);const T=await sn.getUsage();w({limit:T.ai_resume_limit,used:T.ai_resume_used,remaining:T.ai_resume_remaining})}catch(Y){console.error("Failed to load subscription status:",Y)}finally{p(!1)}},E=async Y=>{try{if(p(!0),z==="pro"||z==="unlimited"){const T=await sn.upgradeSubscription(Y);T.success?(await A(),alert(T.message||"Subscription upgraded successfully!")):alert(T.message||"Failed to upgrade subscription."),p(!1)}else{const T=await sn.createCheckoutSession(Y);window.electronAPI?.openExternalUrl?(await window.electronAPI.openExternalUrl(T),p(!1),t()):window.location.href=T}}catch(T){console.error("Failed to upgrade/checkout:",T),alert("Failed to process request. Please try again."),p(!1)}},P=async()=>{try{const Y=window.open("about:blank","_blank"),T=await sn.getCustomerPortalUrl();Y?Y.location.href=T:window.location.href=T}catch(Y){console.error("Failed to get customer portal URL:",Y)}};if(!e)return null;const z=l?.tier||r?.current_tier||"free",B=kq(),D={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},U={backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.lg,padding:f.spacing["2xl"],maxWidth:"720px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:f.shadows.lg,position:"relative"},G={display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.xl},$={width:"48px",height:"48px",borderRadius:f.borderRadius.full,backgroundColor:f.colors.accent.infoLight,display:"flex",alignItems:"center",justifyContent:"center"},re={...f.typography.presets.heading4,color:f.colors.primary.main,margin:0},Q={position:"absolute",top:f.spacing.lg,right:f.spacing.lg,background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,color:f.colors.icon.secondary,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},H=s.jsx(Wr,{children:s.jsx(jt.div,{style:D,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:s.jsxs(jt.div,{style:U,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},onClick:Y=>Y.stopPropagation(),children:[s.jsx("button",{style:Q,onClick:t,onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20})}),s.jsxs("div",{style:G,children:[s.jsx("div",{style:$,children:s.jsx(ob,{size:24,color:f.colors.accent.info})}),s.jsx("h2",{style:re,children:z==="free"?"Upgrade Your Plan":"Manage Subscription"})]}),d&&!l&&s.jsxs("div",{style:{textAlign:"center",padding:`${f.spacing["2xl"]} 0`},children:[s.jsx("div",{style:{display:"inline-block",width:"48px",height:"48px",border:`4px solid ${f.colors.neutral[200]}`,borderTop:`4px solid ${f.colors.accent.info}`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("p",{style:{...f.typography.presets.body,color:f.colors.neutral[600],marginTop:f.spacing.md},children:"Checking your subscription status..."})]}),l&&z==="unlimited"&&!d&&s.jsx("div",{children:s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.accent.successLight,borderRadius:f.borderRadius.lg,marginBottom:f.spacing.xl},children:[s.jsxs("p",{style:{...f.typography.presets.body,color:f.colors.neutral[700],marginBottom:f.spacing.sm},children:[s.jsx("strong",{children:"Current Plan:"})," Unlimited"]}),s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.primary.main,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["Applications: ",l.used||0," / "]}),s.jsx("p",{style:{...f.typography.presets.caption,color:f.colors.accent.success,marginBottom:f.spacing.sm},children:"Unlimited applications remaining"}),s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.primary.main,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["AI Resumes: ",y?.used||0," / "]}),s.jsx("p",{style:{...f.typography.presets.caption,color:f.colors.accent.success},children:"Unlimited AI resumes"})]})}),l&&z==="pro"&&!d&&s.jsx("div",{children:s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.accent.infoLight,borderRadius:f.borderRadius.lg,marginBottom:f.spacing.xl},children:[s.jsxs("p",{style:{...f.typography.presets.body,color:f.colors.neutral[700],marginBottom:f.spacing.sm},children:[s.jsx("strong",{children:"Current Plan:"})," Pro"]}),s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.primary.main,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["Applications: ",l.used||0," / ",l.limit]}),s.jsxs("p",{style:{...f.typography.presets.caption,color:f.colors.accent.success,marginBottom:f.spacing.sm},children:[l.remaining||0," applications remaining this period"]}),y&&y.limit!==1/0&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.primary.main,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["AI Resumes: ",y.used," / ",y.limit]}),s.jsx("p",{style:{...f.typography.presets.caption,color:y.remaining>0?f.colors.accent.success:f.colors.accent.error},children:y.remaining>0?`${y.remaining} AI resumes remaining`:"AI resume limit reached"})]})]})}),r&&z==="free"&&s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.accent.warningLight,borderRadius:f.borderRadius.lg,marginBottom:f.spacing.xl,border:`1px solid ${f.colors.accent.warningBorder}`},children:[s.jsx("p",{style:{...f.typography.presets.body,color:f.colors.accent.warningDarkest,fontWeight:f.typography.fontWeight.medium},children:r.message}),r.error_code==="AI_RESUME_LIMIT_REACHED"&&r.limit!==void 0&&r.current_usage!==void 0&&s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.accent.warningDarkest,fontWeight:f.typography.fontWeight.semibold,marginTop:f.spacing.sm},children:["AI Resumes Used: ",r.current_usage," / ",r.limit]}),r.call_to_action&&s.jsx("p",{style:{...f.typography.presets.bodySmall,color:f.colors.accent.warningDark,marginTop:f.spacing.sm},children:r.call_to_action})]}),(z==="free"||z==="pro")&&s.jsxs("div",{children:[z==="free"&&s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.accent.warningLight,borderRadius:f.borderRadius.lg,marginBottom:f.spacing.xl,border:`2px solid ${f.colors.accent.warning}`,textAlign:"center"},children:[s.jsx("p",{style:{...f.typography.presets.heading4,color:f.colors.accent.warningDarkest,fontWeight:f.typography.fontWeight.bold,margin:`0 0 ${f.spacing.sm} 0`},children:"Limited Time Offer"}),s.jsx("p",{style:{...f.typography.presets.body,color:f.colors.accent.warningDark,marginBottom:f.spacing.md},children:"Special pricing ends in:"}),s.jsx("div",{style:{display:"flex",justifyContent:"center",gap:f.spacing.md},children:[{label:"Days",value:g.days},{label:"Hours",value:g.hours},{label:"Minutes",value:g.minutes},{label:"Seconds",value:g.seconds}].map(({label:Y,value:T})=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("div",{style:{backgroundColor:f.colors.secondary.main,padding:`${f.spacing.sm} ${f.spacing.md}`,borderRadius:f.borderRadius.md,minWidth:"50px",marginBottom:f.spacing.xs},children:s.jsx("span",{style:{...f.typography.presets.heading3,color:f.colors.accent.warningDarkest,fontWeight:f.typography.fontWeight.bold},children:String(T).padStart(2,"0")})}),s.jsx("span",{style:{...f.typography.presets.caption,color:f.colors.accent.warningDark,fontWeight:f.typography.fontWeight.medium},children:Y})]},Y))})]}),z==="pro"&&s.jsx("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.accent.successLight,borderRadius:f.borderRadius.md,marginBottom:f.spacing.lg},children:s.jsx("p",{style:{...f.typography.presets.bodySmall,color:f.colors.accent.successDark,margin:0},children:" Your unused Pro subscription time will be automatically credited toward your new plan"})}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:z==="pro"?"1fr":"1fr 1fr",gap:f.spacing.xl,marginBottom:f.spacing.xl},children:B.filter(Y=>z==="free"||Y.id==="unlimited").map(Y=>{const T=Y.id==="pro"?ob:hp,o=Y.color.primary,c=Y.color.light;return s.jsxs("div",{style:{border:`2px solid ${c}`,borderRadius:f.borderRadius.lg,padding:f.spacing.xl,position:"relative",transition:f.transitions.normal,display:"flex",flexDirection:"column"},children:[Y.highlighted&&s.jsx("div",{style:{position:"absolute",top:"-12px",left:"50%",transform:"translateX(-50%)",backgroundColor:o,color:f.colors.primary.text,padding:"4px 12px",borderRadius:f.borderRadius.full,...f.typography.presets.caption,fontWeight:f.typography.fontWeight.medium},children:"Most Popular"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.lg},children:[s.jsx(T,{color:o,size:24}),s.jsxs("h3",{style:{...f.typography.presets.heading4,color:f.colors.primary.main,margin:0},children:[Y.name," Plan"]})]}),s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[Y.originalPrice&&s.jsx("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.neutral[500],textDecoration:"line-through",margin:0,marginBottom:f.spacing.xs},children:Y.originalPrice}),s.jsx("p",{style:{...f.typography.presets.heading2,color:o,margin:0},children:Y.price}),Y.originalPrice&&s.jsxs("p",{style:{...f.typography.presets.caption,color:f.colors.accent.successDark,fontWeight:f.typography.fontWeight.semibold,margin:`${f.spacing.xs} 0 0 0`},children:["Save"," ",Y.originalPriceValue&&Y.priceValue?`$${Y.originalPriceValue-Y.priceValue}/month`:""]})]}),s.jsx("div",{style:{marginBottom:f.spacing.xl,flex:1},children:Y.features.map((h,v)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.sm},children:[s.jsx(X$,{color:o,size:16}),s.jsx("span",{style:{...f.typography.presets.bodySmall,color:f.colors.neutral[700]},children:h})]},v))}),s.jsx(ot,{onClick:()=>Y.id!=="free"&&E(Y.id),disabled:d||Y.id==="free",variant:"primary",style:{width:"100%",backgroundColor:o,border:`1px solid ${o}`},children:z==="pro"?`Upgrade to ${Y.name}`:`Upgrade to ${Y.name}`})]},Y.id)})})]}),(z==="free"||z==="pro"||z==="unlimited")&&s.jsx("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,marginTop:f.spacing.xl},children:s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:f.spacing.md},children:z==="free"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{...f.typography.presets.caption,color:f.colors.neutral[600]},children:[s.jsx("p",{style:{margin:"0 0 4px 0"},children:" 30-day money-back guarantee"}),s.jsx("p",{style:{margin:0},children:" Secure payment processing by Stripe"})]}),s.jsx(ot,{onClick:t,variant:"secondary",children:"Maybe Later"})]}):z==="pro"||z==="unlimited"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{...f.typography.presets.caption,color:f.colors.neutral[600]},children:s.jsx("p",{style:{margin:0},children:"Need to cancel or update your plan?"})}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx(ot,{onClick:P,variant:"secondary",children:"Manage Subscription"}),s.jsx(ot,{onClick:t,variant:"secondary",children:"Close"})]})]}):null})})]})})});return RR.createPortal(H,document.body)},jr=({variant:e,color:t="primary",children:r,className:n="",style:l={},as:i,...d})=>{const p={primary:f.colors.neutral[900],secondary:f.colors.neutral[500],muted:f.colors.neutral[400],inverse:"#ffffff",success:f.colors.accent.success,warning:f.colors.accent.warning,error:f.colors.accent.error,info:f.colors.accent.info},g=hU(e),x=p[t]||t,w=i||(_=>{if(_.startsWith("heading")||_==="displayLarge"){if(_==="heading1"||_==="displayLarge")return"h1";if(_==="heading2")return"h2";if(_==="heading3")return"h3";if(_==="heading4")return"h4"}return _.includes("body")||_==="label"?"p":_==="caption"||_==="overline"?"span":_==="code"?"code":(_.includes("button"),"span")})(e),j={...g,color:x,margin:0,...l};return s.jsx(w,{className:n,style:j,...d,children:r})},u_=e=>s.jsx(jr,{variant:"heading1",...e}),wr=e=>s.jsx(jr,{variant:"heading2",...e}),ki=e=>s.jsx(jr,{variant:"heading3",...e}),wi=e=>s.jsx(jr,{variant:"heading4",...e}),Ct=e=>s.jsx(jr,{variant:"body",...e}),FW=e=>s.jsx(jr,{variant:"bodyLarge",...e}),dr=e=>s.jsx(jr,{variant:"bodySmall",...e}),ir=e=>s.jsx(jr,{variant:"caption",...e}),AC=e=>s.jsx(jr,{variant:"label",...e}),Da=({isOpen:e,onClose:t,onUploadComplete:r,currentAgentRunId:n})=>{const[l,i]=F.useState(!1),[d,p]=F.useState(""),[g,x]=F.useState(""),[y,w]=F.useState(null),j=F.useRef(null),_=B=>{const D=B.target.files?.[0];if(D){if(!D.name.toLowerCase().endsWith(".pdf")){x("Only PDF files are supported");return}w(D),x(""),A(D)}},A=async B=>{const D=B||y;if(D)try{i(!0),p("Uploading PDF..."),x("");const U=await Dl();U&&_r.setAuthToken(U);const G=await _r.processResume(D);console.log("Resume uploaded successfully:",G),p("Complete! Resume uploaded successfully"),setTimeout(()=>{r(G.resume_id),E()},1500)}catch(U){x(U instanceof Error?U.message:"Upload failed"),i(!1)}},E=()=>{w(null),i(!1),p(""),x(""),j.current&&(j.current.value=""),t()},P=B=>{B.preventDefault()},z=B=>{B.preventDefault();const D=B.dataTransfer.files;if(D[0]){const U=D[0];if(!U.name.toLowerCase().endsWith(".pdf")){x("Only PDF files are supported");return}w(U),x(""),A(U)}};return e?s.jsx("div",{className:"modal-overlay",onClick:E,children:s.jsxs("div",{className:"modal-content resume-upload-modal",onClick:B=>B.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx(Ct,{children:"Upload New Resume"}),s.jsx("button",{className:"modal-close",onClick:E,children:s.jsx(cn,{size:20})})]}),s.jsxs("div",{className:"modal-body",children:[!l&&s.jsxs("div",{className:"upload-dropzone",onDragOver:P,onDrop:z,onClick:()=>j.current?.click(),children:[s.jsx(mq,{size:32}),s.jsx("p",{children:"Drop your resume here or click to browse"}),s.jsx("p",{className:"upload-hint",children:"Only PDF files are supported"}),s.jsx("input",{ref:j,type:"file",accept:".pdf",onChange:_,style:{display:"none"}})]}),l&&s.jsxs("div",{className:"upload-progress",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:d})]}),g&&s.jsxs("div",{className:"upload-error",children:[s.jsx(Ki,{size:20}),s.jsx("span",{children:g})]})]})]})}):null},ZE=({resume:e,onClose:t,hideHeader:r=!1})=>{const[n,l]=F.useState(null),[i,d]=F.useState(!1),[p,g]=F.useState(!1),[x,y]=F.useState(null),[w,j]=F.useState(""),[_,A]=F.useState(!1),[E,P]=F.useState(0),z=re=>{const H=(re.file_path||re.blob_url).split("/").pop();return H&&H.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\.pdf$/i)?H:re.file_name};F.useEffect(()=>(l(null),A(!1),d(!1),y(null),j(""),P(re=>re+1),B(),()=>{n&&n.startsWith("blob:")&&!n.includes("jobapplicationstorage.blob.core.windows.net")&&URL.revokeObjectURL(n)}),[e.id]),F.useEffect(()=>{A(!1)},[n]);const B=async()=>{try{if(d(!0),y(null),j("Loading preview..."),typeof window<"u"&&window.electronAPI)try{const re=z(e),H=`${await window.electronAPI.getDownloadsPath()}/${re}`;if(await window.electronAPI.checkFileExists(re)){j("Loading local file...");const T=await window.electronAPI.readLocalFile(H);if(T&&T.trim()!==""){l(T),j("Waiting for display...");return}else console.warn("Empty data URL received, will try to re-download")}if(e.blob_url&&e.blob_url.trim()!==""&&window.electronAPI.autoDownloadFile){j("Downloading resume for preview..."),console.log(" File not found locally, downloading for preview...");const T=await window.electronAPI.autoDownloadFile(e.blob_url,re);if(T.success){j("Loading downloaded file...");const o=await window.electronAPI.readLocalFile(T.filePath);if(o&&o.trim()!==""){l(o),j("Waiting for display...");return}else console.warn("Failed to read downloaded file")}else console.error("Download failed for preview:",T.error)}}catch(re){console.log("Local file handling failed:",re)}try{e.blob_url&&e.blob_url.trim()!==""?(l(e.blob_url),j("Waiting for display...")):(console.warn("Empty blob URL, cannot preview"),y("Preview failed. No valid URL available."),d(!1))}catch{console.log("Azure failed, will show file picker option"),y("Preview failed. You can select the file from your Downloads folder below."),d(!1)}}catch(re){y(re instanceof Error?re.message:"Failed to load preview"),console.error("Failed to load resume preview:",re),d(!1)}},D=re=>{const Q=re.target.files?.[0];if(Q&&Q.type==="application/pdf"){d(!0),j("Loading local PDF...");const H=URL.createObjectURL(Q);l(H),j("Waiting for PDF to display...")}},U=()=>{A(!0),d(!1),j("Preview ready!")},G=()=>{console.log("Iframe failed to load"),y("Failed to display PDF. The file might be corrupted or unsupported."),d(!1)};F.useEffect(()=>{if(i&&n){let re=0;const Q=16,H=()=>{if(re++,!_){if(re>=Q){d(!1),y("PDF cannot be previewed inline due to browser or Azure blob storage settings. Please use the download button to view the file.");return}setTimeout(H,500)}},Y=setTimeout(H,500);return()=>clearTimeout(Y)}},[i,n,_]);const $=async()=>{try{g(!0);const re=z(e);let Q=!1;if(window.electronAPI&&window.electronAPI.checkFileExists&&(Q=await window.electronAPI.checkFileExists(re)),!Q&&window.electronAPI&&window.electronAPI.autoDownloadFile){const H=await window.electronAPI.autoDownloadFile(e.blob_url,re);if(!H.success){console.error("Download failed:",H.error),g(!1);return}}if(window.electronAPI&&window.electronAPI.revealInFolder){const H=await window.electronAPI.revealInFolder(re);H.success||console.error("Reveal failed:",H.error)}else{const H=document.createElement("a");H.href=e.blob_url,H.download=re,document.body.appendChild(H),H.click(),document.body.removeChild(H)}setTimeout(()=>g(!1),1e3)}catch(re){console.error("Failed to reveal file in folder:",re),g(!1)}};return s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#ffffff",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[!r&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #e5e7eb",backgroundColor:"#f9fafb"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[s.jsx(Lo,{size:20,style:{color:"#6366f1",flexShrink:0}}),s.jsx(jr,{variant:"heading4",color:"primary",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.file_name})]}),s.jsx("div",{children:s.jsx("button",{onClick:$,disabled:p,title:p?"Revealing...":"Reveal in folder",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:p?"#f3f4f6":"#ffffff",color:p?"#6b7280":"#374151",cursor:p?"not-allowed":"pointer",transition:"all 0.2s ease"},onMouseOver:re=>{p||(re.currentTarget.style.backgroundColor="#f9fafb",re.currentTarget.style.borderColor="#9ca3af")},onMouseOut:re=>{p||(re.currentTarget.style.backgroundColor="#ffffff",re.currentTarget.style.borderColor="#d1d5db")},children:p?s.jsx(zR,{size:16,style:{animation:"spin 1s linear infinite"}}):s.jsx(RM,{size:16})})})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[x&&!i&&s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 32px",textAlign:"center"},children:s.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"2px dashed #cbd5e1",padding:"32px",maxWidth:"400px",width:"100%"},children:[s.jsx(jr,{variant:"heading4",color:"#1e293b",style:{margin:"0 0 8px 0"},children:"Select Local File"}),s.jsx(jr,{variant:"body",color:"#64748b",style:{margin:"8px 0 24px 0"},children:"If you have this file in your Downloads folder, select it to preview:"}),s.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[s.jsx("input",{type:"file",accept:".pdf",onChange:D,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}}),s.jsxs("button",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",backgroundColor:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:f.typography.fontSize.base,fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:[s.jsx(RM,{size:f.spacing.md}),"Choose File"]})]}),s.jsxs(jr,{variant:"caption",color:"#6b7280",style:{margin:"16px 0 0 0"},children:["Looking for: ",s.jsx("strong",{style:{color:"#374151"},children:e.file_name})]})]})}),i&&s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"40px"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[s.jsx("div",{style:{width:f.spacing.lg,height:f.spacing.lg,border:"3px solid #e5e7eb",borderTop:"3px solid #3b82f6",animation:"spin 1s linear infinite"}}),s.jsx("div",{style:{width:f.spacing["2xl"],height:"4px",backgroundColor:"#e5e7eb",overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",backgroundColor:"#3b82f6",animation:"pulse 2s ease-in-out infinite",width:"60%"}})}),s.jsx(jr,{variant:"body",color:"secondary",style:{fontWeight:"500"},children:w})]})}),x&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",padding:"16px 20px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",margin:"16px",color:"#dc2626"},children:[s.jsx(Ki,{size:20,style:{flexShrink:0}}),s.jsx(jr,{variant:"body",color:"error",style:{flex:1},children:x}),s.jsx("button",{onClick:B,style:{padding:"6px 12px",backgroundColor:"#dc2626",color:"#ffffff",border:"none",fontSize:f.typography.fontSize.xs,fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:re=>{re.currentTarget.style.backgroundColor="#b91c1c"},onMouseOut:re=>{re.currentTarget.style.backgroundColor="#dc2626"},children:"Retry"})]}),n&&n.trim()!==""&&!x&&(()=>{const re=n.trim();return!re||re===""?(console.error("Prevented empty URL from being passed to iframe"),null):s.jsx("iframe",{src:`${re}#toolbar=0&navpanes=0&scrollbar=0`,title:"Resume Preview",width:"100%",height:"100%",onLoad:U,onError:G,style:{display:i?"none":"block",border:"none",flex:1}},`${e.id}-${E}`)})()]}),s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})},La=({resume:e,isOpen:t,onClose:r})=>!e||!t?null:s.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,padding:"24px"},children:s.jsxs("div",{style:{width:"min(960px, 100%)",height:"90vh",backgroundColor:"#fff",borderRadius:f.borderRadius.xl,boxShadow:"0 30px 60px -15px rgba(15, 23, 42, 0.35)",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${f.colors.neutral[200]}`,background:"linear-gradient(90deg, #f8fafc 0%, #fff 100%)"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{margin:0,fontSize:f.typography.fontSize.lg,color:f.colors.neutral[800]},children:"Resume preview"}),s.jsx("p",{style:{margin:"4px 0 0",color:f.colors.neutral[500],fontSize:f.typography.fontSize.sm},children:e.file_name})]}),s.jsx("button",{"aria-label":"Close resume preview",onClick:r,style:{border:"none",background:"transparent",color:f.colors.neutral[500],cursor:"pointer",padding:"4px"},children:s.jsx(cn,{size:22})})]}),s.jsx("div",{style:{flex:1,minHeight:0,overflow:"hidden"},children:s.jsx(ZE,{resume:e,onClose:r,hideHeader:!0})})]})}),XE=Vt.createContext({}),QE=!0;function UW({baseColor:e,highlightColor:t,width:r,height:n,borderRadius:l,circle:i,direction:d,duration:p,enableAnimation:g=QE,customHighlightBackground:x}){const y={};return d==="rtl"&&(y["--animation-direction"]="reverse"),typeof p=="number"&&(y["--animation-duration"]=`${p}s`),g||(y["--pseudo-element-display"]="none"),(typeof r=="string"||typeof r=="number")&&(y.width=r),(typeof n=="string"||typeof n=="number")&&(y.height=n),(typeof l=="string"||typeof l=="number")&&(y.borderRadius=l),i&&(y.borderRadius="50%"),typeof e<"u"&&(y["--base-color"]=e),typeof t<"u"&&(y["--highlight-color"]=t),typeof x=="string"&&(y["--custom-highlight-background"]=x),y}function $W({count:e=1,wrapper:t,className:r,containerClassName:n,containerTestId:l,circle:i=!1,style:d,...p}){var g,x,y;const w=Vt.useContext(XE),j={...p};for(const[D,U]of Object.entries(p))typeof U>"u"&&delete j[D];const _={...w,...j,circle:i},A={...d,...UW(_)};let E="react-loading-skeleton";r&&(E+=` ${r}`);const P=(g=_.inline)!==null&&g!==void 0?g:!1,z=[],B=Math.ceil(e);for(let D=0;D<B;D++){let U=A;if(B>e&&D===B-1){const $=(x=U.width)!==null&&x!==void 0?x:"100%",re=e%1,Q=typeof $=="number"?$*re:`calc(${$} * ${re})`;U={...U,width:Q}}const G=Vt.createElement("span",{className:E,style:U,key:D},"");P?z.push(G):z.push(Vt.createElement(Vt.Fragment,{key:D},G,Vt.createElement("br",null)))}return Vt.createElement("span",{className:n,"data-testid":l,"aria-live":"polite","aria-busy":(y=_.enableAnimation)!==null&&y!==void 0?y:QE},t?z.map((D,U)=>Vt.createElement(t,{key:U},D)):z)}function qW({children:e,...t}){return Vt.createElement(XE.Provider,{value:t},e)}const _s=({height:e=48,width:t="100%",count:r=1,borderRadius:n=6,className:l,style:i})=>s.jsx(qW,{baseColor:"#f1f5f9",highlightColor:"#e2e8f0",borderRadius:n,children:s.jsx($W,{height:e,width:t,count:r,className:l,style:i})}),hc=()=>s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx(_s,{height:16,width:80,style:{marginBottom:"8px"}}),s.jsx(_s,{height:48})]}),pc=()=>s.jsx(_s,{height:48}),gc=()=>s.jsx(_s,{height:40,width:120,borderRadius:8}),Yi=()=>s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx(_s,{height:14,width:100,style:{marginBottom:"8px"}}),s.jsx(_s,{height:120})]}),Jr=()=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[s.jsx(_s,{height:16,width:16}),s.jsx(_s,{height:16,width:200})]}),En=({children:e})=>s.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",padding:"24px",marginBottom:"24px",backgroundColor:"white"},children:e}),mc=()=>s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx(_s,{height:32,width:300}),s.jsx("div",{style:{marginTop:"12px"},children:s.jsx(_s,{height:16,width:150})})]}),HW=({children:e,size:t="md",className:r="",style:n={},onClick:l})=>{const d=`icon-container ${t!=="custom"?`size-${t}`:""} ${r}`.trim(),p={cursor:l?"pointer":"default",...n};return s.jsx("div",{className:d,style:p,onClick:l,children:e})},Js=({title:e,icon:t,section:r,expandedSections:n,onToggle:l})=>s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 0",cursor:"pointer",borderBottom:n[r]?"none":"1px solid #e2e8f0"},onClick:()=>l(r),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx(HW,{size:"sm",children:s.jsx(t,{size:16})}),s.jsx(jr,{variant:"bodyLarge",color:"primary",style:{fontWeight:"500",margin:0},children:e})]}),n[r]?s.jsx(ks,{size:16,style:{color:nb("primary")}}):s.jsx(za,{size:16,style:{color:nb("primary")}})]}),Zp=({options:e,value:t,onChange:r,placeholder:n="Select an option...",label:l,disabled:i=!1,allowClear:d=!0,className:p="",style:g={}})=>{const[x,y]=F.useState(!1),w=F.useRef(null);F.useEffect(()=>{const G=$=>{w.current&&!w.current.contains($.target)&&y(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[]);const j=G=>{i||(r(G),y(!1))},_=G=>{G.stopPropagation(),r(null)},A=e.find(G=>G.value===t),E={position:"relative",width:"100%",...g},P={display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"8px",color:"#374151"},z={width:"100%",minHeight:"48px",padding:"12px 16px",backgroundColor:i?"#f9fafb":"white",border:"1px solid #cbd5e1",borderRadius:"6px",color:i?"#9ca3af":A?"#1e293b":"#9ca3af",fontSize:f.typography.fontSize.base,outline:"none",cursor:i?"not-allowed":"pointer",transition:"all 0.15s ease-in-out",display:"flex",alignItems:"center",justifyContent:"space-between"},B={position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",zIndex:1e3,maxHeight:"240px",overflowY:"auto",marginTop:"4px"},D={padding:"12px 16px",fontSize:f.typography.fontSize.base,color:"#374151",cursor:"pointer",transition:"background-color 0.15s ease-in-out",borderBottom:"1px solid #f3f4f6"},U={color:i?"#9ca3af":"#6b7280",transition:"transform 0.15s ease-in-out",transform:x?"rotate(180deg)":"rotate(0deg)",flexShrink:0};return s.jsxs("div",{ref:w,className:p,style:E,children:[l&&s.jsx("label",{style:P,children:l}),s.jsxs("div",{onClick:()=>!i&&y(!x),style:z,onMouseEnter:G=>{i||(G.target.style.borderColor="#60a5fa")},onMouseLeave:G=>{i||(G.target.style.borderColor="#cbd5e1")},children:[s.jsx("span",{children:A?A.label:n}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d&&A&&s.jsx("button",{type:"button",onClick:_,style:{background:"none",border:"none",padding:"2px",cursor:"pointer",color:"#6b7280",display:"flex",alignItems:"center",borderRadius:"2px"},onMouseEnter:G=>{G.target.style.backgroundColor="#f3f4f6"},onMouseLeave:G=>{G.target.style.backgroundColor="transparent"},children:""}),s.jsx(ks,{size:f.spacing.md,style:U})]})]}),x&&s.jsx("div",{style:B,children:e.length===0?s.jsx("div",{style:{...D,color:"#9ca3af",fontStyle:"italic"},children:"No options available"}):e.map(G=>{const $=G.value===t;return s.jsx("div",{onClick:()=>j(G.value),style:{...D,backgroundColor:$?"#f1f5f9":"white",color:$?"var(--accent-primary)":"#374151",fontWeight:$?"500":"400"},onMouseEnter:re=>{re.target.style.backgroundColor=$?"#e2e8f0":"#f3f4f6"},onMouseLeave:re=>{re.target.style.backgroundColor=$?"#f1f5f9":"white"},children:G.label},G.value)})})]})},e7=({selectedResumeId:e,onResumeSelect:t,onPreview:r,onUploadNew:n,refreshTrigger:l})=>{const[i,d]=F.useState([]),p=F.useRef(null),g=i.find(A=>A.id===e);F.useEffect(()=>{x()},[]),F.useEffect(()=>{l&&x()},[l]),F.useEffect(()=>{const A=E=>{p.current&&!p.current.contains(E.target)&&setIsOpen(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const x=async()=>{try{const A=Dl();A&&_r.setAuthToken(A);const P=(await _r.listResumes()).reduce((z,B)=>{const D=z.findIndex(U=>U.file_name===B.file_name&&U.file_path===B.file_path);return D===-1?z.push(B):new Date(B.created_at)>new Date(z[D].created_at)&&(z[D]=B),z},[]);P.sort((z,B)=>new Date(B.created_at).getTime()-new Date(z.created_at).getTime()),d(P)}catch(A){console.error("Failed to load resumes:",A)}},y=A=>{t(A)},w=(A,E)=>{A.stopPropagation(),r(E)},j=()=>{n()},_=i.map(A=>({value:A.id,label:A.file_name}));return s.jsxs("div",{children:[s.jsx(Zp,{options:_,value:e||null,onChange:A=>{if(A===null)return;const E=i.find(P=>P.id===A);E&&y(E)},placeholder:"Select a resume"}),s.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[s.jsx("button",{className:"secondary-button",onClick:j,children:"Upload new"}),g&&s.jsx("button",{className:"secondary-button",onClick:A=>w(A,g),children:"Preview"})]})]})},WW=({expandedSections:e,onToggleSection:t,userPreferences:r,formData:n,hasATSTemplate:l,atsTemplates:i,selectedResumeId:d,refreshTrigger:p,onFormDataChange:g,onResumeSelect:x,onResumePreview:y,onUploadNew:w,onNavigateToATSCreation:j,saveFieldOnBlur:_})=>{const A=()=>{const E=new CustomEvent("jobhuntr:navigate",{detail:{view:"about-me"}});window.dispatchEvent(E)};return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Tell me about yourself",icon:cc,section:"about",expandedSections:e,onToggle:t}),e.about&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"16px",borderRadius:"12px",border:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#f8fafc",marginBottom:"24px"},children:[s.jsx(jr,{variant:"bodySmall",color:"secondary",as:"div",style:{lineHeight:1.5},children:"Answers to FAQ prompts and the new Additional information about me sections now live in the About Me page. Keep them fresh there and every job run will automatically use the latest details."}),s.jsx("div",{children:s.jsx("button",{type:"button",onClick:A,style:{padding:"8px 14px",borderRadius:"8px",border:"none",backgroundColor:f.colors.primary.main,color:"#fff",fontWeight:600,cursor:"pointer"},children:"Open About Me"})})]}),r.useATSResume?s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"ATS Resume Template"}),l===!0&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.sm,fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"Available ATS Templates:"}),s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,color:"#6b7280",marginBottom:"8px"},children:"Click on a template to select it for your job applications"}),s.jsx("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"12px",maxHeight:"120px",overflowY:"auto"},children:i.length>0?i.map((E,P)=>{const z=n.selectedATSTemplateId===E.id;return s.jsxs("div",{onClick:()=>{g({selectedATSTemplateId:E.id}),_("selectedATSTemplateId",E.id)},style:{padding:"8px 12px",backgroundColor:z?"#eff6ff":"#ffffff",border:z?"2px solid #3b82f6":"1px solid #e2e8f0",borderRadius:"4px",marginBottom:"8px",fontSize:f.typography.fontSize.sm,color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:B=>{z||(B.currentTarget.style.backgroundColor="#f8fafc",B.currentTarget.style.borderColor="#cbd5e1")},onMouseLeave:B=>{z||(B.currentTarget.style.backgroundColor="#ffffff",B.currentTarget.style.borderColor="#e2e8f0")},children:[s.jsxs("div",{style:{fontWeight:"500",marginBottom:"4px",display:"flex",alignItems:"center"},children:[z&&s.jsx("span",{style:{marginRight:"8px",color:"#3b82f6"},children:""}),E.name||`Template ${P+1}`]}),E.created_at&&s.jsxs("div",{style:{fontSize:f.typography.fontSize.xs,color:"#6b7280"},children:["Created: ",new Date(E.created_at).toLocaleDateString()]})]},E.id||P)}):s.jsx("div",{style:{textAlign:"center",color:"#6b7280",fontSize:f.typography.fontSize.sm,padding:"16px"},children:"No templates found"})})]}),l===null&&s.jsx("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"6px",border:"1px solid #e2e8f0",textAlign:"center"},children:s.jsx(jr,{variant:"caption",color:"secondary",as:"div",children:"Checking ATS template availability..."})}),l===!1&&s.jsxs("div",{style:{padding:"32px 24px",backgroundColor:"#FAFAFA",borderRadius:"16px",border:"1px solid #e5e7eb",textAlign:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",margin:"0 auto"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.h4,fontWeight:"600",color:"#111827",marginBottom:"12px",lineHeight:"1.3"},children:"No ATS Resume Template Found"}),s.jsx("div",{style:{fontSize:f.typography.fontSize.base,color:"#6b7280",marginBottom:"24px",lineHeight:"1.5"},children:"You need to create an ATS resume template first to use this feature."}),s.jsx(ot,{variant:"primary",onClick:j,style:{width:"100%",padding:"12px 24px",fontSize:f.typography.fontSize.base,fontWeight:"500",borderRadius:"8px"},children:"Create ATS Resume Template"})]}),l===!0&&s.jsx(ot,{variant:"secondary",onClick:j,style:{width:"100%",marginTop:"8px"},children:"Create New ATS Resume Template"})]}):s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Resume Choice"}),s.jsx(e7,{selectedResumeId:d,onResumeSelect:x,onPreview:y,onUploadNew:w,refreshTrigger:p})]})]})]})},is=({children:e,onClick:t,variant:r="primary",size:n="medium",disabled:l=!1,loading:i=!1,className:d="",style:p={}})=>{const[g,x]=Vt.useState(!1),[y,w]=Vt.useState(!1),j={background:"none",border:"none",cursor:l||i?"not-allowed":"pointer",padding:"0",margin:"0",fontFamily:"inherit",outline:"none",transition:"all 0.15s ease-in-out",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"4px",position:"relative",...p},_={small:{fontSize:f.typography.fontSize.xs,lineHeight:"16px"},medium:{fontSize:f.typography.fontSize.base,lineHeight:"20px"},large:{fontSize:f.typography.fontSize.lg,lineHeight:"24px"}},A=()=>{if(l||i)return{color:"#9ca3af",opacity:.6};const $={primary:{default:"var(--accent-primary)",hover:"var(--accent-primary-hover)",active:"var(--accent-primary-active)"},secondary:{default:"#6b7280",hover:"#4b5563",active:"#374151"},danger:{default:"#ef4444",hover:"#dc2626",active:"#b91c1c"}}[r];return y?{color:$.active}:g?{color:$.hover}:{color:$.default}},E=async()=>{if(!(l||i||!t))try{await t()}catch(U){console.error("TextButton onClick error:",U)}},P=()=>w(!0),z=()=>w(!1),B=()=>{x(!1),w(!1)},D={...j,..._[n],...A()};return s.jsxs("button",{type:"button",onClick:E,onMouseEnter:()=>x(!0),onMouseLeave:B,onMouseDown:P,onMouseUp:z,disabled:l||i,className:d,style:D,children:[i&&s.jsx("span",{style:{display:"inline-block",width:f.spacing.xs,height:f.spacing.xs,border:"2px solid currentColor",borderRadius:"50%",borderTopColor:"transparent",animation:"spin 0.8s linear infinite"}}),e,s.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `})]})},VW=[{value:"usa",label:"United States"},{value:"canada",label:"Canada"},{value:"australia",label:"Australia"},{value:"uk",label:"United Kingdom"},{value:"germany",label:"Germany"},{value:"poland",label:"Poland"},{value:"italy",label:"Italy"},{value:"denmark",label:"Denmark"},{value:"sweden",label:"Sweden"},{value:"norway",label:"Norway"},{value:"finland",label:"Finland"},{value:"netherlands",label:"Netherlands"}],GW=({value:e,onChange:t,disabled:r=!1,loading:n=!1,label:l="Country",style:i={}})=>{const d=p=>{t(p)};return n?s.jsx(hc,{}):s.jsx(Zp,{options:VW,value:e,onChange:d,placeholder:"Select a country...",label:l,disabled:r,allowClear:!1,style:i})},KW=[{value:4e4,label:"$40,000+"},{value:6e4,label:"$60,000+"},{value:8e4,label:"$80,000+"},{value:1e5,label:"$100,000+"},{value:12e4,label:"$120,000+"},{value:14e4,label:"$140,000+"},{value:16e4,label:"$160,000+"},{value:18e4,label:"$180,000+"},{value:2e5,label:"$200,000+"}],YW=({value:e,onChange:t,disabled:r=!1,loading:n=!1,label:l="Minimum Salary",style:i={}})=>n?s.jsx(hc,{}):s.jsx(Zp,{options:KW,value:e,onChange:d=>t(d),placeholder:"Select minimum salary...",label:l,disabled:r,allowClear:!0,style:i}),Xp=({options:e,value:t=[],onChange:r,placeholder:n="Select options...",label:l,disabled:i=!1,maxSelections:d,className:p="",style:g={}})=>{const[x,y]=F.useState(!1),w=F.useRef(null);F.useEffect(()=>{const $=re=>{w.current&&!w.current.contains(re.target)&&y(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]);const j=$=>{if(i)return;const re=t.includes($)?t.filter(Q=>Q!==$):d&&t.length>=d?t:[...t,$];r(re)},_=($,re)=>{re.stopPropagation();const Q=t.filter(H=>H!==$);r(Q)},A=()=>t.map($=>{const re=e.find(Q=>Q.value===$);return re?re.label:String($)}),E={position:"relative",width:"100%",...g},P={display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"8px",color:"#374151"},z={width:"100%",minHeight:"48px",padding:"12px 16px",backgroundColor:i?"#f9fafb":"white",border:"1px solid #cbd5e1",borderRadius:"6px",color:i?"#9ca3af":"#1e293b",fontSize:f.typography.fontSize.base,outline:"none",cursor:i?"not-allowed":"pointer",transition:"all 0.15s ease-in-out",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"4px"},B={position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",zIndex:1e3,maxHeight:"240px",overflowY:"auto",marginTop:"4px"},D={padding:"12px 16px",fontSize:f.typography.fontSize.base,color:"#374151",cursor:"pointer",transition:"background-color 0.15s ease-in-out",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},U={display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",backgroundColor:"#f1f5f9",color:"var(--accent-primary)",borderRadius:"4px",fontSize:f.typography.fontSize.xs,fontWeight:"500"},G={color:i?"#9ca3af":"#6b7280",transition:"transform 0.15s ease-in-out",transform:x?"rotate(180deg)":"rotate(0deg)",flexShrink:0};return s.jsxs("div",{ref:w,className:p,style:E,children:[l&&s.jsx("label",{style:P,children:l}),s.jsxs("div",{onClick:()=>!i&&y(!x),style:z,onMouseEnter:$=>{i||($.target.style.borderColor="#60a5fa")},onMouseLeave:$=>{i||($.target.style.borderColor="#cbd5e1")},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"4px",flex:1},children:t.length===0?s.jsx("span",{style:{color:"#9ca3af"},children:n}):A().map(($,re)=>s.jsxs("div",{style:U,children:[s.jsx("span",{children:$}),s.jsx("button",{type:"button",onClick:Q=>_(t[re],Q),style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"inherit",display:"flex",alignItems:"center"},children:s.jsx(cn,{size:12})})]},t[re]))}),s.jsx(ks,{size:16,style:G})]}),x&&s.jsx("div",{style:B,children:e.length===0?s.jsx("div",{style:{...D,color:"#9ca3af",fontStyle:"italic"},children:"No options available"}):e.map($=>{const re=t.includes($.value),Q=d&&!re&&t.length>=d;return s.jsxs("div",{onClick:()=>!Q&&j($.value),style:{...D,backgroundColor:re?"#eff6ff":"white",color:Q?"#9ca3af":re?"#1e40af":"#374151",cursor:Q?"not-allowed":"pointer",fontWeight:re?"500":"400"},onMouseEnter:H=>{Q||(H.target.style.backgroundColor=re?"#dbeafe":"#f3f4f6")},onMouseLeave:H=>{H.target.style.backgroundColor=re?"#eff6ff":"white"},children:[s.jsx("span",{children:$.label}),re&&s.jsx("div",{style:{width:f.spacing.md,height:f.spacing.md,borderRadius:"50%",backgroundColor:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.xxs,fontWeight:"bold"},children:""})]},$.value)})})]})},JW=[{value:1,label:"Internship"},{value:2,label:"Entry Level"},{value:3,label:"Associate"},{value:4,label:"Mid-Senior Level"},{value:5,label:"Director"},{value:6,label:"Executive"}],ZW=({value:e=[],onChange:t,disabled:r=!1,loading:n=!1,label:l="Experience Level",style:i={}})=>{const d=p=>{const g=p.map(x=>typeof x=="number"?x:parseInt(String(x),10)).filter(x=>!isNaN(x));t(g)};return n?s.jsx(hc,{}):s.jsx(Xp,{options:JW,value:e,onChange:d,placeholder:"Select experience levels...",label:l,disabled:r,style:i})},XW=[{value:1,label:"On-site"},{value:2,label:"Remote"},{value:3,label:"Hybrid"}],QW=({value:e=[],onChange:t,disabled:r=!1,loading:n=!1,label:l="Work Type",style:i={}})=>{const d=p=>{const g=p.map(x=>typeof x=="number"?x:parseInt(String(x),10)).filter(x=>!isNaN(x));t(g)};return n?s.jsx(hc,{}):s.jsx(Xp,{options:XW,value:e,onChange:d,placeholder:"Select work types...",label:l,disabled:r,style:i})},eV=[{value:"F",label:"Full-time"},{value:"P",label:"Part-time"},{value:"C",label:"Contract"},{value:"T",label:"Temporary"},{value:"V",label:"Volunteer"},{value:"I",label:"Internship"},{value:"O",label:"Other"}],tV=({value:e=[],onChange:t,disabled:r=!1,loading:n=!1,label:l="Job Type",style:i={}})=>{const d=p=>{const g=p.map(x=>String(x));t(g)};return n?s.jsx(hc,{}):s.jsx(Xp,{options:eV,value:e,onChange:d,placeholder:"Select job types...",label:l,disabled:r,style:i})},RC={usa:[{value:"new york, ny",label:"New York, NY"},{value:"houston, tx",label:"Houston, TX"},{value:"chicago, il",label:"Chicago, IL"},{value:"atlanta, ga",label:"Atlanta, GA"},{value:"los angeles, ca",label:"Los Angeles, CA"},{value:"dallas, tx",label:"Dallas, TX"},{value:"austin, tx",label:"Austin, TX"},{value:"boston, ma",label:"Boston, MA"},{value:"seattle, wa",label:"Seattle, WA"},{value:"charlotte, nc",label:"Charlotte, NC"},{value:"portland, or",label:"Portland, OR"},{value:"san francisco, ca",label:"San Francisco, CA"}],canada:[{value:"toronto, on",label:"Toronto, ON"},{value:"vancouver, bc",label:"Vancouver, BC"},{value:"montreal, qc",label:"Montreal, QC"},{value:"calgary, ab",label:"Calgary, AB"},{value:"ottawa, on",label:"Ottawa, ON"}],australia:[{value:"sydney, nsw",label:"Sydney, NSW"},{value:"melbourne, vic",label:"Melbourne, VIC"},{value:"brisbane, qld",label:"Brisbane, QLD"},{value:"perth, wa",label:"Perth, WA"}],uk:[{value:"london, uk",label:"London, UK"},{value:"birmingham, uk",label:"Birmingham, UK"},{value:"manchester, uk",label:"Manchester, UK"},{value:"liverpool, uk",label:"Liverpool, UK"}],germany:[{value:"berlin, de",label:"Berlin, DE"},{value:"munich, de",label:"Munich, DE"},{value:"frankfurt, de",label:"Frankfurt, DE"},{value:"hamburg, de",label:"Hamburg, DE"}],poland:[{value:"warsaw, pl",label:"Warsaw, PL"},{value:"krakow, pl",label:"Krakow, PL"},{value:"wroclaw, pl",label:"Wroclaw, PL"},{value:"poznan, pl",label:"Poznan, PL"}],italy:[{value:"rome, it",label:"Rome, IT"},{value:"milan, it",label:"Milan, IT"},{value:"naples, it",label:"Naples, IT"},{value:"turin, it",label:"Turin, IT"}],denmark:[{value:"copenhagen, dk",label:"Copenhagen, DK"},{value:"aarhus, dk",label:"Aarhus, DK"},{value:"odense, dk",label:"Odense, DK"},{value:"aalborg, dk",label:"Aalborg, DK"}],sweden:[{value:"stockholm, se",label:"Stockholm, SE"},{value:"gothenburg, se",label:"Gothenburg, SE"},{value:"malmo, se",label:"Malmo, SE"},{value:"uppsala, se",label:"Uppsala, SE"}],norway:[{value:"oslo, no",label:"Oslo, NO"},{value:"bergen, no",label:"Bergen, NO"},{value:"trondheim, no",label:"Trondheim, NO"},{value:"stavanger, no",label:"Stavanger, NO"}],finland:[{value:"helsinki, fi",label:"Helsinki, FI"},{value:"espoo, fi",label:"Espoo, FI"},{value:"tampere, fi",label:"Tampere, FI"},{value:"oulu, fi",label:"Oulu, FI"}],netherlands:[{value:"amsterdam, nl",label:"Amsterdam, NL"},{value:"rotterdam, nl",label:"Rotterdam, NL"},{value:"utrecht, nl",label:"Utrecht, NL"},{value:"eindhoven, nl",label:"Eindhoven, NL"}]},rV=({value:e=[],onChange:t,country:r="usa",disabled:n=!1,loading:l=!1,label:i="Locations",style:d={}})=>{const p=y=>{const w=y.map(j=>String(j));t(w)};if(l)return s.jsx(hc,{});const g=RC[r.toLowerCase()]||RC.usa,x=e.filter(y=>g.some(w=>w.value===y));return Vt.useEffect(()=>{x.length!==e.length&&t(x)},[r]),s.jsx(Xp,{options:g,value:x,onChange:p,placeholder:`Select locations in ${r.toUpperCase()}...`,label:i,disabled:n,style:d})},nV=({country:e,salaryBound:t,experienceLevels:r,remoteTypes:n,jobTypes:l,specificLocations:i,onClearFilter:d,style:p={}})=>{const g=B=>({1:"Internship",2:"Entry Level",3:"Associate",4:"Mid-Senior Level",5:"Director",6:"Executive"})[B]||`Level ${B}`,x=B=>({1:"On-site",2:"Remote",3:"Hybrid"})[B]||`Type ${B}`,y=B=>({F:"Full-time",P:"Part-time",C:"Contract",T:"Temporary",V:"Volunteer",I:"Internship",O:"Other"})[B]||B,w=B=>B.split(", ").map(D=>D.split(" ").map(U=>U.charAt(0).toUpperCase()+U.slice(1)).join(" ")).join(", "),j=[];if(e&&e!=="usa"&&j.push({type:"country",label:`Country: ${e.toUpperCase()}`,value:e,clearAction:()=>d("country")}),t&&j.push({type:"salary",label:`Salary: $${t.toLocaleString()}+`,value:t,clearAction:()=>d("salaryBound")}),r.forEach(B=>{j.push({type:"experience",label:g(B),value:B,clearAction:()=>d("experienceLevels",B)})}),n.forEach(B=>{j.push({type:"remote",label:x(B),value:B,clearAction:()=>d("remoteTypes",B)})}),l.forEach(B=>{j.push({type:"jobType",label:y(B),value:B,clearAction:()=>d("jobTypes",B)})}),i.forEach(B=>{j.push({type:"location",label:w(B),value:B,clearAction:()=>d("specificLocations",B)})}),j.length===0)return null;const _={marginTop:"16px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",...p},A={fontSize:f.typography.fontSize.base,fontWeight:"600",color:"#374151",marginBottom:"12px"},E={display:"flex",flexWrap:"wrap",gap:"8px"},P={display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"#eff6ff",color:"#1e40af",borderRadius:"20px",fontSize:f.typography.fontSize.xs,fontWeight:"500",border:"1px solid #bfdbfe"},z={background:"none",border:"none",padding:"2px",cursor:"pointer",color:"inherit",display:"flex",alignItems:"center",borderRadius:"50%",transition:"background-color 0.15s ease"};return s.jsxs("div",{style:_,children:[s.jsxs("div",{style:A,children:["Active Filters (",j.length,")"]}),s.jsx("div",{style:E,children:j.map((B,D)=>s.jsxs("div",{style:P,children:[s.jsx("span",{children:B.label}),s.jsx("button",{type:"button",onClick:B.clearAction,style:z,onMouseEnter:U=>{U.target.style.backgroundColor="rgba(0,0,0,0.1)"},onMouseLeave:U=>{U.target.style.backgroundColor="transparent"},children:s.jsx(cn,{size:12})})]},`${B.type}-${D}`))})]})},a1=10,Wd=({isOpen:e,onClose:t,getAuthToken:r})=>{const[n,l]=F.useState([]),[i,d]=F.useState(!0),[p,g]=F.useState(null),[x,y]=F.useState(1);F.useEffect(()=>{e&&(w(),y(1))},[e]);const w=async()=>{d(!0),g(null);try{const D=await r(),U=await fetch(`${Rn}/api/company/staffing-companies`,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(!U.ok)throw new Error("Failed to fetch staffing companies");const G=await U.json();l(G)}catch(D){g(D instanceof Error?D.message:"An error occurred")}finally{d(!1)}},j=D=>new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),{paginatedCompanies:_,totalPages:A}=F.useMemo(()=>{const D=(x-1)*a1,U=D+a1;return{paginatedCompanies:n.slice(D,U),totalPages:Math.ceil(n.length/a1)}},[n,x]),E=()=>{y(D=>Math.max(1,D-1))},P=()=>{y(D=>Math.min(A,D+1))},z=D=>D?D.startsWith("http://")||D.startsWith("https://")?D:`https://${D}`:"",B=async(D,U)=>{D.preventDefault(),D.stopPropagation();const G=z(U);if(window.electronAPI?.openExternalUrl)try{const $=await window.electronAPI.openExternalUrl(G);$.success||(console.error("Failed to open company URL:",$.error),window.open(G,"_blank","noopener,noreferrer"))}catch($){console.error("Error opening external URL:",$),window.open(G,"_blank","noopener,noreferrer")}else window.open(G,"_blank","noopener,noreferrer")};return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:t,children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",width:"100%",maxWidth:"900px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:f.typography.fontSize.xl,fontWeight:"600",color:"#1e293b"},children:"Staffing Companies Detected"}),!i&&n.length>0&&s.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:f.typography.fontSize.sm,color:"#64748b"},children:[n.length," ",n.length===1?"company":"companies"," found"]})]}),s.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b"},onMouseEnter:D=>D.currentTarget.style.backgroundColor="#f1f5f9",onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:s.jsx(cn,{size:24})})]}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[i&&s.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#64748b"},children:"Loading staffing companies..."}),p&&s.jsx("div",{style:{padding:"16px",backgroundColor:"#fef2f2",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.sm},children:p}),!i&&!p&&n.length===0&&s.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#64748b"},children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.base,margin:0},children:"No staffing companies detected yet."}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,marginTop:"8px",marginBottom:0},children:"When JobHuntr identifies staffing companies, they will appear here."})]}),!i&&!p&&n.length>0&&s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:_.map(D=>s.jsxs("div",{style:{padding:"20px",borderRadius:"8px",border:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[s.jsx("h3",{style:{margin:0,fontSize:f.typography.fontSize.lg,fontWeight:"600",color:"#1e293b"},children:D.company_name}),s.jsx("button",{type:"button",onClick:U=>B(U,D.company_website_url),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",color:"var(--accent-primary)",transition:"opacity 0.2s"},title:`Open ${D.company_name} on LinkedIn`,"aria-label":`Open ${D.company_name} on LinkedIn`,onMouseEnter:U=>U.currentTarget.style.opacity="0.7",onMouseLeave:U=>U.currentTarget.style.opacity="1",children:s.jsx($i,{size:16})})]}),s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs("p",{style:{fontSize:f.typography.fontSize.sm,color:"#475569",margin:0,lineHeight:"1.5"},children:[s.jsx("strong",{children:"Reason:"})," ",D.why_staffing_company]})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:f.typography.fontSize.xs,color:"#64748b"},children:[s.jsx(xs,{size:14}),s.jsxs("span",{children:["Discovered: ",j(D.created_at)]})]})]},D.id))})]}),!i&&!p&&A>1&&s.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{fontSize:f.typography.fontSize.sm,color:"#64748b"},children:["Page ",x," of ",A]}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsxs("button",{onClick:E,disabled:x===1,style:{padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:x===1?"#f1f5f9":"white",color:x===1?"#cbd5e1":"#475569",cursor:x===1?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:f.typography.fontSize.sm},onMouseEnter:D=>{x!==1&&(D.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:D=>{x!==1&&(D.currentTarget.style.backgroundColor="white")},children:[s.jsx(Fd,{size:16}),"Previous"]}),s.jsxs("button",{onClick:P,disabled:x===A,style:{padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",backgroundColor:x===A?"#f1f5f9":"white",color:x===A?"#cbd5e1":"#475569",cursor:x===A?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:f.typography.fontSize.sm},onMouseEnter:D=>{x!==A&&(D.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:D=>{x!==A&&(D.currentTarget.style.backgroundColor="white")},children:["Next",s.jsx(za,{size:16})]})]})]}),s.jsx("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"flex-end"},children:s.jsx(is,{onClick:t,variant:"secondary",children:"Close"})})]})}):null},iV=({expandedSections:e,onToggleSection:t,formData:r,isFiltersLoading:n,selectedResumeId:l,isSyncingKeywords:i,isSyncingBlacklist:d,onFormDataChange:p,onFieldBlur:g,onSyncKeywords:x,onSyncBlacklist:y,onClearFilter:w,getAuthToken:j})=>{const[_,A]=F.useState(!1),[E,P]=F.useState(!1);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Jobs that you are looking for",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Custom Search Criteria"}),s.jsx("textarea",{value:r.semanticInstructions,onChange:z=>p({semanticInstructions:z.target.value}),placeholder:"Add specific requirements or preferences for job filtering. For example: 'Focus on companies with good work-life balance', 'Avoid positions requiring more than 50% travel', 'Prefer startups with under 100 employees'...",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:z=>z.target.style.borderColor="var(--accent-primary)",onBlur:z=>{z.target.style.borderColor="#cbd5e1",g("semanticInstructions",z.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Job Title"}),s.jsx("textarea",{value:r.searchKeywords,onChange:z=>{const B=z.target.value;B.includes(",")&&(P(!0),setTimeout(()=>P(!1),3e3));const D=B.replace(/,/g,"");p({searchKeywords:D})},placeholder:"e.g., Software Engineer (single title only)",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${E?"#dc2626":"#cbd5e1"}`,borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:z=>{E||(z.target.style.borderColor="var(--accent-primary)")},onBlur:z=>{E||(z.target.style.borderColor="#cbd5e1"),g("searchKeywords",z.target.value)}}),E&&s.jsx("div",{style:{marginTop:"8px",fontSize:f.typography.fontSize.sm,color:"#dc2626"},children:"Only one job title is allowed. Commas are not permitted."}),(!r.searchKeywords||r.searchKeywords.trim()==="")&&l&&s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(is,{variant:"primary",size:"small",loading:i,onClick:x,children:i?"Syncing...":"Sync job title from resume"})})]}),s.jsxs("div",{className:"filters-grid",children:[s.jsx(GW,{value:r.country,loading:n,onChange:z=>{const B=z||"usa";p({country:B,specificLocations:[]}),g("country",B)},label:"Country"}),s.jsx(YW,{value:r.salaryBound,loading:n,onChange:z=>{p({salaryBound:z}),g("salaryBound",z)},label:"Minimum Salary"}),s.jsx(ZW,{value:r.experienceLevels,loading:n,onChange:z=>{p({experienceLevels:z}),g("experienceLevels",z)},label:"Experience Level"}),s.jsx(QW,{value:r.remoteTypes,loading:n,onChange:z=>{p({remoteTypes:z}),g("remoteTypes",z)},label:"Work Type"}),s.jsx(tV,{value:r.jobTypes,loading:n,onChange:z=>{p({jobTypes:z}),g("jobTypes",z)},label:"Job Type"}),s.jsx(rV,{value:r.specificLocations,country:r.country,loading:n,onChange:z=>{p({specificLocations:z}),g("specificLocations",z)},label:"Specific Locations"})]}),s.jsx(nV,{country:r.country,salaryBound:r.salaryBound,experienceLevels:r.experienceLevels,remoteTypes:r.remoteTypes,jobTypes:r.jobTypes,specificLocations:r.specificLocations,onClearFilter:w}),s.jsxs("div",{style:{marginTop:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Companies to Avoid (Blacklist)"}),s.jsx("textarea",{ref:z=>{if(z){z.style.height="auto";const B=Math.min(Math.max(z.scrollHeight,60),500);z.style.height=B+"px"}},value:r.blacklistCompanies,onChange:z=>{p({blacklistCompanies:z.target.value}),z.target.style.height="auto";const B=Math.min(Math.max(z.target.scrollHeight,60),500);z.target.style.height=B+"px"},placeholder:"Company A, Company B, Company C...",style:{width:"100%",minHeight:"60px",maxHeight:"500px",height:"60px",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"none",outline:"none",overflowY:"auto",lineHeight:"1.5",fontFamily:"inherit"},onFocus:z=>z.target.style.borderColor="var(--accent-primary)",onBlur:z=>{z.target.style.borderColor="#cbd5e1",g("blacklistCompanies",z.target.value)}}),(!r.blacklistCompanies||r.blacklistCompanies.trim()==="")&&l&&s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(is,{variant:"primary",size:"small",loading:d,onClick:y,children:d?"Syncing...":"Sync blacklist from resume"})}),s.jsx("p",{style:{fontSize:f.typography.fontSize.xs,color:"#64748b",marginTop:"6px",marginBottom:"0"},children:"Separate company names with commas. These companies will be excluded from job applications."})]}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipPreviouslySkippedJobs,onChange:z=>{p({skipPreviouslySkippedJobs:z.target.checked}),g("skipPreviouslySkippedJobs",z.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip previously skipped jobs"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipStaffingCompanies,onChange:z=>{p({skipStaffingCompanies:z.target.checked}),g("skipStaffingCompanies",z.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip staffing companies"})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>A(!0),style:{background:"none",border:"none",color:"var(--accent-primary)",fontSize:f.typography.fontSize.xs,cursor:"pointer",padding:"0",textDecoration:"underline",fontFamily:"inherit"},onMouseEnter:z=>z.currentTarget.style.opacity="0.7",onMouseLeave:z=>z.currentTarget.style.opacity="1",children:"View detected staffing companies"})})]})]}),s.jsx(Wd,{isOpen:_,onClose:()=>A(!1),getAuthToken:j})]})},sV=({expandedSections:e,onToggleSection:t,formData:r,onFormDataChange:n,onFieldBlur:l,isSyncingBlacklist:i,onSyncBlacklist:d,selectedResumeId:p,getAuthToken:g})=>{const[x,y]=F.useState(!1),[w,j]=F.useState(!1);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Jobs that you are looking for",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Custom Search Criteria"}),s.jsx("textarea",{value:r.semanticInstructions,onChange:_=>n({semanticInstructions:_.target.value}),placeholder:"Add specific requirements or preferences for job filtering. For example: 'Focus on companies with good work-life balance', 'Avoid positions requiring more than 50% travel', 'Prefer startups with under 100 employees'...",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("semanticInstructions",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:["Job Title ",s.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),s.jsx("input",{type:"text",value:r.searchKeywords,onChange:_=>{const A=_.target.value;A.includes(",")&&(j(!0),setTimeout(()=>j(!1),3e3));const E=A.replace(/,/g,"");n({searchKeywords:E})},placeholder:"e.g., Software Engineer (single title only)",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${w?"#dc2626":"#cbd5e1"}`,borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>{w||(_.target.style.borderColor="var(--accent-primary)")},onBlur:_=>{w||(_.target.style.borderColor="#cbd5e1"),l("searchKeywords",_.target.value)}}),w&&s.jsx("div",{style:{marginTop:"8px",fontSize:f.typography.fontSize.sm,color:"#dc2626"},children:"Only one job title is allowed. Commas are not permitted."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Location"}),s.jsx("input",{type:"text",value:r.location,onChange:_=>n({location:_.target.value}),placeholder:"e.g., San Francisco, CA or New York, NY",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("location",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Date Posted"}),s.jsxs("select",{value:r.datePosted||"1",onChange:_=>{const A=_.target.value;n({datePosted:A}),l("datePosted",A)},style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none",cursor:"pointer"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>_.target.style.borderColor="#cbd5e1",children:[s.jsx("option",{value:"1",children:"Last 24 hours"}),s.jsx("option",{value:"3",children:"Last 3 days"}),s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"14",children:"Last 14 days"})]})]}),s.jsx("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"32px 0 24px 0"}}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("label",{style:{fontSize:f.typography.fontSize.base,fontWeight:"500",color:"#374151"},children:"Blacklist Companies"}),p&&s.jsx(is,{onClick:d,disabled:i,style:{fontSize:f.typography.fontSize.sm,padding:"4px 8px"},children:i?"Syncing...":"Sync from Resume"})]}),s.jsx("textarea",{value:r.blacklistCompanies,onChange:_=>n({blacklistCompanies:_.target.value}),placeholder:"Enter company names to avoid, one per line",rows:4,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("blacklistCompanies",_.target.value)}})]}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipPreviouslySkippedJobs,onChange:_=>{const A=_.target.checked;n({skipPreviouslySkippedJobs:A}),l("skipPreviouslySkippedJobs",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip previously skipped jobs"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipStaffingCompanies,onChange:_=>{const A=_.target.checked;n({skipStaffingCompanies:A}),l("skipStaffingCompanies",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip staffing companies"})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>y(!0),style:{background:"none",border:"none",color:"var(--accent-primary)",fontSize:f.typography.fontSize.xs,cursor:"pointer",padding:"0",textDecoration:"underline",fontFamily:"inherit"},onMouseEnter:_=>_.currentTarget.style.opacity="0.7",onMouseLeave:_=>_.currentTarget.style.opacity="1",children:"View detected staffing companies"})})]})]}),s.jsx(Wd,{isOpen:x,onClose:()=>y(!1),getAuthToken:g||(()=>Promise.resolve(null))})]})},oV=({expandedSections:e,onToggleSection:t,formData:r,onFormDataChange:n,onFieldBlur:l,isSyncingBlacklist:i,onSyncBlacklist:d,selectedResumeId:p,getAuthToken:g})=>{const[x,y]=F.useState(!1),[w,j]=F.useState(!1);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Jobs that you are looking for",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Custom Search Criteria"}),s.jsx("textarea",{value:r.semanticInstructions,onChange:_=>n({semanticInstructions:_.target.value}),placeholder:"Add specific requirements or preferences for job filtering. For example: 'Focus on companies with good work-life balance', 'Avoid positions requiring more than 50% travel', 'Prefer startups with under 100 employees'...",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("semanticInstructions",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:["Job Title ",s.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),s.jsx("input",{type:"text",value:r.searchKeywords,onChange:_=>{const A=_.target.value;A.includes(",")&&(j(!0),setTimeout(()=>j(!1),3e3));const E=A.replace(/,/g,"");n({searchKeywords:E})},placeholder:"e.g., Software Engineer (single title only)",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${w?"#dc2626":"#cbd5e1"}`,borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>{w||(_.target.style.borderColor="var(--accent-primary)")},onBlur:_=>{w||(_.target.style.borderColor="#cbd5e1"),l("searchKeywords",_.target.value)}}),w&&s.jsx("div",{style:{marginTop:"8px",fontSize:f.typography.fontSize.sm,color:"#dc2626"},children:"Only one job title is allowed. Commas are not permitted."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Location"}),s.jsx("input",{type:"text",value:r.location,onChange:_=>n({location:_.target.value}),placeholder:"e.g., San Francisco, CA or New York, NY",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("location",_.target.value)}})]}),s.jsx("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"32px 0 24px 0"}}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("label",{style:{fontSize:f.typography.fontSize.base,fontWeight:"500",color:"#374151"},children:"Blacklist Companies"}),p&&s.jsx(is,{onClick:d,disabled:i,style:{fontSize:f.typography.fontSize.sm,padding:"4px 8px"},children:i?"Syncing...":"Sync from Resume"})]}),s.jsx("textarea",{value:r.blacklistCompanies,onChange:_=>n({blacklistCompanies:_.target.value}),placeholder:"Enter company names to avoid, one per line",rows:4,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("blacklistCompanies",_.target.value)}})]}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipPreviouslySkippedJobs,onChange:_=>{const A=_.target.checked;n({skipPreviouslySkippedJobs:A}),l("skipPreviouslySkippedJobs",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip previously skipped jobs"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipStaffingCompanies,onChange:_=>{const A=_.target.checked;n({skipStaffingCompanies:A}),l("skipStaffingCompanies",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip staffing companies"})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>y(!0),style:{background:"none",border:"none",color:"var(--accent-primary)",fontSize:f.typography.fontSize.xs,cursor:"pointer",padding:"0",textDecoration:"underline",fontFamily:"inherit"},onMouseEnter:_=>_.currentTarget.style.opacity="0.7",onMouseLeave:_=>_.currentTarget.style.opacity="1",children:"View detected staffing companies"})})]})]}),s.jsx(Wd,{isOpen:x,onClose:()=>y(!1),getAuthToken:g})]})},aV=({expandedSections:e,onToggleSection:t,formData:r,onFormDataChange:n,onFieldBlur:l,isSyncingBlacklist:i,onSyncBlacklist:d,selectedResumeId:p,getAuthToken:g})=>{const[x,y]=F.useState(!1),[w,j]=F.useState(!1);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Jobs that you are looking for",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Custom Search Criteria"}),s.jsx("textarea",{value:r.semanticInstructions,onChange:_=>n({semanticInstructions:_.target.value}),placeholder:"Add specific requirements or preferences for job filtering. For example: 'Focus on companies with good work-life balance', 'Avoid positions requiring more than 50% travel', 'Prefer startups with under 100 employees'...",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("semanticInstructions",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:["Job Title ",s.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),s.jsx("input",{type:"text",value:r.searchKeywords,onChange:_=>{const A=_.target.value;A.includes(",")&&(j(!0),setTimeout(()=>j(!1),3e3));const E=A.replace(/,/g,"");n({searchKeywords:E})},placeholder:"e.g., Software Engineer (single title only)",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${w?"#dc2626":"#cbd5e1"}`,borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>{w||(_.target.style.borderColor="var(--accent-primary)")},onBlur:_=>{w||(_.target.style.borderColor="#cbd5e1"),l("searchKeywords",_.target.value)}}),w&&s.jsx("div",{style:{marginTop:"8px",fontSize:f.typography.fontSize.sm,color:"#dc2626"},children:"Only one job title is allowed. Commas are not permitted."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Location"}),s.jsx("input",{type:"text",value:r.location,onChange:_=>n({location:_.target.value}),placeholder:"e.g., San Francisco, CA or New York, NY",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("location",_.target.value)}})]}),s.jsx("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"32px 0 24px 0"}}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("label",{style:{fontSize:f.typography.fontSize.base,fontWeight:"500",color:"#374151"},children:"Blacklist Companies"}),p&&s.jsx(is,{onClick:d,disabled:i,style:{fontSize:f.typography.fontSize.sm,padding:"4px 8px"},children:i?"Syncing...":"Sync from Resume"})]}),s.jsx("textarea",{value:r.blacklistCompanies,onChange:_=>n({blacklistCompanies:_.target.value}),placeholder:"Enter company names to avoid, one per line",rows:4,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("blacklistCompanies",_.target.value)}})]}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipPreviouslySkippedJobs,onChange:_=>{const A=_.target.checked;n({skipPreviouslySkippedJobs:A}),l("skipPreviouslySkippedJobs",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip previously skipped jobs"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipStaffingCompanies,onChange:_=>{const A=_.target.checked;n({skipStaffingCompanies:A}),l("skipStaffingCompanies",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip staffing companies"})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>y(!0),style:{background:"none",border:"none",color:"var(--accent-primary)",fontSize:f.typography.fontSize.xs,cursor:"pointer",padding:"0",textDecoration:"underline",fontFamily:"inherit"},onMouseEnter:_=>_.currentTarget.style.opacity="0.7",onMouseLeave:_=>_.currentTarget.style.opacity="1",children:"View detected staffing companies"})})]})]}),s.jsx(Wd,{isOpen:x,onClose:()=>y(!1),getAuthToken:g||(()=>Promise.resolve(null))})]})},lV=({expandedSections:e,onToggleSection:t,formData:r,onFormDataChange:n,onFieldBlur:l,isSyncingBlacklist:i,onSyncBlacklist:d,selectedResumeId:p,getAuthToken:g})=>{const[x,y]=F.useState(!1),[w,j]=F.useState(!1);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Jobs that you are looking for",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Custom Search Criteria"}),s.jsx("textarea",{value:r.semanticInstructions,onChange:_=>n({semanticInstructions:_.target.value}),placeholder:"Add specific requirements or preferences for job filtering. For example: 'Prioritize fully remote Dice listings', 'Focus on mid-size product companies', 'Avoid contract-only roles'...",rows:3,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("semanticInstructions",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:["Job Title ",s.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),s.jsx("input",{type:"text",value:r.searchKeywords,onChange:_=>{const A=_.target.value;A.includes(",")&&(j(!0),setTimeout(()=>j(!1),3e3));const E=A.replace(/,/g,"");n({searchKeywords:E})},placeholder:"e.g., Senior Data Engineer (single title only)",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${w?"#dc2626":"#cbd5e1"}`,borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>{w||(_.target.style.borderColor="var(--accent-primary)")},onBlur:_=>{w||(_.target.style.borderColor="#cbd5e1"),l("searchKeywords",_.target.value)}}),w&&s.jsx("div",{style:{marginTop:"8px",fontSize:f.typography.fontSize.sm,color:"#dc2626"},children:"Only one job title is allowed. Commas are not permitted."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Location"}),s.jsx("input",{type:"text",value:r.location,onChange:_=>n({location:_.target.value}),placeholder:"e.g., Austin, TX or Remote (USA)",style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("location",_.target.value)}})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},children:"Date Posted"}),s.jsxs("select",{value:r.datePosted||"1",onChange:_=>{const A=_.target.value;n({datePosted:A}),l("datePosted",A)},style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none",cursor:"pointer"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>_.target.style.borderColor="#cbd5e1",children:[s.jsx("option",{value:"1",children:"Last 24 hours"}),s.jsx("option",{value:"3",children:"Last 3 days"}),s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"14",children:"Last 14 days"})]})]}),s.jsx("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"32px 0 24px 0"}}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("label",{style:{fontSize:f.typography.fontSize.base,fontWeight:"500",color:"#374151"},children:"Blacklist Companies"}),p&&s.jsx(is,{onClick:d,disabled:i,style:{fontSize:f.typography.fontSize.sm,padding:"4px 8px"},children:i?"Syncing...":"Sync from Resume"})]}),s.jsx("textarea",{value:r.blacklistCompanies,onChange:_=>n({blacklistCompanies:_.target.value}),placeholder:"Enter company names to avoid, one per line",rows:4,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},onFocus:_=>_.target.style.borderColor="var(--accent-primary)",onBlur:_=>{_.target.style.borderColor="#cbd5e1",l("blacklistCompanies",_.target.value)}})]}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipPreviouslySkippedJobs,onChange:_=>{const A=_.target.checked;n({skipPreviouslySkippedJobs:A}),l("skipPreviouslySkippedJobs",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip previously skipped jobs"})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("input",{type:"checkbox",checked:r.skipStaffingCompanies,onChange:_=>{const A=_.target.checked;n({skipStaffingCompanies:A}),l("skipStaffingCompanies",A)},style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--accent-primary)"}}),s.jsx("span",{children:"Skip staffing companies"})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>y(!0),style:{background:"none",border:"none",color:"var(--accent-primary)",fontSize:f.typography.fontSize.xs,cursor:"pointer",padding:"0",textDecoration:"underline",fontFamily:"inherit"},onMouseEnter:_=>_.currentTarget.style.opacity="0.7",onMouseLeave:_=>_.currentTarget.style.opacity="1",children:"View detected staffing companies"})})]})]}),s.jsx(Wd,{isOpen:x,onClose:()=>y(!1),getAuthToken:g||(()=>Promise.resolve(null))})]})},cV=({selectedTemplateId:e,onTemplateSelect:t,onInstructionLoad:r,onPreview:n,onCreateNew:l,refreshTrigger:i})=>{const[d,p]=F.useState([]),[g,x]=F.useState(!1);F.useEffect(()=>{y()},[]),F.useEffect(()=>{i&&y()},[i]);const y=async()=>{try{x(!0);const{coverLetterApiService:E}=await Qt(async()=>{const{coverLetterApiService:D}=await Promise.resolve().then(()=>Ip);return{coverLetterApiService:D}},void 0,import.meta.url),B=((await E.getTemplates()).templates||[]).filter(D=>D.example_cover_letter_result&&D.example_cover_letter_result.trim()!=="");B.sort((D,U)=>new Date(U.created_at).getTime()-new Date(D.created_at).getTime()),p(B)}catch(E){console.error("Failed to load cover letter templates:",E)}finally{x(!1)}},w=async E=>{if(t(E),r&&E.id)try{const{coverLetterApiService:P}=await Qt(async()=>{const{coverLetterApiService:B}=await Promise.resolve().then(()=>Ip);return{coverLetterApiService:B}},void 0,import.meta.url),z=await P.getTemplate(E.id);z.success&&z.template.user_instruction?r(z.template.user_instruction):r("")}catch(P){console.error("Failed to load template instruction:",P),r("")}},j=()=>{l()},A=[...d.map(E=>({value:E.id,label:E.name})),{value:"create-new",label:"Create New Cover Letter Template"}];return s.jsx(Zp,{options:A,value:e,placeholder:g?"Loading templates...":"Select cover letter template",onChange:E=>{if(E==="create-new")j();else if(E===null)t(null),r&&r("");else{const P=d.find(z=>z.id===E);P&&w(P)}},style:{width:"100%"}})},uV=({expandedSections:e,onToggleSection:t,userPreferences:r,selectedCoverLetterTemplateId:n,onCoverLetterTemplateSelect:l,onCoverLetterTemplatePreview:i,onCreateNewCoverLetterTemplate:d,refreshTrigger:p})=>{const[g,x]=Vt.useState("");return Vt.useEffect(()=>{(async()=>{if(n)try{console.log("Auto-loading instructions for template:",n);const{coverLetterApiService:w}=await Qt(async()=>{const{coverLetterApiService:_}=await Promise.resolve().then(()=>Ip);return{coverLetterApiService:_}},void 0,import.meta.url),j=await w.getTemplate(n);j.success&&j.template.user_instruction?(console.log("Auto-loaded user instruction:",j.template.user_instruction),x(j.template.user_instruction)):(console.log("No user instruction found for template"),x(""))}catch(w){console.error(" Failed to auto-load template instruction:",w),x("")}else x("")})()},[n]),!r.generateCoverLetter&&!r.sendConnectionRequest?null:s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Personalized application",icon:$o,section:"personalized",expandedSections:e,onToggle:t}),e.personalized&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[r.generateCoverLetter&&s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(wi,{style:{marginBottom:"16px",color:f.colors.neutral[800]},children:"Cover Letter Generation"}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx(AC,{as:"label",style:{display:"block",marginBottom:"12px",color:f.colors.neutral[700]},children:"Cover Letter Template"}),s.jsx(cV,{selectedTemplateId:n,onTemplateSelect:l,onInstructionLoad:x,onPreview:i,onCreateNew:d,refreshTrigger:p})]}),n&&s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[s.jsx(AC,{as:"label",style:{color:f.colors.neutral[700]},children:"Instructions to generate personalized cover letter for each application"}),s.jsx(ot,{variant:"secondary",size:"sm",onClick:()=>{const y=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter",templateId:n,step:3}});window.dispatchEvent(y)},style:{fontSize:f.typography.fontSize.sm,padding:`${f.spacing.xs} ${f.spacing.sm}`},children:"Edit Instructions"})]}),s.jsx("div",{style:{width:"100%",padding:"12px 16px",backgroundColor:f.colors.neutral[50],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:"6px",color:g?f.colors.neutral[800]:f.colors.neutral[600],fontSize:f.typography.fontSize.base,minHeight:"80px",fontStyle:g?"normal":"italic",whiteSpace:"pre-wrap"},children:g||"Loading instructions from template..."})]})]}),r.sendConnectionRequest&&s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx(wi,{style:{marginBottom:"16px",color:f.colors.neutral[800]},children:"Connection Note to Hiring Team"}),s.jsx(Ct,{style:{color:f.colors.neutral[500],marginBottom:"16px"},children:"Since you enabled 'Connect to hiring team after submission', you can add a note to the hiring team. Max length is 150 characters. (Optional)"}),s.jsx("textarea",{placeholder:"e.g. Hi {first_name}, I've applied for the {job_title} position. Please let me know your",rows:3,maxLength:150,style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:`1px solid ${f.colors.neutral[300]}`,borderRadius:"6px",color:f.colors.neutral[800],fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none",marginBottom:"12px"},onFocus:y=>y.target.style.borderColor="var(--accent-primary)",onBlur:y=>y.target.style.borderColor=f.colors.neutral[300]}),s.jsxs(ir,{style:{color:f.colors.neutral[500]},children:["I will replace ","{first_name}"," and ","{job_title}"," with the actual values. Please note that if LinkedIn may limit the number of messages you can send to 3rd connections."]})]})]})]})},dV=({title:e,onSave:t,disabled:r=!1,maxLength:n=100,placeholder:l="Enter title...",style:i={},titleStyle:d={},subtitle:p,subtitleStyle:g={}})=>{const[x,y]=F.useState(!1),[w,j]=F.useState(e),[_,A]=F.useState(!1),E=F.useRef(null);F.useEffect(()=>{j(e)},[e]),F.useEffect(()=>{x&&E.current&&(E.current.focus(),E.current.select())},[x]);const P=()=>{r||y(!0)},z=()=>{const T=w.trim();T&&T!==e&&t(T),y(!1)},B=()=>{j(e),y(!1)},D=T=>{T.key==="Enter"?z():T.key==="Escape"&&B()},U={display:"flex",alignItems:"flex-start",gap:"8px",...i},G={flex:1,minWidth:0},$={fontSize:f.typography.fontSize.h2,fontWeight:"bold",margin:"0",color:"#1e293b",lineHeight:"1.2",...d},re={...$,width:"100%",border:"2px solid #60a5fa",borderRadius:"4px",padding:"4px 8px",backgroundColor:"white",outline:"none"},Q={background:"none",border:"none",padding:"4px",cursor:r?"not-allowed":"pointer",color:"#64748b",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s ease",opacity:r?.5:_?1:.6},H={background:"none",border:"none",padding:"4px",cursor:"pointer",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.15s ease"},Y={color:"#64748b",margin:"4px 0 0 0",fontSize:f.typography.fontSize.base,lineHeight:"1.4",...g};return s.jsxs("div",{style:U,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[s.jsxs("div",{style:G,children:[x?s.jsx("input",{ref:E,type:"text",value:w,onChange:T=>j(T.target.value),onKeyDown:D,onBlur:z,placeholder:l,maxLength:n,style:re}):s.jsx("h1",{style:$,onClick:P,children:e||l}),p&&!x&&s.jsx("p",{style:Y,children:p})]}),s.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:x?s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:z,style:{...H,color:"#16a34a"},onMouseEnter:T=>{T.target.style.backgroundColor="#f0fdf4"},onMouseLeave:T=>{T.target.style.backgroundColor="transparent"},children:s.jsx(Ia,{size:16})}),s.jsx("button",{type:"button",onClick:B,style:{...H,color:"#dc2626"},onMouseEnter:T=>{T.target.style.backgroundColor="#fef2f2"},onMouseLeave:T=>{T.target.style.backgroundColor="transparent"},children:s.jsx(cn,{size:16})})]}):s.jsx("button",{type:"button",onClick:P,disabled:r,style:Q,onMouseEnter:T=>{r||(T.target.style.backgroundColor="#f1f5f9")},onMouseLeave:T=>{T.target.style.backgroundColor="transparent"},children:s.jsx(Jw,{size:16})})})]})},yc=({runName:e,onRunNameSave:t,savingStatus:r,lastSaveTime:n,workflowId:l,platform:i})=>{const p=(()=>{const g=i||l||"";return g==="indeed"||g==="indeed-search"?"./other_logos/Indeed.png":g.startsWith("linkedin")?"./other_logos/linkedin.png":g==="ziprecruiter"||g==="ziprecruiter-search"?"./other_logos/Ziprecruiter.png":g==="glassdoor"||g==="glassdoor-search"?"./other_logos/Glassdoor.png":g==="dice"||g==="dice-search"?"./other_logos/Dice.png":g==="autonomous"||g==="autonomous-auto-search"?"./logo.png":null})();return s.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"stretch",gap:"12px"},children:[p&&s.jsx("div",{style:{display:"flex",alignItems:"center",width:"42px",height:"42px",flexShrink:0},children:s.jsx("img",{src:p,alt:"Platform logo",style:{width:"100%",height:"100%",objectFit:"contain"}})}),s.jsx("div",{style:{flex:1},children:s.jsx(dV,{title:e,onSave:t,subtitle:"Configure your agent run settings and let AI do the work",placeholder:"Enter run name...",maxLength:100})})]}),(r!=="idle"||n)&&s.jsxs("div",{style:{marginTop:"12px",display:"flex",alignItems:"center",gap:"16px",fontSize:f.typography.fontSize.base,color:"#64748b"},children:[r!=="idle"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[r==="saving"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"12px",height:"12px",border:"2px solid #e2e8f0",borderTop:"2px solid var(--accent-primary)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:"var(--accent-primary)"},children:"Saving..."})]}),r==="saved"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"#10b981",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{width:"6px",height:"3px",borderBottom:"2px solid white",borderLeft:"2px solid white",transform:"rotate(-45deg)",marginTop:"-1px"}})}),s.jsx("span",{style:{color:"#10b981"},children:"Saved"})]}),r==="error"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"#ef4444",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.xxs,fontWeight:"bold"},children:"!"}),s.jsx("span",{style:{color:"#ef4444"},children:"Save failed"})]})]}),n&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[s.jsx("span",{children:"Last saved:"}),s.jsx("span",{style:{color:"#9ca3af",fontWeight:"400"},children:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]})};function fV(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const hV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gV={};function EC(e,t){return(gV.jsx?pV:hV).test(e)}const mV=/[ \t\n\f\r]/g;function yV(e){return typeof e=="object"?e.type==="text"?IC(e.value):!1:IC(e)}function IC(e){return e.replace(mV,"")===""}class Vd{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}}Vd.prototype.normal={};Vd.prototype.property={};Vd.prototype.space=void 0;function t7(e,t){const r={},n={};for(const l of e)Object.assign(r,l.property),Object.assign(n,l.normal);return new Vd(r,n,t)}function zb(e){return e.toLowerCase()}class ui{constructor(t,r){this.attribute=r,this.property=t}}ui.prototype.attribute="";ui.prototype.booleanish=!1;ui.prototype.boolean=!1;ui.prototype.commaOrSpaceSeparated=!1;ui.prototype.commaSeparated=!1;ui.prototype.defined=!1;ui.prototype.mustUseProperty=!1;ui.prototype.number=!1;ui.prototype.overloadedBoolean=!1;ui.prototype.property="";ui.prototype.spaceSeparated=!1;ui.prototype.space=void 0;let vV=0;const ur=Oa(),yn=Oa(),Bb=Oa(),bt=Oa(),Fr=Oa(),Vl=Oa(),bi=Oa();function Oa(){return 2**++vV}const Pb=Object.freeze(Object.defineProperty({__proto__:null,boolean:ur,booleanish:yn,commaOrSpaceSeparated:bi,commaSeparated:Vl,number:bt,overloadedBoolean:Bb,spaceSeparated:Fr},Symbol.toStringTag,{value:"Module"})),l1=Object.keys(Pb);class d_ extends ui{constructor(t,r,n,l){let i=-1;if(super(t,r),zC(this,"space",l),typeof n=="number")for(;++i<l1.length;){const d=l1[i];zC(this,l1[i],(n&Pb[d])===Pb[d])}}}d_.prototype.defined=!0;function zC(e,t,r){r&&(e[t]=r)}function vc(e){const t={},r={};for(const[n,l]of Object.entries(e.properties)){const i=new d_(n,e.transform(e.attributes||{},n),l,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[zb(n)]=n,r[zb(i.attribute)]=n}return new Vd(t,r,e.space)}const r7=vc({properties:{ariaActiveDescendant:null,ariaAtomic:yn,ariaAutoComplete:null,ariaBusy:yn,ariaChecked:yn,ariaColCount:bt,ariaColIndex:bt,ariaColSpan:bt,ariaControls:Fr,ariaCurrent:null,ariaDescribedBy:Fr,ariaDetails:null,ariaDisabled:yn,ariaDropEffect:Fr,ariaErrorMessage:null,ariaExpanded:yn,ariaFlowTo:Fr,ariaGrabbed:yn,ariaHasPopup:null,ariaHidden:yn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Fr,ariaLevel:bt,ariaLive:null,ariaModal:yn,ariaMultiLine:yn,ariaMultiSelectable:yn,ariaOrientation:null,ariaOwns:Fr,ariaPlaceholder:null,ariaPosInSet:bt,ariaPressed:yn,ariaReadOnly:yn,ariaRelevant:null,ariaRequired:yn,ariaRoleDescription:Fr,ariaRowCount:bt,ariaRowIndex:bt,ariaRowSpan:bt,ariaSelected:yn,ariaSetSize:bt,ariaSort:null,ariaValueMax:bt,ariaValueMin:bt,ariaValueNow:bt,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function n7(e,t){return t in e?e[t]:t}function i7(e,t){return n7(e,t.toLowerCase())}const xV=vc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vl,acceptCharset:Fr,accessKey:Fr,action:null,allow:null,allowFullScreen:ur,allowPaymentRequest:ur,allowUserMedia:ur,alt:null,as:null,async:ur,autoCapitalize:null,autoComplete:Fr,autoFocus:ur,autoPlay:ur,blocking:Fr,capture:null,charSet:null,checked:ur,cite:null,className:Fr,cols:bt,colSpan:null,content:null,contentEditable:yn,controls:ur,controlsList:Fr,coords:bt|Vl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ur,defer:ur,dir:null,dirName:null,disabled:ur,download:Bb,draggable:yn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ur,formTarget:null,headers:Fr,height:bt,hidden:Bb,high:bt,href:null,hrefLang:null,htmlFor:Fr,httpEquiv:Fr,id:null,imageSizes:null,imageSrcSet:null,inert:ur,inputMode:null,integrity:null,is:null,isMap:ur,itemId:null,itemProp:Fr,itemRef:Fr,itemScope:ur,itemType:Fr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ur,low:bt,manifest:null,max:null,maxLength:bt,media:null,method:null,min:null,minLength:bt,multiple:ur,muted:ur,name:null,nonce:null,noModule:ur,noValidate:ur,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ur,optimum:bt,pattern:null,ping:Fr,placeholder:null,playsInline:ur,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ur,referrerPolicy:null,rel:Fr,required:ur,reversed:ur,rows:bt,rowSpan:bt,sandbox:Fr,scope:null,scoped:ur,seamless:ur,selected:ur,shadowRootClonable:ur,shadowRootDelegatesFocus:ur,shadowRootMode:null,shape:null,size:bt,sizes:null,slot:null,span:bt,spellCheck:yn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:bt,step:null,style:null,tabIndex:bt,target:null,title:null,translate:null,type:null,typeMustMatch:ur,useMap:null,value:yn,width:bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Fr,axis:null,background:null,bgColor:null,border:bt,borderColor:null,bottomMargin:bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ur,declare:ur,event:null,face:null,frame:null,frameBorder:null,hSpace:bt,leftMargin:bt,link:null,longDesc:null,lowSrc:null,marginHeight:bt,marginWidth:bt,noResize:ur,noHref:ur,noShade:ur,noWrap:ur,object:null,profile:null,prompt:null,rev:null,rightMargin:bt,rules:null,scheme:null,scrolling:yn,standby:null,summary:null,text:null,topMargin:bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ur,disableRemotePlayback:ur,prefix:null,property:null,results:bt,security:null,unselectable:null},space:"html",transform:i7}),bV=vc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:bi,accentHeight:bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:bt,amplitude:bt,arabicForm:null,ascent:bt,attributeName:null,attributeType:null,azimuth:bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:bt,by:null,calcMode:null,capHeight:bt,className:Fr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:bt,diffuseConstant:bt,direction:null,display:null,dur:null,divisor:bt,dominantBaseline:null,download:ur,dx:null,dy:null,edgeMode:null,editable:null,elevation:bt,enableBackground:null,end:null,event:null,exponent:bt,externalResourcesRequired:null,fill:null,fillOpacity:bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vl,g2:Vl,glyphName:Vl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:bt,horizOriginX:bt,horizOriginY:bt,id:null,ideographic:bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:bt,k:bt,k1:bt,k2:bt,k3:bt,k4:bt,kernelMatrix:bi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:bt,overlineThickness:bt,paintOrder:null,panose1:null,path:null,pathLength:bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Fr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:bt,pointsAtY:bt,pointsAtZ:bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:bi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:bi,rev:bi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:bi,requiredFeatures:bi,requiredFonts:bi,requiredFormats:bi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:bt,specularExponent:bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:bt,strikethroughThickness:bt,string:null,stroke:null,strokeDashArray:bi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:bt,strokeOpacity:bt,strokeWidth:null,style:null,surfaceScale:bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:bi,tabIndex:bt,tableValues:null,target:null,targetX:bt,targetY:bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:bi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:bt,underlineThickness:bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:bt,values:null,vAlphabetic:bt,vMathematical:bt,vectorEffect:null,vHanging:bt,vIdeographic:bt,version:null,vertAdvY:bt,vertOriginX:bt,vertOriginY:bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:n7}),s7=vc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),o7=vc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:i7}),a7=vc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),wV={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},_V=/[A-Z]/g,BC=/-[a-z]/g,SV=/^data[-\w.:]+$/i;function kV(e,t){const r=zb(t);let n=t,l=ui;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&SV.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(BC,MV);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!BC.test(i)){let d=i.replace(_V,jV);d.charAt(0)!=="-"&&(d="-"+d),t="data"+d}}l=d_}return new l(n,t)}function jV(e){return"-"+e.toLowerCase()}function MV(e){return e.charAt(1).toUpperCase()}const CV=t7([r7,xV,s7,o7,a7],"html"),f_=t7([r7,bV,s7,o7,a7],"svg");function TV(e){return e.join(" ").trim()}var Sl={},c1,PC;function AV(){if(PC)return c1;PC=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,d=/^[;\s]*/,p=/^\s+|\s+$/g,g=`
`,x="/",y="*",w="",j="comment",_="declaration";c1=function(E,P){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];P=P||{};var z=1,B=1;function D(c){var h=c.match(t);h&&(z+=h.length);var v=c.lastIndexOf(g);B=~v?c.length-v:B+c.length}function U(){var c={line:z,column:B};return function(h){return h.position=new G(c),Q(),h}}function G(c){this.start=c,this.end={line:z,column:B},this.source=P.source}G.prototype.content=E;function $(c){var h=new Error(P.source+":"+z+":"+B+": "+c);if(h.reason=c,h.filename=P.source,h.line=z,h.column=B,h.source=E,!P.silent)throw h}function re(c){var h=c.exec(E);if(h){var v=h[0];return D(v),E=E.slice(v.length),h}}function Q(){re(r)}function H(c){var h;for(c=c||[];h=Y();)h!==!1&&c.push(h);return c}function Y(){var c=U();if(!(x!=E.charAt(0)||y!=E.charAt(1))){for(var h=2;w!=E.charAt(h)&&(y!=E.charAt(h)||x!=E.charAt(h+1));)++h;if(h+=2,w===E.charAt(h-1))return $("End of comment missing");var v=E.slice(2,h-2);return B+=2,D(v),E=E.slice(h),B+=2,c({type:j,comment:v})}}function T(){var c=U(),h=re(n);if(h){if(Y(),!re(l))return $("property missing ':'");var v=re(i),b=c({type:_,property:A(h[0].replace(e,w)),value:v?A(v[0].replace(e,w)):w});return re(d),b}}function o(){var c=[];H(c);for(var h;h=T();)h!==!1&&(c.push(h),H(c));return c}return Q(),o()};function A(E){return E?E.replace(p,w):w}return c1}var NC;function RV(){if(NC)return Sl;NC=1;var e=Sl&&Sl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.default=r;var t=e(AV());function r(n,l){var i=null;if(!n||typeof n!="string")return i;var d=(0,t.default)(n),p=typeof l=="function";return d.forEach(function(g){if(g.type==="declaration"){var x=g.property,y=g.value;p?l(x,y,g):y&&(i=i||{},i[x]=y)}}),i}return Sl}var Pu={},DC;function EV(){if(DC)return Pu;DC=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,i=function(x){return!x||r.test(x)||e.test(x)},d=function(x,y){return y.toUpperCase()},p=function(x,y){return"".concat(y,"-")},g=function(x,y){return y===void 0&&(y={}),i(x)?x:(x=x.toLowerCase(),y.reactCompat?x=x.replace(l,p):x=x.replace(n,p),x.replace(t,d))};return Pu.camelCase=g,Pu}var Nu,LC;function IV(){if(LC)return Nu;LC=1;var e=Nu&&Nu.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},t=e(RV()),r=EV();function n(l,i){var d={};return!l||typeof l!="string"||(0,t.default)(l,function(p,g){p&&g&&(d[(0,r.camelCase)(p,i)]=g)}),d}return n.default=n,Nu=n,Nu}var zV=IV();const BV=Bp(zV),l7=c7("end"),h_=c7("start");function c7(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function PV(e){const t=h_(e),r=l7(e);if(t&&r)return{start:t,end:r}}function ad(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?OC(e.position):"start"in e||"end"in e?OC(e):"line"in e||"column"in e?Nb(e):""}function Nb(e){return FC(e&&e.line)+":"+FC(e&&e.column)}function OC(e){return Nb(e&&e.start)+"-"+Nb(e&&e.end)}function FC(e){return e&&typeof e=="number"?e:1}class Kn extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let l="",i={},d=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?l=t:!i.cause&&t&&(d=!0,l=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const g=n.indexOf(":");g===-1?i.ruleId=n:(i.source=n.slice(0,g),i.ruleId=n.slice(g+1))}if(!i.place&&i.ancestors&&i.ancestors){const g=i.ancestors[i.ancestors.length-1];g&&(i.place=g.position)}const p=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=p?p.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=p?p.line:void 0,this.name=ad(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=d&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Kn.prototype.file="";Kn.prototype.name="";Kn.prototype.reason="";Kn.prototype.message="";Kn.prototype.stack="";Kn.prototype.column=void 0;Kn.prototype.line=void 0;Kn.prototype.ancestors=void 0;Kn.prototype.cause=void 0;Kn.prototype.fatal=void 0;Kn.prototype.place=void 0;Kn.prototype.ruleId=void 0;Kn.prototype.source=void 0;const p_={}.hasOwnProperty,NV=new Map,DV=/[A-Z]/g,LV=new Set(["table","tbody","thead","tfoot","tr"]),OV=new Set(["td","th"]),u7="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function FV(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=KV(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=GV(r,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?f_:CV,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=d7(l,e,void 0);return i&&typeof i!="string"?i:l.create(e,l.Fragment,{children:i||void 0},void 0)}function d7(e,t,r){if(t.type==="element")return UV(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return $V(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return HV(e,t,r);if(t.type==="mdxjsEsm")return qV(e,t);if(t.type==="root")return WV(e,t,r);if(t.type==="text")return VV(e,t)}function UV(e,t,r){const n=e.schema;let l=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(l=f_,e.schema=l),e.ancestors.push(t);const i=h7(e,t.tagName,!1),d=YV(e,t);let p=m_(e,t);return LV.has(t.tagName)&&(p=p.filter(function(g){return typeof g=="string"?!yV(g):!0})),f7(e,d,i,t),g_(d,p),e.ancestors.pop(),e.schema=n,e.create(t,i,d,r)}function $V(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}jd(e,t.position)}function qV(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jd(e,t.position)}function HV(e,t,r){const n=e.schema;let l=n;t.name==="svg"&&n.space==="html"&&(l=f_,e.schema=l),e.ancestors.push(t);const i=t.name===null?e.Fragment:h7(e,t.name,!0),d=JV(e,t),p=m_(e,t);return f7(e,d,i,t),g_(d,p),e.ancestors.pop(),e.schema=n,e.create(t,i,d,r)}function WV(e,t,r){const n={};return g_(n,m_(e,t)),e.create(t,e.Fragment,n,r)}function VV(e,t){return t.value}function f7(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function g_(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function GV(e,t,r){return n;function n(l,i,d,p){const x=Array.isArray(d.children)?r:t;return p?x(i,d,p):x(i,d)}}function KV(e,t){return r;function r(n,l,i,d){const p=Array.isArray(i.children),g=h_(n);return t(l,i,d,p,{columnNumber:g?g.column-1:void 0,fileName:e,lineNumber:g?g.line:void 0},void 0)}}function YV(e,t){const r={};let n,l;for(l in t.properties)if(l!=="children"&&p_.call(t.properties,l)){const i=ZV(e,l,t.properties[l]);if(i){const[d,p]=i;e.tableCellAlignToStyle&&d==="align"&&typeof p=="string"&&OV.has(t.tagName)?n=p:r[d]=p}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function JV(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const d=i.expression;d.type;const p=d.properties[0];p.type,Object.assign(r,e.evaluater.evaluateExpression(p.argument))}else jd(e,t.position);else{const l=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const p=n.value.data.estree.body[0];p.type,i=e.evaluater.evaluateExpression(p.expression)}else jd(e,t.position);else i=n.value===null?!0:n.value;r[l]=i}return r}function m_(e,t){const r=[];let n=-1;const l=e.passKeys?new Map:NV;for(;++n<t.children.length;){const i=t.children[n];let d;if(e.passKeys){const g=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(g){const x=l.get(g)||0;d=g+"-"+x,l.set(g,x+1)}}const p=d7(e,i,d);p!==void 0&&r.push(p)}return r}function ZV(e,t,r){const n=kV(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?fV(r):TV(r)),n.property==="style"){let l=typeof r=="object"?r:XV(e,String(r));return e.stylePropertyNameCase==="css"&&(l=QV(l)),["style",l]}return[e.elementAttributeNameCase==="react"&&n.space?wV[n.property]||n.property:n.attribute,r]}}function XV(e,t){try{return BV(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,l=new Kn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=e.filePath||void 0,l.url=u7+"#cannot-parse-style-attribute",l}}function h7(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let i=-1,d;for(;++i<l.length;){const p=EC(l[i])?{type:"Identifier",name:l[i]}:{type:"Literal",value:l[i]};d=d?{type:"MemberExpression",object:d,property:p,computed:!!(i&&p.type==="Literal"),optional:!1}:p}n=d}else n=EC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const l=n.value;return p_.call(e.components,l)?e.components[l]:l}if(e.evaluater)return e.evaluater.evaluateExpression(n);jd(e)}function jd(e,t){const r=new Kn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=u7+"#cannot-handle-mdx-estrees-without-createevaluater",r}function QV(e){const t={};let r;for(r in e)p_.call(e,r)&&(t[eG(r)]=e[r]);return t}function eG(e){let t=e.replace(DV,tG);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function tG(e){return"-"+e.toLowerCase()}const u1={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},rG={};function y_(e,t){const r=rG,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,l=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return p7(e,n,l)}function p7(e,t,r){if(nG(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return UC(e.children,t,r)}return Array.isArray(e)?UC(e,t,r):""}function UC(e,t,r){const n=[];let l=-1;for(;++l<e.length;)n[l]=p7(e[l],t,r);return n.join("")}function nG(e){return!!(e&&typeof e=="object")}const $C=document.createElement("i");function v_(e){const t="&"+e+";";$C.innerHTML=t;const r=$C.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function ji(e,t,r,n){const l=e.length;let i=0,d;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,r=r>0?r:0,n.length<1e4)d=Array.from(n),d.unshift(t,r),e.splice(...d);else for(r&&e.splice(t,r);i<n.length;)d=n.slice(i,i+1e4),d.unshift(t,0),e.splice(...d),i+=1e4,t+=1e4}function Ui(e,t){return e.length>0?(ji(e,e.length,0,t),e):t}const qC={}.hasOwnProperty;function g7(e){const t={};let r=-1;for(;++r<e.length;)iG(t,e[r]);return t}function iG(e,t){let r;for(r in t){const l=(qC.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let d;if(i)for(d in i){qC.call(l,d)||(l[d]=[]);const p=i[d];sG(l[d],Array.isArray(p)?p:p?[p]:[])}}}function sG(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);ji(e,0,0,n)}function m7(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function ss(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zn=qo(/[A-Za-z]/),Gn=qo(/[\dA-Za-z]/),oG=qo(/[#-'*+\--9=?A-Z^-~]/);function Tp(e){return e!==null&&(e<32||e===127)}const Db=qo(/\d/),aG=qo(/[\dA-Fa-f]/),lG=qo(/[!-/:-@[-`{-~]/);function Ht(e){return e!==null&&e<-2}function Lr(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const Qp=qo(new RegExp("\\p{P}|\\p{S}","u")),Ea=qo(/\s/);function qo(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function xc(e){const t=[];let r=-1,n=0,l=0;for(;++r<e.length;){const i=e.charCodeAt(r);let d="";if(i===37&&Gn(e.charCodeAt(r+1))&&Gn(e.charCodeAt(r+2)))l=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(d=String.fromCharCode(i));else if(i>55295&&i<57344){const p=e.charCodeAt(r+1);i<56320&&p>56319&&p<57344?(d=String.fromCharCode(i,p),l=1):d=""}else d=String.fromCharCode(i);d&&(t.push(e.slice(n,r),encodeURIComponent(d)),n=r+l+1,d=""),l&&(r+=l,l=0)}return t.join("")+e.slice(n)}function kr(e,t,r,n){const l=n?n-1:Number.POSITIVE_INFINITY;let i=0;return d;function d(g){return br(g)?(e.enter(r),p(g)):t(g)}function p(g){return br(g)&&i++<l?(e.consume(g),p):(e.exit(r),t(g))}}const cG={tokenize:uG};function uG(e){const t=e.attempt(this.parser.constructs.contentInitial,n,l);let r;return t;function n(p){if(p===null){e.consume(p);return}return e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),kr(e,t,"linePrefix")}function l(p){return e.enter("paragraph"),i(p)}function i(p){const g=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=g),r=g,d(p)}function d(p){if(p===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(p);return}return Ht(p)?(e.consume(p),e.exit("chunkText"),i):(e.consume(p),d)}}const dG={tokenize:fG},HC={tokenize:hG};function fG(e){const t=this,r=[];let n=0,l,i,d;return p;function p(D){if(n<r.length){const U=r[n];return t.containerState=U[1],e.attempt(U[0].continuation,g,x)(D)}return x(D)}function g(D){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&B();const U=t.events.length;let G=U,$;for(;G--;)if(t.events[G][0]==="exit"&&t.events[G][1].type==="chunkFlow"){$=t.events[G][1].end;break}z(n);let re=U;for(;re<t.events.length;)t.events[re][1].end={...$},re++;return ji(t.events,G+1,0,t.events.slice(U)),t.events.length=re,x(D)}return p(D)}function x(D){if(n===r.length){if(!l)return j(D);if(l.currentConstruct&&l.currentConstruct.concrete)return A(D);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(HC,y,w)(D)}function y(D){return l&&B(),z(n),j(D)}function w(D){return t.parser.lazy[t.now().line]=n!==r.length,d=t.now().offset,A(D)}function j(D){return t.containerState={},e.attempt(HC,_,A)(D)}function _(D){return n++,r.push([t.currentConstruct,t.containerState]),j(D)}function A(D){if(D===null){l&&B(),z(0),e.consume(D);return}return l=l||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:i}),E(D)}function E(D){if(D===null){P(e.exit("chunkFlow"),!0),z(0),e.consume(D);return}return Ht(D)?(e.consume(D),P(e.exit("chunkFlow")),n=0,t.interrupt=void 0,p):(e.consume(D),E)}function P(D,U){const G=t.sliceStream(D);if(U&&G.push(null),D.previous=i,i&&(i.next=D),i=D,l.defineSkip(D.start),l.write(G),t.parser.lazy[D.start.line]){let $=l.events.length;for(;$--;)if(l.events[$][1].start.offset<d&&(!l.events[$][1].end||l.events[$][1].end.offset>d))return;const re=t.events.length;let Q=re,H,Y;for(;Q--;)if(t.events[Q][0]==="exit"&&t.events[Q][1].type==="chunkFlow"){if(H){Y=t.events[Q][1].end;break}H=!0}for(z(n),$=re;$<t.events.length;)t.events[$][1].end={...Y},$++;ji(t.events,Q+1,0,t.events.slice(re)),t.events.length=$}}function z(D){let U=r.length;for(;U-- >D;){const G=r[U];t.containerState=G[1],G[0].exit.call(t,e)}r.length=D}function B(){l.write([null]),i=void 0,l=void 0,t.containerState._closeFlow=void 0}}function hG(e,t,r){return kr(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tc(e){if(e===null||Lr(e)||Ea(e))return 1;if(Qp(e))return 2}function e0(e,t,r){const n=[];let l=-1;for(;++l<e.length;){const i=e[l].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const Lb={name:"attention",resolveAll:pG,tokenize:gG};function pG(e,t){let r=-1,n,l,i,d,p,g,x,y;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;g=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const w={...e[n][1].end},j={...e[r][1].start};WC(w,-g),WC(j,g),d={type:g>1?"strongSequence":"emphasisSequence",start:w,end:{...e[n][1].end}},p={type:g>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:j},i={type:g>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},l={type:g>1?"strong":"emphasis",start:{...d.start},end:{...p.end}},e[n][1].end={...d.start},e[r][1].start={...p.end},x=[],e[n][1].end.offset-e[n][1].start.offset&&(x=Ui(x,[["enter",e[n][1],t],["exit",e[n][1],t]])),x=Ui(x,[["enter",l,t],["enter",d,t],["exit",d,t],["enter",i,t]]),x=Ui(x,e0(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),x=Ui(x,[["exit",i,t],["enter",p,t],["exit",p,t],["exit",l,t]]),e[r][1].end.offset-e[r][1].start.offset?(y=2,x=Ui(x,[["enter",e[r][1],t],["exit",e[r][1],t]])):y=0,ji(e,n-1,r-n+3,x),r=n+x.length-y-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function gG(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,l=tc(n);let i;return d;function d(g){return i=g,e.enter("attentionSequence"),p(g)}function p(g){if(g===i)return e.consume(g),p;const x=e.exit("attentionSequence"),y=tc(g),w=!y||y===2&&l||r.includes(g),j=!l||l===2&&y||r.includes(n);return x._open=!!(i===42?w:w&&(l||!j)),x._close=!!(i===42?j:j&&(y||!w)),t(g)}}function WC(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const mG={name:"autolink",tokenize:yG};function yG(e,t,r){let n=0;return l;function l(_){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(_){return Zn(_)?(e.consume(_),d):_===64?r(_):x(_)}function d(_){return _===43||_===45||_===46||Gn(_)?(n=1,p(_)):x(_)}function p(_){return _===58?(e.consume(_),n=0,g):(_===43||_===45||_===46||Gn(_))&&n++<32?(e.consume(_),p):(n=0,x(_))}function g(_){return _===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.exit("autolink"),t):_===null||_===32||_===60||Tp(_)?r(_):(e.consume(_),g)}function x(_){return _===64?(e.consume(_),y):oG(_)?(e.consume(_),x):r(_)}function y(_){return Gn(_)?w(_):r(_)}function w(_){return _===46?(e.consume(_),n=0,y):_===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.exit("autolink"),t):j(_)}function j(_){if((_===45||Gn(_))&&n++<63){const A=_===45?j:w;return e.consume(_),A}return r(_)}}const Gd={partial:!0,tokenize:vG};function vG(e,t,r){return n;function n(i){return br(i)?kr(e,l,"linePrefix")(i):l(i)}function l(i){return i===null||Ht(i)?t(i):r(i)}}const y7={continuation:{tokenize:bG},exit:wG,name:"blockQuote",tokenize:xG};function xG(e,t,r){const n=this;return l;function l(d){if(d===62){const p=n.containerState;return p.open||(e.enter("blockQuote",{_container:!0}),p.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(d),e.exit("blockQuoteMarker"),i}return r(d)}function i(d){return br(d)?(e.enter("blockQuotePrefixWhitespace"),e.consume(d),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(d))}}function bG(e,t,r){const n=this;return l;function l(d){return br(d)?kr(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):i(d)}function i(d){return e.attempt(y7,t,r)(d)}}function wG(e){e.exit("blockQuote")}const v7={name:"characterEscape",tokenize:_G};function _G(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),l}function l(i){return lG(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const x7={name:"characterReference",tokenize:SG};function SG(e,t,r){const n=this;let l=0,i,d;return p;function p(w){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(w),e.exit("characterReferenceMarker"),g}function g(w){return w===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(w),e.exit("characterReferenceMarkerNumeric"),x):(e.enter("characterReferenceValue"),i=31,d=Gn,y(w))}function x(w){return w===88||w===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(w),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,d=aG,y):(e.enter("characterReferenceValue"),i=7,d=Db,y(w))}function y(w){if(w===59&&l){const j=e.exit("characterReferenceValue");return d===Gn&&!v_(n.sliceSerialize(j))?r(w):(e.enter("characterReferenceMarker"),e.consume(w),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return d(w)&&l++<i?(e.consume(w),y):r(w)}}const VC={partial:!0,tokenize:jG},GC={concrete:!0,name:"codeFenced",tokenize:kG};function kG(e,t,r){const n=this,l={partial:!0,tokenize:G};let i=0,d=0,p;return g;function g($){return x($)}function x($){const re=n.events[n.events.length-1];return i=re&&re[1].type==="linePrefix"?re[2].sliceSerialize(re[1],!0).length:0,p=$,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),y($)}function y($){return $===p?(d++,e.consume($),y):d<3?r($):(e.exit("codeFencedFenceSequence"),br($)?kr(e,w,"whitespace")($):w($))}function w($){return $===null||Ht($)?(e.exit("codeFencedFence"),n.interrupt?t($):e.check(VC,E,U)($)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),j($))}function j($){return $===null||Ht($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),w($)):br($)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),kr(e,_,"whitespace")($)):$===96&&$===p?r($):(e.consume($),j)}function _($){return $===null||Ht($)?w($):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),A($))}function A($){return $===null||Ht($)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),w($)):$===96&&$===p?r($):(e.consume($),A)}function E($){return e.attempt(l,U,P)($)}function P($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),z}function z($){return i>0&&br($)?kr(e,B,"linePrefix",i+1)($):B($)}function B($){return $===null||Ht($)?e.check(VC,E,U)($):(e.enter("codeFlowValue"),D($))}function D($){return $===null||Ht($)?(e.exit("codeFlowValue"),B($)):(e.consume($),D)}function U($){return e.exit("codeFenced"),t($)}function G($,re,Q){let H=0;return Y;function Y(v){return $.enter("lineEnding"),$.consume(v),$.exit("lineEnding"),T}function T(v){return $.enter("codeFencedFence"),br(v)?kr($,o,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):o(v)}function o(v){return v===p?($.enter("codeFencedFenceSequence"),c(v)):Q(v)}function c(v){return v===p?(H++,$.consume(v),c):H>=d?($.exit("codeFencedFenceSequence"),br(v)?kr($,h,"whitespace")(v):h(v)):Q(v)}function h(v){return v===null||Ht(v)?($.exit("codeFencedFence"),re(v)):Q(v)}}}function jG(e,t,r){const n=this;return l;function l(d){return d===null?r(d):(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),i)}function i(d){return n.parser.lazy[n.now().line]?r(d):t(d)}}const d1={name:"codeIndented",tokenize:CG},MG={partial:!0,tokenize:TG};function CG(e,t,r){const n=this;return l;function l(x){return e.enter("codeIndented"),kr(e,i,"linePrefix",5)(x)}function i(x){const y=n.events[n.events.length-1];return y&&y[1].type==="linePrefix"&&y[2].sliceSerialize(y[1],!0).length>=4?d(x):r(x)}function d(x){return x===null?g(x):Ht(x)?e.attempt(MG,d,g)(x):(e.enter("codeFlowValue"),p(x))}function p(x){return x===null||Ht(x)?(e.exit("codeFlowValue"),d(x)):(e.consume(x),p)}function g(x){return e.exit("codeIndented"),t(x)}}function TG(e,t,r){const n=this;return l;function l(d){return n.parser.lazy[n.now().line]?r(d):Ht(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):kr(e,i,"linePrefix",5)(d)}function i(d){const p=n.events[n.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?t(d):Ht(d)?l(d):r(d)}}const AG={name:"codeText",previous:EG,resolve:RG,tokenize:IG};function RG(e){let t=e.length-4,r=3,n,l;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)l===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(l=n):(n===t||e[n][1].type==="lineEnding")&&(e[l][1].type="codeTextData",n!==l+2&&(e[l][1].end=e[n-1][1].end,e.splice(l+2,n-l-2),t-=n-l-2,n=l+2),l=void 0);return e}function EG(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function IG(e,t,r){let n=0,l,i;return d;function d(w){return e.enter("codeText"),e.enter("codeTextSequence"),p(w)}function p(w){return w===96?(e.consume(w),n++,p):(e.exit("codeTextSequence"),g(w))}function g(w){return w===null?r(w):w===32?(e.enter("space"),e.consume(w),e.exit("space"),g):w===96?(i=e.enter("codeTextSequence"),l=0,y(w)):Ht(w)?(e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),g):(e.enter("codeTextData"),x(w))}function x(w){return w===null||w===32||w===96||Ht(w)?(e.exit("codeTextData"),g(w)):(e.consume(w),x)}function y(w){return w===96?(e.consume(w),l++,y):l===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(w)):(i.type="codeTextData",x(w))}}class zG{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const l=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return n&&Du(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Du(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Du(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Du(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Du(this.left,r.reverse())}}}function Du(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function b7(e){const t={};let r=-1,n,l,i,d,p,g,x;const y=new zG(e);for(;++r<y.length;){for(;r in t;)r=t[r];if(n=y.get(r),r&&n[1].type==="chunkFlow"&&y.get(r-1)[1].type==="listItemPrefix"&&(g=n[1]._tokenizer.events,i=0,i<g.length&&g[i][1].type==="lineEndingBlank"&&(i+=2),i<g.length&&g[i][1].type==="content"))for(;++i<g.length&&g[i][1].type!=="content";)g[i][1].type==="chunkText"&&(g[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,BG(y,r)),r=t[r],x=!0);else if(n[1]._container){for(i=r,l=void 0;i--;)if(d=y.get(i),d[1].type==="lineEnding"||d[1].type==="lineEndingBlank")d[0]==="enter"&&(l&&(y.get(l)[1].type="lineEndingBlank"),d[1].type="lineEnding",l=i);else if(!(d[1].type==="linePrefix"||d[1].type==="listItemIndent"))break;l&&(n[1].end={...y.get(l)[1].start},p=y.slice(l,r),p.unshift(n),y.splice(l,r-l+1,p))}}return ji(e,0,Number.POSITIVE_INFINITY,y.slice(0)),!x}function BG(e,t){const r=e.get(t)[1],n=e.get(t)[2];let l=t-1;const i=[];let d=r._tokenizer;d||(d=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(d._contentTypeTextTrailing=!0));const p=d.events,g=[],x={};let y,w,j=-1,_=r,A=0,E=0;const P=[E];for(;_;){for(;e.get(++l)[1]!==_;);i.push(l),_._tokenizer||(y=n.sliceStream(_),_.next||y.push(null),w&&d.defineSkip(_.start),_._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(y),_._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),w=_,_=_.next}for(_=r;++j<p.length;)p[j][0]==="exit"&&p[j-1][0]==="enter"&&p[j][1].type===p[j-1][1].type&&p[j][1].start.line!==p[j][1].end.line&&(E=j+1,P.push(E),_._tokenizer=void 0,_.previous=void 0,_=_.next);for(d.events=[],_?(_._tokenizer=void 0,_.previous=void 0):P.pop(),j=P.length;j--;){const z=p.slice(P[j],P[j+1]),B=i.pop();g.push([B,B+z.length-1]),e.splice(B,2,z)}for(g.reverse(),j=-1;++j<g.length;)x[A+g[j][0]]=A+g[j][1],A+=g[j][1]-g[j][0]-1;return x}const PG={resolve:DG,tokenize:LG},NG={partial:!0,tokenize:OG};function DG(e){return b7(e),e}function LG(e,t){let r;return n;function n(p){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),l(p)}function l(p){return p===null?i(p):Ht(p)?e.check(NG,d,i)(p):(e.consume(p),l)}function i(p){return e.exit("chunkContent"),e.exit("content"),t(p)}function d(p){return e.consume(p),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,l}}function OG(e,t,r){const n=this;return l;function l(d){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),kr(e,i,"linePrefix")}function i(d){if(d===null||Ht(d))return r(d);const p=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?t(d):e.interrupt(n.parser.constructs.flow,r,t)(d)}}function w7(e,t,r,n,l,i,d,p,g){const x=g||Number.POSITIVE_INFINITY;let y=0;return w;function w(z){return z===60?(e.enter(n),e.enter(l),e.enter(i),e.consume(z),e.exit(i),j):z===null||z===32||z===41||Tp(z)?r(z):(e.enter(n),e.enter(d),e.enter(p),e.enter("chunkString",{contentType:"string"}),E(z))}function j(z){return z===62?(e.enter(i),e.consume(z),e.exit(i),e.exit(l),e.exit(n),t):(e.enter(p),e.enter("chunkString",{contentType:"string"}),_(z))}function _(z){return z===62?(e.exit("chunkString"),e.exit(p),j(z)):z===null||z===60||Ht(z)?r(z):(e.consume(z),z===92?A:_)}function A(z){return z===60||z===62||z===92?(e.consume(z),_):_(z)}function E(z){return!y&&(z===null||z===41||Lr(z))?(e.exit("chunkString"),e.exit(p),e.exit(d),e.exit(n),t(z)):y<x&&z===40?(e.consume(z),y++,E):z===41?(e.consume(z),y--,E):z===null||z===32||z===40||Tp(z)?r(z):(e.consume(z),z===92?P:E)}function P(z){return z===40||z===41||z===92?(e.consume(z),E):E(z)}}function _7(e,t,r,n,l,i){const d=this;let p=0,g;return x;function x(_){return e.enter(n),e.enter(l),e.consume(_),e.exit(l),e.enter(i),y}function y(_){return p>999||_===null||_===91||_===93&&!g||_===94&&!p&&"_hiddenFootnoteSupport"in d.parser.constructs?r(_):_===93?(e.exit(i),e.enter(l),e.consume(_),e.exit(l),e.exit(n),t):Ht(_)?(e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y):(e.enter("chunkString",{contentType:"string"}),w(_))}function w(_){return _===null||_===91||_===93||Ht(_)||p++>999?(e.exit("chunkString"),y(_)):(e.consume(_),g||(g=!br(_)),_===92?j:w)}function j(_){return _===91||_===92||_===93?(e.consume(_),p++,w):w(_)}}function S7(e,t,r,n,l,i){let d;return p;function p(j){return j===34||j===39||j===40?(e.enter(n),e.enter(l),e.consume(j),e.exit(l),d=j===40?41:j,g):r(j)}function g(j){return j===d?(e.enter(l),e.consume(j),e.exit(l),e.exit(n),t):(e.enter(i),x(j))}function x(j){return j===d?(e.exit(i),g(d)):j===null?r(j):Ht(j)?(e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),kr(e,x,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),y(j))}function y(j){return j===d||j===null||Ht(j)?(e.exit("chunkString"),x(j)):(e.consume(j),j===92?w:y)}function w(j){return j===d||j===92?(e.consume(j),y):y(j)}}function ld(e,t){let r;return n;function n(l){return Ht(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),r=!0,n):br(l)?kr(e,n,r?"linePrefix":"lineSuffix")(l):t(l)}}const FG={name:"definition",tokenize:$G},UG={partial:!0,tokenize:qG};function $G(e,t,r){const n=this;let l;return i;function i(_){return e.enter("definition"),d(_)}function d(_){return _7.call(n,e,p,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(_)}function p(_){return l=ss(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),_===58?(e.enter("definitionMarker"),e.consume(_),e.exit("definitionMarker"),g):r(_)}function g(_){return Lr(_)?ld(e,x)(_):x(_)}function x(_){return w7(e,y,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(_)}function y(_){return e.attempt(UG,w,w)(_)}function w(_){return br(_)?kr(e,j,"whitespace")(_):j(_)}function j(_){return _===null||Ht(_)?(e.exit("definition"),n.parser.defined.push(l),t(_)):r(_)}}function qG(e,t,r){return n;function n(p){return Lr(p)?ld(e,l)(p):r(p)}function l(p){return S7(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(p)}function i(p){return br(p)?kr(e,d,"whitespace")(p):d(p)}function d(p){return p===null||Ht(p)?t(p):r(p)}}const HG={name:"hardBreakEscape",tokenize:WG};function WG(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),l}function l(i){return Ht(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const VG={name:"headingAtx",resolve:GG,tokenize:KG};function GG(e,t){let r=e.length-2,n=3,l,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(l={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},ji(e,n,r-n+1,[["enter",l,t],["enter",i,t],["exit",i,t],["exit",l,t]])),e}function KG(e,t,r){let n=0;return l;function l(y){return e.enter("atxHeading"),i(y)}function i(y){return e.enter("atxHeadingSequence"),d(y)}function d(y){return y===35&&n++<6?(e.consume(y),d):y===null||Lr(y)?(e.exit("atxHeadingSequence"),p(y)):r(y)}function p(y){return y===35?(e.enter("atxHeadingSequence"),g(y)):y===null||Ht(y)?(e.exit("atxHeading"),t(y)):br(y)?kr(e,p,"whitespace")(y):(e.enter("atxHeadingText"),x(y))}function g(y){return y===35?(e.consume(y),g):(e.exit("atxHeadingSequence"),p(y))}function x(y){return y===null||y===35||Lr(y)?(e.exit("atxHeadingText"),p(y)):(e.consume(y),x)}}const YG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],KC=["pre","script","style","textarea"],JG={concrete:!0,name:"htmlFlow",resolveTo:QG,tokenize:eK},ZG={partial:!0,tokenize:rK},XG={partial:!0,tokenize:tK};function QG(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function eK(e,t,r){const n=this;let l,i,d,p,g;return x;function x(L){return y(L)}function y(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),w}function w(L){return L===33?(e.consume(L),j):L===47?(e.consume(L),i=!0,E):L===63?(e.consume(L),l=3,n.interrupt?t:a):Zn(L)?(e.consume(L),d=String.fromCharCode(L),P):r(L)}function j(L){return L===45?(e.consume(L),l=2,_):L===91?(e.consume(L),l=5,p=0,A):Zn(L)?(e.consume(L),l=4,n.interrupt?t:a):r(L)}function _(L){return L===45?(e.consume(L),n.interrupt?t:a):r(L)}function A(L){const X="CDATA[";return L===X.charCodeAt(p++)?(e.consume(L),p===X.length?n.interrupt?t:o:A):r(L)}function E(L){return Zn(L)?(e.consume(L),d=String.fromCharCode(L),P):r(L)}function P(L){if(L===null||L===47||L===62||Lr(L)){const X=L===47,se=d.toLowerCase();return!X&&!i&&KC.includes(se)?(l=1,n.interrupt?t(L):o(L)):YG.includes(d.toLowerCase())?(l=6,X?(e.consume(L),z):n.interrupt?t(L):o(L)):(l=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(L):i?B(L):D(L))}return L===45||Gn(L)?(e.consume(L),d+=String.fromCharCode(L),P):r(L)}function z(L){return L===62?(e.consume(L),n.interrupt?t:o):r(L)}function B(L){return br(L)?(e.consume(L),B):Y(L)}function D(L){return L===47?(e.consume(L),Y):L===58||L===95||Zn(L)?(e.consume(L),U):br(L)?(e.consume(L),D):Y(L)}function U(L){return L===45||L===46||L===58||L===95||Gn(L)?(e.consume(L),U):G(L)}function G(L){return L===61?(e.consume(L),$):br(L)?(e.consume(L),G):D(L)}function $(L){return L===null||L===60||L===61||L===62||L===96?r(L):L===34||L===39?(e.consume(L),g=L,re):br(L)?(e.consume(L),$):Q(L)}function re(L){return L===g?(e.consume(L),g=null,H):L===null||Ht(L)?r(L):(e.consume(L),re)}function Q(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||Lr(L)?G(L):(e.consume(L),Q)}function H(L){return L===47||L===62||br(L)?D(L):r(L)}function Y(L){return L===62?(e.consume(L),T):r(L)}function T(L){return L===null||Ht(L)?o(L):br(L)?(e.consume(L),T):r(L)}function o(L){return L===45&&l===2?(e.consume(L),b):L===60&&l===1?(e.consume(L),M):L===62&&l===4?(e.consume(L),k):L===63&&l===3?(e.consume(L),a):L===93&&l===5?(e.consume(L),S):Ht(L)&&(l===6||l===7)?(e.exit("htmlFlowData"),e.check(ZG,N,c)(L)):L===null||Ht(L)?(e.exit("htmlFlowData"),c(L)):(e.consume(L),o)}function c(L){return e.check(XG,h,N)(L)}function h(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),v}function v(L){return L===null||Ht(L)?c(L):(e.enter("htmlFlowData"),o(L))}function b(L){return L===45?(e.consume(L),a):o(L)}function M(L){return L===47?(e.consume(L),d="",R):o(L)}function R(L){if(L===62){const X=d.toLowerCase();return KC.includes(X)?(e.consume(L),k):o(L)}return Zn(L)&&d.length<8?(e.consume(L),d+=String.fromCharCode(L),R):o(L)}function S(L){return L===93?(e.consume(L),a):o(L)}function a(L){return L===62?(e.consume(L),k):L===45&&l===2?(e.consume(L),a):o(L)}function k(L){return L===null||Ht(L)?(e.exit("htmlFlowData"),N(L)):(e.consume(L),k)}function N(L){return e.exit("htmlFlow"),t(L)}}function tK(e,t,r){const n=this;return l;function l(d){return Ht(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),i):r(d)}function i(d){return n.parser.lazy[n.now().line]?r(d):t(d)}}function rK(e,t,r){return n;function n(l){return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),e.attempt(Gd,t,r)}}const nK={name:"htmlText",tokenize:iK};function iK(e,t,r){const n=this;let l,i,d;return p;function p(a){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(a),g}function g(a){return a===33?(e.consume(a),x):a===47?(e.consume(a),G):a===63?(e.consume(a),D):Zn(a)?(e.consume(a),Q):r(a)}function x(a){return a===45?(e.consume(a),y):a===91?(e.consume(a),i=0,A):Zn(a)?(e.consume(a),B):r(a)}function y(a){return a===45?(e.consume(a),_):r(a)}function w(a){return a===null?r(a):a===45?(e.consume(a),j):Ht(a)?(d=w,M(a)):(e.consume(a),w)}function j(a){return a===45?(e.consume(a),_):w(a)}function _(a){return a===62?b(a):a===45?j(a):w(a)}function A(a){const k="CDATA[";return a===k.charCodeAt(i++)?(e.consume(a),i===k.length?E:A):r(a)}function E(a){return a===null?r(a):a===93?(e.consume(a),P):Ht(a)?(d=E,M(a)):(e.consume(a),E)}function P(a){return a===93?(e.consume(a),z):E(a)}function z(a){return a===62?b(a):a===93?(e.consume(a),z):E(a)}function B(a){return a===null||a===62?b(a):Ht(a)?(d=B,M(a)):(e.consume(a),B)}function D(a){return a===null?r(a):a===63?(e.consume(a),U):Ht(a)?(d=D,M(a)):(e.consume(a),D)}function U(a){return a===62?b(a):D(a)}function G(a){return Zn(a)?(e.consume(a),$):r(a)}function $(a){return a===45||Gn(a)?(e.consume(a),$):re(a)}function re(a){return Ht(a)?(d=re,M(a)):br(a)?(e.consume(a),re):b(a)}function Q(a){return a===45||Gn(a)?(e.consume(a),Q):a===47||a===62||Lr(a)?H(a):r(a)}function H(a){return a===47?(e.consume(a),b):a===58||a===95||Zn(a)?(e.consume(a),Y):Ht(a)?(d=H,M(a)):br(a)?(e.consume(a),H):b(a)}function Y(a){return a===45||a===46||a===58||a===95||Gn(a)?(e.consume(a),Y):T(a)}function T(a){return a===61?(e.consume(a),o):Ht(a)?(d=T,M(a)):br(a)?(e.consume(a),T):H(a)}function o(a){return a===null||a===60||a===61||a===62||a===96?r(a):a===34||a===39?(e.consume(a),l=a,c):Ht(a)?(d=o,M(a)):br(a)?(e.consume(a),o):(e.consume(a),h)}function c(a){return a===l?(e.consume(a),l=void 0,v):a===null?r(a):Ht(a)?(d=c,M(a)):(e.consume(a),c)}function h(a){return a===null||a===34||a===39||a===60||a===61||a===96?r(a):a===47||a===62||Lr(a)?H(a):(e.consume(a),h)}function v(a){return a===47||a===62||Lr(a)?H(a):r(a)}function b(a){return a===62?(e.consume(a),e.exit("htmlTextData"),e.exit("htmlText"),t):r(a)}function M(a){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),R}function R(a){return br(a)?kr(e,S,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):S(a)}function S(a){return e.enter("htmlTextData"),d(a)}}const x_={name:"labelEnd",resolveAll:lK,resolveTo:cK,tokenize:uK},sK={tokenize:dK},oK={tokenize:fK},aK={tokenize:hK};function lK(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const l=n.type==="labelImage"?4:2;n.type="data",t+=l}}return e.length!==r.length&&ji(e,0,e.length,r),e}function cK(e,t){let r=e.length,n=0,l,i,d,p;for(;r--;)if(l=e[r][1],i){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;e[r][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(d){if(e[r][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(i=r,l.type!=="labelLink")){n=2;break}}else l.type==="labelEnd"&&(d=r);const g={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},x={type:"label",start:{...e[i][1].start},end:{...e[d][1].end}},y={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[d-2][1].start}};return p=[["enter",g,t],["enter",x,t]],p=Ui(p,e.slice(i+1,i+n+3)),p=Ui(p,[["enter",y,t]]),p=Ui(p,e0(t.parser.constructs.insideSpan.null,e.slice(i+n+4,d-3),t)),p=Ui(p,[["exit",y,t],e[d-2],e[d-1],["exit",x,t]]),p=Ui(p,e.slice(d+1)),p=Ui(p,[["exit",g,t]]),ji(e,i,e.length,p),e}function uK(e,t,r){const n=this;let l=n.events.length,i,d;for(;l--;)if((n.events[l][1].type==="labelImage"||n.events[l][1].type==="labelLink")&&!n.events[l][1]._balanced){i=n.events[l][1];break}return p;function p(j){return i?i._inactive?w(j):(d=n.parser.defined.includes(ss(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(j),e.exit("labelMarker"),e.exit("labelEnd"),g):r(j)}function g(j){return j===40?e.attempt(sK,y,d?y:w)(j):j===91?e.attempt(oK,y,d?x:w)(j):d?y(j):w(j)}function x(j){return e.attempt(aK,y,w)(j)}function y(j){return t(j)}function w(j){return i._balanced=!0,r(j)}}function dK(e,t,r){return n;function n(w){return e.enter("resource"),e.enter("resourceMarker"),e.consume(w),e.exit("resourceMarker"),l}function l(w){return Lr(w)?ld(e,i)(w):i(w)}function i(w){return w===41?y(w):w7(e,d,p,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(w)}function d(w){return Lr(w)?ld(e,g)(w):y(w)}function p(w){return r(w)}function g(w){return w===34||w===39||w===40?S7(e,x,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(w):y(w)}function x(w){return Lr(w)?ld(e,y)(w):y(w)}function y(w){return w===41?(e.enter("resourceMarker"),e.consume(w),e.exit("resourceMarker"),e.exit("resource"),t):r(w)}}function fK(e,t,r){const n=this;return l;function l(p){return _7.call(n,e,i,d,"reference","referenceMarker","referenceString")(p)}function i(p){return n.parser.defined.includes(ss(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(p):r(p)}function d(p){return r(p)}}function hK(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),l}function l(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const pK={name:"labelStartImage",resolveAll:x_.resolveAll,tokenize:gK};function gK(e,t,r){const n=this;return l;function l(p){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(p),e.exit("labelImageMarker"),i}function i(p){return p===91?(e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelImage"),d):r(p)}function d(p){return p===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(p):t(p)}}const mK={name:"labelStartLink",resolveAll:x_.resolveAll,tokenize:yK};function yK(e,t,r){const n=this;return l;function l(d){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelLink"),i}function i(d){return d===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(d):t(d)}}const f1={name:"lineEnding",tokenize:vK};function vK(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),kr(e,t,"linePrefix")}}const sp={name:"thematicBreak",tokenize:xK};function xK(e,t,r){let n=0,l;return i;function i(x){return e.enter("thematicBreak"),d(x)}function d(x){return l=x,p(x)}function p(x){return x===l?(e.enter("thematicBreakSequence"),g(x)):n>=3&&(x===null||Ht(x))?(e.exit("thematicBreak"),t(x)):r(x)}function g(x){return x===l?(e.consume(x),n++,g):(e.exit("thematicBreakSequence"),br(x)?kr(e,p,"whitespace")(x):p(x))}}const ii={continuation:{tokenize:SK},exit:jK,name:"list",tokenize:_K},bK={partial:!0,tokenize:MK},wK={partial:!0,tokenize:kK};function _K(e,t,r){const n=this,l=n.events[n.events.length-1];let i=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,d=0;return p;function p(_){const A=n.containerState.type||(_===42||_===43||_===45?"listUnordered":"listOrdered");if(A==="listUnordered"?!n.containerState.marker||_===n.containerState.marker:Db(_)){if(n.containerState.type||(n.containerState.type=A,e.enter(A,{_container:!0})),A==="listUnordered")return e.enter("listItemPrefix"),_===42||_===45?e.check(sp,r,x)(_):x(_);if(!n.interrupt||_===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),g(_)}return r(_)}function g(_){return Db(_)&&++d<10?(e.consume(_),g):(!n.interrupt||d<2)&&(n.containerState.marker?_===n.containerState.marker:_===41||_===46)?(e.exit("listItemValue"),x(_)):r(_)}function x(_){return e.enter("listItemMarker"),e.consume(_),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||_,e.check(Gd,n.interrupt?r:y,e.attempt(bK,j,w))}function y(_){return n.containerState.initialBlankLine=!0,i++,j(_)}function w(_){return br(_)?(e.enter("listItemPrefixWhitespace"),e.consume(_),e.exit("listItemPrefixWhitespace"),j):r(_)}function j(_){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(_)}}function SK(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(Gd,l,i);function l(p){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,kr(e,t,"listItemIndent",n.containerState.size+1)(p)}function i(p){return n.containerState.furtherBlankLines||!br(p)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,d(p)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(wK,t,d)(p))}function d(p){return n.containerState._closeFlow=!0,n.interrupt=void 0,kr(e,e.attempt(ii,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p)}}function kK(e,t,r){const n=this;return kr(e,l,"listItemIndent",n.containerState.size+1);function l(i){const d=n.events[n.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===n.containerState.size?t(i):r(i)}}function jK(e){e.exit(this.containerState.type)}function MK(e,t,r){const n=this;return kr(e,l,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(i){const d=n.events[n.events.length-1];return!br(i)&&d&&d[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const YC={name:"setextUnderline",resolveTo:CK,tokenize:TK};function CK(e,t){let r=e.length,n,l,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(l=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const d={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[l][1].type="setextHeadingText",i?(e.splice(l,0,["enter",d,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=d,e.push(["exit",d,t]),e}function TK(e,t,r){const n=this;let l;return i;function i(x){let y=n.events.length,w;for(;y--;)if(n.events[y][1].type!=="lineEnding"&&n.events[y][1].type!=="linePrefix"&&n.events[y][1].type!=="content"){w=n.events[y][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||w)?(e.enter("setextHeadingLine"),l=x,d(x)):r(x)}function d(x){return e.enter("setextHeadingLineSequence"),p(x)}function p(x){return x===l?(e.consume(x),p):(e.exit("setextHeadingLineSequence"),br(x)?kr(e,g,"lineSuffix")(x):g(x))}function g(x){return x===null||Ht(x)?(e.exit("setextHeadingLine"),t(x)):r(x)}}const AK={tokenize:RK};function RK(e){const t=this,r=e.attempt(Gd,n,e.attempt(this.parser.constructs.flowInitial,l,kr(e,e.attempt(this.parser.constructs.flow,l,e.attempt(PG,l)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function l(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const EK={resolveAll:j7()},IK=k7("string"),zK=k7("text");function k7(e){return{resolveAll:j7(e==="text"?BK:void 0),tokenize:t};function t(r){const n=this,l=this.parser.constructs[e],i=r.attempt(l,d,p);return d;function d(y){return x(y)?i(y):p(y)}function p(y){if(y===null){r.consume(y);return}return r.enter("data"),r.consume(y),g}function g(y){return x(y)?(r.exit("data"),i(y)):(r.consume(y),g)}function x(y){if(y===null)return!0;const w=l[y];let j=-1;if(w)for(;++j<w.length;){const _=w[j];if(!_.previous||_.previous.call(n,n.previous))return!0}return!1}}}function j7(e){return t;function t(r,n){let l=-1,i;for(;++l<=r.length;)i===void 0?r[l]&&r[l][1].type==="data"&&(i=l,l++):(!r[l]||r[l][1].type!=="data")&&(l!==i+2&&(r[i][1].end=r[l-1][1].end,r.splice(i+2,l-i-2),l=i+2),i=void 0);return e?e(r,n):r}}function BK(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],l=t.sliceStream(n);let i=l.length,d=-1,p=0,g;for(;i--;){const x=l[i];if(typeof x=="string"){for(d=x.length;x.charCodeAt(d-1)===32;)p++,d--;if(d)break;d=-1}else if(x===-2)g=!0,p++;else if(x!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(p=0),p){const x={type:r===e.length||g||p<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?d:n.start._bufferIndex+d,_index:n.start._index+i,line:n.end.line,column:n.end.column-p,offset:n.end.offset-p},end:{...n.end}};n.end={...x.start},n.start.offset===n.end.offset?Object.assign(n,x):(e.splice(r,0,["enter",x,t],["exit",x,t]),r+=2)}r++}return e}const PK={42:ii,43:ii,45:ii,48:ii,49:ii,50:ii,51:ii,52:ii,53:ii,54:ii,55:ii,56:ii,57:ii,62:y7},NK={91:FG},DK={[-2]:d1,[-1]:d1,32:d1},LK={35:VG,42:sp,45:[YC,sp],60:JG,61:YC,95:sp,96:GC,126:GC},OK={38:x7,92:v7},FK={[-5]:f1,[-4]:f1,[-3]:f1,33:pK,38:x7,42:Lb,60:[mG,nK],91:mK,92:[HG,v7],93:x_,95:Lb,96:AG},UK={null:[Lb,EK]},$K={null:[42,95]},qK={null:[]},HK=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:$K,contentInitial:NK,disable:qK,document:PK,flow:LK,flowInitial:DK,insideSpan:UK,string:OK,text:FK},Symbol.toStringTag,{value:"Module"}));function WK(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const l={},i=[];let d=[],p=[];const g={attempt:re(G),check:re($),consume:B,enter:D,exit:U,interrupt:re($,{interrupt:!0})},x={code:null,containerState:{},defineSkip:E,events:[],now:A,parser:e,previous:null,sliceSerialize:j,sliceStream:_,write:w};let y=t.tokenize.call(x,g);return t.resolveAll&&i.push(t),x;function w(T){return d=Ui(d,T),P(),d[d.length-1]!==null?[]:(Q(t,0),x.events=e0(i,x.events,x),x.events)}function j(T,o){return GK(_(T),o)}function _(T){return VK(d,T)}function A(){const{_bufferIndex:T,_index:o,line:c,column:h,offset:v}=n;return{_bufferIndex:T,_index:o,line:c,column:h,offset:v}}function E(T){l[T.line]=T.column,Y()}function P(){let T;for(;n._index<d.length;){const o=d[n._index];if(typeof o=="string")for(T=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===T&&n._bufferIndex<o.length;)z(o.charCodeAt(n._bufferIndex));else z(o)}}function z(T){y=y(T)}function B(T){Ht(T)?(n.line++,n.column=1,n.offset+=T===-3?2:1,Y()):T!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===d[n._index].length&&(n._bufferIndex=-1,n._index++)),x.previous=T}function D(T,o){const c=o||{};return c.type=T,c.start=A(),x.events.push(["enter",c,x]),p.push(c),c}function U(T){const o=p.pop();return o.end=A(),x.events.push(["exit",o,x]),o}function G(T,o){Q(T,o.from)}function $(T,o){o.restore()}function re(T,o){return c;function c(h,v,b){let M,R,S,a;return Array.isArray(h)?N(h):"tokenize"in h?N([h]):k(h);function k(te){return K;function K(J){const ne=J!==null&&te[J],oe=J!==null&&te.null,ae=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(oe)?oe:oe?[oe]:[]];return N(ae)(J)}}function N(te){return M=te,R=0,te.length===0?b:L(te[R])}function L(te){return K;function K(J){return a=H(),S=te,te.partial||(x.currentConstruct=te),te.name&&x.parser.constructs.disable.null.includes(te.name)?se():te.tokenize.call(o?Object.assign(Object.create(x),o):x,g,X,se)(J)}}function X(te){return T(S,a),v}function se(te){return a.restore(),++R<M.length?L(M[R]):b}}}function Q(T,o){T.resolveAll&&!i.includes(T)&&i.push(T),T.resolve&&ji(x.events,o,x.events.length-o,T.resolve(x.events.slice(o),x)),T.resolveTo&&(x.events=T.resolveTo(x.events,x))}function H(){const T=A(),o=x.previous,c=x.currentConstruct,h=x.events.length,v=Array.from(p);return{from:h,restore:b};function b(){n=T,x.previous=o,x.currentConstruct=c,x.events.length=h,p=v,Y()}}function Y(){n.line in l&&n.column<2&&(n.column=l[n.line],n.offset+=l[n.line]-1)}}function VK(e,t){const r=t.start._index,n=t.start._bufferIndex,l=t.end._index,i=t.end._bufferIndex;let d;if(r===l)d=[e[r].slice(n,i)];else{if(d=e.slice(r,l),n>-1){const p=d[0];typeof p=="string"?d[0]=p.slice(n):d.shift()}i>0&&d.push(e[l].slice(0,i))}return d}function GK(e,t){let r=-1;const n=[];let l;for(;++r<e.length;){const i=e[r];let d;if(typeof i=="string")d=i;else switch(i){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=t?" ":"	";break}case-1:{if(!t&&l)continue;d=" ";break}default:d=String.fromCharCode(i)}l=i===-2,n.push(d)}return n.join("")}function KK(e){const n={constructs:g7([HK,...(e||{}).extensions||[]]),content:l(cG),defined:[],document:l(dG),flow:l(AK),lazy:{},string:l(IK),text:l(zK)};return n;function l(i){return d;function d(p){return WK(n,i,p)}}}function YK(e){for(;!b7(e););return e}const JC=/[\0\t\n\r]/g;function JK(){let e=1,t="",r=!0,n;return l;function l(i,d,p){const g=[];let x,y,w,j,_;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(d||void 0).decode(i)),w=0,t="",r&&(i.charCodeAt(0)===65279&&w++,r=void 0);w<i.length;){if(JC.lastIndex=w,x=JC.exec(i),j=x&&x.index!==void 0?x.index:i.length,_=i.charCodeAt(j),!x){t=i.slice(w);break}if(_===10&&w===j&&n)g.push(-3),n=void 0;else switch(n&&(g.push(-5),n=void 0),w<j&&(g.push(i.slice(w,j)),e+=j-w),_){case 0:{g.push(65533),e++;break}case 9:{for(y=Math.ceil(e/4)*4,g.push(-2);e++<y;)g.push(-1);break}case 10:{g.push(-4),e=1;break}default:n=!0,e=1}w=j+1}return p&&(n&&g.push(-5),t&&g.push(t),g.push(null)),g}}const ZK=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function XK(e){return e.replace(ZK,QK)}function QK(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const l=r.charCodeAt(1),i=l===120||l===88;return m7(r.slice(i?2:1),i?16:10)}return v_(r)||e}const M7={}.hasOwnProperty;function eY(e,t,r){return typeof t!="string"&&(r=t,t=void 0),tY(r)(YK(KK(r).document().write(JK()(e,t,!0))))}function tY(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ze),autolinkProtocol:H,autolinkEmail:H,atxHeading:i(ve),blockQuote:i(oe),characterEscape:H,characterReference:H,codeFenced:i(ae),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:i(ae,d),codeText:i(ee,d),codeTextData:H,data:H,codeFlowValue:H,definition:i(ue),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:i(Ce),hardBreakEscape:i(ge),hardBreakTrailing:i(ge),htmlFlow:i(Je,d),htmlFlowData:H,htmlText:i(Je,d),htmlTextData:H,image:i(Te),label:d,link:i(ze),listItem:i(he),listItemValue:j,listOrdered:i(vt,w),listUnordered:i(vt),paragraph:i(me),reference:L,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:i(ve),strong:i(Me),thematicBreak:i(ke)},exit:{atxHeading:g(),atxHeadingSequence:G,autolink:g(),autolinkEmail:ne,autolinkProtocol:J,blockQuote:g(),characterEscapeValue:Y,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:te,characterReference:K,codeFenced:g(P),codeFencedFence:E,codeFencedFenceInfo:_,codeFencedFenceMeta:A,codeFlowValue:Y,codeIndented:g(z),codeText:g(v),codeTextData:Y,data:Y,definition:g(),definitionDestinationString:U,definitionLabelString:B,definitionTitleString:D,emphasis:g(),hardBreakEscape:g(o),hardBreakTrailing:g(o),htmlFlow:g(c),htmlFlowData:Y,htmlText:g(h),htmlTextData:Y,image:g(M),label:S,labelText:R,lineEnding:T,link:g(b),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:X,resourceDestinationString:a,resourceTitleString:k,resource:N,setextHeading:g(Q),setextHeadingLineSequence:re,setextHeadingText:$,strong:g(),thematicBreak:g()}};C7(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(_e){let Z={type:"root",children:[]};const q={stack:[Z],tokenStack:[],config:t,enter:p,exit:x,buffer:d,resume:y,data:r},V=[];let ie=-1;for(;++ie<_e.length;)if(_e[ie][1].type==="listOrdered"||_e[ie][1].type==="listUnordered")if(_e[ie][0]==="enter")V.push(ie);else{const ce=V.pop();ie=l(_e,ce,ie)}for(ie=-1;++ie<_e.length;){const ce=t[_e[ie][0]];M7.call(ce,_e[ie][1].type)&&ce[_e[ie][1].type].call(Object.assign({sliceSerialize:_e[ie][2].sliceSerialize},q),_e[ie][1])}if(q.tokenStack.length>0){const ce=q.tokenStack[q.tokenStack.length-1];(ce[1]||ZC).call(q,void 0,ce[0])}for(Z.position={start:So(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:So(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<t.transforms.length;)Z=t.transforms[ie](Z)||Z;return Z}function l(_e,Z,q){let V=Z-1,ie=-1,ce=!1,be,fe,Ae,ht;for(;++V<=q;){const je=_e[V];switch(je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{je[0]==="enter"?ie++:ie--,ht=void 0;break}case"lineEndingBlank":{je[0]==="enter"&&(be&&!ht&&!ie&&!Ae&&(Ae=V),ht=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ht=void 0}if(!ie&&je[0]==="enter"&&je[1].type==="listItemPrefix"||ie===-1&&je[0]==="exit"&&(je[1].type==="listUnordered"||je[1].type==="listOrdered")){if(be){let Ie=V;for(fe=void 0;Ie--;){const pt=_e[Ie];if(pt[1].type==="lineEnding"||pt[1].type==="lineEndingBlank"){if(pt[0]==="exit")continue;fe&&(_e[fe][1].type="lineEndingBlank",ce=!0),pt[1].type="lineEnding",fe=Ie}else if(!(pt[1].type==="linePrefix"||pt[1].type==="blockQuotePrefix"||pt[1].type==="blockQuotePrefixWhitespace"||pt[1].type==="blockQuoteMarker"||pt[1].type==="listItemIndent"))break}Ae&&(!fe||Ae<fe)&&(be._spread=!0),be.end=Object.assign({},fe?_e[fe][1].start:je[1].end),_e.splice(fe||V,0,["exit",be,je[2]]),V++,q++}if(je[1].type==="listItemPrefix"){const Ie={type:"listItem",_spread:!1,start:Object.assign({},je[1].start),end:void 0};be=Ie,_e.splice(V,0,["enter",Ie,je[2]]),V++,q++,Ae=void 0,ht=!0}}}return _e[Z][1]._spread=ce,q}function i(_e,Z){return q;function q(V){p.call(this,_e(V),V),Z&&Z.call(this,V)}}function d(){this.stack.push({type:"fragment",children:[]})}function p(_e,Z,q){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([Z,q||void 0]),_e.position={start:So(Z.start),end:void 0}}function g(_e){return Z;function Z(q){_e&&_e.call(this,q),x.call(this,q)}}function x(_e,Z){const q=this.stack.pop(),V=this.tokenStack.pop();if(V)V[0].type!==_e.type&&(Z?Z.call(this,_e,V[0]):(V[1]||ZC).call(this,_e,V[0]));else throw new Error("Cannot close `"+_e.type+"` ("+ad({start:_e.start,end:_e.end})+"): its not open");q.position.end=So(_e.end)}function y(){return y_(this.stack.pop())}function w(){this.data.expectingFirstListItemValue=!0}function j(_e){if(this.data.expectingFirstListItemValue){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function _(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=_e}function A(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=_e}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function z(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.value=_e.replace(/(\r?\n|\r)$/g,"")}function B(_e){const Z=this.resume(),q=this.stack[this.stack.length-1];q.label=Z,q.identifier=ss(this.sliceSerialize(_e)).toLowerCase()}function D(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.title=_e}function U(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.url=_e}function G(_e){const Z=this.stack[this.stack.length-1];if(!Z.depth){const q=this.sliceSerialize(_e).length;Z.depth=q}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function re(_e){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function Q(){this.data.setextHeadingSlurpLineEnding=void 0}function H(_e){const q=this.stack[this.stack.length-1].children;let V=q[q.length-1];(!V||V.type!=="text")&&(V=pe(),V.position={start:So(_e.start),end:void 0},q.push(V)),this.stack.push(V)}function Y(_e){const Z=this.stack.pop();Z.value+=this.sliceSerialize(_e),Z.position.end=So(_e.end)}function T(_e){const Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){const q=Z.children[Z.children.length-1];q.position.end=So(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Z.type)&&(H.call(this,_e),Y.call(this,_e))}function o(){this.data.atHardBreak=!0}function c(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.value=_e}function h(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.value=_e}function v(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.value=_e}function b(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Z,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function M(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=Z,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function R(_e){const Z=this.sliceSerialize(_e),q=this.stack[this.stack.length-2];q.label=XK(Z),q.identifier=ss(Z).toLowerCase()}function S(){const _e=this.stack[this.stack.length-1],Z=this.resume(),q=this.stack[this.stack.length-1];if(this.data.inReference=!0,q.type==="link"){const V=_e.children;q.children=V}else q.alt=Z}function a(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.url=_e}function k(){const _e=this.resume(),Z=this.stack[this.stack.length-1];Z.title=_e}function N(){this.data.inReference=void 0}function L(){this.data.referenceType="collapsed"}function X(_e){const Z=this.resume(),q=this.stack[this.stack.length-1];q.label=Z,q.identifier=ss(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function se(_e){this.data.characterReferenceType=_e.type}function te(_e){const Z=this.sliceSerialize(_e),q=this.data.characterReferenceType;let V;q?(V=m7(Z,q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):V=v_(Z);const ie=this.stack[this.stack.length-1];ie.value+=V}function K(_e){const Z=this.stack.pop();Z.position.end=So(_e.end)}function J(_e){Y.call(this,_e);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(_e)}function ne(_e){Y.call(this,_e);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(_e)}function oe(){return{type:"blockquote",children:[]}}function ae(){return{type:"code",lang:null,meta:null,value:""}}function ee(){return{type:"inlineCode",value:""}}function ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ce(){return{type:"emphasis",children:[]}}function ve(){return{type:"heading",depth:0,children:[]}}function ge(){return{type:"break"}}function Je(){return{type:"html",value:""}}function Te(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function vt(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function he(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function Me(){return{type:"strong",children:[]}}function pe(){return{type:"text",value:""}}function ke(){return{type:"thematicBreak"}}}function So(e){return{line:e.line,column:e.column,offset:e.offset}}function C7(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?C7(e,n):rY(e,n)}}function rY(e,t){let r;for(r in t)if(M7.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function ZC(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ad({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ad({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ad({start:t.start,end:t.end})+") is still open")}function nY(e){const t=this;t.parser=r;function r(n){return eY(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function iY(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function sY(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function oY(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let l={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(l.data={meta:t.meta}),e.patch(t,l),l=e.applyData(t,l),l={type:"element",tagName:"pre",properties:{},children:[l]},e.patch(t,l),l}function aY(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function lY(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cY(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),l=xc(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let d,p=e.footnoteCounts.get(n);p===void 0?(p=0,e.footnoteOrder.push(n),d=e.footnoteOrder.length):d=i+1,p+=1,e.footnoteCounts.set(n,p);const g={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+l,id:r+"fnref-"+l+(p>1?"-"+p:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(d)}]};e.patch(t,g);const x={type:"element",tagName:"sup",properties:{},children:[g]};return e.patch(t,x),e.applyData(t,x)}function uY(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function dY(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function T7(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const l=e.all(t),i=l[0];i&&i.type==="text"?i.value="["+i.value:l.unshift({type:"text",value:"["});const d=l[l.length-1];return d&&d.type==="text"?d.value+=n:l.push({type:"text",value:n}),l}function fY(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return T7(e,t);const l={src:xc(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(l.title=n.title);const i={type:"element",tagName:"img",properties:l,children:[]};return e.patch(t,i),e.applyData(t,i)}function hY(e,t){const r={src:xc(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function pY(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function gY(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return T7(e,t);const l={href:xc(n.url||"")};n.title!==null&&n.title!==void 0&&(l.title=n.title);const i={type:"element",tagName:"a",properties:l,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function mY(e,t){const r={href:xc(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yY(e,t,r){const n=e.all(t),l=r?vY(r):A7(t),i={},d=[];if(typeof t.checked=="boolean"){const y=n[0];let w;y&&y.type==="element"&&y.tagName==="p"?w=y:(w={type:"element",tagName:"p",properties:{},children:[]},n.unshift(w)),w.children.length>0&&w.children.unshift({type:"text",value:" "}),w.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let p=-1;for(;++p<n.length;){const y=n[p];(l||p!==0||y.type!=="element"||y.tagName!=="p")&&d.push({type:"text",value:`
`}),y.type==="element"&&y.tagName==="p"&&!l?d.push(...y.children):d.push(y)}const g=n[n.length-1];g&&(l||g.type!=="element"||g.tagName!=="p")&&d.push({type:"text",value:`
`});const x={type:"element",tagName:"li",properties:i,children:d};return e.patch(t,x),e.applyData(t,x)}function vY(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=A7(r[n])}return t}function A7(e){const t=e.spread;return t??e.children.length>1}function xY(e,t){const r={},n=e.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++l<n.length;){const d=n[l];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function bY(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function wY(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function _Y(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SY(e,t){const r=e.all(t),n=r.shift(),l=[];if(n){const d={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],d),l.push(d)}if(r.length>0){const d={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},p=h_(t.children[1]),g=l7(t.children[t.children.length-1]);p&&g&&(d.position={start:p,end:g}),l.push(d)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,i),e.applyData(t,i)}function kY(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",d=r&&r.type==="table"?r.align:void 0,p=d?d.length:t.children.length;let g=-1;const x=[];for(;++g<p;){const w=t.children[g],j={},_=d?d[g]:void 0;_&&(j.align=_);let A={type:"element",tagName:i,properties:j,children:[]};w&&(A.children=e.all(w),e.patch(w,A),A=e.applyData(w,A)),x.push(A)}const y={type:"element",tagName:"tr",properties:{},children:e.wrap(x,!0)};return e.patch(t,y),e.applyData(t,y)}function jY(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const XC=9,QC=32;function MY(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),l=0;const i=[];for(;n;)i.push(e8(t.slice(l,n.index),l>0,!0),n[0]),l=n.index+n[0].length,n=r.exec(t);return i.push(e8(t.slice(l),l>0,!1)),i.join("")}function e8(e,t,r){let n=0,l=e.length;if(t){let i=e.codePointAt(n);for(;i===XC||i===QC;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(l-1);for(;i===XC||i===QC;)l--,i=e.codePointAt(l-1)}return l>n?e.slice(n,l):""}function CY(e,t){const r={type:"text",value:MY(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function TY(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const AY={blockquote:iY,break:sY,code:oY,delete:aY,emphasis:lY,footnoteReference:cY,heading:uY,html:dY,imageReference:fY,image:hY,inlineCode:pY,linkReference:gY,link:mY,listItem:yY,list:xY,paragraph:bY,root:wY,strong:_Y,table:SY,tableCell:jY,tableRow:kY,text:CY,thematicBreak:TY,toml:Bh,yaml:Bh,definition:Bh,footnoteDefinition:Bh};function Bh(){}const R7=-1,t0=0,cd=1,Ap=2,b_=3,w_=4,__=5,S_=6,E7=7,I7=8,t8=typeof self=="object"?self:globalThis,RY=(e,t)=>{const r=(l,i)=>(e.set(i,l),l),n=l=>{if(e.has(l))return e.get(l);const[i,d]=t[l];switch(i){case t0:case R7:return r(d,l);case cd:{const p=r([],l);for(const g of d)p.push(n(g));return p}case Ap:{const p=r({},l);for(const[g,x]of d)p[n(g)]=n(x);return p}case b_:return r(new Date(d),l);case w_:{const{source:p,flags:g}=d;return r(new RegExp(p,g),l)}case __:{const p=r(new Map,l);for(const[g,x]of d)p.set(n(g),n(x));return p}case S_:{const p=r(new Set,l);for(const g of d)p.add(n(g));return p}case E7:{const{name:p,message:g}=d;return r(new t8[p](g),l)}case I7:return r(BigInt(d),l);case"BigInt":return r(Object(BigInt(d)),l);case"ArrayBuffer":return r(new Uint8Array(d).buffer,d);case"DataView":{const{buffer:p}=new Uint8Array(d);return r(new DataView(p),d)}}return r(new t8[i](d),l)};return n},r8=e=>RY(new Map,e)(0),kl="",{toString:EY}={},{keys:IY}=Object,Lu=e=>{const t=typeof e;if(t!=="object"||!e)return[t0,t];const r=EY.call(e).slice(8,-1);switch(r){case"Array":return[cd,kl];case"Object":return[Ap,kl];case"Date":return[b_,kl];case"RegExp":return[w_,kl];case"Map":return[__,kl];case"Set":return[S_,kl];case"DataView":return[cd,r]}return r.includes("Array")?[cd,r]:r.includes("Error")?[E7,r]:[Ap,r]},Ph=([e,t])=>e===t0&&(t==="function"||t==="symbol"),zY=(e,t,r,n)=>{const l=(d,p)=>{const g=n.push(d)-1;return r.set(p,g),g},i=d=>{if(r.has(d))return r.get(d);let[p,g]=Lu(d);switch(p){case t0:{let y=d;switch(g){case"bigint":p=I7,y=d.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+g);y=null;break;case"undefined":return l([R7],d)}return l([p,y],d)}case cd:{if(g){let j=d;return g==="DataView"?j=new Uint8Array(d.buffer):g==="ArrayBuffer"&&(j=new Uint8Array(d)),l([g,[...j]],d)}const y=[],w=l([p,y],d);for(const j of d)y.push(i(j));return w}case Ap:{if(g)switch(g){case"BigInt":return l([g,d.toString()],d);case"Boolean":case"Number":case"String":return l([g,d.valueOf()],d)}if(t&&"toJSON"in d)return i(d.toJSON());const y=[],w=l([p,y],d);for(const j of IY(d))(e||!Ph(Lu(d[j])))&&y.push([i(j),i(d[j])]);return w}case b_:return l([p,d.toISOString()],d);case w_:{const{source:y,flags:w}=d;return l([p,{source:y,flags:w}],d)}case __:{const y=[],w=l([p,y],d);for(const[j,_]of d)(e||!(Ph(Lu(j))||Ph(Lu(_))))&&y.push([i(j),i(_)]);return w}case S_:{const y=[],w=l([p,y],d);for(const j of d)(e||!Ph(Lu(j)))&&y.push(i(j));return w}}const{message:x}=d;return l([p,{name:g,message:x}],d)};return i},n8=(e,{json:t,lossy:r}={})=>{const n=[];return zY(!(t||r),!!t,new Map,n)(e),n},Rp=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?r8(n8(e,t)):structuredClone(e):(e,t)=>r8(n8(e,t));function BY(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function PY(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function NY(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||BY,n=e.options.footnoteBackLabel||PY,l=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",d=e.options.footnoteLabelProperties||{className:["sr-only"]},p=[];let g=-1;for(;++g<e.footnoteOrder.length;){const x=e.footnoteById.get(e.footnoteOrder[g]);if(!x)continue;const y=e.all(x),w=String(x.identifier).toUpperCase(),j=xc(w.toLowerCase());let _=0;const A=[],E=e.footnoteCounts.get(w);for(;E!==void 0&&++_<=E;){A.length>0&&A.push({type:"text",value:" "});let B=typeof r=="string"?r:r(g,_);typeof B=="string"&&(B={type:"text",value:B}),A.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+j+(_>1?"-"+_:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(g,_),className:["data-footnote-backref"]},children:Array.isArray(B)?B:[B]})}const P=y[y.length-1];if(P&&P.type==="element"&&P.tagName==="p"){const B=P.children[P.children.length-1];B&&B.type==="text"?B.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(...A)}else y.push(...A);const z={type:"element",tagName:"li",properties:{id:t+"fn-"+j},children:e.wrap(y,!0)};e.patch(x,z),p.push(z)}if(p.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Rp(d),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(p,!0)},{type:"text",value:`
`}]}}const r0=(function(e){if(e==null)return FY;if(typeof e=="function")return n0(e);if(typeof e=="object")return Array.isArray(e)?DY(e):LY(e);if(typeof e=="string")return OY(e);throw new Error("Expected function, string, or object as test")});function DY(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=r0(e[r]);return n0(n);function n(...l){let i=-1;for(;++i<t.length;)if(t[i].apply(this,l))return!0;return!1}}function LY(e){const t=e;return n0(r);function r(n){const l=n;let i;for(i in e)if(l[i]!==t[i])return!1;return!0}}function OY(e){return n0(t);function t(r){return r&&r.type===e}}function n0(e){return t;function t(r,n,l){return!!(UY(r)&&e.call(this,r,typeof n=="number"?n:void 0,l||void 0))}}function FY(){return!0}function UY(e){return e!==null&&typeof e=="object"&&"type"in e}const z7=[],$Y=!0,Ob=!1,qY="skip";function B7(e,t,r,n){let l;typeof t=="function"&&typeof r!="function"?(n=r,r=t):l=t;const i=r0(l),d=n?-1:1;p(e,void 0,[])();function p(g,x,y){const w=g&&typeof g=="object"?g:{};if(typeof w.type=="string"){const _=typeof w.tagName=="string"?w.tagName:typeof w.name=="string"?w.name:void 0;Object.defineProperty(j,"name",{value:"node ("+(g.type+(_?"<"+_+">":""))+")"})}return j;function j(){let _=z7,A,E,P;if((!t||i(g,x,y[y.length-1]||void 0))&&(_=HY(r(g,y)),_[0]===Ob))return _;if("children"in g&&g.children){const z=g;if(z.children&&_[0]!==qY)for(E=(n?z.children.length:-1)+d,P=y.concat(z);E>-1&&E<z.children.length;){const B=z.children[E];if(A=p(B,E,P)(),A[0]===Ob)return A;E=typeof A[1]=="number"?A[1]:E+d}}return _}}}function HY(e){return Array.isArray(e)?e:typeof e=="number"?[$Y,e]:e==null?z7:[e]}function k_(e,t,r,n){let l,i,d;typeof t=="function"&&typeof r!="function"?(i=void 0,d=t,l=r):(i=t,d=r,l=n),B7(e,i,p,l);function p(g,x){const y=x[x.length-1],w=y?y.children.indexOf(g):void 0;return d(g,w,y)}}const Fb={}.hasOwnProperty,WY={};function VY(e,t){const r=t||WY,n=new Map,l=new Map,i=new Map,d={...AY,...r.handlers},p={all:x,applyData:KY,definitionById:n,footnoteById:l,footnoteCounts:i,footnoteOrder:[],handlers:d,one:g,options:r,patch:GY,wrap:JY};return k_(e,function(y){if(y.type==="definition"||y.type==="footnoteDefinition"){const w=y.type==="definition"?n:l,j=String(y.identifier).toUpperCase();w.has(j)||w.set(j,y)}}),p;function g(y,w){const j=y.type,_=p.handlers[j];if(Fb.call(p.handlers,j)&&_)return _(p,y,w);if(p.options.passThrough&&p.options.passThrough.includes(j)){if("children"in y){const{children:E,...P}=y,z=Rp(P);return z.children=p.all(y),z}return Rp(y)}return(p.options.unknownHandler||YY)(p,y,w)}function x(y){const w=[];if("children"in y){const j=y.children;let _=-1;for(;++_<j.length;){const A=p.one(j[_],y);if(A){if(_&&j[_-1].type==="break"&&(!Array.isArray(A)&&A.type==="text"&&(A.value=i8(A.value)),!Array.isArray(A)&&A.type==="element")){const E=A.children[0];E&&E.type==="text"&&(E.value=i8(E.value))}Array.isArray(A)?w.push(...A):w.push(A)}}}return w}}function GY(e,t){e.position&&(t.position=PV(e))}function KY(e,t){let r=t;if(e&&e.data){const n=e.data.hName,l=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const d="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:d}}r.type==="element"&&i&&Object.assign(r.properties,Rp(i)),"children"in r&&r.children&&l!==null&&l!==void 0&&(r.children=l)}return r}function YY(e,t){const r=t.data||{},n="value"in t&&!(Fb.call(r,"hProperties")||Fb.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JY(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function i8(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function s8(e,t){const r=VY(e,t),n=r.one(e,void 0),l=NY(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return l&&i.children.push({type:"text",value:`
`},l),i}function ZY(e,t){return e&&"run"in e?async function(r,n){const l=s8(r,{file:n,...t});await e.run(l,n)}:function(r,n){return s8(r,{file:n,...e||t})}}function o8(e){if(e)throw e}var h1,a8;function XY(){if(a8)return h1;a8=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,l=function(x){return typeof Array.isArray=="function"?Array.isArray(x):t.call(x)==="[object Array]"},i=function(x){if(!x||t.call(x)!=="[object Object]")return!1;var y=e.call(x,"constructor"),w=x.constructor&&x.constructor.prototype&&e.call(x.constructor.prototype,"isPrototypeOf");if(x.constructor&&!y&&!w)return!1;var j;for(j in x);return typeof j>"u"||e.call(x,j)},d=function(x,y){r&&y.name==="__proto__"?r(x,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):x[y.name]=y.newValue},p=function(x,y){if(y==="__proto__")if(e.call(x,y)){if(n)return n(x,y).value}else return;return x[y]};return h1=function g(){var x,y,w,j,_,A,E=arguments[0],P=1,z=arguments.length,B=!1;for(typeof E=="boolean"&&(B=E,E=arguments[1]||{},P=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});P<z;++P)if(x=arguments[P],x!=null)for(y in x)w=p(E,y),j=p(x,y),E!==j&&(B&&j&&(i(j)||(_=l(j)))?(_?(_=!1,A=w&&l(w)?w:[]):A=w&&i(w)?w:{},d(E,{name:y,newValue:g(B,A,j)})):typeof j<"u"&&d(E,{name:y,newValue:j}));return E},h1}var QY=XY();const p1=Bp(QY);function Ub(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eJ(){const e=[],t={run:r,use:n};return t;function r(...l){let i=-1;const d=l.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);p(null,...l);function p(g,...x){const y=e[++i];let w=-1;if(g){d(g);return}for(;++w<l.length;)(x[w]===null||x[w]===void 0)&&(x[w]=l[w]);l=x,y?tJ(y,p)(...x):d(null,...x)}}function n(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return e.push(l),t}}function tJ(e,t){let r;return n;function n(...d){const p=e.length>d.length;let g;p&&d.push(l);try{g=e.apply(this,d)}catch(x){const y=x;if(p&&r)throw y;return l(y)}p||(g&&g.then&&typeof g.then=="function"?g.then(i,l):g instanceof Error?l(g):i(g))}function l(d,...p){r||(r=!0,t(d,...p))}function i(d){l(null,d)}}const hs={basename:rJ,dirname:nJ,extname:iJ,join:sJ,sep:"/"};function rJ(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Kd(e);let r=0,n=-1,l=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;l--;)if(e.codePointAt(l)===47){if(i){r=l+1;break}}else n<0&&(i=!0,n=l+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let d=-1,p=t.length-1;for(;l--;)if(e.codePointAt(l)===47){if(i){r=l+1;break}}else d<0&&(i=!0,d=l+1),p>-1&&(e.codePointAt(l)===t.codePointAt(p--)?p<0&&(n=l):(p=-1,n=d));return r===n?n=d:n<0&&(n=e.length),e.slice(r,n)}function nJ(e){if(Kd(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function iJ(e){Kd(e);let t=e.length,r=-1,n=0,l=-1,i=0,d;for(;t--;){const p=e.codePointAt(t);if(p===47){if(d){n=t+1;break}continue}r<0&&(d=!0,r=t+1),p===46?l<0?l=t:i!==1&&(i=1):l>-1&&(i=-1)}return l<0||r<0||i===0||i===1&&l===r-1&&l===n+1?"":e.slice(l,r)}function sJ(...e){let t=-1,r;for(;++t<e.length;)Kd(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":oJ(r)}function oJ(e){Kd(e);const t=e.codePointAt(0)===47;let r=aJ(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function aJ(e,t){let r="",n=0,l=-1,i=0,d=-1,p,g;for(;++d<=e.length;){if(d<e.length)p=e.codePointAt(d);else{if(p===47)break;p=47}if(p===47){if(!(l===d-1||i===1))if(l!==d-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(g=r.lastIndexOf("/"),g!==r.length-1){g<0?(r="",n=0):(r=r.slice(0,g),n=r.length-1-r.lastIndexOf("/")),l=d,i=0;continue}}else if(r.length>0){r="",n=0,l=d,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(l+1,d):r=e.slice(l+1,d),n=d-l-1;l=d,i=0}else p===46&&i>-1?i++:i=-1}return r}function Kd(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const lJ={cwd:cJ};function cJ(){return"/"}function $b(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function uJ(e){if(typeof e=="string")e=new URL(e);else if(!$b(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return dJ(e)}function dJ(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const g1=["history","path","basename","stem","extname","dirname"];class P7{constructor(t){let r;t?$b(t)?r={path:t}:typeof t=="string"||fJ(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":lJ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<g1.length;){const i=g1[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let l;for(l in r)g1.includes(l)||(this[l]=r[l])}get basename(){return typeof this.path=="string"?hs.basename(this.path):void 0}set basename(t){y1(t,"basename"),m1(t,"basename"),this.path=hs.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hs.dirname(this.path):void 0}set dirname(t){l8(this.basename,"dirname"),this.path=hs.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hs.extname(this.path):void 0}set extname(t){if(m1(t,"extname"),l8(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hs.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){$b(t)&&(t=uJ(t)),y1(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hs.basename(this.path,this.extname):void 0}set stem(t){y1(t,"stem"),m1(t,"stem"),this.path=hs.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const l=this.message(t,r,n);throw l.fatal=!0,l}info(t,r,n){const l=this.message(t,r,n);return l.fatal=void 0,l}message(t,r,n){const l=new Kn(t,r,n);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function m1(e,t){if(e&&e.includes(hs.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hs.sep+"`")}function y1(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function l8(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function fJ(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hJ=(function(e){const n=this.constructor.prototype,l=n[e],i=function(){return l.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),pJ={}.hasOwnProperty;class j_ extends hJ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eJ()}copy(){const t=new j_;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(p1(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(b1("data",this.frozen),this.namespace[t]=r,this):pJ.call(this.namespace,t)&&this.namespace[t]||void 0:t?(b1("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const l=r.call(t,...n);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Nh(t),n=this.parser||this.Parser;return v1("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),v1("process",this.parser||this.Parser),x1("process",this.compiler||this.Compiler),r?l(void 0,r):new Promise(l);function l(i,d){const p=Nh(t),g=n.parse(p);n.run(g,p,function(y,w,j){if(y||!w||!j)return x(y);const _=w,A=n.stringify(_,j);yJ(A)?j.value=A:j.result=A,x(y,j)});function x(y,w){y||!w?d(y):i?i(w):r(void 0,w)}}}processSync(t){let r=!1,n;return this.freeze(),v1("processSync",this.parser||this.Parser),x1("processSync",this.compiler||this.Compiler),this.process(t,l),u8("processSync","process",r),n;function l(i,d){r=!0,o8(i),n=d}}run(t,r,n){c8(t),this.freeze();const l=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(d,p){const g=Nh(r);l.run(t,g,x);function x(y,w,j){const _=w||t;y?p(y):d?d(_):n(void 0,_,j)}}}runSync(t,r){let n=!1,l;return this.run(t,r,i),u8("runSync","run",n),l;function i(d,p){o8(d),l=p,n=!0}}stringify(t,r){this.freeze();const n=Nh(r),l=this.compiler||this.Compiler;return x1("stringify",l),c8(t),l(t,n)}use(t,...r){const n=this.attachers,l=this.namespace;if(b1("use",this.frozen),t!=null)if(typeof t=="function")g(t,r);else if(typeof t=="object")Array.isArray(t)?p(t):d(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(x){if(typeof x=="function")g(x,[]);else if(typeof x=="object")if(Array.isArray(x)){const[y,...w]=x;g(y,w)}else d(x);else throw new TypeError("Expected usable value, not `"+x+"`")}function d(x){if(!("plugins"in x)&&!("settings"in x))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");p(x.plugins),x.settings&&(l.settings=p1(!0,l.settings,x.settings))}function p(x){let y=-1;if(x!=null)if(Array.isArray(x))for(;++y<x.length;){const w=x[y];i(w)}else throw new TypeError("Expected a list of plugins, not `"+x+"`")}function g(x,y){let w=-1,j=-1;for(;++w<n.length;)if(n[w][0]===x){j=w;break}if(j===-1)n.push([x,...y]);else if(y.length>0){let[_,...A]=y;const E=n[j][1];Ub(E)&&Ub(_)&&(_=p1(!0,E,_)),n[j]=[x,_,...A]}}}}const gJ=new j_().freeze();function v1(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function x1(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function b1(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function c8(e){if(!Ub(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function u8(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Nh(e){return mJ(e)?e:new P7(e)}function mJ(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yJ(e){return typeof e=="string"||vJ(e)}function vJ(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const xJ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",d8=[],f8={allowDangerousHtml:!0},bJ=/^(https?|ircs?|mailto|xmpp)$/i,wJ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Bo(e){const t=_J(e),r=SJ(e);return kJ(t.runSync(t.parse(r),r),e)}function _J(e){const t=e.rehypePlugins||d8,r=e.remarkPlugins||d8,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...f8}:f8;return gJ().use(nY).use(r).use(ZY,n).use(t)}function SJ(e){const t=e.children||"",r=new P7;return typeof t=="string"&&(r.value=t),r}function kJ(e,t){const r=t.allowedElements,n=t.allowElement,l=t.components,i=t.disallowedElements,d=t.skipHtml,p=t.unwrapDisallowed,g=t.urlTransform||jJ;for(const y of wJ)Object.hasOwn(t,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+xJ+y.id,void 0);return k_(e,x),FV(e,{Fragment:s.Fragment,components:l,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function x(y,w,j){if(y.type==="raw"&&j&&typeof w=="number")return d?j.children.splice(w,1):j.children[w]={type:"text",value:y.value},w;if(y.type==="element"){let _;for(_ in u1)if(Object.hasOwn(u1,_)&&Object.hasOwn(y.properties,_)){const A=y.properties[_],E=u1[_];(E===null||E.includes(y.tagName))&&(y.properties[_]=g(String(A||""),_,y))}}if(y.type==="element"){let _=r?!r.includes(y.tagName):i?i.includes(y.tagName):!1;if(!_&&n&&typeof w=="number"&&(_=!n(y,w,j)),_&&j&&typeof w=="number")return p&&y.children?j.children.splice(w,1,...y.children):j.children.splice(w,1),w}}}function jJ(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),l=e.indexOf("/");return t===-1||l!==-1&&t>l||r!==-1&&t>r||n!==-1&&t>n||bJ.test(e.slice(0,t))?e:""}function h8(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,l=r.indexOf(t);for(;l!==-1;)n++,l=r.indexOf(t,l+t.length);return n}function MJ(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function CJ(e,t,r){const l=r0((r||{}).ignore||[]),i=TJ(t);let d=-1;for(;++d<i.length;)B7(e,"text",p);function p(x,y){let w=-1,j;for(;++w<y.length;){const _=y[w],A=j?j.children:void 0;if(l(_,A?A.indexOf(_):void 0,j))return;j=_}if(j)return g(x,y)}function g(x,y){const w=y[y.length-1],j=i[d][0],_=i[d][1];let A=0;const P=w.children.indexOf(x);let z=!1,B=[];j.lastIndex=0;let D=j.exec(x.value);for(;D;){const U=D.index,G={index:D.index,input:D.input,stack:[...y,x]};let $=_(...D,G);if(typeof $=="string"&&($=$.length>0?{type:"text",value:$}:void 0),$===!1?j.lastIndex=U+1:(A!==U&&B.push({type:"text",value:x.value.slice(A,U)}),Array.isArray($)?B.push(...$):$&&B.push($),A=U+D[0].length,z=!0),!j.global)break;D=j.exec(x.value)}return z?(A<x.value.length&&B.push({type:"text",value:x.value.slice(A)}),w.children.splice(P,1,...B)):B=[x],P+B.length}}function TJ(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const l=r[n];t.push([AJ(l[0]),RJ(l[1])])}return t}function AJ(e){return typeof e=="string"?new RegExp(MJ(e),"g"):e}function RJ(e){return typeof e=="function"?e:function(){return e}}const w1="phrasing",_1=["autolink","link","image","label"];function EJ(){return{transforms:[LJ],enter:{literalAutolink:zJ,literalAutolinkEmail:S1,literalAutolinkHttp:S1,literalAutolinkWww:S1},exit:{literalAutolink:DJ,literalAutolinkEmail:NJ,literalAutolinkHttp:BJ,literalAutolinkWww:PJ}}}function IJ(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:w1,notInConstruct:_1},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:w1,notInConstruct:_1},{character:":",before:"[ps]",after:"\\/",inConstruct:w1,notInConstruct:_1}]}}function zJ(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function S1(e){this.config.enter.autolinkProtocol.call(this,e)}function BJ(e){this.config.exit.autolinkProtocol.call(this,e)}function PJ(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function NJ(e){this.config.exit.autolinkEmail.call(this,e)}function DJ(e){this.exit(e)}function LJ(e){CJ(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OJ],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),FJ]],{ignore:["link","linkReference"]})}function OJ(e,t,r,n,l){let i="";if(!N7(l)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!UJ(r)))return!1;const d=$J(r+n);if(!d[0])return!1;const p={type:"link",title:null,url:i+t+d[0],children:[{type:"text",value:t+d[0]}]};return d[1]?[p,{type:"text",value:d[1]}]:p}function FJ(e,t,r,n){return!N7(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function UJ(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function $J(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const l=h8(e,"(");let i=h8(e,")");for(;n!==-1&&l>i;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[e,r]}function N7(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Ea(r)||Qp(r))&&(!t||r!==47)}D7.peek=ZJ;function qJ(){this.buffer()}function HJ(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function WJ(){this.buffer()}function VJ(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function GJ(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ss(this.sliceSerialize(e)).toLowerCase(),r.label=t}function KJ(e){this.exit(e)}function YJ(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ss(this.sliceSerialize(e)).toLowerCase(),r.label=t}function JJ(e){this.exit(e)}function ZJ(){return"["}function D7(e,t,r,n){const l=r.createTracker(n);let i=l.move("[^");const d=r.enter("footnoteReference"),p=r.enter("reference");return i+=l.move(r.safe(r.associationId(e),{after:"]",before:i})),p(),d(),i+=l.move("]"),i}function XJ(){return{enter:{gfmFootnoteCallString:qJ,gfmFootnoteCall:HJ,gfmFootnoteDefinitionLabelString:WJ,gfmFootnoteDefinition:VJ},exit:{gfmFootnoteCallString:GJ,gfmFootnoteCall:KJ,gfmFootnoteDefinitionLabelString:YJ,gfmFootnoteDefinition:JJ}}}function QJ(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:D7},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,l,i,d){const p=i.createTracker(d);let g=p.move("[^");const x=i.enter("footnoteDefinition"),y=i.enter("label");return g+=p.move(i.safe(i.associationId(n),{before:g,after:"]"})),y(),g+=p.move("]:"),n.children&&n.children.length>0&&(p.shift(4),g+=p.move((t?`
`:" ")+i.indentLines(i.containerFlow(n,p.current()),t?L7:eZ))),x(),g}}function eZ(e,t,r){return t===0?e:L7(e,t,r)}function L7(e,t,r){return(r?"":"    ")+e}const tZ=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];O7.peek=oZ;function rZ(){return{canContainEols:["delete"],enter:{strikethrough:iZ},exit:{strikethrough:sZ}}}function nZ(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:tZ}],handlers:{delete:O7}}}function iZ(e){this.enter({type:"delete",children:[]},e)}function sZ(e){this.exit(e)}function O7(e,t,r,n){const l=r.createTracker(n),i=r.enter("strikethrough");let d=l.move("~~");return d+=r.containerPhrasing(e,{...l.current(),before:d,after:"~"}),d+=l.move("~~"),i(),d}function oZ(){return"~"}function aZ(e){return e.length}function lZ(e,t){const r=t||{},n=(r.align||[]).concat(),l=r.stringLength||aZ,i=[],d=[],p=[],g=[];let x=0,y=-1;for(;++y<e.length;){const E=[],P=[];let z=-1;for(e[y].length>x&&(x=e[y].length);++z<e[y].length;){const B=cZ(e[y][z]);if(r.alignDelimiters!==!1){const D=l(B);P[z]=D,(g[z]===void 0||D>g[z])&&(g[z]=D)}E.push(B)}d[y]=E,p[y]=P}let w=-1;if(typeof n=="object"&&"length"in n)for(;++w<x;)i[w]=p8(n[w]);else{const E=p8(n);for(;++w<x;)i[w]=E}w=-1;const j=[],_=[];for(;++w<x;){const E=i[w];let P="",z="";E===99?(P=":",z=":"):E===108?P=":":E===114&&(z=":");let B=r.alignDelimiters===!1?1:Math.max(1,g[w]-P.length-z.length);const D=P+"-".repeat(B)+z;r.alignDelimiters!==!1&&(B=P.length+B+z.length,B>g[w]&&(g[w]=B),_[w]=B),j[w]=D}d.splice(1,0,j),p.splice(1,0,_),y=-1;const A=[];for(;++y<d.length;){const E=d[y],P=p[y];w=-1;const z=[];for(;++w<x;){const B=E[w]||"";let D="",U="";if(r.alignDelimiters!==!1){const G=g[w]-(P[w]||0),$=i[w];$===114?D=" ".repeat(G):$===99?G%2?(D=" ".repeat(G/2+.5),U=" ".repeat(G/2-.5)):(D=" ".repeat(G/2),U=D):U=" ".repeat(G)}r.delimiterStart!==!1&&!w&&z.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&B==="")&&(r.delimiterStart!==!1||w)&&z.push(" "),r.alignDelimiters!==!1&&z.push(D),z.push(B),r.alignDelimiters!==!1&&z.push(U),r.padding!==!1&&z.push(" "),(r.delimiterEnd!==!1||w!==x-1)&&z.push("|")}A.push(r.delimiterEnd===!1?z.join("").replace(/ +$/,""):z.join(""))}return A.join(`
`)}function cZ(e){return e==null?"":String(e)}function p8(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function uZ(e,t,r,n){const l=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const d=r.indentLines(r.containerFlow(e,i.current()),dZ);return l(),d}function dZ(e,t,r){return">"+(r?"":" ")+e}function fZ(e,t){return g8(e,t.inConstruct,!0)&&!g8(e,t.notInConstruct,!1)}function g8(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function m8(e,t,r,n){let l=-1;for(;++l<r.unsafe.length;)if(r.unsafe[l].character===`
`&&fZ(r.stack,r.unsafe[l]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function hZ(e,t){const r=String(e);let n=r.indexOf(t),l=n,i=0,d=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===l?++i>d&&(d=i):i=1,l=n+t.length,n=r.indexOf(t,l);return d}function pZ(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function gZ(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function mZ(e,t,r,n){const l=gZ(r),i=e.value||"",d=l==="`"?"GraveAccent":"Tilde";if(pZ(e,r)){const w=r.enter("codeIndented"),j=r.indentLines(i,yZ);return w(),j}const p=r.createTracker(n),g=l.repeat(Math.max(hZ(i,l)+1,3)),x=r.enter("codeFenced");let y=p.move(g);if(e.lang){const w=r.enter(`codeFencedLang${d}`);y+=p.move(r.safe(e.lang,{before:y,after:" ",encode:["`"],...p.current()})),w()}if(e.lang&&e.meta){const w=r.enter(`codeFencedMeta${d}`);y+=p.move(" "),y+=p.move(r.safe(e.meta,{before:y,after:`
`,encode:["`"],...p.current()})),w()}return y+=p.move(`
`),i&&(y+=p.move(i+`
`)),y+=p.move(g),x(),y}function yZ(e,t,r){return(r?"":"    ")+e}function M_(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function vZ(e,t,r,n){const l=M_(r),i=l==='"'?"Quote":"Apostrophe",d=r.enter("definition");let p=r.enter("label");const g=r.createTracker(n);let x=g.move("[");return x+=g.move(r.safe(r.associationId(e),{before:x,after:"]",...g.current()})),x+=g.move("]: "),p(),!e.url||/[\0- \u007F]/.test(e.url)?(p=r.enter("destinationLiteral"),x+=g.move("<"),x+=g.move(r.safe(e.url,{before:x,after:">",...g.current()})),x+=g.move(">")):(p=r.enter("destinationRaw"),x+=g.move(r.safe(e.url,{before:x,after:e.title?" ":`
`,...g.current()}))),p(),e.title&&(p=r.enter(`title${i}`),x+=g.move(" "+l),x+=g.move(r.safe(e.title,{before:x,after:l,...g.current()})),x+=g.move(l),p()),d(),x}function xZ(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Md(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ep(e,t,r){const n=tc(e),l=tc(t);return n===void 0?l===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}F7.peek=bZ;function F7(e,t,r,n){const l=xZ(r),i=r.enter("emphasis"),d=r.createTracker(n),p=d.move(l);let g=d.move(r.containerPhrasing(e,{after:l,before:p,...d.current()}));const x=g.charCodeAt(0),y=Ep(n.before.charCodeAt(n.before.length-1),x,l);y.inside&&(g=Md(x)+g.slice(1));const w=g.charCodeAt(g.length-1),j=Ep(n.after.charCodeAt(0),w,l);j.inside&&(g=g.slice(0,-1)+Md(w));const _=d.move(l);return i(),r.attentionEncodeSurroundingInfo={after:j.outside,before:y.outside},p+g+_}function bZ(e,t,r){return r.options.emphasis||"*"}function wZ(e,t){let r=!1;return k_(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Ob}),!!((!e.depth||e.depth<3)&&y_(e)&&(t.options.setext||r))}function _Z(e,t,r,n){const l=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(n);if(wZ(e,r)){const y=r.enter("headingSetext"),w=r.enter("phrasing"),j=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return w(),y(),j+`
`+(l===1?"=":"-").repeat(j.length-(Math.max(j.lastIndexOf("\r"),j.lastIndexOf(`
`))+1))}const d="#".repeat(l),p=r.enter("headingAtx"),g=r.enter("phrasing");i.move(d+" ");let x=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(x)&&(x=Md(x.charCodeAt(0))+x.slice(1)),x=x?d+" "+x:d,r.options.closeAtx&&(x+=" "+d),g(),p(),x}U7.peek=SZ;function U7(e){return e.value||""}function SZ(){return"<"}$7.peek=kZ;function $7(e,t,r,n){const l=M_(r),i=l==='"'?"Quote":"Apostrophe",d=r.enter("image");let p=r.enter("label");const g=r.createTracker(n);let x=g.move("![");return x+=g.move(r.safe(e.alt,{before:x,after:"]",...g.current()})),x+=g.move("]("),p(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(p=r.enter("destinationLiteral"),x+=g.move("<"),x+=g.move(r.safe(e.url,{before:x,after:">",...g.current()})),x+=g.move(">")):(p=r.enter("destinationRaw"),x+=g.move(r.safe(e.url,{before:x,after:e.title?" ":")",...g.current()}))),p(),e.title&&(p=r.enter(`title${i}`),x+=g.move(" "+l),x+=g.move(r.safe(e.title,{before:x,after:l,...g.current()})),x+=g.move(l),p()),x+=g.move(")"),d(),x}function kZ(){return"!"}q7.peek=jZ;function q7(e,t,r,n){const l=e.referenceType,i=r.enter("imageReference");let d=r.enter("label");const p=r.createTracker(n);let g=p.move("![");const x=r.safe(e.alt,{before:g,after:"]",...p.current()});g+=p.move(x+"]["),d();const y=r.stack;r.stack=[],d=r.enter("reference");const w=r.safe(r.associationId(e),{before:g,after:"]",...p.current()});return d(),r.stack=y,i(),l==="full"||!x||x!==w?g+=p.move(w+"]"):l==="shortcut"?g=g.slice(0,-1):g+=p.move("]"),g}function jZ(){return"!"}H7.peek=MZ;function H7(e,t,r){let n=e.value||"",l="`",i=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(n);)l+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const d=r.unsafe[i],p=r.compilePattern(d);let g;if(d.atBreak)for(;g=p.exec(n);){let x=g.index;n.charCodeAt(x)===10&&n.charCodeAt(x-1)===13&&x--,n=n.slice(0,x)+" "+n.slice(g.index+1)}}return l+n+l}function MZ(){return"`"}function W7(e,t){const r=y_(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}V7.peek=CZ;function V7(e,t,r,n){const l=M_(r),i=l==='"'?"Quote":"Apostrophe",d=r.createTracker(n);let p,g;if(W7(e,r)){const y=r.stack;r.stack=[],p=r.enter("autolink");let w=d.move("<");return w+=d.move(r.containerPhrasing(e,{before:w,after:">",...d.current()})),w+=d.move(">"),p(),r.stack=y,w}p=r.enter("link"),g=r.enter("label");let x=d.move("[");return x+=d.move(r.containerPhrasing(e,{before:x,after:"](",...d.current()})),x+=d.move("]("),g(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(g=r.enter("destinationLiteral"),x+=d.move("<"),x+=d.move(r.safe(e.url,{before:x,after:">",...d.current()})),x+=d.move(">")):(g=r.enter("destinationRaw"),x+=d.move(r.safe(e.url,{before:x,after:e.title?" ":")",...d.current()}))),g(),e.title&&(g=r.enter(`title${i}`),x+=d.move(" "+l),x+=d.move(r.safe(e.title,{before:x,after:l,...d.current()})),x+=d.move(l),g()),x+=d.move(")"),p(),x}function CZ(e,t,r){return W7(e,r)?"<":"["}G7.peek=TZ;function G7(e,t,r,n){const l=e.referenceType,i=r.enter("linkReference");let d=r.enter("label");const p=r.createTracker(n);let g=p.move("[");const x=r.containerPhrasing(e,{before:g,after:"]",...p.current()});g+=p.move(x+"]["),d();const y=r.stack;r.stack=[],d=r.enter("reference");const w=r.safe(r.associationId(e),{before:g,after:"]",...p.current()});return d(),r.stack=y,i(),l==="full"||!x||x!==w?g+=p.move(w+"]"):l==="shortcut"?g=g.slice(0,-1):g+=p.move("]"),g}function TZ(){return"["}function C_(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function AZ(e){const t=C_(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function RZ(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function K7(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function EZ(e,t,r,n){const l=r.enter("list"),i=r.bulletCurrent;let d=e.ordered?RZ(r):C_(r);const p=e.ordered?d==="."?")":".":AZ(r);let g=t&&r.bulletLastUsed?d===r.bulletLastUsed:!1;if(!e.ordered){const y=e.children?e.children[0]:void 0;if((d==="*"||d==="-")&&y&&(!y.children||!y.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(g=!0),K7(r)===d&&y){let w=-1;for(;++w<e.children.length;){const j=e.children[w];if(j&&j.type==="listItem"&&j.children&&j.children[0]&&j.children[0].type==="thematicBreak"){g=!0;break}}}}g&&(d=p),r.bulletCurrent=d;const x=r.containerFlow(e,n);return r.bulletLastUsed=d,r.bulletCurrent=i,l(),x}function IZ(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function zZ(e,t,r,n){const l=IZ(r);let i=r.bulletCurrent||C_(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let d=i.length+1;(l==="tab"||l==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(d=Math.ceil(d/4)*4);const p=r.createTracker(n);p.move(i+" ".repeat(d-i.length)),p.shift(d);const g=r.enter("listItem"),x=r.indentLines(r.containerFlow(e,p.current()),y);return g(),x;function y(w,j,_){return j?(_?"":" ".repeat(d))+w:(_?i:i+" ".repeat(d-i.length))+w}}function BZ(e,t,r,n){const l=r.enter("paragraph"),i=r.enter("phrasing"),d=r.containerPhrasing(e,n);return i(),l(),d}const PZ=r0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function NZ(e,t,r,n){return(e.children.some(function(d){return PZ(d)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function DZ(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Y7.peek=LZ;function Y7(e,t,r,n){const l=DZ(r),i=r.enter("strong"),d=r.createTracker(n),p=d.move(l+l);let g=d.move(r.containerPhrasing(e,{after:l,before:p,...d.current()}));const x=g.charCodeAt(0),y=Ep(n.before.charCodeAt(n.before.length-1),x,l);y.inside&&(g=Md(x)+g.slice(1));const w=g.charCodeAt(g.length-1),j=Ep(n.after.charCodeAt(0),w,l);j.inside&&(g=g.slice(0,-1)+Md(w));const _=d.move(l+l);return i(),r.attentionEncodeSurroundingInfo={after:j.outside,before:y.outside},p+g+_}function LZ(e,t,r){return r.options.strong||"*"}function OZ(e,t,r,n){return r.safe(e.value,n)}function FZ(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function UZ(e,t,r){const n=(K7(r)+(r.options.ruleSpaces?" ":"")).repeat(FZ(r));return r.options.ruleSpaces?n.slice(0,-1):n}const J7={blockquote:uZ,break:m8,code:mZ,definition:vZ,emphasis:F7,hardBreak:m8,heading:_Z,html:U7,image:$7,imageReference:q7,inlineCode:H7,link:V7,linkReference:G7,list:EZ,listItem:zZ,paragraph:BZ,root:NZ,strong:Y7,text:OZ,thematicBreak:UZ};function $Z(){return{enter:{table:qZ,tableData:y8,tableHeader:y8,tableRow:WZ},exit:{codeText:VZ,table:HZ,tableData:k1,tableHeader:k1,tableRow:k1}}}function qZ(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function HZ(e){this.exit(e),this.data.inTable=void 0}function WZ(e){this.enter({type:"tableRow",children:[]},e)}function k1(e){this.exit(e)}function y8(e){this.enter({type:"tableCell",children:[]},e)}function VZ(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,GZ));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function GZ(e,t){return t==="|"?t:e}function KZ(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,l=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:j,table:d,tableCell:g,tableRow:p}};function d(_,A,E,P){return x(y(_,E,P),_.align)}function p(_,A,E,P){const z=w(_,E,P),B=x([z]);return B.slice(0,B.indexOf(`
`))}function g(_,A,E,P){const z=E.enter("tableCell"),B=E.enter("phrasing"),D=E.containerPhrasing(_,{...P,before:i,after:i});return B(),z(),D}function x(_,A){return lZ(_,{align:A,alignDelimiters:n,padding:r,stringLength:l})}function y(_,A,E){const P=_.children;let z=-1;const B=[],D=A.enter("table");for(;++z<P.length;)B[z]=w(P[z],A,E);return D(),B}function w(_,A,E){const P=_.children;let z=-1;const B=[],D=A.enter("tableRow");for(;++z<P.length;)B[z]=g(P[z],_,A,E);return D(),B}function j(_,A,E){let P=J7.inlineCode(_,A,E);return E.stack.includes("tableCell")&&(P=P.replace(/\|/g,"\\$&")),P}}function YZ(){return{exit:{taskListCheckValueChecked:v8,taskListCheckValueUnchecked:v8,paragraph:ZZ}}}function JZ(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:XZ}}}function v8(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function ZZ(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const l=t.children;let i=-1,d;for(;++i<l.length;){const p=l[i];if(p.type==="paragraph"){d=p;break}}d===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function XZ(e,t,r,n){const l=e.children[0],i=typeof e.checked=="boolean"&&l&&l.type==="paragraph",d="["+(e.checked?"x":" ")+"] ",p=r.createTracker(n);i&&p.move(d);let g=J7.listItem(e,t,r,{...n,...p.current()});return i&&(g=g.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,x)),g;function x(y){return y+d}}function QZ(){return[EJ(),XJ(),rZ(),$Z(),YZ()]}function eX(e){return{extensions:[IJ(),QJ(e),nZ(),KZ(e),JZ()]}}const tX={tokenize:aX,partial:!0},Z7={tokenize:lX,partial:!0},X7={tokenize:cX,partial:!0},Q7={tokenize:uX,partial:!0},rX={tokenize:dX,partial:!0},e9={name:"wwwAutolink",tokenize:sX,previous:r9},t9={name:"protocolAutolink",tokenize:oX,previous:n9},Zs={name:"emailAutolink",tokenize:iX,previous:i9},js={};function nX(){return{text:js}}let ya=48;for(;ya<123;)js[ya]=Zs,ya++,ya===58?ya=65:ya===91&&(ya=97);js[43]=Zs;js[45]=Zs;js[46]=Zs;js[95]=Zs;js[72]=[Zs,t9];js[104]=[Zs,t9];js[87]=[Zs,e9];js[119]=[Zs,e9];function iX(e,t,r){const n=this;let l,i;return d;function d(w){return!qb(w)||!i9.call(n,n.previous)||T_(n.events)?r(w):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),p(w))}function p(w){return qb(w)?(e.consume(w),p):w===64?(e.consume(w),g):r(w)}function g(w){return w===46?e.check(rX,y,x)(w):w===45||w===95||Gn(w)?(i=!0,e.consume(w),g):y(w)}function x(w){return e.consume(w),l=!0,g}function y(w){return i&&l&&Zn(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(w)):r(w)}}function sX(e,t,r){const n=this;return l;function l(d){return d!==87&&d!==119||!r9.call(n,n.previous)||T_(n.events)?r(d):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(tX,e.attempt(Z7,e.attempt(X7,i),r),r)(d))}function i(d){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(d)}}function oX(e,t,r){const n=this;let l="",i=!1;return d;function d(w){return(w===72||w===104)&&n9.call(n,n.previous)&&!T_(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),l+=String.fromCodePoint(w),e.consume(w),p):r(w)}function p(w){if(Zn(w)&&l.length<5)return l+=String.fromCodePoint(w),e.consume(w),p;if(w===58){const j=l.toLowerCase();if(j==="http"||j==="https")return e.consume(w),g}return r(w)}function g(w){return w===47?(e.consume(w),i?x:(i=!0,g)):r(w)}function x(w){return w===null||Tp(w)||Lr(w)||Ea(w)||Qp(w)?r(w):e.attempt(Z7,e.attempt(X7,y),r)(w)}function y(w){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(w)}}function aX(e,t,r){let n=0;return l;function l(d){return(d===87||d===119)&&n<3?(n++,e.consume(d),l):d===46&&n===3?(e.consume(d),i):r(d)}function i(d){return d===null?r(d):t(d)}}function lX(e,t,r){let n,l,i;return d;function d(x){return x===46||x===95?e.check(Q7,g,p)(x):x===null||Lr(x)||Ea(x)||x!==45&&Qp(x)?g(x):(i=!0,e.consume(x),d)}function p(x){return x===95?n=!0:(l=n,n=void 0),e.consume(x),d}function g(x){return l||n||!i?r(x):t(x)}}function cX(e,t){let r=0,n=0;return l;function l(d){return d===40?(r++,e.consume(d),l):d===41&&n<r?i(d):d===33||d===34||d===38||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===60||d===63||d===93||d===95||d===126?e.check(Q7,t,i)(d):d===null||Lr(d)||Ea(d)?t(d):(e.consume(d),l)}function i(d){return d===41&&n++,e.consume(d),l}}function uX(e,t,r){return n;function n(p){return p===33||p===34||p===39||p===41||p===42||p===44||p===46||p===58||p===59||p===63||p===95||p===126?(e.consume(p),n):p===38?(e.consume(p),i):p===93?(e.consume(p),l):p===60||p===null||Lr(p)||Ea(p)?t(p):r(p)}function l(p){return p===null||p===40||p===91||Lr(p)||Ea(p)?t(p):n(p)}function i(p){return Zn(p)?d(p):r(p)}function d(p){return p===59?(e.consume(p),n):Zn(p)?(e.consume(p),d):r(p)}}function dX(e,t,r){return n;function n(i){return e.consume(i),l}function l(i){return Gn(i)?r(i):t(i)}}function r9(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Lr(e)}function n9(e){return!Zn(e)}function i9(e){return!(e===47||qb(e))}function qb(e){return e===43||e===45||e===46||e===95||Gn(e)}function T_(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const fX={tokenize:bX,partial:!0};function hX(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:yX,continuation:{tokenize:vX},exit:xX}},text:{91:{name:"gfmFootnoteCall",tokenize:mX},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:pX,resolveTo:gX}}}}function pX(e,t,r){const n=this;let l=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let d;for(;l--;){const g=n.events[l][1];if(g.type==="labelImage"){d=g;break}if(g.type==="gfmFootnoteCall"||g.type==="labelLink"||g.type==="label"||g.type==="image"||g.type==="link")break}return p;function p(g){if(!d||!d._balanced)return r(g);const x=ss(n.sliceSerialize({start:d.end,end:n.now()}));return x.codePointAt(0)!==94||!i.includes(x.slice(1))?r(g):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),t(g))}}function gX(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},e[e.length-1][1].start)},d={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},p=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",l,t],["exit",l,t],["enter",i,t],["enter",d,t],["exit",d,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...p),e}function mX(e,t,r){const n=this,l=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i=0,d;return p;function p(w){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(w),e.exit("gfmFootnoteCallLabelMarker"),g}function g(w){return w!==94?r(w):(e.enter("gfmFootnoteCallMarker"),e.consume(w),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",x)}function x(w){if(i>999||w===93&&!d||w===null||w===91||Lr(w))return r(w);if(w===93){e.exit("chunkString");const j=e.exit("gfmFootnoteCallString");return l.includes(ss(n.sliceSerialize(j)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(w),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(w)}return Lr(w)||(d=!0),i++,e.consume(w),w===92?y:x}function y(w){return w===91||w===92||w===93?(e.consume(w),i++,x):x(w)}}function yX(e,t,r){const n=this,l=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,d=0,p;return g;function g(A){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionLabelMarker"),x}function x(A){return A===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",y):r(A)}function y(A){if(d>999||A===93&&!p||A===null||A===91||Lr(A))return r(A);if(A===93){e.exit("chunkString");const E=e.exit("gfmFootnoteDefinitionLabelString");return i=ss(n.sliceSerialize(E)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),j}return Lr(A)||(p=!0),d++,e.consume(A),A===92?w:y}function w(A){return A===91||A===92||A===93?(e.consume(A),d++,y):y(A)}function j(A){return A===58?(e.enter("definitionMarker"),e.consume(A),e.exit("definitionMarker"),l.includes(i)||l.push(i),kr(e,_,"gfmFootnoteDefinitionWhitespace")):r(A)}function _(A){return t(A)}}function vX(e,t,r){return e.check(Gd,t,e.attempt(fX,t,r))}function xX(e){e.exit("gfmFootnoteDefinition")}function bX(e,t,r){const n=this;return kr(e,l,"gfmFootnoteDefinitionIndent",5);function l(i){const d=n.events[n.events.length-1];return d&&d[1].type==="gfmFootnoteDefinitionIndent"&&d[2].sliceSerialize(d[1],!0).length===4?t(i):r(i)}}function wX(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:l};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function l(d,p){let g=-1;for(;++g<d.length;)if(d[g][0]==="enter"&&d[g][1].type==="strikethroughSequenceTemporary"&&d[g][1]._close){let x=g;for(;x--;)if(d[x][0]==="exit"&&d[x][1].type==="strikethroughSequenceTemporary"&&d[x][1]._open&&d[g][1].end.offset-d[g][1].start.offset===d[x][1].end.offset-d[x][1].start.offset){d[g][1].type="strikethroughSequence",d[x][1].type="strikethroughSequence";const y={type:"strikethrough",start:Object.assign({},d[x][1].start),end:Object.assign({},d[g][1].end)},w={type:"strikethroughText",start:Object.assign({},d[x][1].end),end:Object.assign({},d[g][1].start)},j=[["enter",y,p],["enter",d[x][1],p],["exit",d[x][1],p],["enter",w,p]],_=p.parser.constructs.insideSpan.null;_&&ji(j,j.length,0,e0(_,d.slice(x+1,g),p)),ji(j,j.length,0,[["exit",w,p],["enter",d[g][1],p],["exit",d[g][1],p],["exit",y,p]]),ji(d,x-1,g-x+3,j),g=x+j.length-2;break}}for(g=-1;++g<d.length;)d[g][1].type==="strikethroughSequenceTemporary"&&(d[g][1].type="data");return d}function i(d,p,g){const x=this.previous,y=this.events;let w=0;return j;function j(A){return x===126&&y[y.length-1][1].type!=="characterEscape"?g(A):(d.enter("strikethroughSequenceTemporary"),_(A))}function _(A){const E=tc(x);if(A===126)return w>1?g(A):(d.consume(A),w++,_);if(w<2&&!r)return g(A);const P=d.exit("strikethroughSequenceTemporary"),z=tc(A);return P._open=!z||z===2&&!!E,P._close=!E||E===2&&!!z,p(A)}}}class _X{constructor(){this.map=[]}add(t,r,n){SX(this,t,r,n)}consume(t){if(this.map.sort(function(i,d){return i[0]-d[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let l=n.pop();for(;l;){for(const i of l)t.push(i);l=n.pop()}this.map.length=0}}function SX(e,t,r,n){let l=0;if(!(r===0&&n.length===0)){for(;l<e.map.length;){if(e.map[l][0]===t){e.map[l][1]+=r,e.map[l][2].push(...n);return}l+=1}e.map.push([t,r,n])}}function kX(e,t){let r=!1;const n=[];for(;t<e.length;){const l=e[t];if(r){if(l[0]==="enter")l[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=n.length-1;n[i]=n[i]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function jX(){return{flow:{null:{name:"table",tokenize:MX,resolveAll:CX}}}}function MX(e,t,r){const n=this;let l=0,i=0,d;return p;function p(Y){let T=n.events.length-1;for(;T>-1;){const h=n.events[T][1].type;if(h==="lineEnding"||h==="linePrefix")T--;else break}const o=T>-1?n.events[T][1].type:null,c=o==="tableHead"||o==="tableRow"?$:g;return c===$&&n.parser.lazy[n.now().line]?r(Y):c(Y)}function g(Y){return e.enter("tableHead"),e.enter("tableRow"),x(Y)}function x(Y){return Y===124||(d=!0,i+=1),y(Y)}function y(Y){return Y===null?r(Y):Ht(Y)?i>1?(i=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),_):r(Y):br(Y)?kr(e,y,"whitespace")(Y):(i+=1,d&&(d=!1,l+=1),Y===124?(e.enter("tableCellDivider"),e.consume(Y),e.exit("tableCellDivider"),d=!0,y):(e.enter("data"),w(Y)))}function w(Y){return Y===null||Y===124||Lr(Y)?(e.exit("data"),y(Y)):(e.consume(Y),Y===92?j:w)}function j(Y){return Y===92||Y===124?(e.consume(Y),w):w(Y)}function _(Y){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(Y):(e.enter("tableDelimiterRow"),d=!1,br(Y)?kr(e,A,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):A(Y))}function A(Y){return Y===45||Y===58?P(Y):Y===124?(d=!0,e.enter("tableCellDivider"),e.consume(Y),e.exit("tableCellDivider"),E):G(Y)}function E(Y){return br(Y)?kr(e,P,"whitespace")(Y):P(Y)}function P(Y){return Y===58?(i+=1,d=!0,e.enter("tableDelimiterMarker"),e.consume(Y),e.exit("tableDelimiterMarker"),z):Y===45?(i+=1,z(Y)):Y===null||Ht(Y)?U(Y):G(Y)}function z(Y){return Y===45?(e.enter("tableDelimiterFiller"),B(Y)):G(Y)}function B(Y){return Y===45?(e.consume(Y),B):Y===58?(d=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(Y),e.exit("tableDelimiterMarker"),D):(e.exit("tableDelimiterFiller"),D(Y))}function D(Y){return br(Y)?kr(e,U,"whitespace")(Y):U(Y)}function U(Y){return Y===124?A(Y):Y===null||Ht(Y)?!d||l!==i?G(Y):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(Y)):G(Y)}function G(Y){return r(Y)}function $(Y){return e.enter("tableRow"),re(Y)}function re(Y){return Y===124?(e.enter("tableCellDivider"),e.consume(Y),e.exit("tableCellDivider"),re):Y===null||Ht(Y)?(e.exit("tableRow"),t(Y)):br(Y)?kr(e,re,"whitespace")(Y):(e.enter("data"),Q(Y))}function Q(Y){return Y===null||Y===124||Lr(Y)?(e.exit("data"),re(Y)):(e.consume(Y),Y===92?H:Q)}function H(Y){return Y===92||Y===124?(e.consume(Y),Q):Q(Y)}}function CX(e,t){let r=-1,n=!0,l=0,i=[0,0,0,0],d=[0,0,0,0],p=!1,g=0,x,y,w;const j=new _X;for(;++r<e.length;){const _=e[r],A=_[1];_[0]==="enter"?A.type==="tableHead"?(p=!1,g!==0&&(x8(j,t,g,x,y),y=void 0,g=0),x={type:"table",start:Object.assign({},A.start),end:Object.assign({},A.end)},j.add(r,0,[["enter",x,t]])):A.type==="tableRow"||A.type==="tableDelimiterRow"?(n=!0,w=void 0,i=[0,0,0,0],d=[0,r+1,0,0],p&&(p=!1,y={type:"tableBody",start:Object.assign({},A.start),end:Object.assign({},A.end)},j.add(r,0,[["enter",y,t]])),l=A.type==="tableDelimiterRow"?2:y?3:1):l&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")?(n=!1,d[2]===0&&(i[1]!==0&&(d[0]=d[1],w=Dh(j,t,i,l,void 0,w),i=[0,0,0,0]),d[2]=r)):A.type==="tableCellDivider"&&(n?n=!1:(i[1]!==0&&(d[0]=d[1],w=Dh(j,t,i,l,void 0,w)),i=d,d=[i[1],r,0,0])):A.type==="tableHead"?(p=!0,g=r):A.type==="tableRow"||A.type==="tableDelimiterRow"?(g=r,i[1]!==0?(d[0]=d[1],w=Dh(j,t,i,l,r,w)):d[1]!==0&&(w=Dh(j,t,d,l,r,w)),l=0):l&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")&&(d[3]=r)}for(g!==0&&x8(j,t,g,x,y),j.consume(t.events),r=-1;++r<t.events.length;){const _=t.events[r];_[0]==="enter"&&_[1].type==="table"&&(_[1]._align=kX(t.events,r))}return e}function Dh(e,t,r,n,l,i){const d=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",p="tableContent";r[0]!==0&&(i.end=Object.assign({},Cl(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const g=Cl(t.events,r[1]);if(i={type:d,start:Object.assign({},g),end:Object.assign({},g)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){const x=Cl(t.events,r[2]),y=Cl(t.events,r[3]),w={type:p,start:Object.assign({},x),end:Object.assign({},y)};if(e.add(r[2],0,[["enter",w,t]]),n!==2){const j=t.events[r[2]],_=t.events[r[3]];if(j[1].end=Object.assign({},_[1].end),j[1].type="chunkText",j[1].contentType="text",r[3]>r[2]+1){const A=r[2]+1,E=r[3]-r[2]-1;e.add(A,E,[])}}e.add(r[3]+1,0,[["exit",w,t]])}return l!==void 0&&(i.end=Object.assign({},Cl(t.events,l)),e.add(l,0,[["exit",i,t]]),i=void 0),i}function x8(e,t,r,n,l){const i=[],d=Cl(t.events,r);l&&(l.end=Object.assign({},d),i.push(["exit",l,t])),n.end=Object.assign({},d),i.push(["exit",n,t]),e.add(r+1,0,i)}function Cl(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const TX={name:"tasklistCheck",tokenize:RX};function AX(){return{text:{91:TX}}}function RX(e,t,r){const n=this;return l;function l(g){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(g):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(g),e.exit("taskListCheckMarker"),i)}function i(g){return Lr(g)?(e.enter("taskListCheckValueUnchecked"),e.consume(g),e.exit("taskListCheckValueUnchecked"),d):g===88||g===120?(e.enter("taskListCheckValueChecked"),e.consume(g),e.exit("taskListCheckValueChecked"),d):r(g)}function d(g){return g===93?(e.enter("taskListCheckMarker"),e.consume(g),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),p):r(g)}function p(g){return Ht(g)?t(g):br(g)?e.check({tokenize:EX},t,r)(g):r(g)}}function EX(e,t,r){return kr(e,n,"whitespace");function n(l){return l===null?r(l):t(l)}}function IX(e){return g7([nX(),hX(),wX(e),jX(),AX()])}const zX={};function i0(e){const t=this,r=e||zX,n=t.data(),l=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),d=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);l.push(IX(r)),i.push(QZ()),d.push(eX(r))}var qr=(e=>(e.ACTION="action",e.THINKING="thinking",e.RESULT="result",e))(qr||{}),on=(e=>(e.ACTION="#1e293b",e.THINKING="#64748b",e.RESULT="#059669",e.ERROR="#dc2626",e.WARNING="#d97706",e.INFO="#2563eb",e))(on||{});const s9=({activities:e,maxActivities:t=1/0,onToggleSetup:r,showSetupToggle:n=!1,onClearActivities:l,showDropdownMenu:i=!0})=>{const[d,p]=F.useState([]),[g,x]=F.useState(!0),y=F.useRef(null),[w,j]=F.useState(!1),[_,A]=F.useState(!1),E=F.useRef(null);F.useEffect(()=>{const H=Y=>{E.current&&!E.current.contains(Y.target)&&A(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]),F.useEffect(()=>{const H=[],Y="General";e.forEach(o=>{const c=o.threadTitle||Y;let h;for(let v=H.length-1;v>=0;v--){const b=H[v];if(b.title.replace(/^\[\d{2}:\d{2}:\d{2}\] /,"")===c){h=b;break}}if(!h||h!==H[H.length-1]){const v=o.threadStatus,M=`[${o.timestamp.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}] ${c}`;h={id:`${o.timestamp.getTime()}_${c}`,title:M,activities:[],isExpanded:void 0,lastActivity:o.timestamp,status:v},H.push(h)}h.activities.push(o),o.timestamp>h.lastActivity&&(h.lastActivity=o.timestamp),o.threadStatus&&(h.status=o.threadStatus)});const T=H;T.forEach(o=>{const c=d.find(h=>h.id===o.id);if(c&&c.isExpanded!==void 0)o.isExpanded=c.isExpanded;else if(o.isExpanded===void 0){const h=T.indexOf(o)===T.length-1,v=o.status==="Started";o.isExpanded=h||v}}),p(T)},[e]),F.useEffect(()=>{if(g&&y.current){const H=y.current;setTimeout(()=>{H.scrollTo({top:H.scrollHeight,behavior:"smooth"})},100)}},[d,g]);const P=H=>{const{scrollTop:Y,scrollHeight:T,clientHeight:o}=H.currentTarget,c=T-Y<=o+50;x(c)},z=H=>{p(Y=>Y.map(T=>T.id===H?{...T,isExpanded:!(T.isExpanded??!1)}:T))},B=()=>{const H=!w;j(!w),p(Y=>Y.map(T=>({...T,isExpanded:H})))},D=H=>{const Y={width:"10px",height:"10px"};if(!H.status)return s.jsx(Wi,{style:Y,className:"text-blue-500"});switch(H.status.toLowerCase()){case"started":return s.jsx(Wi,{style:Y,className:"text-blue-500"});case"applied":return s.jsx(Mi,{style:Y,className:"text-green-500"});case"failed":case"error":return s.jsx(Ba,{style:Y,className:"text-red-500"});case"skipped":return s.jsx(Ki,{style:Y,className:"text-yellow-500"});default:return s.jsx(Wi,{style:Y,className:"text-gray-500"})}},U=H=>{switch(H.type){case qr.ACTION:return on.ACTION;case qr.THINKING:return on.THINKING;case qr.RESULT:return on.RESULT;default:return on.ACTION}},G=H=>{switch(H.toLowerCase()){case"started":return{bg:"#dbeafe",text:"#1e40af",border:"#93c5fd"};case"applied":return{bg:"#dcfce7",text:"#166534",border:"#86efac"};case"failed":case"error":return{bg:"#fee2e2",text:"#dc2626",border:"#fca5a5"};case"skipped":return{bg:"#fef3c7",text:"#d97706",border:"#fcd34d"};case"queued":return{bg:"#f3f4f6",text:"#374151",border:"#d1d5db"};default:return{bg:"#f3f4f6",text:"#6b7280",border:"#d1d5db"}}},$=H=>H.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),re=H=>s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",padding:"6px 12px",borderLeft:`2px solid ${U(H)}`,backgroundColor:H.type===qr.THINKING?"#f8fafc":"transparent",marginBottom:"2px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.xxs,color:"#64748b",marginRight:"12px",fontFamily:"monospace",minWidth:"65px",flexShrink:0},children:$(H.timestamp)}),s.jsx("div",{style:{flex:1,minWidth:0},children:s.jsx("div",{style:{color:U(H),fontSize:f.typography.fontSize.sm,lineHeight:"1.4",fontStyle:H.type===qr.THINKING?"italic":"normal",opacity:H.type===qr.THINKING?.8:1,wordBreak:"break-word"},children:s.jsx(Bo,{remarkPlugins:[i0],components:{p:({children:Y})=>s.jsx("p",{style:{margin:"0 0 8px 0"},children:Y}),strong:({children:Y})=>s.jsx("strong",{style:{fontWeight:"600",color:"inherit"},children:Y}),em:({children:Y})=>s.jsx("em",{style:{fontStyle:"italic",color:"inherit"},children:Y}),code:({children:Y})=>s.jsx("code",{style:{backgroundColor:"#f1f5f9",padding:"2px 4px",borderRadius:"3px",fontFamily:"monospace",fontSize:"0.9em",color:"#334155"},children:Y}),pre:({children:Y})=>s.jsx("pre",{style:{backgroundColor:"#f8fafc",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e2e8f0",overflow:"auto",fontSize:"0.9em",margin:"4px 0"},children:Y}),ul:({children:Y})=>s.jsx("span",{style:{display:"inline"},children:Y}),ol:({children:Y})=>s.jsx("span",{style:{display:"inline"},children:Y}),li:({children:Y})=>s.jsxs("span",{style:{display:"inline"},children:[" ",Y]}),blockquote:({children:Y})=>s.jsx("blockquote",{style:{borderLeft:"3px solid #e2e8f0",paddingLeft:"12px",margin:"4px 0",fontStyle:"italic",color:"#64748b"},children:Y})},children:H.text})})})]},H.id),Q=H=>s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("div",{onClick:()=>z(H.id),style:{display:"flex",alignItems:"center",padding:"8px 12px",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",marginBottom:H.isExpanded??!1?"4px":"0",transition:"all 0.2s ease"},onMouseOver:Y=>{Y.currentTarget.style.backgroundColor="#e2e8f0"},onMouseOut:Y=>{Y.currentTarget.style.backgroundColor="#f1f5f9"},children:[H.isExpanded??!1?s.jsx(ks,{style:{width:"10px",height:"10px",marginRight:"8px"},className:"text-gray-600"}):s.jsx(za,{style:{width:"10px",height:"10px",marginRight:"8px"},className:"text-gray-600"}),D(H),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,fontWeight:"600",color:"#1e293b",marginLeft:"8px",flex:1},children:H.title}),H.status&&s.jsx("span",{style:{fontSize:f.typography.fontSize.xxs,fontWeight:"500",padding:"2px 6px",borderRadius:"4px",marginLeft:"8px",backgroundColor:G(H.status).bg,color:G(H.status).text,border:`1px solid ${G(H.status).border}`},children:H.status}),s.jsxs("span",{style:{fontSize:f.typography.fontSize.xs,color:"#64748b",marginLeft:"8px"},children:[H.activities.length," message",H.activities.length!==1?"s":""]})]}),(H.isExpanded??!1)&&s.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#ffffff",overflow:"hidden",padding:"8px 12px",wordBreak:"break-word"},children:H.activities.map(re)})]},H.id);return s.jsx(s.Fragment,{children:s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"16px 24px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.lg,fontWeight:"600",margin:0,color:"#1e293b",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Activity Log"}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n&&s.jsx("button",{onClick:r,style:{padding:"6px 12px",fontSize:f.typography.fontSize.sm,fontWeight:"500",backgroundColor:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:"6px",color:"#374151",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:H=>{H.currentTarget.style.backgroundColor="#e2e8f0"},onMouseOut:H=>{H.currentTarget.style.backgroundColor="#f1f5f9"},children:"View Setup"}),i&&s.jsxs("div",{style:{position:"relative"},ref:E,children:[s.jsx("button",{onClick:()=>A(!_),style:{padding:"6px 8px",fontSize:f.typography.fontSize.sm,fontWeight:"500",backgroundColor:"#f1f5f9",border:"1px solid #d1d5db",borderRadius:"6px",color:"#374151",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:H=>{H.currentTarget.style.backgroundColor="#e2e8f0"},onMouseOut:H=>{H.currentTarget.style.backgroundColor="#f1f5f9"},children:s.jsx(Kw,{size:16})}),_&&s.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",zIndex:1e3,minWidth:"160px"},children:[s.jsxs("button",{onClick:()=>{B(),A(!1)},style:{width:"100%",padding:"8px 12px",fontSize:f.typography.fontSize.sm,fontWeight:"500",backgroundColor:"transparent",border:"none",color:"#374151",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",textAlign:"left"},onMouseOver:H=>{H.currentTarget.style.backgroundColor="#f1f5f9"},onMouseOut:H=>{H.currentTarget.style.backgroundColor="transparent"},children:[s.jsx(e$,{size:16}),w?"Fold All":"Unfold All"]}),l&&s.jsxs("button",{onClick:()=>{l(),A(!1)},style:{width:"100%",padding:"8px 12px",fontSize:f.typography.fontSize.sm,fontWeight:"500",backgroundColor:"transparent",border:"none",color:"#dc2626",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px",textAlign:"left",borderTop:"1px solid #e2e8f0"},onMouseOver:H=>{H.currentTarget.style.backgroundColor="#fef2f2"},onMouseOut:H=>{H.currentTarget.style.backgroundColor="transparent"},children:[s.jsx(Ca,{size:16}),"Clear Activities"]})]})]})]})]}),s.jsxs("div",{ref:y,onScroll:P,style:{flex:1,overflowY:"auto",padding:"16px",backgroundColor:"#fafafa"},children:[d.length===0?s.jsx("div",{style:{textAlign:"center",color:"#64748b",fontSize:f.typography.fontSize.base,padding:"40px 20px"},children:"No activity yet. Start the bot to see activity logs."}):d.map(Q),!g&&s.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",backgroundColor:"#3b82f6",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:f.typography.fontSize.xs,cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:10},onClick:()=>{y.current&&(y.current.scrollTo({top:y.current.scrollHeight,behavior:"smooth"}),x(!0))},children:" Scroll to bottom"})]})]})})},bc=({activities:e=[],onClearActivities:t})=>s.jsx("div",{style:{flex:1,backgroundColor:"#fff",borderLeft:"1px solid #e2e8f0",display:"flex",flexDirection:"column",minHeight:0,height:"100%",overflow:"hidden"},children:s.jsx("div",{style:{flex:1,minHeight:0,overflow:"auto"},children:s.jsx(s9,{activities:e,onClearActivities:t})})}),BX=({activity:e,isTyping:t=!1,onTypingComplete:r})=>{const[n,l]=F.useState(""),[i,d]=F.useState(0),p=F.useRef(null);F.useEffect(()=>(l(e.text),r?.(),()=>{p.current&&clearTimeout(p.current)}),[e.text,r]),F.useEffect(()=>{l(""),d(0)},[e.id]);const g=()=>{const y={size:14,color:e.color,style:{flexShrink:0}};switch(e.type){case qr.ACTION:return s.jsx(hp,{...y});case qr.THINKING:return s.jsx(Gw,{...y});case qr.RESULT:return s.jsx(Mi,{...y});default:return s.jsx(hp,{...y})}},x=()=>e.timestamp.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return s.jsx("div",{style:{padding:"12px 16px",marginBottom:"8px",fontSize:"13px",fontFamily:'Monaco, Menlo, "Courier New", monospace',lineHeight:"1.5",color:e.color,wordWrap:"break-word",whiteSpace:"pre-wrap",backgroundColor:"#fafafa",borderRadius:"6px",border:"1px solid #f1f5f9"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[s.jsx("span",{style:{color:"#64748b",fontSize:"11px",flexShrink:0,marginTop:"2px"},children:x()}),s.jsx("div",{style:{flexShrink:0,marginTop:"1px"},children:g()}),s.jsx("div",{style:{flex:1},children:s.jsx(Bo,{remarkPlugins:[i0],components:{p:({children:y})=>s.jsx("p",{style:{margin:"0 0 8px 0"},children:y}),strong:({children:y})=>s.jsx("strong",{style:{fontWeight:"600",color:"inherit"},children:y}),em:({children:y})=>s.jsx("em",{style:{fontStyle:"italic",color:"inherit"},children:y}),code:({children:y})=>s.jsx("code",{style:{backgroundColor:"#f1f5f9",padding:"2px 4px",borderRadius:"3px",fontFamily:"monospace",fontSize:"0.9em",color:"#334155"},children:y}),pre:({children:y})=>s.jsx("pre",{style:{backgroundColor:"#f8fafc",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e2e8f0",overflow:"auto",fontSize:"0.9em",margin:"4px 0"},children:y})},children:n})})]})})},wc=({activeTab:e,onTabChange:t,disabled:r=!1,queueCount:n})=>{const l=[{id:"setup",label:"Setup"},{id:"queue",label:n&&n>0?`Queue (${n})`:"Queue"}];return s.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc",paddingLeft:"24px",paddingRight:"24px"},children:l.map(i=>s.jsx("button",{onClick:()=>!r&&t(i.id),disabled:r,style:{padding:"12px 16px",border:"none",backgroundColor:"transparent",color:e===i.id?"#3b82f6":"#64748b",fontSize:f.typography.fontSize.base,fontWeight:e===i.id?"600":"400",cursor:r?"not-allowed":"pointer",borderBottom:e===i.id?"2px solid #3b82f6":"2px solid transparent",transition:"all 0.2s ease",opacity:r?.6:1},onMouseEnter:d=>{!r&&e!==i.id&&(d.currentTarget.style.color="#475569")},onMouseLeave:d=>{!r&&e!==i.id&&(d.currentTarget.style.color="#64748b")},children:i.label},i.id))})},PX=({jobDescription:e,country:t,salaryBound:r,experienceLevels:n,remoteTypes:l,jobTypes:i,specificLocations:d,style:p={}})=>{const[g,x]=F.useState(!1),[y,w]=F.useState(!1),{url:j,activeFilters:_}=mU({jobDescription:e,country:t,salaryBound:r,experienceLevels:n,remoteTypes:l,jobTypes:i,specificLocations:d}),A=async()=>{try{await navigator.clipboard.writeText(j),w(!0),setTimeout(()=>w(!1),2e3)}catch(H){console.error("Failed to copy URL:",H)}},E={marginBottom:f.spacing["2xl"],padding:f.spacing.lg,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,...p},P={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:f.spacing.md},z={fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[700],display:"flex",alignItems:"center",gap:f.spacing.sm},B={display:"flex",alignItems:"center",gap:f.spacing.sm,padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[300]}`,marginBottom:g?f.spacing.md:"0"},D={flex:1,fontSize:f.typography.fontSize.xs,fontFamily:"monospace",color:f.colors.neutral[700],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},U={background:"none",border:"none",padding:f.spacing.xs,cursor:"pointer",borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},G={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:f.spacing.sm},$={fontSize:f.typography.fontSize.xs,padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.sm,border:`1px solid ${f.colors.neutral[200]}`},re={fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},Q={color:f.colors.neutral[500]};return s.jsxs("div",{style:E,children:[s.jsxs("div",{style:P,children:[s.jsxs("div",{style:z,children:[s.jsx("span",{children:"LinkedIn Search URL"}),_.length>0&&s.jsxs("span",{style:{fontSize:f.typography.fontSize.xxs,backgroundColor:f.colors.accent.info+"20",color:f.colors.accent.info,padding:"2px 6px",borderRadius:f.borderRadius.full},children:[_.length," filter",_.length!==1?"s":""]})]}),s.jsx("button",{type:"button",onClick:()=>x(!g),style:{...U,color:f.colors.neutral[500]},onMouseEnter:H=>{H.target.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:H=>{H.target.style.backgroundColor="transparent"},children:g?s.jsx(Ud,{size:16}):s.jsx(ks,{size:16})})]}),s.jsxs("div",{style:B,children:[s.jsxs("div",{style:D,children:[j.slice(0,80),"..."]}),s.jsx("button",{type:"button",onClick:A,style:{...U,color:y?f.colors.accent.success:f.colors.neutral[500]},onMouseEnter:H=>{H.target.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:H=>{H.target.style.backgroundColor="transparent"},title:y?"Copied!":"Copy URL",children:s.jsx(sb,{size:14})})]}),y&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:f.colors.accent.success+"10",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.accent.success}40`,marginBottom:g?f.spacing.md:"0",fontSize:f.typography.fontSize.xs,color:f.colors.accent.success},children:[s.jsx(sb,{size:12}),s.jsx("span",{children:"URL copied to clipboard!"})]}),g&&_.length>0&&s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],marginBottom:f.spacing.sm},children:"Active Filters:"}),s.jsx("div",{style:G,children:_.map((H,Y)=>s.jsxs("div",{style:$,children:[s.jsxs("div",{style:re,children:[H.name,":"]}),s.jsx("div",{style:Q,children:H.value})]},Y))})]}),g&&_.length===0&&s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[400],fontStyle:"italic",textAlign:"center",padding:f.spacing.sm},children:"No filters applied - showing all jobs"})]})},_c=({expandedSections:e,onToggleSection:t,userPreferences:r,formData:n,hasATSTemplate:l,atsTemplates:i,selectedResumeId:d,selectedCoverLetterTemplateId:p,refreshTrigger:g,isFiltersLoading:x,isSyncingKeywords:y,isSyncingBlacklist:w,onFormDataChange:j,onUserPreferencesChange:_,onResumeSelect:A,onResumePreview:E,onUploadNew:P,onNavigateToATSCreation:z,onCoverLetterTemplateSelect:B,onCoverLetterTemplatePreview:D,onCreateNewCoverLetterTemplate:U,onFieldBlur:G,onSyncKeywords:$,onSyncBlacklist:re,onClearFilter:Q,isHuntingStarted:H,showLinkedInPreview:Y=!1,getAuthToken:T,customJobsSection:o,hidePersonalizedSection:c=!1,hideAboutSection:h=!1})=>s.jsx("div",{style:{height:"100%",overflowY:"auto",opacity:H?.7:1,minHeight:0},children:s.jsxs("fieldset",{disabled:H,style:{border:"none",padding:"24px",margin:0},children:[!h&&s.jsx(WW,{expandedSections:e,onToggleSection:t,userPreferences:r,formData:n,hasATSTemplate:l,atsTemplates:i,selectedResumeId:d,refreshTrigger:g,onFormDataChange:j,onResumeSelect:A,onResumePreview:E,onUploadNew:P,onNavigateToATSCreation:z,saveFieldOnBlur:G}),o||s.jsx(iV,{expandedSections:e,onToggleSection:t,formData:n,isFiltersLoading:x,selectedResumeId:d,isSyncingKeywords:y,isSyncingBlacklist:w,onFormDataChange:j,onFieldBlur:G,onSyncKeywords:$,onSyncBlacklist:re,onClearFilter:Q,getAuthToken:T}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Advanced Settings",icon:Wp,section:"advancedSettings",expandedSections:e,onToggle:t}),e.advancedSettings&&s.jsx("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:f.colors.neutral[50],borderRadius:"8px",border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{children:[s.jsx(dr,{style:{fontWeight:500,margin:0},children:"Headless Mode (Beta)"}),s.jsx(dr,{color:"secondary",style:{margin:0,fontSize:"12px"},children:"Run browser in background without visible window"})]}),s.jsxs("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:n.headlessOn??!1,onChange:v=>{j({headlessOn:v.target.checked}),G("headlessOn",v.target.checked)},style:{opacity:0,width:0,height:0}}),s.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:n.headlessOn?f.colors.primary.main:f.colors.neutral[300],borderRadius:"24px",transition:"background-color 0.2s"}}),s.jsx("span",{style:{position:"absolute",top:"2px",left:n.headlessOn?"22px":"2px",width:"20px",height:"20px",backgroundColor:"#ffffff",borderRadius:"50%",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})]})]})})]}),!c&&s.jsx(uV,{expandedSections:e,onToggleSection:t,userPreferences:r,selectedCoverLetterTemplateId:p,onCoverLetterTemplateSelect:B,onCoverLetterTemplatePreview:D,onCreateNewCoverLetterTemplate:U,refreshTrigger:g}),Y&&s.jsx("div",{style:{marginTop:"32px",paddingTop:"24px"},children:s.jsx(PX,{jobDescription:n.searchKeywords,country:n.country,salaryBound:n.salaryBound,experienceLevels:n.experienceLevels,remoteTypes:n.remoteTypes,jobTypes:n.jobTypes,specificLocations:n.specificLocations})})]})});var gt=(e=>(e.STARTED="started",e.QUEUED="queued",e.REMOVED="removed",e.SKIPPED="skipped",e.SUBMITTING="submitting",e.FAILED="failed",e.APPLIED="applied",e.INTERVIEWING="interviewing",e.OFFER="offer",e.REJECTED="rejected",e))(gt||{});const A_={started:"Started",queued:"Queued",removed:"Removed",skipped:"Skipped",submitting:"Submitting",failed:"Failed",applied:"Applied",interviewing:"Interviewing",offer:"Offer",rejected:"Rejected"};function NX(){return Object.values(gt)}const DX=["queued","started","submitting"];function b8(e){return!DX.includes(e)}class LX{constructor(){this.authToken=null,this.serviceGatewayUrl=Rn}setAuthToken(t){this.authToken=t}clearAuthToken(){this.authToken=null}getAuthToken(){try{const t=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const n of t){const l=localStorage.getItem(n);if(l){const i=JSON.parse(l);if(i.token)return i.token;if(i.access_token)return i.access_token;if(typeof i=="string")return i}}const r=Object.keys(localStorage);for(const n of r)if(n.includes("auth")||n.includes("supabase"))try{const l=localStorage.getItem(n);if(l){const i=JSON.parse(l);if(i.token||i.access_token)return i.token||i.access_token}}catch{}return null}catch(t){return console.error("Error retrieving auth token:",t),null}}async makeAuthenticatedRequest(t,r={}){const{apiService:n}=await Qt(async()=>{const{apiService:x}=await Promise.resolve().then(()=>Nl);return{apiService:x}},void 0,import.meta.url),l=`${this.serviceGatewayUrl}${t}`;let i;const d=r.method?.toUpperCase()||"GET",p=r.body?JSON.parse(r.body):null,g=r.headers||{};switch(d){case"GET":i=await n.get(l,g);break;case"POST":i=await n.post(l,p,g);break;case"PUT":i=await n.put(l,p,g);break;case"DELETE":i=await n.delete(l,g);break;case"PATCH":i=await n.patch(l,p,g);break;default:throw new Error(`Unsupported HTTP method: ${d}`)}if(!i.ok){const x=await i.text();console.error(`API request failed: ${i.status} ${i.statusText}`,x);const y=new Error(`Request failed: ${i.status} ${i.statusText} - ${x}`);vd(y,i)}return i}async getApplicationHistory(){try{return(await(await this.makeAuthenticatedRequest("/api/application-history/")).json()).applications}catch(t){throw console.error("Error fetching application history:",t),t}}async getApplicationHistoryCount(){try{return(await(await this.makeAuthenticatedRequest("/api/application-history/count")).json()).total_count}catch(t){throw console.error("Error fetching application history count:",t),t}}async getApplicationHistoryByAgentRunId(t){try{return(await this.getApplicationHistory()).filter(n=>n.workflow_run_id===t)}catch(r){throw console.error("Error fetching application history by agent run ID:",r),r}}async updateApplicationStatus(t,r){try{const n={status:r},l=[gt.APPLIED,gt.INTERVIEWING,gt.OFFER,gt.REJECTED];return r===gt.APPLIED?n.application_datetime=new Date().toISOString():l.includes(r)||(n.application_datetime=null),(await(await this.makeAuthenticatedRequest(`/api/application-history/${t}`,{method:"PUT",body:JSON.stringify(n)})).json()).application}catch(n){throw console.error("Error updating application status:",n),n}}async upsertApplicationHistory(t){try{return(await(await this.makeAuthenticatedRequest("/api/application-history/upsert",{method:"POST",body:JSON.stringify(t)})).json()).application}catch(r){throw console.error("Error upserting application history:",r),r}}async deleteApplicationHistory(t){try{await this.makeAuthenticatedRequest(`/api/application-history/${t}`,{method:"DELETE"})}catch(r){throw console.error("Error deleting application history:",r),r}}async updateApplicationHistory(t,r){try{return(await(await this.makeAuthenticatedRequest(`/api/application-history/${t}`,{method:"PUT",body:JSON.stringify(r)})).json()).application}catch(n){throw console.error("Error updating application history:",n),n}}}const an=new LX;class OX{constructor(){this.authToken=null,this.serviceGatewayUrl=Rn}setAuthToken(t){this.authToken=t}getAuthToken(){if(this.authToken)return this.authToken;try{const t=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const r of t){const n=localStorage.getItem(r);if(n){const l=JSON.parse(n);if(l.token)return l.token;if(l.access_token)return l.access_token;if(typeof l=="string")return l}}return null}catch(t){return console.error("Failed to parse auth data from localStorage:",t),null}}async makeAuthenticatedRequest(t,r={}){const n=this.getAuthToken();if(!n)throw new Error("No authentication token available");const l=await fetch(`${this.serviceGatewayUrl}${t}`,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers}});if(l.status===401)throw this.authToken=null,new Error("Authentication required");return l}async listFaqQuestions(){const t=await this.makeAuthenticatedRequest("/api/faq/");if(!t.ok)throw new Error(`Failed to fetch FAQ questions: ${t.statusText}`);return await t.json()}async generateFaqFromResume(t){const r={resume_text:t},n=await this.makeAuthenticatedRequest("/api/faq/generate",{method:"POST",body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to generate FAQ: ${n.statusText}`);return await n.json()}async updateFaqQuestion(t,r){const n=await this.makeAuthenticatedRequest(`/api/faq/${t}`,{method:"PUT",body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to update FAQ question: ${n.statusText}`);if(n.status===204)return{success:!0,message:"Success",faq_question:{id:t,question_text:"",question_type:"text_input",confident:!0,answer:r.answer}};try{return await n.json()}catch{return{success:!0,message:"Success",faq_question:{id:t,question_text:"",question_type:"text_input",confident:!0,answer:r.answer}}}}async upsertFaqQuestion(t){const r=await this.makeAuthenticatedRequest("/api/faq/upsert",{method:"POST",body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to upsert FAQ question: ${r.statusText}`);return await r.json()}async deleteFaqQuestion(t){const r=await this.makeAuthenticatedRequest(`/api/faq/${t}`,{method:"DELETE"});if(!r.ok)throw new Error(`Failed to delete FAQ question: ${r.statusText}`);return await r.json()}}const Ju=new OX;function FX(e){return e.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g," ")}function UX(e,t,r){const n=FX(e),l=t.toLowerCase(),d=`${n}:${l}:`;let p=0;for(let A=0;A<d.length;A++){const E=d.charCodeAt(A);p=(p<<5)-p+E,p=p&p}const g=Math.abs(p),x=g.toString(16).padStart(8,"0").substring(0,8),y=(g*31).toString(16).padStart(8,"0").substring(0,8),w=(g*97).toString(16).padStart(8,"0").substring(0,8),j=(g*211).toString(16).padStart(8,"0").substring(0,8),_=[x,y.substring(0,4),"4"+y.substring(1,4),"8"+w.substring(1,4),w.substring(4,8)+j].join("-");return(_.length!==36||!/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(_))&&console.warn("Generated UUID format is invalid:",_),_}function $X(e){const r={text:"text_input",email:"text_input",phone:"text_input",select:"dropdown"}[e.type]||"text_input";return{id:UX(e.question,r),question_text:e.question,answer:e.answer,question_type:r,...e.type==="select"&&e.options&&{options:e.options},confident:!0,source:"manual"}}class o9{constructor(){this.baseUrl=Rn}async getAuthToken(){return await mr.getValidToken()}async listTemplates(){const{apiService:t}=await Qt(async()=>{const{apiService:n}=await Promise.resolve().then(()=>Nl);return{apiService:n}},void 0,import.meta.url);return(await t.get(`${this.baseUrl}/api/ats/templates/list`)).json()}async getTemplate(t){const{apiService:r}=await Qt(async()=>{const{apiService:i}=await Promise.resolve().then(()=>Nl);return{apiService:i}},void 0,import.meta.url),n=t?`${this.baseUrl}/api/ats/template?id=${t}`:`${this.baseUrl}/api/ats/template`;return(await r.get(n)).json()}async deleteTemplate(){const{apiService:t}=await Qt(async()=>{const{apiService:n}=await Promise.resolve().then(()=>Nl);return{apiService:n}},void 0,import.meta.url);return(await t.delete(`${this.baseUrl}/api/ats/template`)).json()}async saveTemplate(t){const{apiService:r}=await Qt(async()=>{const{apiService:l}=await Promise.resolve().then(()=>Nl);return{apiService:l}},void 0,import.meta.url);return(await r.post(`${this.baseUrl}/api/ats/template`,t)).json()}async cloneHtmlFromPdf(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=new FormData;return n.append("file",t),(await fetch(`${this.baseUrl}/api/ats/clone-html`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n})).json()}async generateOptimized(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");return(await fetch(`${this.baseUrl}/api/ats/generate-optimized`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async analyzeATSScore(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");return(await fetch(`${this.baseUrl}/api/ats/analyze-ats-score`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async checkAdditionalSkills(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");return(await fetch(`${this.baseUrl}/api/ats/check-additional-skills`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async getATSResume(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");return await(await fetch(`${this.baseUrl}/api/ats-resume/${t}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).json()}async createATSResume(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/ats-resume`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await n.json();return n.status===402?{success:!1,error_code:l.detail?.error_code||"AI_RESUME_LIMIT_REACHED",message:l.detail?.message||"AI resume limit reached for your plan",plan_tier:l.detail?.plan_tier,limit:l.detail?.limit,current_usage:l.detail?.current_usage}:l.success?{success:!0,ats_resume_id:l.ats_resume_id,resume:{id:l.ats_resume_id,optimized_html:l.optimized_html},thinking:l.thinking,message:l.message}:l}async listATSResumes(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=t?`${this.baseUrl}/api/ats-resume?template_id=${t}`:`${this.baseUrl}/api/ats-resume`;return(await fetch(n,{headers:{Authorization:`Bearer ${r}`}})).json()}async updateATSResume(t,r){const n=await this.getAuthToken();if(!n)throw new Error("No auth token available");return await(await fetch(`${this.baseUrl}/api/ats-resume/${t}`,{method:"PATCH",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(r)})).json()}}const ln=new o9,_i=Object.freeze(Object.defineProperty({__proto__:null,ATSTemplateApiService:o9,atsTemplateApiService:ln},Symbol.toStringTag,{value:"Module"})),Lh=Rn;class ka{constructor(){}static getInstance(){return ka.instance||(ka.instance=new ka),ka.instance}getAuthToken(){try{const t=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const r of t){const n=localStorage.getItem(r);if(n){const l=JSON.parse(n);if(l.access_token)return l.access_token;if(l.token)return l.token;if(l.jwt)return l.jwt;if(typeof l=="string")return l}}return null}catch(t){return console.error("Error getting auth token:",t),null}}async makeAuthenticatedRequest(t,r={}){const n=this.getAuthToken();if(!n)throw new Error("No authentication token available");const l={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers};return await ql(t,{...r,headers:l})}async uploadCoverLetter(t){try{const r=new FormData;r.append("file",t);const n=this.getAuthToken();if(!n)throw new Error("No authentication token available");const l=await ql(`${Lh}/api/blob/upload?folder=cover_letters`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!l.ok)throw new Error(`Upload failed: ${l.statusText}`);const i=await l.json();if(!i.success||!i.blob_url)throw new Error("Failed to upload file to blob storage");const d=await this.makeAuthenticatedRequest(`${Lh}/api/cover-letter/generated`,{method:"POST",body:JSON.stringify({cover_letter_url:i.blob_url})});if(!d.ok)throw new Error(`Failed to create cover letter record: ${d.statusText}`);const p=await d.json();if(!p.success||!p.id)throw new Error("Failed to create cover letter record");return{success:!0,id:p.id,cover_letter_url:i.blob_url}}catch(r){return console.error("Error uploading cover letter:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async updateApplicationHistoryCoverLetter(t,r){try{return await an.updateApplicationHistory(t,{cover_letter_id:r})}catch(n){return console.error("Error updating application history with cover letter:",n),!1}}async updateCoverLetterHtml(t,r){try{const n=await this.makeAuthenticatedRequest(`${Lh}/api/cover-letter/generated/${t}`,{method:"PATCH",body:JSON.stringify({html_content:r})});if(!n.ok)throw new Error(`Failed to update cover letter: ${n.statusText}`);return(await n.json()).success}catch(n){return console.error("Error updating cover letter HTML:",n),!1}}async getCoverLetterById(t){try{const r=await this.makeAuthenticatedRequest(`${Lh}/api/cover-letter/generated/${t}`,{method:"GET"});if(!r.ok)throw new Error(`Failed to fetch cover letter: ${r.statusText}`);const n=await r.json();if(n.success&&n.cover_letter){const l=n.cover_letter;return{type:l.html_content?"generated":"uploaded",id:l.id,cover_letter_url:l.cover_letter_url,status:"ready",html_content:l.html_content,filename:l.file_name,thinking:l.thinking}}return null}catch(r){return console.error("Error fetching cover letter:",r),{type:"error",status:"error",error:r instanceof Error?r.message:"Unknown error occurred"}}}}const qX=Object.freeze(Object.defineProperty({__proto__:null,default:ka},Symbol.toStringTag,{value:"Module"})),Xr=({width:e,height:t,borderRadius:r="4px"})=>s.jsx("div",{style:{width:e,height:t,backgroundColor:"#f3f4f6",borderRadius:r,animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),j1=({lines:e=1,width:t="100%"})=>s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Array.from({length:e}).map((r,n)=>s.jsx(Xr,{width:n===e-1?"60%":t,height:"16px",borderRadius:"4px"},n))}),HX=()=>s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:"24px 24px 0 24px"},children:[s.jsx("div",{style:{marginBottom:"24px"},children:s.jsx(j1,{lines:1,width:"80%"})}),s.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Xr,{width:"24px",height:"24px",borderRadius:"50%"}),s.jsx(Xr,{width:"200px",height:"20px"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Xr,{width:"24px",height:"24px",borderRadius:"50%"}),s.jsx(Xr,{width:"250px",height:"20px"})]})]}),s.jsx("div",{style:{marginBottom:"24px"},children:s.jsx(Xr,{width:"100%",height:"48px",borderRadius:"8px"})})]}),s.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0 24px",minHeight:0},children:s.jsxs("div",{style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"32px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.05)",marginBottom:"24px"},children:[s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Xr,{width:"70%",height:"32px",borderRadius:"6px"}),s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(Xr,{width:"50%",height:"24px",borderRadius:"6px"})}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"24px"},children:[s.jsx(Xr,{width:"120px",height:"20px"}),s.jsx(Xr,{width:"80px",height:"20px"}),s.jsx(Xr,{width:"140px",height:"20px"}),s.jsx(Xr,{width:"140px",height:"20px"})]})]}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Xr,{width:"200px",height:"24px",borderRadius:"6px"}),s.jsx("div",{style:{marginTop:"16px"},children:s.jsx(Xr,{width:"300px",height:"20px"})}),s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(Xr,{width:"80%",height:"16px"})}),s.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"12px"},children:[s.jsx(Xr,{width:"80px",height:"36px",borderRadius:"6px"}),s.jsx(Xr,{width:"80px",height:"36px",borderRadius:"6px"})]}),s.jsxs("div",{style:{marginTop:"24px",display:"flex",alignItems:"center",gap:"16px"},children:[s.jsx(Xr,{width:"80px",height:"80px",borderRadius:"50%"}),s.jsxs("div",{children:[s.jsx(Xr,{width:"120px",height:"20px"}),s.jsx("div",{style:{marginTop:"4px"},children:s.jsx(Xr,{width:"100px",height:"16px"})})]})]})]}),s.jsxs("div",{children:[s.jsx(Xr,{width:"200px",height:"24px",borderRadius:"6px"}),s.jsxs("div",{style:{marginTop:"16px"},children:[s.jsx(Xr,{width:"100%",height:"20px"}),s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(j1,{lines:3,width:"90%"})})]}),s.jsxs("div",{style:{marginTop:"24px"},children:[s.jsx(Xr,{width:"100%",height:"20px"}),s.jsx("div",{style:{marginTop:"8px"},children:s.jsx(j1,{lines:4,width:"85%"})})]})]})]})}),s.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }
      `})]}),WX=({queuedJobs:e,waitingCount:t,readyCount:r,selectedJobId:n,onJobSelect:l,getJobCardTitle:i})=>s.jsxs("div",{style:{padding:"24px 24px 0 24px"},children:[s.jsxs("div",{style:{marginBottom:"24px",fontSize:f.typography.fontSize.base,color:"#64748b",lineHeight:"1.5"},children:["A total of ",e.length," jobs are queued. By default, I only submit jobs after you have reviewed them."]}),s.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.xl},children:""}),s.jsxs("span",{style:{fontSize:f.typography.fontSize.base,color:t>0?"#f59e0b":"#64748b"},children:["Waiting to be confirmed: ",t]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.xl},children:""}),s.jsxs("span",{style:{fontSize:f.typography.fontSize.base,color:"#64748b"},children:["Submitting in the next hunting session: ",r]})]})]}),e.length>0&&s.jsx("div",{style:{marginBottom:"24px"},children:s.jsxs("select",{value:n,onChange:d=>l(d.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:f.typography.fontSize.base,backgroundColor:"#ffffff",color:"#1f2937",cursor:"pointer"},children:[s.jsx("option",{value:"",disabled:!0,children:"Select a queued job"}),e.map(d=>s.jsx("option",{value:d.id,children:i(d)},d.id))]})})]}),R_=e=>{if(!e)return e;const t=[" - job post","- job post"," -job post","-job post"];let r=e;for(const n of t)r.endsWith(n)&&(r=r.slice(0,-n.length).trim());return r},VX=({job:e})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(ki,{color:"primary",style:{fontWeight:"700",margin:"0 0 4px 0",lineHeight:"1.3"},children:R_(e.job_title)}),s.jsx(FW,{color:"secondary",style:{fontWeight:"600",margin:"0 0 20px 0"},children:e.company_name})]}),s.jsxs("div",{style:{marginBottom:"32px",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsx(ir,{color:"secondary",style:{fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:"Location"}),s.jsx(Ct,{color:"primary",style:{fontWeight:"500"},children:e.location})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsx(ir,{color:"secondary",style:{fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:"Salary"}),s.jsx(Ct,{color:"primary",style:{fontWeight:"500"},children:e.salary})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsx(ir,{color:"secondary",style:{fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:"Posted"}),s.jsx(Ct,{color:"primary",style:{fontWeight:"500"},children:e.posted_date})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsx(ir,{color:"secondary",style:{fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:"Viewed"}),s.jsx(Ct,{color:"primary",style:{fontWeight:"500"},children:e.viewed_date})]})]})]}),Yd=({value:e,onChange:t,readOnly:r=!1,placeholder:n="Enter your HTML content here...",title:l="HTML Source",showToolbar:i=!0,height:d="100%",className:p,style:g,diffAnnotations:x=[],showDiffs:y=!1,history:w,historyIndex:j,onHistoryChange:_})=>{const A=F.useRef(null),E=F.useRef(null),[P,z]=F.useState(!1),[B,D]=F.useState(""),[U,G]=F.useState([]),[$,re]=F.useState(-1),[Q,H]=F.useState([]),[Y,T]=F.useState(-1),[o,c]=F.useState(!1),h=w||Q,v=j!==void 0?j:Y,b=ee=>{_?_(ee,v):H(ee)},M=ee=>{_?_(h,ee):T(ee)};F.useEffect(()=>{e&&h.length===0&&(b([e]),_?_([e],0):T(0))},[e,h.length,_]),F.useEffect(()=>{if(P&&E.current){const ee=setTimeout(()=>{E.current?.focus()},50);return()=>clearTimeout(ee)}},[P]);const R=ee=>{if(!ee)return"";let ue=0;const Ce=2;return ee.replace(/></g,`>
<`).split(`
`).map(ve=>{const ge=ve.trim();if(!ge)return"";ge.startsWith("</")&&(ue=Math.max(0,ue-1));const Je=" ".repeat(ue*Ce)+ge;return ge.startsWith("<")&&!ge.startsWith("</")&&!ge.endsWith("/>")&&ue++,Je}).join(`
`)},S=F.useCallback(ee=>{b(ue=>{const Ce=ue.slice(0,v+1);return Ce.push(ee),Ce.length>50&&(Ce.shift(),M(ve=>ve-1)),Ce}),M(ue=>Math.min(ue+1,49))},[v]),a=F.useCallback(()=>{if(v>0){const ee=v-1,ue=h[ee];c(!0),t(ue),M(ee),setTimeout(()=>c(!1),100)}},[v,h,t]),k=F.useCallback(()=>{if(v<h.length-1){const ee=v+1,ue=h[ee];c(!0),t(ue),M(ee),setTimeout(()=>c(!1),100)}},[v,h,t]),N=ee=>{t(ee),!o&&!r&&S(ee)},L=(ee,ue)=>{if(!A.current)return;const Ce=A.current,ge=Ce.value.substring(0,ee).split(`
`).length-1,Je=getComputedStyle(Ce),Te=parseInt(Je.lineHeight)||parseInt(Je.fontSize)*1.2||20,ze=parseInt(Je.paddingTop)||0,vt=ge*Te+ze,he=Ce.clientHeight/2,me=Math.max(0,vt-he);Ce.scrollTop=me,requestAnimationFrame(()=>{Ce.setSelectionRange(ee,ee+ue);const Me=document.activeElement;Ce.focus(),Ce.setSelectionRange(ee,ee+ue),setTimeout(()=>{Me&&Me!==Ce&&Me.focus()},50)})},X=ee=>{if(!A.current||!ee)return;const ve=A.current.value.indexOf(ee);ve!==-1&&L(ve,ee.length)},se=()=>{A.current&&A.current.setSelectionRange(0,0)},te=ee=>{if(D(ee),!ee||!A.current||!e){G([]),re(-1);return}const ue=e.toLowerCase(),Ce=ee.toLowerCase(),ve=[];let ge=ue.indexOf(Ce);for(;ge!==-1;)ve.push(ge),ge=ue.indexOf(Ce,ge+1);G(ve),re(ve.length>0?0:-1),ve.length>0&&L(ve[0],ee.length)},K=()=>{if(U.length===0)return;const ee=($+1)%U.length;re(ee);const ue=U[ee];L(ue,B.length)},J=()=>{if(U.length===0)return;const ee=$<=0?U.length-1:$-1;re(ee);const ue=U[ee];L(ue,B.length)},ne=()=>{z(!1),D(""),G([]),re(-1),A.current?.focus()},oe=ee=>{if((ee.metaKey||ee.ctrlKey)&&ee.key==="f"){ee.preventDefault(),z(!0),setTimeout(()=>{E.current&&(E.current.focus(),E.current.select())},150);return}r||((ee.metaKey||ee.ctrlKey)&&ee.key==="z"&&!ee.shiftKey?(ee.preventDefault(),a()):(ee.metaKey||ee.ctrlKey)&&(ee.key==="y"||ee.key==="z"&&ee.shiftKey)&&(ee.preventDefault(),k()))},ae=ee=>{ee.key==="Enter"?ee.shiftKey?J():K():ee.key==="Escape"&&ne()};return s.jsxs("div",{className:p,style:{display:"flex",flexDirection:"column",position:"relative",height:d,...g},children:[i&&s.jsxs("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:l}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs},children:[!r&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:a,disabled:v<=0,style:{background:"none",border:"none",cursor:v>0?"pointer":"not-allowed",color:v>0?f.colors.neutral[700]:f.colors.neutral[400],padding:f.spacing.xs,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center"},title:"Undo (Cmd+Z)",children:s.jsx(pq,{size:14})}),s.jsx("button",{onClick:k,disabled:v>=h.length-1,style:{background:"none",border:"none",cursor:v<h.length-1?"pointer":"not-allowed",color:v<h.length-1?f.colors.neutral[700]:f.colors.neutral[400],padding:f.spacing.xs,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center"},title:"Redo (Cmd+Shift+Z)",children:s.jsx(A$,{size:14})})]}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[500],marginLeft:f.spacing.xs},children:"Press Cmd+F to search"})]})]}),P&&s.jsxs("div",{className:"find-box",style:{position:"absolute",top:i?"45px":"10px",right:f.spacing.md,zIndex:10,background:f.colors.neutral.white,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,boxShadow:f.shadows.md,display:"flex",alignItems:"center",padding:f.spacing.sm,gap:f.spacing.xs,fontSize:f.typography.fontSize.xs},children:[s.jsx("input",{ref:E,type:"text",value:B,onChange:ee=>te(ee.target.value),onKeyDown:ae,onBlur:ee=>{const ue=ee.relatedTarget;ue&&ue.closest(".find-box")&&(ee.preventDefault(),E.current?.focus())},placeholder:"Find in HTML...",style:{border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.sm,padding:`${f.spacing.xs} ${f.spacing.sm}`,fontSize:f.typography.fontSize.xs,width:"150px",outline:"none"}}),U.length>0&&s.jsxs("span",{style:{color:f.colors.neutral[500]},children:[$+1," of ",U.length]}),s.jsx("button",{onClick:J,disabled:U.length===0,style:{background:"none",border:"none",cursor:U.length>0?"pointer":"not-allowed",color:U.length>0?f.colors.neutral[700]:f.colors.neutral[400]},children:""}),s.jsx("button",{onClick:K,disabled:U.length===0,style:{background:"none",border:"none",cursor:U.length>0?"pointer":"not-allowed",color:U.length>0?f.colors.neutral[700]:f.colors.neutral[400]},children:""}),s.jsx("button",{onClick:ne,style:{background:"none",border:"none",cursor:"pointer",color:f.colors.neutral[700]},children:""})]}),s.jsxs("div",{style:{flex:1,position:"relative"},children:[s.jsx("textarea",{ref:A,value:e,onChange:ee=>N(ee.target.value),onKeyDown:oe,onBlur:ee=>{if(!r){const ue=R(ee.target.value);ue!==ee.target.value&&N(ue)}},readOnly:r,style:{width:"100%",height:"100%",padding:f.spacing.md,background:r?f.colors.neutral[50]:f.colors.neutral.white,border:"none",outline:"none",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',fontSize:f.typography.fontSize.sm,lineHeight:1.5,resize:"none",color:f.colors.neutral[800]},placeholder:n}),y&&x.length>0&&s.jsxs("div",{style:{position:"absolute",top:0,right:0,width:"300px",height:"100%",background:f.colors.neutral[50],borderLeft:`1px solid ${f.colors.neutral[200]}`,padding:f.spacing.sm,overflow:"auto",fontSize:f.typography.fontSize.xs},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:f.spacing.sm,color:f.colors.neutral[700]},children:"ATS Changes"}),x.map(ee=>s.jsxs("div",{onMouseEnter:()=>{X(ee.optimizedText),ee.onHover?.(ee.optimizedText)},onMouseLeave:()=>{se(),ee.onHoverEnd?.()},style:{marginBottom:f.spacing.md,padding:f.spacing.sm,background:f.colors.neutral.white,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.sm,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"},onMouseOver:ue=>{ue.currentTarget.style.boxShadow=f.shadows.md,ue.currentTarget.style.transform="translateY(-1px)"},onMouseOut:ue=>{ue.currentTarget.style.boxShadow="0 1px 2px 0 rgb(0 0 0 / 0.05)",ue.currentTarget.style.transform="translateY(0)"},children:[s.jsxs("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.xs,color:f.colors.neutral[700]},children:["Line ",ee.line]}),s.jsx("div",{style:{marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.xxs,color:f.colors.neutral[600]},children:ee.description}),s.jsxs("div",{style:{marginBottom:f.spacing.sm},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.xxs,color:f.colors.neutral[500],marginBottom:"2px"},children:"Original:"}),s.jsx("div",{style:{fontFamily:"Monaco, Menlo, monospace",fontSize:"10px",background:f.colors.neutral[100],color:f.colors.neutral[800],padding:"4px 6px",borderRadius:f.borderRadius.sm,marginBottom:"4px",wordBreak:"break-all",lineHeight:1.3,border:`1px solid ${f.colors.neutral[200]}`},children:ee.originalText}),s.jsx("div",{style:{fontSize:f.typography.fontSize.xxs,color:f.colors.neutral[500],marginBottom:"2px"},children:"Optimized:"}),s.jsx("div",{style:{fontFamily:"Monaco, Menlo, monospace",fontSize:"10px",background:f.colors.neutral[100],color:f.colors.neutral[800],padding:"4px 6px",borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm,wordBreak:"break-all",lineHeight:1.3,border:`1px solid ${f.colors.neutral[200]}`},children:ee.optimizedText})]}),s.jsxs("button",{onClick:()=>ee.onRevert(ee.id),style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",background:f.colors.neutral.white,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.sm,cursor:"pointer",fontSize:f.typography.fontSize.xxs,color:f.colors.neutral[700]},children:[s.jsx(fq,{size:10}),"Revert"]})]},ee.id))]})]})]})},M1=e=>e>=80?"#10b981":e>=60?"#f59e0b":"#ef4444",GX=e=>e>=80?"Excellent match!":e>=60?"Good potential!":"Needs improvement",Oh=e=>e>0?"#10b981":e<0?"#ef4444":"#6b7280",w8=({score:e,title:t,description:r,showImprovement:n=!1,improvement:l=0,size:i="md"})=>{const p={sm:{circleSize:60,innerSize:45,fontSize:"xl"},md:{circleSize:80,innerSize:60,fontSize:"h2"},lg:{circleSize:100,innerSize:75,fontSize:"display"}}[i],g=r||GX(e);return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xl,padding:f.spacing.lg,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{width:`${p.circleSize}px`,height:`${p.circleSize}px`,borderRadius:"50%",background:`conic-gradient(${M1(e)} ${e*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexShrink:0},children:s.jsx(wr,{style:{width:`${p.innerSize}px`,height:`${p.innerSize}px`,borderRadius:"50%",backgroundColor:f.colors.secondary.main,display:"flex",alignItems:"center",justifyContent:"center",color:M1(e),fontWeight:f.typography.fontWeight.bold,fontSize:f.typography.fontSize[p.fontSize]},children:e})}),s.jsxs("div",{style:{flex:1},children:[s.jsx(wi,{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:t}),s.jsx(Ct,{style:{color:M1(e),fontWeight:f.typography.fontWeight.medium,marginBottom:n?f.spacing.sm:"0"},children:g}),n&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs,marginTop:f.spacing.sm},children:[l>0?s.jsx(Xw,{size:16,style:{color:Oh(l)}}):l<0?s.jsx(FR,{size:16,style:{color:Oh(l)}}):s.jsx(DR,{size:16,style:{color:Oh(l)}}),s.jsxs(Ct,{style:{color:Oh(l),fontWeight:f.typography.fontWeight.semibold,fontSize:f.typography.fontSize.sm},children:[l>0?"+":"",l," points",l===0?" (no change)":l>0?" improvement":" decrease"]})]})]})]})},_8=e=>e>=8?"#10b981":e>=6?"#f59e0b":"#ef4444",Fh=e=>e>0?"#10b981":e<0?"#ef4444":"#6b7280",KX=({beforeAlignments:e,afterAlignments:t,title:r="Requirements Analysis Comparison",showDetails:n=!0})=>{const[l,i]=F.useState(new Set),[d,p]=F.useState(!1),g=_=>{const A=new Set(l);A.has(_)?A.delete(_):A.add(_),i(A)},x=e.map((_,A)=>{const E=t.find(z=>z.requirement===_.requirement)||_,P=E.alignment_score-_.alignment_score;return{requirement:_.requirement,beforeScore:_.alignment_score,afterScore:E.alignment_score,improvement:P,beforeExplanation:_.reason,afterExplanation:E.reason,index:A}}),w=[...d?x.filter(_=>_.improvement>0):x].sort((_,A)=>A.improvement-_.improvement),j=x.filter(_=>_.improvement>0).length;return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[s.jsx(wi,{style:{fontWeight:"600",color:"#111827",margin:0},children:r}),s.jsxs("button",{onClick:()=>p(!d),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:d?f.colors.accent.success:f.colors.neutral[100],color:d?f.colors.secondary.main:f.colors.neutral[600],border:"none",borderRadius:f.borderRadius.sm,cursor:"pointer",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,transition:"all 0.2s ease"},children:[s.jsx(Uo,{size:14}),d?`Improved Only (${j})`:`Show All (${j} improved)`]})]}),s.jsx("div",{style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:w.map((_,A)=>{const E=l.has(_.index),P=A===w.length-1;return s.jsxs("div",{style:{borderBottom:P?"none":"1px solid #f3f4f6"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"16px",cursor:n?"pointer":"default"},onClick:()=>n&&g(_.index),children:[s.jsx("div",{style:{marginTop:"2px",flexShrink:0},children:_.afterScore>=7?s.jsx(Mi,{size:16,style:{color:"#10b981"}}):s.jsx(Ba,{size:16,style:{color:"#ef4444"}})}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx(Ct,{style:{color:"#111827",fontWeight:"500",marginBottom:"4px",wordBreak:"break-word"},children:_.requirement}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[_.improvement>0?s.jsx(Xw,{size:14,style:{color:Fh(_.improvement)}}):_.improvement<0?s.jsx(FR,{size:14,style:{color:Fh(_.improvement)}}):s.jsx(DR,{size:14,style:{color:Fh(_.improvement)}}),s.jsxs(ir,{style:{color:Fh(_.improvement),fontWeight:"600"},children:[_.improvement>0?"+":"",_.improvement,_.improvement===0?" (no change)":_.improvement>0?" improved":" decreased"]})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx(ir,{style:{color:"#6b7280",fontSize:"10px",textTransform:"uppercase"},children:"Before"}),s.jsx("div",{style:{fontSize:f.typography.fontSize.lg,fontWeight:"700",color:_8(_.beforeScore),minWidth:"24px"},children:_.beforeScore})]}),s.jsx("div",{style:{color:"#d1d5db",fontSize:"12px"},children:""}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx(ir,{style:{color:"#6b7280",fontSize:"10px",textTransform:"uppercase"},children:"After"}),s.jsx("div",{style:{fontSize:f.typography.fontSize.lg,fontWeight:"700",color:_8(_.afterScore),minWidth:"24px"},children:_.afterScore})]})]}),n&&s.jsx("div",{style:{marginTop:"2px",flexShrink:0},children:E?s.jsx(Ud,{size:16,style:{color:"#6b7280"}}):s.jsx(ks,{size:16,style:{color:"#6b7280"}})})]}),n&&E&&s.jsx("div",{style:{padding:"0 16px 16px 44px",borderTop:"1px solid #f3f4f6",backgroundColor:"#f9fafb"},children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginTop:"12px"},children:[s.jsxs("div",{children:[s.jsx(ir,{style:{color:"#6b7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"6px",display:"block"},children:"Before Analysis"}),s.jsx(ir,{style:{color:"#374151",lineHeight:"1.4"},children:_.beforeExplanation})]}),s.jsxs("div",{children:[s.jsx(ir,{style:{color:"#6b7280",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"6px",display:"block"},children:"After Analysis"}),s.jsx(ir,{style:{color:"#374151",lineHeight:"1.4"},children:_.afterExplanation})]})]})})]},_.index)})})]})},YX=({initialScore:e,initialAlignments:t,finalScore:r,finalAlignments:n,improvement:l,atsKeywords:i=[],defaultVisible:d=!0,title:p="ATS Score Analysis"})=>{const[g,x]=F.useState(d),w=(()=>{if(!t||!n)return 0;let j=0;return t.forEach(_=>{const A=n.find(E=>E.requirement===_.requirement);A&&A.alignment_score>_.alignment_score&&j++}),j})();return g?s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,overflow:"hidden",marginBottom:f.spacing.md},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${f.spacing.lg} ${f.spacing.xl}`,borderBottom:`1px solid ${f.colors.neutral[100]}`,backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(ib,{size:20,style:{color:f.colors.accent.info}}),s.jsx(ki,{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:p})]}),s.jsx("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:s.jsx("button",{onClick:()=>x(!1),style:{display:"flex",alignItems:"center",gap:f.spacing.xs,padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:"transparent",border:"none",cursor:"pointer",color:f.colors.neutral[600]},children:s.jsx(os,{size:16})})})]}),s.jsxs("div",{style:{padding:f.spacing.xl},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:f.spacing.md,marginBottom:f.spacing.xl},children:[s.jsxs("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx(Ct,{style:{color:f.colors.accent.info,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.xs},children:"Requirements Analyzed"}),s.jsx(wi,{style:{color:f.colors.neutral[800],margin:0},children:t.length})]}),s.jsxs("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx(Ct,{style:{color:f.colors.accent.success,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.xs},children:"Improved Alignments"}),s.jsx(wi,{style:{color:f.colors.neutral[800],margin:0},children:w})]}),s.jsxs("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx(Ct,{style:{color:f.colors.accent.info,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.xs},children:"Score Improvement"}),s.jsxs(wi,{style:{color:f.colors.neutral[800],margin:0},children:["+",l," points"]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:f.spacing.xl,marginBottom:f.spacing["2xl"]},children:[s.jsxs("div",{children:[s.jsx(wi,{style:{color:f.colors.neutral[500],fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm,textAlign:"center"},children:"Before Optimization"}),s.jsx(w8,{score:e,title:"Initial ATS Score",size:"md"})]}),s.jsxs("div",{children:[s.jsx(wi,{style:{color:f.colors.neutral[500],fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm,textAlign:"center"},children:"After Optimization"}),s.jsx(w8,{score:r,title:"Optimized ATS Score",showImprovement:!0,improvement:l,size:"md"})]})]}),s.jsx(KX,{beforeAlignments:t,afterAlignments:n,title:"Detailed Requirements Analysis",showDetails:!0}),i.length>0&&s.jsxs("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`,marginTop:f.spacing.lg},children:[s.jsxs(Ct,{style:{color:f.colors.accent.success,fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["ATS Keywords Added: (",i.length," keywords)"]}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:f.spacing.sm},children:[i.slice(0,6).map((j,_)=>s.jsx("span",{style:{padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:"#3B82F6",color:"#FFFFFF",borderRadius:f.borderRadius.sm,fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,border:"1px solid #1D4ED8"},children:j},_)),i.length>6&&s.jsxs("span",{style:{padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:f.colors.neutral[200],color:f.colors.neutral[600],borderRadius:f.borderRadius.sm,fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium},children:["+",i.length-6," more"]})]})]})]})]}):s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:f.colors.neutral[50],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,cursor:"pointer",marginBottom:f.spacing.md},onClick:()=>x(!0),children:[s.jsx($d,{size:16,style:{color:f.colors.neutral[500]}}),s.jsx(ir,{style:{color:f.colors.neutral[500],fontWeight:f.typography.fontWeight.medium},children:"Show ATS Comparison"})]})},a9=({originalHtml:e,optimizedHtml:t,onOptimizedHtmlChange:r,initialATSScore:n,initialATSAlignments:l=[],finalATSScore:i,finalATSAlignments:d=[],atsImprovement:p=0,keywordsToAdd:g=[],addressableRequirements:x=[],thinking:y,showThinking:w=!0,allowEditing:j=!0,defaultViewMode:_="preview"})=>{const[A,E]=F.useState(_),[P,z]=F.useState(!1),[B,D]=F.useState([]),[U,G]=F.useState(!1),[$,re]=F.useState(t),[Q,H]=F.useState([]),[Y,T]=F.useState(-1);F.useEffect(()=>{re(t)},[t]),F.useEffect(()=>{e&&$&&h()},[e,$]),F.useEffect(()=>{$&&Q.length===0&&(H([$]),T(0))},[$,Q.length]);const o=a=>{const k=document.createElement("div");return k.innerHTML=a,k.querySelectorAll("script, style").forEach(L=>L.remove()),k.textContent||k.innerText||""},c=a=>{const k=[],N=a.split(`
`);let L="",X="section",se=0;for(let te=0;te<N.length;te++){const K=N[te],J=K.trim();if(!J){L+=K+`
`;continue}const ne=o(K).trim();if((J.match(/<h[1-3][^>]*>/i)||J.match(/<div[^>]*class[^>]*(?:section|header|content|experience|education|skills|summary)[^>]*>/i)||J.match(/<(?:section|header|main|article)[^>]*>/i)||ne&&ne.match(/^(summary|experience|education|skills|projects|references|contact)/i))&&L.trim()){const ae=o(L).trim();ae&&ae.length>20&&k.push({content:ae,type:X,startLine:se+1,endLine:te,htmlChunk:L.trim()}),L=K+`
`,se=te,J.match(/<h[1-3][^>]*>/i)||ne.match(/^(summary|objective)/i)?X="summary":ne.match(/^(experience|work|employment)/i)?X="experience":ne.match(/^(education|academic)/i)?X="education":ne.match(/^(skills|technical|technologies)/i)?X="skills":ne.match(/^(projects|portfolio)/i)?X="projects":ne.match(/^(contact|phone|email)/i)?X="contact":X="section"}else L+=K+`
`}if(L.trim()){const te=o(L).trim();te&&te.length>20&&k.push({content:te,type:X,startLine:se+1,endLine:N.length,htmlChunk:L.trim()})}return k},h=()=>{const a=[];try{const k=c(e),N=c($),L=J=>{const ne={};return J.forEach(oe=>{ne[oe.type]||(ne[oe.type]=[]),ne[oe.type].push(oe)}),ne},X=L(k),se=L(N),te=new Set([...Object.keys(X),...Object.keys(se)]);let K=0;for(const J of te){const ne=X[J]||[],oe=se[J]||[],ae=ne.map(ue=>ue.content).join(" ").trim(),ee=oe.map(ue=>ue.content).join(" ").trim();if(!ae&&ee){const ue=oe[0];a.push({id:`diff-${K++}`,line:ue?.startLine||1,description:`New ${J} section added`,originalText:"",optimizedText:ee.substring(0,300)+(ee.length>300?"...":""),onRevert:Ce=>b(Ce,oe,[])})}else if(ae&&!ee){const ue=ne[0];a.push({id:`diff-${K++}`,line:ue?.startLine||1,description:`${J} section removed`,originalText:ae.substring(0,300)+(ae.length>300?"...":""),optimizedText:"",onRevert:Ce=>b(Ce,[],ne)})}else if(ae&&ee&&ae!==ee){const ue=v(ae,ee);if(ue<.8){const Ce=Math.round((1-ue)*100),ve=oe[0];a.push({id:`diff-${K++}`,line:ve?.startLine||1,description:`${J} section modified (${Ce}% changed)`,originalText:ae.substring(0,300)+(ae.length>300?"...":""),optimizedText:ee.substring(0,300)+(ee.length>300?"...":""),onRevert:ge=>b(ge,oe,ne)})}}}if(a.length===0){const J=o(e).trim(),ne=o($).trim();if(J!==ne){const oe=v(J,ne);if(oe<.95){const ae=Math.round((1-oe)*100);a.push({id:"diff-document-0",line:1,description:`Resume content modified (${ae}% changed)`,originalText:J.substring(0,400)+(J.length>400?"...":""),optimizedText:ne.substring(0,400)+(ne.length>400?"...":""),onRevert:ee=>{S(e);const ue=Q.slice(0,Y+1);ue.push(e),ue.length>50&&ue.shift();const Ce=ue.length-1;H(ue),T(Ce),D([])}})}}}}catch(k){console.error("Error in major section diff algorithm:",k),M();return}D(a)},v=(a,k)=>{const N=ne=>ne.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),L=N(a),X=N(k);if(L===X||L.length===0&&X.length===0)return 1;if(L.length===0||X.length===0)return 0;const se=new Set(L.split(" ")),te=new Set(X.split(" ")),K=new Set([...se].filter(ne=>te.has(ne))),J=new Set([...se,...te]);return K.size/J.size},b=(a,k,N)=>{const L=$.split(`
`),X=[...k].sort((J,ne)=>ne.startLine-J.startLine);for(const J of X){const ne=J.startLine-1,oe=J.endLine-1;L.splice(ne,oe-ne+1)}if(N.length>0){const J=k.length>0?k[0].startLine-1:0,ne=[];N.forEach(oe=>{ne.push(...oe.htmlChunk.split(`
`))}),L.splice(J,0,...ne)}const se=L.join(`
`);S(se);const te=Q.slice(0,Y+1);te.push(se),te.length>50&&te.shift();const K=te.length-1;H(te),T(K),D(J=>J.filter(ne=>ne.id!==a))},M=()=>{const a=[];try{const k=e.split(`
`),N=$.split(`
`);let L=0;const X=Math.max(k.length,N.length);for(let se=0;se<X;se++){const te=k[se]||"",K=N[se]||"";if(te.trim()!==K.trim()){const J=o(te).trim(),ne=o(K).trim();if(J||ne){let oe="Line modified";!J&&ne?oe="Content added":J&&!ne&&(oe="Content removed"),a.push({id:`diff-fallback-${L++}`,line:se+1,description:oe,originalText:J.substring(0,200)+(J.length>200?"...":""),optimizedText:ne.substring(0,200)+(ne.length>200?"...":""),onRevert:ae=>{S(e);const ee=Q.slice(0,Y+1);ee.push(e),ee.length>50&&ee.shift();const ue=ee.length-1;H(ee),T(ue),D([])}})}}}D(a)}catch(k){console.error("Fallback diff also failed:",k);const N=o(e).trim(),L=o($).trim();D(N!==L?[{id:"diff-ultimate-fallback",line:1,description:"Resume content has been modified",originalText:N.substring(0,200)+"...",optimizedText:L.substring(0,200)+"...",onRevert:X=>{S(e),D([])}}]:[])}},R=(a,k)=>{H(a),T(k)},S=a=>{re(a),r?.(a)};return s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{display:"flex",gap:f.spacing.md,alignItems:"center",marginBottom:w&&y?f.spacing.md:0},children:[s.jsxs("div",{style:{display:"flex",border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,overflow:"hidden"},children:[s.jsxs("button",{onClick:()=>E("preview"),style:{padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:A==="preview"?f.colors.primary.main:"transparent",color:A==="preview"?"#ffffff":f.colors.neutral[700],border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(os,{size:16}),"Preview"]}),s.jsxs("button",{onClick:()=>E("code"),style:{padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:A==="code"?f.colors.primary.main:"transparent",color:A==="code"?"#ffffff":f.colors.neutral[700],border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(VU,{size:16}),"Code"]}),n!==void 0&&i!==void 0&&s.jsxs("button",{onClick:()=>E("analysis"),style:{padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:A==="analysis"?f.colors.primary.main:"transparent",color:A==="analysis"?"#ffffff":f.colors.neutral[700],border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(ib,{size:16}),"Analysis (",l?.length||0,"  ",d?.length||0,")"]})]}),A==="code"&&s.jsx("div",{style:{display:"flex",border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,overflow:"hidden"},children:s.jsxs("button",{onClick:()=>{B.length===0&&h(),z(!P)},style:{padding:`${f.spacing.sm} ${f.spacing.md}`,backgroundColor:P?f.colors.accent.warning:"transparent",color:P?"#ffffff":f.colors.neutral[700],border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(B$,{size:16}),B.length===0?"Generate Diffs":P?"Hide Diffs":`Show Diffs (${B.length})`]})})]}),w&&y&&y.trim()!==""&&s.jsxs("div",{style:{border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral[50]},children:[s.jsxs("button",{onClick:()=>G(!U),style:{width:"100%",padding:f.spacing.md,backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(Gw,{size:16,color:f.colors.primary.main}),"AI Reasoning & Changes Made"]}),U?s.jsx(Ud,{size:16}):s.jsx(ks,{size:16})]}),U&&s.jsx("div",{style:{padding:`0 ${f.spacing.md} ${f.spacing.md}`,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:s.jsx(Bo,{remarkPlugins:[i0],components:{p:({children:a})=>s.jsx("p",{style:{margin:"0 0 12px 0",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:a}),strong:({children:a})=>s.jsx("strong",{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800]},children:a}),ul:({children:a})=>s.jsx("ul",{style:{margin:"8px 0",paddingLeft:"20px",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:a}),li:({children:a})=>s.jsx("li",{style:{margin:"4px 0",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:a}),code:({children:a})=>s.jsx("code",{style:{backgroundColor:f.colors.neutral[100],padding:"2px 4px",borderRadius:f.borderRadius.sm,fontSize:f.typography.fontSize.xs,fontFamily:"monospace",color:f.colors.neutral[800]},children:a})},children:y})})]})]}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:A==="preview"?s.jsxs("div",{style:{height:"100%",padding:f.spacing.lg,display:"flex",gap:f.spacing.md},children:[s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{marginBottom:f.spacing.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],textAlign:"center"},children:"Original"}),s.jsx("div",{style:{flex:1,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,overflow:"auto",backgroundColor:"#ffffff"},children:s.jsx("iframe",{srcDoc:e,style:{width:"100%",height:"100%",border:"none"},title:"Original resume preview"})})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:f.spacing.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.accent.success,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.xs},children:[s.jsx(K$,{size:16}),"Optimized"]}),s.jsx("div",{style:{flex:1,border:`2px solid ${f.colors.accent.success}`,borderRadius:f.borderRadius.md,overflow:"auto",backgroundColor:"#ffffff"},children:s.jsx("iframe",{srcDoc:$,style:{width:"100%",height:"100%",border:"none"},title:"Optimized resume preview"})})]})]}):A==="code"?s.jsxs("div",{style:{height:"100%",display:"flex",gap:f.spacing.md,padding:f.spacing.lg},children:[s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{marginBottom:f.spacing.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],textAlign:"center"},children:"HTML Code"}),s.jsx("div",{style:{flex:1},children:s.jsx(Yd,{value:$,onChange:S,readOnly:!j,history:Q,historyIndex:Y,onHistoryChange:R,diffAnnotations:B,showDiffs:P,style:{height:"100%"}})})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:f.spacing.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.accent.success,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.xs},children:[s.jsx(os,{size:16}),"Live Preview"]}),s.jsx("div",{style:{flex:1,border:`2px solid ${f.colors.accent.success}`,borderRadius:f.borderRadius.md,overflow:"auto",backgroundColor:"#ffffff"},children:s.jsx("iframe",{srcDoc:$,style:{width:"100%",height:"100%",border:"none"},title:"Live preview of optimized resume"})})]})]}):s.jsx("div",{style:{height:"100%",padding:f.spacing.lg,overflowY:"auto"},children:n!==void 0&&i!==void 0?s.jsx(YX,{initialScore:n,initialAlignments:l,finalScore:i,finalAlignments:d,improvement:p,addressableRequirements:x,atsKeywords:g,defaultVisible:!0,title:"ATS Score Analysis"}):s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:f.colors.neutral[600],textAlign:"center"},children:[s.jsx(ib,{size:48,style:{marginBottom:f.spacing.md,opacity:.5}}),s.jsx(Ct,{style:{marginBottom:f.spacing.sm,color:f.colors.neutral[700]},children:"No ATS Analysis Available"}),s.jsx(Ct,{children:"ATS analysis data is not available for this resume comparison."})]})})})]})},JX=({isOpen:e,onClose:t,jobTitle:r,job:n,originalResumeHtml:l="",optimizedResumeHtml:i=""})=>{const[d,p]=F.useState("idle"),[g,x]=F.useState(!1),y=F.useRef(null),w=async _=>{n?.ats_resume_id&&(y.current&&window.clearTimeout(y.current),p("saving"),y.current=window.setTimeout(async()=>{try{const{atsTemplateApiService:A}=await Qt(async()=>{const{atsTemplateApiService:P}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:P}},void 0,import.meta.url),E=await A.updateATSResume(n.ats_resume_id,{optimized_html:_});E?.success?(p("saved"),console.log("ATS resume HTML saved successfully")):(p("error"),console.error("Failed to save ATS resume HTML:",E?.message))}catch(A){p("error"),console.error("Error saving ATS resume HTML:",A)}},800))},j=async()=>{x(!0);try{const _=i||"";if(!_)throw new Error("No HTML content available for export");const A=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:_,filename:`${r||"resume"}-optimized`})});if(!A.ok)throw new Error(`PDF export failed: ${A.statusText}`);const E=await A.json();if(E.success&&E.pdf_path)if(window.electronAPI?.openFile){const P=await window.electronAPI.openFile(E.pdf_path);if(P.success)console.log("PDF exported and opened successfully:",E.filename);else{console.error("Failed to open PDF:",P.error);const z=`${rr}/api/pdf/download/${encodeURIComponent(E.pdf_path)}`;window.open(z,"_blank")}}else{const P=`${rr}/api/pdf/download/${encodeURIComponent(E.pdf_path)}`,z=document.createElement("a");z.href=P,z.download=E.filename,document.body.appendChild(z),z.click(),document.body.removeChild(z),console.log("PDF downloaded successfully:",E.filename)}else throw new Error("PDF export failed: Invalid response")}catch(_){console.error("Failed to export PDF:",_)}finally{x(!1)}};return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:t,children:s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,width:"100vw",height:"100vh",margin:0,display:"flex",flexDirection:"column"},onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${f.spacing["2xl"]} ${f.spacing["2xl"]} 0 ${f.spacing["2xl"]}`,borderBottom:`1px solid ${f.colors.neutral[200]}`,paddingBottom:f.spacing.lg},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsxs(ki,{color:"primary",style:{margin:0,fontWeight:f.typography.fontWeight.semibold},children:["Resume Changes",r&&s.jsxs("span",{style:{color:f.colors.neutral[500],fontWeight:f.typography.fontWeight.normal,fontSize:f.typography.fontSize.base,marginLeft:f.spacing.sm},children:["for ",r]})]}),d!=="idle"&&s.jsxs("div",{style:{fontSize:f.typography.fontSize.sm,color:d==="saving"?f.colors.neutral[600]:d==="saved"?f.colors.accent.success:f.colors.accent.error,display:"flex",alignItems:"center",gap:f.spacing.xs},children:[d==="saving"&&s.jsx(An,{size:12,className:"animate-spin"}),d==="saving"&&"Saving...",d==="saved"&&" Saved",d==="error"&&" Save failed"]})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,alignItems:"center"},children:[s.jsxs(ot,{variant:"secondary",onClick:j,disabled:g,children:[s.jsx(Pa,{size:16}),g?"Exporting...":"Export PDF"]}),s.jsx(ot,{variant:"secondary",size:"sm",onClick:t,style:{padding:f.spacing.sm,minWidth:"auto"},children:s.jsx(cn,{size:20})})]})]}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsx(a9,{originalHtml:l,optimizedHtml:i,onOptimizedHtmlChange:w,initialATSScore:n?.ats_score,initialATSAlignments:n?.ats_alignments?.map(_=>({requirement:_.requirement,alignment_score:_.alignment_score,matched:_.alignment_score>=7,reason:_.reason})),finalATSScore:n?.optimized_ats_score,finalATSAlignments:n?.optimized_ats_alignments?.map(_=>({requirement:_.requirement,alignment_score:_.alignment_score,matched:_.alignment_score>=7,reason:_.reason})),atsImprovement:n?.optimized_ats_score&&n?.ats_score?n.optimized_ats_score-n.ats_score:0,keywordsToAdd:n?.ats_keyword_to_add_to_resume,addressableRequirements:n?.addressable_requirements,thinking:n?.skills_check_thinking,showThinking:!0,allowEditing:!!n?.ats_resume_id,defaultViewMode:"preview"})})]})}):null},ZX=({job:e,resumeData:t,isLoadingResume:r,onResumePreview:n,originalResumeHtml:l,optimizedResumeHtml:i})=>{const[d,p]=F.useState(!1),g=y=>y>=80?"#10b981":y>=60?"#f59e0b":"#ef4444",x=y=>y>=80?"Excellent match!":y>=60?"Good potential!":"Needs improvement";return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(wi,{color:"primary",style:{fontWeight:"600",margin:"0 0 20px 0"},children:t?.type==="ats_resume"?"ATS-Optimized Resume":"Uploaded Resume"}),s.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{children:[s.jsx(Ct,{color:"primary",style:{fontWeight:"500",marginBottom:"4px"},children:r?"Loading resume data...":t?t.type==="ats_resume"?t.status==="ready"?`Resume: ${t.filename}`:"Resume: ATS-optimized (available for preview)":t.type==="regular_resume"?`Resume: ${t.filename}`:"Resume: Processing...":`Resume: Not available (Job ID: ${e.id.slice(0,8)}...)`}),s.jsx(ir,{color:"secondary",children:r?"Fetching resume information...":t?t.type==="ats_resume"?t.status==="ready"?"ATS-optimized resume ready for download":t.status==="pdf_pending"?"ATS resume ready for preview (PDF download available shortly)":"ATS resume is being generated...":t.type==="regular_resume"?t.status==="ready"?"Your uploaded resume ready for download":"Your uploaded resume is being processed...":t.status==="generating"?"Resume is being generated...":t.status==="processing"?"Resume is being processed...":"Resume status unknown":"No resume data available"})]}),s.jsx("div",{style:{display:"flex",gap:"8px"},children:s.jsxs(ot,{variant:"secondary",size:"sm",disabled:!t||r||(t.type==="ats_resume"?!t.blob_url&&!t.optimized_html:!t.blob_url),onClick:()=>n&&n(e),children:[s.jsx(os,{size:14,style:{marginRight:"4px"}}),r?"Loading...":"Preview"]})})]}),e.ats_score&&s.jsx("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:t?.type==="ats_resume"&&e.optimized_ats_score?s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"24px"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx(ir,{style:{color:"#6b7280",marginBottom:"8px",fontSize:"12px"},children:"Original"}),s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`conic-gradient(${g(e.ats_score)} ${e.ats_score*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s.jsx(wr,{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:g(e.ats_score),fontWeight:"700"},children:e.ats_score})})]}),s.jsx(Gs,{size:24,style:{color:"#3b82f6"}}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx(ir,{style:{color:"#6b7280",marginBottom:"8px",fontSize:"12px"},children:"Optimized"}),s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`conic-gradient(${g(e.optimized_ats_score)} ${e.optimized_ats_score*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s.jsx(wr,{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:g(e.optimized_ats_score),fontWeight:"700"},children:e.optimized_ats_score})})]})]}),s.jsx("div",{style:{textAlign:"center",marginTop:"16px",fontSize:f.typography.fontSize.base,color:g(e.optimized_ats_score),fontWeight:"500"},children:x(e.optimized_ats_score)})]}):s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`conic-gradient(${g(e.ats_score)} ${e.ats_score*3.6}deg, #e5e7eb 0deg)`,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s.jsx(wr,{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",color:g(e.ats_score),fontWeight:"700"},children:e.ats_score})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.h4,fontWeight:"600",color:"#111827",marginBottom:"4px"},children:"ATS Match Score"}),s.jsx("div",{style:{fontSize:f.typography.fontSize.base,color:g(e.ats_score),fontWeight:"500"},children:x(e.ats_score)})]})]})}),t?.type==="ats_resume"&&e.optimized_ats_score&&s.jsx("div",{style:{marginBottom:f.spacing["2xl"]},children:s.jsxs(ot,{variant:"secondary",size:"md",onClick:()=>p(!0),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm},children:[s.jsx(Lo,{size:16}),"View Changes"]})}),s.jsx(JX,{isOpen:d,onClose:()=>p(!1),jobTitle:e.job_title,job:e,originalResumeHtml:l,optimizedResumeHtml:i})]})},XX=({htmlContent:e,onHtmlChange:t,onExportPDF:r,isExporting:n=!1,title:l="Cover Letter Editor"})=>{const[i,d]=F.useState(!1);return s.jsx("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:s.jsxs("div",{style:{flex:1,display:"flex",minHeight:0,height:"100%"},children:[i&&s.jsx(Yd,{value:e,onChange:t,title:"HTML Source (Editable)",placeholder:"HTML content will appear here...",style:{width:"50%",borderRight:`1px solid ${f.colors.neutral[200]}`}}),s.jsxs("div",{style:{width:i?"50%":"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:l}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.xs},children:[s.jsxs(ot,{variant:i?"primary":"secondary",onClick:()=>d(!i),style:{fontSize:f.typography.fontSize.xs,padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:[i?"Hide":"Show"," HTML"]}),r&&s.jsx(ot,{variant:"secondary",onClick:r,disabled:n,style:{fontSize:f.typography.fontSize.xs,padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:n?s.jsxs(s.Fragment,{children:[s.jsx(Yw,{size:12,className:"animate-spin"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pa,{size:12}),"Export PDF"]})})]})]}),s.jsx("div",{style:{flex:1,background:"#ffffff",overflow:"auto"},children:s.jsx("iframe",{srcDoc:e,style:{width:"100%",height:"100%",border:"none",background:"#ffffff"},title:"Cover Letter Preview"})})]})]})})},QX=({isOpen:e,onClose:t,job:r,coverLetterData:n,onSave:l})=>{const[i,d]=F.useState(""),[p,g]=F.useState(""),[x,y]=F.useState(!1),[w,j]=F.useState(!1),[_,A]=F.useState(!1),E=i!==p;F.useEffect(()=>{if(e)if(n.html_content)g(n.html_content),d(n.html_content);else{const B=`
          <div style="padding: 40px; text-align: center; font-family: Arial, sans-serif;">
            <h2>No Cover Letter Content Available</h2>
            <p>Cover Letter ID: ${n.id||"Unknown"}</p>
            <p>Type: ${n.type||"Unknown"}</p>
            <p>Status: ${n.status||"Unknown"}</p>
            <p style="color: #666; font-size: 14px;">
              This cover letter may not have HTML content stored, or there was an error loading it.
            </p>
          </div>
        `;g(B),d(B)}},[e,n]);const P=async()=>{if(!n.id){alert("No cover letter ID available for saving");return}y(!0);try{const{default:B}=await Qt(async()=>{const{default:G}=await Promise.resolve().then(()=>qX);return{default:G}},void 0,import.meta.url);if(await B.getInstance().updateCoverLetterHtml(n.id,i))g(i),l&&await l(i);else throw new Error("Failed to update cover letter")}catch(B){console.error("Failed to save cover letter:",B),alert("Failed to save cover letter. Please try again.")}finally{y(!1)}},z=async()=>{j(!0);try{const B=new Date().toISOString().slice(0,19).replace(/[:-]/g,""),D=`cover-letter-${r.company_name}-${B}`,U=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:i,filename:D})});if(!U.ok)throw new Error(`PDF export failed: ${U.statusText}`);const G=await U.json();if(G.success&&G.pdf_path)if(window.electronAPI?.openFile){const $=await window.electronAPI.openFile(G.pdf_path);if(!$.success){console.error("Failed to open PDF:",$.error);const re=`${rr}/api/pdf/download/${encodeURIComponent(G.pdf_path)}`;window.open(re,"_blank")}}else{const $=`${rr}/api/pdf/download/${encodeURIComponent(G.pdf_path)}`,re=document.createElement("a");re.href=$,re.download=G.filename,document.body.appendChild(re),re.click(),document.body.removeChild(re)}else throw new Error("PDF export failed: Invalid response")}catch(B){console.error("Failed to export PDF:",B),alert("Failed to export PDF. Please try again.")}finally{j(!1)}};return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:s.jsxs("div",{style:{backgroundColor:"#ffffff",width:"100vw",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:B=>B.stopPropagation(),children:[s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"Edit Cover Letter"}),s.jsxs("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],margin:0},children:[r.company_name," - ",r.job_title]})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,alignItems:"center"},children:[E&&s.jsxs(ot,{variant:"primary",onClick:P,disabled:x,style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx(N$,{size:16}),x?"Saving...":"Save Changes"]}),s.jsx(ot,{variant:"text",onClick:t,style:{padding:f.spacing.sm,minWidth:"auto"},children:s.jsx(cn,{size:20})})]})]}),n.thinking&&n.thinking.trim()!==""&&s.jsxs("div",{style:{border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral[50]},children:[s.jsxs("button",{onClick:()=>A(!_),style:{width:"100%",padding:f.spacing.md,backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(Gw,{size:16,color:f.colors.primary.main}),"AI Reasoning & Changes Made"]}),_?s.jsx(Ud,{size:16}):s.jsx(ks,{size:16})]}),_&&s.jsx("div",{style:{padding:`0 ${f.spacing.md} ${f.spacing.md}`,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:s.jsx(Bo,{remarkPlugins:[i0],components:{p:({children:B})=>s.jsx("p",{style:{margin:"0 0 12px 0",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:B}),strong:({children:B})=>s.jsx("strong",{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800]},children:B}),ul:({children:B})=>s.jsx("ul",{style:{margin:"8px 0",paddingLeft:"20px",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:B}),li:({children:B})=>s.jsx("li",{style:{margin:"4px 0",fontSize:f.typography.fontSize.sm,lineHeight:"1.6",color:f.colors.neutral[700]},children:B}),code:({children:B})=>s.jsx("code",{style:{backgroundColor:f.colors.neutral[100],padding:"2px 4px",borderRadius:f.borderRadius.sm,fontSize:f.typography.fontSize.xs,fontFamily:"monospace",color:f.colors.neutral[800]},children:B})},children:n.thinking})})]})]}),s.jsx("div",{style:{borderBottom:`1px solid ${f.colors.neutral[200]}`}}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsx(XX,{htmlContent:i,onHtmlChange:d,onExportPDF:z,isExporting:w,title:"Cover Letter Preview"})})]})}):null},eQ=({job:e,coverLetterData:t,isLoadingCoverLetter:r,onCoverLetterSave:n})=>{const[l,i]=F.useState(!1),d=()=>{t&&t.html_content&&i(!0)},p=async y=>{n&&await n(e,y)},g=()=>r?"Loading cover letter data...":t?t.type==="generated"?t.status==="ready"?`Generated: ${t.filename||"cover_letter.pdf"}`:"Cover letter: Generated (processing)":t.type==="uploaded"?t.status==="ready"?`Uploaded: ${t.filename}`:"Cover letter: Uploaded (processing)":"Cover letter status unknown":"No cover letter available",x=()=>r?"Fetching cover letter information...":t?t.type==="generated"?t.status==="ready"?"AI-generated cover letter ready for editing":"AI-generated cover letter is being processed...":t.type==="uploaded"?t.status==="ready"?"Your uploaded cover letter ready for editing":"Your uploaded cover letter is being processed...":"Cover letter status unknown":"No cover letter data available";return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(wi,{color:"primary",style:{fontWeight:"600",margin:"0 0 20px 0"},children:"Cover Letter"}),s.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx(Ct,{color:"primary",style:{fontWeight:"500",marginBottom:"4px"},children:g()}),s.jsx(ir,{color:"secondary",children:x()})]}),s.jsx("div",{style:{display:"flex",gap:"8px"},children:s.jsxs(ot,{variant:"secondary",size:"sm",disabled:!t||!t.html_content||r,onClick:d,children:[s.jsx(J$,{size:14,style:{marginRight:"4px"}}),r?"Loading...":"Edit"]})})]}),t&&s.jsx(QX,{isOpen:l,onClose:()=>i(!1),job:e,coverLetterData:t,onSave:p})]})},tQ=({requirements:e,optimizedRequirements:t,isOptimized:r=!1})=>{const[n,l]=F.useState(!0),[i,d]=F.useState(new Set),p=j=>{const _=new Set(i);_.has(j)?_.delete(j):_.add(j),d(_)},g=j=>j>=8?"#10b981":j>=6?"#f59e0b":"#ef4444",x=r&&t&&t.length>0?t:e,y=r&&t&&t.length>0?"Optimized Requirements Analysis":r?"Requirements Analysis (Optimized data pending)":"Requirements Analysis";x.every(j=>j.matched);const w=n;return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[s.jsx(wi,{style:{fontWeight:"600",color:"#111827",margin:"0"},children:y}),s.jsx("button",{onClick:()=>l(!n),style:{padding:"6px 12px",backgroundColor:n?"#3b82f6":"#f3f4f6",color:n?"#ffffff":"#6b7280",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:n?"Show Missed Only":"Show All"})]}),s.jsxs("div",{style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:[x.filter(j=>w||!j.matched).map((j,_,A)=>s.jsxs("div",{onClick:()=>j.feedback&&p(j.id),style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"20px 16px",borderBottom:_<A.length-1?"1px solid #f3f4f6":"none",cursor:j.feedback?"pointer":"default",transition:"background-color 0.2s ease",backgroundColor:j.feedback&&i.has(j.id)?"#f8fafc":"transparent"},onMouseEnter:E=>{j.feedback&&!i.has(j.id)&&(E.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:E=>{j.feedback&&!i.has(j.id)&&(E.currentTarget.style.backgroundColor="transparent")},title:j.feedback?i.has(j.id)?"Click to hide AI analysis":"Click to show AI analysis":void 0,children:[s.jsx("div",{style:{marginTop:"4px"},children:j.matched?s.jsx(Mi,{size:16,style:{color:"#10b981"}}):s.jsx(Ba,{size:16,style:{color:"#ef4444"}})}),s.jsxs("div",{style:{flex:1},children:[s.jsx(Ct,{style:{color:"#111827",fontWeight:"500",marginBottom:"6px",lineHeight:"1.5"},children:j.requirement}),j.feedback&&i.has(j.id)&&s.jsx("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:s.jsx(ir,{style:{color:"#6b7280",lineHeight:"1.5"},children:j.feedback})})]}),s.jsx("div",{style:{fontSize:f.typography.fontSize.xl,fontWeight:"700",color:g(j.score),minWidth:"32px",textAlign:"center"},children:j.score})]},j.id)),!w&&x.filter(j=>!j.matched).length===0&&s.jsxs("div",{style:{padding:"32px 24px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),s.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#10b981",marginBottom:"4px"},children:"All requirements are met!"}),s.jsx("div",{style:{fontSize:"14px",color:"#6b7280"},children:"Every requirement scored 7 or higher"})]})]})]})},l9=({question:e,onUpdate:t,onDelete:r,deleteMode:n=!1})=>{const[l,i]=Vt.useState(e.answer||"");Vt.useEffect(()=>{i(e.answer||"")},[e.answer]);const d=w=>{i(w.target.value)},p=()=>{e.id&&l!==e.answer&&t(e.id,l)},g=w=>{const j=w.target.value;i(j),e.id&&t(e.id,j)},x=()=>{e.id&&r&&r(e.id)},y=()=>{switch(e.question_type){case"text_input":return s.jsx("textarea",{value:l,onChange:d,onBlur:p,placeholder:"Enter your answer...",rows:1,style:{width:"100%",height:"40px",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:f.typography.fontSize.base,resize:"vertical",fontFamily:"inherit",lineHeight:"20px",overflow:"auto"}});case"dropdown":return s.jsxs("select",{value:l,onChange:d,onBlur:p,style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:f.typography.fontSize.base,fontFamily:"inherit"},children:[s.jsx("option",{value:"",children:"Select an option..."}),e.options?.map((w,j)=>s.jsx("option",{value:w,children:w},j))]});case"multiple_choice":return s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.options?.map((w,j)=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[s.jsx("input",{type:"radio",name:`faq-question-${e.id}`,value:w,checked:e.answer===w,onChange:g}),s.jsx(jr,{variant:"body",children:w})]},j))});default:return null}};return s.jsx("div",{style:{padding:"0",border:"none",marginBottom:"0"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsxs("label",{style:{display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",color:"#374151",marginBottom:"8px"},children:[e.question_text.charAt(0).toUpperCase()+e.question_text.slice(1),!e.confident&&s.jsx("span",{style:{color:"#f59e0b",fontSize:f.typography.fontSize.xs,fontWeight:"400",marginLeft:"8px"},children:"(Not Confident)"})]}),y()]}),n&&r&&s.jsx("button",{onClick:x,style:{marginLeft:"12px",padding:"4px 8px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",fontSize:f.typography.fontSize.xs,cursor:"pointer"},onMouseEnter:w=>{w.target.style.backgroundColor="#b91c1c"},onMouseLeave:w=>{w.target.style.backgroundColor="#dc2626"},children:"Delete"})]})})},rQ=({job:e})=>{if(!e.application_questions||e.application_questions.length===0)return null;const t=e.application_questions.filter(r=>{const n=r.question.toLowerCase(),l=n.includes("cover letter")||n.includes("coverletter")||n.includes("upload cover")||n.includes("attach cover");return l&&console.log(" Filtering out cover letter question:",r.question),!l});return t.length===0?null:s.jsxs("div",{style:{marginBottom:"32px",marginTop:"32px"},children:[s.jsx(wi,{style:{fontWeight:"600",color:"#111827",margin:"0 0 16px 0"},children:"Application Questions"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map((r,n)=>s.jsx(l9,{question:{id:`${e.id}-q-${n}`,question_text:r.question,question_type:r.type==="select"?"dropdown":"text_input",answer:r.answer,confident:r.confident!==!1,options:r.type==="select"?r.options||[]:void 0},onUpdate:(l,i)=>{console.log("Updating question:",l,"with answer:",i)},deleteMode:!1},n))})]})},nQ=({isOpen:e,onClose:t,onConfirm:r,jobTitle:n,companyName:l})=>{if(!e)return null;const i=()=>{r(),t()},d=R_(n);return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:f.borderRadius.lg,padding:"32px",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:f.colors.accent.success+"20",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Mi,{size:20,color:f.colors.accent.success})}),s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:0},children:"Application Submitted?"})]}),s.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center",color:f.colors.neutral[600],transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor=f.colors.neutral[100],p.currentTarget.style.color=f.colors.primary.main},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.color=f.colors.neutral[600]},children:s.jsx(cn,{size:20})})]}),s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[700],lineHeight:"1.6",marginBottom:"16px"},children:"Have you submitted your application for:"}),s.jsxs("div",{style:{backgroundColor:f.colors.neutral[50],padding:"16px",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,marginBottom:"4px"},children:d}),s.jsxs("div",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600]},children:["at ",l]})]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:"secondary",size:"lg",onClick:t,style:{flex:1},children:"Not Yet"}),s.jsx(ot,{variant:"primary",size:"lg",onClick:i,style:{flex:1},children:"Yes, Submitted"})]})]})})},iQ=({job:e,onConfirm:t,onWithdraw:r,onRemove:n,onStatusUpdate:l,platform:i,isSearchAgent:d=!1})=>{const g=d||(i==="indeed"||i==="ziprecruiter"||i==="glassdoor"||i==="dice"||i==="autonomous"),[x,y]=F.useState(!1),w=async()=>{if(e.application_url){if(window.electronAPI?.openExternalUrl)try{const _=await window.electronAPI.openExternalUrl(e.application_url);_.success||(console.error("Failed to open job URL:",_.error),window.open(e.application_url,"_blank","noopener,noreferrer"))}catch(_){console.error("Error opening external URL:",_),window.open(e.application_url,"_blank","noopener,noreferrer")}else window.open(e.application_url,"_blank","noopener,noreferrer");g&&y(!0)}},j=()=>{l&&l(e.id,"applied")};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",gap:"16px",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid #e5e7eb"},children:[e.status==="queued"?g?s.jsxs(ot,{variant:"primary",size:"lg",onClick:w,style:{flex:1},children:[s.jsx($i,{size:18}),"Open Website"]}):s.jsxs(ot,{variant:"primary",size:"lg",onClick:()=>t(e.id),style:{flex:1},children:[s.jsx(Ia,{size:18}),"Confirm"]}):s.jsxs(ot,{variant:"secondary",size:"lg",onClick:()=>r(e.id),style:{flex:1},children:[s.jsx(Ba,{size:18}),"Withdraw"]}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>n(e.id),children:"Remove"})]}),!g&&s.jsx("div",{style:{textAlign:"center",marginTop:"24px",paddingTop:"16px",borderTop:"1px solid #f3f4f6"},children:s.jsx("a",{href:e.application_url,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"none",fontSize:f.typography.fontSize.base,fontWeight:"500"},children:"View Original Job Post "})}),s.jsx(nQ,{isOpen:x,onClose:()=>y(!1),onConfirm:j,jobTitle:e.job_title,companyName:e.company_name})]})},sQ=({job:e,onConfirm:t,onWithdraw:r,onRemove:n,onStatusUpdate:l,resumeData:i,isLoadingResume:d,onResumePreview:p,coverLetterData:g,isLoadingCoverLetter:x,onCoverLetterSave:y,platform:w,isSearchAgent:j})=>{const _=e.application_questions?.some(A=>{const E=A.question.toLowerCase();return E.includes("cover letter")||E.includes("coverletter")||E.includes("upload cover")||E.includes("attach cover")});return s.jsxs("div",{style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"32px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.05)",marginBottom:"24px"},children:[s.jsx(VX,{job:e}),!!e.ats_score&&s.jsx(ZX,{job:e,resumeData:i,isLoadingResume:d,onResumePreview:p,originalResumeHtml:i?.original_html,optimizedResumeHtml:i?.optimized_html}),_&&s.jsx(eQ,{job:e,coverLetterData:g,isLoadingCoverLetter:x,onCoverLetterSave:y}),!!e.ats_requirements&&s.jsx(tQ,{requirements:e.ats_requirements,optimizedRequirements:e.optimized_ats_requirements,isOptimized:i?.type==="ats_resume"}),s.jsx(rQ,{job:e}),s.jsx(iQ,{job:e,onConfirm:t,onWithdraw:r,onRemove:n,onStatusUpdate:l,platform:w,isSearchAgent:j})]})},Sc=({isHuntingStarted:e,onWaitingCountChange:t,agentRunId:r,platform:n="linkedin",isSearchAgent:l=!1})=>{const[i,d]=F.useState([]),[p,g]=F.useState(!0),[x,y]=F.useState(null),[w,j]=F.useState(0),[_,A]=F.useState(0),[E,P]=F.useState(0),[z,B]=F.useState(""),[D,U]=F.useState({}),[G,$]=F.useState({}),[re,Q]=F.useState({}),[H,Y]=F.useState({}),[T,o]=F.useState(!1),c=Vt.useCallback(()=>{j(X=>X+1)},[z]);Vt.useEffect(()=>(window.refreshQueue=c,()=>{delete window.refreshQueue}),[c]),F.useEffect(()=>{(async()=>{if(!r){g(!1);return}try{g(!0),y(null);const K=(await an.getApplicationHistoryByAgentRunId(r)).filter(J=>J.status===gt.QUEUED||J.status===gt.SUBMITTING).map(J=>({...J,salary:J.pos_context?.match(/\$[\d,]+(?:\.\d{2})?(?:\s*-\s*\$[\d,]+(?:\.\d{2})?)?/)?.[0]||"Not specified",posted_date:J.post_time||J.created_at||"",viewed_date:J.application_datetime||J.created_at||"",ats_requirements:J.ats_alignments?.map((ne,oe)=>{const ae=ne.alignment_score||ne.score||0,ee=ne.matched??ae>=7,ue=ne.reason||ne.feedback;return{id:ne.id||oe,requirement:ne.requirement,score:ae,matched:ee,feedback:ue}})||[],optimized_ats_requirements:J.optimized_ats_alignments?.map((ne,oe)=>{const ae=ne.alignment_score||ne.score||0,ee=ne.matched??ae>=7,ue=ne.reason||ne.feedback;return{id:ne.id||oe,requirement:ne.requirement,score:ae,matched:ee,feedback:ue}})||[],application_questions:J.questions_and_answers?.map((ne,oe)=>({question:ne.question||ne.question_text||`Question ${oe+1}`,answer:ne.answer||"",type:ne.question_type==="dropdown"||ne.question_type==="select"||ne.type==="dropdown"||ne.type==="select"?"select":ne.question_type==="email"||ne.type==="email"?"email":ne.question_type==="phone"||ne.type==="phone"?"phone":"text",confident:ne.confident!==!1,options:ne.options||[],ai_generated:ne.ai_generated,reference:ne.reference}))||[]}));U({}),$({}),d(K)}catch(se){console.error("Failed to load application history:",se),y("Failed to load job queue data. Please check your connection and ensure you are logged in.")}finally{g(!1)}})()},[r,w]);const h=async X=>{const se=X.id;if(!(G[se]||D[se]))try{$(J=>({...J,[se]:!0}));let te=null;if(X.ats_resume_id)try{const J=await ln.getATSResume(X.ats_resume_id);if(J.success){const ne=J.blob_url||J.resume&&J.resume.blob_url,oe=J.optimized_html||J.resume&&J.resume.optimized_html;let ae=null;if(X.ats_template_id)try{const ee=await ln.getTemplate(X.ats_template_id);ee.success&&ee.template?.original_html&&(ae=ee.template.original_html)}catch(ee){console.warn("Failed to fetch original HTML from template:",ee)}te={type:"ats_resume",id:X.ats_resume_id,filename:`ats_resume_${X.ats_resume_id}.pdf`,blob_url:ne,status:ne?"ready":oe?"pdf_pending":"generating",has_html:!!oe,optimized_html:oe,original_html:ae}}}catch(J){console.warn("Failed to fetch ATS resume, trying regular resume:",J)}if(!te&&X.resume_id)try{const J=await _r.getResume(X.resume_id);J&&J.id&&(te={type:"regular_resume",id:X.resume_id,filename:J.file_name||`resume_${X.resume_id}.pdf`,blob_url:J.blob_url,status:J.blob_url?"ready":"processing"})}catch(J){console.warn("Failed to fetch regular resume:",J)}const K=te||{type:"none",status:"not_found"};U(J=>({...J,[se]:K}))}catch(te){console.error("Error fetching resume data:",te),U(K=>({...K,[se]:{type:"error",status:"error",error:te instanceof Error?te.message:"Unknown error"}}))}finally{$(te=>({...te,[se]:!1}))}},v=async X=>{const se=X.id,te=D[se];if(!te){console.warn("No resume data available for preview");return}try{if(te.blob_url)await _r.downloadAndOpenResume(te.blob_url,te.filename);else if(te.type==="ats_resume"&&te.optimized_html)if(window.electronAPI?.exportHtmlToPdf){const K=`ats_resume_preview_${X.company_name}_${X.job_title}.pdf`.replace(/[^a-z0-9_.-]/gi,"_").substring(0,100),J=await window.electronAPI.exportHtmlToPdf(te.optimized_html,K);if(J.success&&J.filePath){if(window.electronAPI.openFile){const ne=await window.electronAPI.openFile(J.filePath);ne.success||(console.error("Failed to open PDF:",ne.error),alert("PDF was generated but failed to open. Please check your PDF viewer."))}}else throw new Error(`Failed to export PDF: ${J.error}`)}else alert("PDF preview is not available in this environment. Please wait for the PDF to be generated.");else console.warn("No preview content available"),alert("Resume content is not yet available for preview.")}catch(K){console.error("Failed to preview resume:",K),alert("Failed to open resume. Please try again.")}};F.useEffect(()=>{i.forEach(X=>{(X.ats_resume_id||X.resume_id)&&!D[X.id]&&!G[X.id]&&h(X)})},[i]),F.useEffect(()=>{const X=ka.getInstance();i.forEach(async se=>{const te=se.application_questions?.find(K=>{const J=K.question.toLowerCase();return J.includes("cover letter")||J.includes("coverletter")||J.includes("upload cover")||J.includes("attach cover")});if(te?.answer&&!re[se.id]&&!H[se.id]){Y(K=>({...K,[se.id]:!0}));try{const K=await X.getCoverLetterById(te.answer);Q(K?J=>({...J,[se.id]:K}):J=>({...J,[se.id]:{type:"error",status:"not_found",error:"Cover letter not found"}}))}catch(K){console.error("Error loading cover letter for job:",se.id,K),Q(J=>({...J,[se.id]:{type:"error",status:"error",error:K instanceof Error?K.message:"Unknown error"}}))}finally{Y(K=>({...K,[se.id]:!1}))}}})},[i,re,H]),F.useEffect(()=>{const X=i.filter(te=>te.status===gt.QUEUED).length,se=i.filter(te=>te.status===gt.SUBMITTING).length;if(A(X),P(se),t&&t(X),i.length>0)if(z)if(i.some(K=>K.id===z)){if(!T){const K=i.find(J=>J.id===z);if(K&&K.status===gt.QUEUED){const J=i.filter(ne=>ne.status===gt.QUEUED).sort((ne,oe)=>new Date(oe.created_at||"").getTime()-new Date(ne.created_at||"").getTime())[0];J&&J.id!==z&&B(J.id)}}}else{const K=i.find(ne=>ne.status===gt.QUEUED),J=K?K.id:i[0].id;o(!1),B(J)}else{const te=i.find(J=>J.status===gt.QUEUED),K=te?te.id:i[0].id;o(!1),B(K)}},[i,z,t,T]);const b=X=>{const se=R_(X.job_title);let te=`${X.company_name} - ${se}`;return X.status===gt.SUBMITTING?te=` ${te}`:X.status===gt.QUEUED&&(te=` ${te}`),X.ats_score&&(te=`[ATS: ${X.ats_score}] ${te}`),te},M=X=>{o(!0),B(X)},R=async X=>{try{const se=i.find(ne=>ne.id===X);if(d(ne=>ne.map(oe=>oe.id===X?{...oe,status:gt.SUBMITTING}:oe)),se?.application_questions&&se.application_questions.length>0)try{for(let ne=0;ne<se.application_questions.length;ne++){const oe=se.application_questions[ne],ae=$X(oe);try{await Ju.upsertFaqQuestion(ae)}catch(ee){console.error(`Failed to upsert FAQ question ${ae.id}:`,ee)}}}catch(ne){console.error("Failed to store FAQ questions:",ne)}const te={status:gt.SUBMITTING};se?.application_questions&&se.application_questions.length>0&&(te.questions_and_answers=se.application_questions.map(ne=>({question:ne.question,answer:ne.answer,type:ne.type,question_type:ne.type==="select"?"dropdown":"text_input",confident:ne.confident!==!1,...ne.type==="select"&&ne.options&&{options:ne.options},...ne.ai_generated!==void 0&&{ai_generated:ne.ai_generated},...ne.reference&&{reference:ne.reference}}))),await an.updateApplicationHistory(X,te);const K=i.findIndex(ne=>ne.id===X),J=i.slice(K+1).find(ne=>ne.status===gt.QUEUED)||i.slice(0,K).find(ne=>ne.status===gt.QUEUED);if(J)o(!1),B(J.id);else{const ne=i[0];ne&&(o(!1),B(ne.id))}}catch(se){console.error("Failed to confirm job:",se),d(te=>te.map(K=>K.id===X?{...K,status:gt.QUEUED}:K))}},S=async X=>{try{const se=i.find(K=>K.id===X);d(K=>K.map(J=>J.id===X?{...J,status:gt.QUEUED}:J));const te={status:gt.QUEUED};se?.application_questions&&se.application_questions.length>0&&(te.questions_and_answers=se.application_questions.map(K=>({question:K.question,answer:K.answer,type:K.type,confident:K.confident!==!1,...K.ai_generated!==void 0&&{ai_generated:K.ai_generated},...K.reference&&{reference:K.reference}}))),await an.updateApplicationHistory(X,te)}catch(se){console.error("Failed to withdraw job:",se),d(te=>te.map(K=>K.id===X?{...K,status:gt.SUBMITTING}:K))}},a=async X=>{try{d(te=>te.map(K=>K.id===X?{...K,status:gt.REMOVED}:K));const se={status:gt.REMOVED};await an.updateApplicationHistory(X,se)}catch(se){console.error("Failed to remove job:",se),d(te=>te.map(K=>K.id===X?{...K,status:gt.QUEUED}:K))}},k=async(X,se)=>{console.log("Saving cover letter for job:",X.id,"Updated HTML length:",se.length),Q(te=>({...te,[X.id]:{...te[X.id],html_content:se}}))},N=async(X,se)=>{try{d(K=>K.map(J=>J.id===X?{...J,status:se}:J));const te={status:se};await an.updateApplicationHistory(X,te),c()}catch(te){console.error("Failed to update job status:",te);const K=i.find(J=>J.id===X);K&&d(J=>J.map(ne=>ne.id===X?K:ne))}},L=i.find(X=>X.id===z);return p?s.jsx(HX,{}):x?s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#dc2626",fontSize:f.typography.fontSize.xl},children:[s.jsx("div",{style:{marginBottom:"16px"},children:" Error loading job queue"}),s.jsx(Ct,{style:{color:"#64748b",textAlign:"center",maxWidth:"400px"},children:x})]}):s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsx(WX,{queuedJobs:i,waitingCount:_,readyCount:E,selectedJobId:z,onJobSelect:M,getJobCardTitle:b}),s.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0 24px",minHeight:0},children:i.length===0?s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b",fontSize:f.typography.fontSize.xl},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.display,marginBottom:"16px"},children:""}),s.jsx("div",{children:"There are no jobs in the queue!"})]}):L?s.jsx("div",{style:{paddingBottom:"32px"},children:s.jsx(sQ,{job:L,onConfirm:R,onWithdraw:S,onRemove:a,onStatusUpdate:N,resumeData:D[L.id],isLoadingResume:G[L.id],onResumePreview:v,coverLetterData:re[L.id],isLoadingCoverLetter:H[L.id],onCoverLetterSave:k,platform:n,isSearchAgent:l})}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b",fontSize:f.typography.fontSize.xl},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.display,marginBottom:"16px"},children:""}),s.jsx("div",{children:"Select a job from the dropdown above"})]})})]})};var Xt=(e=>(e.LINKEDIN="linkedin",e.INDEED="indeed",e.GLASSDOOR="glassdoor",e.ZIPRECRUITER="ziprecruiter",e.DICE="dice",e.AUTONOMOUS="autonomous",e))(Xt||{});const oQ=({platformLabel:e,errorMessage:t,isOpeningBrowser:r,isProcessing:n,onLaunchBrowser:l,onConfirmSignedIn:i,requiresLogin:d=!0,customInstructions:p,screenshotSrc:g,showScreenshot:x=!0,targetUrl:y,requireLaunch:w=!1,hasLaunchedPlatform:j=!1})=>{const _=d?["Open Chrome with the JobHuntr profile.",`Navigate to ${e} and sign in.`,"Keep Chrome reserved for JobHuntr while the bot runs."]:["Save your work in any Chrome windows.","Use another browser (Safari, Edge, Firefox, etc.) for personal browsing while JobHuntr runs.","Chrome will be closed automatically before automation begins."],A=p&&p.length>0?p:_,E=n||w&&!j;return s.jsxs(s.Fragment,{children:[x&&g&&s.jsx("div",{style:{width:"100%",marginBottom:"24px",borderRadius:f.borderRadius.lg,overflow:"hidden",border:`1px solid ${f.colors.neutral[200]}`,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:s.jsx("img",{src:g,alt:`${e} login page`,style:{width:"100%",height:"auto",display:"block"}})}),s.jsxs("div",{style:{backgroundColor:f.colors.neutral[50],padding:"16px",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[s.jsx($$,{size:32,color:f.colors.accent.success}),s.jsxs("div",{children:[s.jsx("h4",{style:{margin:0,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[800]},children:"Why this matters"}),s.jsx("div",{style:{margin:0,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],display:"flex",flexDirection:"column",gap:"4px"},children:d?s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Logging in manually helps avoid anti-bot checks and keeps your account safe."}),s.jsx("span",{style:{fontWeight:f.typography.fontWeight.medium},children:"Save your work in other Chrome windows and switch to another browser for personal browsingwell close all Chrome instances before the bot starts."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Well close Chrome so the automation can run with a clean profile and avoid copy/paste issues between accounts."}),s.jsx("span",{style:{fontWeight:f.typography.fontWeight.medium},children:"Save your work in Chrome and keep another browser handy for personal use while the bot runs."})]})})]})]}),s.jsx("ul",{style:{margin:0,paddingLeft:"20px",color:f.colors.neutral[700],lineHeight:"1.6"},children:A.map(P=>s.jsx("li",{children:P},P))})]}),w&&!j&&s.jsxs("div",{style:{backgroundColor:"#fffbeb",border:"1px solid #fcd34d",color:"#92400e",padding:"12px 16px",borderRadius:f.borderRadius.md,marginBottom:"16px",fontSize:f.typography.fontSize.sm},children:[s.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Quick safety check"}),"You only have one workflow configured in All Runs. Launch ",e," with the button below so we copy over your logged-in session before closing Chrome."]}),t&&s.jsx("div",{style:{marginTop:"8px",color:f.colors.accent.error,fontSize:f.typography.fontSize.sm},children:t}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",flexWrap:"wrap"},children:[(d||y)&&s.jsxs("button",{onClick:l,disabled:r||n,style:{flex:"1 1 220px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 18px",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.accent.info}`,backgroundColor:"white",color:f.colors.accent.info,fontWeight:f.typography.fontWeight.medium,cursor:r||n?"not-allowed":"pointer",opacity:r||n?.7:1},children:[s.jsx($i,{size:18}),r?"Opening...":`Open ${e}`]}),s.jsxs("button",{onClick:i,disabled:E,style:{flex:"1 1 220px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 18px",borderRadius:f.borderRadius.md,border:"none",backgroundColor:f.colors.primary.main,color:"white",fontWeight:f.typography.fontWeight.semibold,cursor:E?"not-allowed":"pointer",opacity:E?.7:1},children:[s.jsx(LR,{size:18}),n?"Closing Chrome...":d?"Im signed in  close all Chrome windows":"Close Chrome windows and continue"]})]}),w&&!j&&s.jsxs("div",{style:{marginTop:"12px",fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center"},children:["Well enable Im signed in after Chrome opens ",e," with the JobHuntr profile."]})]})},aQ=({isSearchOnlyPlatform:e,isFinalizing:t,onManualSelect:r,onAutoSelect:n})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],lineHeight:"1.6",marginBottom:"12px"},children:"Once job hunting starts, please avoid manually navigating the browser as this may interfere with the AI's operation."}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],lineHeight:"1.6",marginBottom:"12px"},children:"You can pause or stop the agent at any time during the process."}),e?s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],lineHeight:"1.6",marginBottom:"24px"},children:"The AI will find jobs, check if they match your criteria, and save them to your queue for manual review and submission."}):s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],lineHeight:"1.6",marginBottom:"24px"},children:"Choose how you want the AI to handle job applications:"}),s.jsx("div",{style:{marginBottom:"24px"},children:s.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"stretch",justifyContent:"center",flexWrap:"wrap"},children:[s.jsxs("div",{style:{backgroundColor:f.colors.neutral[50],padding:"20px",borderRadius:f.borderRadius.lg,border:`2px solid ${f.colors.neutral[200]}`,flex:1,maxWidth:e?"500px":void 0,display:"flex",flexDirection:"column"},children:[s.jsx("h4",{style:{fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:"0 0 20px 0",textAlign:"center"},children:"Manual Review From Queue"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",flex:1,marginBottom:"16px"},children:["AI finds job","Saves to queue","You review & submit"].map((l,i)=>s.jsxs(F.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:i===0?f.colors.accent.info:i===1?f.colors.neutral[600]:f.colors.primary.main,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.bold,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:i+1}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center",fontWeight:f.typography.fontWeight.medium},children:l})]}),i<2&&s.jsx("div",{style:{fontSize:"24px",color:f.colors.neutral[600]},children:""})]},l))}),s.jsx("button",{onClick:r,disabled:t,style:{width:"100%",padding:"12px 24px",backgroundColor:e?f.colors.primary.main:"white",color:e?"white":f.colors.neutral[700],border:`2px solid ${e?f.colors.primary.main:f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,cursor:t?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:t?.7:1},onMouseEnter:l=>{t||(e?(l.currentTarget.style.backgroundColor=f.colors.primary.hover,l.currentTarget.style.borderColor=f.colors.primary.hover):(l.currentTarget.style.backgroundColor=f.colors.neutral[50],l.currentTarget.style.borderColor=f.colors.neutral[400]))},onMouseLeave:l=>{t||(e?(l.currentTarget.style.backgroundColor=f.colors.primary.main,l.currentTarget.style.borderColor=f.colors.primary.main):(l.currentTarget.style.backgroundColor="white",l.currentTarget.style.borderColor=f.colors.neutral[300]))},children:t?"Starting...":e?"Begin Search":"Manual Review From Queue"})]}),!e&&s.jsxs("div",{style:{backgroundColor:f.colors.accent.success+"10",padding:"20px",borderRadius:f.borderRadius.lg,border:`2px solid ${f.colors.accent.success+"30"}`,flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("h4",{style:{fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.accent.success,margin:"0 0 20px 0",textAlign:"center"},children:"Auto-Submit When Confident"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",flex:1,marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:[s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:f.colors.accent.info,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.bold,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"1"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center",fontWeight:f.typography.fontWeight.medium},children:"AI finds job"}),s.jsx("div",{style:{fontSize:"24px",color:f.colors.neutral[600]},children:""}),s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:f.colors.accent.warning,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.bold,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"2"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center",fontWeight:f.typography.fontWeight.medium},children:"Checks confidence"})]}),s.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:f.colors.neutral[200],transform:"rotate(45deg)",display:"flex",alignItems:"center",justifyContent:"center",border:`3px solid ${f.colors.neutral[400]}`,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:s.jsx("span",{style:{transform:"rotate(-45deg)",fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.bold,color:f.colors.neutral[700],textAlign:"center",lineHeight:"1.2"},children:"Confident?"})}),s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"40px",flexWrap:"wrap",justifyContent:"center"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.accent.success,fontWeight:f.typography.fontWeight.medium},children:"Yes"}),s.jsx("div",{style:{fontSize:"20px",color:f.colors.accent.success,transform:"rotate(45deg)"},children:""}),s.jsx("div",{style:{height:"8px"}}),s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:f.colors.accent.success,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.bold,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",marginLeft:"-60px"},children:s.jsx(Mi,{size:24})}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center",fontWeight:f.typography.fontWeight.medium,marginLeft:"-60px"},children:"Auto-submit"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],fontWeight:f.typography.fontWeight.medium},children:"No"}),s.jsx("div",{style:{fontSize:"20px",color:f.colors.neutral[600],transform:"rotate(-45deg)"},children:""}),s.jsx("div",{style:{height:"8px"}}),s.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:f.colors.neutral[600],display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.bold,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",marginRight:"-60px"},children:s.jsx(Wi,{size:24})}),s.jsx("span",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],textAlign:"center",fontWeight:f.typography.fontWeight.medium,marginRight:"-60px"},children:"Save to queue"})]})]})]}),s.jsx("button",{onClick:n,disabled:t,style:{width:"100%",padding:"12px 24px",backgroundColor:f.colors.primary.main,color:"white",border:`2px solid ${f.colors.primary.main}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,cursor:t?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:t?.7:1},onMouseEnter:l=>{t||(l.currentTarget.style.backgroundColor=f.colors.primary.hover,l.currentTarget.style.borderColor=f.colors.primary.hover)},onMouseLeave:l=>{t||(l.currentTarget.style.backgroundColor=f.colors.primary.main,l.currentTarget.style.borderColor=f.colors.primary.main)},children:t?"Starting...":"Auto-Submit When Confident"})]})]})})]}),!e&&s.jsx("div",{style:{backgroundColor:f.colors.neutral[100],padding:"16px",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[300]}`},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[s.jsx(Ki,{size:20,color:f.colors.accent.warning,style:{marginTop:"2px",flexShrink:0}}),s.jsxs("div",{children:[s.jsx("h4",{style:{fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.primary.main,margin:"0 0 8px 0"},children:'What does "confident" mean?'}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],lineHeight:"1.5",margin:0},children:"The AI will only auto-submit when it can find relevant information in your profile (resume, cover letter template, etc.) to answer all application questions. If any question lacks sufficient reference data, it will still save to the queue for manual review."})]})]})})]}),lQ={[Xt.LINKEDIN]:{label:"LinkedIn",loginImage:"./login_page/linkedin_login.png",showScreenshot:!0},[Xt.INDEED]:{label:"Indeed",loginImage:"./login_page/indeed_login.png",showScreenshot:!0},[Xt.GLASSDOOR]:{label:"Glassdoor",loginImage:"./login_page/glassdoor_login.png",showScreenshot:!0},[Xt.ZIPRECRUITER]:{label:"ZipRecruiter",loginImage:"./login_page/ziprecruiter_login.png",showScreenshot:!0},[Xt.DICE]:{label:"Dice",loginImage:"./login_page/dice_login.png",showScreenshot:!0},[Xt.AUTONOMOUS]:{label:"Autonomous Search",showScreenshot:!1}},C1=600,kc=({isOpen:e,step:t,onClose:r,onConfirm:n,workflowId:l,platform:i=Xt.LINKEDIN,targetUrl:d,onStepOneConfirm:p,isStepOneProcessing:g=!1,isFinalizingStepTwo:x=!1,requireBrowserLaunch:y=!1,isSearchAgent:w=!1})=>{const[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(null),[B,D]=F.useState(!1),U=F.useMemo(()=>lQ[i],[i]),G=U?.loginImage??"/logo.png",$=U?.label??"Job board",re=F.useMemo(()=>{if(i===Xt.AUTONOMOUS&&d)try{return new URL(d).hostname.replace(/^www\./,"")}catch{return $}return $},[i,d,$]),Q=i!==Xt.DICE&&i!==Xt.AUTONOMOUS,H=U?.requiresLogin??Q,T=t===1,o=y&&H,c=w||i===Xt.INDEED||i===Xt.ZIPRECRUITER||i===Xt.GLASSDOOR||i===Xt.DICE||i===Xt.AUTONOMOUS,h=F.useMemo(()=>{if(i===Xt.AUTONOMOUS)return[`Open Chrome with the JobHuntr profile and navigate to ${d||"the starting website"}.`,"If the site prompts for login, complete it manually so the agent inherits your session and avoids anti-bot checks.","Leave the page open, then confirm below so we can close Chrome windows and continue automation from the same spot."]},[i,d]),v=F.useCallback(async()=>{if(!T)return;z(null),_(!0);const S=Date.now();try{const a=await fetch(`${rr}/api/browser/manual-launch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:d})});if(a.ok)o&&D(!0);else{const k=await a.json().catch(()=>({}));throw new Error(k?.detail||"Backend failed to open Chrome.")}}catch(a){const k=a instanceof Error?a.message:"Failed to open Chrome with the JobHuntr profile.";z(k)}finally{const a=Date.now()-S;a<C1&&await new Promise(k=>setTimeout(k,C1-a)),_(!1)}},[T,d,o]),b=F.useCallback(async()=>{if(!(!T||g||A)){if(o&&!B){z(`Please open ${re} before continuing.`);return}z(null),E(!0);try{const S=await fetch(`${rr}/api/browser/close-all`,{method:"POST"});if(!S.ok){const a=await S.json().catch(()=>({}));throw new Error(a?.detail||"Failed to close Chrome windows.")}await p?.()}catch(S){const a=S instanceof Error?S.message:"Failed to close Chrome windows.";z(a)}finally{setTimeout(()=>E(!1),C1)}}},[T,g,A,p,o,B,re]);if(F.useEffect(()=>{(!e||!T)&&(z(null),_(!1),E(!1),D(!1))},[e,T]),!e)return null;const M=T&&g||!T&&x,R=()=>{M||r()};return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:f.borderRadius.lg,padding:"32px",maxWidth:"900px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:T?"flex-start":"center",justifyContent:"space-between",marginBottom:"24px",gap:"16px"},children:[s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsx("p",{style:{margin:0,fontSize:f.typography.fontSize.sm,color:f.colors.accent.info,fontWeight:f.typography.fontWeight.medium},children:T?"Step 1 of 2":"Step 2 of 2"}),T?s.jsxs(s.Fragment,{children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:0},children:H?`Confirm you are signed in to ${re}`:"Prepare Chrome for automation"}),s.jsx("p",{style:{margin:0,color:f.colors.neutral[600],fontSize:f.typography.fontSize.sm},children:H?`Launch Chrome with the JobHuntr profile, navigate to ${re}, and make sure youre signed in before we start automating applications.`:"Save your work in any Chrome windows and be ready for us to close Chrome so the automation can run safely."})]}):s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:f.colors.accent.success+"20",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Mi,{size:20,color:f.colors.accent.success})}),s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:0},children:"Ready to Start Job Hunting?"}),s.jsx("p",{style:{margin:"4px 0 0 0",color:f.colors.neutral[600],fontSize:f.typography.fontSize.sm},children:"Once job hunting starts, please avoid manually navigating the browser as this may interfere with the AI's operation. You can pause or stop the agent at any time."})]})]})]}),s.jsx("button",{onClick:R,disabled:M,style:{background:"none",border:"none",cursor:M?"not-allowed":"pointer",padding:"8px",borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center",color:f.colors.neutral[600],transition:"all 0.2s",opacity:M?.5:1},onMouseEnter:S=>{M||(S.currentTarget.style.backgroundColor=f.colors.neutral[100],S.currentTarget.style.color=f.colors.primary.main)},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="transparent",S.currentTarget.style.color=f.colors.neutral[600]},children:s.jsx(cn,{size:20})})]}),T?s.jsx(oQ,{platformLabel:re,errorMessage:P,isOpeningBrowser:j,isProcessing:g||A,onLaunchBrowser:v,onConfirmSignedIn:b,requiresLogin:H,customInstructions:h,screenshotSrc:G,showScreenshot:U?.showScreenshot??!0,targetUrl:d,requireLaunch:o,hasLaunchedPlatform:B}):s.jsx(aQ,{isSearchOnlyPlatform:c,isFinalizing:x,onManualSelect:()=>n(!1),onAutoSelect:()=>n(!0)})]})})},cQ=({isOpen:e,onConfirm:t,onCancel:r,isConfirming:n=!1})=>{if(!e)return null;const l={position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},i={backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.lg,padding:f.spacing["2xl"],width:"min(520px, 92%)",boxShadow:f.shadows.lg,position:"relative"},d={display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing["2xl"]},p={width:56,height:56,borderRadius:f.borderRadius.full,backgroundColor:f.colors.accent.warningLight,display:"flex",alignItems:"center",justifyContent:"center"},g={...f.typography.presets.heading4,margin:0,color:f.colors.primary.main},x={position:"absolute",top:f.spacing.lg,right:f.spacing.lg,background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,color:f.colors.icon.secondary,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},y={...f.typography.presets.body,color:f.colors.neutral[700],margin:`0 0 ${f.spacing.xl} 0`,lineHeight:1.6},w={backgroundColor:f.colors.accent.warningLight,borderRadius:f.borderRadius.md,padding:`${f.spacing.md} ${f.spacing.lg}`,display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing["2xl"]},j={display:"flex",justifyContent:"flex-end",gap:f.spacing.md};return s.jsx(Wr,{children:s.jsx(jt.div,{style:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:s.jsxs(jt.div,{style:i,initial:{opacity:0,scale:.95,y:16},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:16},transition:{duration:.2,ease:"easeOut"},onClick:_=>_.stopPropagation(),children:[s.jsx("button",{style:x,onClick:r,onMouseEnter:_=>{_.currentTarget.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20})}),s.jsxs("div",{style:d,children:[s.jsx("div",{style:p,children:s.jsx(Ta,{size:28,color:f.colors.accent.warningDarkest})}),s.jsxs("div",{children:[s.jsx("h2",{style:g,children:"LinkedIn Bot Detection Warning"}),s.jsx("p",{style:{...f.typography.presets.caption,color:f.colors.neutral[500],margin:f.spacing.xs},children:"LinkedIn is more sensitive to automated activity during unusual hours."})]})]}),s.jsx("p",{style:y,children:"You're starting job hunting at an unusual time. Being active on LinkedIn during late night or early morning hours may increase the chances of automated detection unless these are your typical working hours."}),s.jsxs("div",{style:w,children:[s.jsx(Wi,{size:24,color:f.colors.accent.warning}),s.jsxs("div",{children:[s.jsx("p",{style:{...f.typography.presets.bodySmall,color:f.colors.accent.warningDarkest,margin:0,fontWeight:f.typography.fontWeight.medium},children:"Higher-risk timeframe"}),s.jsx("p",{style:{...f.typography.presets.caption,color:f.colors.accent.warningDark,margin:0},children:"11:00 PM - 6:00 AM (local time)"})]})]}),s.jsx("p",{style:{...f.typography.presets.bodySmall,color:f.colors.neutral[600],marginBottom:f.spacing["2xl"]},children:"We recommend waiting until normal business hours. If you're routinely active now, you can continue at your own risk."}),s.jsxs("div",{style:j,children:[s.jsx(ot,{variant:"secondary",onClick:r,disabled:n,children:"Cancel"}),s.jsx(ot,{onClick:t,disabled:n,style:{backgroundColor:f.colors.accent.warning,border:`1px solid ${f.colors.accent.warning}`},children:n?"Continuing...":"Continue Anyway"})]})]})})})},jl="agent_run_setup_queue",Ou="workflow_run_setup_queue";class S8{static addToQueue(t){try{const r=this.getQueue(),l=[{agentRunId:t,createdAt:Date.now()},...r];sessionStorage.setItem(jl,JSON.stringify(l)),sessionStorage.removeItem(Ou)}catch(r){console.error("Failed to add agent run to queue:",r)}}static isInQueue(t){try{return this.getQueue().some(n=>n.agentRunId===t)}catch(r){return console.error("Failed to check if agent run is in queue:",r),!1}}static removeFromQueue(t){try{const n=this.getQueue().filter(l=>l.agentRunId!==t);sessionStorage.setItem(jl,JSON.stringify(n)),sessionStorage.removeItem(Ou)}catch(r){console.error("Failed to remove agent run from queue:",r)}}static getQueue(){try{const t=sessionStorage.getItem(jl)||sessionStorage.getItem(Ou);if(!t)return[];const r=JSON.parse(t),n=Date.now()-3600*1e3,l=r.filter(i=>i.createdAt>n);return(l.length!==r.length||!sessionStorage.getItem(jl))&&(sessionStorage.setItem(jl,JSON.stringify(l)),sessionStorage.removeItem(Ou)),l}catch(t){return console.error("Failed to get agent run queue:",t),[]}}static clearQueue(){try{sessionStorage.removeItem(jl),sessionStorage.removeItem(Ou)}catch(t){console.error("Failed to clear agent run queue:",t)}}static getQueueForDebug(){return this.getQueue()}}const uQ=(e,t)=>!(!e||typeof e!="object"||!(t in e)),k8=e=>{const t=e.platform||"linkedin";if(uQ(e.platform_filters,t)){const r=e.platform_filters[t];return{country:r.country||"usa",salary_bound:r.salary_bound||null,experience_levels:r.experience_levels||[],remote_types:r.remote_types||[],specific_locations:r.specific_locations||[],job_types:r.job_types||[],blacklist_companies:r.blacklist_companies||[],date_posted:r.date_posted}}return{country:e.country||"usa",salary_bound:e.salary_bound||null,experience_levels:e.experience_levels||[],remote_types:e.remote_types||[],specific_locations:e.specific_locations||[],job_types:e.job_types||[],blacklist_companies:e.blacklist_companies||[]}},j8=`${rr}/api`;class dQ{async loadCredentials(t,r){try{const n=await fetch(`${j8}/llm-credentials/${t}/${r}`);if(!n.ok)return null;const l=await n.json();return l.success&&l.credentials?l.credentials:null}catch(n){return console.error("Failed to load LLM credentials:",n),null}}async saveCredentials(t,r,n){try{const l=await fetch(`${j8}/llm-credentials/${t}/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return l.ok?(await l.json()).success===!0:!1}catch(l){return console.error("Failed to save LLM credentials:",l),!1}}}const Hb=new dQ,jc=({selectedAgentId:e,defaultPlatform:t,forceCreateNewRun:r=!1,onNewRunCreated:n})=>{const[l,i]=F.useState(null),[d,p]=F.useState("pending"),[g,x]=F.useState(!1),[y,w]=F.useState(!0),[j,_]=F.useState(void 0),[A,E]=F.useState(void 0),P=F.useCallback(()=>{try{const B=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const U of B){const G=localStorage.getItem(U);if(G){const $=JSON.parse(G);if($.token)return $.token;if($.access_token)return $.access_token;if(typeof $=="string")return $}}const D=Object.keys(localStorage);for(const U of D)if(U.includes("auth")||U.includes("supabase"))try{const G=localStorage.getItem(U);if(G){const $=JSON.parse(G);if($.token||$.access_token)return $.token||$.access_token}}catch{}return null}catch(B){return console.error("Failed to parse auth data from localStorage:",B),null}},[]);return{currentAgentRunId:l,setCurrentAgentRunId:i,agentRunStatus:d,setAgentRunStatus:p,isInitializingAgentRun:g,isPageLoading:y,initializeAgentRun:async(B,D,U,G)=>{const $=H=>{if(!H)return"";const Y=H.toLowerCase();return Y.includes("linkedin")?"linkedin":Y.includes("indeed")?"indeed":Y.includes("glassdoor")?"glassdoor":Y.includes("ziprecruiter")?"ziprecruiter":Y.includes("dice")?"dice":Y.includes("autonomous")?"autonomous":Y},re=(H,Y)=>{const T=$(Y),o=$(H);return T||o},Q=async({agentId:H,inheritFromLatest:Y,source:T})=>{let o;if(Y)try{const M=await gr.listAgentRuns({page:1,page_size:1});if(M.runs.length>0){const R=M.runs[0];R.resume_id&&(o=R.resume_id,U(o))}}catch(M){console.warn("Could not fetch latest agent run for inheritance:",M)}const h=`${T==="auto_created_for_new_user"?"Standard Job Hunt":"New Agent Run"} - ${new Date().toLocaleDateString()}`;B(M=>({...M,runName:h}));const v={workflow_id:H,run_name:h,generate_cover_letter:!0,send_connection_request:!1,auto_apply:!1,daily_application_limit:10,settings_snapshot:{source:T,resume_inherited:!!o,inherited_resume_id:o||null,created_at:new Date().toISOString()}};H==="indeed-search"?v.platform_filters={indeed:{date_posted:"1"}}:H==="glassdoor-search"?v.platform_filters={glassdoor:{}}:H==="dice-search"?v.platform_filters={dice:{}}:H==="autonomous-auto-search"&&(v.platform="autonomous",v.platform_filters={autonomous:{starting_url:"",instructions:"",max_jobs_per_platform:10,platforms:[],use_vision:!0}}),o&&(v.resume_id=o);const b=await gr.createAgentRun(v);i(b.id),p(b.status),_(b.workflow_id||H),E(re(b.platform,b.workflow_id||H)),nr.setCurrentRunData(b),B(M=>({...M,generateCoverLetter:!0,generateConnection:!1,autoSubmit:!1,useVision:!0})),n?.()};try{x(!0);const H=P();if(H)gr.setAuthToken(H);else{x(!1);return}const Y=nr.getCurrentRunId(),T=v=>!!(v&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(v)),o=e&&!T(e)?e:null,c=$(o||(t&&!T(t)?t:""));if(Y)try{const v=await gr.getAgentRun(Y),b=re(v.platform,v.workflow_id);if(c&&b&&c!==b)console.info(`Ignoring cached run ${Y} (platform ${b}); expected ${c}`),nr.clearCurrentRun(),i(null),p("pending"),_(void 0),E(void 0);else{i(Y),p(v.status),_(v.workflow_id),E(b),nr.setCurrentRunData(v);const M=k8(v),R=re(v.platform,v.workflow_id);if(["indeed"].includes(R)){const N=v.platform_filters||{},L=N[R];if(!(L&&typeof L.date_posted<"u")){console.log(`Initializing platform_filters for existing ${R} run with date_posted`);try{await gr.updateAgentRun(Y,{platform_filters:{...N,[R]:{...N[R]||{},date_posted:"1"}}})}catch(se){console.error("Failed to initialize platform_filters for existing run:",se)}}}const a=R==="indeed"?M.date_posted||"1":void 0;B(N=>{const L={...N,semanticInstructions:v.semantic_instructions||"",searchKeywords:(v.search_keywords||[])[0]||"",blacklistCompanies:(M.blacklist_companies||[]).join(", "),generateCoverLetter:v.generate_cover_letter,generateConnection:v.send_connection_request,autoSubmit:v.auto_apply,location:v.location_preferences||"",minSalary:v.salary_range?.min||"",runName:v.run_name||"Agent Run Settings",country:M.country||"usa",salaryBound:M.salary_bound||null,experienceLevels:M.experience_levels||[],remoteTypes:M.remote_types||[],jobTypes:M.job_types||[],specificLocations:M.specific_locations||[]};return a!==void 0&&(L.datePosted=a),L});const k=v.platform_filters?.autonomous;if(k||R==="autonomous"){const N={...k||{},starting_url:k?.starting_url||"",instructions:k?.instructions||"",max_jobs_per_platform:k?.max_jobs_per_platform??v.platform_filters?.autonomous?.max_jobs_per_platform??10,platforms:Array.isArray(k?.platforms)?k.platforms.map(te=>({...te})):[]};if(!k)try{await gr.updateAgentRun(Y,{platform_filters:{...v.platform_filters||{},autonomous:N}})}catch(te){console.error("Failed to initialize autonomous platform_filters:",te)}let L="",X=k?.llm_model||"",se=k?.llm_endpoint||"";if(k?.llm_provider)try{const te=await Hb.loadCredentials(Y,k.llm_provider);te&&(L=te.api_key,X=te.model||X,se=te.endpoint||se,console.log(`Loaded stored credentials for ${k.llm_provider}`))}catch(te){console.error("Failed to load stored credentials:",te)}B(te=>({...te,autonomousPlatforms:N.platforms||te.autonomousPlatforms,autonomousMaxJobs:N.max_jobs_per_platform??te.autonomousMaxJobs??10,autonomousInstructions:k?.instructions||"",startingUrl:N.starting_url||N.start_url||N.platforms?.find(K=>K?.searchUrl)?.searchUrl||te.startingUrl||"",llmProvider:k?.llm_provider||null,llmApiKey:L,llmModel:X,llmEndpoint:se,maxRunningTime:k?.max_running_time,useVision:k?.use_vision!==void 0?k.use_vision:te.useVision??!0}))}v.selected_resume_id?U(v.selected_resume_id):v.resume_id&&U(v.resume_id),v.selected_cover_letter_template_id&&G(v.selected_cover_letter_template_id),D(N=>({...N,generateCoverLetter:v.generate_cover_letter||!1,sendConnectionRequest:v.send_connection_request||!1,useATSResume:v.use_ats_optimized||!1})),S8.isInQueue(Y)&&S8.removeFromQueue(Y);return}}catch(v){console.error("Failed to fetch current agent run, clearing localStorage:",v),nr.clearCurrentRun()}let h=!1;if(!r){const v=await gr.listAgentRuns({page:1,page_size:20});if(v.runs.length>0){let b=v.runs[0];if(c){const M=v.runs.find(R=>re(R.platform,R.workflow_id)===c);M?b=M:h=!0}if(!h&&b){i(b.id),p(b.status),_(b.workflow_id),E(re(b.platform,b.workflow_id)),nr.setCurrentRunData(b);const M=k8(b),S=re(b.platform,b.workflow_id)==="indeed"?M.date_posted||"1":void 0;B(a=>{const k={...a,runName:b.run_name||"Agent Run Settings",searchKeywords:(b.search_keywords||[])[0]||"",blacklistCompanies:(M.blacklist_companies||[]).join(", "),generateCoverLetter:b.generate_cover_letter,generateConnection:b.send_connection_request,autoSubmit:b.auto_apply,country:M.country||"usa",salaryBound:M.salary_bound||null,experienceLevels:M.experience_levels||[],remoteTypes:M.remote_types||[],jobTypes:M.job_types||[],specificLocations:M.specific_locations||[]};S!==void 0&&(k.datePosted=S);const N=b.platform_filters?.autonomous;return N&&(k.autonomousInstructions=N.instructions||"",k.llmProvider=N.llm_provider||null,k.llmApiKey=N.llm_api_key||"",k.llmModel=N.llm_model||"",k.maxRunningTime=N.max_running_time,N.use_vision!==void 0?k.useVision=N.use_vision:k.useVision===void 0&&(k.useVision=!0)),k}),b.selected_resume_id?U(b.selected_resume_id):b.resume_id&&U(b.resume_id),b.selected_cover_letter_template_id&&G(b.selected_cover_letter_template_id),D(a=>({...a,generateCoverLetter:b.generate_cover_letter||!1,sendConnectionRequest:b.send_connection_request||!1,useATSResume:b.use_ats_optimized||!1}));return}}else h=!0}if(r||h){if(!e){console.warn("No agent ID provided when attempting to create an agent run.");return}await Q({agentId:e,inheritFromLatest:r,source:r?"user_created_from_runs_page":"auto_created_for_new_user"});return}}catch(H){console.error("Failed to initialize agent run:",H)}finally{x(!1),w(!1)}},getAuthToken:P,currentWorkflowId:j,currentPlatform:A}},Mc=({currentAgentRunId:e,getAuthToken:t})=>{const[r,n]=F.useState("idle"),[l,i]=F.useState(null),[d,p]=F.useState(!1),[g,x]=F.useState(!1),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1);return{savingStatus:r,lastSaveTime:l,isSyncingBlacklist:d,isSyncingKeywords:g,saveFieldOnBlur:async(re,Q)=>{if(e){n("saving");try{const H=t();if(!H){console.error("No auth token available, cannot save field");return}gr.setAuthToken(H);let Y={};switch(re){case"runName":Y.run_name=Q;break;case"semanticInstructions":Y.semantic_instructions=Q;break;case"searchKeywords":Y.search_keywords=Q.trim()?[Q.trim()]:[];break;case"blacklistCompanies":Y.blacklist_companies=Q.split(",").map(T=>T.trim()).filter(T=>T.length>0);break;case"skipPreviouslySkippedJobs":Y.skip_previously_skipped_jobs=Q;break;case"skipStaffingCompanies":Y.skip_staffing_companies=Q;break;case"country":Y.country=Q;break;case"salaryBound":Y.salary_bound=Q;break;case"experienceLevels":Y.experience_levels=Q;break;case"remoteTypes":Y.remote_types=Q;break;case"jobTypes":Y.job_types=Q;break;case"specificLocations":Y.specific_locations=Q;break;case"selectedResumeId":Y.selected_resume_id=Q;break;case"autoSubmit":Y.auto_apply=Q;break;case"submitConfidentApplication":Y.submit_confident_application=Q;break;case"generateCoverLetter":Y.generate_cover_letter=Q;break;case"sendConnectionRequest":Y.send_connection_request=Q;break;case"useATSResume":Y.use_ats_optimized=Q;break;case"selectedATSTemplateId":Y.selected_ats_template_id=Q;break;case"selectedCoverLetterTemplateId":Y.selected_cover_letter_template_id=Q;break;case"location":Y.location=Q;break;case"datePosted":{const T=Q||"1";let o=!1;try{const c=await gr.getAgentRun(e),h=c.platform_filters||{},v=(c.workflow_id||"").toLowerCase(),M=(c.platform||"").toLowerCase()||(v.includes("indeed")?"indeed":v.includes("glassdoor")?"glassdoor":v.includes("dice")?"dice":v.includes("ziprecruiter")?"ziprecruiter":"linkedin");M==="indeed"&&(Y.platform_filters={...h,[M]:{...h[M]||{},date_posted:T}},o=!0)}catch(c){console.error("Failed to get current run for platform_filters update:",c),Y.platform_filters={indeed:{date_posted:T}},o=!0}if(!o)return;break}case"startingUrl":case"autonomousPlatforms":{try{const o=(await gr.getAgentRun(e)).platform_filters||{};Y.platform_filters={...o,autonomous:{...o.autonomous||{},...re==="startingUrl"?{starting_url:Q}:{platforms:Q}}}}catch(T){console.error("Failed to update autonomous filters:",T);return}break}case"autonomousMaxJobs":{try{const o=(await gr.getAgentRun(e)).platform_filters||{};Y.platform_filters={...o,autonomous:{...o.autonomous||{},max_jobs_per_platform:Q||10}}}catch(T){console.error("Failed to update autonomous job limit:",T);return}break}case"llmProvider":case"llmModel":case"llmEndpoint":case"maxRunningTime":case"autonomousInstructions":case"useVision":{try{const o=(await gr.getAgentRun(e)).platform_filters||{},c=o.autonomous||{},h={llmProvider:"llm_provider",llmModel:"llm_model",llmEndpoint:"llm_endpoint",maxRunningTime:"max_running_time",autonomousInstructions:"instructions",useVision:"use_vision"};Y.platform_filters={...o,autonomous:{...c,[h[re]]:Q}}}catch(T){console.error(`Failed to update ${re}:`,T);return}break}case"llmApiKey":{console.log("API key field updated (not persisted to database)");return}case"headlessOn":Y.headless_on=Q;break;default:console.warn(`Unknown field: ${re}`);return}await gr.updateAgentRun(e,Y),nr.updateCurrentRunSettings(Y),n("saved"),i(new Date),setTimeout(()=>{n("idle")},2e3)}catch(H){console.error(`Failed to save field "${re}":`,H),n("error"),setTimeout(()=>{n("idle")},3e3)}}},syncKeywordsFromResume:async(re,Q)=>{try{x(!0);const H=t();H&&_r.setAuthToken(H);const T=(await _r.generateKeywordsFromResume(re)).job_title;Q(o=>({...o,searchKeywords:T}))}catch(H){console.error("Failed to sync keywords:",H)}finally{x(!1)}},syncBlacklistFromResume:async(re,Q)=>{try{p(!0);const H=t();H&&_r.setAuthToken(H);const T=(await _r.generateBlacklistFromResume(re)).blacklist_companies.map(o=>o.company).join(", ");Q(o=>({...o,blacklistCompanies:T}))}catch(H){console.error("Failed to sync blacklist:",H)}finally{p(!1)}},resumePreview:y,isResumePreviewOpen:j,openResumePreview:re=>{w(re),_(!0)},closeResumePreview:()=>{_(!1),w(null)},isResumeUploadOpen:A,openResumeUpload:()=>E(!0),closeResumeUpload:()=>E(!1)}},M8=e=>{if(!e)return null;const t=e.toLowerCase();return t.includes("linkedin")?"linkedin":t.includes("indeed")?"indeed":t.includes("glassdoor")?"glassdoor":t.includes("ziprecruiter")?"ziprecruiter":t.includes("dice")?"dice":t.includes("autonomous")?"autonomous":t},Cc=e=>{const[t,r]=F.useState(!1);return F.useEffect(()=>{let n=!0;return(async()=>{try{const i=e();if(!i){n&&r(!0);return}gr.setAuthToken(i);const d=await gr.listAgentRuns({page:1,page_size:50}),p=new Set;d.runs.forEach(g=>{const x=M8(g.workflow_id)||M8(g.platform);x&&p.add(x)}),n&&r(p.size<=1)}catch(i){console.error("Failed to evaluate workflow guard:",i),n&&r(!0)}})(),()=>{n=!1}},[e]),t},Tc=(e={})=>{const{agentRunId:t,onThreadStatusChange:r,platform:n=Xt.LINKEDIN}=e,l=F.useCallback(()=>{try{if(t){const H=`agent_run_activities_${t}`,Y=localStorage.getItem(H);if(Y){const o=JSON.parse(Y).map(c=>({...c,timestamp:new Date(c.timestamp)}));return console.log(`Loaded ${o.length} activities from agent run storage for ${t}`),o}}return[]}catch(H){return console.warn("Failed to load activities from localStorage:",H),[]}},[t]),[i,d]=F.useState([]),[p,g]=F.useState(!1),[x,y]=F.useState(!1);F.useEffect(()=>{const H=l();H.length>0&&(console.log(`Loading ${H.length} activities for agent run ${t}`),d(H))},[t,l]);const w=()=>Math.random().toString(36).substr(2,9),j=F.useRef(null),_=F.useCallback(H=>{try{if(!t)return;j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{const Y=`agent_run_activities_${t}`;localStorage.setItem(Y,JSON.stringify(H))},5e3)}catch(Y){console.warn("Failed to save activities to localStorage:",Y)}},[t]);F.useEffect(()=>()=>{if(j.current&&clearTimeout(j.current),t&&i.length>0)try{const H=`agent_run_activities_${t}`;localStorage.setItem(H,JSON.stringify(i))}catch(H){console.warn("Failed to save activities on unmount:",H)}},[t,i]);const A=F.useCallback((H,Y,T,o)=>{const c={id:w(),type:H,text:Y,color:T||c9(H),timestamp:new Date,threadTitle:o||""};return d(h=>{const v=[...h,c];return _(v),v}),c.id},[_]),E=F.useCallback((H,Y)=>A(qr.ACTION,H,on.ACTION,Y),[A]),P=F.useCallback((H,Y)=>A(qr.THINKING,H,on.THINKING,Y),[A]),z=F.useCallback((H,Y=!1,T)=>{const o=Y?on.ERROR:on.RESULT;return A(qr.RESULT,H,o,T)},[A]),B=F.useCallback(()=>{g(!0),y(!1);const H=new Date,Y=`Session Started - ${H.toLocaleDateString()} ${H.toLocaleTimeString()}`;E("Job hunting workflow started",Y)},[E]),D=F.useCallback(async()=>{if(!t){console.error("No agent run ID available for pause/resume"),E("Error: No agent run ID available","Error");return}const H=x,Y=C8(n);try{y(!H),E(`${H?"Resuming":"Pausing"} ${Y} bot...`);let o;if(n===Xt.LINKEDIN){const{linkedinBotApi:c}=await Qt(async()=>{const{linkedinBotApi:h}=await Promise.resolve().then(()=>Wb);return{linkedinBotApi:h}},void 0,import.meta.url);H?o=await c.resumeHunting(t):o=await c.pauseHunting(t)}else if(n===Xt.INDEED){const{indeedBotApi:c}=await Qt(async()=>{const{indeedBotApi:h}=await import("./indeedBotApi-C03E9qX2.js");return{indeedBotApi:h}},[],import.meta.url);H?o=await c.resumeSearching(t):o=await c.pauseSearching(t)}else if(n===Xt.ZIPRECRUITER){const{ziprecruiterBotApi:c}=await Qt(async()=>{const{ziprecruiterBotApi:h}=await import("./ziprecruiterBotApi-C3kCIqod.js");return{ziprecruiterBotApi:h}},[],import.meta.url);H?o=await c.resumeSearching(t):o=await c.pauseSearching(t)}else if(n===Xt.GLASSDOOR){const{glassdoorBotApi:c}=await Qt(async()=>{const{glassdoorBotApi:h}=await import("./glassdoorBotApi-DCHgKHxJ.js");return{glassdoorBotApi:h}},[],import.meta.url);H?o=await c.resumeSearching(t):o=await c.pauseSearching(t)}else if(n===Xt.DICE){const{diceBotApi:c}=await Qt(async()=>{const{diceBotApi:h}=await import("./diceBotApi-C4LY8dEE.js");return{diceBotApi:h}},[],import.meta.url);H?o=await c.resumeSearching(t):o=await c.pauseSearching(t)}else if(n===Xt.AUTONOMOUS){E("Pause is not yet supported for the autonomous search agent."),y(!1);return}if(o.success){const c=H?`${Y} bot resumed successfully`:`${Y} bot paused successfully`;E(c)}else throw new Error(o.message||"Unknown error")}catch(T){console.error(`Failed to ${H?"resume":"pause"} ${Y} bot:`,T),y(H);const o=`Failed to ${H?"resume":"pause"} ${Y} bot: ${T instanceof Error?T.message:"Unknown error"}`;E(o,"Error")}},[t,x,n,E]),U=F.useCallback(async()=>{if(!t){console.error("No agent run ID available for stop"),E("Error: No agent run ID available","Error");return}console.log(`[stopHunting] Attempting to stop bot with agentRunId: ${t}, platform: ${n}`);const H=C8(n);try{E(`Stopping ${H} bot...`);let Y;if(n===Xt.LINKEDIN){const{linkedinBotApi:T}=await Qt(async()=>{const{linkedinBotApi:o}=await Promise.resolve().then(()=>Wb);return{linkedinBotApi:o}},void 0,import.meta.url);Y=await T.stopHunting(t)}else if(n===Xt.INDEED){const{indeedBotApi:T}=await Qt(async()=>{const{indeedBotApi:o}=await import("./indeedBotApi-C03E9qX2.js");return{indeedBotApi:o}},[],import.meta.url);Y=await T.stopSearching(t)}else if(n===Xt.ZIPRECRUITER){const{ziprecruiterBotApi:T}=await Qt(async()=>{const{ziprecruiterBotApi:o}=await import("./ziprecruiterBotApi-C3kCIqod.js");return{ziprecruiterBotApi:o}},[],import.meta.url);Y=await T.stopSearching(t)}else if(n===Xt.GLASSDOOR){const{glassdoorBotApi:T}=await Qt(async()=>{const{glassdoorBotApi:o}=await import("./glassdoorBotApi-DCHgKHxJ.js");return{glassdoorBotApi:o}},[],import.meta.url);Y=await T.stopSearching(t)}else if(n===Xt.DICE){const{diceBotApi:T}=await Qt(async()=>{const{diceBotApi:o}=await import("./diceBotApi-C4LY8dEE.js");return{diceBotApi:o}},[],import.meta.url);Y=await T.stopSearching(t)}else if(n===Xt.AUTONOMOUS){const{autonomousSearchApi:T}=await Qt(async()=>{const{autonomousSearchApi:o}=await Promise.resolve().then(()=>zQ);return{autonomousSearchApi:o}},void 0,import.meta.url);Y=await T.stopSearch(t)}if(Y.success){E(`${H} bot stopped successfully`);const T=new Date,o=`Session Ended - ${T.toLocaleDateString()} ${T.toLocaleTimeString()}`;E("Job hunting session completed",o)}else throw new Error(Y.message||"Unknown error")}catch(Y){console.error(`Failed to stop ${H} bot:`,Y);const T=Y instanceof Error?Y.message:"Unknown error";T.includes("No active bot found")||E(`Failed to stop ${H} bot: ${T}`,"Error")}finally{setTimeout(()=>{g(!1),y(!1)},1e3)}},[t,n,E]),G=F.useCallback(()=>{d([]),_([])},[_]),$=F.useCallback(()=>{try{const Y=Object.keys(localStorage).filter(T=>T.startsWith("activities_"));Y.length>3&&Y.sort().slice(0,-3).forEach(T=>{localStorage.removeItem(T)})}catch(H){console.warn("Failed to cleanup old activities:",H)}},[]);F.useEffect(()=>{$()},[$]);const re=F.useCallback(()=>{const H=new Date,Y=`Session Ended - ${H.toLocaleDateString()} ${H.toLocaleTimeString()}`;E("Job hunting session completed",Y),g(!1),y(!1)},[E]),Q=F.useCallback(H=>{const Y=fQ(H.activity_type||H.type),T=hQ(H,Y),o=H.thread_title,c=H.thread_status,h={id:w(),type:Y,text:H.message||"Activity update",color:T,timestamp:new Date,threadTitle:o,threadStatus:c};return d(v=>{const b=[...v,h];return _(b),b}),r&&c&&(c===gt.QUEUED||c===gt.APPLIED)&&r(c,o),h},[_,r]);return{activities:i,isRunning:p,isPaused:x,addActivity:A,addAction:E,addThinking:P,addResult:z,addActivityFromMessage:Q,startHunting:B,togglePause:D,stopHunting:U,silentStop:re,clearActivities:G}},c9=e=>{switch(e){case qr.ACTION:return on.ACTION;case qr.THINKING:return on.THINKING;case qr.RESULT:return on.RESULT;default:return on.INFO}},fQ=e=>{switch(e){case"action":return qr.ACTION;case"thinking":return qr.THINKING;case"result":return qr.RESULT;default:return qr.ACTION}},hQ=(e,t)=>e.message&&(e.message.includes("")||e.message.includes("Error")||e.message.includes("Failed"))?on.ERROR:e.message&&(e.message.includes("")||e.message.includes("Warning"))?on.WARNING:c9(t),C8=e=>{switch(e){case Xt.LINKEDIN:return"LinkedIn";case Xt.INDEED:return"Indeed";case Xt.GLASSDOOR:return"Glassdoor";case Xt.ZIPRECRUITER:return"ZipRecruiter";case Xt.DICE:return"Dice";case Xt.AUTONOMOUS:return"Autonomous";default:return"Unknown"}};function pQ(e,t,r={}){const{serialize:n=JSON.stringify,deserialize:l=JSON.parse,onError:i=(g,x)=>console.warn(`Failed to ${x} persisted state for key "${e}":`,g)}=r,[d,p]=F.useState(()=>{try{const g=sessionStorage.getItem(e);if(g!==null)return l(g)}catch(g){i(g,"load")}return t});return F.useEffect(()=>{try{sessionStorage.setItem(e,n(d))}catch(g){i(g,"save")}},[e,d,n,i]),[d,p]}function Ac(e,t,r){const[n,l]=pQ(`page_state_${e}`,t,r),i=F.useCallback(d=>{l(p=>({...p,...typeof d=="function"?d(p):d}))},[l]);return[n,i]}class gQ{constructor(){this.activityHandler=null,this.pendingMessages=[],this.isRegistered=!1}registerActivityHandler(t){this.activityHandler=t,this.isRegistered=!0,this.pendingMessages.length>0&&(this.pendingMessages.forEach(r=>{this.activityHandler?.addActivityFromMessage(r)}),this.pendingMessages=[])}updateActivityHandler(t){this.isRegistered&&(this.activityHandler=t)}unregisterActivityHandler(){this.activityHandler=null,this.isRegistered=!1}addActivityFromMessage(t){this.activityHandler?this.activityHandler.addActivityFromMessage(t):this.pendingMessages.push(t)}silentStop(){this.activityHandler&&this.activityHandler.silentStop()}setAgentRunStatus(t){this.activityHandler&&this.activityHandler.setAgentRunStatus(t)}getAgentRunStorage(){return this.activityHandler?.AgentRunStorage}}const Zu=new gQ,Fa=(e,t,r,n)=>{const l={addActivityFromMessage:e,silentStop:t,setAgentRunStatus:r,AgentRunStorage:n};return F.useEffect(()=>(Zu.registerActivityHandler(l),console.log("Registered activity handler for current page"),()=>{Zu.unregisterActivityHandler(),console.log("Unregistered activity handler")}),[]),F.useEffect(()=>{Zu.updateActivityHandler(l)},[e,t,r,n]),Zu},T8=()=>Zu;class mQ{constructor(){this.listeners=new Set,this.pollingState={pollingInterval:null,isPolling:!1},this.state=this.getStoredState()}getStoredState(t){try{const r=t?`hunting_state_${t}`:"global_hunting_state",n=localStorage.getItem(r);if(n)return JSON.parse(n)}catch(r){console.warn("Failed to load hunting state:",r)}return{isHuntingStarted:!1,isPaused:!1,sessionId:null,agentRunId:null,isAutoStopping:!1}}saveState(t,r){try{const n=r?`hunting_state_${r}`:"global_hunting_state";localStorage.setItem(n,JSON.stringify(t))}catch(n){console.warn("Failed to save hunting state:",n)}}getState(t){return t?this.getStoredState(t):{...this.state}}setState(t,r){if(console.log("[GlobalHuntingManager] setState called with updates:",t,"agentRunId:",r),r){const l={...this.getStoredState(r),...t};console.log("[GlobalHuntingManager] Updating state for agentRunId:",r,"new state:",l),this.saveState(l,r)}else this.state={...this.state,...t},console.log("[GlobalHuntingManager] Updating global state:",this.state),this.saveState(this.state);t.isHuntingStarted===!1&&this.pollingState.isPolling&&(console.log("[GlobalHuntingManager] Auto-stopping polling because isHuntingStarted set to false"),this.stopActivityPolling()),this.notifyListeners()}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}notifyListeners(){this.listeners.forEach(t=>t())}startActivityPolling(t){if(console.log("[GlobalHuntingManager] startActivityPolling called with workflowRunId:",t),this.pollingState.isPolling){console.log("[GlobalHuntingManager] Already polling - skipping");return}console.log("[GlobalHuntingManager] Starting activity polling..."),this.pollingState.isPolling=!0;const r=async()=>{try{const n=await fetch(`${rr}/api/activity/pending/${t}`);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const l=await n.json();if(l.messages&&l.messages.length>0){const i=l.messages.some(_=>_.type==="subscription_limit_reached"||_.type==="status_update"&&_.status==="stopped"&&_.message&&_.message.includes("Subscription upgrade required")||_.message&&(_.message.includes("Application limit reached")||_.message.includes("subscription limit"))),d=l.messages.find(_=>_.type==="daily_limit_reached"),p=!!d,g=l.messages.find(_=>_.type==="ai_resume_limit_reached"),x=!!g,y=!this.state.isAutoStopping&&l.messages.some(_=>_.message&&_.message.includes("Job hunting batch completed successfully! Ready to start a new batch.")),w=l.messages.map(_=>_.message&&_.message.includes("Failed to start browser in CDP mode")?{..._,message:"Failed to start: Please make sure you have closed all Chrome browser windows before starting the agent. Chrome must be completely closed for the AI to control it."}:_),j=T8();if(w.forEach(_=>{j.addActivityFromMessage(_)}),i){this.stopActivityPolling();const _=new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:"SUBSCRIPTION_LIMIT_REACHED",message:"You have reached your application limit. Please upgrade to continue hunting.",current_tier:"free",call_to_action:"Upgrade your plan to continue applying to more jobs"}}});window.dispatchEvent(_),setTimeout(()=>{const A=j.getAgentRunStorage(),E=A?.getCurrentRunId?A.getCurrentRunId():null;E&&this.setState({isHuntingStarted:!1,isAutoStopping:!1},E),this.setState({isHuntingStarted:!1,isAutoStopping:!1}),j.setAgentRunStatus("ready"),A&&A.updateCurrentRunSettings&&A.updateCurrentRunSettings({status:"ready"}),j.silentStop()},500);return}if(p){this.stopActivityPolling();const _=d?.data||{},A=new CustomEvent("showDailyLimitModal",{detail:{errorDetails:{error_code:"DAILY_LIMIT_REACHED",message:_.message||"You have reached your daily application limit.",daily_limit:_.daily_limit||0,daily_used:_.daily_used||0,daily_remaining:_.daily_remaining||0,next_reset:_.next_reset||""}}});window.dispatchEvent(A),setTimeout(()=>{const E=j.getAgentRunStorage(),P=E?.getCurrentRunId?E.getCurrentRunId():null;P&&this.setState({isHuntingStarted:!1,isAutoStopping:!1},P),this.setState({isHuntingStarted:!1,isAutoStopping:!1}),j.setAgentRunStatus("ready"),E&&E.updateCurrentRunSettings&&E.updateCurrentRunSettings({status:"ready"}),j.silentStop()},500);return}if(x){this.stopActivityPolling();try{fetch(`${rr}/api/infinite-hunt/stop`,{method:"POST",headers:{"Content-Type":"application/json"}}).catch(E=>console.error("[GlobalHuntingManager] Failed to stop infinite hunt:",E))}catch(E){console.error("[GlobalHuntingManager] Failed to stop infinite hunt:",E)}const _=g?.data||{},A=new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:"AI_RESUME_LIMIT_REACHED",message:_.message||"You have reached your AI resume generation limit.",current_tier:_.current_tier||"free",call_to_action:_.call_to_action||"Upgrade your plan to generate more AI resumes.",limit:_.limit,current_usage:_.current_usage}}});window.dispatchEvent(A),setTimeout(()=>{const E=j.getAgentRunStorage(),P=E?.getCurrentRunId?E.getCurrentRunId():null;P&&this.setState({isHuntingStarted:!1,isAutoStopping:!1},P),this.setState({isHuntingStarted:!1,isAutoStopping:!1}),j.setAgentRunStatus("ready"),E&&E.updateCurrentRunSettings&&E.updateCurrentRunSettings({status:"ready"}),j.silentStop()},500);return}y&&(this.setState({isAutoStopping:!0}),this.stopActivityPolling(),setTimeout(()=>{this.setState({isHuntingStarted:!1,isAutoStopping:!1}),j.setAgentRunStatus("ready");const _=j.getAgentRunStorage();_&&_.updateCurrentRunSettings({status:"ready"}),j.silentStop()},1e3))}}catch(n){console.error("Error polling for activity messages:",n),T8().addActivityFromMessage({type:"error",message:"Backend connection lost. Activity polling stopped.",timestamp:new Date().toISOString()}),this.stopActivityPolling()}};r(),this.pollingState.pollingInterval=setInterval(r,500)}stopActivityPolling(){console.log("[GlobalHuntingManager] stopActivityPolling called - isPolling:",this.pollingState.isPolling),this.pollingState.pollingInterval&&(clearInterval(this.pollingState.pollingInterval),this.pollingState.pollingInterval=null,console.log("[GlobalHuntingManager] Cleared polling interval")),this.pollingState.isPolling=!1,console.log("[GlobalHuntingManager] Polling stopped")}isPolling(){return this.pollingState.isPolling}reset(t){this.stopActivityPolling(),this.setState({isHuntingStarted:!1,isPaused:!1,sessionId:null,agentRunId:null,isAutoStopping:!1},t)}clearAllStoredStates(){try{console.log("[GlobalHuntingManager] Clearing all stored hunting states"),localStorage.removeItem("global_hunting_state"),Object.keys(localStorage).forEach(r=>{r.startsWith("hunting_state_")&&(console.log("[GlobalHuntingManager] Removing:",r),localStorage.removeItem(r))}),this.state={isHuntingStarted:!1,isPaused:!1,sessionId:null,agentRunId:null,isAutoStopping:!1},this.stopActivityPolling(),console.log("[GlobalHuntingManager] Successfully cleared all hunting states")}catch(t){console.error("[GlobalHuntingManager] Error clearing stored states:",t)}}}const Qr=new mQ,Tl=()=>Qr,Ua=e=>{const[t,r]=F.useState(()=>Qr.getState(e)),[n,l]=F.useState(!1);F.useEffect(()=>{console.log("[useGlobalHuntingState] agentRunId changed:",e);const A=Qr.getState(e);console.log("[useGlobalHuntingState] Retrieved state:",A),r(A),l(!1)},[e]),F.useEffect(()=>{(async()=>{if(console.log("[useGlobalHuntingState] syncWithDatabase - agentRunId:",e,"hasInitialized:",n),!e||n){console.log("[useGlobalHuntingState] Skipping sync - no agentRunId or already initialized");return}try{const{agentRunsApiService:E}=await Qt(async()=>{const{agentRunsApiService:z}=await Promise.resolve().then(()=>oU);return{agentRunsApiService:z}},void 0,import.meta.url);console.log("[useGlobalHuntingState] Fetching run data for:",e);const P=await E.getAgentRun(e);if(P){const z=P.status==="running",B=Qr.getState(e);console.log("[useGlobalHuntingState] Run data - status:",P.status,"isRunning:",z),console.log("[useGlobalHuntingState] Current state - isHuntingStarted:",B.isHuntingStarted),console.log("[useGlobalHuntingState] Is polling?",Qr.isPolling()),z!==B.isHuntingStarted?(console.log("[useGlobalHuntingState] Status mismatch - updating state"),Qr.setState({isHuntingStarted:z,sessionId:P.session_id||B.sessionId,agentRunId:e},e),z&&e&&!Qr.isPolling()&&(console.log("[GlobalHuntingState] Auto-starting polling for workflow_run_id:",e),Qr.startActivityPolling(e))):console.log("[useGlobalHuntingState] Status matches - no update needed")}l(!0)}catch(E){console.error("[useGlobalHuntingState] Failed to sync hunting state with database:",E),l(!0)}})()},[e,n]),F.useEffect(()=>Qr.subscribe(()=>{r(Qr.getState(e))}),[e]);const i=F.useCallback(A=>{Qr.setState({isHuntingStarted:A},e)},[e]),d=F.useCallback(A=>{Qr.setState({isPaused:A},e)},[e]),p=F.useCallback(A=>{Qr.setState({sessionId:A},e)},[e]),g=F.useCallback(A=>{Qr.setState({agentRunId:A},A||void 0)},[e]),x=F.useCallback(A=>{Qr.setState({isAutoStopping:A},e)},[e]),y=F.useCallback(A=>{Qr.startActivityPolling(A)},[]),w=F.useCallback(()=>{Qr.stopActivityPolling()},[]),j=F.useCallback(()=>Qr.isPolling(),[]),_=F.useCallback(()=>{Qr.reset(e)},[e]);return F.useEffect(()=>{console.log("[GlobalHuntingState] Auto-resume check - isHuntingStarted:",t.isHuntingStarted,"agentRunId:",e,"isPolling:",Qr.isPolling()),t.isHuntingStarted&&e&&!Qr.isPolling()?(console.log("[GlobalHuntingState] Resuming polling for workflow_run_id:",e),Qr.startActivityPolling(e)):t.isHuntingStarted?e?Qr.isPolling()&&console.log("[GlobalHuntingState] Not resuming - already polling"):console.log("[GlobalHuntingState] Not resuming - no agentRunId"):console.log("[GlobalHuntingState] Not resuming - isHuntingStarted is false")},[t.isHuntingStarted,e]),{isHuntingStarted:t.isHuntingStarted,isPaused:t.isPaused,sessionId:t.sessionId,agentRunId:t.agentRunId,isAutoStopping:t.isAutoStopping,setHuntingStarted:i,setPaused:d,setSessionId:p,setAgentRunId:g,setAutoStopping:x,startActivityPolling:y,stopActivityPolling:w,isPolling:j,resetHuntingState:_}},yQ=Object.freeze(Object.defineProperty({__proto__:null,getGlobalHuntingManager:Tl,useGlobalHuntingState:Ua},Symbol.toStringTag,{value:"Module"})),vQ="https://www.linkedin.com/jobs",xQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1,isSearchAgent:l=!1})=>{Vt.useEffect(()=>{const mt=document.createElement("style");return mt.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(mt),()=>{document.head.removeChild(mt)}},[]);const[i,d]=F.useState(null),[p,g]=F.useState([]),[x,y]=F.useState(!0),[w,j]=F.useState(null),[_,A]=F.useState(!1),[E,P]=F.useState(!1),[z,B]=F.useState(!1),[D,U]=F.useState(!1),[G,$]=F.useState(!1),[re,Q]=F.useState(null),[H,Y]=F.useState(null),[T,o]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[c,h]=Ac("run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:v,activeLeftTab:b}=c,M=mt=>{h({activeLeftTab:mt})},[R,S]=F.useState(0),[a,k]=F.useState(""),[N,L]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:"Agent Run Settings",autonomousPlatforms:[],autonomousMaxJobs:10,headlessOn:!1}),[X,se]=F.useState(),[te,K]=F.useState(0),[J,ne]=F.useState(),{currentAgentRunId:oe,setAgentRunStatus:ae,isPageLoading:ee,initializeAgentRun:ue,getAuthToken:Ce,currentWorkflowId:ve,currentPlatform:ge}=jc({selectedAgentId:e,defaultPlatform:"linkedin-search",forceCreateNewRun:t,onNewRunCreated:r}),Je=Cc(Ce),Te=mt=>{if(!mt)return;const _t=mt.toLowerCase();if(_t.includes("indeed"))return"indeed";if(_t.includes("glassdoor"))return"glassdoor";if(_t.includes("ziprecruiter"))return"ziprecruiter";if(_t.includes("dice"))return"dice";if(_t.includes("linkedin"))return"linkedin"},ze=ge||Te(ve)||Te(e)||"linkedin",vt=ve||e,{isHuntingStarted:he,setHuntingStarted:me,setAgentRunId:Me,setAutoStopping:pe,startActivityPolling:ke,stopActivityPolling:_e}=Ua(oe||void 0),{savingStatus:Z,lastSaveTime:q,isSyncingBlacklist:V,isSyncingKeywords:ie,saveFieldOnBlur:ce,syncKeywordsFromResume:be,syncBlacklistFromResume:fe,resumePreview:Ae,isResumePreviewOpen:ht,openResumePreview:je,closeResumePreview:Ie,isResumeUploadOpen:pt,openResumeUpload:Ne,closeResumeUpload:Ge}=Mc({currentAgentRunId:oe,getAuthToken:Ce}),{activities:Ot,isPaused:Oe,addAction:Ze,addActivityFromMessage:Lt,startHunting:Pe,togglePause:Ve,stopHunting:Bt,silentStop:Fe,clearActivities:Xe}=Tc({agentRunId:oe||void 0,platform:Xt.LINKEDIN,onThreadStatusChange:(mt,_t)=>{window.refreshQueue&&window.refreshQueue()}});Fa(Lt,Fe,ae,nr);const Et=async()=>{try{const{atsTemplateApiService:mt}=await Qt(async()=>{const{atsTemplateApiService:er}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:er}},void 0,import.meta.url),_t=await mt.listTemplates(),Pt=_t?.templates?.filter(er=>er.example_ats_resume_id&&er.example_ats_resume_id.trim()!=="")||[],Nt=_t?.success&&Pt.length>0;d(Nt),g(Pt),Pt.length>0&&!N.selectedATSTemplateId&&L(er=>({...er,selectedATSTemplateId:Pt[0].id}))}catch(mt){console.error("Failed to check ATS template availability:",mt),d(!1),g([])}};F.useEffect(()=>{T.useATSResume?Et():(d(null),g([]))},[T.useATSResume]),F.useEffect(()=>{T.useATSResume&&Et()},[]),F.useEffect(()=>{i===!0&&N.atsTemplate!=="existing"&&L(mt=>({...mt,atsTemplate:"existing"}))},[i]);const Be=()=>{const mt=N.searchKeywords&&N.searchKeywords.trim().length>0;return T.useATSResume&&(i===null||i===!1)?!1:mt},Ue=()=>!T.useATSResume||!H||H.limit===1/0?!1:H.remaining<=0;F.useEffect(()=>{const mt=async()=>{try{const _t=await sn.getUsage();Y({limit:_t.ai_resume_limit,used:_t.ai_resume_used,remaining:_t.ai_resume_remaining})}catch(_t){console.error("Failed to fetch AI resume usage:",_t)}};T.useATSResume&&mt()},[T.useATSResume]),F.useEffect(()=>{(async()=>{try{const _t=Ce();_t&&_r.setAuthToken(_t),await _r.getSupportedLocations()}catch(_t){console.error("Failed to load supported locations:",_t)}finally{y(!1)}})()},[]),F.useEffect(()=>{(e||nr.getCurrentRunId())&&ue(L,o,se,ne)},[e,t]);const It=async mt=>{try{const _t=Do()||"test-user",Pt=oe||`workflow_${Date.now()}`,{linkedinBotApi:Nt}=await Qt(async()=>{const{linkedinBotApi:Ci}=await Promise.resolve().then(()=>Wb);return{linkedinBotApi:Ci}},void 0,import.meta.url);return(await Nt.startHunting(_t,Pt,mt)).success||!1}catch(_t){return console.error("Failed to start LinkedIn Bot:",_t),!1}},$e=mt=>{h(_t=>({expandedSections:{..._t.expandedSections,[mt]:!_t.expandedSections[mt]}}))},Qe=async()=>{try{const mt=await sn.getSubscriptionStatus();return mt.remaining=5,mt.remaining<=0?(Q({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:mt.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),$(!0),!1):!0}catch(mt){return console.error("Error checking subscription status:",mt),!0}},Ft=async()=>{const mt=new Date().getHours();if(mt>=23||mt<6){B(!0);return}j(1)},qe=()=>{U(!0),B(!1),(typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):_t=>setTimeout(()=>_t(Date.now()),0))(()=>{j(1),U(!1)})},Ye=()=>{D||B(!1)},Ut=async()=>{if(w===1){A(!0);try{const mt=await Qe();j(mt?2:null)}finally{A(!1)}}},ye=()=>{_||(j(null),P(!1))},xe=async mt=>{if(!E){P(!0);try{k(""),await ce("autoSubmit",mt),await ce("submitConfidentApplication",mt),N.selectedATSTemplateId&&await ce("selectedATSTemplateId",N.selectedATSTemplateId),me(!0),pe(!1),M("queue"),ae("running"),nr.updateCurrentRunSettings({status:"running"}),Me(oe);const _t=ze==="indeed",Pt=_t?"Indeed Bot":"LinkedIn Bot";Ze(`Starting ${Pt}...`),Pe(),oe&&ke(oe);let Nt;if(_t){const{indeedBotApi:er}=await Qt(async()=>{const{indeedBotApi:Ho}=await import("./indeedBotApi-C03E9qX2.js");return{indeedBotApi:Ho}},[],import.meta.url),Ci=Do()||"test-user",Ti=oe||`workflow_${Date.now()}`;Nt=(await er.startSearching(Ci,Ti,{config:{...N,workflowRunId:oe,agentRunId:oe}}))?.success||!1}else{let er;try{er=AR({jobDescription:N.searchKeywords,country:N.country,salaryBound:N.salaryBound,experienceLevels:N.experienceLevels,remoteTypes:N.remoteTypes,jobTypes:N.jobTypes,specificLocations:N.specificLocations})}catch{er="https://www.linkedin.com/jobs/search/"}Nt=await It({linkedin_starter_url:er,config:{...N,agentRunId:oe}})}if(Nt)Ze(`${Pt} started successfully`);else throw new Error(`Failed to start ${Pt} - backend returned false`)}catch(_t){console.error("Failed to start hunting:",_t),me(!1);const Pt=ze==="indeed"?"Indeed Bot":"LinkedIn Bot";let Nt="Failed to connect to backend. Please check your connection and try again.";_t instanceof Error&&(_t.message.includes("workflow")?Nt="Failed to create agent run. Please check your settings and try again.":_t.message.includes("network")||_t.message.includes("fetch")?Nt="Network connection error. Please check your internet connection.":_t.message.includes("Bot")&&(Nt=`Unable to start ${Pt} service. Please try again after restarting the app.`)),k(Nt),Ze(`Failed to start hunting: ${_t}`)}finally{j(null),P(!1)}}},nt=()=>{const mt=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(mt)},ct=()=>{const mt=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(mt)},wt=mt=>{se(mt?.id),mt?.id&&ce("selectedResumeId",mt.id)},St=mt=>{je(mt)},Le=mt=>{ne(mt?.id),mt?.id?ce("selectedCoverLetterTemplateId",mt.id):ce("selectedCoverLetterTemplateId",null)},we=mt=>{},rt=()=>{ct()},it=()=>{Ne()},yt=async mt=>{if(Ge(),K(_t=>_t+1),mt)try{setTimeout(async()=>{const Pt=(await _r.listResumes()).find(Nt=>Nt.id===mt);Pt&&wt(Pt)},500)}catch(_t){console.error("Failed to auto-preview uploaded resume:",_t)}},Tt=mt=>{L(_t=>({..._t,...mt}))},Yt=mt=>{o(_t=>({..._t,...mt}))},Kt=async()=>{X&&await be(X,L)},fr=async()=>{X&&await fe(X,L)},or=(mt,_t)=>{switch(mt){case"country":L(Pt=>({...Pt,country:"usa"}));break;case"salaryBound":L(Pt=>({...Pt,salaryBound:null}));break;case"experienceLevels":{const Pt=N.experienceLevels.filter(Nt=>Nt!==_t);L(Nt=>({...Nt,experienceLevels:Pt}));break}case"remoteTypes":{const Pt=N.remoteTypes.filter(Nt=>Nt!==_t);L(Nt=>({...Nt,remoteTypes:Pt}));break}case"jobTypes":{const Pt=N.jobTypes.filter(Nt=>Nt!==_t);L(Nt=>({...Nt,jobTypes:Pt}));break}case"specificLocations":{const Pt=N.specificLocations.filter(Nt=>Nt!==_t);L(Nt=>({...Nt,specificLocations:Pt}));break}}};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        .filters-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
          margin-bottom: 24px;
        }
        @media (max-width: 1200px) {
          .filters-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }
        @media (max-width: 768px) {
          .filters-grid {
            grid-template-columns: 1fr;
          }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:ee?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):oe?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:N.runName,onRunNameSave:mt=>{he||(L(_t=>({..._t,runName:mt})),ce("runName",mt))},savingStatus:Z,lastSaveTime:q,workflowId:vt,platform:ze}),s.jsx(wc,{activeTab:b,onTabChange:M,disabled:!1,queueCount:R}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[b==="setup"&&s.jsx(_c,{expandedSections:v,onToggleSection:$e,userPreferences:T,formData:N,hasATSTemplate:i,atsTemplates:p,selectedResumeId:X,selectedCoverLetterTemplateId:J,refreshTrigger:te,isFiltersLoading:x,isSyncingKeywords:ie,isSyncingBlacklist:V,onFormDataChange:Tt,onUserPreferencesChange:Yt,onResumeSelect:wt,onResumePreview:St,onUploadNew:it,onNavigateToATSCreation:nt,onCoverLetterTemplateSelect:Le,onCoverLetterTemplatePreview:we,onCreateNewCoverLetterTemplate:rt,onFieldBlur:ce,onSyncKeywords:Kt,onSyncBlacklist:fr,onClearFilter:or,isHuntingStarted:he,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(Ce()),hidePersonalizedSection:l}),b==="queue"&&s.jsx(Sc,{isHuntingStarted:he,onWaitingCountChange:S,agentRunId:oe||void 0,isSearchAgent:l})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:he?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:Oe?"primary":"secondary",size:"lg",onClick:Ve,style:{flex:1},children:Oe?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Bt(),_e(),me(!1),ae("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[(!Be()||Ue())&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:[!N.searchKeywords?.trim()&&"Please add a job title to continue.",N.searchKeywords?.trim()&&T.useATSResume&&i===!1&&"Please create an ATS resume template to continue with ATS optimization.",N.searchKeywords?.trim()&&T.useATSResume&&i===null&&"Checking ATS template availability...",N.searchKeywords?.trim()&&T.useATSResume&&i&&Ue()&&s.jsxs("span",{style:{color:f.colors.accent.error},children:["AI resume limit reached (",H?.used,"/",H?.limit,")."," ",s.jsx("button",{onClick:()=>$(!0),style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",textDecoration:"underline",font:"inherit"},children:"Upgrade plan"})]})]})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Ft,disabled:!Be()||Ue(),style:{width:"100%"},children:"Start Job Hunting"}),a&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:a})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:Ot,onClearActivities:Xe})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const mt=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(mt)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(cQ,{isOpen:z,onCancel:Ye,onConfirm:qe,isConfirming:D}),s.jsx(kc,{isOpen:w!==null,step:w??1,platform:Xt.LINKEDIN,targetUrl:vQ,onClose:ye,onStepOneConfirm:Ut,isStepOneProcessing:_,isFinalizingStepTwo:E,onConfirm:xe,workflowId:vt,requireBrowserLaunch:Je,isSearchAgent:l}),s.jsx(La,{resume:Ae,isOpen:ht,onClose:Ie}),s.jsx(Da,{isOpen:pt,onClose:Ge,onUploadComplete:yt,currentAgentRunId:oe||void 0}),s.jsx(Na,{isOpen:G,onClose:()=>{$(!1),Q(null)},errorDetails:re})]})},bQ="https://secure.indeed.com/auth",wQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1})=>{Vt.useEffect(()=>{const we=document.createElement("style");return we.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(we),()=>{document.head.removeChild(we)}},[]);const[l,i]=F.useState(null),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState(null),[$,re]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[Q,H]=Ac("indeed-run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:Y,activeLeftTab:T}=Q,o=we=>{H({activeLeftTab:we})},[c,h]=F.useState(0),[v,b]=F.useState(!0),[M,R]=F.useState(""),[S,a]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:"Indeed Agent Run Settings",datePosted:"1",autonomousPlatforms:[],autonomousMaxJobs:10,headlessOn:!1}),[k,N]=F.useState(),[L,X]=F.useState(0),[se,te]=F.useState(),{currentAgentRunId:K,setAgentRunStatus:J,isPageLoading:ne,initializeAgentRun:oe,getAuthToken:ae,currentWorkflowId:ee,currentPlatform:ue}=jc({selectedAgentId:e,defaultPlatform:"indeed-search",forceCreateNewRun:t,onNewRunCreated:r}),Ce=Cc(ae),ve=ee||e,{isHuntingStarted:ge,setHuntingStarted:Je,setAgentRunId:Te,setAutoStopping:ze,startActivityPolling:vt,stopActivityPolling:he}=Ua(K||void 0),{savingStatus:me,lastSaveTime:Me,isSyncingBlacklist:pe,isSyncingKeywords:ke,saveFieldOnBlur:_e,syncKeywordsFromResume:Z,syncBlacklistFromResume:q,resumePreview:V,isResumePreviewOpen:ie,openResumePreview:ce,closeResumePreview:be,isResumeUploadOpen:fe,openResumeUpload:Ae,closeResumeUpload:ht}=Mc({currentAgentRunId:K,getAuthToken:ae}),{activities:je,isPaused:Ie,addAction:pt,addActivityFromMessage:Ne,startHunting:Ge,togglePause:Ot,stopHunting:Oe,silentStop:Ze,clearActivities:Lt}=Tc({agentRunId:K||void 0,platform:Xt.INDEED,onThreadStatusChange:(we,rt)=>{window.refreshQueue&&window.refreshQueue()}});Fa(Ne,Ze,J,nr),F.useEffect(()=>{K&&b(!1)},[K]);const Pe=async()=>{try{const{atsTemplateApiService:we}=await Qt(async()=>{const{atsTemplateApiService:Tt}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:Tt}},void 0,import.meta.url),rt=await we.listTemplates(),it=rt?.templates?.filter(Tt=>Tt.example_ats_resume_id&&Tt.example_ats_resume_id.trim()!=="")||[],yt=rt?.success&&it.length>0;i(yt),p(it),it.length>0&&!S.selectedATSTemplateId&&a(Tt=>({...Tt,selectedATSTemplateId:it[0].id}))}catch(we){console.error("Failed to check ATS template availability:",we),i(!1),p([])}};F.useEffect(()=>{$.useATSResume?Pe():(i(null),p([]))},[$.useATSResume]),F.useEffect(()=>{$.useATSResume&&Pe()},[]),F.useEffect(()=>{l===!0&&S.atsTemplate!=="existing"&&a(we=>({...we,atsTemplate:"existing"}))},[l]);const Ve=()=>{const we=S.searchKeywords&&S.searchKeywords.trim().length>0;return $.useATSResume&&(l===null||l===!1)?!1:we},Bt=()=>!$.useATSResume||!U||U.limit===1/0?!1:U.remaining<=0;F.useEffect(()=>{const we=async()=>{try{const rt=await sn.getUsage();G({limit:rt.ai_resume_limit,used:rt.ai_resume_used,remaining:rt.ai_resume_remaining})}catch(rt){console.error("Failed to fetch AI resume usage:",rt)}};$.useATSResume&&we()},[$.useATSResume]),F.useEffect(()=>{(async()=>{try{const rt=ae();rt&&_r.setAuthToken(rt),await _r.getSupportedLocations()}catch(rt){console.error("Failed to load supported locations:",rt)}finally{x(!1)}})()},[]),F.useEffect(()=>{(e||nr.getCurrentRunId())&&oe(a,re,N,te)},[e,t]);const Fe=we=>{H(rt=>({expandedSections:{...rt.expandedSections,[we]:!rt.expandedSections[we]}}))},Xe=async()=>{try{const we=await sn.getSubscriptionStatus();return we.remaining=5,we.remaining<=0?(D({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:we.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),z(!0),!1):!0}catch(we){return console.error("Error checking subscription status:",we),!0}},Et=async()=>{w(1)},Be=async()=>{if(y===1){_(!0);try{const we=await Xe();w(we?2:null)}finally{_(!1)}}},Ue=()=>{j||(w(null),E(!1))},It=async we=>{if(!A){E(!0);try{if(R(""),await _e("autoSubmit",we),await _e("submitConfidentApplication",we),S.selectedATSTemplateId&&await _e("selectedATSTemplateId",S.selectedATSTemplateId),K)try{const Yt=ae();if(Yt){gr.setAuthToken(Yt);const Kt=await gr.getAgentRun(K);if(!Kt.platform_filters||!Kt.platform_filters.indeed||!Kt.platform_filters.indeed.date_posted){const fr=S.datePosted||"1";await _e("datePosted",fr),console.log("Initialized platform_filters for existing Indeed run with date_posted:",fr)}}}catch(Yt){console.error("Failed to check/initialize platform_filters:",Yt)}Je(!0),ze(!1),o("queue"),J("running"),nr.updateCurrentRunSettings({status:"running"}),Te(K),pt("Starting Indeed Bot..."),Ge(),K&&vt(K);const{indeedBotApi:rt}=await Qt(async()=>{const{indeedBotApi:Yt}=await import("./indeedBotApi-C03E9qX2.js");return{indeedBotApi:Yt}},[],import.meta.url),it=Do()||"test-user";if((await rt.startSearching(it,K,{config:{...S,workflowRunId:K,agentRunId:K}}))?.success||!1)pt("Indeed Bot started successfully");else throw new Error("Failed to start Indeed Bot - backend returned false")}catch(rt){console.error("Failed to start hunting:",rt),Je(!1);let it="Failed to connect to backend. Please check your connection and try again.";rt instanceof Error&&(rt.message.includes("workflow")?it="Failed to create agent run. Please check your settings and try again.":rt.message.includes("network")||rt.message.includes("fetch")?it="Network connection error. Please check your internet connection.":rt.message.includes("Bot")&&(it="Unable to start Indeed Bot service. Please try again after restarting the app.")),R(it),pt(`Failed to start hunting: ${rt}`)}finally{w(null),E(!1)}}},$e=()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(we)},Qe=()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(we)},Ft=we=>{N(we?.id),we?.id&&_e("selectedResumeId",we.id)},qe=we=>{ce(we)},Ye=we=>{te(we?.id),we?.id?_e("selectedCoverLetterTemplateId",we.id):_e("selectedCoverLetterTemplateId",null)},Ut=we=>{},ye=()=>{Qe()},xe=()=>{Ae()},nt=async we=>{if(ht(),X(rt=>rt+1),we)try{setTimeout(async()=>{const it=(await _r.listResumes()).find(yt=>yt.id===we);it&&Ft(it)},500)}catch(rt){console.error("Failed to auto-preview uploaded resume:",rt)}},ct=we=>{a(rt=>({...rt,...we}))},wt=we=>{re(rt=>({...rt,...we}))},St=async()=>{k&&await Z(k,a)},Le=async()=>{k&&await q(k,a)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:ne?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):K?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:S.runName,onRunNameSave:we=>{ge||(a(rt=>({...rt,runName:we})),_e("runName",we))},savingStatus:me,lastSaveTime:Me,workflowId:ve,platform:ue}),s.jsx(wc,{activeTab:T,onTabChange:o,disabled:!1,queueCount:c}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[T==="setup"&&s.jsx(_c,{expandedSections:Y,onToggleSection:Fe,userPreferences:$,formData:S,hasATSTemplate:l,atsTemplates:d,selectedResumeId:k,selectedCoverLetterTemplateId:se,refreshTrigger:L,isFiltersLoading:g,isSyncingKeywords:ke,isSyncingBlacklist:pe,onFormDataChange:ct,onUserPreferencesChange:wt,onResumeSelect:Ft,onResumePreview:qe,onUploadNew:xe,onNavigateToATSCreation:$e,onCoverLetterTemplateSelect:Ye,onCoverLetterTemplatePreview:Ut,onCreateNewCoverLetterTemplate:ye,onFieldBlur:_e,onSyncKeywords:St,onSyncBlacklist:Le,onClearFilter:()=>{},isHuntingStarted:ge,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(ae()),hidePersonalizedSection:!0,customJobsSection:s.jsx(sV,{expandedSections:Y,onToggleSection:Fe,formData:S,onFormDataChange:ct,onFieldBlur:_e,isSyncingBlacklist:pe,onSyncBlacklist:Le,selectedResumeId:k,getAuthToken:()=>Promise.resolve(ae())})}),T==="queue"&&s.jsx(Sc,{isHuntingStarted:ge,onWaitingCountChange:h,agentRunId:K||void 0,platform:"indeed"})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:ge?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:Ie?"primary":"secondary",size:"lg",onClick:Ot,style:{flex:1},children:Ie?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Oe(),he(),Je(!1),J("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[(!Ve()||Bt())&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:[!S.searchKeywords?.trim()&&!S.location?.trim()&&"Please add a job title and location to continue.",!S.searchKeywords?.trim()&&S.location?.trim()&&"Please add a job title to continue.",S.searchKeywords?.trim()&&!S.location?.trim()&&"Please add a location to continue.",S.searchKeywords?.trim()&&S.location?.trim()&&$.useATSResume&&l===!1&&"Please create an ATS resume template to continue with ATS optimization.",S.searchKeywords?.trim()&&S.location?.trim()&&$.useATSResume&&l===null&&"Checking ATS template availability...",S.searchKeywords?.trim()&&S.location?.trim()&&$.useATSResume&&l&&Bt()&&s.jsxs("span",{style:{color:f.colors.accent.error},children:["AI resume limit reached (",U?.used,"/",U?.limit,")."," ",s.jsx("button",{onClick:()=>z(!0),style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",textDecoration:"underline",font:"inherit"},children:"Upgrade plan"})]})]})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Et,disabled:!Ve()||Bt(),style:{width:"100%"},children:"Start Job Searching"}),M&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:M})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:je,onClearActivities:Lt})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(we)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(kc,{isOpen:y!==null,step:y??1,platform:Xt.INDEED,targetUrl:bQ,onClose:Ue,onStepOneConfirm:Be,isStepOneProcessing:j,isFinalizingStepTwo:A,onConfirm:It,workflowId:ve,requireBrowserLaunch:Ce}),s.jsx(La,{resume:V,isOpen:ie,onClose:be}),s.jsx(Da,{isOpen:fe,onClose:ht,onUploadComplete:nt,currentAgentRunId:K||void 0}),s.jsx(Na,{isOpen:P,onClose:()=>{z(!1),D(null)},errorDetails:B})]})},_Q="https://www.ziprecruiter.com/authn/login",SQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1})=>{Vt.useEffect(()=>{const Le=document.createElement("style");return Le.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(Le),()=>{document.head.removeChild(Le)}},[]);const[l,i]=F.useState(null),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState(null),[$,re]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[Q,H]=Ac("ziprecruiter-run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:Y,activeLeftTab:T}=Q,o=Le=>{H({activeLeftTab:Le})},[c,h]=F.useState(0),[v,b]=F.useState(""),[M,R]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:"ZipRecruiter Agent Run Settings",autonomousPlatforms:[],autonomousMaxJobs:10,headlessOn:!1}),[S,a]=F.useState(),[k,N]=F.useState(0),[L,X]=F.useState(),{currentAgentRunId:se,setAgentRunStatus:te,isPageLoading:K,initializeAgentRun:J,getAuthToken:ne,currentWorkflowId:oe,currentPlatform:ae}=jc({selectedAgentId:e,defaultPlatform:"ziprecruiter-search",forceCreateNewRun:t,onNewRunCreated:r}),ee=Cc(ne),ue=oe||e,{isHuntingStarted:Ce,setHuntingStarted:ve,setSessionId:ge,setAgentRunId:Je,setAutoStopping:Te,startActivityPolling:ze,stopActivityPolling:vt}=Ua(se||void 0),{savingStatus:he,lastSaveTime:me,isSyncingBlacklist:Me,isSyncingKeywords:pe,saveFieldOnBlur:ke,syncKeywordsFromResume:_e,syncBlacklistFromResume:Z,resumePreview:q,isResumePreviewOpen:V,openResumePreview:ie,closeResumePreview:ce,isResumeUploadOpen:be,openResumeUpload:fe,closeResumeUpload:Ae}=Mc({currentAgentRunId:se,getAuthToken:ne}),{activities:ht,isPaused:je,addAction:Ie,addActivityFromMessage:pt,startHunting:Ne,togglePause:Ge,stopHunting:Ot,silentStop:Oe,clearActivities:Ze}=Tc({agentRunId:se||void 0,platform:Xt.ZIPRECRUITER,onThreadStatusChange:(Le,we)=>{window.refreshQueue&&window.refreshQueue()}});Fa(pt,Oe,te,nr);const Lt=async()=>{try{const{atsTemplateApiService:Le}=await Qt(async()=>{const{atsTemplateApiService:yt}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:yt}},void 0,import.meta.url),we=await Le.listTemplates(),rt=we?.templates?.filter(yt=>yt.example_ats_resume_id&&yt.example_ats_resume_id.trim()!=="")||[],it=we?.success&&rt.length>0;i(it),p(rt),rt.length>0&&!M.selectedATSTemplateId&&R(yt=>({...yt,selectedATSTemplateId:rt[0].id}))}catch(Le){console.error("Failed to check ATS template availability:",Le),i(!1),p([])}};F.useEffect(()=>{$.useATSResume?Lt():(i(null),p([]))},[$.useATSResume]),F.useEffect(()=>{$.useATSResume&&Lt()},[]),F.useEffect(()=>{l===!0&&M.atsTemplate!=="existing"&&R(Le=>({...Le,atsTemplate:"existing"}))},[l]);const Pe=()=>{const Le=M.searchKeywords&&M.searchKeywords.trim().length>0;return $.useATSResume&&(l===null||l===!1)?!1:Le},Ve=()=>!$.useATSResume||!U||U.limit===1/0?!1:U.remaining<=0;F.useEffect(()=>{const Le=async()=>{try{const we=await sn.getUsage();G({limit:we.ai_resume_limit,used:we.ai_resume_used,remaining:we.ai_resume_remaining})}catch(we){console.error("Failed to fetch AI resume usage:",we)}};$.useATSResume&&Le()},[$.useATSResume]),F.useEffect(()=>{(async()=>{try{const we=ne();we&&_r.setAuthToken(we),await _r.getSupportedLocations()}catch(we){console.error("Failed to load supported locations:",we)}finally{x(!1)}})()},[]),F.useEffect(()=>{(e||nr.getCurrentRunId())&&J(R,re,a,X)},[e,t]);const Bt=Le=>{H(we=>({expandedSections:{...we.expandedSections,[Le]:!we.expandedSections[Le]}}))},Fe=async()=>{try{const Le=await sn.getSubscriptionStatus();return Le.remaining=5,Le.remaining<=0?(D({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:Le.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),z(!0),!1):!0}catch(Le){return console.error("Error checking subscription status:",Le),!0}},Xe=async()=>{w(1)},Et=async()=>{if(y===1){_(!0);try{const Le=await Fe();w(Le?2:null)}finally{_(!1)}}},Be=()=>{j||(w(null),E(!1))},Ue=async Le=>{if(!A){E(!0);try{b(""),await ke("autoSubmit",Le),await ke("submitConfidentApplication",Le),M.selectedATSTemplateId&&await ke("selectedATSTemplateId",M.selectedATSTemplateId),ve(!0),Te(!1),o("queue"),te("running"),nr.updateCurrentRunSettings({status:"running"}),ge(se),Je(se),Ie("Starting ZipRecruiter Bot..."),Ne(),se&&ze(se);const{ziprecruiterBotApi:we}=await Qt(async()=>{const{ziprecruiterBotApi:Tt}=await import("./ziprecruiterBotApi-C3kCIqod.js");return{ziprecruiterBotApi:Tt}},[],import.meta.url),rt=Do()||"test-user";if((await we.startSearching(rt,se,{config:{...M,workflowRunId:se,agentRunId:se}}))?.success||!1)Ie("ZipRecruiter Bot started successfully");else throw new Error("Failed to start ZipRecruiter Bot - backend returned false")}catch(we){console.error("Failed to start hunting:",we),ve(!1);let rt="Failed to connect to backend. Please check your connection and try again.";we instanceof Error&&(we.message.includes("workflow")?rt="Failed to create agent run. Please check your settings and try again.":we.message.includes("network")||we.message.includes("fetch")?rt="Network connection error. Please check your internet connection.":we.message.includes("Bot")&&(rt="Unable to start ZipRecruiter Bot service. Please try again after restarting the app.")),b(rt),Ie(`Failed to start hunting: ${we}`)}finally{w(null),E(!1)}}},It=()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(Le)},$e=()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(Le)},Qe=Le=>{a(Le?.id),Le?.id&&ke("selectedResumeId",Le.id)},Ft=Le=>{ie(Le)},qe=Le=>{X(Le?.id),Le?.id?ke("selectedCoverLetterTemplateId",Le.id):ke("selectedCoverLetterTemplateId",null)},Ye=Le=>{},Ut=()=>{$e()},ye=()=>{fe()},xe=async Le=>{if(Ae(),N(we=>we+1),Le)try{setTimeout(async()=>{const rt=(await _r.listResumes()).find(it=>it.id===Le);rt&&Qe(rt)},500)}catch(we){console.error("Failed to auto-preview uploaded resume:",we)}},nt=Le=>{R(we=>({...we,...Le}))},ct=Le=>{re(we=>({...we,...Le}))},wt=async()=>{S&&await _e(S,R)},St=async()=>{S&&await Z(S,R)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:K?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):se?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:M.runName,onRunNameSave:Le=>{Ce||(R(we=>({...we,runName:Le})),ke("runName",Le))},savingStatus:he,lastSaveTime:me,workflowId:oe,platform:ae}),s.jsx(wc,{activeTab:T,onTabChange:o,disabled:!1,queueCount:c}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[T==="setup"&&s.jsx(_c,{expandedSections:Y,onToggleSection:Bt,userPreferences:$,formData:M,hasATSTemplate:l,atsTemplates:d,selectedResumeId:S,selectedCoverLetterTemplateId:L,refreshTrigger:k,isFiltersLoading:g,isSyncingKeywords:pe,isSyncingBlacklist:Me,onFormDataChange:nt,onUserPreferencesChange:ct,onResumeSelect:Qe,onResumePreview:Ft,onUploadNew:ye,onNavigateToATSCreation:It,onCoverLetterTemplateSelect:qe,onCoverLetterTemplatePreview:Ye,onCreateNewCoverLetterTemplate:Ut,onFieldBlur:ke,onSyncKeywords:wt,onSyncBlacklist:St,onClearFilter:()=>{},isHuntingStarted:Ce,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(ne()),hidePersonalizedSection:!0,customJobsSection:s.jsx(oV,{expandedSections:Y,onToggleSection:Bt,formData:M,onFormDataChange:nt,onFieldBlur:ke,isSyncingBlacklist:Me,onSyncBlacklist:St,selectedResumeId:S,getAuthToken:()=>Promise.resolve(ne())})}),T==="queue"&&s.jsx(Sc,{isHuntingStarted:Ce,onWaitingCountChange:h,agentRunId:se||void 0,platform:"ziprecruiter"})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:Ce?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:je?"primary":"secondary",size:"lg",onClick:Ge,style:{flex:1},children:je?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Ot(),vt(),ve(!1),te("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[(!Pe()||Ve())&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:[!M.searchKeywords?.trim()&&!M.location?.trim()&&"Please add a job title and location to continue.",!M.searchKeywords?.trim()&&M.location?.trim()&&"Please add a job title to continue.",M.searchKeywords?.trim()&&!M.location?.trim()&&"Please add a location to continue.",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l===!1&&"Please create an ATS resume template to continue with ATS optimization.",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l===null&&"Checking ATS template availability...",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l&&Ve()&&s.jsxs("span",{style:{color:f.colors.accent.error},children:["AI resume limit reached (",U?.used,"/",U?.limit,")."," ",s.jsx("button",{onClick:()=>z(!0),style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",textDecoration:"underline",font:"inherit"},children:"Upgrade plan"})]})]})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Xe,disabled:!Pe()||Ve(),style:{width:"100%"},children:"Start Job Searching"}),v&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:v})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:ht,onClearActivities:Ze})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(Le)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(kc,{isOpen:y!==null,step:y??1,platform:Xt.ZIPRECRUITER,targetUrl:_Q,onClose:Be,onStepOneConfirm:Et,isStepOneProcessing:j,isFinalizingStepTwo:A,onConfirm:Ue,workflowId:ue,requireBrowserLaunch:ee}),s.jsx(La,{resume:q,isOpen:V,onClose:ce}),s.jsx(Da,{isOpen:be,onClose:Ae,onUploadComplete:xe,currentAgentRunId:se||void 0}),s.jsx(Na,{isOpen:P,onClose:()=>{z(!1),D(null)},errorDetails:B})]})},kQ="https://www.glassdoor.com/index.htm",jQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1})=>{Vt.useEffect(()=>{const it=document.createElement("style");return it.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(it),()=>{document.head.removeChild(it)}},[]);const[l,i]=F.useState(null),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState(null),[$,re]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[Q,H]=Ac("glassdoor-run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:Y,activeLeftTab:T}=Q,o=it=>{H({activeLeftTab:it})},[c,h]=F.useState(0),[v,b]=F.useState(""),M=()=>"Glassdoor Agent Run Settings",[R,S]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:M(),headlessOn:!1}),[a,k]=F.useState(),[N,L]=F.useState(0),[X,se]=F.useState(),te=it=>it?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(it):!1,K=()=>{if(e&&!te(e))return"glassdoor-search"},{currentAgentRunId:J,setAgentRunStatus:ne,isPageLoading:oe,initializeAgentRun:ae,getAuthToken:ee,currentWorkflowId:ue,currentPlatform:Ce}=jc({selectedAgentId:e,defaultPlatform:K(),forceCreateNewRun:t,onNewRunCreated:r}),ve=Cc(ee),ge=ue||e,{isHuntingStarted:Je,setHuntingStarted:Te,setSessionId:ze,setAgentRunId:vt,setAutoStopping:he,startActivityPolling:me,stopActivityPolling:Me}=Ua(J||void 0),{savingStatus:pe,lastSaveTime:ke,isSyncingBlacklist:_e,isSyncingKeywords:Z,saveFieldOnBlur:q,syncKeywordsFromResume:V,syncBlacklistFromResume:ie,resumePreview:ce,isResumePreviewOpen:be,openResumePreview:fe,closeResumePreview:Ae,isResumeUploadOpen:ht,openResumeUpload:je,closeResumeUpload:Ie}=Mc({currentAgentRunId:J,getAuthToken:ee}),{activities:pt,isPaused:Ne,addAction:Ge,addActivityFromMessage:Ot,startHunting:Oe,togglePause:Ze,stopHunting:Lt,silentStop:Pe,clearActivities:Ve}=Tc({agentRunId:J||void 0,platform:Xt.GLASSDOOR,onThreadStatusChange:(it,yt)=>{window.refreshQueue&&window.refreshQueue()}});Fa(Ot,Pe,ne,nr);const Bt=async()=>{try{const{atsTemplateApiService:it}=await Qt(async()=>{const{atsTemplateApiService:Kt}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:Kt}},void 0,import.meta.url),yt=await it.listTemplates(),Tt=yt?.templates?.filter(Kt=>Kt.example_ats_resume_id&&Kt.example_ats_resume_id.trim()!=="")||[],Yt=yt?.success&&Tt.length>0;i(Yt),p(Tt),Tt.length>0&&!R.selectedATSTemplateId&&S(Kt=>({...Kt,selectedATSTemplateId:Tt[0].id}))}catch(it){console.error("Failed to check ATS template availability:",it),i(!1),p([])}};F.useEffect(()=>{$.useATSResume?Bt():(i(null),p([]))},[$.useATSResume]),F.useEffect(()=>{$.useATSResume&&Bt()},[]),F.useEffect(()=>{l===!0&&R.atsTemplate!=="existing"&&S(it=>({...it,atsTemplate:"existing"}))},[l]);const Fe=()=>{const it=R.searchKeywords&&R.searchKeywords.trim().length>0;return $.useATSResume&&(l===null||l===!1)?!1:it},Xe=()=>!$.useATSResume||!U||U.limit===1/0?!1:U.remaining<=0;F.useEffect(()=>{const it=async()=>{try{const yt=await sn.getUsage();G({limit:yt.ai_resume_limit,used:yt.ai_resume_used,remaining:yt.ai_resume_remaining})}catch(yt){console.error("Failed to fetch AI resume usage:",yt)}};$.useATSResume&&it()},[$.useATSResume]),F.useEffect(()=>{(async()=>{try{const yt=ee();yt&&_r.setAuthToken(yt),await _r.getSupportedLocations()}catch(yt){console.error("Failed to load supported locations:",yt)}finally{x(!1)}})()},[ee]),F.useEffect(()=>{(e||nr.getCurrentRunId())&&ae(S,re,k,se)},[e,t]);const Et=it=>{H(yt=>({expandedSections:{...yt.expandedSections,[it]:!yt.expandedSections[it]}}))},Be=async()=>{try{const it=await sn.getSubscriptionStatus();return it.remaining=5,it.remaining<=0?(D({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:it.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),z(!0),!1):!0}catch(it){return console.error("Error checking subscription status:",it),!0}},Ue=async()=>{w(1)},It=async()=>{if(y===1){_(!0);try{const it=await Be();w(it?2:null)}finally{_(!1)}}},$e=()=>{j||(w(null),E(!1))},Qe=async it=>{if(!A){E(!0);try{b(""),await q("autoSubmit",it),await q("submitConfidentApplication",it),R.selectedATSTemplateId&&await q("selectedATSTemplateId",R.selectedATSTemplateId),Te(!0),he(!1),o("queue"),ne("running"),nr.updateCurrentRunSettings({status:"running"}),ze(J),vt(J),Ge("Starting Glassdoor Bot..."),Oe(),J&&me(J);const yt=Do()||"test-user",{glassdoorBotApi:Tt}=await Qt(async()=>{const{glassdoorBotApi:Kt}=await import("./glassdoorBotApi-DCHgKHxJ.js");return{glassdoorBotApi:Kt}},[],import.meta.url);if((await Tt.startSearching(yt,J,{config:{...R,workflowRunId:J,agentRunId:J}}))?.success)Ge("Glassdoor Bot started successfully");else throw new Error("Failed to start Glassdoor Bot - backend returned false")}catch(yt){console.error("Failed to start hunting:",yt),Te(!1);let Tt="Failed to connect to backend. Please check your connection and try again.";yt instanceof Error&&(yt.message.includes("workflow")?Tt="Failed to create agent run. Please check your settings and try again.":yt.message.includes("network")||yt.message.includes("fetch")?Tt="Network connection error. Please check your internet connection.":yt.message.includes("Bot")&&(Tt="Unable to start Glassdoor Bot service. Please try again after restarting the app.")),b(Tt),Ge(`Failed to start hunting: ${yt}`)}finally{w(null),E(!1)}}},Ft=()=>{const it=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(it)},qe=()=>{const it=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(it)},Ye=it=>{k(it?.id),it?.id&&q("selectedResumeId",it.id)},Ut=it=>{fe(it)},ye=it=>{se(it?.id),it?.id?q("selectedCoverLetterTemplateId",it.id):q("selectedCoverLetterTemplateId",null)},xe=it=>{},nt=()=>{qe()},ct=()=>{je()},wt=async it=>{if(Ie(),L(yt=>yt+1),it)try{setTimeout(async()=>{const Tt=(await _r.listResumes()).find(Yt=>Yt.id===it);Tt&&Ye(Tt)},500)}catch(yt){console.error("Failed to auto-preview uploaded resume:",yt)}},St=it=>{S(yt=>({...yt,...it}))},Le=it=>{re(yt=>({...yt,...it}))},we=async()=>{a&&await V(a,S)},rt=async()=>{a&&await ie(a,S)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:oe?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):J?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:R.runName,onRunNameSave:it=>{Je||(S(yt=>({...yt,runName:it})),q("runName",it))},savingStatus:pe,lastSaveTime:ke,workflowId:ge,platform:Ce}),s.jsx(wc,{activeTab:T,onTabChange:o,disabled:!1,queueCount:c}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[T==="setup"&&s.jsx(_c,{expandedSections:Y,onToggleSection:Et,userPreferences:$,formData:R,hasATSTemplate:l,atsTemplates:d,selectedResumeId:a,selectedCoverLetterTemplateId:X,refreshTrigger:N,isFiltersLoading:g,isSyncingKeywords:Z,isSyncingBlacklist:_e,onFormDataChange:St,onUserPreferencesChange:Le,onResumeSelect:Ye,onResumePreview:Ut,onUploadNew:ct,onNavigateToATSCreation:Ft,onCoverLetterTemplateSelect:ye,onCoverLetterTemplatePreview:xe,onCreateNewCoverLetterTemplate:nt,onFieldBlur:q,onSyncKeywords:we,onSyncBlacklist:rt,onClearFilter:()=>{},isHuntingStarted:Je,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(ee()),hidePersonalizedSection:!0,customJobsSection:s.jsx(aV,{expandedSections:Y,onToggleSection:Et,formData:R,onFormDataChange:St,onFieldBlur:q,isSyncingBlacklist:_e,onSyncBlacklist:rt,selectedResumeId:a,getAuthToken:()=>Promise.resolve(ee())})}),T==="queue"&&s.jsx(Sc,{isHuntingStarted:Je,onWaitingCountChange:h,agentRunId:J||void 0,platform:"glassdoor"})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:Je?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:Ne?"primary":"secondary",size:"lg",onClick:Ze,style:{flex:1},children:Ne?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Lt(),Me(),Te(!1),ne("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[(!Fe()||Xe())&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:[!R.searchKeywords?.trim()&&!R.location?.trim()&&"Please add a job title and location to continue.",!R.searchKeywords?.trim()&&R.location?.trim()&&"Please add a job title to continue.",R.searchKeywords?.trim()&&!R.location?.trim()&&"Please add a location to continue.",R.searchKeywords?.trim()&&R.location?.trim()&&$.useATSResume&&l===!1&&"Please create an ATS resume template to continue with ATS optimization.",R.searchKeywords?.trim()&&R.location?.trim()&&$.useATSResume&&l===null&&"Checking ATS template availability...",R.searchKeywords?.trim()&&R.location?.trim()&&$.useATSResume&&l&&Xe()&&s.jsxs("span",{style:{color:f.colors.accent.error},children:["AI resume limit reached (",U?.used,"/",U?.limit,")."," ",s.jsx("button",{onClick:()=>z(!0),style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",textDecoration:"underline",font:"inherit"},children:"Upgrade plan"})]})]})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Ue,disabled:!Fe()||Xe(),style:{width:"100%"},children:"Start Job Searching"}),v&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:v})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:pt,onClearActivities:Ve})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const it=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(it)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(kc,{isOpen:y!==null,step:y??1,platform:Xt.GLASSDOOR,targetUrl:kQ,onClose:$e,onStepOneConfirm:It,isStepOneProcessing:j,isFinalizingStepTwo:A,onConfirm:Qe,workflowId:ge,requireBrowserLaunch:ve}),s.jsx(La,{resume:ce,isOpen:be,onClose:Ae}),s.jsx(Da,{isOpen:ht,onClose:Ie,onUploadComplete:wt,currentAgentRunId:J||void 0}),s.jsx(Na,{isOpen:P,onClose:()=>{z(!1),D(null)},errorDetails:B})]})},MQ="https://www.dice.com/jobs",CQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1})=>{Vt.useEffect(()=>{const Le=document.createElement("style");return Le.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(Le),()=>{document.head.removeChild(Le)}},[]);const[l,i]=F.useState(null),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState(null),[$,re]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[Q,H]=Ac("dice-run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:Y,activeLeftTab:T}=Q,o=Le=>{H({activeLeftTab:Le})},[c,h]=F.useState(0),[v,b]=F.useState(""),[M,R]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:"Dice Agent Run Settings",autonomousPlatforms:[],autonomousMaxJobs:10,headlessOn:!1}),[S,a]=F.useState(),[k,N]=F.useState(0),[L,X]=F.useState(),{currentAgentRunId:se,setAgentRunStatus:te,isPageLoading:K,initializeAgentRun:J,getAuthToken:ne,currentWorkflowId:oe,currentPlatform:ae}=jc({selectedAgentId:e,defaultPlatform:"dice-search",forceCreateNewRun:t,onNewRunCreated:r}),ee=Cc(ne),ue=oe||e,{isHuntingStarted:Ce,setHuntingStarted:ve,setSessionId:ge,setAgentRunId:Je,setAutoStopping:Te,startActivityPolling:ze,stopActivityPolling:vt}=Ua(se||void 0),{savingStatus:he,lastSaveTime:me,isSyncingBlacklist:Me,isSyncingKeywords:pe,saveFieldOnBlur:ke,syncKeywordsFromResume:_e,syncBlacklistFromResume:Z,resumePreview:q,isResumePreviewOpen:V,openResumePreview:ie,closeResumePreview:ce,isResumeUploadOpen:be,openResumeUpload:fe,closeResumeUpload:Ae}=Mc({currentAgentRunId:se,getAuthToken:ne}),{activities:ht,isPaused:je,addAction:Ie,addActivityFromMessage:pt,startHunting:Ne,togglePause:Ge,stopHunting:Ot,silentStop:Oe,clearActivities:Ze}=Tc({agentRunId:se||void 0,platform:Xt.DICE,onThreadStatusChange:(Le,we)=>{window.refreshQueue&&window.refreshQueue()}});Fa(pt,Oe,te,nr);const Lt=async()=>{try{const{atsTemplateApiService:Le}=await Qt(async()=>{const{atsTemplateApiService:yt}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:yt}},void 0,import.meta.url),we=await Le.listTemplates(),rt=we?.templates?.filter(yt=>yt.example_ats_resume_id&&yt.example_ats_resume_id.trim()!=="")||[],it=we?.success&&rt.length>0;i(it),p(rt),rt.length>0&&!M.selectedATSTemplateId&&R(yt=>({...yt,selectedATSTemplateId:rt[0].id}))}catch(Le){console.error("Failed to check ATS template availability:",Le),i(!1),p([])}};F.useEffect(()=>{$.useATSResume?Lt():(i(null),p([]))},[$.useATSResume]),F.useEffect(()=>{$.useATSResume&&Lt()},[]),F.useEffect(()=>{l===!0&&M.atsTemplate!=="existing"&&R(Le=>({...Le,atsTemplate:"existing"}))},[l]);const Pe=()=>{const Le=M.searchKeywords&&M.searchKeywords.trim().length>0;return $.useATSResume&&(l===null||l===!1)?!1:Le},Ve=()=>!$.useATSResume||!U||U.limit===1/0?!1:U.remaining<=0;F.useEffect(()=>{const Le=async()=>{try{const we=await sn.getUsage();G({limit:we.ai_resume_limit,used:we.ai_resume_used,remaining:we.ai_resume_remaining})}catch(we){console.error("Failed to fetch AI resume usage:",we)}};$.useATSResume&&Le()},[$.useATSResume]),F.useEffect(()=>{(async()=>{try{const we=ne();we&&_r.setAuthToken(we),await _r.getSupportedLocations()}catch(we){console.error("Failed to load supported locations:",we)}finally{x(!1)}})()},[]),F.useEffect(()=>{(e||nr.getCurrentRunId())&&J(R,re,a,X)},[e,t]);const Bt=Le=>{H(we=>({expandedSections:{...we.expandedSections,[Le]:!we.expandedSections[Le]}}))},Fe=async()=>{try{const Le=await sn.getSubscriptionStatus();return Le.remaining=5,Le.remaining<=0?(D({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:Le.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),z(!0),!1):!0}catch(Le){return console.error("Error checking subscription status:",Le),!0}},Xe=async()=>{w(1)},Et=async()=>{if(y===1){_(!0);try{const Le=await Fe();w(Le?2:null)}finally{_(!1)}}},Be=()=>{j||(w(null),E(!1))},Ue=async Le=>{if(!A){E(!0);try{b(""),await ke("autoSubmit",Le),await ke("submitConfidentApplication",Le),M.selectedATSTemplateId&&await ke("selectedATSTemplateId",M.selectedATSTemplateId),ve(!0),Te(!1),o("queue"),te("running"),nr.updateCurrentRunSettings({status:"running"}),ge(se),Je(se),Ie("Starting Dice Bot..."),Ne(),se&&ze(se);const{diceBotApi:we}=await Qt(async()=>{const{diceBotApi:Tt}=await import("./diceBotApi-C4LY8dEE.js");return{diceBotApi:Tt}},[],import.meta.url),rt=Do()||"test-user";if((await we.startSearching(rt,se,{config:{...M,workflowRunId:se,agentRunId:se}}))?.success||!1)Ie("Dice Bot started successfully");else throw new Error("Failed to start Dice Bot - backend returned false")}catch(we){console.error("Failed to start hunting:",we),ve(!1);let rt="Failed to connect to backend. Please check your connection and try again.";we instanceof Error&&(we.message.includes("workflow")?rt="Failed to create agent run. Please check your settings and try again.":we.message.includes("network")||we.message.includes("fetch")?rt="Network connection error. Please check your internet connection.":we.message.includes("Bot")&&(rt="Unable to start Dice Bot service. Please try again after restarting the app.")),b(rt),Ie(`Failed to start hunting: ${we}`)}finally{w(null),E(!1)}}},It=()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(Le)},$e=()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(Le)},Qe=Le=>{a(Le?.id),Le?.id&&ke("selectedResumeId",Le.id)},Ft=Le=>{ie(Le)},qe=Le=>{X(Le?.id),Le?.id?ke("selectedCoverLetterTemplateId",Le.id):ke("selectedCoverLetterTemplateId",null)},Ye=Le=>{},Ut=()=>{$e()},ye=()=>{fe()},xe=async Le=>{if(Ae(),N(we=>we+1),Le)try{setTimeout(async()=>{const rt=(await _r.listResumes()).find(it=>it.id===Le);rt&&Qe(rt)},500)}catch(we){console.error("Failed to auto-preview uploaded resume:",we)}},nt=Le=>{R(we=>({...we,...Le}))},ct=Le=>{re(we=>({...we,...Le}))},wt=async()=>{S&&await _e(S,R)},St=async()=>{S&&await Z(S,R)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:K?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):se?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:M.runName,onRunNameSave:Le=>{Ce||(R(we=>({...we,runName:Le})),ke("runName",Le))},savingStatus:he,lastSaveTime:me,workflowId:ue,platform:ae}),s.jsx(wc,{activeTab:T,onTabChange:o,disabled:!1,queueCount:c}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[T==="setup"&&s.jsx(_c,{expandedSections:Y,onToggleSection:Bt,userPreferences:$,formData:M,hasATSTemplate:l,atsTemplates:d,selectedResumeId:S,selectedCoverLetterTemplateId:L,refreshTrigger:k,isFiltersLoading:g,isSyncingKeywords:pe,isSyncingBlacklist:Me,onFormDataChange:nt,onUserPreferencesChange:ct,onResumeSelect:Qe,onResumePreview:Ft,onUploadNew:ye,onNavigateToATSCreation:It,onCoverLetterTemplateSelect:qe,onCoverLetterTemplatePreview:Ye,onCreateNewCoverLetterTemplate:Ut,onFieldBlur:ke,onSyncKeywords:wt,onSyncBlacklist:St,onClearFilter:()=>{},isHuntingStarted:Ce,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(ne()),hidePersonalizedSection:!0,customJobsSection:s.jsx(lV,{expandedSections:Y,onToggleSection:Bt,formData:M,onFormDataChange:nt,onFieldBlur:ke,isSyncingBlacklist:Me,onSyncBlacklist:St,selectedResumeId:S,getAuthToken:()=>Promise.resolve(ne())})}),T==="queue"&&s.jsx(Sc,{isHuntingStarted:Ce,onWaitingCountChange:h,agentRunId:se||void 0,platform:"dice"})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:Ce?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:je?"primary":"secondary",size:"lg",onClick:Ge,style:{flex:1},children:je?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Ot(),vt(),ve(!1),te("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[(!Pe()||Ve())&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsxs(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:[!M.searchKeywords?.trim()&&!M.location?.trim()&&"Please add a job title and location to continue.",!M.searchKeywords?.trim()&&M.location?.trim()&&"Please add a job title to continue.",M.searchKeywords?.trim()&&!M.location?.trim()&&"Please add a location to continue.",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l===!1&&"Please create an ATS resume template to continue with ATS optimization.",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l===null&&"Checking ATS template availability...",M.searchKeywords?.trim()&&M.location?.trim()&&$.useATSResume&&l&&Ve()&&s.jsxs("span",{style:{color:f.colors.accent.error},children:["AI resume limit reached (",U?.used,"/",U?.limit,")."," ",s.jsx("button",{onClick:()=>z(!0),style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",textDecoration:"underline",font:"inherit"},children:"Upgrade plan"})]})]})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Xe,disabled:!Pe()||Ve(),style:{width:"100%"},children:"Start Job Searching"}),v&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:v})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:ht,onClearActivities:Ze})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const Le=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(Le)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(kc,{isOpen:y!==null,step:y??1,platform:Xt.DICE,targetUrl:MQ,onClose:Be,onStepOneConfirm:Et,isStepOneProcessing:j,isFinalizingStepTwo:A,onConfirm:Ue,workflowId:ue,requireBrowserLaunch:ee}),s.jsx(La,{resume:q,isOpen:V,onClose:ce}),s.jsx(Da,{isOpen:be,onClose:Ae,onUploadComplete:xe,currentAgentRunId:se||void 0}),s.jsx(Na,{isOpen:P,onClose:()=>{z(!1),D(null)},errorDetails:B})]})},A8={gemini:["gemini-2.5-pro","gemini-2.5-flash","gemini-2.5-flash-lite"],openai:["o3","o4-mini","gpt-4.1","gpt-4.1-mini","gpt-5","gpt-5-mini","gpt-5-nano"],claude:["claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001","claude-opus-4-1-20250805","claude-sonnet-4-5","claude-haiku-4-5","claude-opus-4-1"],azure:["gpt-4o","gpt-4o-mini","gpt-4.1"]},TQ=({expandedSections:e,onToggleSection:t,formData:r,onFormDataChange:n,onFieldBlur:l,userPreferences:i,onUserPreferencesChange:d,currentAgentRunId:p})=>{const[g,x]=F.useState("idle"),[y,w]=F.useState(""),[j,_]=F.useState(!1),A=async()=>{if(!r.llmProvider||!r.llmApiKey){x("error"),w("Please select provider and enter API key first");return}if(r.llmProvider==="azure"&&!r.llmEndpoint){x("error"),w("Azure OpenAI requires an endpoint URL");return}if(r.llmProvider!=="azure"&&!r.llmModel){x("error"),w("Please select a model");return}x("testing"),w("Testing API connection...");try{const D=await(await fetch(`${rr}/api/llm-test-connection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:r.llmProvider,api_key:r.llmApiKey,model:r.llmModel,endpoint:r.llmEndpoint})})).json();if(D.success){if(x("success"),w(D.message||" API connection successful!"),p)try{await Hb.saveCredentials(p,r.llmProvider,{api_key:r.llmApiKey,model:r.llmModel,endpoint:r.llmEndpoint}),console.log(`Saved LLM credentials for ${r.llmProvider} after successful test`)}catch(U){console.error("Failed to save credentials after test:",U)}setTimeout(()=>{x("idle"),w("")},3e3)}else x("error"),w(D.message||"API test failed")}catch(B){x("error"),w(B?.message||"Failed to connect to test endpoint")}},E=async B=>{if(!B){n({llmProvider:null,llmModel:void 0,llmEndpoint:void 0}),l("llmProvider",null);return}let D=null;if(p)try{D=await Hb.loadCredentials(p,B)}catch(G){console.error("Failed to load saved credentials:",G)}const U={llmProvider:B,llmModel:D?.model||A8[B][0],llmEndpoint:D?.endpoint||(B==="azure"?"":void 0)};D?.api_key&&(U.llmApiKey=D.api_key),n(U),l("llmProvider",B)},P=r.llmProvider?A8[r.llmProvider]:[],z=!!(r.llmApiKey&&r.llmApiKey.trim().length>0);return s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx(Js,{title:"Autonomous Search Criteria",icon:Uo,section:"jobs",expandedSections:e,onToggle:t}),e.jobs&&s.jsxs("div",{style:{paddingTop:"24px",paddingBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:ko,children:["Starting URL ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsx("input",{type:"text",value:r.startingUrl||"",onChange:B=>n({startingUrl:B.target.value}),onBlur:B=>l("startingUrl",B.target.value),placeholder:"https://www.linkedin.com/jobs/search/?keywords=software%20engineer",style:Fu}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:"The job board URL where the autonomous agent should start searching"})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsxs("label",{style:ko,children:["Custom Search Criteria ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsx("textarea",{value:r.semanticInstructions,onChange:B=>n({semanticInstructions:B.target.value}),placeholder:"Describe what a great-fit role looks like. Example: 'Senior backend or platform engineering roles at product-led companies. Prefer remote-friendly teams working with Python/TypeScript.'",rows:4,style:R8,onBlur:B=>l("semanticInstructions",B.target.value)}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:"Required: spell out the role seniority, skills, compensation, and remote policy the agent should target."})]}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("label",{style:ko,children:"Instructions for Agent"}),s.jsx("textarea",{value:r.autonomousInstructions||"",onChange:B=>n({autonomousInstructions:B.target.value}),placeholder:`Be specific about actions and steps. Example:

1. Navigate to job board search page
2. Use search action to find jobs matching criteria
3. For each job listing:
   - Use click action to open in new tab
   - Use extract action to get: job title, company, location, salary, description
   - If page loads slowly, wait 3 seconds then scroll action to load content
4. If anti-bot protection appears:
   - Use send_keys action with "Tab Enter" to navigate
   - Or use go_back action and try alternative approach
5. Save up to 50 jobs per platform using save action`,rows:12,style:R8,onBlur:B=>l("autonomousInstructions",B.target.value)}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:"Leave empty to let the agent decide. For better accuracy, reference specific actions like: search, click, extract, scroll, send_keys, go_back, wait."})]}),s.jsxs("div",{style:{...AQ,marginBottom:"24px"},children:[s.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"15px",fontWeight:"600",color:f.colors.neutral[800]},children:"LLM API Configuration (required)"}),s.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"13px",color:f.colors.neutral[600]},children:"This agent runs locally, so you must provide your own API credentials. Keys never leave your machine."}),s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("label",{style:ko,children:["LLM Provider ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsxs("select",{value:r.llmProvider||"",onChange:B=>{const D=B.target.value;E(D)},style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},children:[s.jsx("option",{value:"",children:"Select provider..."}),s.jsx("option",{value:"openai",children:"OpenAI"}),s.jsx("option",{value:"azure",children:"Azure OpenAI"}),s.jsx("option",{value:"claude",children:"Claude"}),s.jsx("option",{value:"gemini",children:"Gemini"})]})]}),r.llmProvider&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("label",{style:ko,children:["API Key ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("input",{type:j?"text":"password",value:r.llmApiKey||"",onChange:B=>n({llmApiKey:B.target.value}),onBlur:B=>l("llmApiKey",B.target.value),placeholder:`Enter your ${r.llmProvider==="azure"?"Azure OpenAI":r.llmProvider.toUpperCase()} API key`,style:Fu}),s.jsx("button",{type:"button",onClick:()=>_(!j),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b"},title:j?"Hide API key":"Show API key",children:j?s.jsx($d,{size:18}):s.jsx(os,{size:18})})]})]}),r.llmProvider==="azure"&&s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("label",{style:ko,children:["Endpoint ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsx("input",{type:"text",value:r.llmEndpoint||"",onChange:B=>n({llmEndpoint:B.target.value}),onBlur:B=>l("llmEndpoint",B.target.value),placeholder:"https://your-resource.openai.azure.com",style:Fu}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:"Your Azure OpenAI endpoint URL (without /openai/deployments/...)"})]}),z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"16px"},children:[s.jsxs("label",{style:ko,children:[r.llmProvider==="azure"?"Deployment Name":"Model"," ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),r.llmProvider==="azure"?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:r.llmModel||"",onChange:B=>n({llmModel:B.target.value}),onBlur:B=>l("llmModel",B.target.value),placeholder:"e.g., gpt-4.1",style:Fu}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:'Enter your Azure deployment name. Find it in Azure OpenAI Studio under "Deployments".'})]}):s.jsx("select",{value:r.llmModel||"",onChange:B=>{n({llmModel:B.target.value}),l("llmModel",B.target.value)},style:{width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},children:P.map(B=>s.jsx("option",{value:B,children:B},B))})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s.jsxs("button",{onClick:A,disabled:g==="testing",style:{...RQ,backgroundColor:g==="testing"?"#e2e8f0":"#3b82f6",color:"white",cursor:g==="testing"?"not-allowed":"pointer"},children:[g==="testing"&&s.jsx(Yw,{size:16,style:{animation:"spin 1s linear infinite"}}),g==="testing"?"Testing...":"Test API"]}),g==="success"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#10b981",fontSize:"13px"},children:[s.jsx(Mi,{size:16}),y]}),g==="error"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#ef4444",fontSize:"13px"},children:[s.jsx(Ba,{size:16}),y]})]}),s.jsxs("div",{style:{marginTop:"16px"},children:[s.jsx("label",{style:ko,children:"Max Running Time (minutes)"}),s.jsx("input",{type:"number",min:1,value:r.maxRunningTime||"",onChange:B=>{const D=B.target.value?parseInt(B.target.value):void 0;n({maxRunningTime:D})},onBlur:B=>{const D=B.target.value?parseInt(B.target.value):null;l("maxRunningTime",D)},placeholder:"No limit (recommended)",style:Fu}),s.jsx("p",{style:{margin:"6px 0 0 0",fontSize:"12px",color:"#64748b"},children:"Optional: Set a time limit in minutes. Leave empty for unlimited runtime."})]})]})]}),s.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontWeight:500,color:f.colors.neutral[800]},children:[s.jsx("input",{type:"checkbox",checked:r.useVision!==!1,onChange:B=>{const D=B.target.checked;n({useVision:D}),l("useVision",D)}}),"Enable Browser Vision (screenshots)"]}),s.jsx("p",{style:{margin:"6px 0 0 26px",fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600]},children:"Keep this on for best reliability. You can disable vision to reduce token cost if the site exposes structured data feeds."})]})]})]})]})},ko={display:"block",fontSize:f.typography.fontSize.base,fontWeight:"500",marginBottom:"12px",color:"#374151"},R8={width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,resize:"vertical",outline:"none"},Fu={width:"100%",padding:"12px 16px",backgroundColor:"transparent",border:"1px solid #cbd5e1",borderRadius:"6px",color:"#1e293b",fontSize:f.typography.fontSize.base,outline:"none"},AQ={marginTop:"24px",borderRadius:f.borderRadius.lg,border:"1px solid #e2e8f0",padding:"20px",backgroundColor:"#fff",boxShadow:f.shadows.sm},RQ={padding:"8px 16px",borderRadius:"6px",fontSize:f.typography.fontSize.sm,fontWeight:"500",border:"none",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.15s ease"},EQ=`${rr}/api`;class IQ{async request(t,r={}){const n=`${EQ}${t}`,l=await fetch(n,{headers:{"Content-Type":"application/json",...r.headers},...r});if(!l.ok){const i=await l.text();throw new Error(`HTTP ${l.status}: ${i||l.statusText}`)}return await l.json()}startSearch(t,r,n){return this.request(`/autonomous-search/${t}/${r}/start`,{method:"POST",body:JSON.stringify(n)})}stopSearch(t){return this.request(`/autonomous-search/${t}/stop`,{method:"POST"})}getStatus(t){return this.request(`/autonomous-search/${t}/status`)}}const u9=new IQ,zQ=Object.freeze(Object.defineProperty({__proto__:null,autonomousSearchApi:u9},Symbol.toStringTag,{value:"Module"})),BQ="https://www.monster.com/jobs/",PQ=({selectedAgentId:e,forceCreateNewRun:t=!1,onNewRunCreated:r,showLinkedInPreview:n=!1})=>{Vt.useEffect(()=>{const we=document.createElement("style");return we.textContent=`
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `,document.head.appendChild(we),()=>{document.head.removeChild(we)}},[]);const[l,i]=F.useState(null),[d,p]=F.useState([]),[g,x]=F.useState(!1),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState({generateCoverLetter:!1,sendConnectionRequest:!1,useATSResume:!1}),[$,re]=Ac("autonomous-run-page",{expandedSections:{about:!1,jobs:!1,personalized:!1,advancedSettings:!1},activeLeftTab:"setup"}),{expandedSections:Q,activeLeftTab:H}=$,Y=we=>{re({activeLeftTab:we})},[T,o]=F.useState(0),[c,h]=F.useState(""),v=()=>`Autonomous Search - ${new Date().toLocaleDateString()}`,[b,M]=F.useState({resume:null,resumeTemplate:"",contextKit:"",semanticInstructions:"",searchKeywords:"",location:"",minSalary:"",blacklistCompanies:"",skipPreviouslySkippedJobs:!0,skipStaffingCompanies:!1,resumeChoice:"upload",atsTemplate:"existing",selectedATSTemplateId:null,generateCoverLetter:!1,generateConnection:!1,country:"usa",salaryBound:null,experienceLevels:[],remoteTypes:[],jobTypes:[],specificLocations:[],runName:v(),autonomousPlatforms:[],autonomousMaxJobs:10,startingUrl:"",autonomousInstructions:"",llmProvider:null,llmApiKey:"",llmModel:"",llmEndpoint:"",maxRunningTime:void 0,useVision:!0,headlessOn:!1}),R=b.startingUrl&&b.startingUrl.trim().length>0?b.startingUrl.trim():BQ,[S,a]=F.useState(),[k,N]=F.useState(0),[L,X]=F.useState(),se=we=>we?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(we):!1,te=()=>{if(e&&!se(e))return"autonomous"},{currentAgentRunId:K,setAgentRunStatus:J,isPageLoading:ne,initializeAgentRun:oe,getAuthToken:ae,currentWorkflowId:ee,currentPlatform:ue}=jc({selectedAgentId:e,defaultPlatform:te(),forceCreateNewRun:t,onNewRunCreated:r}),Ce=Cc(ae),ve=ee||e,{isHuntingStarted:ge,setHuntingStarted:Je,setSessionId:Te,setAgentRunId:ze,setAutoStopping:vt,startActivityPolling:he,stopActivityPolling:me}=Ua(K||void 0),{savingStatus:Me,lastSaveTime:pe,isSyncingBlacklist:ke,isSyncingKeywords:_e,saveFieldOnBlur:Z,syncKeywordsFromResume:q,syncBlacklistFromResume:V,resumePreview:ie,isResumePreviewOpen:ce,openResumePreview:be,closeResumePreview:fe,isResumeUploadOpen:Ae,openResumeUpload:ht,closeResumeUpload:je}=Mc({currentAgentRunId:K,getAuthToken:ae}),{activities:Ie,isPaused:pt,addAction:Ne,addActivityFromMessage:Ge,startHunting:Ot,togglePause:Oe,stopHunting:Ze,silentStop:Lt,clearActivities:Pe}=Tc({agentRunId:K||void 0,platform:Xt.AUTONOMOUS,onThreadStatusChange:(we,rt)=>{window.refreshQueue&&window.refreshQueue()}});Fa(Ge,Lt,J,nr);const Ve=async()=>{try{const{atsTemplateApiService:we}=await Qt(async()=>{const{atsTemplateApiService:Tt}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:Tt}},void 0,import.meta.url),rt=await we.listTemplates(),it=rt?.templates?.filter(Tt=>Tt.example_ats_resume_id&&Tt.example_ats_resume_id.trim()!=="")||[],yt=rt?.success&&it.length>0;i(yt),p(it),it.length>0&&!b.selectedATSTemplateId&&M(Tt=>({...Tt,selectedATSTemplateId:it[0].id}))}catch(we){console.error("Failed to check ATS template availability:",we),i(!1),p([])}};F.useEffect(()=>{U.useATSResume?Ve():(i(null),p([]))},[U.useATSResume]),F.useEffect(()=>{U.useATSResume&&Ve()},[]),F.useEffect(()=>{l===!0&&b.atsTemplate!=="existing"&&M(we=>({...we,atsTemplate:"existing"}))},[l]);const Bt=()=>{const we=b.startingUrl&&b.startingUrl.trim().length>0,rt=b.semanticInstructions&&b.semanticInstructions.trim().length>0;return we&&rt};F.useEffect(()=>{(e||nr.getCurrentRunId())&&oe(M,G,a,X)},[e,t]);const Fe=we=>{re(rt=>({expandedSections:{...rt.expandedSections,[we]:!rt.expandedSections[we]}}))},Xe=async()=>{try{const we=await sn.getSubscriptionStatus();return we.remaining=5,we.remaining<=0?(D({error_code:"USAGE_LIMIT_EXCEEDED",message:"Application limit reached. Please upgrade your subscription.",current_tier:we.tier,call_to_action:"Upgrade your plan or wait until next billing cycle",upgrade_options:uc()}),z(!0),!1):!0}catch(we){return console.error("Error checking subscription status:",we),!0}},Et=async()=>{w(1)},Be=async()=>{if(y===1){_(!0);try{const we=await Xe();w(we?2:null)}finally{_(!1)}}},Ue=()=>{j||(w(null),E(!1))},It=async we=>{if(!A){E(!0);try{h(""),await Z("autoSubmit",we),await Z("submitConfidentApplication",we),b.selectedATSTemplateId&&await Z("selectedATSTemplateId",b.selectedATSTemplateId),Je(!0),vt(!1),Y("queue"),J("running"),nr.updateCurrentRunSettings({status:"running"}),Te(K),ze(K),Ne("Starting autonomous job scout..."),Ot(),K&&he(K);const rt=Do()||"test-user";if((await u9.startSearch(rt,K,{config:{workflowRunId:K,agentRunId:K,customCriteria:b.semanticInstructions,startingUrl:R,instructions:b.autonomousInstructions,blacklistCompanies:b.blacklistCompanies,skipStaffingCompanies:b.skipStaffingCompanies,resumeId:S,maxJobsPerPlatform:b.autonomousMaxJobs||10,generateATSResume:U.useATSResume,selectedATSTemplateId:b.selectedATSTemplateId,llmProvider:b.llmProvider,llmApiKey:b.llmApiKey,llmModel:b.llmModel,llmEndpoint:b.llmEndpoint,maxRunningTime:b.maxRunningTime,useVision:b.useVision!==!1}}))?.success)Ne("Autonomous search agent started successfully");else throw new Error("Failed to start autonomous agent")}catch(rt){console.error("Failed to start hunting:",rt),Je(!1);let it="Failed to connect to backend. Please check your connection and try again.";rt instanceof Error&&(rt.message.includes("workflow")?it="Failed to create agent run. Please check your settings and try again.":rt.message.includes("network")||rt.message.includes("fetch")?it="Network connection error. Please check your internet connection.":rt.message.includes("autonomous")&&(it="Unable to start autonomous search service. Please try again after restarting the app.")),h(it),Ne(`Failed to start hunting: ${rt}`)}finally{w(null),E(!1)}}},$e=()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"ats"}});window.dispatchEvent(we)},Qe=()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"cover-letter"}});window.dispatchEvent(we)},Ft=we=>{a(we?.id),we?.id&&Z("selectedResumeId",we.id)},qe=we=>{be(we)},Ye=we=>{X(we?.id),we?.id?Z("selectedCoverLetterTemplateId",we.id):Z("selectedCoverLetterTemplateId",null)},Ut=we=>{},ye=()=>{Qe()},xe=()=>{ht()},nt=async we=>{if(je(),N(rt=>rt+1),we)try{setTimeout(async()=>{const it=(await _r.listResumes()).find(yt=>yt.id===we);it&&Ft(it)},500)}catch(rt){console.error("Failed to auto-preview uploaded resume:",rt)}},ct=we=>{M(rt=>({...rt,...we}))},wt=we=>{G(rt=>({...rt,...we}))},St=async()=>{S&&await q(S,M)},Le=async()=>{S&&await V(S,M)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `}),s.jsx("div",{style:{display:"flex",height:"100vh",backgroundColor:"#ffffff",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif"},children:ne?s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsx(mc,{})}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[s.jsx(En,{children:s.jsx(pc,{})}),s.jsxs(En,{children:[s.jsx(Yi,{}),s.jsx(Yi,{})]}),s.jsxs(En,{children:[s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{}),s.jsx(Jr,{})]}),s.jsx("div",{style:{marginTop:"24px"},children:s.jsx(gc,{})})]})]}):K?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"50%",minWidth:"350px",backgroundColor:"#f8fafc",borderRight:"1px solid #e2e8f0",transition:"width 0.3s ease",display:"flex",flexDirection:"column"},children:[s.jsx(yc,{runName:b.runName,onRunNameSave:we=>{ge||(M(rt=>({...rt,runName:we})),Z("runName",we))},savingStatus:Me,lastSaveTime:pe,workflowId:ve,platform:ue}),s.jsx(wc,{activeTab:H,onTabChange:Y,disabled:!1,queueCount:T}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[H==="setup"&&s.jsx(_c,{expandedSections:Q,onToggleSection:Fe,userPreferences:U,formData:b,hasATSTemplate:l,atsTemplates:d,selectedResumeId:S,selectedCoverLetterTemplateId:L,refreshTrigger:k,isFiltersLoading:g,isSyncingKeywords:_e,isSyncingBlacklist:ke,onFormDataChange:ct,onUserPreferencesChange:wt,onResumeSelect:Ft,onResumePreview:qe,onUploadNew:xe,onNavigateToATSCreation:$e,onCoverLetterTemplateSelect:Ye,onCoverLetterTemplatePreview:Ut,onCreateNewCoverLetterTemplate:ye,onFieldBlur:Z,onSyncKeywords:St,onSyncBlacklist:Le,onClearFilter:()=>{},isHuntingStarted:ge,showLinkedInPreview:n,getAuthToken:()=>Promise.resolve(ae()),hidePersonalizedSection:!0,hideAboutSection:!1,customJobsSection:s.jsx(TQ,{expandedSections:Q,onToggleSection:Fe,formData:b,onFormDataChange:ct,onFieldBlur:Z,userPreferences:U,onUserPreferencesChange:wt,currentAgentRunId:K})}),H==="queue"&&s.jsx(Sc,{isHuntingStarted:ge,onWaitingCountChange:o,agentRunId:K||void 0,platform:"autonomous"})]}),s.jsx("div",{style:{padding:"24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:ge?s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.jsx(ot,{variant:pt?"primary":"secondary",size:"lg",onClick:Oe,style:{flex:1},children:pt?"Resume":"Pause"}),s.jsx(ot,{variant:"secondary",size:"lg",onClick:()=>{Ze(),me(),Je(!1),J("ready"),nr.updateCurrentRunSettings({status:"ready"})},style:{flex:1,backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Stop"})]}):s.jsxs(s.Fragment,{children:[!Bt()&&s.jsx("div",{style:{marginBottom:"12px"},children:s.jsx(jr,{variant:"caption",color:"secondary",style:{textAlign:"center"},as:"div",children:b.startingUrl?.trim()?b.semanticInstructions?.trim()?"Configuration incomplete.":"Please describe the search criteria for this run.":"Please add a starting URL to continue."})}),s.jsx(ot,{variant:"primary",size:"lg",onClick:Et,disabled:!Bt(),style:{width:"100%"},children:"Start Job Searching"}),c&&s.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:f.typography.fontSize.base,textAlign:"center"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.medium,marginBottom:"4px"},children:"Connection Error"}),s.jsx(jr,{variant:"body",color:"secondary",style:{marginBottom:"4px"},as:"div",children:c})]})]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx(bc,{activities:Ie,onClearActivities:Pe})})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh",backgroundColor:"#f8fafc",flexDirection:"column",gap:"24px"},children:s.jsxs("div",{style:{textAlign:"center",maxWidth:"500px",padding:"32px"},children:[s.jsx("div",{style:{marginBottom:"16px",display:"flex",justifyContent:"center"},children:s.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:f.colors.neutral[400],strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"6"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),s.jsx(wr,{style:{color:f.colors.neutral[700],marginBottom:"12px"},children:"No Agent Run Selected"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"24px",lineHeight:1.6},children:"You haven't selected any agent run yet. Please go to the Agent Runs page to create a new workflow or select an existing one."}),s.jsx(ot,{variant:"primary",onClick:()=>{const we=new CustomEvent("jobhuntr:navigate",{detail:{view:"runs"}});window.dispatchEvent(we)},style:{padding:"12px 24px",fontSize:"16px"},children:"Go to Agent Runs"})]})})}),s.jsx(kc,{isOpen:y!==null,step:y??1,platform:Xt.AUTONOMOUS,targetUrl:R,onClose:Ue,onStepOneConfirm:Be,isStepOneProcessing:j,isFinalizingStepTwo:A,onConfirm:It,workflowId:ve,requireBrowserLaunch:Ce}),s.jsx(La,{resume:ie,isOpen:ce,onClose:fe}),s.jsx(Da,{isOpen:Ae,onClose:je,onUploadComplete:nt,currentAgentRunId:K||void 0}),s.jsx(Na,{isOpen:P,onClose:()=>{z(!1),D(null)},errorDetails:B})]})},NQ=e=>{const[t,r]=F.useState(void 0),[n,l]=F.useState(!1),[i,d]=F.useState(!0);return F.useEffect(()=>{const p=w=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(w),g=async w=>{try{return(await lc.listTemplates()).find(A=>A.id===w)?.is_search_agent??!1}catch(j){return console.error("Failed to fetch template info:",j),!1}};(async()=>{d(!0);try{const w=e.selectedAgentId||nr.getCurrentRunId();if(w&&p(w)){const j=await gr.getAgentRun(w);if(j&&(nr.setCurrentRunData(j),r(j.platform),j.agent_run_template_id)){const _=await g(j.agent_run_template_id);l(_)}}else w&&(w==="indeed-search"?(r("indeed"),l(!0)):w.toLowerCase().includes("ziprecruiter")?(r("ziprecruiter"),l(!0)):w.toLowerCase().includes("glassdoor")?(r("glassdoor"),l(!0)):w.toLowerCase().includes("dice")?(r("dice"),l(!0)):w.toLowerCase().includes("autonomous")?(r("autonomous"),l(!0)):w.toLowerCase().includes("linkedin-search")?(r("linkedin"),l(!0)):(r("linkedin"),l(!1)))}catch(w){console.error("Failed to fetch agent run data:",w)}d(!1)})();const y=async()=>{const w=e.selectedAgentId||nr.getCurrentRunId();if(w&&p(w))try{const j=await gr.getAgentRun(w);if(j&&(nr.setCurrentRunData(j),r(j.platform),j.agent_run_template_id)){const _=await g(j.agent_run_template_id);l(_)}}catch(j){console.error("Failed to fetch updated agent run data:",j)}};return window.addEventListener("storage",y),window.addEventListener("jobhuntr:agent-run-changed",y),()=>{window.removeEventListener("storage",y),window.removeEventListener("jobhuntr:agent-run-changed",y)}},[e.selectedAgentId]),i?s.jsx("div",{children:"Loading..."}):t==="indeed"?s.jsx(wQ,{...e,isSearchAgent:n}):t==="ziprecruiter"?s.jsx(SQ,{...e,isSearchAgent:n}):t==="glassdoor"?s.jsx(jQ,{...e,isSearchAgent:n}):t==="autonomous"?s.jsx(PQ,{...e,isSearchAgent:n}):t==="dice"?s.jsx(CQ,{...e,isSearchAgent:n}):s.jsx(xQ,{...e,isSearchAgent:n})},d9=e=>{const t=new Date(e),n=new Date().getTime()-t.getTime(),l=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),d=Math.floor(n/(1e3*60*60*24));return l<1?"Just now":l<60?`${l} min${l===1?"":"s"} ago`:i<24?`${i} hour${i===1?"":"s"} ago`:d===1?"Yesterday":d<7?`${d} days ago`:t.toLocaleDateString()},f9=[{id:"linkedin-apply",title:"LinkedIn Automated Apply",description:"Automated LinkedIn job application workflow with smart job filtering and application submission",icon:null,iconType:"image",iconSrc:"./other_logos/linkedin.png",category:"suggested",section:"auto-apply",features:["Automated job search on LinkedIn","Smart job filtering based on preferences","One-click application submission","Optional ATS-optimized resume generation","Application tracking and history"]},{id:"linkedin-search",title:"LinkedIn Auto Search",description:"Find jobs on LinkedIn, check if they match your criteria, optionally generate tailored resumes, and save to queue for manual review",icon:null,iconType:"image",iconSrc:"./other_logos/linkedin.png",category:"new",section:"predefined-auto-search",features:["Find jobs automatically on LinkedIn","Check if jobs match your criteria","Generate ATS-optimized resumes (optional)","Save matched jobs to queue","You review and apply manually"]},{id:"indeed-search",title:"Indeed Auto Search",description:"Find jobs on Indeed, check if they match your criteria, optionally generate tailored resumes, and save to queue for manual review",icon:null,iconType:"image",iconSrc:"./other_logos/Indeed.png",category:"new",section:"predefined-auto-search",features:["Find jobs automatically on Indeed","Check if jobs match your criteria","Generate ATS-optimized resumes (optional)","Save matched jobs to queue","You review and apply manually"]},{id:"ziprecruiter-search",title:"ZipRecruiter Auto Search",description:"Find jobs on ZipRecruiter, check if they match your criteria, optionally generate tailored resumes, and save to queue for manual review",icon:null,iconType:"image",iconSrc:"./other_logos/Ziprecruiter.png",category:"new",section:"predefined-auto-search",features:["Find jobs automatically on ZipRecruiter","Check if jobs match your criteria","Generate ATS-optimized resumes (optional)","Save matched jobs to queue","You review and apply manually"]},{id:"glassdoor-search",title:"Glassdoor Auto Search",description:"Find jobs on Glassdoor, check if they match your criteria, optionally generate tailored resumes, and save to queue for manual review",icon:null,iconType:"image",iconSrc:"./other_logos/Glassdoor.png",category:"new",section:"predefined-auto-search",features:["Find jobs automatically on Glassdoor","Check if jobs match your criteria","Generate ATS-optimized resumes (optional)","Save matched jobs to queue","You review and apply manually"]},{id:"dice-search",title:"Dice Auto Search",description:"Find jobs on Dice, check if they match your criteria, optionally generate tailored resumes, and save to queue for manual review",icon:null,iconType:"image",iconSrc:"./other_logos/Dice.png",category:"new",section:"predefined-auto-search",features:["Find jobs automatically on Dice","Check if jobs match your criteria","Generate ATS-optimized resumes (optional)","Save matched jobs to queue","You review and apply manually"]},{id:"autonomous-auto-search",title:"Autonomous Auto Search",description:"Autonomous agent that runs across multiple job boards, stores high-signal jobs, and tracks Langfuse cost per step.",icon:null,iconType:"image",iconSrc:"./logo.png",category:"suggested",section:"autonomous-auto-search",features:["Dynamic navigation and extraction across curated job boards","Custom instructions per platform","Automatically saves job descriptions + apps","Queues jobs for manual review"]}],DQ=f9.reduce((e,t)=>(e[t.id]=t,e),{}),LQ=e=>e.replace(/[-_]+/g," ").split(" ").filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")||e,T1={p:({node:e,...t})=>s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],lineHeight:f.typography.lineHeight.normal,margin:`0 0 ${f.spacing.lg} 0`},...t}),ul:({node:e,...t})=>s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},...t}),li:({node:e,children:t,...r})=>s.jsxs("li",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},...r,children:[s.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:f.colors.neutral[400],flexShrink:0}}),s.jsx("span",{children:t})]})},OQ=({isOpen:e,onClose:t,onCreateRun:r})=>{const[n,l]=F.useState([]),[i,d]=F.useState(!1),[p,g]=F.useState(null),[x,y]=F.useState(!1),[w,j]=F.useState(null),[_,A]=F.useState(""),[E,P]=F.useState(!1),[z,B]=F.useState(null),[D,U]=F.useState(null),[G,$]=F.useState(!0),[re,Q]=F.useState(!1),[H,Y]=F.useState(!1);Vt.useEffect(()=>{if(!e||x)return;let b=!0;return(async()=>{try{d(!0);const R=await lc.listTemplates();if(!b)return;l(R),g(null),y(!0)}catch(R){if(!b)return;console.error("Failed to load agent run templates:",R),g("Unable to load latest template descriptions.")}finally{b&&d(!1)}})(),()=>{b=!1}},[e,x]);const T=Vt.useMemo(()=>n.length===0?f9:n.map(b=>{const M=DQ[b.name];return M?{...M,description:b.description,templateRecordId:b.id}:{id:b.name,title:LQ(b.name),description:b.description,icon:null,category:"suggested",features:[],section:"predefined-auto-search",iconType:"component",templateRecordId:b.id}}),[n]),o=b=>{const R=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return b==="linkedin-apply"?`LinkedIn Job Hunt - ${R}`:b==="linkedin-search"?`LinkedIn Search - ${R}`:b==="indeed-search"?`Indeed Search - ${R}`:b==="ziprecruiter-search"?`ZipRecruiter Search - ${R}`:b==="glassdoor-search"?`Glassdoor Search - ${R}`:b==="dice-search"?`Dice Search - ${R}`:b==="autonomous-auto-search"?`Autonomous Search - ${R}`:`Agent Run - ${R}`};Vt.useEffect(()=>{w==="linkedin-apply"?Q(!1):(w==="linkedin-search"||w==="indeed-search"||w==="ziprecruiter-search"||w==="glassdoor-search"||w==="dice-search")&&(Y(!1),Q(!1),$(!0))},[w]),Vt.useEffect(()=>{if(!w||!_.trim()||w!=="linkedin-search"&&w!=="indeed-search"&&w!=="ziprecruiter-search"&&w!=="glassdoor-search"&&w!=="dice-search"&&w!=="autonomous-auto-search")return;const b=w==="linkedin-search"?"LinkedIn":w==="indeed-search"?"Indeed":w==="ziprecruiter-search"?"ZipRecruiter":w==="glassdoor-search"?"Glassdoor":w==="dice-search"?"Dice":"Autonomous";if(_&&_.startsWith(`${b} Search`)){const M=_.match(new RegExp(`${b} Search(?:\\s+\\(ATS\\))?\\s+-\\s+(.+)`));if(M){const R=M[1],S=H?`${b} Search (ATS) - ${R}`:`${b} Search - ${R}`;S!==_&&A(S)}}},[H,w,_]);const c=async()=>{if(!(!w||!_.trim())){P(!0);try{await r?.(w,_.trim(),{generateCoverLetter:G,sendConnectionRequest:re,generateATSResume:H},h?.templateRecordId),t(),j(null),A(""),$(!0),Q(!1),Y(!1)}catch(b){console.error("Failed to create agent run:",b)}finally{P(!1)}}};if(!e)return null;const h=T.find(b=>b.id===w);h?.section;const v=()=>w?s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],marginTop:f.spacing.xl,boxShadow:f.shadows.sm},children:[s.jsx("h4",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:`0 0 ${f.spacing.xl} 0`},children:"Configure Your Agent Run"}),s.jsxs("div",{style:{marginBottom:f.spacing["2xl"]},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],marginBottom:f.spacing.sm},children:"Run Name *"}),s.jsx("input",{type:"text",value:_,onChange:b=>A(b.target.value),placeholder:"Enter a name for your agent run",style:{width:"100%",maxWidth:"400px",padding:f.spacing.md,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.base,outline:"none",backgroundColor:f.colors.secondary.main,color:f.colors.primary.main},onFocus:b=>{b.target.style.borderColor=f.colors.primary.main},onBlur:b=>{b.target.style.borderColor=f.colors.neutral[300]}})]}),s.jsxs("div",{style:{marginBottom:f.spacing["2xl"]},children:[s.jsx("h5",{style:{fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],marginBottom:f.spacing.lg},children:w==="linkedin-search"||w==="indeed-search"||w==="ziprecruiter-search"||w==="glassdoor-search"||w==="dice-search"||w==="autonomous-auto-search"?"Configure your search settings":"Select the features you'd like to enable for your job hunt"}),w==="linkedin-apply"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx("input",{type:"checkbox",id:"generateATSResumeLinkedIn",checked:H,onChange:b=>Y(b.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),s.jsx("label",{htmlFor:"generateATSResumeLinkedIn",style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[700],cursor:"pointer"},children:"Generate ATS-optimized resumes for each application"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx("input",{type:"checkbox",id:"generateCoverLetter",checked:!G,onChange:b=>$(b.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),s.jsx("label",{htmlFor:"generateCoverLetter",style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[700],cursor:"pointer"},children:"Skip applications that require a cover letter"})]})]}),(w==="linkedin-search"||w==="indeed-search"||w==="ziprecruiter-search"||w==="glassdoor-search"||w==="dice-search"||w==="autonomous-auto-search")&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx("input",{type:"checkbox",id:"generateATSResumeSearch",checked:H,onChange:b=>Y(b.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),s.jsx("label",{htmlFor:"generateATSResumeSearch",style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[700],cursor:"pointer"},children:"Generate ATS-optimized resumes for queued jobs"})]})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.md},children:[s.jsxs("button",{onClick:c,disabled:!_.trim()||E,onMouseEnter:()=>U("create"),onMouseLeave:()=>U(null),style:{display:"flex",alignItems:"center",gap:f.spacing.sm,backgroundColor:!_.trim()||E?f.colors.primary.main:D==="create"?f.colors.primary.hover:f.colors.primary.main,color:f.colors.primary.text,border:"none",borderRadius:f.borderRadius.md,padding:`${f.spacing.md} ${f.spacing.xl}`,fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.medium,cursor:!_.trim()||E?"not-allowed":"pointer",opacity:!_.trim()||E?.5:1,transition:f.transitions.normal},children:[s.jsx(ab,{size:16}),E?"Creating...":"Create"]}),s.jsx("button",{onClick:t,onMouseEnter:()=>U("cancel"),onMouseLeave:()=>U(null),style:{backgroundColor:D==="cancel"?f.colors.neutral[50]:"transparent",color:f.colors.neutral[600],border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,padding:`${f.spacing.md} ${f.spacing.xl}`,fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.medium,cursor:"pointer",transition:f.transitions.normal},children:"Cancel"})]})]}):null;return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:t,children:s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,width:"100vw",height:"100vh",margin:0,display:"flex",flexDirection:"column"},onClick:b=>b.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${f.spacing["2xl"]} ${f.spacing["2xl"]} ${f.spacing.lg}`,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.secondary.main},children:[s.jsx("h2",{style:{margin:0,fontSize:f.typography.fontSize.h1,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main},children:"Create New Agent Run"}),s.jsx("button",{onClick:t,onMouseEnter:()=>U("close"),onMouseLeave:()=>U(null),style:{background:D==="close"?f.colors.neutral[100]:"none",border:"none",color:f.colors.neutral[600],cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},children:s.jsx(cn,{size:20})})]}),(i||p)&&s.jsx("div",{style:{padding:`${f.spacing.sm} ${f.spacing["2xl"]}`,backgroundColor:f.colors.secondary.main,color:p?f.colors.accent.error:f.colors.neutral[600],borderBottom:`1px solid ${f.colors.neutral[100]}`,fontSize:f.typography.fontSize.sm},children:p?"Using built-in descriptions while we retry fetching the latest copy.":"Loading the latest template descriptions..."}),s.jsx("div",{style:{flex:1,overflow:"auto",padding:`${f.spacing["2xl"]} ${f.spacing["2xl"]} 0`,backgroundColor:f.colors.secondary.main},children:s.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[s.jsxs("div",{style:{marginBottom:"48px"},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,marginBottom:f.spacing.xl,paddingBottom:f.spacing.md,borderBottom:`2px solid ${f.colors.neutral[200]}`},children:"Auto Apply"}),s.jsx("div",{children:(()=>{const b=T.filter(R=>R.section==="auto-apply"),M=[];for(let R=0;R<b.length;R+=2)M.push(b.slice(R,R+2));return M.map((R,S)=>s.jsxs(Vt.Fragment,{children:[s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:R.some(a=>a.id===w)?0:"24px"},children:R.map(a=>{const k=w===a.id,N=z===a.id;return s.jsxs("div",{onClick:()=>{j(a.id),A(o(a.id))},onMouseEnter:()=>B(a.id),onMouseLeave:()=>B(null),style:{backgroundColor:k||N?f.colors.neutral[50]:f.colors.secondary.main,border:k?`2px solid ${f.colors.primary.main}`:N?`1px solid ${f.colors.neutral[300]}`:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],cursor:"pointer",transition:"all 0.2s ease",position:"relative",minHeight:"280px",display:"flex",flexDirection:"column",boxShadow:k||N?f.shadows.md:f.shadows.sm},children:[s.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`},children:a.iconType==="image"&&a.iconSrc?s.jsx("img",{src:a.iconSrc,alt:a.title,style:{width:"48px",height:"48px",objectFit:"contain"}}):a.icon&&Vt.cloneElement(a.icon,{size:32,color:f.colors.primary.main})}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:`0 0 ${f.spacing.sm} 0`,lineHeight:f.typography.lineHeight.tight},children:a.title}),s.jsx("div",{style:{flex:1,width:"100%"},children:s.jsx(Bo,{components:T1,children:a.description})}),!a.templateRecordId&&a.features.length>0&&s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:a.features.map((L,X)=>s.jsxs("li",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},children:[s.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:f.colors.neutral[400],flexShrink:0}}),L]},X))})]},a.id)})}),R.some(a=>a.id===w)&&v()]},`auto-apply-row-${S}`))})()})]}),(()=>{const b=T.filter(M=>M.section==="autonomous-auto-search");return b.length===0?null:s.jsxs("div",{style:{marginTop:"64px",marginBottom:"48px"},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,marginBottom:f.spacing.xl,paddingBottom:f.spacing.md,borderBottom:`2px solid ${f.colors.neutral[200]}`},children:"Autonomous Auto Search"}),s.jsx("div",{style:{display:"grid",gap:"24px"},children:b.map(M=>{const R=w===M.id,S=z===M.id;return s.jsxs("div",{onClick:()=>{j(M.id),A(o(M.id))},onMouseEnter:()=>B(M.id),onMouseLeave:()=>B(null),style:{backgroundColor:R||S?f.colors.neutral[50]:f.colors.secondary.main,border:R?`2px solid ${f.colors.primary.main}`:S?`1px solid ${f.colors.neutral[300]}`:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],cursor:"pointer",transition:"all 0.2s ease",position:"relative",minHeight:"280px",display:"flex",flexDirection:"column",boxShadow:R||S?f.shadows.md:f.shadows.sm},children:[s.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`},children:M.iconType==="image"&&M.iconSrc?s.jsx("img",{src:M.iconSrc,alt:M.title,style:{width:"48px",height:"48px",objectFit:"contain"}}):M.icon&&Vt.cloneElement(M.icon,{size:32,color:f.colors.primary.main})}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:`0 0 ${f.spacing.sm} 0`,lineHeight:f.typography.lineHeight.tight},children:M.title}),s.jsx("div",{style:{flex:1,width:"100%"},children:s.jsx(Bo,{components:T1,children:M.description})}),!M.templateRecordId&&M.features.length>0&&s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:M.features.map((a,k)=>s.jsxs("li",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},children:[s.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:f.colors.neutral[400],flexShrink:0}}),a]},k))})]},M.id)})}),b.some(M=>M.id===w)&&v()]})})(),s.jsxs("div",{style:{marginTop:"32px",marginBottom:"48px"},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,marginBottom:f.spacing.xl,paddingBottom:f.spacing.md,borderBottom:`2px solid ${f.colors.neutral[200]}`},children:"Pre-defined Auto Search"}),s.jsx("div",{children:(()=>{const b=T.filter(R=>R.section==="predefined-auto-search"),M=[];for(let R=0;R<b.length;R+=2)M.push(b.slice(R,R+2));return M.map((R,S)=>s.jsxs(Vt.Fragment,{children:[s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px",marginBottom:R.some(a=>a.id===w)?0:"24px"},children:R.map(a=>{const k=w===a.id,N=z===a.id;return s.jsxs("div",{onClick:()=>{j(a.id),A(o(a.id))},onMouseEnter:()=>B(a.id),onMouseLeave:()=>B(null),style:{backgroundColor:k||N?f.colors.neutral[50]:f.colors.secondary.main,border:k?`2px solid ${f.colors.primary.main}`:N?`1px solid ${f.colors.neutral[300]}`:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],cursor:"pointer",transition:"all 0.2s ease",position:"relative",minHeight:"280px",display:"flex",flexDirection:"column",boxShadow:k||N?f.shadows.md:f.shadows.sm},children:[s.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.xl,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`},children:a.iconType==="image"&&a.iconSrc?s.jsx("img",{src:a.iconSrc,alt:a.title,style:{width:"48px",height:"48px",objectFit:"contain"}}):a.icon&&Vt.cloneElement(a.icon,{size:32,color:f.colors.primary.main})}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.primary.main,margin:`0 0 ${f.spacing.sm} 0`,lineHeight:f.typography.lineHeight.tight},children:a.title}),s.jsx("div",{style:{flex:1,width:"100%"},children:s.jsx(Bo,{components:T1,children:a.description})}),!a.templateRecordId&&a.features.length>0&&s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:a.features.map((L,X)=>s.jsxs("li",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xs,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},children:[s.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:f.colors.neutral[400],flexShrink:0}}),L]},X))})]},a.id)})}),R.some(a=>a.id===w)&&v()]},`predefined-auto-search-row-${S}`))})()})]})]})})]})})},FQ=({rowCount:e=5,gridTemplateColumns:t="40px 3fr 140px 120px 100px 60px"})=>{const r={borderBottom:"1px solid #f1f5f9",backgroundColor:"white"},n={backgroundColor:"#e5e7eb",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.5;
            }
          }
        `}),Array.from({length:e}).map((l,i)=>s.jsx("div",{style:r,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:t,gap:"16px",padding:"12px 16px",alignItems:"center"},children:[s.jsx("div",{style:{width:"16px",height:"16px",...n}}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[s.jsx("div",{style:{width:"60%",height:"16px",...n}}),s.jsx("div",{style:{width:"30%",height:"12px",...n}})]}),s.jsx("div",{style:{width:"70%",height:"14px",...n}}),s.jsx("div",{style:{width:"60%",height:"14px",...n}}),s.jsx("div",{style:{width:"40%",height:"14px",...n}}),s.jsx("div",{style:{width:"24px",height:"24px",...n}})]})},`skeleton-${i}`))]})},UQ=({onNavigateToRun:e,onCreateNewRun:t,navParams:r,onClearNavParams:n})=>{const[l,i]=F.useState([]),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(!1),[j,_]=F.useState(null),[A,E]=F.useState(""),[P,z]=F.useState("all"),[B,D]=F.useState(1),[U,G]=F.useState(0),[$]=F.useState(10),[re,Q]=F.useState(new Set),[H,Y]=F.useState(null),[T,o]=F.useState(!1),[c,h]=F.useState(!1),v=F.useRef(0),b=()=>{try{const Me=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const pe of Me){const ke=localStorage.getItem(pe);if(ke){const _e=JSON.parse(ke);if(_e.token)return _e.token;if(_e.access_token)return _e.access_token;if(typeof _e=="string")return _e}}return null}catch(Me){return console.error("Error getting auth token:",Me),null}};F.useEffect(()=>{r?.openCreateModal&&(o(!0),n&&n())},[r,n]);const M=async(Me=1,pe="all",ke)=>{const _e=++v.current;try{x(!0),_(null),w(!1);const Z=b();Z&&(gr.setAuthToken(Z),an.setAuthToken(Z));const q={page:Me,page_size:$};ke?.infiniteOnly?q.infinite_hunt_only=!0:ke?.manualOnly&&(q.manual_only=!0);const[V,ie]=await Promise.all([gr.listAgentRuns(q),an.getApplicationHistory()]);if(v.current!==_e)return;i(V.runs),p(ie),w(!0),G(V.total_count),D(V.page)}catch(Z){v.current===_e&&!Pl(Z)&&_(Z instanceof Error?Z.message:"Failed to load agent runs")}finally{v.current===_e&&x(!1)}};F.useEffect(()=>{M(B,P,c?{infiniteOnly:!0}:{manualOnly:!0})},[B,P,c]);const R=F.useMemo(()=>{if(!y||d.length===0)return new Map;const Me=new Map;return l.forEach(pe=>{const ke=d.filter(_e=>_e.workflow_run_id===pe.id).length;Me.set(pe.id,ke)}),Me},[d,l,y]),S=Me=>R.get(Me)||0,a=Me=>Me.toLowerCase()==="running"?"running":"free",k=l.filter(Me=>{if(P!=="all"&&a(Me.status)!==P)return!1;if(!A.trim())return!0;const pe=A.toLowerCase(),ke=a(Me.status);return Me.run_name?.toLowerCase().includes(pe)||Me.id.toLowerCase().includes(pe)||ke.includes(pe)||Me.search_keywords?.some(_e=>_e.toLowerCase().includes(pe))}),N=Me=>{const pe=new Set(re);pe.has(Me)?pe.delete(Me):pe.add(Me),Q(pe)},L=()=>{re.size===k.length?Q(new Set):Q(new Set(k.map(Me=>Me.id)))},X=()=>{h(Me=>!Me),D(1)},se=async()=>{const Me=re.size;if(Me!==0&&confirm(`Are you sure you want to delete ${Me} agent run${Me>1?"s":""}? This action cannot be undone.`))try{console.log(" Bulk deleting agent runs:",Array.from(re));const pe=b();pe&&gr.setAuthToken(pe);const ke=Array.from(re).map(V=>gr.deleteAgentRun(V)),_e=await Promise.allSettled(ke),Z=[],q=[];_e.forEach((V,ie)=>{const ce=Array.from(re)[ie];V.status==="fulfilled"&&V.value.success?Z.push(ce):(q.push(ce),console.error(` Failed to delete agent run ${ce}:`,V.status==="rejected"?V.reason:V.value))}),Z.length>0&&(console.log(`Successfully deleted ${Z.length} agent runs`),await M(Math.max(1,B),P,c?{infiniteOnly:!0}:{manualOnly:!0}),Q(new Set)),q.length>0&&_(`Failed to delete ${q.length} agent run${q.length>1?"s":""}`)}catch(pe){console.error(" Error during bulk delete:",pe),Pl(pe)||_(pe instanceof Error?pe.message:"Failed to delete agent runs")}},te=async Me=>{if(confirm("Are you sure you want to delete this agent run? This action cannot be undone."))try{console.log(" Deleting agent run:",Me);const pe=b();pe&&gr.setAuthToken(pe);const ke=await gr.deleteAgentRun(Me);ke.success?(console.log("Successfully deleted agent run:",Me),i(_e=>_e.filter(Z=>Z.id!==Me)),G(_e=>_e-1),M(B,P,c?{infiniteOnly:!0}:{manualOnly:!0}),Y(null)):(console.error(" Failed to delete agent run:",ke.message),_(ke.message||"Failed to delete agent run"))}catch(pe){console.error(" Error deleting agent run:",pe),Pl(pe)||_(pe instanceof Error?pe.message:"Failed to delete agent run")}},K=async(Me,pe,ke,_e)=>{try{console.log(" Creating new agent run:",{templateId:Me,runName:pe});const Z=b();Z&&gr.setAuthToken(Z);let q="linkedin",V;Me==="indeed-search"?(q="indeed",V={indeed:{date_posted:"1"}}):Me==="ziprecruiter-search"?(q="ziprecruiter",V={ziprecruiter:{}}):Me==="glassdoor-search"?(q="glassdoor",V={glassdoor:{}}):Me==="dice-search"?(q="dice",V={dice:{}}):Me==="autonomous-auto-search"&&(q="autonomous",V={autonomous:{starting_url:"",instructions:"",max_jobs_per_platform:10,platforms:[]}});const ie={run_name:pe,workflow_id:Me,platform:q,generate_cover_letter:ke.generateCoverLetter,send_connection_request:ke.sendConnectionRequest,use_ats_optimized:ke.generateATSResume,auto_apply:!1};_e&&(ie.agent_run_template_id=_e),V&&(ie.platform_filters=V);const ce=await gr.createAgentRun(ie);ce&&ce.id?(console.log("Successfully created agent run:",ce.id),await M(B,P,c?{infiniteOnly:!0}:{manualOnly:!0}),e&&e(ce.id)):(console.error(" Failed to create agent run: Invalid response"),_("Failed to create agent run"))}catch(Z){console.error(" Error creating agent run:",Z),Pl(Z)||_(Z instanceof Error?Z.message:"Failed to create agent run")}},J=()=>{o(!0)},ne=Math.ceil(U/$),oe={padding:"24px",maxWidth:"1400px",margin:"0 auto",backgroundColor:"#ffffff",minHeight:"100vh"},ae={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #e2e8f0"},ee={fontSize:f.typography.fontSize.h1,fontWeight:"bold",color:"#1e293b",margin:0},ue={display:"flex",gap:"12px",alignItems:"center",marginBottom:"24px"},Ce={display:"flex",alignItems:"center",position:"relative",flex:1,maxWidth:"400px"},ve={width:"100%",padding:"8px 12px 8px 36px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:f.typography.fontSize.base,outline:"none"},ge={padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:f.typography.fontSize.base,backgroundColor:"white",cursor:"pointer"},Je={padding:"8px 16px",borderRadius:"6px",fontSize:f.typography.fontSize.base,fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.15s ease"},Te={...Je,backgroundColor:"#3b82f6",color:"white",border:"none"},ze={width:"100%",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",overflow:"visible"},vt={backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},he={borderBottom:"1px solid #f1f5f9",transition:"background-color 0.15s ease"},me={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"24px",padding:"16px 0"};if(g&&l.length===0){const Me=(pe,ke,_e)=>s.jsx("div",{style:{width:pe,height:ke,borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",..._e}});return s.jsxs("div",{style:oe,children:[s.jsx("style",{children:`
            @keyframes skeletonPulse {
              0% { background-position: 200% 0; }
              100% { background-position: -200% 0; }
            }
          `}),s.jsxs("div",{style:ae,children:[s.jsxs("div",{style:{flex:1},children:[Me("240px",32,{marginBottom:"8px"}),Me("360px",16)]}),Me(100,36)]}),s.jsxs("div",{style:ue,children:[Me(400,38),Me(140,38),Me(120,26)]}),s.jsx("div",{style:{marginTop:"-12px",marginBottom:"16px"},children:Me("480px",14)}),s.jsxs("div",{style:ze,children:[s.jsx("div",{style:vt,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 3fr 120px 100px 60px",gap:"16px",padding:"12px 16px"},children:[Me(16,16),Me("60%",12),Me("70%",12),Me("80%",12),Me("50%",12)]})}),[...Array(5)].map((pe,ke)=>s.jsxs("div",{style:{borderBottom:"1px solid #f1f5f9",display:"grid",gridTemplateColumns:"40px 3fr 120px 100px 60px",gap:"16px",padding:"12px 16px",alignItems:"center"},children:[Me(16,16),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[Me("70%",16),Me("40%",12),Me("50%",10)]}),Me("80%",14),Me("60%",14),Me(32,32,{borderRadius:"4px"})]},ke))]})]})}return s.jsxs("div",{style:oe,children:[s.jsxs("div",{style:ae,children:[s.jsxs("div",{children:[s.jsx("h1",{style:ee,children:"Agent Runs"}),s.jsx("p",{style:{color:"#64748b",margin:"4px 0 0 0",fontSize:"14px"},children:"Manage and monitor your job hunting agent runs"})]}),s.jsxs(ot,{onClick:J,style:Te,children:[s.jsx(qi,{size:16}),"New Run"]})]}),s.jsxs("div",{style:ue,children:[s.jsxs("div",{style:Ce,children:[s.jsx(Zw,{size:16,style:{position:"absolute",left:"12px",color:"#9ca3af"}}),s.jsx("input",{type:"text",placeholder:"Search runs...",value:A,onChange:Me=>E(Me.target.value),style:ve})]}),s.jsxs("select",{value:P,onChange:Me=>z(Me.target.value),style:ge,children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"free",children:"Free"}),s.jsx("option",{value:"running",children:"Running"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:f.typography.fontSize.sm,color:"#374151"},children:[s.jsx("button",{onClick:X,style:{width:"48px",height:"26px",borderRadius:"999px",border:"1px solid #d1d5db",backgroundColor:c?"#2563eb":"#f1f5f9",display:"flex",alignItems:"center",padding:"2px",cursor:"pointer"},"aria-pressed":c,children:s.jsx("span",{style:{width:"22px",height:"22px",borderRadius:"50%",backgroundColor:"#ffffff",transform:c?"translateX(22px)":"translateX(0)",transition:"transform 0.2s ease",boxShadow:"0 1px 3px rgba(15, 23, 42, 0.2)"}})}),s.jsx("span",{style:{minWidth:"60px"},children:"Infinite"})]})]}),s.jsx("div",{style:{marginTop:"-12px",marginBottom:"16px",color:"#64748b",fontSize:f.typography.fontSize.xs},children:c?"Viewing runs created automatically by infinite hunt.":"Viewing manual runs created by you. Toggle Show runs from infinite hunt to switch contexts."}),j&&s.jsx("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",marginBottom:"16px",wordBreak:"break-word",overflowWrap:"break-word"},children:j}),re.size>0&&s.jsxs("div",{style:{backgroundColor:"white",border:"2px solid var(--accent-primary)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--accent-primary)",fontSize:f.typography.fontSize.base,fontWeight:"500"},children:s.jsxs("span",{children:[re.size," agent run",re.size>1?"s":""," selected"]})}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:()=>Q(new Set),style:{background:"none",border:"1px solid var(--accent-primary)",borderRadius:"6px",padding:"6px 12px",fontSize:f.typography.fontSize.sm,color:"var(--accent-primary)",cursor:"pointer",fontWeight:"500"},onMouseEnter:Me=>{Me.target.style.backgroundColor="#f1f5f9"},onMouseLeave:Me=>{Me.target.style.backgroundColor="transparent"},children:"Clear Selection"}),s.jsxs("button",{onClick:se,style:{background:"#dc2626",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:f.typography.fontSize.sm,color:"white",cursor:"pointer",fontWeight:"500",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:Me=>{Me.target.style.backgroundColor="#b91c1c"},onMouseLeave:Me=>{Me.target.style.backgroundColor="#dc2626"},children:[s.jsx(Ca,{size:14,color:nb("white")}),"Delete Selected"]})]})]}),s.jsxs("div",{style:{...ze,position:"relative"},children:[s.jsx("div",{style:vt,children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 3fr 120px 100px 60px",gap:"16px",padding:"12px 16px",fontWeight:"600",fontSize:f.typography.fontSize.xs,textTransform:"uppercase",color:"#6b7280",letterSpacing:"0.05em"},children:[s.jsx("input",{type:"checkbox",checked:re.size===k.length&&k.length>0,onChange:L,style:{cursor:"pointer"}}),s.jsx("div",{children:"Run Name"}),s.jsx("div",{children:"Created"}),s.jsx("div",{children:"Applications"}),s.jsx("div",{children:"Actions"})]})}),s.jsx("div",{children:g?s.jsx(FQ,{rowCount:5,gridTemplateColumns:"40px 3fr 120px 100px 60px"}):k.map(Me=>s.jsx("div",{style:{...he,cursor:"pointer"},onClick:()=>e?.(Me.id),onMouseEnter:pe=>{pe.target.style.backgroundColor="#f8fafc"},onMouseLeave:pe=>{pe.target.style.backgroundColor="white"},children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 3fr 120px 100px 60px",gap:"16px",padding:"12px 16px",alignItems:"center"},children:[s.jsx("input",{type:"checkbox",checked:re.has(Me.id),onChange:()=>N(Me.id),onClick:pe=>pe.stopPropagation(),style:{cursor:"pointer"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"500",color:"#1e293b",marginBottom:"2px"},children:Me.run_name||"Untitled Run"}),s.jsxs("div",{style:{fontSize:f.typography.fontSize.xs,color:"#64748b",fontFamily:"monospace"},children:[Me.id.substring(0,8),"..."]}),Me.search_keywords&&Me.search_keywords.length>0&&s.jsxs("div",{style:{fontSize:f.typography.fontSize.xxs,color:"#9ca3af",marginTop:"2px"},children:[Me.search_keywords.slice(0,2).join(", "),Me.search_keywords.length>2&&"..."]})]}),s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[500]},children:d9(Me.created_at)}),s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[500]},children:S(Me.id)}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:pe=>{pe.stopPropagation(),Y(H===Me.id?null:Me.id)},style:{background:"none",border:"none",padding:"8px",cursor:"pointer",borderRadius:"4px",color:"#64748b",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:pe=>{pe.target.style.backgroundColor="#f1f5f9",pe.target.style.color="#374151"},onMouseLeave:pe=>{pe.target.style.backgroundColor="transparent",pe.target.style.color="#64748b"},children:s.jsx(Kw,{size:16})}),H===Me.id&&s.jsx("div",{style:{position:"absolute",top:"100%",right:"0",backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",zIndex:1e3,minWidth:"140px",overflow:"hidden"},children:s.jsxs("button",{onClick:()=>{te(Me.id),Y(null)},style:{width:"100%",padding:"10px 12px",textAlign:"left",border:"none",background:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:f.typography.fontSize.base,color:"#dc2626"},onMouseEnter:pe=>{pe.target.style.backgroundColor="#fef2f2"},onMouseLeave:pe=>{pe.target.style.backgroundColor="white"},children:[s.jsx(Ca,{size:14}),"Delete"]})})]})]})},`${Me.id}-${y}-${d.length}`))})]}),k.length===0&&!g&&s.jsxs("div",{style:{textAlign:"center",padding:"48px",color:"#6b7280"},children:[s.jsx(eq,{size:48,style:{color:"var(--icon-muted)",marginBottom:"16px"}}),s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#374151"},children:"No agent runs found"}),s.jsx("p",{style:{margin:0},children:A||P!=="all"?"Try adjusting your search or filters":"Create your first agent run to get started"})]}),ne>1&&s.jsxs("div",{style:me,children:[s.jsxs("div",{style:{fontSize:f.typography.fontSize.base,color:"#6b7280"},children:["Showing ",(B-1)*$+1," to"," ",Math.min(B*$,U)," of ",U," runs"]}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsxs("button",{onClick:()=>D(Math.max(1,B-1)),disabled:B===1,style:{...Je,backgroundColor:B===1?"#f9fafb":"white",border:"1px solid #d1d5db",color:B===1?"#9ca3af":"#374151",cursor:B===1?"not-allowed":"pointer"},children:[s.jsx(Fd,{size:16}),"Previous"]}),s.jsxs("button",{onClick:()=>D(Math.min(ne,B+1)),disabled:B===ne,style:{...Je,backgroundColor:B===ne?"#f9fafb":"white",border:"1px solid #d1d5db",color:B===ne?"#9ca3af":"#374151",cursor:B===ne?"not-allowed":"pointer"},children:["Next",s.jsx(za,{size:16})]})]})]}),H&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:5},onClick:()=>Y(null)}),s.jsx(OQ,{isOpen:T,onClose:()=>o(!1),onCreateRun:K})]})},$Q=()=>{const[e,t]=F.useState(""),[r,n]=F.useState(!1),[l,i]=F.useState(!0),[d,p]=F.useState(!1),[g,x]=F.useState(!1),[y,w]=F.useState(!1),[j,_]=F.useState(""),[A,E]=F.useState(!1),[P,z]=F.useState(0),B="https://democratized-service-gateway-production.up.railway.app";F.useEffect(()=>{D()},[]);const D=async()=>{try{i(!0),_("");const Y=await mr.getValidToken();if(!Y)if(mr.isAuthenticated()&&P<2){console.log(`User is authenticated but token not available yet, retrying in 2 seconds... (attempt ${P+1}/2)`),z(c=>c+1),setTimeout(()=>D(),2e3);return}else if(P>=2){console.log("Max retries reached, giving up"),_("Unable to load authentication token. Please try refreshing the page."),i(!1);return}else{console.log("User not authenticated, skipping token load"),n(!1),t(""),i(!1);return}z(0);const T=await fetch(`${B}/api/auth/student-token`,{headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"}});if(T.status===404){n(!1),t(""),i(!1);return}const o=await T.json();if(!T.ok)throw new Error(o.detail||"Failed to load token");n(o.has_token),o.has_token&&t(o.token)}catch(Y){console.error("Error loading token:",Y),Y instanceof Error&&!Y.message.includes("404")&&!Y.message.includes("Not Found")?_(Y.message):(n(!1),t(""))}finally{i(!1)}},U=async()=>{try{p(!0),_("");const Y=await mr.getValidToken();if(!Y)if(mr.isAuthenticated()){console.log("Auth token not available, waiting 2 seconds and retrying..."),await new Promise(b=>setTimeout(b,2e3));const c=await mr.getValidToken();if(!c){_("Authentication token not ready yet. Please try again in a moment.");return}const h=await fetch(`${B}/api/auth/generate-student-token`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}}),v=await h.json();if(!h.ok)throw new Error(v.detail||"Failed to generate token");t(v.token),n(!0),x(!0);return}else{_("Please log in to generate a token.");return}const T=await fetch(`${B}/api/auth/generate-student-token`,{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"}}),o=await T.json();if(!T.ok)throw new Error(o.detail||"Failed to generate token");t(o.token),n(!0),x(!0)}catch(Y){console.error("Error generating token:",Y),_(Y instanceof Error?Y.message:"Failed to generate token")}finally{p(!1)}},G=async()=>{try{await navigator.clipboard.writeText(e),w(!0),setTimeout(()=>w(!1),2e3)}catch(Y){console.error("Failed to copy token:",Y)}},$=Y=>g?Y.match(/.{1,2}/g)?.join(" ")||Y:"",re=()=>{E(!0)},Q=async()=>{E(!1),await U()},H=()=>{E(!1)};return l?s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`,boxShadow:f.shadows.sm},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx(id,{size:24,color:f.colors.primary.main}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"Student Token"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,color:f.colors.neutral[600],fontSize:f.typography.fontSize.sm},children:[s.jsx(An,{size:16,className:"animate-spin"}),P>0?`Waiting for authentication... (attempt ${P}/3)`:"Loading token information..."]})]}):s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`,boxShadow:f.shadows.sm},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx(id,{size:24,color:f.colors.primary.main}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"Student Token"})]}),s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],margin:`0 0 ${f.spacing.md} 0`,lineHeight:1.5},children:"Share this token with your coach to give them access to your job search progress."}),s.jsx("div",{style:{backgroundColor:f.colors.accent.warning+"10",borderRadius:f.borderRadius.md,padding:f.spacing.md,border:`1px solid ${f.colors.accent.warning}`},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:f.spacing.sm,margin:0},children:[s.jsx(Ta,{size:16,color:f.colors.accent.warning,style:{marginTop:"2px",flexShrink:0}}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.accent.warning,margin:0,fontWeight:f.typography.fontWeight.medium,lineHeight:1.4},children:"Only share this token with trusted coaches. Anyone with this token can access your job search data."})]})})]}),j&&s.jsxs("div",{style:{backgroundColor:f.colors.accent.error+"10",border:`1px solid ${f.colors.accent.error}`,borderRadius:f.borderRadius.md,padding:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx("p",{style:{color:f.colors.accent.error,fontSize:f.typography.fontSize.sm,margin:`0 0 ${f.spacing.sm} 0`},children:j}),j.includes("Unable to load authentication token")&&s.jsxs(ot,{variant:"secondary",onClick:()=>{_(""),z(0),D()},style:{fontSize:f.typography.fontSize.xs,padding:`${f.spacing.xs} ${f.spacing.sm}`,height:"auto"},children:[s.jsx(An,{size:12}),"Retry"]})]}),r?s.jsxs("div",{children:[s.jsxs("div",{style:{backgroundColor:f.colors.neutral[100],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,marginBottom:f.spacing.md,display:"flex",alignItems:"center",justifyContent:"space-between",gap:f.spacing.md},children:[s.jsx("div",{style:{fontFamily:"monospace",fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],letterSpacing:"2px"},children:$(e)}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("button",{onClick:()=>x(!g),style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.sm,color:f.colors.neutral[600],transition:f.transitions.fast},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor=f.colors.neutral[200]},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="transparent"},title:g?"Hide token":"Show token",children:g?s.jsx($d,{size:16}):s.jsx(os,{size:16})}),s.jsx("button",{onClick:G,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.sm,color:y?f.colors.accent.success:f.colors.neutral[600],transition:f.transitions.fast},onMouseEnter:Y=>{y||(Y.currentTarget.style.backgroundColor=f.colors.neutral[200])},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="transparent"},title:y?"Copied!":"Copy token",children:s.jsx(sb,{size:16})})]})]}),s.jsx("div",{style:{position:"relative",height:"20px",marginBottom:f.spacing.sm},children:s.jsx(Wr,{children:y&&s.jsxs(jt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15,ease:"easeOut"},style:{position:"absolute",right:0,display:"flex",alignItems:"center",gap:"4px",color:f.colors.accent.success,fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium},children:[s.jsx(Ia,{size:12}),"Copied!"]})})}),s.jsx("div",{style:{display:"flex",gap:f.spacing.md},children:s.jsx(ot,{variant:"secondary",onClick:re,disabled:d,style:{flex:1},children:d?s.jsxs(s.Fragment,{children:[s.jsx(An,{size:16,className:"animate-spin"}),"Refreshing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(An,{size:16}),"Refresh Token"]})})})]}):s.jsx(ot,{variant:"primary",onClick:U,disabled:d,style:{width:"100%"},children:d?s.jsxs(s.Fragment,{children:[s.jsx(An,{size:16,className:"animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(id,{size:16}),"Generate Token"]})}),A&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs(jt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],boxShadow:f.shadows.lg,border:`1px solid ${f.colors.neutral[200]}`,maxWidth:"400px",width:"90%"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg},children:[s.jsx(Ta,{size:24,color:f.colors.accent.warning}),s.jsx("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"Refresh Token?"})]}),s.jsxs("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:`0 0 ${f.spacing.lg} 0`,lineHeight:1.5},children:["Refreshing your token will generate a new one and ",s.jsx("strong",{children:"immediately revoke access for all current coaches"}),". They will need the new token to regain access."]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.md,justifyContent:"flex-end"},children:[s.jsx(ot,{variant:"secondary",onClick:H,disabled:d,children:"Cancel"}),s.jsx(ot,{variant:"primary",onClick:Q,disabled:d,style:{backgroundColor:f.colors.accent.warning,borderColor:f.colors.accent.warning},children:d?"Refreshing...":"Refresh Token"})]})]})})]})},qQ=()=>{const[e,t]=F.useState(null),[r,n]=F.useState(!0),[l,i]=F.useState(""),[d,p]=F.useState("");F.useEffect(()=>{g()},[]),F.useEffect(()=>{d&&d.length===8&&x()},[d]);const g=async()=>{try{const j=await mr.getValidToken();if(!j){i("Authentication required"),n(!1);return}const A=await fetch("https://democratized-service-gateway-production.up.railway.app/api/auth/student-token",{headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(A.status===404){n(!1);return}if(!A.ok)throw new Error("Failed to load student token");const E=await A.json();E.token?p(E.token):n(!1)}catch(j){console.error("Failed to load student token:",j),i(j instanceof Error?j.message:"Failed to load token"),n(!1)}},x=async()=>{try{n(!0),i("");const j=await mr.getCoachesByStudentToken(d);t(j)}catch(j){console.error("Failed to load coaches:",j),i(j instanceof Error?j.message:"Failed to load coaches"),t(null)}finally{n(!1)}},y=j=>{try{return new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Unknown"}},w=j=>`${j.first_name} ${j.last_name}`.trim()||j.email;return r?s.jsxs("div",{style:{padding:"24px",textAlign:"center",color:f.colors.neutral[600]},children:[s.jsxs("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],margin:"0 0 16px 0",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[s.jsx(Hs,{size:20}),"My Coaches"]}),s.jsx("p",{children:"Loading coaches..."})]}):d?l?s.jsxs("div",{style:{padding:"24px"},children:[s.jsxs("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Hs,{size:20}),"My Coaches"]}),s.jsxs("div",{style:{backgroundColor:f.colors.accent.error+"10",border:`1px solid ${f.colors.accent.error}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx(Ta,{size:20,color:f.colors.accent.error}),s.jsx("p",{style:{color:f.colors.accent.error,fontSize:f.typography.fontSize.base,margin:0},children:l})]})]}):s.jsxs("div",{style:{padding:"24px"},children:[s.jsxs("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Hs,{size:20}),"My Coaches (",e?.total||0,")"]}),!e||e.coaches.length===0?s.jsx("div",{style:{backgroundColor:f.colors.neutral[50],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,textAlign:"center"},children:s.jsx("p",{style:{color:f.colors.neutral[600],fontSize:f.typography.fontSize.base,margin:0},children:"No coaches have access to your portal yet. Share your student token with a coach to grant them access."})}):s.jsx("div",{style:{display:"grid",gap:f.spacing.md},children:e.coaches.map((j,_)=>s.jsx(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.1},style:{backgroundColor:"#ffffff",border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:f.spacing.sm},children:s.jsxs("div",{style:{flex:1},children:[s.jsx("h4",{style:{fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],margin:"0 0 4px 0"},children:w(j)}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[s.jsx($o,{size:14,color:f.colors.neutral[500]}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],margin:0},children:j.email})]}),j.last_sign_in_at&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx(xs,{size:14,color:f.colors.neutral[500]}),s.jsxs("p",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[500],margin:0},children:["Last active: ",y(j.last_sign_in_at)]})]})]})})},j.user_id))})]}):s.jsxs("div",{style:{padding:"24px"},children:[s.jsxs("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],margin:"0 0 16px 0",display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(Hs,{size:20}),"My Coaches"]}),s.jsx("div",{style:{backgroundColor:f.colors.neutral[50],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,textAlign:"center"},children:s.jsx("p",{style:{color:f.colors.neutral[600],fontSize:f.typography.fontSize.base,margin:0},children:"Generate a student token first to see which coaches have access to your portal."})})]})},h9=()=>{const[e,t]=F.useState([]),[r,n]=F.useState(!0),[l,i]=F.useState(!1),[d,p]=F.useState(null),[g,x]=F.useState(!1);F.useEffect(()=>{y()},[]);const y=async()=>{try{n(!0),p(null);const P=await Ju.listFaqQuestions();t(P.faq_questions||[])}catch(P){console.error("Error loading FAQ:",P),p("Failed to load FAQ questions")}finally{n(!1)}},w=async()=>{try{i(!0),p(null),await y()}catch(P){console.error("Error refreshing FAQ list:",P),p("Failed to refresh FAQ list")}finally{i(!1)}},j=async()=>{try{i(!0),p(null);const P=await _r.listResumes();if(P.length===0){p("No resume found. Please upload a resume first.");return}const z=P[0],B=await _r.getResume(z.id);if(!B.resume_text){p("Resume text not available. Please re-upload your resume.");return}await Ju.generateFaqFromResume(B.resume_text),await y()}catch(P){console.error("Error generating FAQ:",P),p("Failed to generate FAQ from resume")}finally{i(!1)}},_=async(P,z)=>{try{await Ju.updateFaqQuestion(P,{answer:z}),t(B=>B.map(D=>D.id===P?{...D,answer:z}:D))}catch(B){console.error("Error updating question:",B),p("Failed to update question")}},A=async P=>{try{await Ju.deleteFaqQuestion(P),t(z=>z.filter(B=>B.id!==P))}catch(z){console.error("Error deleting question:",z),p("Failed to delete question")}},E=()=>{x(P=>!P)};return s.jsxs("div",{style:{flex:1,backgroundColor:"#ffffff",display:"flex",flexDirection:"column",height:"100%",minHeight:0,position:"relative",overflow:"hidden"},children:[s.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:"0 0 4px 0",fontSize:f.typography.fontSize.h4,fontWeight:"bold",color:"#1e293b"},children:"FAQ Questions"}),s.jsx("p",{style:{color:"#64748b",margin:0,fontSize:f.typography.fontSize.base},children:"Answer common application questions"})]}),s.jsx("div",{style:{display:"flex",gap:"8px"},children:e.length===0?s.jsx("button",{onClick:j,disabled:l,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:l?"not-allowed":"pointer",fontSize:f.typography.fontSize.base,fontWeight:"500",opacity:l?.6:1},children:l?s.jsxs(s.Fragment,{children:[s.jsx(An,{size:14,style:{animation:"spin 1s linear infinite"}}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qi,{size:14}),e.length>0?"Refresh FAQ":"Generate FAQ"]})}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:w,disabled:l,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:"#f8fafc",color:"#475569",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:l?"not-allowed":"pointer",fontSize:f.typography.fontSize.base,fontWeight:"500",opacity:l?.6:1},children:[l?s.jsx(An,{size:14,style:{animation:"spin 1s linear infinite"}}):s.jsx(An,{size:14}),l?"Refreshing...":"Refresh"]}),s.jsxs("button",{onClick:E,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",backgroundColor:g?"#ef4444":"#f8fafc",color:g?"white":"#475569",border:g?"none":"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:f.typography.fontSize.base,fontWeight:"500"},children:[s.jsx(Ca,{size:14}),g?"Done":"Delete"]})]})})]}),s.jsxs("div",{style:{flex:"1 1 0%",overflowY:"auto",padding:"24px",minHeight:0},children:[d&&s.jsx("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",marginBottom:"16px"},children:s.jsx("p",{style:{color:"#dc2626",margin:0,fontSize:f.typography.fontSize.base},children:d})}),r?s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#64748b"},children:[s.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid #e2e8f0",borderTop:"2px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"16px"}}),s.jsx(jr,{variant:"body",style:{margin:0},children:"Loading FAQ questions..."})]}):e.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#64748b"},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.h4,fontWeight:"600",marginBottom:"8px",color:"#64748b"},children:"No FAQ Questions Yet"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,maxWidth:"400px",margin:"0 auto 24px"},children:'Click "Generate FAQ" to create questions based on your resume.'})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",minHeight:"fit-content"},children:e.map(P=>s.jsx(l9,{question:P,onUpdate:_,onDelete:g?A:void 0,deleteMode:g},P.id))})]})]})};class HQ{constructor(){this.serviceGatewayUrl=Rn,this.authToken=null}setAuthToken(t){this.authToken=t}getAuthToken(){if(this.authToken)return this.authToken;try{const t=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const r of t){const n=localStorage.getItem(r);if(n){const l=JSON.parse(n);if(l.token)return l.token;if(l.access_token)return l.access_token;if(typeof l=="string")return l}}return null}catch(t){return console.error("Failed to parse auth token from storage",t),null}}async makeAuthenticatedRequest(t,r={}){const n=this.getAuthToken();if(!n)throw new Error("No authentication token available");const l=await fetch(`${this.serviceGatewayUrl}${t}`,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers}});if(l.status===401)throw this.authToken=null,new Error("Authentication required");return l}async fetchEntry(){const t=await this.makeAuthenticatedRequest("/api/about-me/info");if(!t.ok)throw new Error(`Failed to load additional info: ${t.statusText}`);return(await t.json()).additional_info||null}async saveEntry(t){const r=t.id?`/api/about-me/info/${t.id}`:"/api/about-me/info",n=t.id?"PUT":"POST",l=await this.makeAuthenticatedRequest(r,{method:n,body:JSON.stringify({body:t.body})});if(!l.ok)throw new Error(`Failed to save additional info: ${l.statusText}`);const i=await l.json();if(!i.additional_info)throw new Error("No additional info returned from server");return i.additional_info}async deleteEntry(t){const r=await this.makeAuthenticatedRequest(`/api/about-me/info/${t}`,{method:"DELETE"});if(!r.ok)throw new Error(`Failed to delete additional info: ${r.statusText}`)}}const A1=new HQ,p9=()=>{const[e,t]=F.useState(null),[r,n]=F.useState(""),[l,i]=F.useState(!0),[d,p]=F.useState(!1),[g,x]=F.useState(null),[y,w]=F.useState(null),j=F.useRef(null),_=F.useMemo(()=>"This single long-form entry feeds every automated Tell me about yourself style prompt. Keep it updated with the tone, highlights, and anecdotes you want JobHuntr to reuse.",[]);F.useEffect(()=>{(async()=>{i(!0);try{const z=await A1.fetchEntry();t(z),n(z?.body||""),x(null)}catch(z){console.error("Failed to load additional info entry",z),x("Unable to load your About Me entry. Please try again.")}finally{i(!1)}})()},[]);const A=async P=>{if(!P.trim()){if(e?.id)try{await A1.deleteEntry(e.id),t(null),x(null)}catch(z){console.error("Failed to delete additional info entry",z),x("Unable to clear the entry at the moment.")}return}p(!0);try{const z=await A1.saveEntry({id:e?.id,body:P.trim()});t(z),x(null)}catch(z){console.error("Failed to save additional info entry",z),x("Could not save your entry. Double-check your connection and try again.")}finally{p(!1)}},E=()=>{j.current&&clearTimeout(j.current),A(r)};return s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0"},children:[s.jsx("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:f.typography.fontSize.h4,color:f.colors.neutral[900]},children:"Additional information about me"}),s.jsx("p",{style:{margin:"4px 0 0",color:f.colors.neutral[600],fontSize:f.typography.fontSize.base,lineHeight:1.5},children:"Keep one rich story that youre proud ofour agents reuse this whenever lengthy answers pop up mid-application."})]}),s.jsx("p",{style:{margin:0,color:f.colors.neutral[500],fontSize:f.typography.fontSize.sm},children:_})]})}),g&&s.jsx("div",{style:{backgroundColor:"#fef2f2",color:"#b91c1c",padding:"16px 24px",borderBottom:"1px solid #fee2e2"},children:g}),y&&!g&&s.jsx("div",{style:{backgroundColor:"#ecfdf5",color:"#047857",padding:"16px 24px",borderBottom:"1px solid #d1fae5"},children:y}),s.jsx("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s.jsx("textarea",{id:"additional-info-body",value:r,disabled:l,onChange:P=>n(P.target.value),onBlur:E,placeholder:"Example: I'm a systems thinker with 5+ years leading go-to-market experiments...",style:{width:"100%",minHeight:"240px",padding:"16px",borderRadius:"12px",border:"1px solid #e2e8f0",fontSize:f.typography.fontSize.base,resize:"vertical"}})})})]})},WQ=()=>{const[e,t]=F.useState("profile"),[r,n]=F.useState(null),[l,i]=F.useState(null),[d,p]=F.useState(!1),[g,x]=F.useState(""),[y,w]=F.useState(""),[j,_]=F.useState(!1),[A,E]=F.useState(null);F.useEffect(()=>{(()=>{const re=mr.getCurrentUser(),Q=mr.getCurrentUserEmail();if(re||Q){const H=re?.user_metadata||{},Y=H.first_name||H.firstName||(typeof H.name=="string"?H.name.split(" ")[0]:"")||"",T=H.last_name||H.lastName||"";x(Y),w(T);const o=Y||(Q?Q.split("@")[0]:"")||(typeof H.name=="string"?H.name.split(" ")[0]:"User"),c=o.length>0?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"User";n({email:Q||re?.email||"user@example.com",name:c})}})(),P()},[]),F.useEffect(()=>{const $=re=>{const Q=re.detail||{};Q.first_name!==void 0&&x(Q.first_name),Q.last_name!==void 0&&w(Q.last_name)};return window.addEventListener("userProfileUpdated",$),()=>window.removeEventListener("userProfileUpdated",$)},[]);const P=async()=>{try{p(!0);const $=await sn.getUsage();i($)}catch($){console.error("Failed to load usage status:",$)}finally{p(!1)}},z=()=>{window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:null}}))},B={padding:"24px",maxWidth:"1200px",margin:"0 auto",backgroundColor:"#ffffff",minHeight:"100vh"},D={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid #e2e8f0"},U={fontSize:f.typography.fontSize.h1,fontWeight:"bold",color:"#1e293b",margin:0},G=$=>({padding:"12px 24px",fontSize:"0.875rem",fontWeight:"600",color:$?"#3b82f6":"#64748b",backgroundColor:"transparent",border:"none",borderBottom:$?"2px solid #3b82f6":"2px solid transparent",cursor:"pointer",transition:"all 0.2s ease",outline:"none"});return s.jsxs("div",{style:B,children:[s.jsx("div",{style:D,children:s.jsxs("div",{children:[s.jsx("h1",{style:U,children:"User Center"}),s.jsx("p",{style:{color:"#64748b",margin:"4px 0 0 0",fontSize:"14px"},children:"Manage your profile, subscription, coaches, and teach JobHuntr about yourself"})]})}),s.jsxs("div",{style:{display:"flex",gap:"0px",borderBottom:"1px solid #e2e8f0",marginBottom:"24px"},children:[s.jsx("button",{style:G(e==="profile"),onClick:()=>t("profile"),onMouseEnter:$=>{e!=="profile"&&($.currentTarget.style.color="#3b82f6")},onMouseLeave:$=>{e!=="profile"&&($.currentTarget.style.color="#64748b")},children:"Profile & Usage"}),s.jsx("button",{style:G(e==="coaches"),onClick:()=>t("coaches"),onMouseEnter:$=>{e!=="coaches"&&($.currentTarget.style.color="#3b82f6")},onMouseLeave:$=>{e!=="coaches"&&($.currentTarget.style.color="#64748b")},children:"Coaches"}),s.jsx("button",{style:G(e==="about-me"),onClick:()=>t("about-me"),onMouseEnter:$=>{e!=="about-me"&&($.currentTarget.style.color="#3b82f6")},onMouseLeave:$=>{e!=="about-me"&&($.currentTarget.style.color="#64748b")},children:"About Me"})]}),e==="profile"&&s.jsx(s.Fragment,{children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",padding:"24px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},children:[s.jsxs("div",{style:{marginBottom:"32px"},children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1e293b",marginBottom:"24px",margin:"0 0 24px 0"},children:"Profile Information"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"16px"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #e2e8f0"},children:s.jsx(cc,{size:32,color:"#64748b"})}),s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1e293b",margin:"0 0 8px 0"},children:r?.name||"User"}),s.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0 0 4px 0"},children:r?.email||"user@example.com"}),s.jsx("p",{style:{fontSize:"0.75rem",color:"#94a3b8",margin:0},children:"Joined January 2024"})]})]})]}),s.jsxs("div",{style:{marginBottom:"32px",padding:"20px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,color:"#1e293b",margin:"0 0 16px 0"},children:"Personal details"}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:[s.jsxs("div",{style:{flex:1,minWidth:"220px"},children:[s.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#475569",marginBottom:"6px"},children:"First name"}),s.jsx("input",{type:"text",value:g,onChange:$=>x($.target.value),placeholder:"First name",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #cbd5f5",fontSize:"0.95rem"}})]}),s.jsxs("div",{style:{flex:1,minWidth:"220px"},children:[s.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"#475569",marginBottom:"6px"},children:"Last name"}),s.jsx("input",{type:"text",value:y,onChange:$=>w($.target.value),placeholder:"Last name",style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid #cbd5f5",fontSize:"0.95rem"}})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"16px",gap:"12px"},children:[A&&s.jsx("span",{style:{alignSelf:"center",fontSize:"0.85rem",color:A.type==="success"?"#16a34a":"#dc2626"},children:A.text}),s.jsx(ot,{onClick:VQ,disabled:j,style:{minWidth:"160px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:j?"Saving...":"Save changes"})]})]}),s.jsx("div",{style:{borderTop:"1px solid #e2e8f0",marginBottom:"32px"}}),s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1e293b",margin:"0 0 20px 0"},children:"Subscription & Usage"}),d?s.jsx("div",{style:{textAlign:"center",padding:"20px"},children:s.jsx("p",{style:{color:"#64748b"},children:"Loading usage status..."})}):l?s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",gap:"48px",alignItems:"baseline",padding:"12px 0",borderBottom:"1px solid #e2e8f0",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Current Plan"}),s.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b",textTransform:"capitalize"},children:l.tier})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Monthly Usage"}),s.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:[l.monthly_used," /"," ",l.monthly_limit===1/0?"":l.monthly_limit]})]}),l.monthly_limit!==1/0&&s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline",marginLeft:"auto"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Remaining"}),s.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:l.monthly_remaining})]})]}),s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",gap:"48px",alignItems:"baseline",padding:"12px 0",borderBottom:"1px solid #e2e8f0",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Daily Usage"}),s.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:[l.daily_used," / ",l.daily_limit]})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Next Reset"}),s.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:new Date(l.next_reset).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"})})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline",marginLeft:"auto"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:"Remaining Today"}),s.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b"},children:l.daily_remaining})]})]}),s.jsxs("p",{style:{fontSize:"0.75rem",color:"#64748b",margin:"0 0 16px 0"},children:[s.jsx("strong",{children:"Why this limit?"})," To prevent bot detection on LinkedIn, we limit applications to ",l.daily_limit," per day. This helps keep your account safe."]}),s.jsxs("div",{style:{display:"flex",gap:"48px",alignItems:"baseline",padding:"12px 0",borderBottom:"1px solid #ffe4f3",marginBottom:"16px"},children:[s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#be185d"},children:"AI Resumes"}),s.jsxs("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#9d174d"},children:[l.ai_resume_used," /",l.ai_resume_limit===1/0?" ":` ${l.ai_resume_limit}`]})]}),l.ai_resume_limit!==1/0&&s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"baseline",marginLeft:"auto"},children:[s.jsx("span",{style:{fontSize:"0.75rem",color:"#be185d"},children:"Remaining Slots"}),s.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#be185d"},children:l.ai_resume_remaining})]})]}),s.jsx("p",{style:{fontSize:"0.75rem",color:"#be185d",margin:"0 0 16px 0"},children:"AI resume usage tracks how many optimized resumes you have generated. Delete older resumes or upgrade your plan if you need more capacity."})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[l.tier!=="free"&&s.jsxs(ot,{onClick:z,style:{flex:1,minWidth:"200px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"#3b82f6",color:"white"},children:[s.jsx(Wp,{size:16}),"Manage Subscription"]}),l.tier==="free"&&s.jsxs("div",{style:{flex:1},children:[s.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"8px"},children:"Upgrade to Pro or Unlimited for more applications and advanced features."}),s.jsxs(ot,{onClick:()=>{window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:null}}))},style:{backgroundColor:"#3b82f6",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[s.jsx(ob,{size:16}),"Upgrade Plan"]})]})]}),l.tier!=="free"&&s.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"0.75rem",color:"#64748b"},children:s.jsx("p",{style:{marginBottom:"4px"},children:"You can manage your subscription, update payment methods, view invoices, or cancel anytime through the Stripe Customer Portal."})})]}):s.jsx("p",{style:{color:"#64748b",textAlign:"center"},children:"Unable to load subscription information."})]})]})}),e==="coaches"&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"24px"},children:[s.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:s.jsx($Q,{})}),s.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",overflow:"hidden"},children:s.jsx(qQ,{})})]}),e==="about-me"&&s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs("div",{children:[s.jsx("p",{style:{margin:0,color:f.colors.accent.info,fontWeight:600,fontSize:f.typography.fontSize.sm,letterSpacing:"0.04em",textTransform:"uppercase"},children:"About Me Hub"}),s.jsx("h1",{style:{margin:"4px 0 0",fontSize:f.typography.fontSize.h3,color:f.colors.neutral[900]},children:"Teach JobHuntr how to speak on your behalf"})]}),s.jsx("p",{style:{margin:0,fontSize:f.typography.fontSize.lg,color:f.colors.neutral[600],maxWidth:"860px",lineHeight:1.5},children:"Everything you add here feeds the automated question-answering system. Long-form sections supply story-driven responses while FAQ answers help the agent handle common interview or application prompts."})]}),s.jsx(p9,{}),s.jsx("div",{style:{minHeight:0,display:"flex",flexDirection:"column"},children:s.jsx(h9,{})})]})]})},VQ=async()=>{setProfileMessage(null);try{setSavingProfile(!0);const e=await mr.updateProfile({firstName,lastName});setProfileMessage({type:"success",text:"Profile updated successfully."}),setUserInfo(t=>t&&{...t,name:(e.first_name||t.name||"").trim()||t.name})}catch(e){console.error("Failed to update profile:",e),setProfileMessage({type:"error",text:e instanceof Error?e.message:"Unable to update your profile. Please try again."})}finally{setSavingProfile(!1)}},GQ=()=>s.jsx("div",{className:"user-page",children:s.jsx(WQ,{})}),E_=({actions:e,size:t="md",className:r=""})=>{const[n,l]=F.useState(!1),i=F.useRef(null);F.useEffect(()=>{const g=x=>{i.current&&!i.current.contains(x.target)&&l(!1)};return n&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[n]);const d=t==="sm"?12:16,p=t==="sm"?"6px":"8px";return s.jsxs("div",{ref:i,style:{position:"relative",overflow:"visible"},className:r,children:[s.jsx("button",{onClick:()=>l(!n),style:{background:"none",border:"none",padding:p,cursor:"pointer",borderRadius:"4px",color:f.colors.neutral[500],display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseEnter:g=>{g.target.style.backgroundColor=f.colors.neutral[100],g.target.style.color=f.colors.neutral[700]},onMouseLeave:g=>{g.target.style.backgroundColor="transparent",g.target.style.color=f.colors.neutral[500]},children:s.jsx(Kw,{size:d})}),n&&s.jsx("div",{style:{position:"absolute",top:"100%",right:"0",backgroundColor:"#ffffff",border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,boxShadow:f.shadows.lg,zIndex:9999,minWidth:"140px",overflow:"hidden"},children:e.map((g,x)=>s.jsxs("button",{onClick:()=>{g.disabled||(g.onClick(),l(!1))},disabled:g.disabled,style:{width:"100%",padding:"10px 12px",textAlign:"left",border:"none",background:"#ffffff",cursor:g.disabled?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:f.spacing.sm,fontSize:f.typography.fontSize.sm,color:g.disabled?f.colors.neutral[400]:g.variant==="danger"?f.colors.accent.error:f.colors.neutral[700],borderBottom:x<e.length-1?`1px solid ${f.colors.neutral[100]}`:"none",opacity:g.disabled?.5:1},onMouseEnter:y=>{g.disabled||(y.target.style.backgroundColor=g.variant==="danger"?f.colors.accent.error+"10":f.colors.neutral[50])},onMouseLeave:y=>{y.target.style.backgroundColor="#ffffff"},children:[g.icon&&s.jsx("span",{style:{display:"flex",alignItems:"center"},children:g.icon}),g.label]},g.id))})]})},KQ=({template:e,onEdit:t,onDelete:r,onDownload:n})=>{const l=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),i=x=>{if(x===0)return"0 Bytes";const y=1024,w=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(x)/Math.log(y));return parseFloat((x/Math.pow(y,j)).toFixed(2))+" "+w[j]},d=!e.htmlContent||e.htmlContent.trim()===""||e.status==="draft"||e.status==="in-progress",g=e.status==="in-progress"||d?{label:"In Progress",color:f.colors.accent.warning,bgColor:f.colors.accent.warning+"20"}:null;return s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4,boxShadow:"0 8px 25px rgba(0, 0, 0, 0.1)"},transition:{duration:.2},style:{backgroundColor:f.colors.neutral.white,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.lg,cursor:"pointer",position:"relative",overflow:"visible"},onClick:()=>t(e.id),children:[s.jsx("div",{style:{width:"100%",height:"200px",backgroundColor:d?f.colors.neutral[100]:f.colors.neutral[50],borderRadius:f.borderRadius.md,marginBottom:f.spacing.md,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:d?`2px dashed ${f.colors.neutral[300]}`:"none"},children:e.previewImage&&!d?s.jsx("img",{src:e.previewImage,alt:`Preview of ${e.name}`,style:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:f.spacing.sm},children:d?s.jsxs(s.Fragment,{children:[s.jsx(Wi,{size:48,color:f.colors.neutral[400]}),s.jsx(ir,{style:{color:f.colors.neutral[500],textAlign:"center"},children:"Resume not uploaded yet"})]}):s.jsx(Lo,{size:48,color:f.colors.neutral[400]})})}),s.jsx("div",{style:{marginBottom:f.spacing.sm},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xs},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],lineHeight:"1.4",flex:1},children:e.name}),g&&s.jsxs("div",{style:{backgroundColor:g.bgColor,color:g.color,padding:`${f.spacing.xs} ${f.spacing.sm}`,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(Wi,{size:12}),s.jsx(ir,{style:{fontWeight:f.typography.fontWeight.medium,color:g.color},children:g.label})]})]})}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.md},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(xs,{size:12,color:f.colors.neutral[500]}),s.jsx(ir,{style:{color:f.colors.neutral[500]},children:l(e.lastModified)})]}),s.jsx(ir,{style:{color:f.colors.neutral[400]},children:""}),s.jsx(ir,{style:{color:f.colors.neutral[500]},children:i(e.size)})]}),e.additionalExperience&&s.jsx("div",{style:{backgroundColor:f.colors.accent.info+"20",color:f.colors.accent.info,padding:`${f.spacing.xs} ${f.spacing.sm}`,borderRadius:f.borderRadius.sm,marginBottom:f.spacing.md},children:s.jsx(ir,{style:{fontWeight:f.typography.fontWeight.medium},children:"+ Additional Experience"})}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},onClick:x=>x.stopPropagation(),children:s.jsx(E_,{actions:[...n?[{id:"download",label:"Export Template Resume",icon:s.jsx(Pa,{size:14}),onClick:()=>n(e.id)}]:[],{id:"delete",label:"Delete",icon:s.jsx(Ca,{size:14}),onClick:()=>r(e.id),variant:"danger"}],size:"sm"})})]})},g9=()=>s.jsxs("div",{style:{padding:f.spacing.xl,backgroundColor:f.colors.neutral[50],minHeight:"100vh",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xl},children:[s.jsxs("div",{children:[s.jsx("div",{style:{height:"32px",width:"200px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"16px",width:"120px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{height:"40px",width:"160px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xl,gap:f.spacing.md},children:[s.jsx("div",{style:{flex:1,height:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,maxWidth:"300px"}}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,alignItems:"center"},children:[s.jsx("div",{style:{height:"16px",width:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"80px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:f.spacing.lg,marginBottom:f.spacing.xl},children:[...Array(6)].map((e,t)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{style:{height:"200px",backgroundColor:f.colors.neutral[100],position:"relative",padding:f.spacing.md},children:[s.jsx("div",{style:{height:"20px",width:"60%",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"12px",width:"80%",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.md}}),[...Array(3)].map((r,n)=>s.jsxs("div",{style:{marginBottom:f.spacing.sm},children:[s.jsx("div",{style:{height:"14px",width:"40%",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}}),s.jsx("div",{style:{height:"10px",width:"90%",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}}),s.jsx("div",{style:{height:"10px",width:"70%",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm}})]},n))]}),s.jsxs("div",{style:{padding:f.spacing.md},children:[s.jsx("div",{style:{height:"20px",width:"80%",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.md},children:[s.jsx("div",{style:{height:"16px",width:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"14px",width:"60px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"14px",width:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]})]})]},t))}),s.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.5;
            }
          }

          @keyframes spin {
            0% {
              transform: rotate(0deg);
            }
            100% {
              transform: rotate(360deg);
            }
          }
        `})]}),YQ=({templates:e,loading:t,error:r,searchTerm:n,sortBy:l,sortOrder:i,onSearch:d,onSort:p,onCreateNew:g,onEditTemplate:x,onDeleteTemplate:y,onDownloadTemplate:w,onRefresh:j})=>{const _=E=>{l===E?p(E,i==="asc"?"desc":"asc"):p(E,"desc")},A=E=>l!==E?null:i==="asc"?s.jsx(AU,{size:16}):s.jsx(jU,{size:16});return t?s.jsx(g9,{}):r?s.jsx("div",{style:{textAlign:"center",padding:f.spacing.xl,color:f.colors.accent.error},children:s.jsx(Ct,{children:r})}):s.jsxs("div",{style:{width:"100%"},children:[s.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xl},children:[s.jsxs("div",{children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:"ATS Resume Templates"}),s.jsxs(dr,{style:{color:f.colors.neutral[600]},children:[e.length," template",e.length!==1?"s":""," available"]})]}),s.jsxs(ot,{variant:"primary",onClick:g,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Create New Template"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg,gap:f.spacing.md},children:[s.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[s.jsx(Zw,{size:16,style:{position:"absolute",left:f.spacing.sm,top:"50%",transform:"translateY(-50%)",color:f.colors.neutral[500]}}),s.jsx("input",{type:"text",placeholder:"Search templates...",value:n,onChange:E=>d(E.target.value),style:{width:"100%",padding:`${f.spacing.sm} ${f.spacing.sm} ${f.spacing.sm} 40px`,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,outline:"none",transition:"border-color 0.2s"},onFocus:E=>{E.target.style.borderColor=f.colors.accent.primary},onBlur:E=>{E.target.style.borderColor=f.colors.neutral[300]}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsxs("button",{onClick:j,disabled:t,style:{padding:`${f.spacing.xs} ${f.spacing.sm}`,border:"none",backgroundColor:"transparent",color:t?f.colors.neutral[400]:f.colors.neutral[600],cursor:t?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:f.spacing.xs,fontSize:f.typography.fontSize.sm,fontWeight:"500",borderRadius:f.borderRadius.sm,transition:"all 0.2s ease",opacity:t?.6:1},title:"Refresh templates",onMouseEnter:E=>{t||(E.currentTarget.style.backgroundColor=f.colors.neutral[100],E.currentTarget.style.color=f.colors.neutral[700])},onMouseLeave:E=>{t||(E.currentTarget.style.backgroundColor="transparent",E.currentTarget.style.color=f.colors.neutral[600])},children:[s.jsx(An,{size:16,style:{animation:t?"spin 1s linear infinite":"none"}}),"Refresh"]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.xs},children:[s.jsxs("button",{onClick:()=>_("name"),style:{padding:`${f.spacing.xs} ${f.spacing.sm}`,border:"none",backgroundColor:l==="name"?f.colors.neutral[100]:"transparent",color:l==="name"?f.colors.neutral[900]:f.colors.neutral[600],cursor:"pointer",fontSize:f.typography.fontSize.sm,fontWeight:l==="name"?"600":"500",display:"flex",alignItems:"center",gap:f.spacing.xs,borderRadius:f.borderRadius.sm,transition:"all 0.2s ease"},onMouseEnter:E=>{l!=="name"&&(E.currentTarget.style.backgroundColor=f.colors.neutral[50],E.currentTarget.style.color=f.colors.neutral[700])},onMouseLeave:E=>{l!=="name"&&(E.currentTarget.style.backgroundColor="transparent",E.currentTarget.style.color=f.colors.neutral[600])},children:["Name ",A("name")]}),s.jsxs("button",{onClick:()=>_("lastModified"),style:{padding:`${f.spacing.xs} ${f.spacing.sm}`,border:"none",backgroundColor:l==="lastModified"?f.colors.neutral[100]:"transparent",color:l==="lastModified"?f.colors.neutral[900]:f.colors.neutral[600],cursor:"pointer",fontSize:f.typography.fontSize.sm,fontWeight:l==="lastModified"?"600":"500",display:"flex",alignItems:"center",gap:f.spacing.xs,borderRadius:f.borderRadius.sm,transition:"all 0.2s ease"},onMouseEnter:E=>{l!=="lastModified"&&(E.currentTarget.style.backgroundColor=f.colors.neutral[50],E.currentTarget.style.color=f.colors.neutral[700])},onMouseLeave:E=>{l!=="lastModified"&&(E.currentTarget.style.backgroundColor="transparent",E.currentTarget.style.color=f.colors.neutral[600])},children:["Modified ",A("lastModified")]})]})]})]}),e.length===0?s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{textAlign:"center",padding:f.spacing.xl,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,border:`2px dashed ${f.colors.neutral[300]}`},children:[s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx(qi,{size:48,color:f.colors.neutral[400],style:{marginBottom:f.spacing.md}}),s.jsx(wr,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.sm},children:"No Templates Yet"}),s.jsx(Ct,{style:{color:f.colors.neutral[500]},children:"Create your first ATS-optimized resume template to get started."})]}),s.jsxs(ot,{variant:"primary",onClick:g,children:[s.jsx(qi,{size:16,style:{marginRight:f.spacing.xs}}),"Create Your First Template"]})]}):s.jsx(jt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:f.spacing.lg},children:e.map(E=>s.jsx(KQ,{template:E,onEdit:x,onDelete:y,onDownload:w},E.id))})]})},JQ=()=>new Promise((e,t)=>{if(window.html2canvas){e(window.html2canvas);return}const r=document.createElement("script");r.src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js",r.onload=()=>{window.html2canvas?e(window.html2canvas):t(new Error("html2canvas failed to load"))},r.onerror=()=>t(new Error("Failed to load html2canvas")),document.head.appendChild(r)}),ZQ=e=>new Promise(t=>{const r=document.createElement("canvas");r.width=400,r.height=520;const n=r.getContext("2d");if(!n){t(E8(e));return}const l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",l.style.top="0",l.style.width="800px",l.style.height="1100px",l.style.background="white",l.style.padding="40px",l.style.boxSizing="border-box",l.style.overflow="hidden",l.style.fontSize="14px",l.style.lineHeight="1.5",l.style.fontFamily="Arial, sans-serif",l.style.color="#333",l.innerHTML=e,document.body.appendChild(l),setTimeout(async()=>{try{const d=await(await JQ())(l,{width:800,height:1100,scale:1,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1});n.drawImage(d,0,0,400,520),document.body.removeChild(l);const p=r.toDataURL("image/png",1);t(p)}catch{try{n.fillStyle="#ffffff",n.fillRect(0,0,400,520),n.strokeStyle="#e5e7eb",n.lineWidth=1,n.strokeRect(0,0,400,520);const p=(l.textContent||l.innerText||"").split(`
`).filter(y=>y.trim()).slice(0,20);n.font="20px Arial, sans-serif",n.fillStyle="#333333";let g=40;p.forEach((y,w)=>{const j=y.trim();if(!j)return;w===0&&j.length<50?(n.font="bold 24px Arial, sans-serif",n.fillStyle="#1f2937"):j.includes("@")||j.match(/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/)?(n.font="16px Arial, sans-serif",n.fillStyle="#6b7280"):j.length<30&&(j.includes("Experience")||j.includes("Education")||j.includes("Skills"))?(n.font="bold 20px Arial, sans-serif",n.fillStyle="#374151"):(n.font="18px Arial, sans-serif",n.fillStyle="#4b5563");let _=j;_.length>35&&(_=_.substring(0,32)+"..."),n.fillText(_,30,g),g+=24,g>480}),document.body.removeChild(l);const x=r.toDataURL("image/png",1);t(x)}catch{document.body.removeChild(l),t(E8(e))}}},1500)}),E8=e=>{const t=document.createElement("div");t.innerHTML=e;const n=(t.textContent||t.innerText||"").split(`
`).filter(g=>g.trim()).slice(0,15),l=/^[A-Z][a-z]+ [A-Z][a-z]+/,i=/\S+@\S+\.\S+/,d=/[\d\-\(\)\+\s]{10,}/,p=`
    <svg width="200" height="260" viewBox="0 0 200 260" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="260" fill="#FFFFFF" stroke="#E5E7EB"/>
      <g transform="translate(15, 15)">
        ${n.map((g,x)=>{const y=g.trim();if(!y)return"";let w=Math.min(170,Math.max(60,y.length*1.8)),j=10,_="#9CA3AF";return x===0&&l.test(y)?(w=Math.min(170,y.length*2.5),j=14,_="#1F2937"):i.test(y)||d.test(y)?(w=Math.min(170,y.length*1.5),j=8,_="#6B7280"):y.length<30&&(y.includes("Experience")||y.includes("Education")||y.includes("Skills"))?(w=Math.min(170,y.length*2),j=12,_="#374151"):y.length>50&&(w=160,j=8,_="#9CA3AF"),`<rect y="${x*16}" width="${w}" height="${j}" fill="${_}" rx="1"/>`}).join("")}

        <!-- Add some visual structure -->
        <line x1="0" y1="45" x2="170" y2="45" stroke="#E5E7EB" stroke-width="1"/>
        <line x1="0" y1="120" x2="170" y2="120" stroke="#E5E7EB" stroke-width="1"/>
      </g>
    </svg>
  `;return`data:image/svg+xml;base64,${btoa(p)}`},XQ=()=>{const[e,t]=F.useState({templates:[],loading:!0,error:null,searchTerm:"",sortBy:"lastModified",sortOrder:"desc"}),r=F.useCallback(async w=>{try{return await ZQ(w)}catch(j){return console.warn("Failed to generate HTML preview, using fallback:",j),n(w)}},[]),n=F.useCallback(w=>{const j=document.createElement("div");j.innerHTML=w;const E=`
      <svg width="200" height="260" viewBox="0 0 200 260" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="200" height="260" fill="#FFFFFF" stroke="#D1D5DB" stroke-width="1"/>

        <!-- Header section -->
        <rect x="15" y="15" width="170" height="2" fill="#E5E7EB"/>

        <!-- Content based on actual HTML -->
        ${(j.textContent||j.innerText||"").split(`
`).filter(P=>P.trim()).slice(0,18).map((P,z)=>{const B=P.trim();if(!B)return"";let D=Math.min(170,Math.max(40,B.length*1.2)),U=8,G="#9CA3AF";const $=15;let re=25+z*12;return z===0&&B.length<50?(D=Math.min(170,B.length*1.8),U=12,G="#1F2937"):B.includes("@")||B.match(/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/)?(D=Math.min(170,B.length*1.1),U=6,G="#6B7280"):B.length<25&&(B.toLowerCase().includes("experience")||B.toLowerCase().includes("education")||B.toLowerCase().includes("skills")||B.toLowerCase().includes("summary"))?(D=Math.min(170,B.length*1.5),U=10,G="#374151",re+=5):B.length>60&&(D=160,U=6,G="#9CA3AF"),`<rect x="${$}" y="${re}" width="${D}" height="${U}" fill="${G}" rx="1"/>`}).join("")}

        <!-- Add some visual structure lines -->
        <line x1="15" y1="50" x2="185" y2="50" stroke="#F3F4F6" stroke-width="1"/>
        <line x1="15" y1="120" x2="185" y2="120" stroke="#F3F4F6" stroke-width="1"/>
        <line x1="15" y1="180" x2="185" y2="180" stroke="#F3F4F6" stroke-width="1"/>

        <!-- Add some bullet points for lists -->
        <circle cx="20" cy="95" r="1.5" fill="#9CA3AF"/>
        <circle cx="20" cy="107" r="1.5" fill="#9CA3AF"/>
        <circle cx="20" cy="155" r="1.5" fill="#9CA3AF"/>
        <circle cx="20" cy="167" r="1.5" fill="#9CA3AF"/>
      </svg>
    `;return`data:image/svg+xml;base64,${btoa(E)}`},[]),l=F.useCallback(w=>{const j=document.createElement("div");j.innerHTML=w;const E=(j.textContent||j.innerText||"").split(`
`).filter(P=>P.trim())[0]?.trim();return E&&E.length<50?E:"Resume Template"},[]),i=F.useCallback(w=>{const j=w.original_html&&w.original_html.trim()!=="",_=w.additional_experience&&w.additional_experience.trim()!=="",A=w.job_info_for_test&&w.job_info_for_test.trim()!=="";return w.example_ats_resume_id&&w.example_ats_resume_id.trim()!==""?"completed":A||_||j?"in-progress":"draft"},[]),d=F.useCallback(async()=>{t(w=>({...w,loading:!0,error:null}));try{const w=await ln.listTemplates();if(!w.success)throw new Error("Failed to fetch templates from API");if(w.templates&&w.templates.length>0){const j=await Promise.all(w.templates.map(async(_,A)=>{const E=_.original_html||_.html||"",P=_.name||l(E),z=await r(E),B=i(_);return{id:_.id||`template-${A}`,name:P,filename:_.filename||`${P.toLowerCase().replace(/\s+/g,"_")}.html`,htmlContent:E,lastModified:_.updated_at||new Date().toISOString(),createdAt:_.created_at||new Date().toISOString(),updatedAt:_.updated_at||new Date().toISOString(),previewImage:z,size:new Blob([E]).size,status:B}}));t(_=>({..._,templates:j,loading:!1}))}else try{const j=await ln.getTemplate();if(j.success&&j.html){const _=l(j.html),A=await r(j.html),E={id:"current-template",name:_,filename:`${_.toLowerCase().replace(/\s+/g,"_")}.html`,htmlContent:j.html,lastModified:j.updated_at||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:j.updated_at||new Date().toISOString(),previewImage:A,size:new Blob([j.html]).size};t(P=>({...P,templates:[E],loading:!1}))}else t(_=>({..._,templates:[],loading:!1}))}catch{console.log("No single template found, showing empty state"),t(_=>({..._,templates:[],loading:!1}))}}catch(w){console.error("Failed to load templates:",w),t(j=>({...j,loading:!1,error:"Failed to load templates. Please try again."}))}},[l,r]),p=F.useCallback(w=>{t(j=>({...j,searchTerm:w}))},[]),g=F.useCallback((w,j)=>{t(_=>({..._,sortBy:w,sortOrder:j}))},[]),x=F.useCallback(async w=>{try{if((await ln.deleteTemplate()).success)t(_=>({..._,templates:_.templates.filter(A=>A.id!==w)}));else throw new Error("Delete operation failed")}catch(j){console.error("Failed to delete template:",j),t(_=>({..._,error:"Failed to delete template. Please try again."}))}},[]),y=F.useCallback(()=>{let w=e.templates;if(e.searchTerm){const j=e.searchTerm.toLowerCase();w=w.filter(_=>_.name.toLowerCase().includes(j)||_.filename.toLowerCase().includes(j))}return w.sort((j,_)=>{let A,E;switch(e.sortBy){case"name":A=j.name.toLowerCase(),E=_.name.toLowerCase();break;case"lastModified":A=new Date(j.lastModified).getTime(),E=new Date(_.lastModified).getTime();break;case"createdAt":A=new Date(j.createdAt).getTime(),E=new Date(_.createdAt).getTime();break;default:return 0}return e.sortOrder==="asc"?A<E?-1:A>E?1:0:A>E?-1:A<E?1:0}),w},[e.templates,e.searchTerm,e.sortBy,e.sortOrder]);return F.useEffect(()=>{d()},[d]),{...e,filteredTemplates:y(),loadTemplates:d,searchTemplates:p,sortTemplates:g,deleteTemplate:x}},R1=5,QQ=e=>{const[t,r]=F.useState({currentStep:1,completedSteps:new Set,templateId:e}),[n,l]=F.useState(!!e);F.useEffect(()=>{e&&(async()=>{l(!0);try{const _=await ln.getTemplate(e);if(console.log("Template API response:",_),_.success&&_.template){const A=_.template;console.log("Template data:",A);const E=new Set;let P=1;console.log("Checking step 1 - original_html:",A.original_html?"EXISTS":"MISSING"),A.original_html&&A.original_html.trim()!==""&&(E.add(1),P=2,console.log("Step 1 completed - file uploaded"),E.add(2),P=3,console.log("Step 2 completed - HTML cloned"),console.log("Checking step 3 - additional_experience:",A.additional_experience?"EXISTS":"MISSING"),A.additional_experience&&A.additional_experience.trim()!==""&&(E.add(3),P=4,console.log("Step 3 completed - additional experience added"),console.log("Checking step 4 - job_info_for_test:",A.job_info_for_test?"EXISTS":"MISSING"),A.job_info_for_test&&A.job_info_for_test.trim()!==""?(E.add(4),console.log("Step 4 completed - job info added"),console.log("Checking step 5 - example_ats_resume_id:",A.example_ats_resume_id?"EXISTS":"MISSING"),A.example_ats_resume_id?(E.add(5),P=5,console.log("Step 5 completed - resume generated and optimization done")):(P=4,console.log("Step 5 not completed - staying on step 4 to generate resume"))):P=4)),console.log("Final wizard state:",{completedSteps:Array.from(E),currentStep:P}),r(z=>({...z,templateName:A.name||"",uploadedHtml:A.original_html||"",editedHtml:A.original_html||"",additionalExperience:A.additional_experience||"",jobInfo:{url:A.job_url_for_test||"",description:A.job_info_for_test||""},exampleAtsResumeId:A.example_ats_resume_id||"",completedSteps:E,currentStep:P}))}}catch(_){console.error("Failed to load existing template:",_)}finally{l(!1)}})()},[e]);const i=F.useCallback(j=>{r(_=>({..._,...j}))},[]),d=F.useCallback(j=>{switch(j){case 1:{const _=!!t.uploadedHtml;return{isValid:_,canProceed:_,errorMessage:_?void 0:"Please upload a resume file"}}case 2:return{isValid:!!t.editedHtml,canProceed:!!t.editedHtml,errorMessage:t.editedHtml?void 0:"Please edit your resume"};case 3:{const _=!!t.additionalExperience&&t.additionalExperience.trim()!=="";return{isValid:_,canProceed:_,errorMessage:_?void 0:"Please add additional experience or skills"}}case 4:{const _=!!t.jobInfo?.description&&t.jobInfo.description.trim()!=="";return{isValid:_,canProceed:_,errorMessage:_?void 0:"Please provide job information for testing"}}case 5:return{isValid:!0,canProceed:!0,errorMessage:void 0};default:return{isValid:!1,canProceed:!1,errorMessage:"Invalid step"}}},[t]),p=F.useCallback(j=>{if(j<1||j>R1)return;const _=d(t.currentStep);(j<=t.currentStep||j===t.currentStep+1&&_.canProceed||t.completedSteps.has(j))&&r(E=>({...E,currentStep:j}))},[t.currentStep,d,t.completedSteps]),g=F.useCallback(()=>{if(d(t.currentStep).canProceed&&t.currentStep<R1){const _=new Set(t.completedSteps);_.add(t.currentStep),r(A=>({...A,currentStep:A.currentStep+1,completedSteps:_}))}},[t.currentStep,t.completedSteps,d]),x=F.useCallback(()=>{t.currentStep>1&&r(j=>({...j,currentStep:j.currentStep-1}))},[t.currentStep]),y=F.useCallback(()=>{const j=new Set([1,2,3,4,5]);r(_=>({..._,completedSteps:j}))},[]),w=F.useCallback(()=>{r({currentStep:1,completedSteps:new Set,templateId:e})},[e]);return{wizardState:t,updateState:i,validateStep:d,goToStep:p,nextStep:g,previousStep:x,completeWizard:y,resetWizard:w,totalSteps:R1,isLoading:n}},eee=["Upload","Edit Clone","Enrich Exp","Test","Result"],tee=({currentStep:e,completedSteps:t,totalSteps:r,onStepClick:n})=>s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm},children:Array.from({length:r},(l,i)=>{const d=i+1,p=t.has(d),g=d===e,x=n&&(p||d<=e);return s.jsxs(Vt.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:x?"pointer":"default"},onClick:()=>x&&n?.(d),children:[s.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:p?f.colors.secondary.main:g?f.colors.primary.main:"transparent",color:p?f.colors.neutral[600]:g?f.colors.primary.text:f.colors.neutral[400],fontWeight:600,fontSize:f.typography.fontSize.sm,border:p?`2px solid ${f.colors.neutral[300]}`:g?`2px solid ${f.colors.primary.main}`:`2px dotted ${f.colors.neutral[300]}`,transition:"all 0.2s ease"},children:p?s.jsx(Ia,{size:16}):d}),s.jsx("span",{style:{marginTop:f.spacing.xs,fontSize:f.typography.fontSize.xxs,color:g?f.colors.primary.main:p?f.colors.neutral[600]:f.colors.neutral[400],fontWeight:g?600:400,textAlign:"center",maxWidth:"60px",lineHeight:"1.2"},children:eee[i]})]}),d<r&&s.jsx("div",{style:{width:"40px",height:"2px",backgroundColor:t.has(d)?f.colors.neutral[300]:f.colors.neutral[200],margin:`0 ${f.spacing.xs}`,marginTop:"-16px",transition:"background-color 0.2s ease"}})]},d)})}),ree=({currentStep:e,totalSteps:t,validation:r,onPrevious:n,onNext:l,onComplete:i,isLoading:d=!1,progressIndicator:p,showCompleteOption:g=!1})=>{const x=e===1,y=e===t;return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:f.spacing.lg,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsx("div",{children:!x&&s.jsxs(ot,{variant:"secondary",onClick:n,disabled:d,children:[s.jsx(Fd,{size:16}),"Previous"]})}),s.jsx("div",{children:p}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[g&&!y&&s.jsx("button",{onClick:i,disabled:d,style:{background:"none",border:"none",color:f.colors.neutral[600],fontSize:f.typography.fontSize.base,cursor:d?"not-allowed":"pointer",textDecoration:"underline",padding:f.spacing.sm},children:d?"Completing...":"Complete Template"}),y?s.jsx(ot,{variant:"primary",onClick:i,disabled:!r.canProceed||d,children:"Complete Template"}):s.jsxs(ot,{variant:"primary",onClick:l,disabled:!r.canProceed||d,children:["Next",s.jsx(za,{size:16})]})]})]})},nee=({wizardState:e,onUpdateState:t,onNext:r})=>{const[n,l]=F.useState(!1),[i,d]=F.useState(!1),p=F.useRef(null),g=()=>p.current?.click(),x=async _=>{if(_){l(!0);try{const A=await ln.cloneHtmlFromPdf(_);if(A?.success&&A.html&&(t({uploadedFile:_,uploadedHtml:A.html,editedHtml:A.html}),e.templateId)){const E={id:e.templateId,original_html:A.html,original_images:A.original_images||[],original_file_size:_.size,original_resume_text:A.original_resume_text};await ln.saveTemplate(E)}}catch(A){console.error("Upload failed:",A)}finally{l(!1)}}},y=async _=>{const A=_.target.files?.[0];A&&await x(A)},w=async _=>{_.preventDefault(),d(!1);const A=_.dataTransfer.files?.[0];A&&A.type==="application/pdf"&&await x(A)},j=!!e.uploadedHtml;return s.jsxs("div",{style:{padding:f.spacing.xl,maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:[j?s.jsxs("div",{style:{padding:f.spacing.xl,marginBottom:f.spacing.xl},children:[s.jsx(Mi,{size:48,style:{marginBottom:f.spacing.md,color:f.colors.neutral[700]}}),s.jsx(wr,{style:{marginBottom:f.spacing.sm,color:f.colors.neutral[800]},children:"Resume Uploaded Successfully!"}),s.jsxs(Ct,{style:{color:f.colors.neutral[600]},children:["File: ",e.uploadedFile?.name]}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginTop:f.spacing.sm},children:"Your resume has been converted and is ready for editing."})]}):s.jsx("div",{className:"a4-dropzone-container",onClick:n?void 0:g,onDragOver:_=>{_.preventDefault(),n||d(!0)},onDragLeave:()=>d(!1),onDrop:w,children:s.jsx("div",{className:`a4-dropzone ${i?"dragover":""} ${n?"uploading":""}`,children:n?s.jsxs("div",{className:"upload-loading-container",children:[s.jsxs("div",{className:"a4-skeleton",children:[s.jsx("div",{className:"a4-header skeleton-shimmer"}),s.jsx("div",{className:"a4-line wide skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"}),s.jsx("div",{className:"a4-subheader skeleton-shimmer"}),s.jsx("div",{className:"a4-line wide skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"}),s.jsx("div",{className:"a4-line skeleton-shimmer"})]}),s.jsx("div",{className:"upload-loading-text",children:"AI is analyzing your resume..."}),s.jsx("div",{className:"upload-loading-subtext",children:"This may take up to 1 minute"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"a4-skeleton",children:[s.jsx("div",{className:"a4-header"}),s.jsx("div",{className:"a4-line wide"}),s.jsx("div",{className:"a4-line"}),s.jsx("div",{className:"a4-line"}),s.jsx("div",{className:"a4-line"}),s.jsx("div",{className:"a4-subheader"}),s.jsx("div",{className:"a4-line wide"}),s.jsx("div",{className:"a4-line"}),s.jsx("div",{className:"a4-line"}),s.jsx("div",{className:"a4-line"})]}),s.jsx("div",{className:"a4-overlay-text",children:"Click or drag and drop your current PDF resume."})]})})}),s.jsx("input",{type:"file",ref:p,style:{display:"none"},accept:"application/pdf",onChange:y})]})},iee=({wizardState:e,onUpdateState:t,onNext:r})=>{const[n,l]=F.useState(e.editedHtml||""),[i,d]=F.useState(""),[p,g]=F.useState(!1),[x,y]=F.useState(!1),[w,j]=F.useState("idle"),[_,A]=F.useState(""),E=F.useRef(null);F.useEffect(()=>{e.editedHtml&&n!==e.editedHtml&&l(e.editedHtml)},[e.editedHtml,n]);const P=D=>{l(D),t({editedHtml:D})};F.useEffect(()=>{if(!(!n||!e.templateId))return E.current&&window.clearTimeout(E.current),j("saving"),E.current=window.setTimeout(async()=>{try{const D=await ln.saveTemplate({id:e.templateId,name:e.templateName||"New ATS Template",original_html:e.uploadedHtml||n});D?.success||D?.id?(j("saved"),A(new Date().toLocaleString())):j("error")}catch{j("error")}},800),()=>{E.current&&window.clearTimeout(E.current)}},[n,e.templateId,e.templateName,e.uploadedHtml,e.additionalExperience,e.jobInfo]);const z=async()=>{if(!(!n||!i.trim())){g(!0);try{const D=await ln.generateOptimized({html:n,job_description:i});D?.success&&D.html&&P(D.html)}catch(D){console.error(D)}finally{g(!1)}}},B=async()=>{if(!n){alert("No content available to export");return}y(!0);try{const D=new Date().toISOString().slice(0,19).replace(/[:-]/g,""),U=`${e.templateName||"resume"}-${D}`,G=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:n,filename:U})});if(!G.ok)throw new Error(`PDF export failed: ${G.statusText}`);const $=await G.json();if($.success&&$.pdf_path)if(window.electronAPI?.openFile){const re=await window.electronAPI.openFile($.pdf_path);if(re.success)console.log("PDF exported and opened successfully:",$.filename);else{console.error("Failed to open PDF:",re.error);const Q=`${rr}/api/pdf/download/${encodeURIComponent($.pdf_path)}`;window.open(Q,"_blank")}}else{const re=`${rr}/api/pdf/download/${encodeURIComponent($.pdf_path)}`,Q=document.createElement("a");Q.href=re,Q.download=$.filename,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),console.log("PDF downloaded successfully:",$.filename)}else throw new Error("PDF export failed: Invalid response")}catch(D){console.error("Failed to export PDF:",D),alert("Failed to export PDF. Please try again.")}finally{y(!1)}};return s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:f.spacing.sm},children:[s.jsxs("div",{children:[s.jsx(wr,{style:{marginBottom:f.spacing.sm},children:"Edit Your Resume"}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Review and edit your resume content. Use the AI prompt below to make targeted improvements."})]}),s.jsxs(ot,{variant:"secondary",onClick:B,disabled:x||!n,style:{backgroundColor:f.colors.accent.success,color:f.colors.neutral.white,border:"none"},children:[s.jsx(Pa,{size:16}),x?"Exporting...":"Export PDF"]})]}),s.jsxs("div",{style:{marginTop:f.spacing.sm,fontSize:f.typography.fontSize.xs,color:w==="error"?f.colors.accent.danger:f.colors.neutral[500]},children:[w==="saving"&&s.jsx("span",{children:"Saving..."}),w==="saved"&&s.jsxs("span",{children:["Saved",_?`  ${_}`:""]}),w==="error"&&s.jsx("span",{children:"Save failed"})]})]}),s.jsxs("div",{style:{flex:1,display:"flex",minHeight:0},children:[s.jsx(Yd,{value:n,onChange:P,title:"HTML Source",placeholder:"Enter your HTML content here...",style:{width:"50%",borderRight:`1px solid ${f.colors.neutral[200]}`}}),s.jsxs("div",{style:{width:"50%",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700]},children:"Preview"}),s.jsx("div",{style:{flex:1,padding:f.spacing.md,background:f.colors.neutral.white,overflow:"auto"},children:s.jsx("iframe",{srcDoc:n,style:{width:"100%",height:"100%",border:"none",background:f.colors.neutral.white},title:"Resume Preview"})})]})]}),s.jsx("div",{style:{padding:f.spacing.lg,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.neutral[50]},children:s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("input",{value:i,onChange:D=>d(D.target.value),onKeyDown:D=>{D.key==="Enter"&&!p&&i.trim()&&(D.preventDefault(),z())},placeholder:"Prompt to optimize resume (e.g., 'Make it more technical', 'Add more action verbs')",style:{flex:1,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,padding:`${f.spacing.sm} ${f.spacing.md}`,fontSize:f.typography.fontSize.sm,outline:"none"}}),s.jsxs(ot,{variant:"primary",onClick:z,disabled:p||!i.trim(),children:[s.jsx(UR,{size:16}),p?"Optimizing...":"Apply Prompt"]})]})})]})},see=({wizardState:e,onUpdateState:t,onNext:r,onComplete:n})=>{const[l,i]=F.useState(e.additionalExperience||""),[d,p]=F.useState("idle"),g=F.useRef("");F.useEffect(()=>{g.current=e.additionalExperience||""},[]),F.useEffect(()=>{const A=setTimeout(()=>{l!==g.current&&x(!1)},1e3);return()=>clearTimeout(A)},[l]);const x=async(A=!1)=>{p("saving");try{t({additionalExperience:l}),e.templateId&&await ln.saveTemplate({id:e.templateId,name:e.templateName||"New ATS Template",original_html:e.uploadedHtml||"",additional_experience:l,job_info_for_test:e.jobInfo?.description||"",job_url_for_test:""}),p("saved"),g.current=l,A&&r()}catch(E){console.error("Failed to save additional experience:",E),p("idle")}finally{}},y=l.length,w=2e3,j=y>w*.8,_=y>w;return s.jsxs("div",{style:{padding:f.spacing.xl,maxWidth:"800px",margin:"0 auto",height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:f.spacing.xl},children:[s.jsx(wr,{style:{marginBottom:f.spacing.md},children:"Add Additional Experience"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.lg},children:"Add any additional experiences, skills, or achievements not already included in your uploaded resume. This information will help us create customized resumes tailored to specific job applications. For ethical reasons, our AI will never invent details, and your resume will remain unchanged if no additional information is provided."})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.sm},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},children:"Additional Experience & Skills"}),s.jsxs(ir,{style:{color:_?f.colors.accent.error:j?f.colors.accent.warning:f.colors.neutral[500]},children:[y,"/",w," characters"]})]}),s.jsx("textarea",{value:l,onChange:A=>i(A.target.value),placeholder:`Examples:\r
 Freelance projects and consulting work\r
 Volunteer experiences and leadership roles\r
 Additional certifications or training\r
 Side projects and personal initiatives\r
 Awards, publications, or speaking engagements\r
 Technical skills not mentioned in your resume\r
 Languages and proficiency levels\r
 Any other relevant experience...`,style:{flex:1,minHeight:"300px",padding:f.spacing.md,border:`2px solid ${_?f.colors.accent.error:f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,lineHeight:"1.6",fontFamily:f.typography.fontFamily,resize:"none",outline:"none",transition:"border-color 0.2s ease"},onFocus:A=>{_||(A.target.style.borderColor=f.colors.primary.main)},onBlur:A=>{A.target.style.borderColor=_?f.colors.accent.error:f.colors.neutral[300]}}),d==="saving"&&s.jsx(ir,{style:{color:f.colors.neutral[500],marginTop:f.spacing.xs},children:"Saving..."}),d==="saved"&&s.jsx(ir,{style:{color:f.colors.accent.success,marginTop:f.spacing.xs},children:" Saved automatically"})]})]})},oee=({wizardState:e,onUpdateState:t,onNext:r,onComplete:n})=>{const[l,i]=F.useState(e.jobInfo?.description||""),[d,p]=F.useState("idle"),g=F.useRef({description:""}),[x,y]=F.useState(null),[w,j]=F.useState(0),[_,A]=F.useState(!0),E=F.useCallback(async()=>{try{A(!0);const Q=await ln.listATSResumes();Q?.success&&(y(Q.ai_resume_limit??null),j(Q.ai_resume_usage??0))}catch(Q){console.error("Failed to fetch AI resume limit info:",Q)}finally{A(!1)}},[]);F.useEffect(()=>{e.exampleAtsResumeId?E():A(!1)},[e.exampleAtsResumeId,E]);const P=x!==null&&w>=x,z=()=>{window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:"AI_RESUME_LIMIT_REACHED",message:`You have reached the limit of ${x} AI resumes for your plan.`,current_tier:"free",call_to_action:"Upgrade your plan to generate more AI resumes.",limit:x,current_usage:w}}}))};F.useEffect(()=>{g.current={description:e.jobInfo?.description||""}},[]),F.useEffect(()=>{e.jobInfo?.description&&i(e.jobInfo.description)},[e.jobInfo?.description]),F.useEffect(()=>{const Q=setTimeout(()=>{l!==g.current.description&&l.trim()&&B(!1)},1e3);return()=>clearTimeout(Q)},[l]);const B=async(Q=!1)=>{p("saving");try{const H={description:l.trim()};t({jobInfo:H}),e.templateId&&await ln.saveTemplate({id:e.templateId,name:e.templateName||"New ATS Template",original_html:e.uploadedHtml||"",additional_experience:e.additionalExperience||"",job_info_for_test:l.trim(),job_url_for_test:""}),p("saved"),g.current={description:l.trim()},Q&&r()}catch(H){console.error("Failed to save job information:",H),p("idle")}finally{}},D=async()=>{const Q="https://www.linkedin.com/jobs/search";if(window.electronAPI?.openExternalUrl)try{const H=await window.electronAPI.openExternalUrl(Q);H.success||(console.error("Failed to open LinkedIn URL:",H.error),window.open(Q,"_blank","noopener,noreferrer"))}catch(H){console.error("Error opening external URL:",H),window.open(Q,"_blank","noopener,noreferrer")}else window.open(Q,"_blank","noopener,noreferrer")},U=l.length,G=5e3,$=U>G*.8,re=U>G;return s.jsx(s.Fragment,{children:s.jsxs("div",{style:{padding:f.spacing.xl,maxWidth:"800px",margin:"0 auto",height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:f.spacing.xl},children:[s.jsx(wr,{style:{marginBottom:f.spacing.md},children:"Job Information"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.lg},children:"Provide job details to test how well your resume matches a specific position. This helps generate an ATS-optimized version tailored to the job requirements."})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xs,gap:f.spacing.sm},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},children:"Job Description"}),s.jsxs(ot,{variant:"secondary",size:"sm",onClick:D,style:{display:"flex",alignItems:"center",gap:f.spacing.xs,fontSize:f.typography.fontSize.xs,padding:`${f.spacing.xs} ${f.spacing.sm}`},children:[s.jsx($i,{size:12}),"Find Jobs"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:f.spacing.sm},children:[s.jsx(ir,{style:{color:f.colors.neutral[600]},children:"Paste the full description so we can align your resume with the exact requirements."}),s.jsxs(ir,{style:{color:re?f.colors.accent.error:$?f.colors.accent.warning:f.colors.neutral[500]},children:[U,"/",G," characters"]})]}),s.jsx("textarea",{value:l,onChange:Q=>i(Q.target.value),placeholder:`Paste the complete job description here, including:\r
 Job title and company\r
 Required qualifications and skills\r
 Job responsibilities and duties\r
 Preferred experience and education\r
 Any specific requirements or keywords...`,style:{flex:1,minHeight:"300px",padding:f.spacing.md,border:`2px solid ${re?f.colors.accent.error:f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,lineHeight:"1.6",fontFamily:f.typography.fontFamily,resize:"none",outline:"none",transition:"border-color 0.2s ease"},onFocus:Q=>{re||(Q.target.style.borderColor=f.colors.accent.info)},onBlur:Q=>{Q.target.style.borderColor=re?f.colors.accent.error:f.colors.neutral[300]}})]}),e.exampleAtsResumeId&&s.jsxs("div",{style:{marginTop:f.spacing.lg,padding:f.spacing.md,backgroundColor:P?"#FEF3C7":f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${P?"#F59E0B":f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("input",{type:"checkbox",id:"regenerate-resume",checked:e.shouldRegenerateResume||!1,disabled:P||_,onChange:Q=>{const H=Q.target.checked;t({shouldRegenerateResume:H})},style:{width:"16px",height:"16px",cursor:P||_?"not-allowed":"pointer",opacity:P||_?.5:1}}),s.jsx("label",{htmlFor:"regenerate-resume",style:{fontSize:f.typography.fontSize.sm,color:P?"#92400E":f.colors.neutral[700],cursor:P||_?"not-allowed":"pointer",fontWeight:"500",opacity:P||_?.7:1},children:"Generate new optimized resume with updated job information"})]}),P?s.jsxs("div",{style:{marginTop:f.spacing.xs,marginLeft:"24px",display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsxs(ir,{style:{color:"#92400E"},children:["AI resume limit reached (",w,"/",x,")."]}),s.jsx("button",{onClick:z,style:{background:"none",border:"none",padding:0,color:f.colors.accent.info,cursor:"pointer",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,textDecoration:"underline"},children:"Upgrade plan"})]}):s.jsxs(ir,{style:{color:f.colors.neutral[600],marginTop:f.spacing.xs,marginLeft:"24px"},children:["Check this to create a new resume version when you proceed to the next step",x!==null&&` (${w}/${x} used)`]})]}),d==="saving"&&s.jsx(ir,{style:{color:f.colors.neutral[500],marginTop:f.spacing.xs},children:"Saving..."}),d==="saved"&&s.jsx(ir,{style:{color:f.colors.accent.success,marginTop:f.spacing.xs},children:" Saved automatically"})]})})},mn=({width:e,height:t,delay:r=0,opacity:n=.5})=>{const[l,i]=F.useState(0);F.useEffect(()=>{const p=setInterval(()=>{i(g=>(g+1)%4)},800+r*100);return()=>clearInterval(p)},[r]);const d=()=>{const p=e.includes("%")?parseFloat(e):100,g=e.includes("%")?"%":"px";switch(l){case 0:return e;case 1:return`${Math.min(p*1.3,100)}${g}`;case 2:return`${Math.max(p*.6,20)}${g}`;case 3:return`${p*.9}${g}`;default:return e}};return s.jsx("div",{style:{height:t,width:d(),backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:n,position:"relative",overflow:"hidden",transition:"width 0.6s ease-in-out",background:`linear-gradient(90deg,
          ${f.colors.neutral[100]} 0%,
          ${f.colors.neutral[200]} 30%,
          ${f.colors.neutral[300]} 60%,
          ${f.colors.neutral[200]} 90%,
          ${f.colors.neutral[100]} 100%)`,backgroundSize:"200% 100%",animation:"shimmer 2.5s ease-in-out infinite",animationDelay:`${r}s`},children:s.jsx("style",{children:`
          @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
          }
        `})})},aee=({wizardState:e,onUpdateState:t,onPrevious:r,onComplete:n})=>{const[l,i]=F.useState(!1),[d,p]=F.useState(""),[g,x]=F.useState(""),[y,w]=F.useState(!1),[j,_]=F.useState("Analyzing ATS requirements..."),[A,E]=F.useState(!1),[P,z]=F.useState("idle"),B=Vt.useRef(null),D=T=>{window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:T.error_code||"AI_RESUME_LIMIT_REACHED",message:T.message||"AI resume limit reached for your plan",current_tier:T.plan_tier||"free",call_to_action:"Upgrade your plan to generate more AI resumes.",limit:T.limit,current_usage:T.current_usage}}}))},U=Vt.useMemo(()=>{const T=e.jobInfo?.description||"";return!A&&!e.shouldRegenerateResume&&T&&T.trim()!==""&&!e.exampleAtsResumeId&&!e.optimizedHtml},[A,e.shouldRegenerateResume,e.jobInfo?.description,e.exampleAtsResumeId,e.optimizedHtml]),G=l||U;F.useEffect(()=>{if(A)return;if(e.templateId&&!e.uploadedHtml&&!e.editedHtml){console.log(" Waiting for wizard state to load completely...");return}(async()=>{const o=e.editedHtml||e.uploadedHtml||"";if(e.shouldRegenerateResume){console.log("Regenerating resume as requested from Step 4"),t({shouldRegenerateResume:!1}),await $(),E(!0);return}if(e.templateId&&!e.initialATSScore)try{console.log("Loading stored ATS analysis data from template...");const{atsTemplateApiService:h}=await Qt(async()=>{const{atsTemplateApiService:b}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:b}},void 0,import.meta.url),v=await h.getTemplate(e.templateId);if(v.success&&v.template){const b=v.template;if(b.example_ats_score!==null&&b.example_ats_score!==void 0){console.log("Found stored ATS analysis data, loading into wizard state...");let M="";if(b.example_ats_resume_id)try{console.log("Loading thinking from ATS resume...");const R=await h.getATSResume(b.example_ats_resume_id);R.success&&R.resume?.thinking&&(M=R.resume.thinking,console.log("Loaded thinking from ATS resume"))}catch(R){console.warn("Failed to load thinking from ATS resume:",R)}t({initialATSScore:b.example_ats_score,initialATSAlignments:b.example_ats_alignments||[],keywordsToAdd:b.example_ats_keyword_to_add_to_resume||[],finalATSScore:b.example_optimized_ats_score,finalATSAlignments:b.example_optimized_ats_alignments||[],atsImprovement:b.example_optimized_ats_score&&b.example_ats_score?b.example_optimized_ats_score-b.example_ats_score:0,missingRequirements:b.example_missing_requirements||[],addressableRequirements:b.example_addressable_requirements||[],skillsCheckThinking:b.example_skills_check_thinking||"",thinking:M||e.thinking||""}),console.log("ATS analysis data loaded successfully")}}}catch(h){console.warn("Failed to load template ATS analysis data:",h)}if(e.exampleAtsResumeId){console.log(" Loading optimized resume from ATS resume table...");try{const{atsTemplateApiService:h}=await Qt(async()=>{const{atsTemplateApiService:M}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:M}},void 0,import.meta.url),v=await h.getATSResume(e.exampleAtsResumeId);console.log(" ATS Resume API Response:",{success:v.success,hasDirectOptimizedHtml:!!v.optimized_html,directOptimizedHtmlLength:v.optimized_html?.length||0,hasResume:!!v.resume,resumeKeys:v.resume?Object.keys(v.resume):[],hasNestedOptimizedHtml:!!v.resume?.optimized_html,nestedOptimizedHtmlLength:v.resume?.optimized_html?.length||0,fullResponse:v});const b=v.optimized_html||v.resume?.optimized_html;if(v.success&&b){console.log(" Loaded optimized resume from ATS resume table"),x(o),p(b),E(!0);return}else console.warn(" ATS resume not found or no optimized HTML, will generate new one")}catch(h){console.warn("Failed to load ATS resume:",h)}}if(e.templateId&&!e.exampleAtsResumeId){console.log(" Checking if template has existing ATS resume data...");try{const{atsTemplateApiService:h}=await Qt(async()=>{const{atsTemplateApiService:b}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:b}},void 0,import.meta.url),v=await h.getTemplate(e.templateId);if(v.success&&v.template?.example_ats_resume_id){console.log("Found existing ATS resume ID in template, loading...");const b=await h.getATSResume(v.template.example_ats_resume_id);if(b.success&&b.resume?.optimized_html){console.log("Loaded existing optimized resume from template"),x(o),p(b.resume.optimized_html),E(!0);return}}}catch(h){console.warn("Failed to load existing ATS resume from template:",h)}}const c=e.jobInfo?.description||"";console.log("Step 5 Debug Info:",{hasExampleAtsResumeId:!!e.exampleAtsResumeId,exampleAtsResumeId:e.exampleAtsResumeId,hasTemplateId:!!e.templateId,templateId:e.templateId,hasOptimizedHtml:!!e.optimizedHtml,optimizedHtmlLength:e.optimizedHtml?.length||0,jobInfo:e.jobInfo,jobDescription:c,jobDescriptionLength:c.length,shouldRegenerateResume:e.shouldRegenerateResume}),c&&c.trim()!==""&&!e.exampleAtsResumeId?(console.log("No resume record found but job info available - auto-generating..."),i(!0),t({isGenerating:!0}),await $(),E(!0)):e.optimizedHtml&&e.optimizedHtml.trim()!==""?(console.log(" Loading existing optimized resume from wizard state"),x(o),p(e.optimizedHtml),E(!0)):(console.log(" No optimized resume and no job info - showing template as-is"),x(o),p(o),E(!0))})()},[e.optimizedHtml,e.editedHtml,e.uploadedHtml,e.shouldRegenerateResume,e.exampleAtsResumeId,e.templateId,A]);const $=async()=>{i(!0),t({isGenerating:!0}),_("Analyzing ATS requirements...");try{const T=e.jobInfo?.description||"",o=e.editedHtml||e.uploadedHtml||"";if(!T||!o){x(o),p(o),i(!1);return}const{atsTemplateApiService:c}=await Qt(async()=>{const{atsTemplateApiService:h}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:h}},void 0,import.meta.url);if(e.templateId){const h=e.additionalExperience||"";_("Calculating ATS score..."),console.log("Step 2: Analyzing ATS score...");const v=await c.analyzeATSScore({template_html:o,job_description:T,additional_skills:h});if(!v.success)throw new Error("Failed to analyze ATS score");console.log("ATS Analysis Result:",{score:v.ats_score,alignments:v.alignments?.length||0,keywords:v.keywords_to_add?.length||0}),_("Analyzing additional skills..."),console.log("Step 3: Checking additional skills for missing requirements...");const b=v.alignments?.filter(S=>S.alignment_score<S.max_score*.8)||[],M=await c.checkAdditionalSkills({missing_requirements:b,additional_skills_and_experience:h});if(!M.success)throw new Error("Failed to check additional skills");console.log("Skills Check Result:",{totalMissing:M.total_missing,totalAddressable:M.total_addressable,thinking:M.thinking}),_("Optimizing resume content..."),console.log("Step 4: Generating optimized resume with addressable requirements...");const R=await c.createATSResume({ats_template_id:e.templateId,template_html:o,job_description:T,job_url:e.jobInfo?.url||"",initial_ats_score:v.ats_score,initial_ats_alignments:v.alignments||[],keywords_to_add:v.keywords_to_add||[],addressable_requirements:M.addressable_requirements||[],skills_check_thinking:M.thinking||"",additional_skills_and_experience:h,missing_requirements:b,total_missing:M.total_missing||0,total_addressable:M.total_addressable||0});if(!R.success&&R.error_code==="AI_RESUME_LIMIT_REACHED"){const S=R;D({error_code:S.error_code,message:S.message,plan_tier:S.plan_tier,limit:S.limit,current_usage:S.current_usage});const a=e.editedHtml||e.uploadedHtml||"";x(a),p(e.optimizedHtml||a);return}if(R.success&&R.resume?.optimized_html){x(o),p(R.resume.optimized_html),_("Validating improvements..."),console.log("Step 4.5: Analyzing final ATS score with optimized resume...");const S=v.alignments?.map(X=>({requirement:X.requirement,original_score:X.alignment_score,original_explanation:X.explanation,max_score:X.max_score}))||[];console.log("Using requirements with original analysis:",S.length);const a=await c.analyzeATSScore({template_html:R.resume.optimized_html,job_description:T,additional_skills:h,requirements_with_analysis:S}),k=a.success?(a.ats_score||0)-(v.ats_score||0):0;console.log("Final ATS Analysis Result:",{finalScore:a.ats_score,initialScore:v.ats_score,improvement:k}),console.log("Final Analysis Result Debug:",{success:a.success,ats_score:a.ats_score,alignmentsCount:a.alignments?.length||0,alignments:a.alignments,fullResult:a}),console.log("Resume created with all ATS analysis data");const N=R.resume?.id||null,L={optimizedHtml:R.resume.optimized_html,exampleAtsResumeId:N,thinking:R.thinking||"",initialATSScore:v.ats_score,initialATSAlignments:v.alignments||[],keywordsToAdd:v.keywords_to_add||[],missingRequirements:b,addressableRequirements:M.addressable_requirements||[],skillsCheckThinking:M.thinking||"",finalATSScore:a.success?a.ats_score:v.ats_score,finalATSAlignments:a.success?a.alignments||[]:[],atsImprovement:k};if(console.log("Wizard State Update Debug:",{finalATSScore:L.finalATSScore,finalATSAlignmentsCount:L.finalATSAlignments?.length||0,finalATSAlignments:L.finalATSAlignments,atsImprovement:L.atsImprovement}),t(L),N&&e.templateId)try{await c.saveTemplate({id:e.templateId,name:e.templateName||"New ATS Template",original_html:e.uploadedHtml||"",additional_experience:e.additionalExperience||"",job_info_for_test:e.jobInfo?.description||"",job_url_for_test:"",example_ats_resume_id:N,example_ats_score:v.ats_score,example_ats_alignments:v.alignments||[],example_ats_keyword_to_add_to_resume:v.keywords_to_add||[],example_optimized_ats_score:a.success?a.ats_score:v.ats_score,example_optimized_ats_alignments:a.success?a.alignments||[]:[],example_missing_requirements:b,example_addressable_requirements:M.addressable_requirements||[],example_skills_check_thinking:M.thinking||""}),console.log("Template updated with resume ID:",N)}catch(X){console.warn("Failed to update template with resume ID:",X)}}else throw new Error("Failed to generate optimized resume")}else throw new Error("Template ID not found")}catch(T){console.error("Failed to generate optimized resume:",T);const o=e.editedHtml||e.uploadedHtml||"";x(o),p(o)}finally{i(!1),t({isGenerating:!1})}};F.useEffect(()=>{if(e.editedHtml||e.uploadedHtml){const T=e.editedHtml||e.uploadedHtml||"";x(T),e.optimizedHtml?p(e.optimizedHtml):p(T)}},[e.editedHtml,e.uploadedHtml,e.optimizedHtml]);const re=async()=>{w(!0);try{const T=d||e.optimizedHtml||"";if(!T)throw new Error("No HTML content available for export");const o=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:T,filename:`${e.templateName||"resume"}-optimized`})});if(!o.ok)throw new Error(`PDF export failed: ${o.statusText}`);const c=await o.json();if(c.success&&c.pdf_path)if(window.electronAPI?.openFile){const h=await window.electronAPI.openFile(c.pdf_path);if(h.success)console.log("PDF exported and opened successfully:",c.filename);else{console.error("Failed to open PDF:",h.error);const v=`${rr}/api/pdf/download/${encodeURIComponent(c.pdf_path)}`;window.open(v,"_blank")}}else{const h=`${rr}/api/pdf/download/${encodeURIComponent(c.pdf_path)}`,v=document.createElement("a");v.href=h,v.download=c.filename,document.body.appendChild(v),v.click(),document.body.removeChild(v),console.log("PDF downloaded successfully:",c.filename)}else throw new Error("PDF export failed: Invalid response")}catch(T){console.error("Failed to export PDF:",T)}finally{w(!1)}};F.useEffect(()=>{if(!(!d||!e.exampleAtsResumeId))return B.current&&window.clearTimeout(B.current),z("saving"),B.current=window.setTimeout(async()=>{try{const{atsTemplateApiService:T}=await Qt(async()=>{const{atsTemplateApiService:c}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:c}},void 0,import.meta.url),o=await T.updateATSResume(e.exampleAtsResumeId,{optimized_html:d});o?.success?(z("saved"),console.log("ATS resume HTML saved successfully")):(z("error"),console.error("Failed to save ATS resume HTML:",o?.message))}catch(T){z("error"),console.error("Error saving ATS resume HTML:",T)}},800),()=>{B.current&&window.clearTimeout(B.current)}},[d,e.exampleAtsResumeId]);const Q=T=>{p(T),t({optimizedHtml:T})},H=g||e.editedHtml||e.uploadedHtml||"",Y=d||H;return G?s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.md},children:[s.jsxs("div",{style:{height:"32px",width:"280px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[s.jsx(An,{size:16,color:f.colors.primary.main,className:"animate-spin"}),s.jsx("span",{style:{marginLeft:f.spacing.sm,fontSize:"14px",color:f.colors.neutral[600]},children:l?j:"Starting ATS optimization..."})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("div",{style:{height:"36px",width:"160px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.5}}),s.jsx("div",{style:{height:"36px",width:"120px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.5}})]})]}),s.jsx("div",{style:{height:"20px",width:"60%",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.lg}}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.md,alignItems:"center",marginBottom:f.spacing.lg},children:[s.jsx("div",{style:{height:"36px",width:"180px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.7}}),s.jsx("div",{style:{height:"36px",width:"140px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.5}})]})]}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsxs("div",{style:{height:"100%",padding:f.spacing.lg,display:"flex",gap:f.spacing.md},children:[s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{marginBottom:f.spacing.sm,height:"20px",width:"80px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm,alignSelf:"center"}}),s.jsxs("div",{style:{flex:1,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral[50],padding:f.spacing.md,display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[s.jsx(mn,{width:"100%",height:"24px",delay:1.4}),s.jsx(mn,{width:"85%",height:"16px",delay:1.6}),s.jsx(mn,{width:"92%",height:"16px",delay:1.8}),s.jsx(mn,{width:"78%",height:"16px",delay:2}),s.jsx(mn,{width:"95%",height:"16px",delay:2.2}),s.jsx(mn,{width:"88%",height:"16px",delay:2.4}),s.jsx(mn,{width:"70%",height:"16px",delay:2.6}),s.jsx(mn,{width:"90%",height:"16px",delay:2.8}),s.jsx(mn,{width:"82%",height:"16px",delay:3}),s.jsx(mn,{width:"75%",height:"16px",delay:3.2})]})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{marginBottom:f.spacing.sm,height:"20px",width:"100px",backgroundColor:f.colors.accent.success,borderRadius:f.borderRadius.sm,alignSelf:"center",opacity:.3}}),s.jsxs("div",{style:{flex:1,border:`2px solid ${f.colors.accent.success}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral[50],padding:f.spacing.md,display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[s.jsx(mn,{width:"100%",height:"24px",delay:1.5}),s.jsx(mn,{width:"88%",height:"16px",delay:1.7}),s.jsx(mn,{width:"95%",height:"16px",delay:1.9}),s.jsx(mn,{width:"72%",height:"16px",delay:2.1}),s.jsx(mn,{width:"90%",height:"16px",delay:2.3}),s.jsx(mn,{width:"85%",height:"16px",delay:2.5}),s.jsx(mn,{width:"78%",height:"16px",delay:2.7}),s.jsx(mn,{width:"93%",height:"16px",delay:2.9}),s.jsx(mn,{width:"80%",height:"16px",delay:3.1}),s.jsx(mn,{width:"87%",height:"16px",delay:3.3})]})]})]})})]}):s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.md},children:[s.jsx(wr,{children:e.exampleAtsResumeId?"ATS Optimization Complete":"ATS Resume Generation"}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,alignItems:"center"},children:[P!=="idle"&&s.jsxs("div",{style:{fontSize:f.typography.fontSize.sm,color:P==="saving"?f.colors.neutral[600]:P==="saved"?f.colors.accent.success:f.colors.accent.error,display:"flex",alignItems:"center",gap:f.spacing.xs},children:[P==="saving"&&s.jsx(An,{size:12,className:"animate-spin"}),P==="saving"&&"Saving...",P==="saved"&&" Saved",P==="error"&&" Save failed"]}),s.jsxs(ot,{variant:e.exampleAtsResumeId?"secondary":"primary",onClick:$,disabled:l,children:[s.jsx(An,{size:16}),l?"Generating...":e.exampleAtsResumeId?"Generate New Resume":"Generate Resume"]}),s.jsxs(ot,{variant:"secondary",onClick:re,disabled:y,children:[s.jsx(Pa,{size:16}),y?"Exporting...":"Export PDF"]})]})]}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.lg},children:e.exampleAtsResumeId?"Your resume has been optimized for ATS systems. Review the changes and make any final adjustments.":'Click "Generate Resume" to create an ATS-optimized version of your resume based on the job information you provided.'})]}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsx(a9,{originalHtml:H,optimizedHtml:Y,onOptimizedHtmlChange:Q,initialATSScore:e.initialATSScore,initialATSAlignments:e.initialATSAlignments,finalATSScore:e.finalATSScore,finalATSAlignments:e.finalATSAlignments,atsImprovement:e.atsImprovement,keywordsToAdd:e.keywordsToAdd,addressableRequirements:e.addressableRequirements,thinking:e.thinking,showThinking:!0,allowEditing:!0,defaultViewMode:"preview"})})]})},lee=()=>s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50],animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff",display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}}),s.jsx("div",{style:{height:"32px",width:"250px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:s.jsxs("div",{style:{flex:1,padding:f.spacing.xl,display:"flex",gap:f.spacing.xl},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{height:"28px",width:"150px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.md}}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,marginBottom:f.spacing.md},children:[s.jsx("div",{style:{height:"32px",width:"80px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{height:"500px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`,padding:f.spacing.md},children:[...Array(20)].map((e,t)=>s.jsx("div",{style:{height:"16px",width:`${Math.random()*60+20}%`,backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}},t))})]}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{height:"28px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.md}}),s.jsxs("div",{style:{height:"500px",backgroundColor:"#ffffff",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`,padding:f.spacing.lg},children:[s.jsx("div",{style:{height:"32px",width:"200px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.md}}),s.jsx("div",{style:{height:"16px",width:"300px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.lg}}),[...Array(4)].map((e,t)=>s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx("div",{style:{height:"20px",width:"150px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),[...Array(3)].map((r,n)=>s.jsx("div",{style:{height:"12px",width:`${Math.random()*40+60}%`,backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}},n))]},t))]})]})]})}),s.jsxs("div",{style:{padding:f.spacing.lg,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center"},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[1,2,3,4,5].map(e=>s.jsxs(Vt.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:f.spacing.xs},children:[s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:e===2?f.colors.primary.main:f.colors.neutral[200]}}),s.jsx("div",{style:{height:"12px",width:"60px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),e<5&&s.jsx("div",{style:{width:"60px",height:"2px",backgroundColor:f.colors.neutral[200],marginBottom:"20px"}})]},e))}),s.jsxs("div",{style:{position:"absolute",right:f.spacing.lg,display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("div",{style:{width:"16px",height:"16px",border:`2px solid ${f.colors.neutral[300]}`,borderTop:`2px solid ${f.colors.primary.main}`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:f.colors.neutral[600],fontSize:f.typography.fontSize.base},children:"Loading template data..."})]})]}),s.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.5;
            }
          }

          @keyframes spin {
            0% {
              transform: rotate(0deg);
            }
            100% {
              transform: rotate(360deg);
            }
          }
        `})]}),cee=({templateId:e,onBack:t})=>{const{wizardState:r,updateState:n,validateStep:l,goToStep:i,nextStep:d,previousStep:p,completeWizard:g,totalSteps:x,isLoading:y}=QQ(e),w=l(r.currentStep),[j,_]=F.useState(!1),[A,E]=F.useState("");F.useEffect(()=>{!e&&!r.templateId&&(async()=>{try{const re=new Date,H=`New ATS Template - ${`${re.getMonth()+1}/${re.getDate()}/${re.getFullYear()}`}`,Y=await ln.saveTemplate({name:H,original_html:"",additional_experience:"",job_info_for_test:"",job_url_for_test:""});n({templateName:H,templateId:Y.id})}catch(re){console.error("Failed to create template:",re);const Q=new Date,Y=`New ATS Template - ${`${Q.getMonth()+1}/${Q.getDate()}/${Q.getFullYear()}`}`;n({templateName:Y})}})()},[e,r.templateId,n]),F.useEffect(()=>{j&&E(r.templateName||"")},[j,r.templateName]);const P=()=>{_(!0)},z=async()=>{if(A.trim()){const $=A.trim();if(n({templateName:$}),r.templateId)try{await ln.saveTemplate({id:r.templateId,name:$,original_html:r.uploadedHtml||"",additional_experience:r.additionalExperience||"",job_info_for_test:r.jobInfo?.description||"",job_url_for_test:""})}catch(re){console.error("Failed to save template name:",re)}}_(!1)},B=()=>{E(r.templateName||""),_(!1)},D=$=>{$.key==="Enter"?z():$.key==="Escape"&&B()},U=async()=>{try{r.templateName&&await ln.saveTemplate({id:r.templateId,name:r.templateName,original_html:r.uploadedHtml,additional_experience:r.additionalExperience,job_info_for_test:r.jobInfo?.description||"",job_url_for_test:""}),g(),t()}catch($){console.error("Failed to save template:",$)}},G=()=>{const $={wizardState:r,onUpdateState:n,onNext:d,onPrevious:p,onComplete:U};switch(r.currentStep){case 1:return s.jsx(nee,{...$});case 2:return s.jsx(iee,{...$});case 3:return s.jsx(see,{...$});case 4:return s.jsx(oee,{...$});case 5:return s.jsx(aee,{...$});default:return s.jsx("div",{children:"Invalid Step"})}};return y?s.jsx(lee,{}):s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral.white},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.neutral.white,display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx(ot,{variant:"ghost",onClick:t,style:{padding:f.spacing.sm,minWidth:"auto"},children:s.jsx(Od,{size:20})}),j?s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("input",{type:"text",value:A,onChange:$=>E($.target.value),onKeyDown:D,onBlur:z,autoFocus:!0,style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.bold,color:f.colors.neutral[900],border:`2px solid ${f.colors.primary.main}`,borderRadius:f.borderRadius.md,padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:f.colors.neutral.white,outline:"none",minWidth:"300px"},placeholder:"Enter template name..."}),s.jsx(ot,{variant:"ghost",onClick:z,style:{padding:f.spacing.xs,minWidth:"auto"},children:s.jsx(Ia,{size:16,color:f.colors.accent.success})}),s.jsx(ot,{variant:"ghost",onClick:B,style:{padding:f.spacing.xs,minWidth:"auto"},children:s.jsx(cn,{size:16,color:f.colors.neutral[500]})})]}):s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,cursor:"pointer"},onClick:P,children:[s.jsx(u_,{children:r.templateName||"New ATS Template"}),s.jsx(ot,{variant:"ghost",onClick:P,style:{padding:f.spacing.xs,minWidth:"auto"},children:s.jsx(Jw,{size:16,color:f.colors.neutral[500]})})]})]}),s.jsx("div",{style:{flex:1,overflow:"auto",backgroundColor:f.colors.neutral[50]},children:G()}),s.jsx(ree,{currentStep:r.currentStep,totalSteps:x,validation:w,onPrevious:p,onNext:d,onComplete:U,isLoading:r.isGenerating||!1,showCompleteOption:!1,progressIndicator:s.jsx(tee,{currentStep:r.currentStep,completedSteps:r.completedSteps,totalSteps:x,onStepClick:i})})]})},uee=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown date",dee=({groups:e,loading:t,error:r,onRefresh:n,onPreviewResume:l,searchTerm:i,onSearch:d,templateFilter:p,onTemplateFilterChange:g,templateOptions:x,showAll:y,onToggleShowAll:w,planTier:j,aiResumeLimit:_,aiResumeUsage:A})=>{if(t)return s.jsx(g9,{});const P=(U=>U?U.charAt(0).toUpperCase()+U.slice(1):null)(j),z=_?`${A} / ${_} AI resumes used`:`${A} AI resumes used`,B=P?`${z}  ${P} plan`:z,D=(U,G)=>{if(U.preventDefault(),U.stopPropagation(),!G)return;const $=window?.electronAPI;$?.openExternalUrl?$.openExternalUrl(G):window.open(G,"_blank","noopener,noreferrer")};return s.jsxs("div",{style:{width:"100%"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xl},children:[s.jsxs("div",{children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:"AI Resumes"}),s.jsx(dr,{style:{color:f.colors.neutral[600]},children:B})]}),s.jsxs(ot,{variant:"secondary",onClick:n,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(An,{size:16}),"Refresh"]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.lg,flexWrap:"wrap"},children:[s.jsxs("div",{style:{position:"relative",flex:1,minWidth:"240px"},children:[s.jsx(Zw,{size:16,style:{position:"absolute",left:f.spacing.sm,top:"50%",transform:"translateY(-50%)",color:f.colors.neutral[500]}}),s.jsx("input",{type:"text",value:i,placeholder:"Search by company, job title, or location...",onChange:U=>d(U.target.value),style:{width:"100%",padding:`${f.spacing.sm} ${f.spacing.md} ${f.spacing.sm} 40px`,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,outline:"none",transition:"border-color 0.2s"},onFocus:U=>{U.currentTarget.style.borderColor=f.colors.accent.primary},onBlur:U=>{U.currentTarget.style.borderColor=f.colors.neutral[300]}})]}),s.jsx("select",{value:p,onChange:U=>g(U.target.value),style:{minWidth:"200px",padding:`${f.spacing.sm} ${f.spacing.md}`,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral.white,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},children:x.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))}),s.jsx(ot,{variant:"text",onClick:w,style:{padding:`${f.spacing.sm} ${f.spacing.md}`,color:f.colors.accent.primary,fontWeight:f.typography.fontWeight.medium},children:y?"Show This Month":"Show All"})]}),r&&s.jsx("div",{style:{marginBottom:f.spacing.lg,padding:f.spacing.md,borderRadius:f.borderRadius.md,backgroundColor:f.colors.accent.error+"15",color:f.colors.accent.error},children:s.jsx(Ct,{children:r})}),e.length===0?s.jsx("div",{style:{border:`1px dashed ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.xl,textAlign:"center",backgroundColor:f.colors.neutral[50]},children:s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"No AI resumes found. Generate a resume from one of your templates to see it here."})}):e.map(U=>s.jsxs("div",{style:{marginBottom:f.spacing.xl,backgroundColor:f.colors.neutral.white,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.lg},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.md},children:s.jsxs("div",{children:[s.jsx(ki,{style:{color:f.colors.neutral[900]},children:U.templateName}),s.jsxs(dr,{style:{color:f.colors.neutral[500]},children:[U.resumes.length," AI resume",U.resumes.length===1?"":"s"]})]})}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.md},children:U.resumes.map(G=>{const $=G.application_history?.job_title,re=G.application_history?.company_name,Q=G.application_history?.location,H=G.application_history?.application_url||G.template?.job_url_for_test||"";return H?s.jsxs("div",{style:{border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.lg,backgroundColor:f.colors.neutral.white,display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:$&&re?`${$} @ ${re}`:"AI Resume"}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,flexWrap:"wrap",color:f.colors.neutral[500]},children:[$&&s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s.jsx(IR,{size:14}),s.jsx(ir,{children:$})]}),Q&&s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s.jsx(NR,{size:14}),s.jsx(ir,{children:Q})]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s.jsx(xs,{size:14}),s.jsxs(ir,{children:["Created ",uee(G.created_at)]})]})]}),s.jsxs("button",{type:"button",onClick:Y=>D(Y,H),style:{marginTop:f.spacing.sm,display:"inline-flex",alignItems:"center",gap:f.spacing.xs,color:f.colors.accent.primary,fontSize:f.typography.fontSize.xs,fontWeight:f.typography.fontWeight.medium,background:"none",border:"none",padding:0,cursor:"pointer"},children:["View job post",s.jsx($i,{size:12})]})]}),s.jsx("button",{type:"button",onClick:()=>l(G),"aria-label":"Download resume PDF",style:{width:40,height:40,borderRadius:f.borderRadius.full,border:`1px solid ${f.colors.neutral[300]}`,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:f.colors.neutral.white,color:f.colors.neutral[600],cursor:"pointer",transition:"background-color 0.2s ease, color 0.2s ease"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor=f.colors.neutral[100],Y.currentTarget.style.color=f.colors.neutral[900]},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor=f.colors.neutral.white,Y.currentTarget.style.color=f.colors.neutral[600]},children:s.jsx(Pa,{size:16})})]},G.id):null})})]},U.templateId||"unassigned"))]})},fee=()=>{const[e,t]=F.useState([]),[r,n]=F.useState(!0),[l,i]=F.useState(null),[d,p]=F.useState(""),[g,x]=F.useState("all"),[y,w]=F.useState(!1),[j,_]=F.useState(null),[A,E]=F.useState(null),[P,z]=F.useState(0),B=F.useCallback(async()=>{n(!0),i(null);try{const $=await ln.listATSResumes();if(!$?.success)throw new Error($?.message||"Failed to load ATS resumes");const re=($.resumes||[]).filter(Q=>Q?.id).map(Q=>({id:Q.id,ats_template_id:Q.ats_template_id,user_id:Q.user_id,optimized_html:Q.optimized_html,thinking:Q.thinking,blob_url:Q.blob_url,application_history_id:Q.application_history_id,created_at:Q.created_at,updated_at:Q.updated_at,template:Q.template||null,application_history:Q.application_history||null})).filter(Q=>!!(Q.application_history?.application_url||Q.template?.job_url_for_test));t(re),_($.plan_tier||null),z($.ai_resume_usage??re.length),$.ai_resume_limit===null||$.ai_resume_limit===void 0?E(null):E($.ai_resume_limit)}catch($){console.error("Failed to load ATS resumes",$),i("Failed to load AI resumes. Please try again.")}finally{n(!1)}},[]);F.useEffect(()=>{B()},[B]);const D=F.useMemo(()=>{const $=d.trim().toLowerCase(),re=new Date,Q=new Date(re.getFullYear(),re.getMonth(),1).getTime();return e.filter(H=>!y&&(H.created_at?new Date(H.created_at).getTime():0)<Q||!(g==="all"||g==="unassigned"&&!H.ats_template_id||H.ats_template_id===g)?!1:$?[H.template?.name,H.application_history?.job_title,H.application_history?.company_name,H.application_history?.location].filter(o=>!!o).some(o=>o.toLowerCase().includes($)):!0)},[e,d,g,y]),U=F.useMemo(()=>{if(D.length===0)return[];const $=new Map;D.forEach(Q=>{const H=Q.ats_template_id||"unassigned",Y=Q.template?.name||"Unassigned Template";$.has(H)||$.set(H,{templateId:Q.ats_template_id||null,templateName:Y,resumes:[]}),$.get(H).resumes.push(Q)});const re=Array.from($.values());return re.forEach(Q=>{Q.resumes.sort((H,Y)=>{const T=H.created_at?new Date(H.created_at).getTime():0;return(Y.created_at?new Date(Y.created_at).getTime():0)-T})}),re.sort((Q,H)=>Q.templateName.localeCompare(H.templateName)),re},[D]),G=F.useMemo(()=>{const $=new Map;e.forEach(Q=>{const H=Q.ats_template_id||"unassigned";$.has(H)||$.set(H,Q.template?.name||"Unassigned Template")});const re=Array.from($.entries()).map(([Q,H])=>({value:Q,label:H})).sort((Q,H)=>Q.label.localeCompare(H.label));return[{value:"all",label:"All templates"},...re]},[e]);return{resumes:e,groupedResumes:U,loading:r,error:l,searchTerm:d,templateFilter:g,setSearchTerm:p,setTemplateFilter:x,loadResumes:B,templateOptions:G,showAll:y,setShowAll:w,planTier:j,aiResumeLimit:A,aiResumeUsage:P}},hee=({onNavigateToWizard:e})=>{const[t,r]=F.useState(!1),[n,l]=F.useState(),{filteredTemplates:i,loading:d,error:p,searchTerm:g,sortBy:x,sortOrder:y,searchTemplates:w,sortTemplates:j,deleteTemplate:_,loadTemplates:A}=XQ(),{groupedResumes:E,loading:P,error:z,searchTerm:B,templateFilter:D,setSearchTerm:U,setTemplateFilter:G,loadResumes:$,templateOptions:re,showAll:Q,setShowAll:H,planTier:Y,aiResumeLimit:T,aiResumeUsage:o}=fee(),c=F.useCallback(()=>{l(void 0),r(!0)},[]),h=F.useCallback(S=>{l(S),r(!0)},[]),v=F.useCallback(async S=>{window.confirm("Are you sure you want to delete this template? This action cannot be undone.")&&await _(S)},[_]),b=F.useCallback(async S=>{console.log("Download template:",S);try{const{atsTemplateApiService:a}=await Qt(async()=>{const{atsTemplateApiService:se}=await Promise.resolve().then(()=>_i);return{atsTemplateApiService:se}},void 0,import.meta.url),k=await a.getTemplate(S);if(!k?.success||!k?.template)throw new Error("Failed to fetch template");const N=k.template.ats_optimized_html||k.template.original_html;if(!N)throw new Error("No HTML content available for export");const L=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:N,filename:`${k.template.name||"resume"}-${new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}`})});if(!L.ok)throw new Error(`PDF export failed: ${L.statusText}`);const X=await L.json();if(X.success&&X.pdf_path)if(window.electronAPI?.openFile){const se=await window.electronAPI.openFile(X.pdf_path);se.success?console.log("PDF exported and opened successfully:",X.filename):(console.error("Failed to open PDF:",se.error),alert("PDF exported successfully but failed to open automatically"))}else alert("PDF exported successfully: "+X.filename);else throw new Error("PDF export failed: Invalid response")}catch(a){console.error("Failed to export PDF:",a),alert("Failed to export PDF. Please try again.")}},[]),M=F.useCallback(()=>{r(!1),l(void 0),A(),window.dispatchEvent(new CustomEvent("atsTemplateUpdated")),$()},[$,A]),R=F.useCallback(async S=>{if(!S)return;const a=S.application_history?.job_title,k=S.application_history?.company_name,L=`ats_resume_${[a,k,S.template?.name].filter(Boolean).join("_")||S.id}`.replace(/[^a-z0-9_.-]/gi,"_").substring(0,120),X=L.endsWith(".pdf")?L:`${L}.pdf`;try{if(S.blob_url){await _r.downloadAndOpenResume(S.blob_url,X);return}if(S.optimized_html){const se=window.electronAPI;if(se?.exportHtmlToPdf){const te=await se.exportHtmlToPdf(S.optimized_html,X);if(te.success&&te.filePath&&se.openFile){const K=await se.openFile(te.filePath);K.success||(console.error("Failed to open PDF:",K.error),alert("PDF was generated but could not be opened automatically."))}else if(!te.success)throw new Error(te.error||"Failed to export HTML to PDF")}else{const te=window.open("","_blank");te?(te.document.write(S.optimized_html),te.document.close()):alert("Unable to open resume preview. Please allow pop-ups or use the desktop app for PDF export.")}return}alert("Resume content is not yet available for preview. Please try again later.")}catch(se){console.error("Failed to preview ATS resume:",se),alert("Failed to open the resume. Please try again.")}},[]);return t?s.jsx(cee,{templateId:n,onBack:M}):s.jsx(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},style:{minHeight:"100vh",backgroundColor:f.colors.neutral[50],padding:f.spacing.xl},children:s.jsxs("div",{style:{width:"100%",margin:"0 auto"},children:[s.jsx(YQ,{templates:i,loading:d,error:p,searchTerm:g,sortBy:x,sortOrder:y,onSearch:w,onSort:j,onCreateNew:c,onEditTemplate:h,onDeleteTemplate:v,onDownloadTemplate:b,onRefresh:A}),s.jsx("div",{style:{borderTop:`1px solid ${f.colors.neutral[200]}`,margin:`${f.spacing.xl} 0`}}),s.jsx(dee,{groups:E,loading:P,error:z,onRefresh:$,onPreviewResume:R,searchTerm:B,onSearch:S=>U(S),templateFilter:D,onTemplateFilterChange:S=>G(S),templateOptions:re,showAll:Q,onToggleShowAll:()=>H(S=>!S),planTier:Y,aiResumeLimit:T,aiResumeUsage:o})]})})};class pee{constructor(){this.baseUrl=Rn}async getAuthToken(){return await mr.getValidToken()}async createTemplate(t){const r=await Cr.post(`${this.baseUrl}/api/cover-letter/templates`,{name:t});if(!r.ok)throw new Error(`API request failed: ${r.statusText}`);return r.json()}async getTemplates(){const t=await Cr.get(`${this.baseUrl}/api/cover-letter/templates`);if(!t.ok)throw new Error(`API request failed: ${t.statusText}`);return t.json()}async getTemplate(t){const r=await Cr.get(`${this.baseUrl}/api/cover-letter/templates/${t}`);if(!r.ok)throw new Error(`API request failed: ${r.statusText}`);return r.json()}async updateTemplate(t,r){const n=await Cr.patch(`${this.baseUrl}/api/cover-letter/templates/${t}`,r);if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async deleteTemplate(t){const r=await Cr.delete(`${this.baseUrl}/api/cover-letter/templates/${t}`);if(!r.ok)throw new Error(`API request failed: ${r.statusText}`);return r.json()}async createGeneratedCoverLetter(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/cover-letter/generated`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({html_content:t})});if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async getGeneratedCoverLetters(){const t=await this.getAuthToken();if(!t)throw new Error("No auth token available");const r=await fetch(`${this.baseUrl}/api/cover-letter/generated`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`API request failed: ${r.statusText}`);return r.json()}async getGeneratedCoverLetter(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/cover-letter/generated/${t}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async generateTextDraft(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/cover-letter/generate-text-draft`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async generateOptimized(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/cover-letter/generate-optimized`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async applyTextToTemplate(t){const r=await this.getAuthToken();if(!r)throw new Error("No auth token available");const n=await fetch(`${this.baseUrl}/api/cover-letter/apply-text-to-template`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`API request failed: ${n.statusText}`);return n.json()}async saveHtmlToTemplate(t,r){return this.updateTemplate(t,{html_content:r})}async saveStep3Data(t,r){return this.updateTemplate(t,r)}async saveStep4Data(t,r){return this.updateTemplate(t,r)}async saveStep5Data(t,r){return this.updateTemplate(t,{example_cover_letter_result:r})}}const Wn=new pee,Ip=Object.freeze(Object.defineProperty({__proto__:null,coverLetterApiService:Wn},Symbol.toStringTag,{value:"Module"})),E1=5,gee=e=>{const[t,r]=F.useState({currentStep:1,completedSteps:new Set,templateId:e}),[n,l]=F.useState(!1);F.useEffect(()=>{(async()=>{if(e)try{l(!0),console.log(" Loading existing template data:",e);const _=await Wn.getTemplate(e);if(_.success&&_.template){const A=_.template;console.log(" Loaded template:",A.name),console.log(" Template data:",{id:A.id,name:A.name,hasHtmlContent:!!A.html_content,hasUserInstruction:!!A.user_instruction,exampleResumeId:A.example_resume_id,exampleAtsTemplateId:A.example_ats_template_id,hasJobDescription:!!A.example_job_description,hasCoverLetterResult:!!A.example_cover_letter_result});const E=new Set;E.add(1),A.html_content&&(E.add(2),console.log(" Step 2 completed: HTML content exists")),A.user_instruction&&(A.example_resume_id||A.example_ats_template_id)&&(E.add(3),console.log(" Step 3 completed: Instructions and resume/ATS template exist")),A.example_job_description&&(E.add(4),console.log(" Step 4 completed: Job information exists")),A.example_cover_letter_result&&(E.add(5),console.log(" Step 5 completed: Final cover letter result exists")),console.log(" Completed steps:",Array.from(E));const P=A.html_content?{id:A.id,name:A.name,htmlContent:A.html_content,category:"existing",description:"Existing template"}:void 0;r(z=>({...z,templateId:A.id,templateName:A.name,selectedTemplate:P,editedHtml:A.html_content||void 0,coverLetterInstructions:A.user_instruction||void 0,selectedResumeId:A.example_resume_id||void 0,selectedATSTemplateId:A.example_ats_template_id||void 0,jobInfo:A.example_job_description?{description:A.example_job_description}:void 0,existingCoverLetterResult:A.example_cover_letter_result||void 0,finalHtml:A.example_cover_letter_result||void 0,completedSteps:E}))}}catch(_){console.error(" Failed to load template data:",_)}finally{l(!1)}})()},[e]);const i=F.useCallback(j=>{r(_=>({..._,...j}))},[]),d=F.useCallback(j=>{switch(j){case 1:return{canProceed:!!t.selectedTemplate,errorMessage:t.selectedTemplate?void 0:"Please select a template"};case 2:return{canProceed:!!t.editedHtml,errorMessage:t.editedHtml?void 0:"Please edit the template"};case 3:{const _=!!(t.selectedResumeId||t.selectedATSTemplateId);return{canProceed:_&&!!t.coverLetterInstructions,errorMessage:_?t.coverLetterInstructions?void 0:"Please provide cover letter instructions":"Please select either a resume or an ATS template"}}case 4:return{canProceed:!!t.jobInfo?.description&&t.jobInfo.description.trim()!=="",errorMessage:t.jobInfo?.description&&t.jobInfo.description.trim()!==""?void 0:"Please provide the job description"};case 5:return{canProceed:!!t.finalHtml,errorMessage:t.finalHtml?void 0:"Cover letter generation in progress"};default:return{canProceed:!1,errorMessage:"Invalid step"}}},[t]),p=F.useCallback(j=>{if(j<1||j>E1)return;const _=d(t.currentStep);(j<=t.currentStep||j===t.currentStep+1&&_.canProceed||t.completedSteps.has(j))&&r(E=>({...E,currentStep:j}))},[t.currentStep,d,t.completedSteps]),g=F.useCallback(()=>{if(console.log(" nextStep called from step:",t.currentStep),t.currentStep<E1){const j=new Set(t.completedSteps);j.add(t.currentStep),r(_=>({..._,currentStep:_.currentStep+1,completedSteps:j})),t.currentStep===1&&!t.templateId&&t.selectedTemplate&&(console.log(" Creating database template for:",t.selectedTemplate.name),(async()=>{try{l(!0);const _=await Wn.createTemplate(`Cover Letter - ${t.selectedTemplate.name} - ${new Date().toLocaleDateString()}`);_.success&&(console.log(" Created template with ID:",_.id),r(A=>({...A,templateId:_.id,templateName:_.template.name})))}catch(_){console.error(" Failed to create template:",_)}finally{l(!1)}})()),t.currentStep===2&&t.templateId&&t.editedHtml&&(console.log(" Saving HTML content to template:",t.templateId),(async()=>{try{l(!0),(await Wn.saveHtmlToTemplate(t.templateId,t.editedHtml)).success&&console.log(" Saved HTML content to template")}catch(_){console.error(" Failed to save HTML content:",_)}finally{l(!1)}})()),console.log(" Step 3 -> 4 check:",{currentStep:t.currentStep,templateId:t.templateId,coverLetterInstructions:t.coverLetterInstructions,selectedResumeId:t.selectedResumeId,selectedATSTemplateId:t.selectedATSTemplateId}),t.currentStep===3&&t.templateId&&(console.log(" Saving Step 3 data to template:",t.templateId),(async()=>{try{l(!0),(await Wn.saveStep3Data(t.templateId,{user_instruction:t.coverLetterInstructions,example_resume_id:t.selectedResumeId,example_ats_template_id:t.selectedATSTemplateId})).success&&console.log(" Saved Step 3 data to template")}catch(_){console.error(" Failed to save Step 3 data:",_)}finally{l(!1)}})()),t.currentStep===4&&t.templateId&&t.jobInfo?.description?.trim()&&(console.log(" Saving Step 4 job info to template:",t.templateId),(async()=>{try{l(!0),(await Wn.saveStep4Data(t.templateId,{example_job_description:t.jobInfo.description})).success&&console.log(" Saved Step 4 job info to template")}catch(_){console.error(" Failed to save Step 4 job info:",_)}finally{l(!1)}})())}},[t.currentStep,t.completedSteps,t.templateId,t.selectedTemplate,t.editedHtml,t.coverLetterInstructions,t.selectedResumeId,t.selectedATSTemplateId,t.jobInfo,d]),x=F.useCallback(()=>{t.currentStep>1&&r(j=>({...j,currentStep:j.currentStep-1}))},[t.currentStep]),y=F.useCallback(()=>{const j=new Set([1,2,3,4,5]);r(_=>({..._,completedSteps:j,isCompleted:!0,completedAt:new Date().toISOString()}))},[]),w=F.useCallback(()=>{r({currentStep:1,completedSteps:new Set,templateId:e})},[e]);return{wizardState:t,updateState:i,validateStep:d,goToStep:p,nextStep:g,previousStep:x,completeWizard:y,resetWizard:w,totalSteps:E1,isLoading:n,setIsLoading:l}},mee=({currentStep:e,totalSteps:t,completedSteps:r,onStepClick:n})=>{const l=["Template","Edit","Resume","Job Info","Result"];return s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm},children:Array.from({length:t},(i,d)=>{const p=d+1,g=r.has(p),x=p===e,y=p<=e||g;return s.jsxs(Vt.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:f.spacing.xs},children:[s.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:g?f.colors.accent.success:x?f.colors.primary.main:y?f.colors.neutral[200]:f.colors.neutral[100],color:g||x?f.colors.primary.text:f.colors.neutral[600],fontSize:f.typography.fontSize.sm,fontWeight:"600",transition:"all 0.2s ease",cursor:(g||y)&&n?"pointer":"default",opacity:(g||y)&&n?1:.7},onClick:()=>{(g||y)&&n&&n(p)},onMouseEnter:w=>{(g||y)&&n&&(w.currentTarget.style.transform="scale(1.1)")},onMouseLeave:w=>{(g||y)&&n&&(w.currentTarget.style.transform="scale(1)")},children:g?s.jsx(Ia,{size:16}):p}),s.jsx(Ct,{style:{fontSize:f.typography.fontSize.xs,color:x?f.colors.primary.main:y?f.colors.neutral[700]:f.colors.neutral[500],fontWeight:x?"600":"400",textAlign:"center",minWidth:"60px"},children:l[d]})]}),p<t&&s.jsx("div",{style:{width:"24px",height:"2px",backgroundColor:g?f.colors.accent.success:f.colors.neutral[200],marginBottom:"20px",transition:"background-color 0.2s ease"}})]},p)})})},yee=({currentStep:e,totalSteps:t,canProceed:r,onPrevious:n,onNext:l,onComplete:i,completedSteps:d,progressIndicator:p})=>{const g=e===1,x=e===t,y=r||d.has(e);return s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:f.spacing.lg,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsx("div",{children:!g&&s.jsxs(ot,{variant:"secondary",onClick:n,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(Fd,{size:16}),"Previous"]})}),s.jsx("div",{children:p}),s.jsx("div",{children:s.jsxs(ot,{variant:"primary",onClick:x&&i?i:l,disabled:!y,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[x?"Complete":"Next",!x&&s.jsx(za,{size:16})]})})]})},vee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Arial', sans-serif;\r
            line-height: 1.6;\r
            color: #333;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            margin-bottom: 2em;\r
        }\r
        .name {\r
            font-size: 24px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            color: #666;\r
            margin-bottom: 0.25em;\r
        }\r
        .date {\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
        }\r
        .content {\r
            margin-bottom: 2em;\r
        }\r
        .paragraph {\r
            margin-bottom: 1em;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div>[Hiring Manager Name]</div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear Hiring Manager,</div>\r
\r
        <div class="paragraph">\r
            I am writing to express my strong interest in the [Position Title] role at [Company Name].\r
            With my background in [relevant field/experience], I am confident that I would be a valuable\r
            addition to your team.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my previous role at [Previous Company], I [specific achievement or responsibility].\r
            This experience has equipped me with [relevant skills] that directly align with the\r
            requirements of this position.\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Company Name] because of [specific reason related to company/role].\r
            I would welcome the opportunity to discuss how my skills and enthusiasm can contribute to\r
            your team's continued success.\r
        </div>\r
\r
        <div class="paragraph">\r
            Thank you for considering my application. I look forward to hearing from you.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Sincerely,</div>\r
        <div style="margin-top: 2em;">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,xee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Times New Roman', serif;\r
            line-height: 1.5;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            text-align: center;\r
            border-bottom: 2px solid #34495e;\r
            padding-bottom: 1em;\r
            margin-bottom: 2em;\r
        }\r
        .name {\r
            font-size: 28px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
            color: #34495e;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            color: #7f8c8d;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .salutation {\r
            margin-bottom: 1.5em;\r
            font-weight: bold;\r
        }\r
        .content {\r
            text-align: justify;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.2em;\r
            text-indent: 2em;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: right;\r
        }\r
        .signature {\r
            margin-top: 3em;\r
            font-weight: bold;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email]  [Your Phone]  [Your LinkedIn]  [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="salutation">Dear [Hiring Manager Name],</div>\r
\r
    <div class="content">\r
        <div class="paragraph">\r
            I am writing to formally express my interest in the [Position Title] position at [Company Name].\r
            Having researched your organization extensively, I am impressed by [specific company achievement/value]\r
            and believe my [X years] of experience in [relevant field] makes me an ideal candidate for this role.\r
        </div>\r
\r
        <div class="paragraph">\r
            Throughout my career at [Previous Company], I have consistently demonstrated my ability to\r
            [key skill/achievement]. For example, I [specific quantifiable achievement], which resulted in\r
            [positive outcome]. This experience has honed my expertise in [relevant skills] and prepared me\r
            to make meaningful contributions to your team.\r
        </div>\r
\r
        <div class="paragraph">\r
            What particularly attracts me to [Company Name] is [specific reason]. I am eager to bring my\r
            passion for [relevant area] and my proven track record of [relevant achievement] to help\r
            [Company Name] achieve its strategic objectives.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would be honored to discuss how my background and enthusiasm align with your team's needs.\r
            Thank you for your time and consideration. I look forward to the opportunity to speak with you further.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Respectfully yours,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,bee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Helvetica Neue', Arial, sans-serif;\r
            line-height: 1.6;\r
            color: #444;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r
            color: white;\r
            padding: 2em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
        }\r
        .name {\r
            font-size: 32px;\r
            font-weight: 300;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f8f9fa;\r
            border-left: 4px solid #667eea;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .highlight {\r
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);\r
            padding: 0.1em 0.3em;\r
            border-radius: 3px;\r
        }\r
        .closing {\r
            margin-top: 2.5em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 500;\r
            color: #667eea;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your Portfolio/LinkedIn]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Hello [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I'm excited to apply for the <span class="highlight">[Position Title]</span> role at [Company Name].\r
            Your recent [project/initiative/achievement] caught my attention, and I'm eager to contribute my\r
            [relevant skills/experience] to help drive similar innovative solutions.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Current Company], I've had the opportunity to [key achievement].\r
            This experience taught me the importance of [relevant skill/lesson], which I believe would be\r
            valuable in tackling the challenges at [Company Name].\r
        </div>\r
\r
        <div class="paragraph">\r
            What excites me most about this opportunity is [specific aspect of role/company].\r
            I'm particularly drawn to [Company Name]'s commitment to [company value/mission] and would\r
            love to be part of a team that [relevant company goal/project].\r
        </div>\r
\r
        <div class="paragraph">\r
            I'd love to discuss how my background in [relevant area] and passion for [relevant field]\r
            can contribute to your team's success. Thank you for considering my application!\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Best regards,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,wee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Georgia', serif;\r
            line-height: 1.7;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
            position: relative;\r
        }\r
        .decorative-border {\r
            position: absolute;\r
            top: 0.5in;\r
            left: 0.5in;\r
            right: 0.5in;\r
            bottom: 0.5in;\r
            border: 3px solid #e74c3c;\r
            border-radius: 15px;\r
            pointer-events: none;\r
        }\r
        .header {\r
            text-align: center;\r
            margin-bottom: 2em;\r
            position: relative;\r
        }\r
        .name {\r
            font-size: 36px;\r
            font-weight: bold;\r
            color: #e74c3c;\r
            margin-bottom: 0.5em;\r
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);\r
        }\r
        .contact {\r
            font-size: 14px;\r
            color: #7f8c8d;\r
            font-style: italic;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
            color: #95a5a6;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding-left: 1em;\r
            border-left: 4px solid #f39c12;\r
        }\r
        .content {\r
            font-size: 16px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
            position: relative;\r
        }\r
        .paragraph:first-of-type::first-letter {\r
            font-size: 3em;\r
            float: left;\r
            line-height: 1;\r
            margin-right: 0.1em;\r
            margin-top: 0.1em;\r
            color: #e74c3c;\r
            font-weight: bold;\r
        }\r
        .emphasis {\r
            color: #e74c3c;\r
            font-weight: bold;\r
        }\r
        .closing {\r
            margin-top: 3em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 24px;\r
            color: #e74c3c;\r
            font-weight: bold;\r
        }\r
        .flourish {\r
            text-align: center;\r
            font-size: 24px;\r
            color: #f39c12;\r
            margin: 1em 0;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="decorative-border"></div>\r
\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email]  [Your Phone]  [Your Portfolio]</div>\r
    </div>\r
\r
    <div class="flourish"></div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">\r
            Dear [Hiring Manager Name], I am delighted to submit my application for the\r
            <span class="emphasis">[Position Title]</span> position at [Company Name].\r
            Your company's reputation for <span class="emphasis">[company strength]</span>\r
            has long inspired me, and I am thrilled at the prospect of contributing to your creative team.\r
        </div>\r
\r
        <div class="paragraph">\r
            My journey in [relevant field] began [brief background], and since then, I have cultivated\r
            a passion for [relevant area]. At [Previous Company], I had the privilege of\r
            [key achievement/project], which not only honed my skills in [relevant skills] but also\r
            reinforced my belief in the power of [relevant concept/value].\r
        </div>\r
\r
        <div class="paragraph">\r
            What draws me to [Company Name] is your commitment to <span class="emphasis">[specific company value]</span>.\r
            I am particularly excited about [specific project/initiative] and would love to bring my\r
            unique perspective and [relevant skills] to help elevate your already impressive work.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would be honored to discuss how my creative vision and professional experience align with\r
            your team's goals. Thank you for considering my application, and I eagerly await the\r
            opportunity to contribute to [Company Name]'s continued success.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>With warm regards,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
\r
    <div class="flourish"></div>\r
</body>\r
</html>\r
`,_ee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Arial', sans-serif;\r
            line-height: 1.6;\r
            color: #333;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .content {\r
            min-height: 9in;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="content">\r
        <!-- Start writing your cover letter here -->\r
\r
    </div>\r
</body>\r
</html>\r
`,See=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;\r
            line-height: 1.6;\r
            color: #1a1a1a;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(45deg, #667eea, #764ba2);\r
            color: white;\r
            padding: 1.5em;\r
            margin: -1in -1in 2em -1in;\r
            border-radius: 0 0 20px 20px;\r
        }\r
        .name {\r
            font-size: 28px;\r
            font-weight: 700;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f8f9ff;\r
            border-radius: 10px;\r
            border-left: 4px solid #667eea;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .tech-highlight {\r
            background: #e8f2ff;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
            color: #0066cc;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 600;\r
            color: #667eea;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your GitHub] | [Your LinkedIn] | [Your Portfolio]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Hi [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I'm excited to apply for the <span class="tech-highlight">[Position Title]</span> role at [Company Name].\r
            As a passionate developer with experience in <span class="tech-highlight">[tech stack]</span>,\r
            I'm drawn to your company's innovative approach to [specific technology/product].\r
        </div>\r
\r
        <div class="paragraph">\r
            In my recent project at [Previous Company], I built [specific project] using\r
            <span class="tech-highlight">[technologies used]</span>, which resulted in [quantifiable impact].\r
            I'm particularly excited about the opportunity to work with [specific technology mentioned in job posting]\r
            and contribute to [specific company project/goal].\r
        </div>\r
\r
        <div class="paragraph">\r
            What attracts me to [Company Name] is your commitment to [company value/mission].\r
            I'd love to bring my experience in [relevant skills] and my passion for [relevant area]\r
            to help build amazing products that [impact/goal].\r
        </div>\r
\r
        <div class="paragraph">\r
            I'd be thrilled to discuss how I can contribute to your team. Thanks for considering my application!\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Best,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,kee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Times New Roman', serif;\r
            line-height: 1.5;\r
            color: #1a1a1a;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            text-align: center;\r
            border-bottom: 3px solid #2c5aa0;\r
            padding-bottom: 1em;\r
            margin-bottom: 2em;\r
        }\r
        .name {\r
            font-size: 26px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
            color: #2c5aa0;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            color: #555;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .salutation {\r
            margin-bottom: 1.5em;\r
            font-weight: bold;\r
        }\r
        .content {\r
            text-align: justify;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.2em;\r
            text-indent: 1.5em;\r
        }\r
        .financial-term {\r
            font-weight: bold;\r
            color: #2c5aa0;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: right;\r
        }\r
        .signature {\r
            margin-top: 3em;\r
            font-weight: bold;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email]  [Your Phone]  [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="salutation">Dear [Hiring Manager Name],</div>\r
\r
    <div class="content">\r
        <div class="paragraph">\r
            I am writing to express my strong interest in the [Position Title] position at [Company Name].\r
            With my [X years] of experience in <span class="financial-term">financial analysis</span> and\r
            <span class="financial-term">portfolio management</span>, I am confident in my ability to contribute\r
            meaningfully to your team's success.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Previous Company], I have successfully managed a portfolio worth\r
            $[amount], achieving an average annual return of [percentage]% over [time period].\r
            My expertise in <span class="financial-term">risk assessment</span>,\r
            <span class="financial-term">financial modeling</span>, and <span class="financial-term">market analysis</span>\r
            has consistently delivered results that exceed client expectations and regulatory requirements.\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Company Name]'s reputation for excellence in [specific area] and\r
            your commitment to [company value/approach]. I believe my analytical skills and attention to detail,\r
            combined with my proficiency in [relevant software/tools], would make me a valuable addition to your team.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my background in [relevant area] and\r
            proven track record of [specific achievement] can contribute to [Company Name]'s continued growth.\r
            Thank you for your consideration.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Sincerely,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,jee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Arial', sans-serif;\r
            line-height: 1.6;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #27ae60, #2ecc71);\r
            color: white;\r
            padding: 1.5em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
        }\r
        .name {\r
            font-size: 26px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f8fff8;\r
            border-left: 4px solid #27ae60;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .healthcare-highlight {\r
            background: #e8f8f5;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
            color: #27ae60;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 600;\r
            color: #27ae60;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your License #] | [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Healthcare Facility Name]</div>\r
        <div>[Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I am writing to express my sincere interest in the <span class="healthcare-highlight">[Position Title]</span>\r
            position at [Healthcare Facility Name]. As a dedicated healthcare professional with [X years] of experience\r
            in <span class="healthcare-highlight">[specialty area]</span>, I am committed to providing exceptional\r
            patient care and contributing to your team's mission of improving community health.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Previous Healthcare Facility], I have consistently demonstrated my ability to\r
            provide compassionate, evidence-based care while maintaining the highest standards of\r
            <span class="healthcare-highlight">patient safety</span> and <span class="healthcare-highlight">clinical excellence</span>.\r
            My experience includes [specific procedures/responsibilities], and I have successfully [specific achievement].\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Healthcare Facility Name]'s commitment to [specific mission/value] and\r
            your reputation for [specific strength]. I believe my skills in [relevant clinical skills] and\r
            my dedication to <span class="healthcare-highlight">patient-centered care</span> would make me\r
            a valuable addition to your healthcare team.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my clinical expertise and passion for healthcare\r
            can contribute to the excellent care provided at [Healthcare Facility Name]. Thank you for\r
            considering my application.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>With gratitude,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Mee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Helvetica Neue', Arial, sans-serif;\r
            line-height: 1.6;\r
            color: #333;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(45deg, #ff6b6b, #feca57);\r
            color: white;\r
            padding: 2em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
            position: relative;\r
        }\r
        .header::after {\r
            content: '';\r
            position: absolute;\r
            bottom: -10px;\r
            left: 50%;\r
            transform: translateX(-50%);\r
            width: 0;\r
            height: 0;\r
            border-left: 20px solid transparent;\r
            border-right: 20px solid transparent;\r
            border-top: 10px solid #ff6b6b;\r
        }\r
        .name {\r
            font-size: 30px;\r
            font-weight: 300;\r
            margin-bottom: 0.5em;\r
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1.5em;\r
            background: linear-gradient(135deg, #fff5f5, #fff8e1);\r
            border-radius: 10px;\r
            border-left: 5px solid #ff6b6b;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .marketing-highlight {\r
            background: linear-gradient(120deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
        }\r
        .closing {\r
            margin-top: 2.5em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 20px;\r
            font-weight: 500;\r
            background: linear-gradient(45deg, #ff6b6b, #feca57);\r
            -webkit-background-clip: text;\r
            -webkit-text-fill-color: transparent;\r
            background-clip: text;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Portfolio] | [Your Social Media] | [Your Phone]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Hello [Hiring Manager Name]!</div>\r
\r
        <div class="paragraph">\r
            I'm thrilled to apply for the <span class="marketing-highlight">[Position Title]</span> role at [Company Name].\r
            As a creative marketer with a passion for <span class="marketing-highlight">brand storytelling</span> and\r
            <span class="marketing-highlight">digital innovation</span>, I'm excited about the opportunity to help\r
            [Company Name] connect with audiences in meaningful ways.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my recent campaign at [Previous Company], I developed a <span class="marketing-highlight">multi-channel strategy</span>\r
            that increased brand engagement by [percentage]% and drove [specific metric] growth. My expertise spans\r
            <span class="marketing-highlight">social media marketing</span>, <span class="marketing-highlight">content creation</span>,\r
            and <span class="marketing-highlight">performance analytics</span>, always with a focus on authentic brand connection.\r
        </div>\r
\r
        <div class="paragraph">\r
            What excites me about [Company Name] is your innovative approach to [specific marketing area] and\r
            your commitment to [company value]. I'd love to bring my creative energy and data-driven mindset\r
            to help amplify your brand's impact and reach new audiences.\r
        </div>\r
\r
        <div class="paragraph">\r
            I'd be delighted to discuss how my marketing expertise can contribute to your team's success.\r
            Let's create something amazing together!\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Creatively yours,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Cee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Georgia', serif;\r
            line-height: 1.6;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #3498db, #2980b9);\r
            color: white;\r
            padding: 1.5em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
            border-radius: 0 0 15px 15px;\r
        }\r
        .name {\r
            font-size: 26px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f0f8ff;\r
            border-left: 4px solid #3498db;\r
            border-radius: 5px;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .education-highlight {\r
            background: #e3f2fd;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
            color: #1976d2;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 600;\r
            color: #3498db;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your Teaching License] | [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Principal/Hiring Manager Name]</strong></div>\r
        <div>[School Name]</div>\r
        <div>[School Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear [Principal/Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I am writing to express my enthusiasm for the <span class="education-highlight">[Position Title]</span>\r
            position at [School Name]. As an educator with [X years] of experience in\r
            <span class="education-highlight">[subject area/grade level]</span>, I am passionate about fostering\r
            a love of learning and helping students reach their full potential.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Previous School], I have successfully implemented\r
            <span class="education-highlight">innovative teaching strategies</span> that have resulted in\r
            [specific achievement, e.g., improved test scores, increased engagement]. My approach to education\r
            emphasizes <span class="education-highlight">differentiated instruction</span> and\r
            <span class="education-highlight">inclusive classroom practices</span>, ensuring that every student\r
            feels valued and supported in their learning journey.\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [School Name]'s commitment to [specific school value/program] and\r
            your focus on [educational approach/philosophy]. I believe my experience with\r
            <span class="education-highlight">[relevant teaching method/technology]</span> and my dedication to\r
            <span class="education-highlight">student-centered learning</span> would make me a valuable addition\r
            to your educational community.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my teaching philosophy and classroom experience\r
            can contribute to the continued success of [School Name]'s students. Thank you for considering\r
            my application.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>With educational dedication,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Tee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Times New Roman', serif;\r
            line-height: 1.5;\r
            color: #1a1a1a;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            text-align: center;\r
            border-bottom: 4px double #8b4513;\r
            padding-bottom: 1em;\r
            margin-bottom: 2em;\r
        }\r
        .name {\r
            font-size: 24px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
            color: #8b4513;\r
            letter-spacing: 1px;\r
        }\r
        .contact {\r
            font-size: 13px;\r
            color: #555;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .salutation {\r
            margin-bottom: 1.5em;\r
            font-weight: bold;\r
        }\r
        .content {\r
            text-align: justify;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.2em;\r
            text-indent: 2em;\r
        }\r
        .legal-term {\r
            font-style: italic;\r
            font-weight: bold;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: right;\r
        }\r
        .signature {\r
            margin-top: 3em;\r
            font-weight: bold;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name], [Degree]</div>\r
        <div class="contact">[Your Email]  [Your Phone]  [Bar Number]  [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Law Firm/Organization Name]</div>\r
        <div>[Address]</div>\r
    </div>\r
\r
    <div class="salutation">Dear [Hiring Manager Name],</div>\r
\r
    <div class="content">\r
        <div class="paragraph">\r
            I am writing to express my interest in the [Position Title] position at [Law Firm/Organization Name].\r
            With my [X years] of experience in <span class="legal-term">[area of law]</span> and my commitment to\r
            providing exceptional legal counsel, I am confident that I would be a valuable addition to your legal team.\r
        </div>\r
\r
        <div class="paragraph">\r
            During my tenure at [Previous Law Firm], I have successfully handled [type of cases/matters],\r
            including [specific example]. My expertise in <span class="legal-term">[legal specialization]</span>\r
            and proficiency in <span class="legal-term">[legal research/writing/litigation]</span> have consistently\r
            resulted in favorable outcomes for clients and recognition from peers.\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Law Firm/Organization Name]'s reputation for excellence in\r
            [specific practice area] and your commitment to [firm value/approach]. My analytical skills,\r
            attention to detail, and dedication to <span class="legal-term">zealous advocacy</span> align\r
            perfectly with your firm's standards of professional excellence.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my legal expertise and professional experience\r
            can contribute to your firm's continued success. Thank you for your consideration of my application.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Respectfully submitted,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Aee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Calibri', Arial, sans-serif;\r
            line-height: 1.6;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #34495e, #2c3e50);\r
            color: white;\r
            padding: 1.5em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
        }\r
        .name {\r
            font-size: 26px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f8f9fa;\r
            border-left: 4px solid #34495e;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .engineering-highlight {\r
            background: #ecf0f1;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
            color: #2c3e50;\r
            font-family: 'Courier New', monospace;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 600;\r
            color: #34495e;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name], [Degree]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your LinkedIn] | [Professional License]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I am writing to express my interest in the <span class="engineering-highlight">[Position Title]</span>\r
            position at [Company Name]. As a [engineering discipline] engineer with [X years] of experience in\r
            <span class="engineering-highlight">[specialization area]</span>, I am excited about the opportunity\r
            to contribute to your team's innovative projects.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Previous Company], I have successfully led the design and implementation of\r
            [specific project/system], utilizing <span class="engineering-highlight">[technologies/methodologies]</span>\r
            to achieve [quantifiable results]. My expertise in <span class="engineering-highlight">[technical skills]</span>\r
            and experience with <span class="engineering-highlight">[relevant tools/software]</span> have consistently\r
            delivered solutions that meet both technical requirements and business objectives.\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Company Name]'s commitment to <span class="engineering-highlight">[innovation/sustainability/quality]</span>\r
            and your work on [specific company project/technology]. I believe my problem-solving abilities and\r
            passion for <span class="engineering-highlight">[relevant engineering area]</span> would make me\r
            a valuable addition to your engineering team.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my technical expertise and project experience\r
            can contribute to [Company Name]'s continued success. Thank you for considering my application.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Best regards,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Ree=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Arial', sans-serif;\r
            line-height: 1.6;\r
            color: #333;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(45deg, #e74c3c, #c0392b);\r
            color: white;\r
            padding: 2em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
            position: relative;\r
        }\r
        .header::before {\r
            content: '';\r
            position: absolute;\r
            top: 10px;\r
            right: 20px;\r
            font-size: 24px;\r
        }\r
        .name {\r
            font-size: 28px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1.5em;\r
            background: #fff5f5;\r
            border-left: 5px solid #e74c3c;\r
            border-radius: 5px;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .sales-highlight {\r
            background: #ffebee;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: bold;\r
            color: #c62828;\r
        }\r
        .metric {\r
            background: #e8f5e8;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: bold;\r
            color: #2e7d32;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 20px;\r
            font-weight: bold;\r
            color: #e74c3c;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your LinkedIn] | [Your CRM Profile]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Company Name]</div>\r
        <div>[Company Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I'm excited to apply for the <span class="sales-highlight">[Position Title]</span> role at [Company Name].\r
            As a results-driven sales professional with [X years] of experience in\r
            <span class="sales-highlight">[industry/product type]</span>, I have a proven track record of\r
            exceeding targets and building lasting client relationships.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my current role at [Previous Company], I consistently achieved\r
            <span class="metric">[percentage]% of quota</span>, generating over\r
            <span class="metric">$[amount] in revenue</span> annually. My expertise in\r
            <span class="sales-highlight">consultative selling</span> and <span class="sales-highlight">relationship building</span>\r
            has resulted in a <span class="metric">[percentage]% client retention rate</span> and numerous referrals.\r
        </div>\r
\r
        <div class="paragraph">\r
            What attracts me to [Company Name] is your innovative approach to [specific product/service] and\r
            your reputation for <span class="sales-highlight">customer excellence</span>. I'm confident that my\r
            passion for <span class="sales-highlight">[relevant area]</span> and my ability to identify and\r
            capitalize on new opportunities would make me a valuable addition to your sales team.\r
        </div>\r
\r
        <div class="paragraph">\r
            I'd love to discuss how my sales expertise and drive for results can contribute to\r
            [Company Name]'s continued growth. Let's schedule a time to talk!\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Ready to close the deal,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Eee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Georgia', serif;\r
            line-height: 1.7;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #8e44ad, #9b59b6);\r
            color: white;\r
            padding: 1.5em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: center;\r
            border-radius: 0 0 20px 20px;\r
        }\r
        .name {\r
            font-size: 26px;\r
            font-weight: bold;\r
            margin-bottom: 0.5em;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1em;\r
            background: #f8f5ff;\r
            border-left: 4px solid #8e44ad;\r
            border-radius: 5px;\r
        }\r
        .content {\r
            font-size: 15px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .mission-highlight {\r
            background: #f3e5f5;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: 500;\r
            color: #6a1b9a;\r
            font-style: italic;\r
        }\r
        .impact-metric {\r
            background: #e8f5e8;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: bold;\r
            color: #2e7d32;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 18px;\r
            font-weight: 600;\r
            color: #8e44ad;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your Phone] | [Your LinkedIn] | [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Hiring Manager Name]</strong></div>\r
        <div>[Organization Name]</div>\r
        <div>[Organization Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Dear [Hiring Manager Name],</div>\r
\r
        <div class="paragraph">\r
            I am writing to express my passionate interest in the <span class="mission-highlight">[Position Title]</span>\r
            position at [Organization Name]. Your organization's commitment to\r
            <span class="mission-highlight">[specific mission/cause]</span> deeply resonates with my personal values\r
            and professional aspirations to create meaningful social impact.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my previous role at [Previous Organization], I successfully led initiatives that resulted in\r
            <span class="impact-metric">[specific impact, e.g., "served 500+ families"]</span> and\r
            <span class="impact-metric">[quantifiable outcome]</span>. My experience in\r
            <span class="mission-highlight">community outreach</span>, <span class="mission-highlight">program development</span>,\r
            and <span class="mission-highlight">stakeholder engagement</span> has equipped me with the skills\r
            necessary to advance your organization's vital work.\r
        </div>\r
\r
        <div class="paragraph">\r
            What particularly draws me to [Organization Name] is your innovative approach to\r
            <span class="mission-highlight">[specific program/initiative]</span> and your dedication to\r
            <span class="mission-highlight">[organizational value]</span>. I am eager to contribute my passion for\r
            <span class="mission-highlight">[relevant cause area]</span> and my experience in\r
            <span class="mission-highlight">[relevant skill area]</span> to help further your mission.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would be honored to discuss how my commitment to social change and my professional experience\r
            can contribute to [Organization Name]'s continued impact. Thank you for the important work you do\r
            and for considering my application.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>With purpose and dedication,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Iee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Helvetica Neue', Arial, sans-serif;\r
            line-height: 1.5;\r
            color: #2c3e50;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            text-align: center;\r
            border-bottom: 3px solid #1abc9c;\r
            padding-bottom: 1em;\r
            margin-bottom: 2em;\r
        }\r
        .name {\r
            font-size: 24px;\r
            font-weight: 300;\r
            margin-bottom: 0.5em;\r
            color: #1abc9c;\r
            letter-spacing: 2px;\r
        }\r
        .contact {\r
            font-size: 13px;\r
            color: #555;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            font-size: 14px;\r
        }\r
        .salutation {\r
            margin-bottom: 1.5em;\r
            font-weight: 500;\r
        }\r
        .content {\r
            text-align: justify;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.3em;\r
        }\r
        .consulting-highlight {\r
            background: #e8f8f5;\r
            padding: 0.2em 0.4em;\r
            border-radius: 3px;\r
            font-weight: 500;\r
            color: #16a085;\r
        }\r
        .framework {\r
            font-family: 'Courier New', monospace;\r
            background: #f8f9fa;\r
            padding: 0.2em 0.4em;\r
            border-radius: 3px;\r
            font-size: 0.9em;\r
        }\r
        .closing {\r
            margin-top: 2em;\r
            text-align: right;\r
        }\r
        .signature {\r
            margin-top: 3em;\r
            font-weight: 300;\r
            font-size: 16px;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email]  [Your Phone]  [Your LinkedIn]  [Your Address]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Partner/Hiring Manager Name]</strong></div>\r
        <div>[Title]</div>\r
        <div>[Consulting Firm Name]</div>\r
        <div>[Address]</div>\r
    </div>\r
\r
    <div class="salutation">Dear [Partner/Hiring Manager Name],</div>\r
\r
    <div class="content">\r
        <div class="paragraph">\r
            I am writing to express my strong interest in the <span class="consulting-highlight">[Position Title]</span>\r
            position at [Consulting Firm Name]. With my background in <span class="consulting-highlight">[relevant field]</span>\r
            and proven ability to drive <span class="consulting-highlight">strategic transformation</span>, I am excited\r
            about the opportunity to help your clients solve their most complex business challenges.\r
        </div>\r
\r
        <div class="paragraph">\r
            In my previous role at [Previous Company], I led a cross-functional team to implement a\r
            <span class="consulting-highlight">digital transformation initiative</span> that resulted in\r
            [specific outcome, e.g., "30% cost reduction"]. My approach leveraged <span class="framework">[methodology/framework]</span>\r
            and <span class="consulting-highlight">data-driven insights</span> to deliver measurable results within\r
            [timeframe].\r
        </div>\r
\r
        <div class="paragraph">\r
            I am particularly drawn to [Consulting Firm Name]'s reputation for excellence in\r
            <span class="consulting-highlight">[practice area]</span> and your commitment to\r
            <span class="consulting-highlight">client value creation</span>. My analytical mindset,\r
            combined with my experience in <span class="consulting-highlight">[relevant industry/function]</span>,\r
            positions me well to contribute to your team's continued success.\r
        </div>\r
\r
        <div class="paragraph">\r
            I would welcome the opportunity to discuss how my problem-solving capabilities and\r
            strategic thinking can add value to your consulting practice. Thank you for your consideration.\r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Sincerely,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,zee=`<!DOCTYPE html>\r
<html lang="en">\r
<head>\r
    <meta charset="UTF-8">\r
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r
    <title>Cover Letter</title>\r
    <style>\r
        body {\r
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\r
            line-height: 1.6;\r
            color: #1a1a1a;\r
            max-width: 8.5in;\r
            margin: 0 auto;\r
            padding: 1in;\r
            background: white;\r
        }\r
        .header {\r
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r
            color: white;\r
            padding: 2em;\r
            margin: -1in -1in 2em -1in;\r
            text-align: left;\r
            position: relative;\r
        }\r
        .header::after {\r
            content: '';\r
            position: absolute;\r
            top: 20px;\r
            right: 30px;\r
            font-size: 32px;\r
        }\r
        .name {\r
            font-size: 32px;\r
            font-weight: 800;\r
            margin-bottom: 0.5em;\r
            letter-spacing: -1px;\r
        }\r
        .contact {\r
            font-size: 14px;\r
            opacity: 0.9;\r
        }\r
        .date {\r
            text-align: right;\r
            margin-bottom: 1.5em;\r
            font-size: 14px;\r
            color: #666;\r
        }\r
        .recipient {\r
            margin-bottom: 2em;\r
            padding: 1.5em;\r
            background: linear-gradient(135deg, #f8f9ff, #fff8f8);\r
            border-radius: 12px;\r
            border-left: 4px solid #667eea;\r
        }\r
        .content {\r
            font-size: 16px;\r
        }\r
        .paragraph {\r
            margin-bottom: 1.5em;\r
        }\r
        .startup-highlight {\r
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);\r
            padding: 0.2em 0.4em;\r
            border-radius: 6px;\r
            font-weight: 600;\r
        }\r
        .metric {\r
            background: #e8f5e8;\r
            padding: 0.2em 0.4em;\r
            border-radius: 4px;\r
            font-weight: bold;\r
            color: #2e7d32;\r
        }\r
        .closing {\r
            margin-top: 2.5em;\r
            text-align: center;\r
        }\r
        .signature {\r
            margin-top: 2em;\r
            font-size: 20px;\r
            font-weight: 700;\r
            background: linear-gradient(135deg, #667eea, #764ba2);\r
            -webkit-background-clip: text;\r
            -webkit-text-fill-color: transparent;\r
            background-clip: text;\r
        }\r
    </style>\r
</head>\r
<body>\r
    <div class="header">\r
        <div class="name">[Your Name]</div>\r
        <div class="contact">[Your Email] | [Your GitHub] | [Your Twitter] | [Your Portfolio]</div>\r
    </div>\r
\r
    <div class="date">[Date]</div>\r
\r
    <div class="recipient">\r
        <div><strong>[Founder/Hiring Manager Name]</strong></div>\r
        <div>[Startup Name]</div>\r
        <div>[Address]</div>\r
    </div>\r
\r
    <div class="content">\r
        <div class="paragraph">Hey [Founder/Hiring Manager Name]! </div>\r
\r
        <div class="paragraph">\r
            I'm super excited to apply for the <span class="startup-highlight">[Position Title]</span> role at [Startup Name].\r
            Your mission to <span class="startup-highlight">[company mission]</span> really resonates with me,\r
            and I'd love to help you <span class="startup-highlight">scale and disrupt</span> the [industry] space.\r
        </div>\r
\r
        <div class="paragraph">\r
            At my last startup, [Previous Company], I wore multiple hats and helped grow the team from\r
            <span class="metric">[initial size] to [final size]</span> people while increasing revenue by\r
            <span class="metric">[percentage]%</span>. I thrive in <span class="startup-highlight">fast-paced environments</span>\r
            where I can take ownership, move quickly, and make a real impact.\r
        </div>\r
\r
        <div class="paragraph">\r
            What excites me most about [Startup Name] is your approach to <span class="startup-highlight">[specific innovation/product]</span>.\r
            I'm passionate about <span class="startup-highlight">[relevant area]</span> and would love to bring my\r
            experience in <span class="startup-highlight">[relevant skills]</span> to help you achieve\r
            <span class="startup-highlight">product-market fit</span> and beyond.\r
        </div>\r
\r
        <div class="paragraph">\r
            Let's chat about how I can help [Startup Name] reach the next level. I'm ready to roll up my sleeves\r
            and build something amazing together! \r
        </div>\r
    </div>\r
\r
    <div class="closing">\r
        <div>Let's build the future,</div>\r
        <div class="signature">[Your Name]</div>\r
    </div>\r
</body>\r
</html>\r
`,Bee=[{id:"blank",name:"Blank Template",category:"General",description:"Start with a clean slate and create your own design",previewImage:"/cover-letter-previews/blank.png",htmlContent:_ee},{id:"minimal",name:"Minimal",category:"General",description:"Clean and simple design perfect for any industry",previewImage:"/cover-letter-previews/minimal.png",htmlContent:vee},{id:"professional",name:"Professional",category:"General",description:"Traditional format ideal for corporate positions",previewImage:"/cover-letter-previews/professional.png",htmlContent:xee},{id:"modern",name:"Modern",category:"General",description:"Contemporary design with subtle color accents",previewImage:"/cover-letter-previews/modern.png",htmlContent:bee},{id:"creative",name:"Creative",category:"Creative",description:"Eye-catching design perfect for creative roles",previewImage:"/cover-letter-previews/creative.png",htmlContent:wee},{id:"tech-startup",name:"Tech Startup",category:"Technology",description:"Modern design perfect for tech companies and startups",previewImage:"/cover-letter-previews/tech-startup.png",htmlContent:See},{id:"finance",name:"Finance",category:"Finance",description:"Conservative and professional for financial services",previewImage:"/cover-letter-previews/finance.png",htmlContent:kee},{id:"healthcare",name:"Healthcare",category:"Healthcare",description:"Caring and professional design for healthcare roles",previewImage:"/cover-letter-previews/healthcare.png",htmlContent:jee},{id:"marketing",name:"Marketing",category:"Marketing",description:"Vibrant and creative design for marketing professionals",previewImage:"/cover-letter-previews/marketing.png",htmlContent:Mee},{id:"education",name:"Education",category:"Education",description:"Academic and professional for education sector",previewImage:"/cover-letter-previews/education.png",htmlContent:Cee},{id:"legal",name:"Legal",category:"Legal",description:"Traditional and formal for legal professionals",previewImage:"/cover-letter-previews/legal.png",htmlContent:Tee},{id:"engineering",name:"Engineering",category:"Engineering",description:"Technical and professional for engineering roles",previewImage:"/cover-letter-previews/engineering.png",htmlContent:Aee},{id:"sales",name:"Sales",category:"Sales",description:"Dynamic and results-focused for sales positions",previewImage:"/cover-letter-previews/sales.png",htmlContent:Ree},{id:"nonprofit",name:"Nonprofit",category:"Nonprofit",description:"Mission-focused design for nonprofit organizations",previewImage:"/cover-letter-previews/nonprofit.png",htmlContent:Eee},{id:"consulting",name:"Consulting",category:"Consulting",description:"Strategic and analytical for consulting firms",previewImage:"/cover-letter-previews/consulting.png",htmlContent:Iee},{id:"startup",name:"Startup",category:"Startup",description:"Energetic and innovative for startup environments",previewImage:"/cover-letter-previews/startup.png",htmlContent:zee}],Pee=async()=>Promise.resolve(Bee),Nee=({wizardState:e,onUpdateState:t,onNext:r})=>{const[n,l]=F.useState([]),[i,d]=F.useState(!0),[p,g]=F.useState(0);F.useEffect(()=>{(async()=>{try{const A=await Pee();if(l(A),e.selectedTemplate){const E=A.findIndex(P=>P.id===e.selectedTemplate.id);E!==-1&&g(E)}else if(A.length>0){const E=A[0];g(0),t({selectedTemplate:{id:E.id,name:E.name,htmlContent:E.htmlContent,category:E.category,description:E.description},editedHtml:E.htmlContent})}}catch(A){console.error("Failed to load templates:",A)}finally{d(!1)}})()},[e.selectedTemplate,t]);const x=n[p],y=()=>{const _=p===0?n.length-1:p-1;g(_);const A=n[_];A&&t({selectedTemplate:{id:A.id,name:A.name,htmlContent:A.htmlContent,category:A.category,description:A.description},editedHtml:A.htmlContent})},w=()=>{const _=p===n.length-1?0:p+1;g(_);const A=n[_];A&&t({selectedTemplate:{id:A.id,name:A.name,htmlContent:A.htmlContent,category:A.category,description:A.description},editedHtml:A.htmlContent})},j=_=>{g(_);const A=n[_];A&&t({selectedTemplate:{id:A.id,name:A.name,htmlContent:A.htmlContent,category:A.category,description:A.description},editedHtml:A.htmlContent})};return i?s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:f.spacing.lg},children:[s.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e2e8f0",borderTop:"4px solid var(--accent-primary)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Loading templates..."})]}):n.length===0?s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:f.spacing.lg},children:[s.jsx(wr,{style:{color:f.colors.neutral[600]},children:"No Templates Available"}),s.jsx(Ct,{style:{color:f.colors.neutral[500]},children:"Please check your template configuration."})]}):s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:f.spacing.xl,backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:f.spacing.xl},children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:"Choose a Template"}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Select a professional template for your cover letter"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.xl,marginBottom:f.spacing.lg,flex:1,minHeight:"600px"},children:[s.jsx(ot,{variant:"secondary",onClick:y,style:{width:"64px",height:"64px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:s.jsx(Fd,{size:32})}),s.jsxs(jt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},style:{width:"600px",height:"780px",backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`3px solid ${f.colors.primary.main}`,boxShadow:"0 8px 25px 0 rgba(0, 0, 0, 0.15)",overflow:"hidden",position:"relative",aspectRatio:"8.5 / 11"},children:[s.jsx("iframe",{srcDoc:x?.htmlContent,style:{width:"850px",height:"1100px",border:"none",transform:"scale(0.7)",transformOrigin:"top left",pointerEvents:"none"},title:`${x?.name} Preview`}),s.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",padding:f.spacing.md,textAlign:"center"},children:s.jsx(Ct,{style:{color:"white",fontWeight:"600"},children:x?.name})})]},p),s.jsx(ot,{variant:"secondary",onClick:w,style:{width:"64px",height:"64px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:s.jsx(za,{size:32})})]}),s.jsx("div",{style:{display:"flex",gap:f.spacing.md,marginBottom:f.spacing.xl,padding:f.spacing.md,backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.lg,maxWidth:"100%",overflowX:"auto"},children:n.map((_,A)=>s.jsxs(jt.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(A),style:{width:"80px",height:"104px",backgroundColor:"#ffffff",borderRadius:f.borderRadius.md,border:A===p?`2px solid ${f.colors.primary.main}`:`1px solid ${f.colors.neutral[200]}`,overflow:"hidden",cursor:"pointer",position:"relative",flexShrink:0},children:[s.jsx("iframe",{srcDoc:_.htmlContent,style:{width:"340px",height:"442px",border:"none",transform:"scale(0.235)",transformOrigin:"top left",pointerEvents:"none"},title:`${_.name} Small Preview`}),A===p&&s.jsx("div",{style:{position:"absolute",top:"4px",right:"4px",width:"12px",height:"12px",backgroundColor:f.colors.primary.main,borderRadius:"50%",border:"2px solid white"}})]},_.id))}),s.jsxs("div",{style:{textAlign:"center",maxWidth:"600px",marginTop:"auto",paddingBottom:f.spacing.xl},children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.sm},children:x?.name}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:x?.description||"Professional cover letter template"})]})]})},Dee=({wizardState:e,onUpdateState:t,onNext:r})=>{const[n,l]=F.useState(e.editedHtml||e.selectedTemplate?.htmlContent||""),[i,d]=F.useState(e.promptInstructions||""),[p,g]=F.useState(!1);F.useEffect(()=>{e.editedHtml&&n!==e.editedHtml&&l(e.editedHtml)},[e.editedHtml,n]);const x=w=>{l(w),t({editedHtml:w})},y=async()=>{if(!(!n||!i.trim())){g(!0);try{const w=await Wn.generateOptimized({html:n,prompt:i,resume_content:e.selectedResumeName||"",job_description:e.jobInfo?.description||""});w?.success&&w.html?(x(w.html),t({promptInstructions:i}),w.thinking&&console.log("AI Optimization Thinking:",w.thinking)):console.error("Failed to optimize template: Invalid response")}catch(w){console.error("Failed to optimize template:",w)}finally{g(!1)}}};return s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`},children:s.jsxs("div",{children:[s.jsx(wr,{style:{marginBottom:f.spacing.sm},children:"Edit Your Cover Letter Template"}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Focus on styling your cover letter template. AI will generate text and apply it to the template based on your instructions in step 3."})]})}),s.jsxs("div",{style:{flex:1,display:"flex",minHeight:0},children:[s.jsx(Yd,{value:n,onChange:x,title:"HTML Source",placeholder:"Enter your HTML content here...",style:{width:"50%",borderRight:`1px solid ${f.colors.neutral[200]}`}}),s.jsxs("div",{style:{width:"50%",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700]},children:"Preview"}),s.jsx("div",{style:{flex:1,padding:f.spacing.md,background:f.colors.neutral.white,overflow:"auto"},children:s.jsx("iframe",{srcDoc:n,style:{width:"100%",height:"100%",border:"none",background:f.colors.neutral.white},title:"Cover Letter Preview"})})]})]}),s.jsx("div",{style:{padding:f.spacing.lg,borderTop:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.neutral[50]},children:s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("input",{value:i,onChange:w=>d(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!p&&i.trim()&&(w.preventDefault(),y())},placeholder:"Prompt to optimize cover letter (e.g., 'Make it more professional', 'Add a colorful header', 'Change font to serif')",style:{flex:1,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,padding:`${f.spacing.sm} ${f.spacing.md}`,fontSize:f.typography.fontSize.sm,outline:"none"}}),s.jsxs(ot,{variant:"primary",onClick:y,disabled:p||!i.trim(),children:[s.jsx(UR,{size:16}),p?"Optimizing...":"Apply Prompt"]})]})})]})},Lee=({resume:e,isOpen:t,onClose:r})=>e?s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3},onClick:r}),s.jsxs("div",{style:{position:"fixed",top:0,right:t?0:"-600px",width:"600px",height:"100vh",backgroundColor:f.colors.neutral.white,boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)",zIndex:1001,display:"flex",flexDirection:"column",transition:"right 0.3s ease-in-out"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(Lo,{size:20,color:f.colors.primary.main}),s.jsxs("div",{children:[s.jsx(wr,{style:{margin:0,fontSize:f.typography.fontSize.lg},children:"Resume Preview"}),s.jsx(dr,{style:{color:f.colors.neutral[600],margin:0},children:e.file_name})]})]}),s.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor=f.colors.neutral[200]},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20,color:f.colors.neutral[600]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:s.jsx(ZE,{resume:e,onClose:()=>{},hideHeader:!0})})]})]}):null,Oee=({template:e,isOpen:t,onClose:r})=>e?s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3},onClick:r}),s.jsxs("div",{style:{position:"fixed",top:0,right:t?0:"-600px",width:"600px",height:"100vh",backgroundColor:f.colors.neutral.white,boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.15)",zIndex:1001,display:"flex",flexDirection:"column",transition:"right 0.3s ease-in-out"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(dp,{size:20,color:f.colors.primary.main}),s.jsxs("div",{children:[s.jsx(wr,{style:{margin:0,fontSize:f.typography.fontSize.lg},children:"ATS Template Preview"}),s.jsx(dr,{style:{color:f.colors.neutral[600],margin:0},children:e.name})]})]}),s.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor=f.colors.neutral[200]},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20,color:f.colors.neutral[600]})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:e.original_html?s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsx("iframe",{srcDoc:`
                  <div style="padding: 16px; background-color: #f9fafb; min-height: 100vh; box-sizing: border-box;">
                    ${e.original_html}
                  </div>
                `,style:{width:"100%",height:"100%",border:"none",backgroundColor:"#f9fafb"},title:"ATS Template Preview"})}):s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:f.spacing.md,color:f.colors.neutral[500],textAlign:"center",padding:f.spacing.lg,backgroundColor:f.colors.neutral[50]},children:[s.jsx(dp,{size:48,color:f.colors.neutral[300]}),s.jsxs("div",{children:[s.jsx(wr,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.sm},children:"No Preview Available"}),s.jsx(dr,{style:{color:f.colors.neutral[500]},children:"This ATS template doesn't have HTML content yet."})]})]})})]})]}):null,Fee=({wizardState:e,onUpdateState:t,onNext:r})=>{const[n,l]=F.useState([]),[i,d]=F.useState([]),[p,g]=F.useState(!0),[x,y]=F.useState(e.selectedResumeId||""),[w,j]=F.useState(e.selectedATSTemplateId||""),[_,A]=F.useState(e.selectedResumeId?"resume":e.selectedATSTemplateId?"ats":null),[E,P]=F.useState(e.coverLetterInstructions||""),[z,B]=F.useState(null),[D,U]=F.useState(null),[G,$]=F.useState(!1),[re,Q]=F.useState(null);F.useEffect(()=>{(async()=>{try{if(!await mr.getValidToken()){console.log(" No auth token available, skipping data load"),g(!1);return}const[S,a]=await Promise.allSettled([_r.listResumes(),ln.listTemplates()]);if(S.status==="fulfilled"?(console.log(" Loaded resumes:",S.value),l(S.value)):console.error(" Failed to load resumes:",S.reason),a.status==="fulfilled"&&a.value?.success){const k=a.value.templates?.filter(N=>N.example_ats_resume_id&&N.example_ats_resume_id.trim()!=="")||[];console.log(" Loaded ATS templates:",k),d(k)}else console.error(" Failed to load ATS templates:",a.status==="fulfilled"?a.value:a.reason)}catch(R){console.error(" Failed to load data:",R)}finally{g(!1)}})()},[]);const H=M=>{y(M),j(""),A("resume");const R=n.find(S=>S.id===M);t({selectedResumeId:M,selectedResumeName:R?.file_name,selectedATSTemplateId:"",selectedATSTemplateName:""})},Y=M=>{j(M),y(""),A("ats");const R=i.find(S=>S.id===M);t({selectedATSTemplateId:M,selectedATSTemplateName:R?.name,selectedResumeId:"",selectedResumeName:""})},T=M=>{P(M),t({coverLetterInstructions:M})},o=async()=>{if(!(!E||!e.templateId))try{console.log(" Auto-saving cover letter instructions on blur...");const{coverLetterApiService:M}=await Qt(async()=>{const{coverLetterApiService:S}=await Promise.resolve().then(()=>Ip);return{coverLetterApiService:S}},void 0,import.meta.url);(await M.saveStep3Data(e.templateId,{user_instruction:E,example_resume_id:x||void 0,example_ats_template_id:w||void 0})).success&&console.log(" Auto-saved cover letter instructions")}catch(M){console.error(" Failed to auto-save instructions:",M)}};Vt.useEffect(()=>{t({selectedResumeId:x,selectedResumeName:n.find(M=>M.id===x)?.file_name,selectedATSTemplateId:w,selectedATSTemplateName:i.find(M=>M.id===w)?.name,coverLetterInstructions:E})},[x,w,E,n,i,t]);const c=()=>{window.open("/ats-templates","_blank")},h=M=>{B(M),U(null),Q("resume"),$(!0)},v=M=>{U(M),B(null),Q("ats"),$(!0)},b=()=>{$(!1),B(null),U(null),Q(null)};return p?s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:"#ffffff",borderBottom:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{width:"200px",height:"24px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.xs,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"300px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]}),s.jsxs("div",{style:{flex:1,padding:f.spacing.xl,display:"flex",flexDirection:"column",gap:f.spacing.xl},children:[s.jsxs("div",{children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg},children:s.jsx("div",{style:{width:"120px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:f.spacing.lg},children:[1,2].map(M=>s.jsx("div",{style:{padding:f.spacing.lg,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:f.spacing.md},children:[s.jsx("div",{style:{width:"24px",height:"24px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{width:"180px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.xs,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"140px",height:"14px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.xs,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"100px",height:"12px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]})]})},M))})]}),s.jsxs("div",{children:[s.jsx("div",{style:{width:"180px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"250px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginBottom:f.spacing.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"100%",height:"120px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]})]}),s.jsx("style",{children:`
            @keyframes shimmer {
              0% { opacity: 0.6; }
              50% { opacity: 1; }
              100% { opacity: 0.6; }
            }
          `})]}):s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:"#ffffff",borderBottom:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:"Select Resume or ATS Template"}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Pick a resume or ATS template to create a cover letter. This is just a placeholder and will be replaced by your actual application document."})]}),s.jsxs("div",{style:{flex:1,padding:f.spacing.xl,display:"flex",flexDirection:"column",gap:f.spacing.xl},children:[s.jsxs("div",{style:{opacity:_==="ats"?.5:1,transition:"opacity 0.2s ease"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg},children:[s.jsx(wr,{style:{color:f.colors.neutral[900],fontSize:f.typography.fontSize.lg},children:"Option 1: Select Resume"}),n.length===0&&s.jsxs(ot,{variant:"secondary",onClick:c,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Create Resume",s.jsx($i,{size:14})]})]}),n.length===0?s.jsxs("div",{style:{textAlign:"center",padding:f.spacing.xl,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`2px dashed ${f.colors.neutral[300]}`},children:[s.jsx(Lo,{size:48,color:f.colors.neutral[400],style:{marginBottom:f.spacing.md}}),s.jsx(wr,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.sm,fontSize:f.typography.fontSize.lg},children:"No Resumes Found"}),s.jsx(Ct,{style:{color:f.colors.neutral[500],marginBottom:f.spacing.lg},children:"You need to create a resume first before generating a cover letter."}),s.jsxs(ot,{variant:"primary",onClick:c,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Go to ATS Resume",s.jsx($i,{size:14})]})]}):s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:f.spacing.lg},children:n.map(M=>s.jsx("div",{onClick:()=>H(M.id),style:{padding:f.spacing.lg,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:x===M.id?`2px solid ${f.colors.primary.main}`:`1px solid ${f.colors.neutral[200]}`,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{x!==M.id&&(R.currentTarget.style.borderColor=f.colors.neutral[300])},onMouseLeave:R=>{x!==M.id&&(R.currentTarget.style.borderColor=f.colors.neutral[200])},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:f.spacing.md},children:[s.jsx(Lo,{size:24,color:x===M.id?f.colors.primary.main:f.colors.neutral[500]}),s.jsxs("div",{style:{flex:1},children:[s.jsx(Ct,{style:{fontWeight:"600",color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:M.file_name}),s.jsxs(dr,{style:{color:f.colors.neutral[500]},children:["Created: ",new Date(M.created_at).toLocaleDateString()]})]}),s.jsx("button",{onClick:R=>{R.stopPropagation(),h(M)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",backgroundColor:"transparent",border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=f.colors.neutral[50],R.currentTarget.style.borderColor=f.colors.primary.main},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.borderColor=f.colors.neutral[300]},title:"Preview resume",children:s.jsx(os,{size:16,color:f.colors.neutral[600]})})]})},M.id))})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md,margin:`${f.spacing.lg} 0`},children:[s.jsx("div",{style:{flex:1,height:"1px",backgroundColor:f.colors.neutral[300]}}),s.jsx(Ct,{style:{color:f.colors.neutral[500],fontWeight:"600",fontSize:f.typography.fontSize.sm},children:"OR"}),s.jsx("div",{style:{flex:1,height:"1px",backgroundColor:f.colors.neutral[300]}})]}),s.jsxs("div",{style:{opacity:_==="resume"?.5:1,transition:"opacity 0.2s ease"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg},children:[s.jsx(wr,{style:{color:f.colors.neutral[900],fontSize:f.typography.fontSize.lg},children:"Option 2: Select ATS Template"}),i.length===0&&s.jsxs(ot,{variant:"secondary",onClick:()=>window.open("/ats-templates","_blank"),style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Create ATS Template",s.jsx($i,{size:14})]})]}),i.length===0?s.jsxs("div",{style:{textAlign:"center",padding:f.spacing.lg,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`2px dashed ${f.colors.neutral[300]}`},children:[s.jsx(dp,{size:32,color:f.colors.neutral[400],style:{marginBottom:f.spacing.sm}}),s.jsx(Ct,{style:{color:f.colors.neutral[500],marginBottom:f.spacing.sm},children:"No ATS templates found. You can create one or skip this step."}),s.jsxs(ot,{variant:"secondary",onClick:()=>window.open("/ats-templates","_blank"),style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Create ATS Template",s.jsx($i,{size:14})]})]}):s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:f.spacing.lg},children:i.map(M=>s.jsx("div",{style:{padding:f.spacing.lg,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:w===M.id?`2px solid ${f.colors.primary.main}`:`1px solid ${f.colors.neutral[200]}`,cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onMouseEnter:R=>{w!==M.id&&(R.currentTarget.style.borderColor=f.colors.neutral[300])},onMouseLeave:R=>{w!==M.id&&(R.currentTarget.style.borderColor=f.colors.neutral[200])},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:f.spacing.md},children:[s.jsx(dp,{size:24,color:w===M.id?f.colors.primary.main:f.colors.neutral[500]}),s.jsxs("div",{onClick:()=>Y(M.id),style:{flex:1,cursor:"pointer"},children:[s.jsx(Ct,{style:{fontWeight:"600",color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:M.name}),s.jsxs(dr,{style:{color:f.colors.neutral[500]},children:["Created: ",new Date(M.created_at).toLocaleDateString()]})]}),s.jsx("button",{onClick:R=>{R.stopPropagation(),v(M)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",backgroundColor:"transparent",border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=f.colors.neutral[50],R.currentTarget.style.borderColor=f.colors.primary.main},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.borderColor=f.colors.neutral[300]},title:"Preview ATS template",children:s.jsx(os,{size:16,color:f.colors.neutral[600]})})]})},M.id))})]}),(x||w)&&s.jsxs("div",{children:[s.jsx(wr,{style:{color:f.colors.neutral[900],fontSize:f.typography.fontSize.lg,marginBottom:f.spacing.md},children:"Cover Letter Instructions"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.md},children:"Enter key instructions for your cover letter; these are crucial for job hunting."}),s.jsx("textarea",{value:E,onChange:M=>T(M.target.value),placeholder:"Example: Focus on my software development experience, highlight my leadership skills, mention my passion for fintech, keep it professional but personable...",style:{width:"100%",minHeight:"120px",padding:f.spacing.md,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,lineHeight:1.5,resize:"vertical",outline:"none",fontFamily:"inherit"},onFocus:M=>{M.target.style.borderColor=f.colors.primary.main},onBlur:M=>{M.target.style.borderColor=f.colors.neutral[300],o()}})]})]}),re==="resume"&&s.jsx(Lee,{resume:z,isOpen:G,onClose:b}),re==="ats"&&s.jsx(Oee,{template:D,isOpen:G,onClose:b})]})},Uee=({wizardState:e,onUpdateState:t,onNext:r,onComplete:n})=>{const[l,i]=F.useState(e.jobInfo?.description||""),[d,p]=F.useState(!1),[g,x]=F.useState("idle"),y=F.useRef({description:""});F.useEffect(()=>{y.current={description:e.jobInfo?.description||""}},[]),F.useEffect(()=>{e.jobInfo?.description&&i(e.jobInfo.description)},[e.jobInfo?.description]),F.useEffect(()=>{const z=setTimeout(()=>{l!==y.current.description&&l.trim()&&w(!1)},1e3);return()=>clearTimeout(z)},[l]);const w=async(z=!1)=>{p(!0),x("saving");try{const B={description:l.trim()};t({jobInfo:B}),x("saved"),y.current={description:l.trim()},z&&r()}catch(B){console.error("Failed to save job information:",B),x("idle")}finally{p(!1)}},j=async()=>{const z="https://www.linkedin.com/jobs/search";if(window.electronAPI?.openExternalUrl)try{const B=await window.electronAPI.openExternalUrl(z);B.success||(console.error("Failed to open LinkedIn URL:",B.error),window.open(z,"_blank","noopener,noreferrer"))}catch(B){console.error("Error opening external URL:",B),window.open(z,"_blank","noopener,noreferrer")}else window.open(z,"_blank","noopener,noreferrer")},_=l.length,A=5e3,E=_>A*.8,P=_>A;return s.jsxs("div",{style:{padding:f.spacing.xl,maxWidth:"800px",margin:"0 auto",height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:f.spacing.xl},children:[s.jsx(wr,{style:{marginBottom:f.spacing.md},children:"Job Information"}),s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.lg},children:"Provide job details to personalize your cover letter. This helps generate a tailored cover letter that matches the specific position requirements."})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xs,gap:f.spacing.sm},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700]},children:"Job Description"}),s.jsxs(ot,{variant:"secondary",size:"sm",onClick:j,style:{display:"flex",alignItems:"center",gap:f.spacing.xs,fontSize:f.typography.fontSize.xs,padding:`${f.spacing.xs} ${f.spacing.sm}`},children:[s.jsx($i,{size:12}),"Find Jobs"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:f.spacing.sm},children:[s.jsx(ir,{style:{color:f.colors.neutral[600]},children:"Paste the complete description so we can tailor your cover letter to the exact role."}),s.jsxs(ir,{style:{color:P?f.colors.accent.error:E?f.colors.accent.warning:f.colors.neutral[500]},children:[_,"/",A," characters"]})]}),s.jsx("textarea",{value:l,onChange:z=>i(z.target.value),placeholder:`Paste the complete job description here, including:\r
 Job title and company\r
 Required qualifications and skills\r
 Job responsibilities and duties\r
 Preferred experience and education\r
 Any specific requirements or keywords...`,style:{flex:1,minHeight:"300px",padding:f.spacing.md,border:`2px solid ${P?f.colors.accent.error:f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,lineHeight:"1.6",fontFamily:f.typography.fontFamily,resize:"none",outline:"none",transition:"border-color 0.2s ease"},onFocus:z=>{P||(z.target.style.borderColor=f.colors.accent.info)},onBlur:z=>{z.target.style.borderColor=P?f.colors.accent.error:f.colors.neutral[300]}})]}),(e.existingCoverLetterResult||e.finalHtml)&&s.jsxs("div",{style:{marginTop:f.spacing.lg,padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("input",{type:"checkbox",id:"regenerate-cover-letter",checked:e.shouldRegenerateCoverLetter||!1,onChange:z=>{const B=z.target.checked;t({shouldRegenerateCoverLetter:B})},style:{width:"16px",height:"16px",cursor:"pointer"}}),s.jsx("label",{htmlFor:"regenerate-cover-letter",style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700],cursor:"pointer",fontWeight:"500"},children:"Generate new cover letter with updated job information"})]}),s.jsx(ir,{style:{color:f.colors.neutral[600],marginTop:f.spacing.xs,marginLeft:"24px"},children:"Check this to create a new cover letter when you proceed to the next step"})]}),g==="saving"&&s.jsx(ir,{style:{color:f.colors.neutral[500],marginTop:f.spacing.xs},children:"Saving..."}),g==="saved"&&s.jsx(ir,{style:{color:f.colors.accent.success,marginTop:f.spacing.xs},children:" Saved automatically"})]})},Cn=({width:e,height:t,delay:r=0,opacity:n=.5})=>{const[l,i]=F.useState(0);F.useEffect(()=>{const p=setInterval(()=>{i(g=>(g+1)%4)},800+r*100);return()=>clearInterval(p)},[r]);const d=()=>{const p=e.includes("%")?parseFloat(e):100,g=e.includes("%")?"%":"px";switch(l){case 0:return e;case 1:return`${Math.min(p*1.3,100)}${g}`;case 2:return`${Math.max(p*.6,20)}${g}`;case 3:return`${p*.9}${g}`;default:return e}};return s.jsx("div",{style:{height:t,width:d(),backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:n,position:"relative",overflow:"hidden",transition:"width 0.6s ease-in-out",background:`linear-gradient(90deg,
          ${f.colors.neutral[100]} 0%,
          ${f.colors.neutral[200]} 30%,
          ${f.colors.neutral[300]} 60%,
          ${f.colors.neutral[200]} 90%,
          ${f.colors.neutral[100]} 100%)`,backgroundSize:"200% 100%",animation:"shimmer 2.5s ease-in-out infinite",animationDelay:`${r}s`},children:s.jsx("style",{children:`
          @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
          }
        `})})},$ee=({wizardState:e,onUpdateState:t,onComplete:r})=>{const[n,l]=F.useState(!1),[i,d]=F.useState(!1),[p,g]=F.useState(!1),[x,y]=F.useState(""),[w,j]=F.useState("Preparing cover letter generation..."),[_,A]=F.useState([]),[E,P]=F.useState(!1),[z,B]=F.useState(null);F.useEffect(()=>{e.existingCoverLetterResult&&!e.shouldRegenerateCoverLetter?(console.log(" Using existing cover letter result"),t({finalHtml:e.existingCoverLetterResult,coverLetterText:"Using existing cover letter result"})):(!e.finalHtml||e.shouldRegenerateCoverLetter)&&!n&&(console.log(" Generating new cover letter"),U())},[]),F.useEffect(()=>{e.finalHtml&&y(e.finalHtml)},[e.finalHtml]);const D=(re,Q=qr.THINKING)=>{const H={id:`thinking-${Date.now()}-${Math.random()}`,type:Q,text:re,color:Q===qr.THINKING?on.THINKING:on.RESULT,timestamp:new Date};A(Y=>[...Y,H])},U=async()=>{l(!0),j("Preparing cover letter generation..."),A([]);try{const re=e.editedHtml||e.selectedTemplate?.htmlContent||"",Q=e.jobInfo?.description||"",H=e.coverLetterInstructions||"";let Y="";if(e.selectedResumeId){console.log(" Fetching resume content for ID:",e.selectedResumeId),console.log(" Wizard state resume selection:",{selectedResumeId:e.selectedResumeId,selectedResumeName:e.selectedResumeName,selectedATSTemplateId:e.selectedATSTemplateId,selectedATSTemplateName:e.selectedATSTemplateName}),console.log(" Full wizard state:",{currentStep:e.currentStep,completedSteps:Array.from(e.completedSteps||[]),templateId:e.templateId,templateName:e.templateName,hasJobInfo:!!e.jobInfo,jobUrl:e.jobInfo?.url,jobDescription:e.jobInfo?.description});try{if(console.log(" Attempting to fetch resume with ID:",e.selectedResumeId),console.log(" Resume ID type:",typeof e.selectedResumeId),console.log(" Resume ID length:",e.selectedResumeId?.length),console.log(" Service gateway URL:",_r.serviceUrl),!e.selectedResumeId||e.selectedResumeId.trim()==="")throw new Error("Resume ID is empty or invalid");const v=await _r.getResume(e.selectedResumeId);if(console.log(" Resume API response:",v),v.success)if(v.resume?.resume_summary?.extracted_text)Y=v.resume.resume_summary.extracted_text,console.log(" Resume content extracted (structure 1), length:",Y.length);else if(v.resume?.extracted_text)Y=v.resume.extracted_text,console.log(" Resume content extracted (structure 2), length:",Y.length);else if(v.extracted_text)Y=v.extracted_text,console.log(" Resume content extracted (structure 3), length:",Y.length);else if(v.resume?.resume_text)Y=v.resume.resume_text,console.log(" Resume content extracted (structure 4 - resume_text), length:",Y.length);else if(v.resume?.text)Y=v.resume.text,console.log(" Resume content extracted (structure 5), length:",Y.length);else throw console.error(" Resume response structure:",{success:v.success,hasResume:!!v.resume,hasResumeSummary:!!v.resume?.resume_summary,hasExtractedText:!!v.resume?.resume_summary?.extracted_text,hasDirectExtractedText:!!v.resume?.extracted_text,hasRootExtractedText:!!v.extracted_text,hasText:!!v.resume?.text,resumeKeys:v.resume?Object.keys(v.resume):[],fullResponse:v}),new Error("Failed to fetch resume content: No text content found in response");else if(v.id&&v.user_id)if(console.log(" Direct resume object detected:",{id:v.id,fileName:v.file_name,hasBlobUrl:!!v.blob_url,responseKeys:Object.keys(v)}),v.resume_text)Y=v.resume_text,console.log(" Resume content extracted (direct structure 1 - resume_text), length:",Y.length);else if(v.extracted_text)Y=v.extracted_text,console.log(" Resume content extracted (direct structure 2), length:",Y.length);else if(v.text)Y=v.text,console.log(" Resume content extracted (direct structure 3), length:",Y.length);else if(v.resume_summary?.extracted_text)Y=v.resume_summary.extracted_text,console.log(" Resume content extracted (direct structure 4), length:",Y.length);else throw console.error(" Direct resume object structure:",{id:v.id,fileName:v.file_name,hasResumeText:!!v.resume_text,hasExtractedText:!!v.extracted_text,hasText:!!v.text,hasResumeSummary:!!v.resume_summary,allKeys:Object.keys(v)}),new Error("Failed to fetch resume content: No text content found in direct resume object");else throw console.error(" Resume API failed:",v),new Error(`Resume API failed: ${v.message||"Unknown error"}`)}catch(v){console.error(" Resume fetch error:",v),console.error(" Error type:",typeof v),console.error(" Error constructor:",v?.constructor?.name),console.error(" Error stack:",v instanceof Error?v.stack:"No stack trace");let b="Unknown error";throw v instanceof Error?(b=v.message,console.error(" Error message:",b),b.includes("fetch")&&console.error(" Network/fetch error detected"),(b.includes("auth")||b.includes("token"))&&console.error(" Authentication error detected"),b.includes("404")&&console.error(" Resume not found (404)")):console.error(" Non-Error object:",v),new Error(`Failed to fetch resume content: ${b}`)}}else if(e.selectedATSTemplateId){if(console.log(" Fetching ATS template content for ID:",e.selectedATSTemplateId),console.log(" ATS template ID type:",typeof e.selectedATSTemplateId),console.log(" ATS template ID length:",e.selectedATSTemplateId?.length),console.log(" Wizard state ATS selection:",{selectedATSTemplateId:e.selectedATSTemplateId,selectedATSTemplateName:e.selectedATSTemplateName,selectedResumeId:e.selectedResumeId,selectedResumeName:e.selectedResumeName}),!e.selectedATSTemplateId||e.selectedATSTemplateId.trim()==="")throw new Error("ATS template ID is empty or invalid");try{const v=await ln.getTemplate(e.selectedATSTemplateId);if(console.log(" ATS template API response:",v),v.success)if(v.template?.original_resume_text)Y=v.template.original_resume_text,console.log(" ATS template content extracted (structure 1), length:",Y.length);else if(v.template?.original_html)Y=v.template.original_html,console.log(" ATS template content extracted (structure 2), length:",Y.length);else if(v.original_resume_text)Y=v.original_resume_text,console.log(" ATS template content extracted (structure 3), length:",Y.length);else throw console.error(" ATS template response structure:",{success:v.success,hasTemplate:!!v.template,hasOriginalResumeText:!!v.template?.original_resume_text,hasOriginalHtml:!!v.template?.original_html,hasRootOriginalResumeText:!!v.original_resume_text,templateKeys:v.template?Object.keys(v.template):[],fullResponse:v}),new Error("Failed to fetch ATS template content: No text content found in response");else throw console.error(" ATS template API failed:",v),new Error(`ATS template API failed: ${v.message||"Unknown error"}`)}catch(v){console.error(" ATS template fetch error:",v),console.error(" Error type:",typeof v),console.error(" Error constructor:",v?.constructor?.name),console.error(" Error stack:",v instanceof Error?v.stack:"No stack trace");let b="Unknown error";throw v instanceof Error?(b=v.message,console.error(" Error message:",b),b.includes("fetch")&&console.error(" Network/fetch error detected"),(b.includes("auth")||b.includes("token"))&&console.error(" Authentication error detected"),b.includes("404")&&console.error(" ATS template not found (404)")):console.error(" Non-Error object:",v),new Error(`Failed to fetch ATS template content: ${b}`)}}else{if(console.error(" No resume or ATS template selected:",{selectedResumeId:e.selectedResumeId,selectedATSTemplateId:e.selectedATSTemplateId}),!e.selectedResumeId&&!e.selectedATSTemplateId){console.log(" No resume or ATS template selected - this might be a new template"),console.log(" Suggesting user to go back to Step 3 to select a resume or ATS template"),B("Please go back to Step 3 and select either a resume or ATS template to generate your cover letter.");return}throw new Error("No resume or ATS template selected for cover letter generation")}if(!re||!Y||!H)throw new Error("Missing required information for cover letter generation");let T="Company",o="Position";if(Q){const v=Q.match(/(?:at|@)\s+([A-Z][a-zA-Z\s&]+?)(?:\s|,|\.|$)/);v&&(T=v[1].trim());const b=Q.match(/(?:position|role|job):\s*([A-Z][a-zA-Z\s]+?)(?:\s|,|\.|$)/i);b&&(o=b[1].trim())}console.log("Generating cover letter with:",{templateHtml:re.substring(0,100)+"...",resumeContent:Y.substring(0,100)+"...",jobDescription:Q.substring(0,100)+"...",userInstructions:H,companyName:T,positionTitle:o}),j("Analyzing job description..."),console.log(" Step 1: Generating cover letter text...");const c=await Wn.generateTextDraft({resume_content:Y,job_description:Q,user_instructions:H,company_name:T,position_title:o});if(!c.success||!c.text)throw new Error("Failed to generate cover letter text: Invalid response");console.log(" Step 1 complete: Cover letter text generated"),c.thinking&&(console.log(" Text Generation Thinking:",c.thinking),D(`**Text Generation Thinking:**

${c.thinking}`)),j("Crafting your personalized cover letter..."),console.log(" Step 2: Applying text to template...");const h=await Wn.applyTextToTemplate({template_html:re,cover_letter_text:c.text,applicant_name:c.applicant_name||"",company_name:T,position_title:o});if(!h.success||!h.html)throw new Error("Failed to apply text to template: Invalid response");if(console.log(" Step 2 complete: Text applied to template"),h.thinking&&(console.log(" Template Application Thinking:",h.thinking),D(`**Template Application Thinking:**

${h.thinking}`)),e.templateId){j("Finalizing your cover letter..."),console.log(" Step 3: Saving final result to template...");try{(await Wn.saveStep5Data(e.templateId,h.html)).success&&console.log(" Step 3 complete: Final result saved to template")}catch(v){console.error(" Failed to save final result to template:",v)}}t({finalHtml:h.html,generationThinking:`Text Generation: ${c.thinking||"N/A"}

Template Application: ${h.thinking||"N/A"}`,coverLetterText:c.text,shouldRegenerateCoverLetter:!1}),D(" Cover letter generation complete!",qr.RESULT),console.log(" Cover letter generation complete!")}catch(re){console.error(" Failed to generate cover letter:",re),alert(`Failed to generate cover letter: ${re instanceof Error?re.message:"Unknown error"}`)}finally{l(!1)}},G=async()=>{if(!e.finalHtml){alert("No cover letter available to export");return}g(!0);try{const Q=`cover-letter-${new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}`,H=await fetch(`${rr}/api/pdf/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:e.finalHtml,filename:Q})});if(!H.ok)throw new Error(`PDF export failed: ${H.statusText}`);const Y=await H.json();if(Y.success&&Y.pdf_path)if(window.electronAPI?.openFile){const T=await window.electronAPI.openFile(Y.pdf_path);if(T.success)console.log("PDF exported and opened successfully:",Y.filename);else{console.error("Failed to open PDF:",T.error);const o=`${rr}/api/pdf/download/${encodeURIComponent(Y.pdf_path)}`;window.open(o,"_blank")}}else{const T=`${rr}/api/pdf/download/${encodeURIComponent(Y.pdf_path)}`,o=document.createElement("a");o.href=T,o.download=Y.filename,document.body.appendChild(o),o.click(),document.body.removeChild(o),console.log("PDF downloaded successfully:",Y.filename)}else throw new Error("PDF export failed: Invalid response")}catch(re){console.error("Failed to export PDF:",re),alert("Failed to export PDF. Please try again.")}finally{g(!1)}},$=re=>{y(re),t({finalHtml:re})};return n?s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.md},children:[s.jsxs("div",{style:{height:"32px",width:"320px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[s.jsx(An,{size:16,color:f.colors.primary.main,className:"animate-spin"}),s.jsx("span",{style:{marginLeft:f.spacing.sm,fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],fontFamily:f.typography.fontFamily},children:w})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx("div",{style:{height:"36px",width:"120px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.5}}),s.jsx("div",{style:{height:"36px",width:"120px",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,opacity:.5}})]})]}),s.jsx("div",{style:{height:"20px",width:"65%",backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{flex:1,overflow:"hidden"},children:s.jsx("div",{style:{height:"100%",padding:f.spacing.lg,display:"flex",justifyContent:"center"},children:s.jsx("div",{style:{width:"100%",maxWidth:"800px",display:"flex",flexDirection:"column"},children:s.jsxs("div",{style:{flex:1,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,backgroundColor:f.colors.neutral[50],padding:f.spacing.lg,display:"flex",flexDirection:"column",gap:f.spacing.md},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:f.spacing.lg},children:[s.jsx(Cn,{width:"200px",height:"24px",delay:.5}),s.jsx("div",{style:{marginTop:f.spacing.sm},children:s.jsx(Cn,{width:"150px",height:"16px",delay:.7})})]}),s.jsxs("div",{style:{marginBottom:f.spacing.md},children:[s.jsx(Cn,{width:"120px",height:"16px",delay:.9}),s.jsx("div",{style:{marginTop:f.spacing.sm},children:s.jsx(Cn,{width:"180px",height:"16px",delay:1.1})})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm,marginBottom:f.spacing.lg},children:[s.jsx(Cn,{width:"100%",height:"18px",delay:1.3}),s.jsx(Cn,{width:"95%",height:"16px",delay:1.5}),s.jsx(Cn,{width:"98%",height:"16px",delay:1.7}),s.jsx(Cn,{width:"92%",height:"16px",delay:1.9}),s.jsx(Cn,{width:"96%",height:"16px",delay:2.1})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm,marginBottom:f.spacing.lg},children:[s.jsx(Cn,{width:"100%",height:"16px",delay:2.3}),s.jsx(Cn,{width:"88%",height:"16px",delay:2.5}),s.jsx(Cn,{width:"94%",height:"16px",delay:2.7}),s.jsx(Cn,{width:"90%",height:"16px",delay:2.9})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[s.jsx(Cn,{width:"97%",height:"16px",delay:3.1}),s.jsx(Cn,{width:"85%",height:"16px",delay:3.3}),s.jsx(Cn,{width:"91%",height:"16px",delay:3.5})]}),s.jsxs("div",{style:{marginTop:f.spacing.xl},children:[s.jsx(Cn,{width:"80px",height:"16px",delay:3.7}),s.jsx("div",{style:{marginTop:f.spacing.lg},children:s.jsx(Cn,{width:"120px",height:"16px",delay:3.9})})]})]})]})})})})]}):s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:[z&&s.jsxs("div",{style:{padding:f.spacing.md,backgroundColor:f.colors.accent.error+"10",border:`1px solid ${f.colors.accent.error}`,borderRadius:f.borderRadius.md,margin:f.spacing.md,color:f.colors.accent.error},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:f.spacing.xs},children:" Missing Required Information"}),s.jsx("div",{children:z})]}),s.jsxs("div",{style:{flex:1,display:"flex",minHeight:0,height:"100%"},children:[i&&s.jsx(Yd,{value:x,onChange:$,title:"HTML Source (Editable)",placeholder:"HTML content will appear here...",style:{width:E?"33.33%":"50%",borderRight:`1px solid ${f.colors.neutral[200]}`}}),E&&s.jsxs("div",{style:{width:i?"33.33%":"50%",display:"flex",flexDirection:"column",borderRight:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700]},children:"Generation Thinking"}),s.jsxs("div",{style:{flex:1,background:"#ffffff",overflow:"auto",padding:f.spacing.sm},children:[_.map(re=>s.jsx(BX,{activity:re},re.id)),_.length===0&&s.jsx("div",{style:{padding:f.spacing.md,color:f.colors.neutral[500],fontStyle:"italic",textAlign:"center"},children:"No thinking activities yet. Generate a cover letter to see the AI's thought process."})]})]}),s.jsxs("div",{style:{width:i&&E?"33.33%":i||E?"50%":"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{padding:`${f.spacing.sm} ${f.spacing.md}`,background:f.colors.neutral[50],borderBottom:`1px solid ${f.colors.neutral[200]}`,fontSize:f.typography.fontSize.sm,fontWeight:600,color:f.colors.neutral[700],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{children:"Cover Letter Preview"}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.xs},children:[s.jsxs(ot,{variant:i?"primary":"secondary",onClick:()=>d(!i),style:{fontSize:f.typography.fontSize.xs,padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:[i?"Hide":"Show"," HTML"]}),s.jsx(ot,{variant:"secondary",onClick:G,disabled:p,style:{fontSize:f.typography.fontSize.xs,padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:p?s.jsxs(s.Fragment,{children:[s.jsx(Yw,{size:12,className:"animate-spin"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pa,{size:12}),"Export PDF"]})})]})]}),s.jsx("div",{style:{flex:1,background:"#ffffff",overflow:"auto"},children:s.jsx("iframe",{srcDoc:i?x:e.finalHtml,style:{width:"100%",height:"100%",border:"none",background:"#ffffff"},title:"Cover Letter Preview"})})]})]})]})},qee=()=>s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${f.spacing.lg} ${f.spacing.xl}`,backgroundColor:f.colors.neutral.white,borderBottom:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx("div",{style:{width:"80px",height:"36px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"200px",height:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]}),s.jsx("div",{style:{width:"300px",height:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]}),s.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:f.spacing.lg},children:[s.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid #e2e8f0",borderTop:"4px solid var(--accent-primary)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx(Ct,{style:{color:f.colors.neutral[600]},children:"Loading cover letter wizard..."})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:f.spacing.lg,backgroundColor:f.colors.neutral.white,borderTop:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{width:"100px",height:"36px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"80px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"80px",height:"36px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,animation:"shimmer 1.5s ease-in-out infinite"}})]}),s.jsx("style",{children:`
          @keyframes shimmer {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
          }
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}),Hee=({templateId:e,onBack:t,onStepChange:r})=>{const{wizardState:n,updateState:l,validateStep:i,goToStep:d,nextStep:p,previousStep:g,completeWizard:x,totalSteps:y,isLoading:w}=gee(e),[j,_]=F.useState(!1),[A,E]=F.useState("");F.useEffect(()=>{if(!e&&!n.templateName){const H=new Date,T=`Cover Letter Template - ${`${H.getMonth()+1}/${H.getDate()}/${H.getFullYear()}`}`;l({templateName:T})}},[e,n.templateName,l]),F.useEffect(()=>{const H=()=>{const o=new URLSearchParams(window.location.search).get("step");if(o){const c=parseInt(o);c>=1&&c<=5&&c!==n.currentStep&&d(c)}};H();const Y=()=>{H()};return window.addEventListener("popstate",Y),()=>{window.removeEventListener("popstate",Y)}},[e,n.currentStep,d]);const P=H=>{d(H),r&&r(H)},z=()=>{const H=n.currentStep+1;p(),r&&H<=y&&r(H)},B=()=>{const H=n.currentStep-1;g(),r&&H>=1&&r(H)};F.useEffect(()=>{j&&E(n.templateName||"")},[j,n.templateName]);const D=()=>{_(!0)},U=async()=>{if(A.trim()){const H=A.trim();if(l({templateName:H}),n.templateId)try{await Wn.updateTemplate(n.templateId,{name:H})}catch(Y){console.error("Failed to save template name:",Y)}}_(!1)},G=()=>{E(n.templateName||""),_(!1)},$=H=>{H.key==="Enter"?U():H.key==="Escape"&&G()},re=async()=>{try{if(console.log(" Completing cover letter wizard..."),n.templateId&&n.finalHtml){console.log(" Saving final cover letter result to template:",n.templateId);try{await Wn.saveStep5Data(n.templateId,n.finalHtml),console.log(" Final result saved successfully")}catch(H){console.error(" Failed to save final result:",H)}}x(),console.log(" Returning to cover letter listing page"),t()}catch(H){console.error("Failed to complete cover letter wizard:",H),t()}},Q=()=>{const H={wizardState:n,onUpdateState:l,onNext:p,onPrevious:g,onComplete:re};switch(n.currentStep){case 1:return s.jsx(Nee,{...H});case 2:return s.jsx(Dee,{...H});case 3:return s.jsx(Fee,{...H});case 4:return s.jsx(Uee,{...H});case 5:return s.jsx($ee,{...H});default:return s.jsx("div",{children:"Invalid Step"})}};return w?s.jsx(qee,{}):s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:f.colors.neutral[50]},children:[s.jsxs("div",{style:{padding:f.spacing.lg,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:"#ffffff",display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx(ot,{variant:"secondary",onClick:t,style:{padding:f.spacing.sm,minWidth:"auto"},children:s.jsx(Od,{size:20})}),j?s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("input",{type:"text",value:A,onChange:H=>E(H.target.value),onKeyDown:$,onBlur:U,autoFocus:!0,style:{fontSize:f.typography.fontSize.h1,fontWeight:"800",color:f.colors.neutral[900],border:`2px solid ${f.colors.primary.main}`,borderRadius:f.borderRadius.md,padding:`${f.spacing.xs} ${f.spacing.sm}`,backgroundColor:"#ffffff",outline:"none",minWidth:"450px",fontFamily:"inherit"},placeholder:"Enter template name..."}),s.jsx("button",{onClick:U,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.xs,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Ia,{size:16,color:f.colors.accent.success})}),s.jsx("button",{onClick:G,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.xs,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(cn,{size:16,color:f.colors.neutral[500]})})]}):s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,cursor:"pointer"},onClick:D,children:[s.jsx(u_,{style:{color:f.colors.neutral[900]},children:n.templateName||"Cover Letter Template"}),s.jsx("button",{onClick:D,style:{background:"none",border:"none",cursor:"pointer",padding:f.spacing.xs,borderRadius:f.borderRadius.sm,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Jw,{size:16,color:f.colors.neutral[500]})})]})]}),s.jsx("div",{style:{flex:1,overflow:"auto",backgroundColor:f.colors.neutral[50]},children:Q()}),s.jsx(yee,{currentStep:n.currentStep,totalSteps:y,canProceed:i(n.currentStep).canProceed,onPrevious:B,onNext:z,onComplete:re,onGoToStep:P,completedSteps:n.completedSteps,progressIndicator:s.jsx(mee,{currentStep:n.currentStep,totalSteps:y,completedSteps:n.completedSteps,onStepClick:P})})]})},Wee=({navParams:e,onClearNavParams:t})=>{const[r,n]=F.useState("list"),[l,i]=F.useState([]),[d,p]=F.useState(!0),[g,x]=F.useState(),y=()=>{const z=new URLSearchParams(window.location.search);return{templateId:z.get("templateId"),step:z.get("step")?parseInt(z.get("step")):void 0}},w=(z,B)=>{const D=new URL(window.location.href);z?D.searchParams.set("templateId",z):D.searchParams.delete("templateId"),B?D.searchParams.set("step",B.toString()):D.searchParams.delete("step"),window.history.pushState({},"",D.toString())};F.useEffect(()=>{(async()=>{try{p(!0);const B=await Wn.getTemplates();B.success&&B.templates&&i(B.templates)}catch(B){console.error("Failed to fetch cover letter templates:",B)}finally{p(!1)}})()},[]),F.useEffect(()=>{const z=y();z.templateId&&(console.log(" Initializing from URL:",z.templateId,"step:",z.step),x(z.templateId),n("wizard"))},[]),F.useEffect(()=>{e?.templateId&&(x(e.templateId),n("wizard"),w(e.templateId,e.step))},[e]),F.useEffect(()=>{const z=()=>{const B=y();B.templateId?(x(B.templateId),n("wizard")):(n("list"),x(void 0))};return window.addEventListener("popstate",z),()=>window.removeEventListener("popstate",z)},[]);const j=()=>{x(void 0),n("wizard"),w()},_=()=>{n("list"),x(void 0),w(),t&&t(),(async()=>{try{const B=await Wn.getTemplates();B.success&&B.templates&&i(B.templates),window.dispatchEvent(new CustomEvent("coverLetterUpdated"))}catch(B){console.error("Failed to fetch cover letter templates:",B)}})()},A=z=>{x(z.id),n("wizard"),w(z.id)},E=async z=>{try{(await Wn.deleteTemplate(z)).success&&i(D=>D.filter(U=>U.id!==z))}catch(B){console.error("Failed to delete cover letter template:",B)}},P=()=>{switch(r){case"wizard":return s.jsx(Hee,{templateId:g,onBack:_,onStepChange:z=>{w(g,z)}});default:return s.jsxs("div",{style:{width:"100%"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.xl},children:[s.jsxs("div",{children:[s.jsx(wr,{style:{color:f.colors.neutral[900],marginBottom:f.spacing.xs},children:"Cover Letters"}),s.jsxs(dr,{style:{color:f.colors.neutral[600]},children:[l.length," cover letter",l.length!==1?"s":""," available"]})]}),s.jsxs(ot,{variant:"primary",onClick:j,style:{display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx(qi,{size:16}),"Create Cover Letter"]})]}),d&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:f.spacing.xl},children:Array.from({length:4},(z,B)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,overflow:"hidden",boxShadow:f.shadows.sm},children:[s.jsxs("div",{style:{width:"100%",aspectRatio:"210 / 297",backgroundColor:f.colors.neutral[100],position:"relative",overflow:"hidden"},children:[s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:`linear-gradient(90deg,
                            transparent 0%,
                            ${f.colors.neutral[200]} 50%,
                            transparent 100%)`,animation:"shimmer 2s infinite",transform:"translateX(-100%)"}}),s.jsx("style",{children:`
                          @keyframes shimmer {
                            0% { transform: translateX(-100%); }
                            100% { transform: translateX(100%); }
                          }
                        `}),s.jsx("div",{style:{position:"absolute",top:f.spacing.sm,right:f.spacing.sm,width:"60px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{padding:f.spacing.md,borderTop:`1px solid ${f.colors.neutral[100]}`},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{height:"20px",width:"70%",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}}),s.jsx("div",{style:{height:"14px",width:"40%",backgroundColor:f.colors.neutral[150],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{marginLeft:f.spacing.sm},children:s.jsx("div",{style:{width:"24px",height:"24px",backgroundColor:f.colors.neutral[150],borderRadius:f.borderRadius.sm}})})]})})]},B))}),!d&&l.length>0&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:f.spacing.xl},children:l.map(z=>s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,overflow:"hidden",cursor:"pointer",transition:"all 0.2s ease",boxShadow:f.shadows.sm},whileHover:{boxShadow:f.shadows.lg,y:-4},onClick:()=>A(z),children:[s.jsxs("div",{style:{width:"100%",aspectRatio:"210 / 297",backgroundColor:f.colors.neutral[50],position:"relative",overflow:"hidden"},children:[z.example_cover_letter_result?s.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",backgroundColor:"#ffffff",position:"relative"},children:s.jsx("iframe",{srcDoc:`
                              <html>
                                <head>
                                  <style>
                                    body {
                                      margin: 0;
                                      padding: 12px;
                                      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                                      font-size: 14px;
                                      line-height: 1.5;
                                      color: #333;
                                      background: white;
                                      width: 210mm;
                                      min-height: 297mm;
                                      box-sizing: border-box;
                                      transform-origin: top left;
                                      zoom: 0.35;
                                    }
                                    * {
                                      box-sizing: border-box;
                                    }
                                  </style>
                                </head>
                                <body>
                                  ${z.example_cover_letter_result}
                                </body>
                              </html>
                            `,style:{width:"100%",height:"100%",border:"none",backgroundColor:"#ffffff",pointerEvents:"none"},title:`Preview of ${z.name}`})}):s.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:f.colors.neutral[400],backgroundColor:"#ffffff",backgroundImage:`
                              linear-gradient(${f.colors.neutral[200]} 1px, transparent 1px),
                              linear-gradient(90deg, ${f.colors.neutral[200]} 1px, transparent 1px)
                            `,backgroundSize:"20px 20px"},children:[s.jsx(Lo,{size:48,color:f.colors.neutral[300]}),s.jsx(ir,{style:{color:f.colors.neutral[500],marginTop:f.spacing.sm,textAlign:"center"},children:"In Progress"})]}),s.jsx("div",{style:{position:"absolute",top:f.spacing.sm,right:f.spacing.sm,padding:"4px 8px",borderRadius:f.borderRadius.sm,fontSize:f.typography.fontSize.xs,fontWeight:600,backgroundColor:z.example_cover_letter_result?f.colors.accent.success:f.colors.neutral[600],color:"#ffffff",boxShadow:f.shadows.sm},children:z.example_cover_letter_result?"Complete":"In Progress"})]}),s.jsx("div",{style:{padding:f.spacing.md,borderTop:`1px solid ${f.colors.neutral[100]}`,overflow:"visible"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx(wr,{style:{fontSize:f.typography.fontSize.md,marginBottom:f.spacing.xs,color:f.colors.neutral[900],overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:z.name}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(xs,{size:12,color:f.colors.neutral[400]}),s.jsx(ir,{style:{color:f.colors.neutral[500]},children:new Date(z.updated_at||z.created_at||Date.now()).toLocaleDateString()})]})]}),s.jsx("div",{style:{marginLeft:f.spacing.sm},onClick:B=>B.stopPropagation(),children:s.jsx(E_,{actions:[{id:"delete",label:"Delete",icon:s.jsx(Ca,{size:14}),onClick:()=>{confirm("Are you sure you want to delete this cover letter template?")&&E(z.id)},variant:"danger"}],size:"sm"})})]})})]},z.id))}),!d&&l.length===0&&s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{textAlign:"center",padding:f.spacing.xl,backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`2px dashed ${f.colors.neutral[300]}`},children:[s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx(wr,{style:{color:f.colors.neutral[600],marginBottom:f.spacing.sm},children:"No Cover Letters Yet"}),s.jsx(Ct,{style:{color:f.colors.neutral[500]},children:"Create your first cover letter using our professional templates and AI assistance."})]}),s.jsxs(ot,{variant:"primary",onClick:j,children:[s.jsx(qi,{size:16,style:{marginRight:f.spacing.xs}}),"Create Your First Cover Letter"]})]})]})}};return s.jsx(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},style:{minHeight:"100vh",backgroundColor:f.colors.neutral[50],padding:r==="wizard"?0:f.spacing.xl},children:s.jsx("div",{style:{width:"100%",margin:"0 auto"},children:P()})})},Vee=`${rr}/api`;class Gee{async makeRequest(t,r={}){const n=`${Vee}${t}`,l={headers:{"Content-Type":"application/json",...r.headers},...r};try{const i=await fetch(n,l);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return await i.json()}catch(i){throw console.error(` API request failed for ${t}:`,i),i}}async startHunting(t,r,n){return this.makeRequest(`/linkedin-bot/${t}/${r}/start`,{method:"POST",body:JSON.stringify(n)})}async stopHunting(t){return this.makeRequest(`/linkedin-bot/${t}/stop`,{method:"POST"})}async pauseHunting(t){return this.makeRequest(`/linkedin-bot/${t}/pause`,{method:"POST"})}async resumeHunting(t){return this.makeRequest(`/linkedin-bot/${t}/resume`,{method:"POST"})}async getBotStatus(t){return this.makeRequest(`/linkedin-bot/${t}/status`)}async saveJwtToken(t,r){return this.makeRequest("/auth/save-jwt",{method:"POST",body:JSON.stringify({jwt_token:t,user_info:r})})}async getAuthStatus(){return this.makeRequest("/auth/status")}async logout(){return this.makeRequest("/auth/logout",{method:"POST"})}async healthCheck(){return this.makeRequest("/status")}}const ba=new Gee,Wb=Object.freeze(Object.defineProperty({__proto__:null,linkedinBotApi:ba},Symbol.toStringTag,{value:"Module"})),Kee=()=>{const[e,t]=F.useState(!1),[r,n]=F.useState([]),[l,i]=F.useState("disconnected"),[d,p]=F.useState(null),[g]=F.useState(()=>{const z=Date.now().toString(36),B=Math.random().toString(36).substr(2,6);return`linkedin_session_${z}_${B}`}),x=F.useCallback((z,B)=>{const D={type:z,message:B,timestamp:new Date().toISOString(),session_id:g};n(U=>[...U,D])},[g]);F.useEffect(()=>{const z=setInterval(async()=>{try{const D=await(await fetch(`${rr}/api/activity/pending/${g}`)).json();D.messages&&D.messages.length>0&&D.messages.forEach(U=>{x(U.type||"activity",U.message||"Activity update")})}catch(B){console.error("Error polling for activity messages:",B)}},500);return()=>{clearInterval(z)}},[g,x]);const y=async()=>{if(console.log(" connectToBackend called"),e){console.log("Already connected to backend");return}i("connecting"),n([]);try{const z=await ba.getAuthStatus();console.log("Backend connection successful:",z),t(!0),i("connected"),x("connection","Connected to LinkedIn Bot REST API server"),await j()}catch(z){console.error(" Failed to connect to backend:",z),i("error"),x("error",`Failed to connect to backend: ${z}`)}},w=()=>{console.log(" Disconnecting from backend..."),t(!1),i("disconnected"),x("connection","Disconnected from LinkedIn Bot REST API server")},j=async()=>{try{console.log("Requesting bot status...");const z=await ba.getBotStatus(g);console.log("Bot status received:",z),p({bot_id:z.bot_id,is_running:z.is_running||!1,status:z.status||"unknown",current_url:z.current_url,has_browser:z.has_browser||!1,has_page:z.has_page||!1}),x("status",`Bot status: ${z.status}`)}catch(z){console.error(" Failed to get bot status:",z),x("error",`Failed to get bot status: ${z}`)}},_=async()=>{try{console.log("Starting LinkedIn Bot...");const z=Do()||"anonymous",B=await ba.startHunting(z,g,{linkedin_starter_url:"https://linkedin.com/jobs/search/",config:{}});B.success?(x("action","LinkedIn Bot started successfully"),await j()):x("error",`Failed to start bot: ${B.message}`)}catch(z){console.error(" Failed to start bot:",z),x("error",`Failed to start bot: ${z}`)}},A=async()=>{try{console.log(" Stopping LinkedIn Bot...");const z=await ba.stopHunting(g);z.success?(x("action","LinkedIn Bot stopped successfully"),await j()):x("error",`Failed to stop bot: ${z.message}`)}catch(z){console.error(" Failed to stop bot:",z),x("error",`Failed to stop bot: ${z}`)}},E=async()=>{try{console.log(" Pausing LinkedIn Bot...");const z=await ba.pauseHunting(g);z.success?(x("action","LinkedIn Bot paused successfully"),await j()):x("error",`Failed to pause bot: ${z.message}`)}catch(z){console.error(" Failed to pause bot:",z),x("error",`Failed to pause bot: ${z}`)}},P=async()=>{try{console.log(" Resuming LinkedIn Bot...");const z=await ba.resumeHunting(g);z.success?(x("action","LinkedIn Bot resumed successfully"),await j()):x("error",`Failed to resume bot: ${z.message}`)}catch(z){console.error(" Failed to resume bot:",z),x("error",`Failed to resume bot: ${z}`)}};return s.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[s.jsx("h1",{children:"LinkedIn Bot Control Panel"}),s.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"8px"},children:[s.jsx("h3",{children:"Connection Status"}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Status:"}),s.jsx("span",{style:{marginLeft:"10px",padding:"4px 8px",borderRadius:"4px",backgroundColor:l==="connected"?"#d4edda":l==="connecting"?"#fff3cd":l==="error"?"#f8d7da":"#f8f9fa",color:l==="connected"?"#155724":l==="connecting"?"#856404":l==="error"?"#721c24":"#6c757d"},children:l})]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Session ID:"})," ",g]}),s.jsx("div",{children:e?s.jsx("button",{onClick:w,style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Disconnect"}):s.jsx("button",{onClick:y,style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Connect to Backend"})})]}),d&&s.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"8px"},children:[s.jsx("h3",{children:"Bot Status"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Status:"})," ",d.status]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Running:"})," ",d.is_running?"Yes":"No"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Has Browser:"})," ",d.has_browser?"Yes":"No"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Has Page:"})," ",d.has_page?"Yes":"No"]}),d.current_url&&s.jsxs("div",{children:[s.jsx("strong",{children:"Current URL:"})," ",d.current_url]})]}),e&&s.jsxs("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"8px"},children:[s.jsx("h3",{children:"Bot Controls"}),s.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[s.jsx("button",{onClick:_,style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Start Bot"}),s.jsx("button",{onClick:A,style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Stop Bot"}),s.jsx("button",{onClick:E,style:{backgroundColor:"#ffc107",color:"black",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Pause Bot"}),s.jsx("button",{onClick:P,style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Resume Bot"}),s.jsx("button",{onClick:j,style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Refresh Status"})]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px"},children:[s.jsx("h3",{children:"Activity Log"}),s.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #eee",padding:"10px"},children:r.length===0?s.jsx("div",{style:{color:"#6c757d",fontStyle:"italic"},children:"No messages yet"}):r.map((z,B)=>s.jsxs("div",{style:{marginBottom:"8px",padding:"8px",borderLeft:"3px solid #007bff",backgroundColor:"#f8f9fa"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.xs,color:"#6c757d"},children:new Date(z.timestamp).toLocaleTimeString()}),s.jsx("div",{style:{fontWeight:"bold",color:"#007bff"},children:z.type}),s.jsx("div",{children:z.message})]},B))})]})]})},Yee=({job:e,onClick:t,onStatusUpdate:r,onDragStart:n,onDragEnd:l,getJobUrl:i})=>{const d=A=>!A.workflow_run_id,[p,g]=F.useState(!1),x=()=>{t(e)},y=A=>{g(!0),A.dataTransfer.setData("text/plain",e.id),A.dataTransfer.effectAllowed="move",n?.()},w=()=>{g(!1),l?.()},j=A=>{if(i){A.preventDefault();const E=i(e.id);navigator.clipboard.writeText(E),console.log("Job URL copied to clipboard:",E)}},_=A=>{if(!A)return"";try{let E;if(/^\d+(\.\d+)?$/.test(A)){const P=parseFloat(A);E=new Date(P>1e10?P:P*1e3)}else E=new Date(A);return isNaN(E.getTime())?"Invalid Date":E.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return"Invalid Date"}};return s.jsxs("div",{className:`job-card ${p?"dragging":""}`,onClick:x,onContextMenu:j,draggable:!0,onDragStart:y,onDragEnd:w,children:[s.jsxs("div",{className:"job-card-header",children:[s.jsx("h3",{className:"job-title",children:e.job_title}),d(e)&&s.jsx("div",{className:"manual-badge",children:"Manual"})]}),s.jsxs("div",{className:"job-card-body",children:[s.jsxs("div",{className:"company-info",children:[s.jsx("div",{className:"company-name",children:e.company_name}),s.jsx("div",{className:"location",children:e.location})]}),e.application_datetime&&s.jsxs("div",{className:"application-date",children:["Applied: ",_(e.application_datetime)]}),!d(e)&&e.ats_score!==void 0&&e.ats_score!==null&&s.jsxs("div",{className:"ats-score",children:["ATS Score: ",e.ats_score,"%"]}),!d(e)&&e.num_applicants!==void 0&&e.num_applicants!==null&&e.num_applicants>0&&s.jsxs("div",{className:"applicants-count",children:[e.num_applicants," applicants"]})]}),s.jsxs("div",{className:"job-card-footer",children:[e.post_time&&s.jsxs("div",{className:"post-date",children:["Posted: ",_(e.post_time)]}),e.application_url&&s.jsx("a",{href:e.application_url,target:"_blank",rel:"noopener noreferrer",className:"view-link",onClick:A=>{A.stopPropagation(),console.log("Opening job URL:",e.application_url)},children:"View Job"})]})]})},Jee=({status:e,title:t,applications:r,onJobClick:n,onStatusUpdate:l,onAddManualJob:i,onDeleteJob:d,isVisible:p,getJobUrl:g,onDragStart:x,onDragEnd:y})=>{const[w,j]=F.useState(!1),_=()=>"border-gray-200 bg-white",A=()=>"text-gray-700 bg-gray-100",E=B=>{B.preventDefault(),j(!0)},P=B=>{B.preventDefault(),j(!1)},z=B=>{B.preventDefault(),j(!1);const D=B.dataTransfer.getData("text/plain");D&&e&&l(D,e)};return p?s.jsxs("div",{className:`status-column ${_()} ${w?"drag-over":""}`,onDragOver:E,onDragLeave:P,onDrop:z,children:[s.jsxs("div",{className:`status-column-header ${A()}`,children:[s.jsx("h2",{className:"status-title",children:t}),s.jsx("span",{className:"status-count",children:r.length})]}),s.jsx("div",{className:`status-column-content ${w?"drag-over":""}`,children:r.length===0?s.jsxs("div",{className:"empty-column",children:[s.jsx("p",{children:"No applications"}),b8(e)&&i&&s.jsx("button",{className:"add-manual-job-button",onClick:()=>i(e),title:`Add manual job to ${t}`,children:"Add Job"})]}):s.jsxs("div",{className:"jobs-list",children:[r.map(B=>s.jsx(Yee,{job:B,onClick:n,onStatusUpdate:l,onDragStart:x,onDragEnd:y,getJobUrl:g},B.id)),b8(e)&&i&&s.jsx("button",{className:"add-manual-job-button",onClick:()=>i(e),title:`Add manual job to ${t}`,children:"Add Job"})]})})]}):null},Al=({label:e,value:t,onChange:r,placeholder:n,type:l="text",className:i="",required:d=!1,variant:p="default"})=>{const g=()=>{switch(p){case"large":return f.typography.fontSize.xl;case"medium":return f.typography.fontSize.lg;case"small":return f.typography.fontSize.sm;default:return f.typography.fontSize.base}};return s.jsxs("div",{className:`form-input-wrapper ${i}`,children:[e&&s.jsxs("label",{className:"form-input-label",style:{fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,marginBottom:f.spacing.xs,display:"block"},children:[e,d&&s.jsx("span",{className:"form-input-required",children:"*"})]}),s.jsx("input",{type:l,value:t,onChange:x=>r(x.target.value),placeholder:d&&!e?`${n} *`:n,className:"form-input",style:{fontSize:g(),padding:`${f.spacing.sm} ${f.spacing.md}`},required:d})]})},m9=({label:e,value:t,onChange:r,placeholder:n,rows:l=4,className:i="",required:d=!1})=>s.jsxs("div",{className:`form-textarea-wrapper ${i}`,children:[e&&s.jsxs("label",{className:"form-textarea-label",style:{fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,marginBottom:f.spacing.xs,display:"block"},children:[e,d&&s.jsx("span",{className:"form-textarea-required",children:"*"})]}),s.jsx("textarea",{value:t,onChange:p=>r(p.target.value),placeholder:n,rows:l,className:"form-textarea",style:{fontSize:f.typography.fontSize.base,padding:`${f.spacing.sm} ${f.spacing.md}`},required:d})]}),Uh=iU.CONTACTS;class ud{static async getAuthToken(){const{authService:t}=await Qt(async()=>{const{authService:n}=await Promise.resolve().then(()=>uU);return{authService:n}},void 0,import.meta.url),r=await t.getValidToken();if(!r)throw new Error("No authentication token available");return r}static async getContacts(t){try{const r=new URLSearchParams;t?.applicationHistoryId&&r.append("application_history_id",t.applicationHistoryId),t?.status&&r.append("status",t.status),t?.category&&r.append("category",t.category);const n=`${Uh}${r.toString()?`?${r.toString()}`:""}`,l=await Cr.get(n);if(!l.ok)throw new Error(`Failed to fetch contacts: ${l.statusText}`);return((await l.json()).contacts||[]).map(p=>this.convertSnakeToCamel(p))}catch(r){return console.error("Error fetching contacts:",r),[]}}static async getContact(t){try{const r=await Cr.get(`${Uh}/${t}`);if(!r.ok)throw new Error(`Failed to fetch contact: ${r.statusText}`);const n=await r.json();return n.contact?this.convertSnakeToCamel(n.contact):null}catch(r){return console.error("Error fetching contact:",r),null}}static async getContactsByIds(t){if(!t||t.length===0)return[];try{const r=t.filter(i=>i&&i.trim()!=="");if(r.length===0)return[];const n=r.map(i=>this.getContact(i));return(await Promise.all(n)).filter(i=>i!==null)}catch(r){return console.error("Error fetching contacts by IDs:",r),[]}}static async updateContact(t,r){try{const n=this.convertCamelToSnake(r),l=await Cr.patch(`${Uh}/${t}`,n);if(!l.ok)throw new Error(`Failed to update contact: ${l.statusText}`);const i=await l.json();return i.contact?this.convertSnakeToCamel(i.contact):null}catch(n){return console.error("Error updating contact:",n),null}}static async deleteContact(t,r){try{const n=await this.getAuthToken(),l=await ql(`${Uh}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}});if(!l.ok)throw new Error(`Failed to delete contact: ${l.statusText}`);return await this.removeContactFromApplication(r,t),!0}catch(n){return console.error("Error deleting contact:",n),!1}}static async removeContactFromApplication(t,r){try{const n=await this.getAuthToken(),l=await ql(`${SERVICE_GATEWAY_URL}/api/application-history/${t}`,{headers:{Authorization:`Bearer ${n}`}});if(!l.ok)throw new Error("Failed to fetch application history");const p=((await l.json()).application?.contact_ids||[]).filter(g=>g!==r);await ql(`${SERVICE_GATEWAY_URL}/api/application-history/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({contact_ids:p})})}catch(n){console.error("Error removing contact from application:",n)}}static async markAsOutreached(t){return this.updateContact(t,{status:"outreached",outreachedAt:new Date().toISOString()})}static convertSnakeToCamel(t){return{id:t.id,applicationHistoryId:t.application_history_id,jobTitle:t.job_title,company:t.company,name:t.name,targetRole:t.target_role,profilePictureUrl:t.profile_picture_url,linkedinUrl:t.linkedin_url,connectionDegree:t.connection_degree,category:t.category,about:t.about,workHistory:t.work_history||[],education:t.education||[],recentActivity:t.recent_activity||[],whyOutreach:t.why_outreach,personalizedOutreachTips:t.personalized_outreach_tips||[],draftMessage:t.draft_message,status:t.status,collectedAt:t.collected_at,outreachedAt:t.outreached_at}}static convertCamelToSnake(t){const r={};return t.id&&(r.id=t.id),t.applicationHistoryId&&(r.application_history_id=t.applicationHistoryId),t.jobTitle&&(r.job_title=t.jobTitle),t.company&&(r.company=t.company),t.name&&(r.name=t.name),t.targetRole&&(r.target_role=t.targetRole),t.profilePictureUrl&&(r.profile_picture_url=t.profilePictureUrl),t.linkedinUrl&&(r.linkedin_url=t.linkedinUrl),t.connectionDegree&&(r.connection_degree=t.connectionDegree),t.category&&(r.category=t.category),t.about&&(r.about=t.about),t.workHistory&&(r.work_history=t.workHistory),t.education&&(r.education=t.education),t.recentActivity&&(r.recent_activity=t.recentActivity),t.whyOutreach&&(r.why_outreach=t.whyOutreach),t.personalizedOutreachTips&&(r.personalized_outreach_tips=t.personalizedOutreachTips),t.draftMessage&&(r.draft_message=t.draftMessage),t.status&&(r.status=t.status),t.collectedAt&&(r.collected_at=t.collectedAt),t.outreachedAt&&(r.outreached_at=t.outreachedAt),r}}const Zee=({jobId:e,interviewRounds:t=[],onUpdate:r})=>{const[n,l]=F.useState(t),[i,d]=F.useState(!1),[p,g]=F.useState(null),[x,y]=F.useState(!1),[w,j]=F.useState(""),[_,A]=F.useState(""),E=()=>{j(""),A(""),d(!1),g(null)},P=async()=>{if(!w||!_){alert("Round number and notes are required");return}const U=new Date().toISOString(),G={id:`round_${Date.now()}`,round_type:`Interview Round ${w}`,scheduled_date:"",completed_date:"",interviewer_name:"",interviewer_title:"",status:"scheduled",notes:_,outcome:"pending",created_at:U,updated_at:U},$=[...n,G];if(l($),r){y(!0);try{await r(e,$),E()}catch(re){console.error("Failed to save interview round:",re),alert("Failed to save interview round"),l(n)}finally{y(!1)}}else E()},z=async()=>{if(!p||!w||!_){alert("Round number and notes are required");return}const U=n.map(G=>G.id===p?{...G,round_type:`Interview Round ${w}`,notes:_,updated_at:new Date().toISOString()}:G);if(l(U),r){y(!0);try{await r(e,U),E()}catch(G){console.error("Failed to update interview round:",G),alert("Failed to update interview round"),l(n)}finally{y(!1)}}else E()},B=async U=>{if(!confirm("Are you sure you want to delete this interview round?"))return;const G=n.filter($=>$.id!==U);if(l(G),r){y(!0);try{await r(e,G)}catch($){console.error("Failed to delete interview round:",$),alert("Failed to delete interview round"),l(n)}finally{y(!1)}}},D=U=>{g(U.id);const G=U.round_type.match(/\d+/);j(G?G[0]:""),A(U.notes),d(!0)};return s.jsxs("div",{style:{marginBottom:f.spacing["2xl"]},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg},children:[s.jsx(Ct,{color:"primary",style:{margin:0,fontWeight:f.typography.fontWeight.semibold,fontSize:f.typography.fontSize.base},children:"Interview Rounds"}),!i&&s.jsx(ot,{variant:"secondary",size:"sm",onClick:()=>d(!0),children:"+ Add Round"})]}),i&&s.jsxs("div",{style:{padding:f.spacing.xl,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,marginBottom:f.spacing.lg,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx(Ct,{color:"primary",style:{fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.lg,fontSize:f.typography.fontSize.sm},children:p?"Edit Interview Round":"Add New Interview Round"}),s.jsx("div",{style:{marginBottom:f.spacing.lg},children:s.jsx(Al,{label:"Round Number",value:w,onChange:j,placeholder:"e.g., 1, 2, 3",type:"number",required:!0})}),s.jsx("div",{style:{marginBottom:f.spacing.lg},children:s.jsx(m9,{label:"Notes",value:_,onChange:A,placeholder:"Add details about this interview round...",rows:4,required:!0})}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm},children:[s.jsx(ot,{variant:"primary",size:"sm",onClick:p?z:P,disabled:x,children:x?"Saving...":p?"Update":"Add"}),s.jsx(ot,{variant:"secondary",size:"sm",onClick:E,disabled:x,children:"Cancel"})]})]}),n.length===0?s.jsx("div",{style:{padding:f.spacing["2xl"],textAlign:"center",backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,border:`1px dashed ${f.colors.neutral[300]}`},children:s.jsx(ir,{color:"secondary",children:'No interview rounds yet. Click "Add Round" to track your interviews.'})}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.md},children:n.map(U=>s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.secondary.main,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:f.spacing.md},children:[s.jsx("div",{style:{flex:1},children:s.jsx(Ct,{color:"primary",style:{fontWeight:f.typography.fontWeight.semibold,margin:0},children:U.round_type})}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,marginLeft:f.spacing.lg},children:[s.jsx(ot,{variant:"secondary",size:"sm",onClick:()=>D(U),disabled:x,children:"Edit"}),s.jsx(ot,{variant:"secondary",size:"sm",onClick:()=>B(U.id),disabled:x,style:{backgroundColor:"#fee2e2",color:f.colors.accent.error},children:"Delete"})]})]}),U.notes&&s.jsxs("div",{style:{marginTop:f.spacing.md,padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md},children:[s.jsx(ir,{color:"secondary",style:{fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.xs,display:"block"},children:"Notes:"}),s.jsx(Ct,{color:"primary",style:{whiteSpace:"pre-wrap"},children:U.notes})]})]},U.id))})]})},Xee=({job:e,isOpen:t,onClose:r,onStatusUpdate:n,onNavigateToAgentRun:l,isEditMode:i=!1,onSave:d,onEdit:p,onCancel:g,onUpdateInterviewRounds:x})=>{const[y,w]=F.useState(!1),[j,_]=F.useState(null),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState([]),[U,G]=F.useState(!1),[$,re]=F.useState(new Set);if(Vt.useEffect(()=>{i&&e&&_({...e})},[i,e]),Vt.useEffect(()=>{(async()=>{if(!e||!e.contact_ids||e.contact_ids.length===0){D([]);return}G(!0);try{const M=await ud.getContactsByIds(e.contact_ids);D(M)}catch(M){console.error("Failed to fetch contacts:",M),D([])}finally{G(!1)}})()},[e?.id,e?.contact_ids]),!e)return null;const Q=b=>!b.workflow_run_id,H=async()=>{if(j&&d){E(!0);try{await d(j)}finally{E(!1)}}},Y=()=>{_(null),g?g():r()},T=(b,M)=>{j&&_({...j,[b]:M})},o=async b=>{if(b!==e.status)try{w(!0),await n(e.id,b)}catch(M){console.error("Error updating status:",M)}finally{w(!1)}},c=b=>{if(!b)return"Not available";try{let M;if(/^\d+(\.\d+)?$/.test(b)){const R=parseFloat(b);M=new Date(R>1e10?R:R*1e3)}else M=new Date(b);return isNaN(M.getTime())?"Invalid date":M.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},h=b=>{if(!b)return"Not available";try{let M;if(/^\d+(\.\d+)?$/.test(b)){const R=parseFloat(b);M=new Date(R>1e10?R:R*1e3)}else M=new Date(b);return isNaN(M.getTime())?"Invalid date":M.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}},v=async()=>{if(!e.resume_id){console.warn("No resume_id available for download");return}try{z(!0),console.log("Downloading resume:",e.resume_id);const M=(await _r.listResumes()).find(R=>R.id===e.resume_id);if(M&&M.blob_url){console.log("Found resume, downloading:",M.file_name);const R=await fetch(M.blob_url);if(!R.ok)throw new Error(`Failed to download resume: ${R.statusText}`);const S=await R.blob(),a=URL.createObjectURL(S);window.open(a,"_blank","noopener,noreferrer"),setTimeout(()=>{URL.revokeObjectURL(a)},5e3)}else console.error("Resume not found or no blob URL:",e.resume_id),alert("Resume not found or unavailable for download.")}catch(b){console.error("Failed to download resume:",b),alert("Failed to download and open resume.")}finally{z(!1)}};return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"sidebar-overlay",onClick:r}),s.jsxs("div",{className:`job-details-sidebar ${t?"open":""}`,children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{children:i?e.created_at?"Edit Job":"Add New Job":"Job Details"}),s.jsx("div",{className:"header-buttons",children:i?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"save-button",onClick:H,disabled:A,"aria-label":"Save job",children:A?"Saving...":"Save"}),s.jsx("button",{className:"cancel-button",onClick:Y,disabled:A,"aria-label":"Cancel",children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[Q(e)&&p&&s.jsx("button",{className:"edit-button",onClick:p,"aria-label":"Edit job",children:"Edit"}),s.jsx("button",{className:"close-button",onClick:r,"aria-label":"Close sidebar",children:""})]})})]}),s.jsxs("div",{className:"sidebar-content",children:[s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Position"}),i?s.jsxs(s.Fragment,{children:[s.jsx(Al,{value:j?.job_title||"",onChange:b=>T("job_title",b),placeholder:"Job Title",variant:"large",required:!0}),s.jsx(Al,{value:j?.company_name||"",onChange:b=>T("company_name",b),placeholder:"Company Name",variant:"medium",required:!0}),s.jsx(Al,{value:j?.location||"",onChange:b=>T("location",b),placeholder:"Location",variant:"small"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"job-title-large",children:e.job_title}),s.jsxs("div",{className:"company-info-large",children:[s.jsx("div",{className:"company-name",children:e.company_name}),s.jsx("div",{className:"location",children:e.location})]})]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Status"}),s.jsx("select",{value:i?j?.status:e.status,onChange:b=>i?T("status",b.target.value):o(b.target.value),disabled:!i&&y,className:"status-select",children:NX().map(b=>s.jsx("option",{value:b,children:A_[b]},b))}),e.status_insight&&s.jsxs("div",{className:"status-insight",children:[s.jsx("strong",{children:"Insight:"})," ",e.status_insight]})]}),!i&&(e.status===gt.INTERVIEWING||e.status===gt.OFFER||e.status===gt.REJECTED)&&s.jsx("div",{className:"info-section",children:s.jsx(Zee,{jobId:e.id,interviewRounds:e.interview_rounds||[],onUpdate:x})}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Timeline"}),s.jsxs("div",{className:"date-info",children:[!i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"date-item",children:[s.jsx("span",{className:"date-label",children:"Posted:"}),s.jsx("span",{className:"date-value",children:h(e.post_time)})]}),s.jsxs("div",{className:"date-item",children:[s.jsx("span",{className:"date-label",children:"Last Updated:"}),s.jsx("span",{className:"date-value",children:c(e.updated_at)})]})]}),(e.status===gt.APPLIED||e.status===gt.INTERVIEWING||e.status===gt.OFFER||e.status===gt.REJECTED)&&s.jsxs("div",{className:"date-item",children:[s.jsx("span",{className:"date-label",children:"Applied:"}),i?s.jsx(Al,{type:"datetime-local",value:j?.application_datetime?new Date(j.application_datetime).toISOString().slice(0,16):"",onChange:b=>T("application_datetime",new Date(b).toISOString()),variant:"default"}):s.jsx("span",{className:"date-value",children:c(e.application_datetime)})]})]})]}),!Q(e)&&(e.ats_score!==void 0&&e.ats_score!==null||e.ats_alignments)?s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"ATS Analysis"}),e.ats_score!==void 0&&e.ats_score!==null&&s.jsxs("div",{className:"ats-score-large",children:[s.jsx("span",{className:"score-label",children:"ATS Score:"}),s.jsxs("span",{className:`score-value ${e.ats_score>=80?"high":e.ats_score>=60?"medium":"low"}`,children:[e.ats_score,"%"]})]}),e.optimized_ats_score!==void 0&&e.optimized_ats_score!==null&&e.optimized_ats_score!==e.ats_score&&s.jsxs("div",{className:"optimized-score",children:[s.jsx("span",{className:"score-label",children:"Optimized Score:"}),s.jsxs("span",{className:`score-value ${e.optimized_ats_score>=80?"high":e.optimized_ats_score>=60?"medium":"low"}`,children:[e.optimized_ats_score,"%"]})]}),e.ats_keyword_to_add_to_resume&&e.ats_keyword_to_add_to_resume.length>0&&s.jsxs("div",{className:"keywords-section",children:[s.jsx("div",{className:"keywords-label",children:"Keywords to add:"}),s.jsx("div",{className:"keywords-list",children:e.ats_keyword_to_add_to_resume.map((b,M)=>s.jsx("span",{className:"keyword-tag",children:b},M))})]})]}):null,e.contact_ids&&e.contact_ids.length>0&&s.jsxs("div",{className:"info-section",children:[s.jsxs("h3",{className:"section-title",children:["Collected Contacts (",e.contact_ids.length,")",e.contact_collection_complete&&s.jsx("span",{style:{color:"#10b981",marginLeft:"8px",fontSize:"0.875rem"},children:" Complete"})]}),U?s.jsx("div",{style:{color:"#6c757d",fontStyle:"italic",padding:"1rem 0"},children:"Loading contacts..."}):B.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginTop:"0.5rem"},children:B.map(b=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f3f4f6",M.currentTarget.style.borderColor="#d1d5db"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#f9fafb",M.currentTarget.style.borderColor="#e5e7eb"},onClick:()=>{window.dispatchEvent(new CustomEvent("jobhuntr:navigate",{detail:{view:"outreach"}}))},children:[s.jsx("div",{style:{flexShrink:0},children:b.profilePictureUrl&&!$.has(b.id)?s.jsx("img",{src:b.profilePictureUrl,alt:b.name,onError:()=>{re(M=>new Set(M).add(b.id))},style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}):s.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#e0e7ff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem",fontWeight:"600",color:"#4f46e5"},children:b.name.charAt(0).toUpperCase()})}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontWeight:"500",color:"#1f2937",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:b.name}),s.jsx("div",{style:{color:"#6b7280",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:b.targetRole})]}),s.jsx("div",{style:{flexShrink:0},children:s.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:b.status==="outreached"?"#dcfce7":b.status==="listed"?"#dbeafe":"#e5e7eb",color:b.status==="outreached"?"#166534":b.status==="listed"?"#1e40af":"#6b7280"},children:b.status==="outreached"?"Outreached":b.status==="listed"?"Listed":"Collected"})})]},b.id))}):s.jsx("div",{style:{color:"#6c757d",fontStyle:"italic",padding:"1rem 0"},children:"No contacts found"})]}),(e.num_applicants||!Q(e)&&e.linkedin_job_id||e.workflow_run_id)&&s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Additional Info"}),e.num_applicants&&s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Number of Applicants:"}),s.jsx("span",{className:"info-value",children:e.num_applicants})]}),!Q(e)&&e.linkedin_job_id&&s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"LinkedIn Job ID:"}),s.jsx("span",{className:"info-value",children:e.linkedin_job_id})]}),e.workflow_run_id&&s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Agent Run:"}),s.jsx("span",{className:"info-value",children:e.workflow_run_id})]})]}),e.questions_and_answers&&e.questions_and_answers.length>0?s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Application Questions"}),s.jsx("div",{className:"qa-list",children:e.questions_and_answers.map((b,M)=>s.jsxs("div",{className:"qa-item",children:[s.jsx("div",{className:"question",children:b.question}),s.jsxs("div",{className:"answer",children:[b.answer,b.confident!==void 0&&s.jsx("span",{className:`confidence ${b.confident?"high":"low"}`,children:b.confident?" Confident":" Uncertain"})]})]},M))})]}):null,s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Position Context"}),i?s.jsx(m9,{value:j?.pos_context||"",onChange:b=>T("pos_context",b),placeholder:"Job description, requirements, etc.",rows:6}):s.jsx("div",{className:"context-text",style:{whiteSpace:"pre-wrap"},children:e.pos_context&&e.pos_context.trim()!==""?e.pos_context.replace(/\n\s*\n\s*\n+/g,`

`).replace(/\n\s*\n/g,`

`).trim():s.jsx("span",{style:{color:"#6c757d",fontStyle:"italic"},children:"No position info provided"})})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Job Post URL"}),i?s.jsx(Al,{type:"url",value:j?.application_url||"",onChange:b=>T("application_url",b),placeholder:"https://company.com/job-posting (optional)",variant:"default"}):s.jsx("button",{className:`action-button primary ${!e.application_url||e.application_url.trim()===""?"disabled":""}`,disabled:!e.application_url||e.application_url.trim()==="",onClick:async()=>{if(!(!e.application_url||e.application_url.trim()===""))if(window.electronAPI?.openExternalUrl)try{const b=await window.electronAPI.openExternalUrl(e.application_url);b.success||(console.error("Failed to open URL:",b.error),window.open(e.application_url,"_blank","noopener,noreferrer"))}catch(b){console.error("Error opening external URL:",b),window.open(e.application_url,"_blank","noopener,noreferrer")}else window.open(e.application_url,"_blank","noopener,noreferrer")},children:"View Job Posting"})]}),s.jsx("div",{className:"sidebar-actions",children:e.resume_id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"action-button secondary",onClick:v,disabled:P,children:P?"Loading...":"View Resume"}),e.status===gt.QUEUED&&s.jsx("button",{className:"action-button secondary",onClick:()=>{e.workflow_run_id&&l?l(e.workflow_run_id):console.error("No agent run ID or navigation handler")},children:"View in Agent Run"})]})})]})]})]})},Qee=({visibleStatuses:e,onStatusToggle:t,agentRuns:r,selectedAgentRun:n,onAgentRunChange:l})=>{const i=[gt.QUEUED,gt.SUBMITTING,gt.APPLIED,gt.INTERVIEWING,gt.OFFER,gt.REJECTED,gt.FAILED,gt.SKIPPED,gt.REMOVED],d=g=>{switch(g){case gt.APPLIED:return"#3b82f6";case gt.INTERVIEWING:return"#f59e0b";case gt.OFFER:return"#10b981";case gt.REJECTED:return"#ef4444";case gt.STARTED:case gt.QUEUED:return"#6b7280";case gt.SUBMITTING:return"#f97316";default:return"#6b7280"}},p=g=>{const x=new Date(g.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${g.name||`Run ${g.id.slice(0,8)}`} - ${x}`};return s.jsxs("div",{className:"job-tracker-filters",children:[s.jsxs("div",{className:"filter-group",children:[s.jsx("span",{className:"filter-label",children:"Show Columns:"}),s.jsx("div",{className:"status-filter-grid",children:i.map(g=>s.jsxs("div",{className:"status-filter-item",children:[s.jsx("input",{type:"checkbox",id:`status-${g}`,className:"status-filter-checkbox",checked:e.has(g),onChange:()=>t(g)}),s.jsx("label",{htmlFor:`status-${g}`,className:"status-filter-label",style:{color:e.has(g)?d(g):"#9ca3af"},children:A_[g]})]},g))})]}),s.jsxs("div",{className:"filter-group",children:[s.jsx("span",{className:"filter-label",children:"Agent Run:"}),s.jsxs("select",{className:"workflow-run-select",value:n||"",onChange:g=>l(g.target.value||null),children:[s.jsx("option",{value:"",children:"All Runs"}),s.jsx("option",{value:"manual",children:"Manual Applications Only"}),s.jsx("option",{value:"automated",children:"Automated Applications Only"}),r.map(g=>s.jsx("option",{value:g.id,children:p(g)},g.id))]})]})]})},ete=()=>{const e=[{title:"QUEUED",count:8,cards:8},{title:"SUBMITTING",count:1,cards:1},{title:"APPLIED",count:2,cards:2},{title:"INTERVIEWING",count:0,cards:0},{title:"OFFER",count:1,cards:1},{title:"REJECTED",count:0,cards:0}];return s.jsxs("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.neutral[50],minHeight:"100vh",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:f.spacing.lg},children:[s.jsx("div",{style:{height:"32px",width:"120px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx("div",{style:{height:"20px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"120px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}}),s.jsx("div",{style:{height:"32px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.lg,flexWrap:"wrap"},children:[s.jsx("div",{style:{height:"16px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),["Queued","Submitting","Applied","Interviewing","Offer","Rejected","Failed","Skipped","Removed"].map((t,r)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"14px",width:`${t.length*8}px`,backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]},t)),s.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:f.spacing.sm},children:[s.jsx("div",{style:{height:"16px",width:"80px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"120px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}})]})]}),s.jsx("div",{style:{display:"flex",gap:f.spacing.md,overflowX:"auto",paddingBottom:f.spacing.md},children:e.map((t,r)=>s.jsxs("div",{style:{minWidth:"280px",backgroundColor:"#ffffff",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`,overflow:"hidden"},children:[s.jsx("div",{style:{padding:f.spacing.md,borderBottom:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.neutral[50]},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("div",{style:{height:"16px",width:`${t.title.length*8}px`,backgroundColor:f.colors.neutral[300],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"20px",width:"20px",backgroundColor:f.colors.neutral[200],borderRadius:"50%"}})]})}),s.jsx("div",{style:{padding:f.spacing.sm,minHeight:"400px"},children:t.cards===0?s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",gap:f.spacing.sm},children:[s.jsx("div",{style:{height:"16px",width:"100px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"32px",width:"80px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md}})]}):s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[...Array(t.cards)].map((n,l)=>s.jsxs("div",{style:{backgroundColor:"#ffffff",border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.md,padding:f.spacing.md,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[s.jsx("div",{style:{height:"18px",width:`${Math.random()*60+40}%`,backgroundColor:f.colors.neutral[300],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"14px",width:`${Math.random()*40+30}%`,backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.xs}}),s.jsx("div",{style:{height:"12px",width:`${Math.random()*50+25}%`,backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"12px",width:"60px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.xs,marginBottom:f.spacing.sm},children:[s.jsx("div",{style:{height:"12px",width:"60px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}}),s.jsx("div",{style:{height:"12px",width:"30px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]}),s.jsx("div",{style:{height:"12px",width:"80px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"12px",width:"70px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm}}),s.jsx("div",{style:{height:"28px",width:"60px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm}})]},l))})})]},t.title))}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm,marginTop:f.spacing.xl},children:[s.jsx("div",{style:{width:"16px",height:"16px",border:`2px solid ${f.colors.neutral[300]}`,borderTop:`2px solid ${f.colors.primary.main}`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),s.jsx("span",{style:{color:f.colors.neutral[600],fontSize:f.typography.fontSize.base},children:"Loading job applications..."})]}),s.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.5;
            }
          }

          @keyframes spin {
            0% {
              transform: rotate(0deg);
            }
            100% {
              transform: rotate(360deg);
            }
          }
        `})]})},tte=({isOpen:e,onClose:t,applications:r})=>{const[n,l]=F.useState(null);if(!e)return null;const d=(()=>{const P={applied:0,interviewing:0,interviewRounds:new Map,offer:0,rejected:0,total:r.length};r.forEach(U=>{U.status===gt.OFFER?(P.offer++,P.applied++):U.status===gt.REJECTED?(P.rejected++,P.applied++):U.status===gt.INTERVIEWING?(P.interviewing++,P.applied++):U.status===gt.APPLIED&&P.applied++});const z=new Map,B=new Map;return r.forEach(U=>{if((U.status===gt.INTERVIEWING||U.status===gt.OFFER||U.status===gt.REJECTED)&&U.interview_rounds&&U.interview_rounds.length>0){let G=0;U.interview_rounds.forEach($=>{const re=parseInt($.round_type.match(/\d+/)?.[0]||"0");re>0&&(re>G&&(G=re),B.has(re)||B.set(re,$.round_type))});for(let $=1;$<=G;$++)z.has($)||z.set($,new Set),z.get($).add(U.id)}}),Array.from(z.keys()).sort((U,G)=>U-G).forEach(U=>{const G=B.get(U)||`Interview Round ${U}`,$=z.get(U)?.size||0;P.interviewRounds.set(G,$)}),P})(),p=P=>{if(d.total===0)return 20;const B=400*.8,D=20,U=P/d.total;return Math.max(D,U*B)},g=(P,z=10)=>{const B=P.map(D=>D.company_name||"Unknown Company");return B.length>z?B.slice(0,z).concat("..."):B},x=()=>g(r),y=()=>{const P=r.filter(z=>z.status===gt.APPLIED||z.status===gt.INTERVIEWING||z.status===gt.OFFER||z.status===gt.REJECTED);return g(P)},w=P=>{const z=r.filter(B=>B.interview_rounds&&B.interview_rounds.length>0?Math.max(...B.interview_rounds.map(U=>parseInt(U.round_type.match(/\d+/)?.[0]||"0")))>=P:!1);return g(z)},j=()=>{const P=r.filter(z=>z.status===gt.OFFER);return g(P)},_=()=>{const P=r.filter(z=>z.status===gt.REJECTED);return g(P)},A=d.applied>0||d.interviewing>0||d.offer>0||d.rejected>0,E=P=>{P.target===P.currentTarget&&t()};return s.jsx("div",{className:"modal-backdrop",onClick:E,children:s.jsxs("div",{className:"funnel-modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Job Application Funnel Analysis"}),s.jsx("button",{className:"modal-close-btn",onClick:t,"aria-label":"Close modal",children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"sankey-legend",children:[s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color",style:{backgroundColor:"#3b82f6"}}),s.jsxs("span",{children:["Applied (",d.applied,")"]})]}),d.interviewRounds.size>0?s.jsx(s.Fragment,{children:Array.from(d.interviewRounds.entries()).map(([P,z])=>s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color",style:{backgroundColor:"#f59e0b"}}),s.jsxs("span",{children:[P," (",z,")"]})]},P))}):null,s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color",style:{backgroundColor:"#10b981"}}),s.jsxs("span",{children:["Offers (",d.offer,")"]})]}),s.jsxs("div",{className:"legend-item",children:[s.jsx("div",{className:"legend-color",style:{backgroundColor:"#ef4444"}}),s.jsxs("span",{children:["Rejected (",d.rejected,")"]})]})]}),s.jsx("div",{className:"sankey-chart",children:s.jsx("div",{style:{height:"400px",border:"1px solid #e5e7eb",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto"},children:A?s.jsxs("svg",{width:"100%",height:"100%",viewBox:`0 0 ${Math.max(900,600+d.interviewRounds.size*120)} 350`,preserveAspectRatio:"xMidYMid meet",style:{minWidth:"800px"},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"appliedGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.5"})]}),s.jsxs("linearGradient",{id:"interviewingGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#f59e0b",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#f59e0b",stopOpacity:"0.5"})]}),s.jsxs("linearGradient",{id:"offersGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.5"})]}),s.jsxs("linearGradient",{id:"rejectedGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"0.7"}),s.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:"0.5"})]})]}),d.applied>0&&(()=>{const P=p(d.total),z=p(d.applied),B=170-P/2,D=170-z/2;return s.jsx("path",{d:`M 130 ${B+P/2-z/2} Q 155 ${B+P/2} 180 ${D} L 180 ${D+z} Q 155 ${B+P/2} 130 ${B+P/2+z/2} Z`,fill:"url(#appliedGradient)",stroke:"none",opacity:"0.7"})})(),d.interviewRounds.size>0&&(()=>{const P=p(d.applied),z=Array.from(d.interviewRounds.values())[0],B=p(z),D=170-P/2,U=170-B/2;return s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M 260 ${D+P/2-B/2} Q 285 ${D+P/2} 310 ${U} L 310 ${U+B} Q 285 ${D+P/2} 260 ${D+P/2+B/2} Z`,fill:"url(#interviewingGradient)",stroke:"none",opacity:"0.7"}),Array.from(d.interviewRounds.entries()).map(([G,$],re)=>{if(re<d.interviewRounds.size-1){const Q=310+re*120+100,H=310+(re+1)*120,Y=p($),T=Array.from(d.interviewRounds.values())[re+1],o=p(T),c=170-Y/2,h=170-o/2,v=(Q+H)/2;return s.jsx("path",{d:`M ${Q} ${c+Y/2-o/2} Q ${v} ${c+Y/2} ${H} ${h} L ${H} ${h+o} Q ${v} ${c+Y/2} ${Q} ${c+Y/2+o/2} Z`,fill:"url(#interviewingGradient)",stroke:"none",opacity:"0.7"},`flow-${re}`)}return null})]})})(),d.offer>0&&d.interviewRounds.size>0&&(()=>{const P=d.interviewRounds.size-1,z=Array.from(d.interviewRounds.values())[P],B=310+P*120+100,D=B+50,U=p(z),G=p(d.offer),$=170-U/2,re=170-G/2,Q=(B+D)/2;return s.jsx("path",{d:`M ${B} ${$+U/2-G/2} Q ${Q} ${$+U/2} ${D} ${re} L ${D} ${re+G} Q ${Q} ${$+U/2} ${B} ${$+U/2+G/2} Z`,fill:"url(#offersGradient)",stroke:"none",opacity:"0.7"})})(),d.offer>0&&(()=>{const z=(d.interviewRounds.size>0?310+(d.interviewRounds.size-1)*120+100:260)+50,B=p(d.offer),D=170-B/2;return s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:z,y:D,width:"100",height:B,fill:"#10b981",rx:"8",stroke:"white",strokeWidth:"2",style:{cursor:"pointer"},onMouseEnter:U=>{const G=U.currentTarget.getBoundingClientRect();l({companies:j(),x:G.right+10,y:G.top})},onMouseLeave:()=>l(null)}),s.jsxs("text",{x:z+50,y:D+B/2+5,textAnchor:"middle",fill:"white",fontSize:f.typography.fontSize.sm,fontWeight:"bold",style:{pointerEvents:"none"},children:["Offers (",d.offer,")"]})]})})(),d.rejected>0&&(()=>{const z=(d.interviewRounds.size>0?310+(d.interviewRounds.size-1)*120+100:260)+50,B=p(d.rejected),D=240;return s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:z,y:D,width:"100",height:B,fill:"#ef4444",rx:"8",stroke:"white",strokeWidth:"2",style:{cursor:"pointer"},onMouseEnter:U=>{const G=U.currentTarget.getBoundingClientRect();l({companies:_(),x:G.right+10,y:G.top})},onMouseLeave:()=>l(null)}),s.jsxs("text",{x:z+50,y:D+B/2+5,textAnchor:"middle",fill:"white",fontSize:f.typography.fontSize.sm,fontWeight:"bold",style:{pointerEvents:"none"},children:["Rejected (",d.rejected,")"]})]})})(),(()=>{const P=p(d.total),z=170-P/2;return s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"50",y:z,width:"80",height:P,fill:"#94a3b8",rx:"8",stroke:"white",strokeWidth:"2",style:{cursor:"pointer"},onMouseEnter:B=>{const D=B.currentTarget.getBoundingClientRect();l({companies:x(),x:D.right+10,y:D.top})},onMouseLeave:()=>l(null)}),s.jsxs("text",{x:"90",y:z+P/2+5,textAnchor:"middle",fill:"white",fontSize:f.typography.fontSize.sm,fontWeight:"bold",style:{pointerEvents:"none"},children:["Total (",d.total,")"]})]})})(),d.applied>0&&(()=>{const P=p(d.applied),z=170-P/2;return s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"180",y:z,width:"80",height:P,fill:"#3b82f6",rx:"8",stroke:"white",strokeWidth:"2",style:{cursor:"pointer"},onMouseEnter:B=>{const D=B.currentTarget.getBoundingClientRect();l({companies:y(),x:D.right+10,y:D.top})},onMouseLeave:()=>l(null)}),s.jsxs("text",{x:"220",y:z+P/2+5,textAnchor:"middle",fill:"white",fontSize:f.typography.fontSize.sm,fontWeight:"bold",style:{pointerEvents:"none"},children:["Applied (",d.applied,")"]})]})})(),d.interviewRounds.size>0&&s.jsx(s.Fragment,{children:Array.from(d.interviewRounds.entries()).map(([P,z],B)=>{const D=310+B*120,U=p(z),G=170-U/2,$=parseInt(P.match(/\d+/)?.[0]||"1");return s.jsxs(Vt.Fragment,{children:[s.jsx("rect",{x:D,y:G,width:"100",height:U,fill:"#f59e0b",rx:"8",stroke:"white",strokeWidth:"2",style:{cursor:"pointer"},onMouseEnter:re=>{const Q=re.currentTarget.getBoundingClientRect();l({companies:w($),x:Q.right+10,y:Q.top})},onMouseLeave:()=>l(null)}),s.jsxs("text",{x:D+50,y:G+U/2+5,textAnchor:"middle",fill:"white",fontSize:f.typography.fontSize.sm,fontWeight:"bold",style:{pointerEvents:"none"},children:[P.replace("Interview ","")," (",z,")"]})]},P)})})]}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280",fontSize:f.typography.fontSize.base,textAlign:"center",padding:"20px"},children:[s.jsx("div",{style:{fontSize:f.typography.fontSize.display,marginBottom:"10px"},children:""}),s.jsx("div",{style:{fontWeight:"500",marginBottom:"5px"},children:"No Flow Data Available"}),s.jsx(jr,{variant:"body",style:{opacity:.8},as:"div",children:"Add job applications with different statuses to see the funnel visualization."})]})})}),s.jsxs("div",{className:"flow-description",children:[s.jsx("h4",{children:"How to Read This Funnel:"}),s.jsx("p",{children:"This is a progressive funnel showing how applications flow through each stage. Each stage includes all jobs that reached at least that point in the process. For example, a job with an offer is counted in Applied, all Interview Rounds it completed, and Offers. The height and width of each node/flow represent the cumulative number of applications at that stage."})]}),s.jsxs("div",{className:"funnel-insights",children:[s.jsx("h3",{children:"Key Insights"}),s.jsxs("div",{className:"insights-grid",children:[s.jsxs("div",{className:"insight-card",children:[s.jsx("span",{className:"insight-label",children:"Interview Rate"}),s.jsxs("span",{className:"insight-value",children:[d.applied>0?Math.round(d.interviewing/d.applied*100):0,"%"]})]}),s.jsxs("div",{className:"insight-card",children:[s.jsx("span",{className:"insight-label",children:"Offer Rate"}),s.jsxs("span",{className:"insight-value",children:[d.interviewing>0?Math.round(d.offer/d.interviewing*100):0,"%"]})]}),s.jsxs("div",{className:"insight-card",children:[s.jsx("span",{className:"insight-label",children:"Overall Success Rate"}),s.jsxs("span",{className:"insight-value",children:[d.total>0?Math.round(d.offer/d.total*100):0,"%"]})]})]})]})]}),n&&s.jsxs("div",{style:{position:"fixed",left:`${n.x}px`,top:`${n.y}px`,backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:`${f.spacing.sm} ${f.spacing.md}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.sm,maxWidth:"300px",zIndex:1e4,pointerEvents:"none",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[s.jsx("div",{style:{fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.xs},children:"Companies:"}),s.jsx("ul",{style:{margin:0,paddingLeft:"20px",listStyle:"disc"},children:n.companies.map((P,z)=>s.jsx("li",{style:{marginBottom:"4px"},children:P},z))})]})]})})},rte=()=>{const[e,t]=F.useState([]),[r,n]=F.useState([]),[l,i]=F.useState([]),[d,p]=F.useState(!0),[g,x]=F.useState(null),[y,w]=F.useState(!1),[j,_]=F.useState(!1),[A,E]=F.useState(!1),[P,z]=F.useState(!1),B=J=>!J.workflow_run_id,D=F.useCallback(()=>{const J=new URLSearchParams(window.location.search);return{jobId:J.get("job"),agentRunId:J.get("run"),statuses:J.get("statuses")?.split(",").filter(Boolean)||[]}},[]),U=F.useCallback(J=>{const ne=new URL(window.location.href),oe=ne.searchParams;J.jobId!==void 0&&(J.jobId?oe.set("job",J.jobId):oe.delete("job")),J.agentRunId!==void 0&&(J.agentRunId?oe.set("run",J.agentRunId):oe.delete("run")),J.statuses!==void 0&&(J.statuses.length>0?oe.set("statuses",J.statuses.join(",")):oe.delete("statuses"));const ae=ne.pathname+(oe.toString()?"?"+oe.toString():"");window.history.replaceState({},"",ae)},[]),[G,$]=F.useState(()=>{const ne=new URLSearchParams(window.location.search).get("statuses")?.split(",").filter(Boolean);if(ne&&ne.length>0)return new Set(ne);const oe=localStorage.getItem("jobTracker_visibleStatuses");if(oe)try{const ae=JSON.parse(oe);return new Set(ae)}catch(ae){console.error("Error parsing saved visible statuses:",ae)}return new Set([gt.QUEUED,gt.SUBMITTING,gt.APPLIED,gt.INTERVIEWING,gt.OFFER,gt.REJECTED])}),[re,Q]=F.useState(()=>{const ne=new URLSearchParams(window.location.search).get("run");return ne||localStorage.getItem("jobTracker_selectedAgentRun")||null}),H=[gt.QUEUED,gt.SUBMITTING,gt.APPLIED,gt.INTERVIEWING,gt.OFFER,gt.REJECTED,gt.FAILED,gt.SKIPPED,gt.REMOVED];F.useEffect(()=>{Y()},[]),F.useEffect(()=>{const J=D();if(J.jobId&&e.length>0){const ne=e.find(oe=>oe.id===J.jobId);ne&&(x(ne),w(!0))}},[e,D]),F.useEffect(()=>{T()},[e,re,G]);const Y=async()=>{try{p(!0);const[J,ne]=await Promise.all([an.getApplicationHistory(),gr.listAgentRuns()]);t(J),i(ne.runs)}catch(J){console.error("Error loading data:",J)}finally{p(!1)}},T=()=>{let J=e;re&&(re==="manual"?J=J.filter(ne=>!ne.workflow_run_id||B(ne)):re==="automated"?J=J.filter(ne=>!!ne.workflow_run_id&&!B(ne)):J=J.filter(ne=>ne.workflow_run_id===re)),n(J)},o=J=>{x(J),w(!0),U({jobId:J.id})},c=()=>{w(!1),x(null),_(!1),U({jobId:null})},h=async(J,ne)=>{try{await an.updateApplicationStatus(J,ne);const oe={status:ne};ne===gt.APPLIED&&(oe.application_datetime=new Date().toISOString()),t(ae=>ae.map(ee=>ee.id===J?{...ee,...oe}:ee)),g?.id===J&&x(ae=>ae?{...ae,...oe}:null)}catch(oe){console.error("Failed to update status:",oe)}},v=async(J,ne)=>{try{console.log("Updating interview rounds for job:",J,"Rounds:",ne),await an.updateApplicationHistory(J,{interview_rounds:ne}),t(oe=>oe.map(ae=>ae.id===J?{...ae,interview_rounds:ne}:ae)),g?.id===J&&x(oe=>oe?{...oe,interview_rounds:ne}:null),console.log("Successfully updated interview rounds for job:",J)}catch(oe){throw console.error("Failed to update interview rounds:",oe),oe}},b=J=>{nr.clearCurrentRun(),nr.setCurrentRunId(J);const ne=new URL(window.location.href);ne.searchParams.set("view","run"),ne.searchParams.set("runId",J),window.location.href=ne.toString()},M=J=>{const ne=Date.now(),oe=Math.random().toString(36).substr(2,6),ae={id:`temp_${ne}_${oe}`,company_name:"",job_title:"",status:J,application_url:"",application_datetime:new Date().toISOString(),updated_at:new Date().toISOString(),location:"",user_id:"",workflow_run_id:void 0,post_time:void 0,num_applicants:void 0,linkedin_job_id:"",pos_context:void 0,ats_score:void 0,optimized_ats_score:void 0,ats_keyword_to_add_to_resume:void 0,ats_alignments:void 0,questions_and_answers:[],status_insight:void 0,resume_id:void 0};x(ae),w(!0),_(!0)},R=()=>{g&&B(g)&&_(!0)},S=()=>{_(!1)},a=async J=>{try{const ne=[];if((!J.job_title||J.job_title.trim()==="")&&ne.push("Job Title"),(!J.company_name||J.company_name.trim()==="")&&ne.push("Company Name"),ne.length>0){alert(`Please fill in the following required fields:
 ${ne.join(`
 `)}`);return}if(J.application_url&&J.application_url.trim()!=="")try{new URL(J.application_url)}catch{alert("Please enter a valid URL (e.g., https://company.com/job-posting)");return}J.application_url||(J.application_url="");const oe=await an.upsertApplicationHistory(J);e.find(ae=>ae.id===oe.id)?t(ae=>ae.map(ee=>ee.id===oe.id?oe:ee)):t(ae=>[...ae,oe]),console.log("Manual job saved successfully:",oe),x(oe),_(!1)}catch(ne){console.error("Error saving manual job:",ne),alert("Failed to save job. Please try again.")}},k=async J=>{try{await an.deleteApplicationHistory(J),t(ne=>ne.filter(oe=>oe.id!==J)),g?.id===J&&(x(null),w(!1),_(!1)),console.log("Job deleted successfully:",J)}catch(ne){console.error("Error deleting job:",ne),alert("Failed to delete job. Please try again."),Y()}},N=J=>{$(ne=>{const oe=new Set(ne);oe.has(J)?oe.delete(J):oe.add(J);const ae=Array.from(oe);return localStorage.setItem("jobTracker_visibleStatuses",JSON.stringify(ae)),U({statuses:ae}),oe})},L=J=>{Q(J),J?localStorage.setItem("jobTracker_selectedAgentRun",J):localStorage.removeItem("jobTracker_selectedAgentRun"),U({agentRunId:J})},X=r.reduce((J,ne)=>(J[ne.status]||(J[ne.status]=[]),J[ne.status].push(ne),J),{}),se=l.map(J=>({id:J.id,name:J.run_name||`Run ${J.id.slice(0,8)}`,created_at:J.created_at})),te=F.useCallback(()=>{const J=window.location.origin+window.location.pathname,ne=new URLSearchParams;re&&ne.set("run",re);const oe=Array.from(G);return oe.length>0&&ne.set("statuses",oe.join(",")),J+(ne.toString()?"?"+ne.toString():"")},[re,G]),K=F.useCallback(J=>{const ne=window.location.origin+window.location.pathname,oe=new URLSearchParams;oe.set("job",J),re&&oe.set("run",re);const ae=Array.from(G);return ae.length>0&&oe.set("statuses",ae.join(",")),ne+"?"+oe.toString()},[re,G]);return d?s.jsx(ete,{}):s.jsxs("div",{className:"job-tracker-page",children:[s.jsxs("div",{className:"job-tracker-header",children:[s.jsx("h1",{children:"Job Tracker"}),s.jsxs("div",{className:"job-tracker-stats",children:[s.jsxs("span",{children:[r.length," applications"]}),re&&s.jsx("span",{children:" Filtered by agent run"}),s.jsx("button",{className:"funnel-button",onClick:()=>E(!0),title:"View application funnel analysis",children:"Funnel Analysis"}),s.jsx("button",{className:"copy-url-button",onClick:()=>{navigator.clipboard.writeText(te()),console.log("URL copied to clipboard:",te())},title:"Copy shareable URL",children:" Copy URL"})]})]}),s.jsx(Qee,{visibleStatuses:G,onStatusToggle:N,agentRuns:se,selectedAgentRun:re,onAgentRunChange:L}),s.jsx("div",{className:"job-tracker-board",children:H.map(J=>s.jsx(Jee,{status:J,title:A_[J],applications:X[J]||[],onJobClick:o,onStatusUpdate:h,onAddManualJob:M,onDeleteJob:k,isVisible:G.has(J),getJobUrl:K,onDragStart:()=>z(!0),onDragEnd:()=>z(!1)},J))}),s.jsx(Xee,{job:g,isOpen:y,onClose:c,onStatusUpdate:h,onNavigateToAgentRun:b,isEditMode:j,onSave:a,onEdit:R,onCancel:S,onUpdateInterviewRounds:v}),s.jsx(tte,{isOpen:A,onClose:()=>E(!1),applications:r}),P&&s.jsx("div",{className:"global-delete-zone",onDragOver:J=>J.preventDefault(),onDrop:J=>{J.preventDefault();const ne=J.dataTransfer.getData("text/plain");ne&&window.confirm("Are you sure you want to delete this job application? This action cannot be undone.")&&k(ne),z(!1)},children:s.jsxs("div",{className:"delete-zone-content",children:[s.jsx("span",{className:"delete-icon",children:""}),s.jsx("span",{className:"delete-text",children:"Drop to Delete"})]})})]})},nte=({children:e,variant:t=0,size:r="sm",className:n="",style:l={}})=>{const i=f.colors.tags[t],d={sm:{fontSize:"0.6875rem",padding:"2px 6px",borderRadius:"3px"},md:{fontSize:"0.75rem",padding:"4px 8px",borderRadius:"4px"},lg:{fontSize:"0.875rem",padding:"6px 12px",borderRadius:"6px"}},p={display:"inline-block",fontWeight:"600",backgroundColor:i.bg,color:i.text,textTransform:"capitalize",whiteSpace:"nowrap",...d[r],...l};return s.jsx("span",{className:n,style:p,children:e})},ite=({contact:e,isSelected:t,onToggle:r,onDelete:n,onMarkOutreached:l,onViewDetails:i,onSendMessage:d,showMessage:p})=>{const[g,x]=Vt.useState(e.draftMessage),[y,w]=Vt.useState(!1),j=U=>{const G=U.target.value;G.length<=300&&x(G)},A=(U=>({1:{text:"1st",backgroundColor:"transparent",color:"#6b7280"},2:{text:"2nd",backgroundColor:"transparent",color:"#6b7280"},3:{text:"3rd",backgroundColor:"transparent",color:"#6b7280"}})[U]||{text:"3rd+",backgroundColor:"transparent",color:"#6b7280"})(e.connectionDegree),P=(U=>{const G={collected:{text:"Collected",backgroundColor:"#e5e7eb",color:"#6b7280"},listed:{text:"Listed",backgroundColor:"#dbeafe",color:"#1e40af"},outreached:{text:"Outreached",backgroundColor:"#dcfce7",color:"#166534"}};return G[U]||G.collected})(e.status),z=U=>{const G={recruiter:{text:"Recruiter",variant:2},peer:{text:"Peer",variant:1},hiring_manager:{text:"Hiring Manager",variant:0}};return(G[U]||G.peer).variant},B=U=>({recruiter:"Recruiter",peer:"Peer",hiring_manager:"Hiring Manager"})[U]||"Peer",D=U=>{if(!U)return"-";const G=new Date(U);if(isNaN(G.getTime()))return"-";const re=Math.floor((new Date().getTime()-G.getTime())/(1e3*60*60));return re<1?"Just now":re<24?`${re}h ago`:re<168?`${Math.floor(re/24)}d ago`:G.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s.jsxs("div",{onClick:i,style:{display:"grid",gridTemplateColumns:"40px 60px 2fr 1.5fr 1fr 1fr 1fr 1fr 1fr 50px",gap:"1rem",padding:"1rem 1.5rem",background:t?"#f0f9ff":e.status==="outreached"?"#f9fafb":"white",border:"1px solid #e5e7eb",borderRadius:"6px",alignItems:"center",transition:"all 0.2s ease",cursor:"pointer"},onMouseEnter:U=>{t||(U.currentTarget.style.background="#fafbfc"),U.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},onMouseLeave:U=>{U.currentTarget.style.background=t?"#f0f9ff":e.status==="outreached"?"#f9fafb":"white",U.currentTarget.style.boxShadow="none"},children:[s.jsx("input",{type:"checkbox",checked:t,onChange:r,onClick:U=>U.stopPropagation(),disabled:e.status==="outreached",style:{width:"16px",height:"16px",cursor:e.status==="outreached"?"not-allowed":"pointer",opacity:e.status==="outreached"?.5:1}}),s.jsx("div",{children:e.profilePictureUrl&&!y?s.jsx("img",{src:e.profilePictureUrl,alt:e.name,onError:()=>w(!0),style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover"}}):s.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#e0e7ff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.125rem",fontWeight:"600",color:"#4f46e5"},children:e.name.charAt(0).toUpperCase()})}),s.jsxs("div",{style:{minWidth:0},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#1f2937",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),s.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:"0.25rem"},children:e.jobTitle}),s.jsx(nte,{variant:z(e.category),size:"sm",children:B(e.category)})]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#374151",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.company}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.targetRole}),s.jsx("div",{children:s.jsx("span",{style:{padding:"3px 8px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:A.backgroundColor,color:A.color,textAlign:"center",whiteSpace:"nowrap",display:"inline-block"},children:A.text})}),s.jsx("div",{children:s.jsx("span",{style:{padding:"3px 8px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:P.backgroundColor,color:P.color,textAlign:"center",whiteSpace:"nowrap",display:"inline-block"},children:P.text})}),s.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b7280",whiteSpace:"nowrap"},children:D(e.collectedAt)}),s.jsx("div",{style:{fontSize:"0.8125rem",color:"#6b7280",whiteSpace:"nowrap"},children:e.outreachedAt?D(e.outreachedAt):"-"}),s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:U=>U.stopPropagation(),children:s.jsx(E_,{actions:[{id:"delete",label:"Delete",icon:s.jsx(Ca,{size:14}),onClick:n,variant:"danger"}],size:"sm"})})]}),p&&s.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1rem",marginLeft:"100px"},onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1f2937",marginBottom:"0.5rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("span",{children:[e.status==="outreached"?"LinkedIn Message":"Draft LinkedIn Message"," ",e.status==="outreached"&&s.jsx("span",{style:{color:"#6b7280",fontWeight:"400"},children:"(Sent)"})]}),s.jsxs("span",{style:{fontSize:"0.75rem",color:g.length>=300?"#ef4444":"#6b7280",fontWeight:"500"},children:[g.length,"/300"]})]}),s.jsx("textarea",{value:g,onChange:j,onClick:U=>U.stopPropagation(),readOnly:e.status==="outreached",style:{width:"100%",minHeight:"100px",padding:"0.75rem",border:`1px solid ${g.length>=300?"#ef4444":"#d1d5db"}`,borderRadius:"6px",fontSize:"0.875rem",fontFamily:"inherit",lineHeight:"1.5",resize:"vertical",outline:"none",backgroundColor:e.status==="outreached"?"#f9fafb":"white",cursor:e.status==="outreached"?"not-allowed":"text",opacity:e.status==="outreached"?.8:1},onFocus:U=>{e.status!=="outreached"&&(U.target.style.borderColor=g.length>=300?"#ef4444":"#3b82f6")},onBlur:U=>{e.status!=="outreached"&&(U.target.style.borderColor=g.length>=300?"#ef4444":"#d1d5db")}}),g.length>=300&&s.jsx("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.5rem"},children:"Maximum character limit reached"})]})]})},ste=({contacts:e,selectedContactIds:t,onToggleContact:r,onToggleAll:n,onDeleteContact:l,onMarkOutreached:i,onViewDetails:d,onSendMessage:p,showMessages:g,sortField:x,sortDirection:y,onSort:w,onRefresh:j})=>{const _=({field:D,label:U})=>s.jsxs("div",{onClick:()=>w(D),style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",gap:"0.25rem",transition:"color 0.2s"},onMouseEnter:G=>{G.currentTarget.style.color="var(--text-primary)"},onMouseLeave:G=>{G.currentTarget.style.color="var(--text-secondary)"},children:[U,x===D&&s.jsx("span",{style:{fontSize:"0.875rem"},children:y==="asc"?"":""})]});if(e.length===0)return s.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-muted)",background:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border-subtle)"},children:s.jsx("p",{style:{fontSize:"var(--font-size-base)",margin:0},children:'No contacts collected yet. Use the "Collect Contacts" button to find LinkedIn connections for your job applications.'})});const A=e.filter(D=>D.status!=="outreached"),P=A.map(D=>D.id).filter(D=>t.has(D)).length,z=A.length>0&&P===A.length,B=P>0&&P<A.length;return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"Contacts"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsxs("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[e.length," contact",e.length!==1?"s":""]}),s.jsx("button",{onClick:j,style:{padding:"0.25rem",border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"background 0.2s",color:"var(--text-secondary)"},onMouseEnter:D=>{D.currentTarget.style.background="var(--bg-secondary)",D.currentTarget.style.color="var(--text-primary)"},onMouseLeave:D=>{D.currentTarget.style.background="transparent",D.currentTarget.style.color="var(--text-secondary)"},title:"Refresh contacts",children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("polyline",{points:"23 4 23 10 17 10"}),s.jsx("polyline",{points:"1 20 1 14 7 14"}),s.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 60px 2fr 1.5fr 1fr 1fr 1fr 1fr 1fr 50px",gap:"1rem",padding:"0.75rem 1.5rem",background:"var(--bg-secondary)",borderRadius:"6px 6px 0 0",alignItems:"center",marginBottom:"0.5rem"},children:[s.jsx("input",{type:"checkbox",checked:z,ref:D=>{D&&(D.indeterminate=B)},onChange:n,style:{width:"16px",height:"16px",cursor:"pointer"}}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Avatar"}),s.jsx(_,{field:"name",label:"Name"}),s.jsx(_,{field:"company",label:"Company"}),s.jsx(_,{field:"targetRole",label:"Applied Role"}),s.jsx(_,{field:"connectionDegree",label:"Connection"}),s.jsx(_,{field:"status",label:"Status"}),s.jsx(_,{field:"collectedAt",label:"Collected"}),s.jsx(_,{field:"outreachedAt",label:"Outreached"}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",textAlign:"center"}})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.map(D=>s.jsx(ite,{contact:D,isSelected:t.has(D.id),onToggle:()=>r(D.id),onDelete:()=>l(D.id),onMarkOutreached:()=>i(D.id),onViewDetails:()=>d(D),onSendMessage:()=>p(D.id),showMessage:g},D.id))})]})},ote=({contact:e,isOpen:t,onClose:r})=>{const[n,l]=F.useState("contact"),[i,d]=F.useState(e?.draftMessage||""),[p,g]=F.useState(!1);if(Vt.useEffect(()=>{e&&(d(e.draftMessage),g(!1))},[e]),!e)return null;const x=()=>{navigator.clipboard.writeText(i),console.log("Message copied to clipboard")},w=(_=>({1:{text:"1st",className:"connection-first"},2:{text:"2nd",className:"connection-second"},3:{text:"3rd",className:"connection-third"}})[_]||{text:"3rd+",className:"connection-third"})(e.connectionDegree),j=_=>{if(!_)return"Not available";try{const A=new Date(_);return isNaN(A.getTime())?"Invalid date":A.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};return s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"sidebar-overlay",onClick:r}),s.jsxs("div",{className:`job-details-sidebar ${t?"open":""}`,children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{children:"Contact Details"}),s.jsx("button",{className:"close-button",onClick:r,"aria-label":"Close sidebar",children:""})]}),s.jsxs("div",{className:"sidebar-tabs",children:[s.jsx("button",{className:`tab-button ${n==="contact"?"active":""}`,onClick:()=>l("contact"),children:"Contact Info"}),s.jsx("button",{className:`tab-button ${n==="position"?"active":""}`,onClick:()=>l("position"),children:"Position Details"})]}),s.jsx("div",{className:"sidebar-content",children:n==="contact"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"info-section",children:s.jsxs("div",{className:"contact-header",children:[e.profilePictureUrl&&!p?s.jsx("img",{src:e.profilePictureUrl,alt:e.name,className:"contact-avatar",onError:()=>g(!0)}):s.jsx("div",{className:"contact-avatar-placeholder",children:e.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h3",{className:"contact-name",children:e.name}),s.jsxs("p",{className:"contact-role",children:[e.targetRole," at ",e.company]}),s.jsxs("div",{className:"contact-badges",children:[s.jsxs("span",{className:`connection-badge ${w.className}`,children:[w.text," Connection"]}),s.jsx("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"linkedin-link",children:"View Profile "})]})]})]})}),e.about&&s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"About"}),s.jsx("p",{style:{color:"var(--text-primary)",lineHeight:"1.6"},children:e.about})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Work Experience"}),e.workHistory.map((_,A)=>s.jsxs("div",{className:"work-item",children:[s.jsx("div",{className:"work-role",children:_.role}),s.jsxs("div",{className:"work-company",children:[_.company,"  ",_.duration]}),_.description&&s.jsx("div",{className:"work-description",children:_.description})]},A))]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Education"}),e.education.map((_,A)=>s.jsxs("div",{className:"education-item",children:[s.jsx("div",{className:"education-degree",children:_.degree}),s.jsxs("div",{className:"education-school",children:[_.school,_.field&&`  ${_.field}`,_.year&&`  ${_.year}`]})]},A))]}),e.recentActivity&&e.recentActivity.length>0&&s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Recent Activity"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.recentActivity.map((_,A)=>s.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"6px",borderLeft:"3px solid var(--primary-color)"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-primary)",lineHeight:"1.6",marginBottom:"0.5rem"},children:_.text}),s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:_.time})]},A))})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Outreach Tips"}),s.jsx("ul",{className:"tips-list",children:e.personalizedOutreachTips.map((_,A)=>s.jsx("li",{children:_},A))})]}),s.jsxs("div",{className:"info-section",children:[s.jsxs("h3",{className:"section-title",children:[e.status==="outreached"?"LinkedIn Message":"Draft LinkedIn Message",e.status==="outreached"&&s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"400",color:"var(--text-secondary)",marginLeft:"0.5rem"},children:"(Sent)"})]}),s.jsx("textarea",{value:i,onChange:_=>d(_.target.value),readOnly:e.status==="outreached",rows:6,className:"draft-message-textarea",style:{backgroundColor:e.status==="outreached"?"var(--bg-secondary)":void 0,cursor:e.status==="outreached"?"not-allowed":void 0,opacity:e.status==="outreached"?.8:void 0}}),s.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:s.jsx(ot,{onClick:x,variant:"secondary",size:"sm",children:"Copy Message"})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Position"}),s.jsx("div",{className:"job-title-large",children:e.jobTitle}),s.jsx("div",{className:"company-info-large",children:s.jsx("div",{className:"company-name",children:e.company})})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Status"}),s.jsx("div",{className:"status-display",children:s.jsx("span",{className:`status-badge ${e.status==="outreached"?"success":"pending"}`,children:e.status==="outreached"?" Outreached":e.status==="listed"?" Listed":"Collected"})}),e.status!=="outreached"&&s.jsxs("div",{className:"status-insight",children:[s.jsx("strong",{children:"Insight:"})," Contact this person to improve your chances of getting noticed."]})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Timeline"}),s.jsx("div",{className:"date-info",children:e.outreachedAt&&s.jsxs("div",{className:"date-item",children:[s.jsx("span",{className:"date-label",children:"Outreached:"}),s.jsx("span",{className:"date-value",children:j(e.outreachedAt)})]})})]}),s.jsxs("div",{className:"info-section",children:[s.jsx("h3",{className:"section-title",children:"Additional Info"}),s.jsxs("div",{className:"info-item",children:[s.jsx("span",{className:"info-label",children:"Connection Degree:"}),s.jsx("span",{className:"info-value",children:s.jsx("span",{className:`connection-badge ${w.className}`,children:w.text})})]})]})]})})]})]})},ate=()=>{F.useEffect(()=>{const V=document.createElement("style");return V.textContent=`
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(V),()=>{document.head.removeChild(V)}},[]);const[e,t]=F.useState([]),[r,n]=F.useState(!1),[l,i]=F.useState(!1),[d,p]=F.useState(!0),[g,x]=F.useState([gt.QUEUED,gt.SUBMITTING,gt.APPLIED]),[y,w]=F.useState(null),[j,_]=F.useState(!1),[A,E]=F.useState(new Set),[P,z]=F.useState(!1),[B,D]=F.useState(["collected","listed","outreached"]),[U,G]=F.useState(["recruiter","peer","hiring_manager"]),[$,re]=F.useState(!0),[Q,H]=F.useState(!1),[Y,T]=F.useState(!1),[o,c]=F.useState(!1),[h,v]=F.useState(!1),[b,M]=F.useState(1),R=20,[S,a]=F.useState(null),[k,N]=F.useState("asc"),[L,X]=F.useState([]),[se,te]=F.useState(!0);F.useEffect(()=>{K(),(async()=>{try{const ce=await(await fetch(`${rr}/api/linkedin/collection-status`)).json();if(ce.success&&ce.is_collecting){const be=localStorage.getItem("collectingJobs");if(be)try{const fe=JSON.parse(be);X(fe),n(!0)}catch(fe){console.error("Failed to parse collecting jobs:",fe)}else n(!0)}else n(!1),X([]),localStorage.removeItem("isCollectingContacts"),localStorage.removeItem("collectingJobs")}catch(ie){console.error("Failed to check collection status:",ie),n(!1),X([]),localStorage.removeItem("isCollectingContacts"),localStorage.removeItem("collectingJobs")}})()},[]),F.useEffect(()=>{if(!r)return;const ie=setInterval(async()=>{try{const be=await(await fetch(`${rr}/api/linkedin/collection-status`)).json();be.success&&!be.is_collecting&&(n(!1),X([]),localStorage.removeItem("isCollectingContacts"),localStorage.removeItem("collectingJobs"),await K())}catch(ce){console.error("Failed to poll collection status:",ce)}},3e3);return()=>{clearInterval(ie)}},[r]);const K=async()=>{try{p(!0);const V=await ud.getContacts();t(V),console.log(`Loaded ${V.length} contacts from database`)}catch(V){console.error("Failed to load contacts:",V)}finally{p(!1)}},J=async()=>{console.log(" handleCollectContacts called");try{console.log("1 Setting isCollecting to true..."),H(!1),n(!0),localStorage.setItem("isCollectingContacts","true"),console.log(" isCollecting set to true, saved to localStorage"),console.log("2 Fetching agent runs to filter LinkedIn workflows...");const ie=(await gr.listAgentRuns()).runs.filter(ht=>ht.platform==="linkedin").map(ht=>ht.id);console.log(` Found ${ie.length} LinkedIn agent runs`),console.log("3 Fetching application history...");const ce=await an.getApplicationHistory();console.log(` Fetched ${ce.length} applications`),console.log("4 Filtering applications..."),console.log("Selected statuses:",g);const be=ce.filter(ht=>{const je=ht.linkedin_job_id&&ht.linkedin_job_id.trim()!==""&&!ht.linkedin_job_id.startsWith("manual_"),Ie=g.includes(ht.status),pt=!ht.contact_collection_complete,Ne=ht.workflow_run_id&&ie.includes(ht.workflow_run_id);return je&&Ie&&pt&&Ne});if(console.log(` Filtered to ${be.length} LinkedIn applications`),be.length===0){console.warn(" No applications found matching criteria - clearing collection state"),n(!1),localStorage.removeItem("isCollectingContacts");return}console.log(`4 Setting up collection UI for ${be.length} applications...`),console.log("Setting collectingJobs state with:",be),X(be),localStorage.setItem("collectingJobs",JSON.stringify(be)),console.log(" collectingJobs state set");const fe=await fetch(`${rr}/api/linkedin/collect-contacts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({application_history_list:be})});console.log("5 Response received, status:",fe.status);const Ae=await fe.json();console.log("6 Result:",Ae),Ae.success?(console.log(" SUCCESS! Contact collection started in background"),console.log(" isCollecting should remain true")):(console.error(" FAILED to start collection:",Ae.message),console.log("Setting isCollecting back to false"),n(!1),X([]),localStorage.removeItem("isCollectingContacts"),localStorage.removeItem("collectingJobs"))}catch(V){console.error(" ERROR starting collection:",V),console.log("Setting isCollecting back to false due to error"),n(!1),localStorage.removeItem("isCollectingContacts")}},ne=async()=>{console.log(" handleStopCollection called");try{i(!0);try{const V=await fetch(`${rr}/api/linkedin/stop-collect-contacts`,{method:"POST",headers:{"Content-Type":"application/json"}});console.log(" Response received - status:",V.status);const ie=await V.json();console.log(" Result parsed:",ie),ie.success?(console.log(" Contact collection stopped successfully"),n(!1),localStorage.removeItem("isCollectingContacts"),X([]),localStorage.removeItem("collectingJobs"),await K()):(console.error(" Failed to stop collection:",ie.message),alert(`Failed to stop collection: ${ie.message}`))}catch(V){throw console.error(" Fetch error:",V),console.error("Error details:",{name:V?.name,message:V?.message,stack:V?.stack}),V}}catch(V){console.error(" Outer error stopping collection:",V),alert(`Error stopping collection: ${V}`)}finally{console.log(" Finally block - resetting isStopping"),i(!1)}},oe=V=>{const ie=e.find(ce=>ce.id===V);if(!ie){console.error("Contact not found");return}ud.deleteContact(V,ie.applicationHistoryId).then(ce=>{ce&&t(be=>be.filter(fe=>fe.id!==V))}).catch(ce=>{console.error("Failed to delete contact:",ce)})},ae=V=>{ud.markAsOutreached(V).then(ie=>{ie&&t(ce=>ce.map(be=>be.id===V?ie:be))}).catch(ie=>{console.error("Failed to mark as outreached:",ie)})},ee=F.useMemo(()=>e.filter(V=>V.status==="collected"),[e]),ue=F.useMemo(()=>ee.map(V=>V.id),[ee]),Ce=F.useMemo(()=>ue.length>0&&ue.every(V=>A.has(V)),[ue,A]),ve=()=>{E(Ce?new Set:new Set(ue))},ge=async()=>{A.size!==0&&T(!0)},Je=async()=>{T(!1),c(!0);try{const ie=e.filter(fe=>A.has(fe.id)).map(fe=>({id:fe.id,name:fe.name,linkedin_url:fe.linkedinUrl,message:fe.draftMessage||"Hi {first_name}, I'd love to connect!"}));console.log(` Connecting to ${ie.length} contacts with pre-filled messages`);const be=await(await fetch(`${rr}/api/linkedin/connect-contacts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contacts:ie,use_individual_messages:!0})})).json();be.success?(console.log(" Connection process started in background"),console.log(" isConnecting should remain true"),E(new Set)):(console.error(" Failed to start connection:",be.message),alert(`Failed to start connection: ${be.message}`),c(!1))}catch(V){console.error(" Error starting connection:",V),alert("Failed to start connection process"),c(!1)}},Te=async()=>{T(!1),c(!0);try{const ie=e.filter(fe=>A.has(fe.id)).map(fe=>({id:fe.id,name:fe.name,linkedin_url:fe.linkedinUrl}));console.log(` Connecting to ${ie.length} contacts without message`);const be=await(await fetch(`${rr}/api/linkedin/connect-contacts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contacts:ie,message_template:null})})).json();be.success?(console.log(" Connection process started in background"),console.log(" isConnecting should remain true"),E(new Set)):(console.error(" Failed to start connection:",be.message),alert(`Failed to start connection: ${be.message}`),c(!1))}catch(V){console.error(" Error starting connection:",V),alert("Failed to start connection process"),c(!1)}},ze=async()=>{v(!0);try{const ie=await(await fetch(`${rr}/api/linkedin/stop-connect-contacts`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();ie.success?(console.log(" Connection process stopped"),c(!1),await K()):(console.error(" Failed to stop connection:",ie.message),c(!1))}catch(V){console.error(" Error stopping connection:",V),c(!1)}finally{v(!1)}},vt=V=>{S===V?N(ie=>ie==="asc"?"desc":"asc"):(a(V),N("asc")),M(1)},he=F.useMemo(()=>{let V=e.filter(ie=>B.includes(ie.status)&&U.includes(ie.category));return S&&(V=[...V].sort((ie,ce)=>{const be=ie[S],fe=ce[S];if(be==null&&fe==null)return 0;if(be==null)return k==="asc"?1:-1;if(fe==null)return k==="asc"?-1:1;if(typeof be=="string"&&typeof fe=="string"){const Ie=be.toLowerCase().localeCompare(fe.toLowerCase());return k==="asc"?Ie:-Ie}if(typeof be=="number"&&typeof fe=="number")return k==="asc"?be-fe:fe-be;const Ae=String(be),ht=String(fe),je=Ae.localeCompare(ht);return k==="asc"?je:-je})),V},[e,B,U,S,k]),me=Math.ceil(he.length/R),Me=(b-1)*R,pe=he.slice(Me,Me+R),ke=F.useMemo(()=>({collected:e.filter(V=>V.status==="collected").length,listed:e.filter(V=>V.status==="listed").length,outreached:e.filter(V=>V.status==="outreached").length}),[e]),_e={[gt.QUEUED]:"Jobs waiting to be applied",[gt.SUBMITTING]:"Jobs currently being submitted",[gt.APPLIED]:"Jobs that have been successfully applied to"},Z=()=>(console.log("renderCollectModal called, showCollectModal:",Q),Q?(console.log("Rendering collect modal"),s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>H(!1),children:s.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:V=>V.stopPropagation(),children:[s.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"1rem"},children:"Select Application Status"}),s.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"Choose which job application statuses to collect contacts from:"}),s.jsx("div",{style:{background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"6px",padding:"0.75rem 1rem",marginBottom:"1.5rem"},children:s.jsxs("div",{style:{fontSize:"0.8125rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("strong",{style:{color:"#1e3a8a"},children:"LinkedIn Only:"})," Contacts will only be collected from LinkedIn auto-apply workflows. Indeed search jobs are not included."]})}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[gt.QUEUED,gt.SUBMITTING,gt.APPLIED].map(V=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",padding:"0.75rem",borderRadius:"6px",border:"1px solid var(--border-subtle)",background:g.includes(V)?"var(--bg-secondary)":"white",transition:"all 0.2s"},children:[s.jsx("input",{type:"checkbox",checked:g.includes(V),onChange:()=>{x(ie=>ie.includes(V)?ie.filter(ce=>ce!==V):[...ie,V])},style:{width:"18px",height:"18px",cursor:"pointer"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:"500",color:"var(--text-primary)"},children:V}),s.jsx("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)"},children:_e[V]})]})]},V))}),s.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[s.jsx(ot,{onClick:()=>H(!1),variant:"secondary",children:"Cancel"}),s.jsx(ot,{onClick:J,variant:"primary",disabled:g.length===0,children:"Start Collecting"})]})]})})):null),q=()=>Y?s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>T(!1),children:s.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:V=>V.stopPropagation(),children:[s.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"1rem"},children:["Connect to ",A.size," Contact",A.size>1?"s":""]}),s.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:"Each contact will receive their pre-filled personalized message."}),s.jsx("div",{style:{background:"#f6f8fa",border:"1px solid #d0d7de",borderRadius:"6px",padding:"0.75rem 1rem",marginBottom:"1.5rem"},children:s.jsxs("div",{style:{fontSize:"0.8125rem",color:"var(--text-secondary)",lineHeight:"1.5"},children:[s.jsx("strong",{style:{color:"var(--text-primary)"},children:" Heads up:"})," If you're using a LinkedIn free account, you may be limited to approximately 5 personalized connection messages per month and 100 connection requests per week without notes. Premium accounts have higher limits."]})}),s.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[s.jsx(ot,{onClick:Te,variant:"secondary",children:"Connect Without Message"}),s.jsx(ot,{onClick:Je,variant:"primary",children:"Connect With Message"})]})]})}):null;return console.log("Current component state:",{isLoading:d,isCollecting:r,showCollectModal:Q,isStopping:l}),d?s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#f9fafb"},children:s.jsx("div",{style:{fontSize:"1.125rem",color:"#6b7280"},children:"Loading contacts..."})}):s.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",background:"var(--bg-primary)",overflow:"hidden"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1.5rem 2rem",borderBottom:"1px solid var(--border-subtle)",background:"white",boxShadow:"var(--shadow-sm)"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:"600",color:"var(--text-primary)",margin:0},children:"Outreach"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[s.jsx(ot,{onClick:r?ne:()=>{console.log(" Collect Contacts button clicked"),console.log("Current isCollecting state:",r),H(!0)},disabled:l,variant:"secondary",children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Stopping..."]}):r?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Collection"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:s.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Collect Contacts"]})}),s.jsx(ot,{onClick:o?ze:ge,disabled:o?h:r||A.size===0,variant:"primary",children:h?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Stopping..."]}):o?s.jsxs(s.Fragment,{children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Connection"]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:"8px"},children:[s.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),s.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),A.size>0?`Connect (${A.size})`:"Connect"]})})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[s.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"center"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[s.jsx("span",{style:{fontWeight:"600",color:"var(--text-primary)"},children:ke.collected})," ","Collected"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[s.jsx("span",{style:{fontWeight:"600",color:"var(--text-primary)"},children:ke.listed})," ","Listed"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:[s.jsx("span",{style:{fontWeight:"600",color:"var(--text-primary)"},children:ke.outreached})," ","Outreached"]})]}),s.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:P,onChange:V=>z(V.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),"Show Connection Messages"]}),s.jsxs("button",{onClick:()=>re(!$),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:$?"var(--accent-primary)":"white",color:$?"white":"var(--text-primary)",border:`1px solid ${$?"var(--accent-primary)":"var(--border-subtle)"}`,borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:V=>{$||(V.currentTarget.style.background="var(--bg-secondary)")},onMouseLeave:V=>{$||(V.currentTarget.style.background="white")},children:[s.jsx(Uo,{size:16}),"Filters"]})]})]}),$&&s.jsxs("div",{style:{display:"flex",gap:"2rem",padding:"1rem",background:"var(--bg-secondary)",borderRadius:"6px",border:"1px solid var(--border-subtle)"},children:[s.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:"500"},children:"Contact Status:"}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:B.includes("collected"),onChange:V=>{V.target.checked?D([...B,"collected"]):D(B.filter(ie=>ie!=="collected"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Collected"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:B.includes("listed"),onChange:V=>{V.target.checked?D([...B,"listed"]):D(B.filter(ie=>ie!=="listed"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Listed"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:B.includes("outreached"),onChange:V=>{V.target.checked?D([...B,"outreached"]):D(B.filter(ie=>ie!=="outreached"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Outreached"]})]}),s.jsx("div",{style:{width:"1px",background:"var(--border-subtle)"}}),s.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",fontWeight:"500"},children:"Category:"}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:U.includes("recruiter"),onChange:V=>{V.target.checked?G([...U,"recruiter"]):G(U.filter(ie=>ie!=="recruiter"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Recruiter"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:U.includes("peer"),onChange:V=>{V.target.checked?G([...U,"peer"]):G(U.filter(ie=>ie!=="peer"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Peer"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.375rem",cursor:"pointer",fontSize:"0.875rem",color:"var(--text-primary)",userSelect:"none"},children:[s.jsx("input",{type:"checkbox",checked:U.includes("hiring_manager"),onChange:V=>{V.target.checked?G([...U,"hiring_manager"]):G(U.filter(ie=>ie!=="hiring_manager"))},style:{width:"16px",height:"16px",cursor:"pointer"}}),"Hiring Manager"]})]})]})]}),s.jsxs("div",{style:{flex:1,overflow:"auto",padding:"2rem",display:"flex",flexDirection:"column"},children:[(console.log(" Widget render check:",{isCollecting:r,collectingJobsLength:L.length,collectingJobs:L}),r&&L.length>0)&&s.jsxs("div",{style:{background:"#f8f9fa",border:"1px solid #e1e4e8",borderRadius:"8px",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[s.jsxs("div",{onClick:()=>te(!se),style:{padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:"#ffffff",borderBottom:se?"1px solid #e1e4e8":"none",transition:"background 0.2s"},onMouseEnter:V=>{V.currentTarget.style.background="#f6f8fa"},onMouseLeave:V=>{V.currentTarget.style.background="#ffffff"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#0969da",strokeWidth:"2",style:{animation:"spin 2s linear infinite"},children:[s.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.25"}),s.jsx("path",{d:"M12 2 A10 10 0 0 1 22 12",opacity:"1"})]}),s.jsxs("span",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#1f2328"},children:["Collecting Contacts from ",L.length," Job",L.length>1?"s":""]})]}),s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#656d76",strokeWidth:"2",style:{transform:se?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:s.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),se&&s.jsx("div",{style:{padding:"0.5rem 0"},children:L.map((V,ie)=>s.jsxs("div",{style:{padding:"1rem 1.5rem",display:"grid",gridTemplateColumns:"2fr 2fr 1fr auto",gap:"1rem",alignItems:"center",borderBottom:ie<L.length-1?"1px solid #d0d7de":"none",transition:"background 0.2s"},onMouseEnter:ce=>{ce.currentTarget.style.background="#f6f8fa"},onMouseLeave:ce=>{ce.currentTarget.style.background="transparent"},children:[s.jsx("div",{children:s.jsx("div",{style:{fontWeight:"600",fontSize:"0.875rem",color:"#1f2328"},children:V.job_title})}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#656d76"},children:V.company_name}),s.jsx("div",{children:s.jsx("span",{style:{background:"#f6f8fa",color:"#656d76",padding:"0.25rem 0.75rem",borderRadius:"999px",fontSize:"0.75rem",fontWeight:"500",border:"1px solid #d0d7de",display:"inline-block"},children:V.status})}),s.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("jobhuntr:navigate",{detail:{view:"job-tracker"}})),setTimeout(()=>{const ce=`${window.location.pathname}?job=${V.id}`;window.history.pushState({},"",ce),console.log("Updated URL to:",ce)},100)},style:{background:"#f6f8fa",color:"#1f2328",border:"1px solid #d0d7de",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.8125rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.375rem",transition:"all 0.2s"},onMouseEnter:ce=>{ce.currentTarget.style.background="#eaeef2",ce.currentTarget.style.borderColor="#c1c9d1"},onMouseLeave:ce=>{ce.currentTarget.style.background="#f6f8fa",ce.currentTarget.style.borderColor="#d0d7de"},children:[s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),s.jsx("polyline",{points:"15 3 21 3 21 9"}),s.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),"View"]})]},V.id))})]}),s.jsx(ste,{contacts:pe,selectedContactIds:A,onToggleContact:V=>{const ie=new Set(A);ie.has(V)?ie.delete(V):e.find(be=>be.id===V)?.status==="collected"&&ie.add(V),E(ie)},onToggleAll:ve,onViewDetails:V=>{w(V),_(!0)},onDeleteContact:oe,onMarkOutreached:ae,onSendMessage:V=>{console.log("Send message to:",V)},showMessages:P,sortField:S,sortDirection:k,onSort:vt,onRefresh:K}),me>1&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"2rem",padding:"1rem 0"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Showing ",(b-1)*R+1," to"," ",Math.min(b*R,he.length)," of"," ",he.length," contacts"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s.jsx("button",{onClick:()=>M(V=>Math.max(1,V-1)),disabled:b===1,style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid var(--border-subtle)",background:b===1?"var(--bg-secondary)":"white",color:b===1?"var(--text-tertiary)":"var(--text-primary)",cursor:b===1?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Previous"}),s.jsxs("span",{style:{padding:"0.5rem 1rem",fontSize:"0.875rem",color:"var(--text-secondary)"},children:["Page ",b," of ",me]}),s.jsx("button",{onClick:()=>M(V=>Math.min(me,V+1)),disabled:b===me,style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid var(--border-subtle)",background:b===me?"var(--bg-secondary)":"white",color:b===me?"var(--text-tertiary)":"var(--text-primary)",cursor:b===me?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Next"})]})]})]}),s.jsx(ote,{contact:y,isOpen:j,onClose:()=>_(!1)}),Z(),s.jsx(q,{})]})},I8=["One thoughtful application today is a brick in your next chapter.","Interviews start with consistent, courageous outreach.","Jobs are won by storytellerskeep refining yours.","Your momentum is louder than any algorithm.","Progress over perfection beats ghosting every time.","You are one tailored message away from a warm intro.","Hiring managers notice people who keep showing up.","Stay curiousevery rejection is market research.","Confidence is built by honoring the tiny commitments.","You are not behindyou are in the middle of your comeback.","Inbox silence is temporary; your skills are not.","Stack small wins until they look like momentum.","Use curiosity as fuel when motivation dips.","Treat job searching like trainingyoure getting stronger.","Compounding applications create optionality.","Companies arent doing you a favoryou are bringing value.","Iterate on the process, not on your worth.","Show your work; the right team is already looking for you.","Consistency converts maybe later into lets talk.","Prospects fade, but your persistence compounds.","Ship something today that future-you can thank.","Reframe rejections as proof of courageous attempts.","Opportunities move toward people in motion.","Clarity follows action, not the other way around.","Momentum beats motivationpress send.","Jobs follow storytellers who can quantify impact.","Your network remembers the value you add, not the ask.","Youre auditioning them as much as they are interviewing you.","Todays search habits are tomorrows salary bump.","Every no sharpens the signal for your yes.","Translate experience into outcomesthey cant ignore it.","Refresh less, reach out more.","Every draft cover letter builds muscle memory.","A tiny follow-up often beats a brand-new cold email.","Bravery looks like pressing submit when it isnt perfect.","Energy flows where your calendar pointsblock the time.","Own your metricsthey prove you ship results.","The right role needs your voice, not a generic one.","Momentum starts the moment you open a job description.","You dont need dozens of interviews, just the right one.","Keep receipts of winsthey become negotiation leverage.","Curiosity in interviews reads as leadership potential.","Your next manager wants the version of you that experiments.","Ask bold questionssignal that youre evaluating fit too.","Treat every application like a case study about you.","Lead with impact, close with enthusiasm.","Invisible work stays invisibleshow it off.","Small touchpoints compound into trust.","Half of the battle is simply staying in the arena.","People hire the candidates who make decisions easy.","Framework + follow-through = unforgettable candidate.","Your superpower is the pattern others ignore.","Job offers chase people who invest in follow-ups.","Keep receipts of learningthey become confident answers.","Momentum is a habit disguised as a calendar block.","Every tailored resume is a vote for future-you.","Ship the outreach even if nerves are loud.","You are qualified to learn on the jobthat counts.","Make data your wingman in every conversation.","Interviewers remember stories, not bullet points.","Write the email you wish someone sent you.","Generosity during a job hunt signals leadership.","The market is noisyclarity makes you unforgettable.","Velocity beats volume when every move is intentional.","Celebrate attempts; they are proof youre in the arena.","Confidence is consistency over time, not luck.","Curate your wins; recruiters crave specifics.","Every search sprint deserves a retro and a reset.","Stay audit-ready on your accomplishments.","The best follow-up is sent while energy is fresh.","Your research is your competitive edgeuse it.","Schedule courage; send that referral ask.","The compounding effect loves disciplined applicants.","Hiring teams chase proactive communicators.","Make it easy to believe you on slide one.","Pause to celebrate micro-winsthey sustain the marathon.","Own your narrative or someone else will guess it.","A thoughtful close sets you apart from rushed applicants.","Proof beats promiseground every story with metrics.","You already have enough data to start; begin.","Interviews reward preparation disguised as curiosity.","Progress is messydocument it anyway.","There is no perfect resume, only clearer ones.","Treat silence as a cue to follow up, not to stall.","Hiring managers crave claritybe the simplest answer.","Bold outreach shrinks timelines.","You are already building resilience employers admire.","People invest in candidates who invest in themselves.","Keep moving; momentum makes doubt quieter.","Replace doom-scrolling with a five-minute reach-out.","The best opportunities rarely live on job boards for long.","Every coffee chat is a rehearsal for your pitch.","Discipline is remembering what you said you wanted.","Track your value like revenueit compounds.","The right role wants your perspective, not perfection.","Start before you feel ready; clarity shows up mid-flight.","Hiring is risk mitigationmake them feel safe choosing you.","Let your portfolio read like a highlight reel.","You can do hard thingsproof: youre still here.","Strategic rest keeps the pipeline sustainable.","Your next yes is scanning LinkedIn right nowstay visible.","Authenticity is your unfair advantageuse it loudly.","Iterate faster than your doubt can keep up.","Every day you show up is evidence youre built for this."],z8=()=>I8[Math.floor(Math.random()*I8.length)],jo={evaluated:{label:"Applications evaluated",color:"#7c3aed"},queued:{label:"Jobs queued+",color:"#0ea5e9"}},lte=()=>{try{const e=["jobhuntr_auth","auth","supabase.auth.token","sb-auth-token"];for(const r of e){const n=localStorage.getItem(r);if(n){const l=JSON.parse(n);if(l.token)return l.token;if(l.access_token)return l.access_token;if(typeof l=="string")return l}}const t=Object.keys(localStorage);for(const r of t)if(r.includes("auth")||r.includes("supabase")){const n=localStorage.getItem(r);if(!n)continue;const l=JSON.parse(n);if(l.token)return l.token;if(l.access_token)return l.access_token}}catch(e){console.error("Failed to resolve auth token:",e)}return null},cte=e=>e?e.toLowerCase().split(/[_\s]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):"Unknown",ute=(e,t,r,n)=>{if(t){const[l]=t.split(" ");return l}return r&&r.trim().length?r.trim():n&&n.trim().length?n.trim():e?e.split("@")[0]:"there"},$h=e=>e.application_datetime||e.updated_at||e.created_at,dte=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),I1=e=>new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),fte=()=>{const e=t=>Array.from({length:t}).map((r,n)=>s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--fluid skeleton-line skeleton-shimmer"},n));return s.jsxs("div",{className:"overview-page overview-page--skeleton",children:[s.jsxs("section",{className:"overview-hero-card overview-skeleton-card",children:[s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--eyebrow skeleton-line skeleton-shimmer"}),s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--title skeleton-line skeleton-shimmer"}),s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--medium skeleton-line skeleton-shimmer"}),s.jsxs("div",{className:"overview-skeleton-button-row",children:[s.jsx("span",{className:"overview-skeleton-pill skeleton-line skeleton-shimmer"}),s.jsx("span",{className:"overview-skeleton-pill overview-skeleton-pill--ghost skeleton-line skeleton-shimmer"})]})]}),s.jsxs("section",{className:"overview-top-row",children:[s.jsx("div",{className:"overview-kpi-column",children:s.jsx("div",{className:"overview-kpi-grid",children:[0,1,2].map(t=>s.jsxs("div",{className:"overview-kpi-card overview-skeleton-card",children:[s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--title skeleton-line skeleton-shimmer"}),s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--medium skeleton-line skeleton-shimmer"}),s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--short skeleton-line skeleton-shimmer"})]},t))})}),s.jsxs("div",{className:"overview-card overview-chart-card overview-skeleton-card",children:[s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--title skeleton-line skeleton-shimmer"}),s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--short skeleton-line skeleton-shimmer"}),s.jsxs("div",{className:"overview-skeleton-chart",children:[["20%","40%","60%","80%"].map(t=>s.jsx("span",{className:"overview-skeleton-chart-gridline",style:{top:t}},`grid-${t}`)),s.jsx("span",{className:"overview-skeleton-chart-axis"}),s.jsx("span",{className:"overview-skeleton-chart-line overview-skeleton-chart-line--primary skeleton-shimmer"}),s.jsx("span",{className:"overview-skeleton-chart-line overview-skeleton-chart-line--secondary skeleton-shimmer"})]})]})]}),s.jsx("section",{className:"overview-columns overview-columns--single",children:s.jsx("div",{className:"overview-column",children:s.jsxs("div",{className:"overview-card overview-skeleton-card",children:[s.jsx("div",{className:"overview-skeleton-line overview-skeleton-line--title skeleton-line skeleton-shimmer"}),e(5)]})})})]})},B8=new Set([gt.QUEUED,gt.STARTED,gt.SUBMITTING]),hte=new Set([gt.APPLIED]),pte=new Set([gt.OFFER]),gte=({userEmail:e,clientName:t,userFirstName:r,userLastName:n,onViewRuns:l,onStartNewRun:i,onResumeRun:d,onLaunchInfiniteHunt:p})=>{const[g,x]=F.useState([]),[y,w]=F.useState([]),[j,_]=F.useState(0),[A,E]=F.useState(!0),[P,z]=F.useState(!1),[B,D]=F.useState(null),[U,G]=F.useState(null),[$,re]=F.useState(()=>z8()),[Q,H]=F.useState(""),[Y,T]=F.useState(!1),[o,c]=F.useState({evaluated:!0,queued:!0}),[h,v]=F.useState(null),b=A&&!U&&!B,M=F.useCallback(async()=>{try{D(null);const he=lte();he&&(gr.setAuthToken(he),an.setAuthToken(he));const[me,Me,pe]=await Promise.all([gr.listAgentRuns({page:1,page_size:6}),an.getApplicationHistory(),an.getApplicationHistoryCount().catch(()=>0)]);x(me.runs),w(Me),_(pe),G(new Date)}catch(he){console.error("Failed to load overview data:",he),D("Unable to load your latest activity. Please try again.")}},[]);F.useEffect(()=>{(async()=>{E(!0),await M(),E(!1)})()},[M]),F.useEffect(()=>{if(!$){H("");return}H("");let he=0;const me=window.setInterval(()=>{he+=1,H($.slice(0,he)),he>=$.length&&window.clearInterval(me)},35);return()=>window.clearInterval(me)},[$]);const R=async()=>{z(!0),await M(),re(z8()),z(!1)},S=()=>{try{window.close()}catch{}window.setTimeout(()=>{window.location.href="about:blank"},120)},a=he=>{c(me=>({...me,[he]:!me[he]}))},k=F.useMemo(()=>g.length?[...g].sort((he,me)=>{const Me=new Date(he.updated_at||he.created_at).getTime();return new Date(me.updated_at||me.created_at).getTime()-Me})[0]:null,[g]),N=F.useMemo(()=>{const he=new Date;return y.filter(me=>{const Me=$h(me);if(!Me)return!1;const pe=new Date(Me);return pe.getFullYear()===he.getFullYear()&&pe.getMonth()===he.getMonth()&&pe.getDate()===he.getDate()}).length},[y]);F.useMemo(()=>{if(!y.length)return 0;const he=new Date;return he.setDate(he.getDate()-1),he.setHours(0,0,0,0),y.reduce((me,Me)=>{const pe=$h(Me);if(!pe)return me;const ke=new Date(pe);return Number.isNaN(ke.getTime())?me:dte(ke,he)?me+1:me},0)},[y]),F.useMemo(()=>g.reduce((he,me)=>{if(me.status?.toLowerCase()==="running"&&(he.activeRuns+=1),me.completed_at){const Me=new Date(me.completed_at);(new Date().getTime()-Me.getTime())/(1e3*60*60*24)<=7&&(he.completedThisWeek+=1)}return he.applicationsSent+=me.applications_sent||0,he.responses+=me.responses_received||0,he.interviews+=me.interviews_scheduled||0,he},{activeRuns:0,completedThisWeek:0,applicationsSent:0,responses:0,interviews:0}),[g]);const L=F.useMemo(()=>y.reduce((he,me)=>(B8.has(me.status)&&(he.queued+=1),hte.has(me.status)&&(he.submitted+=1),pte.has(me.status)&&(he.offer+=1),he),{queued:0,submitted:0,offer:0}),[y]),X=F.useMemo(()=>{const he=j||0;return he<=0?"JobHuntr is ready to help you find job opportunities.":`JobHuntr queued ${he.toLocaleString()} job opportunities for fellow seekers yesterday.`},[j]),se=F.useMemo(()=>{const he=new Set([gt.STARTED]);return y.filter(me=>me.status?!he.has(me.status):!1).map(me=>({id:me.id,title:me.job_title||"Application update",subtitle:me.company_name||"Unknown company",timestamp:$h(me)||new Date().toISOString(),meta:cte(me.status)})).sort((me,Me)=>new Date(Me.timestamp).getTime()-new Date(me.timestamp).getTime()).slice(0,5)},[y]),te=F.useMemo(()=>{if(!y.length)return[];const he=y.map(q=>{const V=$h(q);if(!V)return null;const ie=new Date(V);return Number.isNaN(ie.getTime())?null:(ie.setHours(0,0,0,0),{record:q,date:ie})}).filter(q=>!!q).sort((q,V)=>q.date.getTime()-V.date.getTime());if(!he.length)return[];const me=new Date(he[0].date),Me=new Date;Me.setHours(0,0,0,0);const pe={};he.forEach(({record:q,date:V})=>{const ie=V.toISOString().slice(0,10);pe[ie]||(pe[ie]={evaluated:0,queued:0}),q.workflow_run_id&&(pe[ie].evaluated+=1),B8.has(q.status)&&(pe[ie].queued+=1)});const ke=[];let _e=0,Z=0;for(const q=new Date(me);q.getTime()<=Me.getTime();q.setDate(q.getDate()+1)){const V=q.toISOString().slice(0,10),ie=pe[V]||{evaluated:0,queued:0};_e+=ie.evaluated,Z+=ie.queued,ke.push({date:V,evaluated:_e,queued:Z})}return ke},[y]),K=F.useMemo(()=>te.length?te.reduce((he,me)=>Math.max(he,me.evaluated,me.queued),0):0,[te]),J=ute(e,t,r,n),ne=()=>A?s.jsx("div",{className:"overview-empty-state",children:"Syncing your recent activity..."}):se.length?s.jsx("ul",{className:"overview-activity-list",children:se.map(he=>s.jsxs("li",{className:"overview-activity-item",children:[s.jsxs("div",{className:"overview-activity-meta",children:[s.jsx("div",{className:"overview-activity-title",children:he.title}),s.jsxs("div",{className:"overview-activity-subtitle",children:[he.subtitle,"  ",d9(he.timestamp)]})]}),he.meta&&s.jsx("div",{className:"overview-activity-chip",children:he.meta})]},he.id))}):s.jsxs("div",{className:"overview-empty-state",children:[s.jsx("p",{children:"No activity yet."}),s.jsx("span",{children:"Kick off a workflow to start tracking progress."})]}),oe={width:720,height:260,paddingX:48,paddingY:32},ae=(he,me)=>{const Me=oe.width-oe.paddingX*2,pe=oe.height-oe.paddingY*2,ke=te.length<=1?0:he/(te.length-1),_e=oe.paddingX+ke*Me,Z=K||1,q=oe.paddingY+pe-Math.min(me/Z,1)*pe;return{x:_e,y:q}},ee=he=>te.length?te.map((me,Me)=>{const{x:pe,y:ke}=ae(Me,me[he]);return`${Me===0?"M":"L"}${pe},${ke}`}).join(" "):"",ue=te.length?I1(te[0].date):"",Ce=te.length?I1(te[te.length-1].date):"",ve=Object.keys(jo).filter(he=>o[he]),ge=h?te[h.index]:null,Je=ge&&h?ae(h.index,ge.evaluated).x:null,Te=F.useMemo(()=>{if(!te.length)return[];const he=4,me=Math.max(K,1);return Array.from({length:he+1},(Me,pe)=>Math.round(me/he*(he-pe)))},[te.length,K]),ze=he=>{if(!te.length||ve.length===0)return;const me=he.currentTarget.getBoundingClientRect(),Me=he.clientX-me.left,ke=Math.min(Math.max(Me/me.width,0),1)*oe.width,_e=Math.min(Math.max(ke,oe.paddingX),oe.width-oe.paddingX),Z=oe.width-oe.paddingX*2,q=(_e-oe.paddingX)/Z,V=Math.min(te.length-1,Math.max(0,Math.round(q*(te.length-1))));v({index:V,xPercent:_e/oe.width*100})},vt=()=>{v(null)};return b?s.jsx(fte,{}):s.jsxs("div",{className:"overview-page",children:[s.jsxs("section",{className:"overview-hero-card",children:[s.jsxs("div",{className:"overview-hero-content",children:[s.jsxs("div",{children:[s.jsx("p",{className:"overview-eyebrow",children:t?`Coaching ${t}`:"This weeks dashboard"}),s.jsxs("h1",{children:["Welcome back, ",J]}),s.jsx("p",{className:"overview-hero-subtitle",children:"Track your pipeline, pick up where you left off, and keep momentum without hopping between tabs."})]}),s.jsxs("div",{className:"overview-hero-actions",children:[s.jsxs(ot,{variant:"secondary",size:"md",disabled:!k,onClick:()=>k&&d?.(k.id),children:[s.jsx(ab,{size:16}),"Open latest run"]}),s.jsxs(ot,{variant:"primary",size:"md",onClick:()=>p?.(),children:[s.jsx(ab,{size:16}),"Start Infinite Hunt"]})]})]}),s.jsxs("div",{className:"overview-hero-meta",children:[s.jsx("div",{className:"overview-hero-badge",children:X}),s.jsxs("button",{className:"overview-refresh-button",onClick:R,disabled:P,children:[s.jsx(E$,{size:16}),P?"Refreshing":"Refresh"]})]})]}),s.jsxs("section",{className:"overview-motivation-wrapper","aria-live":"polite",children:[s.jsx("span",{className:"overview-motivation-label",children:"Momentum reminder"}),s.jsx("p",{className:"overview-motivation",children:s.jsx("span",{className:"overview-motivation__text",children:Q||""})})]}),B&&s.jsx("div",{className:"overview-inline-alert",children:B}),s.jsxs("section",{className:"overview-top-row",children:[s.jsx("div",{className:"overview-kpi-column",children:s.jsxs("div",{className:"overview-kpi-grid",children:[s.jsxs("div",{className:"overview-kpi-card",children:[s.jsx("div",{className:"overview-kpi-value",children:L.queued}),s.jsx("div",{className:"overview-kpi-label",children:"Total queued jobs"}),s.jsx("span",{className:"overview-kpi-meta",children:"Awaiting submission"})]}),s.jsxs("div",{className:"overview-kpi-card",children:[s.jsx("div",{className:"overview-kpi-value",children:L.submitted}),s.jsx("div",{className:"overview-kpi-label",children:"Total submitted"}),s.jsxs("span",{className:"overview-kpi-meta",children:[N," sent today"]})]}),s.jsxs("div",{className:"overview-kpi-card",children:[s.jsx("div",{className:"overview-kpi-value",children:L.offer}),s.jsx("div",{className:"overview-kpi-label",children:"Total interviews"}),s.jsx("span",{className:"overview-kpi-meta",children:"Celebrations so far"})]})]})}),s.jsxs("div",{className:"overview-card overview-chart-card",children:[s.jsxs("div",{className:"overview-card__header overview-chart-card__header",children:[s.jsxs("div",{children:[s.jsx("h2",{children:"Pipeline over time"}),s.jsx("p",{children:"From your first signup to today."})]}),te.length>0&&s.jsx("div",{className:"overview-chart-toggles",role:"group","aria-label":"Toggle chart lines",children:Object.keys(jo).map(he=>s.jsxs("label",{className:"overview-chart-toggle",children:[s.jsx("input",{type:"checkbox",checked:o[he],onChange:()=>a(he)}),s.jsx("span",{className:"overview-chart-toggle__swatch",style:{background:jo[he].color}}),s.jsx("span",{children:jo[he].label})]},he))})]}),s.jsx("div",{className:"overview-card__body",children:te.length===0?s.jsxs("div",{className:"overview-empty-state overview-chart-empty",children:[s.jsx("p",{children:"No history yet."}),s.jsx("span",{children:"Once you start evaluating applications, well visualize your momentum."})]}):ve.length===0?s.jsxs("div",{className:"overview-empty-state overview-chart-empty",children:[s.jsx("p",{children:"No lines selected."}),s.jsx("span",{children:"Turn on at least one series to see the trend."})]}):s.jsxs("div",{className:"overview-line-chart","aria-hidden":!1,children:[s.jsx("div",{className:"overview-chart-y-axis-labels",children:Te.map((he,me)=>s.jsx("span",{children:he},`y-axis-${me}`))}),s.jsxs("div",{className:"overview-line-chart__canvas",onPointerMove:ze,onPointerLeave:vt,children:[s.jsxs("svg",{role:"img","aria-label":"Application progress over time",viewBox:`0 0 ${oe.width} ${oe.height}`,preserveAspectRatio:"none",children:[s.jsx("rect",{x:"0",y:"0",width:oe.width,height:oe.height,fill:"transparent"}),Array.from({length:5}).map((he,me)=>{const Me=oe.height-oe.paddingY*2,pe=oe.paddingY+Me/4*me;return s.jsx("line",{x1:oe.paddingX,x2:oe.width-oe.paddingX,y1:pe,y2:pe,className:"overview-chart-gridline"},`grid-${me}`)}),s.jsx("line",{x1:oe.paddingX,y1:oe.height-oe.paddingY,x2:oe.width-oe.paddingX,y2:oe.height-oe.paddingY,className:"overview-chart-axis"}),s.jsx("line",{x1:oe.paddingX,y1:oe.paddingY,x2:oe.paddingX,y2:oe.height-oe.paddingY,className:"overview-chart-axis"}),ve.map(he=>s.jsxs("g",{children:[s.jsx("path",{d:ee(he),className:"overview-chart-line",style:{stroke:jo[he].color}}),ge&&h&&s.jsx("circle",{cx:ae(h.index,ge[he]).x,cy:ae(h.index,ge[he]).y,r:4.5,className:"overview-chart-dot",style:{fill:jo[he].color}})]},he)),ge&&Je!==null&&s.jsx("line",{x1:Je,y1:oe.paddingY,x2:Je,y2:oe.height-oe.paddingY,className:"overview-chart-hover-line"})]}),ge&&h&&s.jsxs("div",{className:"overview-chart-tooltip",style:{left:`${h.xPercent}%`},role:"status",children:[s.jsx("p",{children:I1(ge.date)}),s.jsx("ul",{children:ve.map(he=>s.jsxs("li",{children:[s.jsx("span",{className:"overview-chart-tooltip__swatch",style:{background:jo[he].color}}),s.jsx("span",{children:jo[he].label}),s.jsx("strong",{children:ge[he]})]},`tooltip-${he}`))})]}),s.jsxs("div",{className:"overview-chart-axis-labels",children:[s.jsx("span",{children:ue}),s.jsx("span",{children:Ce})]})]})]})})]})]}),s.jsx("section",{className:"overview-columns overview-columns--single",children:s.jsx("div",{className:"overview-column",children:s.jsxs("div",{className:"overview-card",children:[s.jsx("div",{className:"overview-card__header",children:s.jsxs("div",{children:[s.jsx("h2",{children:"Recent activity"}),s.jsx("p",{children:"Latest agent updates, applications, and interview moves."})]})}),s.jsx("div",{className:"overview-card__body",children:ne()})]})})}),s.jsx("button",{className:"overview-farewell-button",onClick:()=>T(!0),children:"I got an offer, bye "}),Y&&s.jsxs("div",{className:"overview-farewell-modal",role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"overview-farewell-modal__backdrop",onClick:()=>T(!1)}),s.jsxs("div",{className:"overview-farewell-modal__content",children:[s.jsx("h3",{children:"Congrats!"}),s.jsx("p",{children:"this app is borned to be deleted, we are so happy to hear this. and bye!"}),s.jsxs("div",{className:"overview-farewell-modal__actions",children:[s.jsx(ot,{variant:"secondary",size:"md",onClick:()=>T(!1),children:"Ops - bring me back"}),s.jsx(ot,{variant:"primary",size:"md",onClick:S,children:"Bye"})]})]})]})]})};function Jd(e){return e?{workflowOrder:e.selected_ordered_run_template_ids||[],blockedTemplateIds:e.bot_blocked_run_template_ids||[],autoGenerateATSResume:!!e.selected_ats_template_id&&(e.use_ats_optimized??!1),resumeId:e.selected_resume_id??null,atsTemplateId:e.selected_ats_template_id??null,useAtsOptimized:e.use_ats_optimized??!1,semanticInstructions:e.semantic_instructions??"",autonomousStartingUrl:"",maxJobsPerPlatform:10,headlessOn:e.headless_on??!1,autoInfiniteHuntOn:e.auto_infinite_hunt_on??!0,perPlatformLogin:{}}:{workflowOrder:[],blockedTemplateIds:[],autoGenerateATSResume:!1,resumeId:null,atsTemplateId:null,useAtsOptimized:!1,semanticInstructions:"",autonomousStartingUrl:"",maxJobsPerPlatform:10,headlessOn:!1,autoInfiniteHuntOn:!0,perPlatformLogin:{}}}function Vb(e){return{selected_resume_id:e.resumeId||null,selected_ats_template_id:e.atsTemplateId||null,selected_ordered_run_template_ids:e.workflowOrder,use_ats_optimized:e.autoGenerateATSResume&&!!e.atsTemplateId,semantic_instructions:e.semanticInstructions?.trim()||null,headless_on:e.headlessOn??!1,auto_infinite_hunt_on:e.autoInfiniteHuntOn??!0}}class mte{constructor(){this.configBasePath=`${Rn}/api/infinite-runs`,this.controlBasePath=`${rr}/api/infinite-hunt`,this.activityBasePath=`${rr}/api/infinite-hunt/activity`}async getRun(){try{const t=await Cr.get(`${this.configBasePath}/me`);if(!t.ok){if(t.status===404)return null;const n=await t.text();throw new Error(`Failed to get infinite run: ${t.status} ${n}`)}return(await t.json())?.infinite_run||null}catch(t){if(t?.message?.includes("404")||t?.status===404)return null;throw t}}async saveConfig(t,r){const l={...Vb(t),status:r};try{return(await(await Cr.patch(`${this.configBasePath}/me`,l)).json())?.infinite_run}catch(i){if(i?.status===404||i?.response?.status===404)return(await(await Cr.post(`${this.configBasePath}/`,l)).json())?.infinite_run;throw i}}async createConfig(t,r){const n=Vb(t);return(await(await Cr.post(`${this.configBasePath}/`,{...n,status:r})).json())?.infinite_run}async start(t){return(await Cr.post(`${this.controlBasePath}/start`,t?{message:t}:{})).json()}async stop(t){return(await Cr.post(`${this.controlBasePath}/stop`,t?{message:t}:{})).json()}async pause(){return(await Cr.post(`${this.controlBasePath}/pause`,{})).json()}async resume(){return(await Cr.post(`${this.controlBasePath}/resume`,{})).json()}async getStatus(){return(await Cr.get(`${this.controlBasePath}/status`)).json()}async getMetadata(){return(await Cr.get(`${this.controlBasePath}/metadata`)).json()}async getActivityMessages(t){const r=await Cr.get(`${rr}/api/activity/pending/${t}`);if(!r.ok)throw new Error("Failed to fetch activity messages");return r.json()}async resetOnLogin(){try{const t=await this.getRun();if(!t){console.log("[InfiniteHuntApiService] No infinite run record found - nothing to reset");return}if(console.log("[InfiniteHuntApiService] Current infinite run status:",t.status),t.status==="running"){console.log("[InfiniteHuntApiService] Resetting infinite run status to stopped");try{await this.stop("Reset on login - cleaning up orphaned run")}catch(r){console.warn("[InfiniteHuntApiService] Could not stop backend process (may not be running):",r)}await this.saveConfig(Jd(t),"stopped"),console.log("[InfiniteHuntApiService] Successfully reset infinite run status to stopped")}else console.log("[InfiniteHuntApiService] Infinite run is not running - no reset needed")}catch(t){console.error("[InfiniteHuntApiService] Error during resetOnLogin:",t)}}}const Hr=new mte,yte=Object.freeze(Object.defineProperty({__proto__:null,configToDb:Vb,dbToConfig:Jd,infiniteHuntApiService:Hr},Symbol.toStringTag,{value:"Module"})),P8="jobhuntr_guidance_completed",vte=({showText:e,isCollapsed:t,isHovered:r=!1,onTabChange:n,onNavigateWithParams:l})=>{const[i,d]=F.useState(!1),[p,g]=F.useState([]),[x,y]=F.useState(!0),[w,j]=F.useState(!1);F.useEffect(()=>{sessionStorage.getItem(P8)==="true"&&(console.log("Getting Started guidance already completed - skipping"),j(!0),y(!1))},[]);const _=async()=>{if(w){console.log("Guidance already completed - skipping API check");return}if(!await mr.getValidToken()){console.log(" No valid authentication token - deferring guidance check"),y(!1),setTimeout(()=>{w||_()},1e3);return}try{y(!0);let D=!1;try{const T=await an.getApplicationHistory();D=T&&T.length>0}catch(T){console.log("Could not check application history:",T)}let U=!1;try{const T=await ln.listTemplates();U=T?.success&&T.templates&&T.templates.some(o=>o.original_html)}catch(T){console.log("Could not check ATS templates:",T)}let G=!1;try{const T=await Wn.getTemplates();G=T?.success&&T.templates&&T.templates.some(o=>o.example_cover_letter_result)}catch(T){console.log("Could not check cover letter templates:",T)}let $=!1;try{const T=await an.getApplicationHistory();$=T&&T.some(o=>o.ats_template_id)}catch(T){console.log("Could not check ATS agent runs:",T)}let re=!1;try{const T=await ud.getContacts();re=T&&T.length>0}catch(T){console.log("Could not check contacts:",T)}let Q=!1;try{const T=await Hr.getRun();Q=T&&T.session_id!=null}catch(T){console.log("Could not check infinite hunt:",T)}const H=[{id:"infinite-hunt",title:"Start Infinite Hunt",description:"Launch an always-on job hunting session",completed:Q,action:()=>n("infinite-hunting")},{id:"first-hunt",title:"Start Your First Run",description:"Run your first job hunting workflow",completed:D,action:()=>n("run")},{id:"ats-resume",title:"Create ATS Resume Template",description:"Build an ATS-optimized resume template",completed:U,action:()=>n("ats")},{id:"cover-letter",title:"Create Cover Letter Template",description:"Design a personalized cover letter",completed:G,action:()=>n("cover-letter")},{id:"ats-workflow",title:"Start ATS Agent Run",description:"Use your ATS template in applications",completed:$,action:()=>{l?l("runs",{openCreateModal:!0}):n("runs")}},{id:"outreach",title:"Outreach to Hiring Teams",description:"Connect with recruiters and hiring managers",completed:re,action:()=>n("outreach")}];g(H),H.every(T=>T.completed)&&(console.log("All Getting Started tasks completed! Saving to sessionStorage"),sessionStorage.setItem(P8,"true"),j(!0),Tn.trackEvent("getting_started_completed",{completedCount:H.length}))}catch(D){console.error("Error checking guidance completion status:",D)}finally{y(!1)}};F.useEffect(()=>{w||_()},[w]),F.useEffect(()=>{(e&&!t||r)&&(w||_())},[e,t,r,w]),F.useEffect(()=>{const B=()=>{w||(console.log("ATS template updated, refreshing guidance..."),_())},D=()=>{w||(console.log("Cover letter updated, refreshing guidance..."),_())};return window.addEventListener("atsTemplateUpdated",B),window.addEventListener("coverLetterUpdated",D),()=>{window.removeEventListener("atsTemplateUpdated",B),window.removeEventListener("coverLetterUpdated",D)}},[w]);const A=p.filter(B=>B.completed).length,E=p.length,P=E>0?Math.round(A/E*100):0,z=E>0&&A<E;return F.useEffect(()=>{z&&!x&&d(!0)},[z,x]),!e||w?null:s.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[s.jsxs("button",{onClick:()=>d(!i),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"0",backgroundColor:"transparent",border:"none",cursor:"pointer",marginBottom:i?"12px":"0"},children:[s.jsxs("div",{style:{textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1f2937",marginBottom:"2px"},children:"Getting Started"}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[A,"/",E," completed (",P,"%)"]})]}),i?s.jsx(Ud,{size:16,color:"#6b7280"}):s.jsx(ks,{size:16,color:"#6b7280"})]}),s.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",marginBottom:i?"12px":"0",overflow:"hidden"},children:s.jsx(jt.div,{style:{height:"100%",backgroundColor:"#10b981",borderRadius:"2px"},initial:{width:0},animate:{width:`${P}%`},transition:{duration:.5,ease:"easeOut"}})}),s.jsx(Wr,{children:i&&s.jsx(jt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},style:{overflow:"hidden"},children:s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"140px",overflowY:"auto"},children:p.map((B,D)=>s.jsxs(jt.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:D*.05},onClick:B.action,style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"8px",backgroundColor:B.completed?"#f0fdf4":"#ffffff",border:`1px solid ${B.completed?"#bbf7d0":"#e5e7eb"}`,borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:U=>{B.completed||(U.currentTarget.style.backgroundColor="#f9fafb",U.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:U=>{U.currentTarget.style.backgroundColor=B.completed?"#f0fdf4":"#ffffff",U.currentTarget.style.borderColor=B.completed?"#bbf7d0":"#e5e7eb"},children:[s.jsx("div",{style:{marginTop:"1px"},children:x?s.jsx(zR,{size:16,color:"#6b7280",className:"animate-spin"}):B.completed?s.jsx(Mi,{size:16,color:"#10b981"}):s.jsx(qU,{size:16,color:"#9ca3af"})}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontSize:"0.8125rem",fontWeight:"500",color:B.completed?"#065f46":"#374151",marginBottom:"2px",textDecoration:B.completed?"line-through":"none"},children:B.title}),s.jsx("div",{style:{fontSize:"0.75rem",color:B.completed?"#059669":"#6b7280",lineHeight:"1.3"},children:B.description})]})]},B.id))})})})]})},xte={expanded:{opacity:1,display:"block"},collapsed:{opacity:0,display:"none"}},bte=e=>{const t=e.toLowerCase();return t.includes("indeed")?"./other_logos/Indeed.png":t.includes("linkedin")?"./other_logos/linkedin.png":t.includes("ziprecruiter")?"./other_logos/Ziprecruiter.png":t.includes("glassdoor")?"./other_logos/Glassdoor.png":t.includes("dice")?"./other_logos/Dice.png":"./logo.png"},N8=e=>{if(e<60)return`${e}s`;const t=Math.floor(e/60),r=e%60;if(t<60)return`${t}m ${r}s`;const n=Math.floor(t/60),l=t%60;return`${n}h ${l}m`},wte=({showText:e,isCollapsed:t,isHovered:r})=>{const[n,l]=F.useState(null),[i,d]=F.useState(null),[p,g]=F.useState({}),[x,y]=F.useState(0),[w,j]=F.useState(0),[_,A]=F.useState(!0),E=!t||r,P=F.useRef(!1),z=F.useRef(null),B=F.useRef(null),D=F.useRef(!1),U=n?.is_running??!1,G=n?.auto_hunt_status?.enabled??!1;if(F.useEffect(()=>{if(!E){P.current=!1;return}if(P.current)return;(async()=>{try{A(!0);const[b,M,R]=await Promise.all([Hr.getMetadata(),Hr.getRun(),lc.listTemplates()]);l(b),d(M);const S={};R.forEach(a=>{S[a.id]=a}),g(S),P.current=!0}catch(b){console.error("[InfiniteRunStatus] Failed to fetch data:",b)}finally{A(!1)}})()},[E]),F.useEffect(()=>{z.current&&(clearInterval(z.current),z.current=null);const v=n?.started_at;if(!v){y(0);return}const b=new Date(v).getTime();if(U){const M=Math.max(0,Math.floor((Date.now()-b)/1e3));y(M),z.current=setInterval(()=>{y(R=>R+1)},1e3)}else{const M=n?.ended_at;if(M){const R=new Date(M).getTime(),S=Math.floor((R-b)/1e3);y(Math.max(0,S))}else y(0)}return()=>{z.current&&(clearInterval(z.current),z.current=null)}},[n?.started_at,n?.ended_at,U]),F.useEffect(()=>{if(B.current&&(clearInterval(B.current),B.current=null),U||!G){j(0),D.current=!1;return}const v=n?.auto_hunt_status?.seconds_until_next_check??0;return j(v),v>0&&(D.current=!0),B.current=setInterval(()=>{j(b=>Math.max(0,b-1))},1e3),()=>{B.current&&(clearInterval(B.current),B.current=null)}},[U,G,n?.auto_hunt_status?.seconds_until_next_check]),F.useEffect(()=>{w===0&&G&&!U&&!document.hidden&&D.current&&(D.current=!1,window.dispatchEvent(new CustomEvent("jobhuntr:navigate",{detail:{view:"infinite-hunting"}})))},[w,G,U]),!E)return null;if(_&&!n)return s.jsx("div",{style:{padding:"8px 12px",marginBottom:"8px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)",borderRadius:"var(--radius-sm)",fontSize:"0.75rem"},children:s.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--text-muted)"},children:s.jsx("span",{children:"Loading..."})})});const $=n?.current_agent_run?.job_stats??{queued:0,skipped:0,submitted:0,failed:0},re=n?.cumulative_job_stats??{queued:0,skipped:0,submitted:0,failed:0},Q={queued:$.queued+re.queued,skipped:$.skipped+re.skipped,submitted:$.submitted+re.submitted,failed:$.failed+re.failed},H=n?.agent_runs_by_template??{},Y=i?.selected_ordered_run_template_ids??[],T=Object.entries(H).map(([v,b])=>({templateName:v,runsCompleted:b})),o=new Set(T.map(v=>v.templateName)),c=Y.map(v=>p[v]?.name??null).filter(v=>v!==null&&!o.has(v)).map(v=>({templateName:v,runsCompleted:0})),h=[...T,...c];return s.jsx(Wr,{mode:"wait",children:e&&s.jsxs(jt.div,{variants:xte,animate:"expanded",exit:"collapsed",transition:{duration:0},style:{padding:"10px 12px",marginBottom:"8px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-subtle)",borderRadius:"var(--radius-sm)",fontSize:"0.75rem"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx(SU,{size:12,style:{color:U?"var(--accent-green)":"var(--text-muted)"}}),s.jsx("span",{style:{fontWeight:"var(--font-weight-semibold)",color:"var(--text-primary)"},children:"Infinite Hunt"})]}),s.jsx("span",{style:{padding:"2px 6px",borderRadius:"9999px",fontSize:"0.65rem",fontWeight:"var(--font-weight-medium)",backgroundColor:"var(--bg-tertiary)",color:U?"var(--accent-green)":"var(--text-muted)"},children:U?"Active":"Idle"})]}),x>0&&s.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginBottom:"8px"},children:[U?"Session: ":"Last session: ",s.jsx("span",{style:{fontWeight:"var(--font-weight-medium)"},children:N8(x)})]}),h.length>0&&s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginBottom:"4px",fontWeight:"var(--font-weight-medium)"},children:"Templates"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:h.map(({templateName:v,runsCompleted:b})=>s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.65rem",color:"var(--text-secondary)"},children:[s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[s.jsx("img",{src:bte(v),alt:"",style:{width:"12px",height:"12px",objectFit:"contain"}}),v]}),s.jsxs("span",{style:{color:"var(--text-muted)"},children:[b," runs"]})]},v))})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginBottom:"4px",fontWeight:"var(--font-weight-medium)"},children:"Job Stats"}),s.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",fontSize:"0.65rem",color:"var(--text-secondary)"},children:[s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",opacity:Q.queued===0?.5:1},children:[s.jsx(Wi,{size:10})," Queued: ",Q.queued]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",opacity:Q.submitted===0?.5:1},children:[s.jsx(Mi,{size:10})," Submitted: ",Q.submitted]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",opacity:Q.skipped===0?.5:1},children:[s.jsx(W$,{size:10})," Skipped: ",Q.skipped]}),s.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px",opacity:Q.failed===0?.5:1},children:[s.jsx(Ba,{size:10})," Failed: ",Q.failed]})]})]}),!U&&G&&w>0&&s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.6rem",color:"var(--accent-blue)"},children:[s.jsx(iq,{size:9}),s.jsxs("span",{children:["Auto-start in"," ",s.jsx("span",{style:{fontWeight:"var(--font-weight-semibold)"},children:N8(w)})]})]})})]})})},_te={jobBoard:!1},Ste=({isCollapsed:e,onToggle:t,activeTab:r,onTabChange:n,onNewTask:l,onLogout:i,userEmail:d,onHoverChange:p,clientContext:g,onReturnToCoachDashboard:x,onNavigateWithParams:y})=>{const[w,j]=F.useState(!1),[_,A]=F.useState(!1),[E,P]=F.useState(!1),[z,B]=F.useState(!1);F.useEffect(()=>{g||(async()=>{try{const Y=await sn.getSubscriptionStatus();B(Y.tier!=="free"),Y.used>=Y.limit&&Y.tier==="free"&&window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:{error_code:"LIMIT_EXCEEDED",message:`You've used ${Y.used} of your ${Y.limit} free applications.`,current_tier:Y.tier,call_to_action:"Upgrade to Pro or Unlimited to continue applying to jobs."}}}))}catch(Y){console.error("Error checking subscription:",Y),B(!1)}})()},[g]);const D=async()=>{try{sn.clearCache(),(await sn.getSubscriptionStatus()).tier!=="free"&&B(!0),window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:null}}))}catch(H){console.error("Error checking subscription status:",H),window.dispatchEvent(new CustomEvent("showSubscriptionModal",{detail:{errorDetails:null}}))}},U={expanded:{width:280},collapsed:{width:64}},G={expanded:{opacity:1,display:"block"},collapsed:{opacity:0,display:"none"}},$=()=>{j(!w)},re=async()=>{const H="https://join.slack.com/t/jobhuntrfyi/shared_invite/zt-37b16bo2f-aYwEadlFMHPHYAycDgCERA";if(window.electronAPI?.openExternalUrl)try{const Y=await window.electronAPI.openExternalUrl(H);Y.success||(console.error("Failed to open Slack URL:",Y.error),window.open(H,"_blank","noopener,noreferrer"))}catch(Y){console.error("Error opening external URL:",Y),window.open(H,"_blank","noopener,noreferrer")}else window.open(H,"_blank","noopener,noreferrer")},Q=!e||_;return s.jsxs(jt.div,{className:`sidebar ${e&&!_?"collapsed":""}`,variants:U,animate:Q?"expanded":"collapsed",transition:{duration:.15,ease:"easeOut"},onAnimationStart:()=>{Q||(P(!1),j(!1))},onAnimationComplete:()=>{Q&&P(!0)},onMouseEnter:()=>{A(!0),p?.(!0)},onMouseLeave:()=>{A(!1),e&&P(!1),p?.(!1)},children:[s.jsx("div",{className:"sidebar-header",children:s.jsx("div",{className:"sidebar-logo",children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"nowrap",whiteSpace:"nowrap",justifyContent:e&&!_?"center":"flex-start",width:"100%"},children:[s.jsx("img",{src:"./logo.png",alt:"Logo",style:{width:"32px",height:"32px",objectFit:"contain"}}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"logo-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"JobHuntr"})})]})})}),s.jsxs("nav",{className:"sidebar-nav",style:{alignItems:e&&!_?"center":"stretch"},children:[s.jsxs("button",{className:`nav-item ${r==="overview"?"active":""}`,onClick:()=>n("overview"),title:"Overview",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(d$,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Overview"})})]}),s.jsxs("button",{className:`nav-item ${r==="infinite-hunting"?"active":""}`,onClick:()=>n("infinite-hunting"),title:"Infinite Hunting",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(l$,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Infinite Hunting"})})]}),_te.jobBoard,s.jsxs("button",{className:`nav-item ${r==="runs"||r==="run"?"active":""}`,onClick:()=>n("runs"),title:"Agent Runs",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(h$,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"All Runs"})})]}),s.jsxs("button",{className:`nav-item ${r==="ats"?"active":""}`,onClick:()=>n("ats"),title:"ATS Templates",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(hp,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"ATS Resume"})})]}),s.jsxs("button",{className:`nav-item ${r==="cover-letter"?"active":""}`,onClick:()=>n("cover-letter"),title:"Cover Letter",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(Lo,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Cover Letter"})})]}),s.jsxs("button",{className:`nav-item ${r==="job-tracker"?"active":""}`,onClick:()=>n("job-tracker"),title:"Job Tracker",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(aq,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Job Tracker"})})]}),s.jsxs("button",{className:`nav-item ${r==="outreach"?"active":""}`,onClick:()=>n("outreach"),title:"Outreach",style:{justifyContent:e&&!_?"center":"flex-start",padding:e&&!_?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!_?"36px":"100%",height:"36px",marginLeft:e&&!_?"auto":"0",marginRight:e&&!_?"auto":"0"},children:[s.jsx(Hs,{size:14}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{className:"nav-text",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Outreach"})})]})]}),s.jsxs("div",{className:"sidebar-user",children:[g&&x&&s.jsxs("button",{className:"coach-return-button",onClick:x,title:"Return to Coach Dashboard",style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",padding:"8px 12px",marginBottom:"8px",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",color:"#374151",fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#e5e7eb",H.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#f3f4f6",H.currentTarget.style.borderColor="#d1d5db"},children:[s.jsx(Od,{size:14}),E&&s.jsx("span",{children:"Back to Coach"})]}),!g&&s.jsx(vte,{showText:E,isCollapsed:e,isHovered:_,onTabChange:H=>n(H),onNavigateWithParams:y}),!g&&s.jsx(wte,{showText:E,isCollapsed:e,isHovered:_}),!g&&!z&&s.jsxs("button",{onClick:D,title:"Upgrade to Pro",style:{display:"flex",alignItems:"center",justifyContent:e&&!_?"center":"flex-start",gap:"8px",width:"100%",padding:e&&!_?"8px":"8px 12px",marginBottom:"8px",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",color:"#ffffff",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#2563eb"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#3b82f6"},children:[s.jsx(YU,{size:16}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Upgrade"})})]}),!g&&s.jsxs("button",{onClick:re,title:"Join Slack Community",style:{display:"flex",alignItems:"center",justifyContent:e&&!_?"center":"flex-start",gap:"8px",width:"100%",padding:e&&!_?"8px":"8px 12px",marginBottom:"8px",backgroundColor:"transparent",border:"none",borderRadius:"6px",color:"#6b7280",fontSize:"0.875rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#f3f4f6",H.currentTarget.style.color="#374151"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="transparent",H.currentTarget.style.color="#6b7280"},children:[s.jsx(OR,{size:16}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.span,{variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Join Community"})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:`user-button ${w?"active":""}`,onClick:g?void 0:$,title:g?`Viewing: ${g.clientName}`:"User Menu",style:{cursor:g?"default":"pointer",opacity:g?.8:1},children:[s.jsx("div",{className:"user-avatar",children:s.jsx(cc,{size:16})}),s.jsx(Wr,{mode:"wait",children:E&&s.jsx(jt.div,{className:"user-info",variants:G,animate:"expanded",exit:"collapsed",transition:{duration:0},children:g?s.jsx(s.Fragment,{children:s.jsxs("span",{className:"user-name",children:["Viewing ",g.clientName,"'s profile"]})}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"user-name",children:"User"}),s.jsx("span",{className:"user-email",children:d||"user@example.com"})]})})})]}),s.jsx(Wr,{children:w&&E&&!g&&s.jsxs(jt.div,{className:"user-menu",initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:0},children:[s.jsxs("button",{className:"user-menu-item",onClick:()=>n("user"),children:[s.jsx(Wp,{size:16}),s.jsx("span",{children:"Settings"})]}),s.jsxs("button",{className:"user-menu-item",onClick:i,children:[s.jsx(PR,{size:16}),s.jsx("span",{children:"Sign Out"})]})]})})]})]})]})},I_="onboarding_progress",z_={isOnboarding:!1,hasUploadedResume:!1};function Ul(){try{const e=sessionStorage.getItem(I_);if(e)return JSON.parse(e)}catch(e){console.error("Failed to parse onboarding progress:",e)}return z_}function y9(e){try{sessionStorage.setItem(I_,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("onboardingProgressChanged",{detail:e}))}catch(t){console.error("Failed to save onboarding progress:",t)}}function v9(){y9({isOnboarding:!0,hasUploadedResume:!1})}function kte(){const e=Ul();e.isOnboarding&&y9({...e,hasUploadedResume:!0})}function x9(){try{sessionStorage.removeItem(I_),window.dispatchEvent(new CustomEvent("onboardingProgressChanged",{detail:z_}))}catch(e){console.error("Failed to clear onboarding progress:",e)}}function D8(){return Ul().isOnboarding}function b9(){const[e,t]=F.useState(Ul);F.useEffect(()=>{const i=d=>{t(d.detail)};return window.addEventListener("onboardingProgressChanged",i),t(Ul()),()=>{window.removeEventListener("onboardingProgressChanged",i)}},[]);const r=F.useCallback(()=>{v9(),t(Ul())},[]),n=F.useCallback(()=>{kte(),t(Ul())},[]),l=F.useCallback(()=>{x9(),t(z_)},[]);return{isOnboarding:e.isOnboarding,hasUploadedResume:e.hasUploadedResume,startOnboarding:r,markResumeUploaded:n,endOnboarding:l}}const jte=({children:e,currentView:t,onViewChange:r,onAgentGenerated:n,isSpotlightMinimized:l=!1,onSpotlightToggle:i,onNewAgent:d,onLogout:p,userEmail:g,clientContext:x,onReturnToCoachDashboard:y,onNavigateWithParams:w})=>{const[j,_]=F.useState(!0),[A,E]=F.useState(!1),[P,z]=F.useState(!1),{isOnboarding:B}=b9(),D=$=>{E($)},U=$=>{r($)},G=()=>{z(!0)};return s.jsxs("div",{className:"dashboard-layout",children:[!B&&s.jsx(Ste,{isCollapsed:j,onToggle:()=>_(!j),activeTab:t,onTabChange:U,onNewTask:G,onLogout:p,userEmail:g,onHoverChange:D,clientContext:x,onReturnToCoachDashboard:y,onNavigateWithParams:w}),s.jsx(jt.main,{className:"dashboard-main",animate:{marginLeft:B?0:!j||A?280:64},transition:{duration:.15,ease:"easeOut"},children:e})]})},w9=({email:e,onLogin:t,onBack:r,isCoachMode:n=!1})=>{const[l,i]=F.useState(""),[d,p]=F.useState(!1),[g,x]=F.useState(!1),[y,w]=F.useState(""),j=F.useRef(null);F.useEffect(()=>{j.current?.focus()},[]);const _=async E=>{if(E.preventDefault(),!!l.trim()){x(!0),w("");try{const{token:P,user:z}=await mr.login(e,l),B=z.is_coach!==void 0?z.is_coach:n,D=z.role||(B?"coach":"client"),U={...z,is_coach:B,role:D};await t(P,U)}catch(P){console.error("Auth error:",P);const z=P instanceof Error?P.message:"Login failed";z.toLowerCase().includes("invalid email")?w("Please enter a valid email address."):z.toLowerCase().includes("password")?w("Password must be at least 8 characters long."):z.toLowerCase().includes("network")?w("Network error. Please check your connection and try again."):w(z)}finally{x(!1)}}},A=async()=>{const E="https://jobhuntr.fyi/forgot-password";if(window.electronAPI?.openExternalUrl)try{const P=await window.electronAPI.openExternalUrl(E);P.success||(console.error("Failed to open forgot password URL:",P.error),window.open(E,"_blank","noopener,noreferrer"))}catch(P){console.error("Error opening forgot password URL:",P),window.open(E,"_blank","noopener,noreferrer")}else window.open(E,"_blank","noopener,noreferrer")};return s.jsx("div",{className:"auth-page light",children:s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-detailed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr"})]}),s.jsxs("div",{className:"auth-headline",children:[s.jsx("h2",{className:"auth-title",children:n?"Coach Sign In":"Sign in to your account"}),s.jsx("p",{className:"auth-subtitle",children:n?"Access your coaching dashboard":"You're no longer alone in your job search"})]}),s.jsxs("div",{className:"email-display",children:[s.jsx($o,{className:"input-icon",size:16}),s.jsx("span",{className:"email-text",children:e})]}),y&&s.jsxs(jt.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[s.jsx(Ki,{size:16}),y]}),s.jsxs("form",{onSubmit:_,className:"auth-form",children:[s.jsxs("div",{className:"input-group",children:[s.jsxs("div",{className:"password-input-wrapper",children:[s.jsx(BR,{className:"input-icon",size:16}),s.jsx("input",{ref:j,type:d?"text":"password",value:l,onChange:E=>i(E.target.value),placeholder:"Enter your password",className:"auth-input password-input",required:!0,minLength:8}),s.jsx("button",{type:"button",onClick:()=>p(!d),className:"password-toggle",children:d?s.jsx($d,{size:16}):s.jsx(os,{size:16})})]}),s.jsx("button",{type:"button",onClick:A,className:"forgot-password-link",children:"Forgot password?"})]}),s.jsx("button",{type:"submit",disabled:g||!l.trim(),className:"auth-button-full",children:g?s.jsx("div",{className:"loading-spinner"}):s.jsxs(s.Fragment,{children:["Sign In",s.jsx(Gs,{size:16})]})})]}),s.jsx("div",{className:"auth-footer",children:s.jsx("button",{onClick:r,className:"auth-back-button",children:" Back"})})]})})})},Mte=[{value:"reddit",label:"Reddit"},{value:"llm",label:"LLM (ChatGPT, Claude, etc.)"},{value:"github",label:"GitHub"},{value:"linkedin",label:"LinkedIn"},{value:"tiktok",label:"TikTok"},{value:"instagram",label:"Instagram"},{value:"rednote",label:"RedNote"},{value:"x",label:"X (Twitter)"},{value:"from_friend",label:"From a friend"}],_9=({email:e,onLogin:t,onBack:r,isCoachMode:n=!1,invitationCode:l})=>{const i=l?`anonymous_${l}`:void 0,[d,p]=F.useState(""),[g,x]=F.useState(""),[y,w]=F.useState(""),[j,_]=F.useState(""),[A,E]=F.useState(!1),[P,z]=F.useState(!1),[B,D]=F.useState(""),U=F.useRef(null);F.useEffect(()=>{U.current?.focus()},[]);const G="https://democratized-service-gateway-production.up.railway.app",$=async re=>{re.preventDefault();const Q=d.trim(),H=g.trim();if(!Q||!H||!y.trim()){D("Please provide your first and last name and a valid password.");return}z(!0),D("");try{const Y=n?"/api/auth/coach/signup":"/api/auth/signup",T={email:e,password:y,first_name:Q,last_name:H};n||(j&&(T.referral_source=j),i&&(T.mixpanel_distinct_id=i));const o=await fetch(`${G}${Y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)}),c=await o.json();if(o.ok)if(c.access_token){const h=c.user?.role||c.user?.user_metadata?.role||c.user?.app_metadata?.role||"unknown",v=n?"coach":"client";if(h!==v){D(`Error: Account was created with wrong role (${h} instead of ${v}). Please contact support.`);return}const b={...c.user,user_metadata:{...c.user?.user_metadata,referral_source:j||void 0,mixpanel_distinct_id:i||void 0}},M={token:c.access_token,refreshToken:c.refresh_token||void 0,user:b,email:e,timestamp:Date.now()};try{localStorage.setItem("jobhuntr_auth",JSON.stringify(M)),mr.getStoredAuth()}catch(R){console.error("Failed to store auth data:",R),D("Failed to save authentication. Please try logging in instead.");return}if(n||v9(),l){const R=c.user?.id||c.user?.user_id||"";fetch(`${G}/api/auth/mark-invitation-code-used`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invitation_code:l,user_id:R})}).catch(S=>console.error("Failed to mark invitation code as used:",S))}await t(c.access_token,c.user)}else c.requires_confirmation?D("Account created! Please check your email to confirm your account before signing in."):D("Signup successful but no token received");else{const h=c.detail||c.msg||c.message||c.error_description;h?h.toLowerCase().includes("user already registered")?D("An account with this email already exists. Please try signing in."):h.toLowerCase().includes("invalid email")?D("Please enter a valid email address."):h.toLowerCase().includes("password")?D("Password must be at least 8 characters long."):D(h):o.status===400?D("Signup failed. Email might already be in use."):o.status===422?D("Invalid email or password format"):D("Signup failed")}}catch(Y){console.error("Signup error:",Y),D("Network error. Please try again.")}finally{z(!1)}};return s.jsx("div",{className:"auth-page light",children:s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-detailed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr"})]}),s.jsxs("div",{className:"auth-headline",children:[s.jsx("h2",{className:"auth-title",children:n?"Create your coach account":"Create your account"}),s.jsx("p",{className:"auth-subtitle",children:n?"Join as a career coach to help job seekers":"Get started with JobHuntr"})]}),s.jsxs("div",{className:"email-display",children:[s.jsx($o,{className:"input-icon",size:16}),s.jsx("span",{className:"email-text",children:e})]}),B&&s.jsxs(jt.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[s.jsx(Ki,{size:16}),B]}),s.jsxs("form",{onSubmit:$,className:"auth-form",children:[s.jsxs("div",{style:{display:"flex",gap:"16px",width:"100%",flexWrap:"wrap"},children:[s.jsx("div",{className:"input-group",style:{flex:1,minWidth:"200px"},children:s.jsx("div",{className:"input-with-icon",children:s.jsx("input",{ref:U,type:"text",value:d,onChange:re=>p(re.target.value),placeholder:"First name",className:"auth-input",required:!0})})}),s.jsx("div",{className:"input-group",style:{flex:1,minWidth:"200px"},children:s.jsx("div",{className:"input-with-icon",children:s.jsx("input",{type:"text",value:g,onChange:re=>x(re.target.value),placeholder:"Last name",className:"auth-input",required:!0})})})]}),s.jsxs("div",{className:"input-group",children:[s.jsxs("div",{className:"password-input-wrapper",children:[s.jsx(BR,{className:"input-icon",size:16}),s.jsx("input",{type:A?"text":"password",value:y,onChange:re=>w(re.target.value),placeholder:"Create a password",className:"auth-input password-input",required:!0,minLength:8}),s.jsx("button",{type:"button",onClick:()=>E(!A),className:"password-toggle",children:A?s.jsx($d,{size:16}):s.jsx(os,{size:16})})]}),s.jsx("p",{className:"password-hint",children:"Password must be at least 8 characters long"})]}),!n&&s.jsx("div",{className:"input-group",children:s.jsxs("div",{className:"select-wrapper",children:[s.jsxs("select",{value:j,onChange:re=>_(re.target.value),className:`auth-input auth-select ${j?"":"placeholder"}`,children:[s.jsx("option",{value:"",children:"Where did you hear about us?"}),Mte.map(re=>s.jsx("option",{value:re.value,children:re.label},re.value))]}),s.jsx(ks,{className:"select-icon",size:16})]})}),s.jsx("button",{type:"submit",disabled:P||!y.trim()||!n&&!j,className:"auth-button-full",children:P?s.jsx("div",{className:"loading-spinner"}):s.jsxs(s.Fragment,{children:["Create Account",s.jsx(Gs,{size:16})]})})]}),s.jsx("div",{className:"auth-footer",children:s.jsx("button",{onClick:r,className:"auth-back-button",children:" Back"})})]})})})},Cte=({email:e,onValidCode:t,onBack:r})=>{const[n,l]=F.useState(""),[i,d]=F.useState(!1),[p,g]=F.useState(""),x=F.useRef(null),y="https://democratized-service-gateway-production.up.railway.app";F.useEffect(()=>{x.current?.focus()},[]);const w=async j=>{j.preventDefault();const _=n.trim();if(!_){g("Please enter your invitation code.");return}d(!0),g("");try{const A=await fetch(`${y}/api/auth/validate-invitation-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invitation_code:_})}),E=await A.json();if(A.ok&&E.valid)t(_);else{const P=E.detail||"Invalid invitation code. Please try again.";g(P)}}catch(A){console.error("Invitation code validation error:",A),g("Network error. Please try again.")}finally{d(!1)}};return s.jsx("div",{className:"auth-page light",children:s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-detailed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr"})]}),s.jsxs("div",{className:"auth-headline",children:[s.jsx("h2",{className:"auth-title",children:"Enter your invitation code"}),s.jsx("p",{className:"auth-subtitle",children:"Please enter the invitation code you received to continue signing up."})]}),s.jsxs("div",{className:"email-display",children:[s.jsx($o,{className:"input-icon",size:16}),s.jsx("span",{className:"email-text",children:e})]}),p&&s.jsxs(jt.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[s.jsx(Ki,{size:16}),p]}),s.jsxs("form",{onSubmit:w,className:"auth-form",children:[s.jsxs("div",{className:"input-group",children:[s.jsxs("div",{className:"password-input-wrapper",children:[s.jsx(rq,{className:"input-icon",size:16}),s.jsx("input",{ref:x,type:"text",value:n,onChange:j=>l(j.target.value),placeholder:"Enter invitation code",className:"auth-input password-input",required:!0})]}),s.jsx("p",{className:"password-hint",children:"Your invitation code was provided when you signed up for the waitlist."})]}),s.jsx("button",{type:"submit",disabled:i||!n.trim(),className:"auth-button-full",children:i?s.jsx("div",{className:"loading-spinner"}):s.jsxs(s.Fragment,{children:["Continue",s.jsx(Gs,{size:16})]})})]}),s.jsx("div",{className:"auth-footer",children:s.jsx("button",{onClick:r,className:"auth-back-button",children:" Back"})})]})})})},Tte="v2.8.0",L8=({onLogin:e,onSwitchToCoachAuth:t,onShowChromiumSetup:r,setupModalOpen:n})=>{const[l,i]=F.useState(""),[d,p]=F.useState(!1),[g,x]=F.useState("email"),[y,w]=F.useState(""),[j,_]=F.useState(""),[A,E]=F.useState({isReady:!1,browserType:null,browserVersion:null,isChecking:!0}),[P,z]=F.useState(!1),B="https://democratized-service-gateway-production.up.railway.app";F.useEffect(()=>{U()},[]);const D=async()=>{try{console.log(" Checking backend connection...");const Y=await fetch(`${rr}/status`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return Y.ok?(console.log(" Backend is reachable"),!0):(console.log(" Backend responded but not healthy:",Y.status),!1)}catch(Y){return console.log(" Backend is not reachable:",Y),!1}},U=async()=>{console.log(" Checking browser status via backend..."),E(o=>({...o,isChecking:!0}));let Y=!1;const T=5;for(let o=0;o<T;o++){if(console.log(` Checking backend connection (attempt ${o+1}/${T})...`),Y=await D(),Y){console.log("Backend is ready!");break}o<T-1&&(console.log("Backend not ready, waiting 1 second..."),await new Promise(c=>setTimeout(c,1e3)))}if(!Y){console.log("Backend not reachable after retries - skipping browser status check"),E({isReady:!1,browserType:"Chromium",browserVersion:"Backend offline",isChecking:!1});return}try{const o=await fetch(`${rr}/api/browser/check`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(o.ok){const c=await o.json();console.log(" Browser check response:",c),E({isReady:c.browser_available,browserType:c.browser_type||"Chromium",browserVersion:c.browser_version||"Unknown",isChecking:!1}),c.browser_available?console.log(` Browser ready: ${c.browser_type} ${c.browser_version} at ${c.executable_path}`):console.log(" No browser found - setup needed")}else console.error(" Browser check failed:",o.status,o.statusText),E({isReady:!1,browserType:"Chromium",browserVersion:"Check failed",isChecking:!1})}catch(o){console.error(" Failed to check browser status:",o);const c=o instanceof TypeError||o?.name==="AbortError"||o?.message?.includes("fetch");E({isReady:!1,browserType:"Chromium",browserVersion:c?"Backend offline":"Check failed",isChecking:!1}),console.log(c?" Network error - backend appears to be offline":" Browser setup needed - will trigger setup modal")}};F.useEffect(()=>{console.log(" Auto-trigger check:",{isChecking:A.isChecking,isReady:A.isReady,hasSetupFunction:!!r,hasTriggered:P,modalOpen:n,browserVersion:A.browserVersion});const Y=A.browserVersion==="Backend offline";!A.isChecking&&!A.isReady&&r&&!P&&!n?(console.log(` Auto-triggering Chromium setup - ${Y?"backend offline":"browser not ready"}`),console.log("Calling onShowChromiumSetup()..."),z(!0),r(),console.log("onShowChromiumSetup() called successfully")):console.log("Auto-trigger conditions not met")},[A.isChecking,A.isReady,A.browserVersion,r,P,n]);const G=async Y=>{if(Y.preventDefault(),!!l.trim()){p(!0),_("");try{const T=await fetch(`${B}/api/auth/user-status/${encodeURIComponent(l)}`),o=await T.json().catch(()=>({})),c=o&&typeof o=="object"&&!!o.user_id,v=(o&&o.detail?String(o.detail):"").toLowerCase().includes("not found");T.status===200&&c?x("login"):T.status===404||v||!c?x("invitation-code"):_(o.detail||"Unable to verify email. Please try again.")}catch(T){console.error("Email verification error:",T),_("Network error. Please try again.")}finally{p(!1)}}},$=()=>{x("email"),_(""),w("")},re=()=>{x("invitation-code"),_("")},Q=Y=>{w(Y),x("signup")};if(g==="login")return s.jsx(w9,{email:l,onLogin:e,onBack:$,isCoachMode:!1});if(g==="invitation-code")return s.jsx(Cte,{email:l,onValidCode:Q,onBack:$});if(g==="signup")return s.jsx(_9,{email:l,onLogin:e,onBack:re,isCoachMode:!1,invitationCode:y});const H=async()=>{const Y="https://join.slack.com/t/jobhuntrfyi/shared_invite/zt-37b16bo2f-aYwEadlFMHPHYAycDgCERA";if(window.electronAPI?.openExternalUrl)try{const T=await window.electronAPI.openExternalUrl(Y);T.success||(console.error("Failed to open Slack URL:",T.error),window.open(Y,"_blank","noopener,noreferrer"))}catch(T){console.error("Error opening external URL:",T),window.open(Y,"_blank","noopener,noreferrer")}else window.open(Y,"_blank","noopener,noreferrer")};return s.jsxs("div",{className:"auth-page light",children:[s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-simple",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr"})]}),s.jsx("div",{className:"auth-headline",children:s.jsx("h2",{className:"auth-title",children:"Your job hunt AI agent focused on quality over quantity"})}),s.jsxs("form",{onSubmit:G,className:"email-form",children:[s.jsx("label",{className:"email-label",children:"Email"}),s.jsxs("div",{className:"email-input-row",children:[s.jsxs("div",{className:"input-wrapper",children:[s.jsx($o,{className:"input-icon",size:20}),s.jsx("input",{type:"email",value:l,onChange:Y=>i(Y.target.value),placeholder:"name@example.com",className:"auth-input-simple",required:!0})]}),s.jsx("button",{type:"submit",disabled:d||!l.trim(),className:"auth-button-simple",children:d?s.jsx("div",{className:"loading-spinner"}):s.jsxs(s.Fragment,{children:["Continue",s.jsx(Gs,{size:16})]})})]}),j&&s.jsxs(jt.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginTop:"12px"},children:[s.jsx(Ki,{size:16}),j]})]}),t&&s.jsx("div",{className:"auth-mode-toggle",children:s.jsx("button",{type:"button",onClick:t,className:"mode-toggle-button",children:"Login as coach "})})]})}),s.jsxs(jt.div,{className:"demo-popup",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:[s.jsx("div",{className:"demo-content",children:s.jsxs("div",{className:"demo-text",children:[s.jsx("h3",{children:"Join our community"}),s.jsx("p",{children:"Connect with other job seekers and get support"})]})}),s.jsxs("button",{onClick:H,className:"demo-button",children:[s.jsx(OR,{size:16}),"Join Slack Community",s.jsx(Gs,{size:16})]})]}),s.jsx("div",{className:"fixed bottom-4 right-4 z-50",style:{position:"fixed",bottom:"16px",right:"16px",zIndex:9999,pointerEvents:"auto"},children:s.jsx("div",{className:"bg-gray-900 rounded-lg px-3 py-2 shadow-lg cursor-pointer hover:bg-gray-800 transition-colors",onClick:()=>{console.log(" Manual click on status badge"),r&&(console.log("Opening setup modal manually"),r())},title:r?"Click to open browser setup":"Browser status",style:{minWidth:"140px",color:f.colors.primary.light},children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white",children:Tte}),A.isChecking?s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-500 text-white animate-pulse",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-spin mr-1"}),"Checking"]}):A.isReady?s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-600 text-white",children:" Chrome ready"}):s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white transition-colors ${A.browserVersion==="Backend offline"?"bg-gray-600 hover:bg-gray-700 cursor-pointer":"bg-red-600 hover:bg-red-700 cursor-pointer"}`,title:A.browserVersion==="Backend offline"?"Backend server is offline - Click to setup":"Click to setup browser",children:A.browserVersion==="Backend offline"?" Backend Offline":" Setup Needed"})]})})})]})},Ate=({userEmail:e,onLogout:t})=>s.jsx("div",{className:"auth-page",children:s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-detailed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr"})]}),s.jsxs("div",{className:"not-invited-content",children:[s.jsx("h2",{className:"not-invited-title",children:"Account Created Successfully"}),s.jsxs("p",{className:"not-invited-subtitle",children:["Your account has been created with email: ",s.jsx("strong",{children:e})]}),s.jsxs("div",{className:"not-invited-message",children:[s.jsx("p",{children:"To gain access to JobHuntr, please contact us at:"}),s.jsx("a",{href:"mailto:hi@lookr.fyi",className:"contact-email",children:"hi@lookr.fyi"}),s.jsx("p",{className:"message-note",children:"We'll review your request and grant access as soon as possible."})]}),s.jsx("div",{className:"not-invited-actions",children:s.jsxs("button",{onClick:t,className:"btn btn-secondary",children:[s.jsx(Od,{size:16}),"Sign Out"]})})]})]})})}),Rte=({onLogin:e,onBackToJobSeeker:t})=>{const[r,n]=F.useState(""),[l,i]=F.useState(!1),[d,p]=F.useState("email"),[g,x]=F.useState(""),y="https://democratized-service-gateway-production.up.railway.app",w=async A=>{if(A.preventDefault(),!!r.trim()){i(!0),x("");try{const E=await fetch(`${y}/api/auth/user-status/${encodeURIComponent(r)}`),P=await E.json().catch(()=>({})),z=P&&typeof P=="object"&&!!P.user_id,D=(P&&P.detail?String(P.detail):"").toLowerCase().includes("not found");if(E.status===200&&z){if((P.role||"client")==="client"){x("This email is registered as a job seeker account. Please use a different email or login as a job seeker."),i(!1);return}p("login")}else E.status===404||D||!z?p("signup"):x(P.detail||"Unable to verify email. Please try again.")}catch(E){console.error("Email verification error:",E),x("Network error. Please try again.")}finally{i(!1)}}},j=()=>{p("email"),x("")};if(d==="login")return s.jsx(w9,{email:r,onLogin:e,onBack:j,isCoachMode:!0});if(d==="signup")return s.jsx(_9,{email:r,onLogin:e,onBack:j,isCoachMode:!0});const _=async()=>{const A="https://calendly.com/yuqil-ely/meet-yuqi";if(window.electronAPI?.openExternalUrl)try{const E=await window.electronAPI.openExternalUrl(A);E.success||(console.error("Failed to open Calendly URL:",E.error),window.open(A,"_blank","noopener,noreferrer"))}catch(E){console.error("Error opening external URL:",E),window.open(A,"_blank","noopener,noreferrer")}else window.open(A,"_blank","noopener,noreferrer")};return s.jsxs("div",{className:"auth-page light",children:[s.jsx("div",{className:"auth-center",children:s.jsxs(jt.div,{className:"auth-form-simple",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[s.jsxs("div",{className:"auth-logo",children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}}),s.jsx("h1",{className:"auth-brand",children:"JobHuntr Coach"})]}),s.jsx("div",{className:"auth-headline",children:s.jsx("h2",{className:"auth-title",children:"Access and guide your clients' job search journey"})}),s.jsxs("form",{onSubmit:w,className:"email-form",children:[s.jsx("label",{className:"email-label",children:"Email"}),s.jsxs("div",{className:"email-input-row",children:[s.jsxs("div",{className:"input-wrapper",children:[s.jsx($o,{className:"input-icon",size:20}),s.jsx("input",{type:"email",value:r,onChange:A=>n(A.target.value),placeholder:"coach@example.com",className:"auth-input-simple",required:!0})]}),s.jsx("button",{type:"submit",disabled:l||!r.trim(),className:"auth-button-simple",children:l?s.jsx("div",{className:"loading-spinner"}):s.jsxs(s.Fragment,{children:["Continue",s.jsx(Gs,{size:16})]})})]}),g&&s.jsxs(jt.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},style:{marginTop:"12px"},children:[s.jsx(Ki,{size:16}),g]})]}),s.jsx("div",{className:"auth-mode-toggle",children:s.jsx("button",{type:"button",onClick:t,className:"mode-toggle-button",children:" Back to job seeker login"})})]})}),s.jsxs(jt.div,{className:"demo-popup",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:[s.jsx("div",{className:"demo-content",children:s.jsxs("div",{className:"demo-text",children:[s.jsx("h3",{children:"Want a demo?"}),s.jsx("p",{children:"Schedule a call to learn about our coaching platform"})]})}),s.jsxs("button",{onClick:_,className:"demo-button",children:[s.jsx(xs,{size:16}),"Schedule a Call",s.jsx(Gs,{size:16})]})]})]})},Ete=({isCollapsed:e,onToggle:t,activeTab:r,onTabChange:n,onLogout:l,userEmail:i,onHoverChange:d})=>{const[p,g]=F.useState(!1),[x,y]=F.useState(!1),[w,j]=F.useState(!1),_={expanded:{width:280},collapsed:{width:64}},A={expanded:{opacity:1,display:"block"},collapsed:{opacity:0,display:"none"}},E=()=>{g(!p)},P=!e||x;return s.jsxs(jt.div,{className:`sidebar ${e&&!x?"collapsed":""}`,variants:_,animate:P?"expanded":"collapsed",transition:{duration:.15,ease:"easeOut"},onAnimationStart:()=>{P||j(!1)},onAnimationComplete:()=>{P&&j(!0)},onMouseEnter:()=>{y(!0),d?.(!0)},onMouseLeave:()=>{y(!1),e&&j(!1),d?.(!1)},children:[s.jsx("div",{className:"sidebar-header",children:s.jsx("div",{className:"sidebar-logo",children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"nowrap",whiteSpace:"nowrap",justifyContent:e&&!x?"center":"flex-start",width:"100%"},children:[s.jsx("img",{src:"./logo.png",alt:"Logo",style:{width:"32px",height:"32px",objectFit:"contain"}}),s.jsx(Wr,{mode:"wait",children:w&&s.jsx(jt.span,{className:"logo-text",variants:A,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"JobHuntr Coach"})})]})})}),s.jsx("nav",{className:"sidebar-nav",style:{alignItems:e&&!x?"center":"stretch"},children:s.jsxs("button",{className:`nav-item ${r==="clients"?"active":""}`,onClick:()=>n("clients"),title:"Clients",style:{justifyContent:e&&!x?"center":"flex-start",padding:e&&!x?"var(--spacing-xs)":"var(--spacing-sm) var(--spacing-md)",width:e&&!x?"36px":"100%",height:"36px",marginLeft:e&&!x?"auto":"0",marginRight:e&&!x?"auto":"0"},children:[s.jsx(Hs,{size:14}),s.jsx(Wr,{mode:"wait",children:w&&s.jsx(jt.span,{className:"nav-text",variants:A,animate:"expanded",exit:"collapsed",transition:{duration:0},children:"Clients"})})]})}),s.jsx("div",{className:"sidebar-user",children:s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:`user-button ${p?"active":""}`,onClick:E,title:"User Menu",children:[s.jsx("div",{className:"user-avatar",children:s.jsx(cc,{size:16})}),s.jsx(Wr,{mode:"wait",children:w&&s.jsxs(jt.div,{className:"user-info",variants:A,animate:"expanded",exit:"collapsed",transition:{duration:0},children:[s.jsx("span",{className:"user-name",children:"Coach"}),s.jsx("span",{className:"user-email",children:i||"coach@example.com"})]})})]}),s.jsx(Wr,{children:p&&w&&s.jsxs(jt.div,{className:"user-menu",initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:0},children:[s.jsxs("button",{className:"user-menu-item",onClick:()=>n("profile"),children:[s.jsx(Wp,{size:16}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{className:"user-menu-item",onClick:l,children:[s.jsx(PR,{size:16}),s.jsx("span",{children:"Sign Out"})]})]})})]})})]})},Ite=({children:e,activeTab:t,onTabChange:r,onLogout:n,userEmail:l})=>{const[i,d]=F.useState(!0),[p,g]=F.useState(!1),x=y=>{g(y)};return s.jsxs("div",{className:"dashboard-layout",children:[s.jsx(Ete,{isCollapsed:i,onToggle:()=>d(!i),activeTab:t,onTabChange:r,onLogout:n,userEmail:l,onHoverChange:x}),s.jsx(jt.main,{className:"dashboard-main",animate:{marginLeft:!i||p?280:64},transition:{duration:.15,ease:"easeOut"},children:e})]})},zte=({children:e,src:t,alt:r="",size:n="lg",className:l="",onError:i})=>{const g={...{sm:{width:"32px",height:"32px",fontSize:f.typography.fontSize.xs},md:{width:"48px",height:"48px",fontSize:f.typography.fontSize.sm},lg:{width:"64px",height:"64px",fontSize:f.typography.fontSize.xl},xl:{width:"80px",height:"80px",fontSize:f.typography.fontSize.h2}}[n],borderRadius:"50%",border:`2px solid ${f.colors.neutral[200]}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,overflow:"hidden"};return t?s.jsx("img",{src:t,alt:r,className:`avatar ${l}`,style:{...g,objectFit:"cover"},onError:i}):s.jsx("div",{className:`avatar ${l}`,style:{...g,backgroundColor:f.colors.primary.main,color:f.colors.primary.text,fontWeight:f.typography.fontWeight.semibold},children:e})},Bte=({client:e,stats:t,index:r,onSelect:n})=>{const l=g=>g.first_name||g.last_name?`${g.first_name||""} ${g.last_name||""}`.trim():g.email,i=g=>g.first_name&&g.last_name?`${g.first_name[0]}${g.last_name[0]}`.toUpperCase():g.email.substring(0,2).toUpperCase(),p=t||{total_applications:0,by_status:{}};return s.jsxs(jt.div,{className:"client-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},onClick:()=>n(e.user_id),style:{backgroundColor:f.colors.secondary.main,border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.xl,padding:f.spacing.xl,cursor:"pointer",transition:f.transitions.fast,boxShadow:f.shadows.sm,display:"flex",flexDirection:"column",gap:f.spacing.lg},whileHover:{y:-2,boxShadow:f.shadows.md},children:[s.jsx("div",{style:{display:"flex",justifyContent:"center"},children:s.jsx(zte,{size:"lg",children:i(e)})}),s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.lg,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:`0 0 ${f.spacing.xs} 0`},children:l(e)}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],margin:0},children:e.email})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700]},children:[s.jsx(IR,{size:16}),s.jsxs("span",{children:[p.total_applications," applications"]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.lg,fontSize:f.typography.fontSize.sm},children:[p.by_status.interview&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,color:f.colors.accent.success,fontWeight:f.typography.fontWeight.medium},children:[s.jsx(Xw,{size:16}),s.jsxs("span",{children:[p.by_status.interview," interviews"]})]}),p.by_status.offer&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,color:f.colors.accent.success,fontWeight:f.typography.fontWeight.medium},children:[s.jsx(Mi,{size:16}),s.jsxs("span",{children:[p.by_status.offer," offers"]})]}),p.by_status.rejected&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,color:f.colors.accent.error},children:[s.jsx(Ba,{size:16}),s.jsxs("span",{children:[p.by_status.rejected," rejected"]})]})]})]}),s.jsx("div",{style:{marginTop:"auto"},children:s.jsxs(ot,{variant:"secondary",onClick:()=>n(e.user_id),style:{width:"100%"},children:["View Dashboard",s.jsx(Gs,{size:16})]})})]})},O8=({onSelectClient:e})=>{const[t,r]=F.useState([]),[n,l]=F.useState({}),[i,d]=F.useState(!0),[p,g]=F.useState(""),[x,y]=F.useState(!1),[w,j]=F.useState(""),[_,A]=F.useState(!1),[E,P]=F.useState(""),z="https://democratized-service-gateway-production.up.railway.app",B=$=>{const re={total_applications:$.length,by_status:{}};return $.forEach(Q=>{const H=Q.status;let Y="";switch(H){case gt.INTERVIEWING:Y="interview";break;case gt.OFFER:Y="offer";break;case gt.REJECTED:Y="rejected";break;case gt.APPLIED:case gt.SUBMITTING:case gt.QUEUED:default:Y="pending";break}re.by_status[Y]=(re.by_status[Y]||0)+1}),re};F.useEffect(()=>{D()},[]);const D=async()=>{try{d(!0),g("");const $=await mr.getValidToken();if(!$)throw new Error("No authentication token");const re=await fetch(`${z}/api/coach/clients`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(!re.ok)throw new Error("Failed to load clients");const Q=await re.json();console.log("Clients API response:",Q);const H=Q.clients||[];r(H);const Y={};await Promise.all(H.map(async T=>{try{const o={clientId:T.user_id,clientEmail:T.email,clientName:`${T.first_name||""} ${T.last_name||""}`.trim()||T.email,coachEmail:"",coachMode:!0,studentToken:""},c=sessionStorage.getItem("coachViewingClient"),h=await fetch(`${z}/api/coach/client/${T.user_id}/student-token`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(h.ok){const v=await h.json();o.studentToken=v.student_token,sessionStorage.setItem("coachViewingClient",JSON.stringify(o));const b=await an.getApplicationHistory(),M=B(b);Y[T.user_id]=M,console.log(`Loaded ${b.length} applications for client ${T.email}`)}else console.warn(`Failed to get student token for client ${T.email}`),Y[T.user_id]={total_applications:0,by_status:{}};c?sessionStorage.setItem("coachViewingClient",c):sessionStorage.removeItem("coachViewingClient")}catch(o){console.error(`Error loading stats for client ${T.email}:`,o),Y[T.user_id]={total_applications:0,by_status:{}}}})),l(Y),console.log("Clients set:",H),console.log("Real stats loaded:",Y)}catch($){console.error("Error loading coach data:",$),g($ instanceof Error?$.message:"Failed to load data")}finally{d(!1)}},U=async()=>{if(!w.trim()){P("Please enter a student token");return}try{A(!0),P("");const $=await mr.getValidToken();if(!$)throw new Error("No authentication token");const re=await fetch(`${z}/api/auth/add-student`,{method:"POST",headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"},body:JSON.stringify({token:w.trim().toUpperCase()})}),Q=await re.json();if(!re.ok)throw new Error(Q.detail||"Failed to add student");y(!1),j(""),P(""),await D(),console.log("Student added successfully:",Q.student)}catch($){console.error("Error adding student:",$),P($ instanceof Error?$.message:"Failed to add student")}finally{A(!1)}},G=()=>{y(!1),j(""),P("")};return i?s.jsxs("div",{style:{minHeight:"100vh",backgroundColor:f.colors.neutral[50]},children:[s.jsx("div",{style:{backgroundColor:f.colors.secondary.main,borderBottom:`1px solid ${f.colors.neutral[200]}`,padding:`${f.spacing.xl} ${f.spacing["2xl"]}`,marginBottom:f.spacing.xl,boxShadow:f.shadows.sm},children:s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.lg},children:[s.jsx("div",{style:{width:"32px",height:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsxs("div",{children:[s.jsx("div",{style:{width:"180px",height:"32px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsx("div",{style:{width:"240px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}})]})]})})}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:f.spacing.xl,padding:f.spacing.xl},children:[...Array(6)].map(($,re)=>s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing.xl,boxShadow:f.shadows.sm,border:`1px solid ${f.colors.neutral[200]}`,display:"flex",flexDirection:"column",gap:f.spacing.lg},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",backgroundColor:f.colors.neutral[200],animation:"pulse 2s ease-in-out infinite"}}),s.jsxs("div",{children:[s.jsx("div",{style:{width:"120px",height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,marginBottom:f.spacing.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsx("div",{style:{width:"180px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.sm},children:[s.jsx("div",{style:{width:"140px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.lg},children:[s.jsx("div",{style:{width:"100px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsx("div",{style:{width:"80px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}}),s.jsx("div",{style:{width:"90px",height:"16px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.sm,animation:"pulse 2s ease-in-out infinite"}})]})]}),s.jsx("div",{style:{width:"100%",height:"40px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.md,marginTop:"auto",animation:"pulse 2s ease-in-out infinite"}})]},re))})]}):s.jsxs("div",{style:{minHeight:"100vh",backgroundColor:f.colors.neutral[50]},children:[s.jsx("div",{style:{backgroundColor:f.colors.secondary.main,borderBottom:`1px solid ${f.colors.neutral[200]}`,padding:`${f.spacing.xl} ${f.spacing["2xl"]}`,marginBottom:f.spacing.xl,boxShadow:f.shadows.sm},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.lg},children:[s.jsx(Hs,{size:32,color:f.colors.primary.main}),s.jsxs("div",{children:[s.jsx("h1",{style:{fontSize:f.typography.fontSize.h1,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"My Clients"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:0},children:"Monitor and guide your clients' job search progress"})]})]}),s.jsxs(ot,{variant:"primary",onClick:()=>y(!0),children:[s.jsx(qi,{size:16}),"Add Client"]})]})}),s.jsxs("div",{children:[p&&s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,border:`1px solid ${f.colors.accent.error}`,borderRadius:f.borderRadius.lg,padding:f.spacing.xl,textAlign:"center",margin:f.spacing.xl},children:[s.jsx("p",{style:{color:f.colors.accent.error,margin:`0 0 ${f.spacing.md} 0`},children:p}),s.jsx("button",{onClick:D,style:{padding:`${f.spacing.md} ${f.spacing.lg}`,backgroundColor:f.colors.accent.error,color:f.colors.secondary.main,border:"none",borderRadius:f.borderRadius.lg,cursor:"pointer"},children:"Retry"})]}),!p&&t.length===0&&s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],textAlign:"center",margin:f.spacing.xl},children:[s.jsx(Hs,{size:64,color:f.colors.neutral[400],style:{marginBottom:f.spacing.lg}}),s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:`0 0 ${f.spacing.md} 0`},children:"No Clients Yet"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:`0 0 ${f.spacing.sm} 0`},children:"You haven't added any clients to your coaching dashboard."}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],margin:0},children:"Contact your administrator to add clients to your account."})]}),!p&&t.length>0&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:f.spacing.xl,padding:f.spacing.xl},children:t.map(($,re)=>s.jsx(Bte,{client:$,stats:n[$.user_id],index:re,onSelect:e},$.user_id))})]}),x&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:s.jsxs(jt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],boxShadow:f.shadows.lg,border:`1px solid ${f.colors.neutral[200]}`,maxWidth:"400px",width:"90%"},children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:`0 0 ${f.spacing.lg} 0`},children:"Add Client"}),s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:`0 0 ${f.spacing.md} 0`},children:"Enter the student token provided by your client to add them to your coaching dashboard."}),s.jsxs("div",{style:{backgroundColor:f.colors.neutral[100],borderRadius:f.borderRadius.md,padding:f.spacing.md,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,margin:0},children:[s.jsx(NR,{size:16,color:f.colors.neutral[700]}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700],margin:0,fontWeight:f.typography.fontWeight.medium},children:"Tell your client to find their token:"})]}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[600],margin:`${f.spacing.xs} 0 0 0`,fontFamily:"monospace"},children:"Dashboard  User Settings  Student Token"})]}),s.jsx("div",{style:{backgroundColor:f.colors.accent.warning+"10",borderRadius:f.borderRadius.md,padding:f.spacing.md,border:`1px solid ${f.colors.accent.warning}`,marginTop:f.spacing.md},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,margin:0},children:[s.jsx(Ta,{size:16,color:f.colors.accent.warning}),s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.accent.warning,margin:0,fontWeight:f.typography.fontWeight.medium},children:"Remind your client: Only share this token with trusted coaches"})]})})]}),s.jsxs("div",{style:{marginBottom:f.spacing.lg},children:[s.jsx("label",{style:{display:"block",fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],marginBottom:f.spacing.sm},children:"Student Token"}),s.jsx("input",{type:"text",value:w,onChange:$=>j($.target.value.toUpperCase()),placeholder:"Enter 8-character token (e.g., ABC123XY)",maxLength:8,style:{width:"100%",padding:f.spacing.md,border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.md,fontSize:f.typography.fontSize.base,fontFamily:"monospace",letterSpacing:"2px",textAlign:"center",textTransform:"uppercase",outline:"none",transition:f.transitions.normal},onFocus:$=>{$.target.style.borderColor=f.colors.primary.main,$.target.style.boxShadow=`0 0 0 3px ${f.colors.primary.main}20`},onBlur:$=>{$.target.style.borderColor=f.colors.neutral[300],$.target.style.boxShadow="none"}})]}),E&&s.jsx("div",{style:{backgroundColor:f.colors.accent.error+"10",border:`1px solid ${f.colors.accent.error}`,borderRadius:f.borderRadius.md,padding:f.spacing.md,marginBottom:f.spacing.lg},children:s.jsx("p",{style:{color:f.colors.accent.error,fontSize:f.typography.fontSize.sm,margin:0},children:E})}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.md,justifyContent:"flex-end"},children:[s.jsx(ot,{variant:"secondary",onClick:G,disabled:_,children:"Cancel"}),s.jsx(ot,{variant:"primary",onClick:U,disabled:_||!w.trim(),children:_?"Adding...":"Add Client"})]})]})})]})},Pte=({userEmail:e})=>{const t={name:"Coach",email:e||"coach@example.com",joinedDate:"2024-01-15",totalClients:6,activeClients:5};return s.jsxs("div",{style:{minHeight:"100vh",backgroundColor:f.colors.neutral[50]},children:[s.jsx("div",{style:{backgroundColor:f.colors.secondary.main,borderBottom:`1px solid ${f.colors.neutral[200]}`,padding:`${f.spacing.xl} ${f.spacing["2xl"]}`,marginBottom:f.spacing.xl,boxShadow:f.shadows.sm},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.lg},children:[s.jsx(cc,{size:32,color:f.colors.primary.main}),s.jsxs("div",{children:[s.jsx("h1",{style:{fontSize:f.typography.fontSize.h1,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0},children:"Coach Profile"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:0},children:"Manage your coaching account settings"})]})]})}),s.jsx("div",{style:{padding:f.spacing.xl},children:s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,padding:f.spacing["2xl"],boxShadow:f.shadows.sm,border:`1px solid ${f.colors.neutral[200]}`,maxWidth:"600px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.lg,marginBottom:f.spacing["2xl"],paddingBottom:f.spacing.xl,borderBottom:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:f.colors.primary.main,color:f.colors.primary.text,display:"flex",alignItems:"center",justifyContent:"center",fontSize:f.typography.fontSize.h2,fontWeight:f.typography.fontWeight.semibold,border:`2px solid ${f.colors.neutral[200]}`},children:t.name.substring(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0,marginBottom:f.spacing.sm},children:t.name}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[600],margin:0},children:"Career Coach"})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:f.spacing.lg},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx($o,{size:20,color:f.colors.neutral[500]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],margin:0,marginBottom:"2px"},children:"Email"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[900],margin:0},children:t.email})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx(xs,{size:20,color:f.colors.neutral[500]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],margin:0,marginBottom:"2px"},children:"Joined"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[900],margin:0},children:new Date(t.joinedDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.md},children:[s.jsx(Hs,{size:20,color:f.colors.neutral[500]}),s.jsxs("div",{children:[s.jsx("p",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],margin:0,marginBottom:"2px"},children:"Clients"}),s.jsxs("p",{style:{fontSize:f.typography.fontSize.base,color:f.colors.neutral[900],margin:0},children:[t.activeClients," active  ",t.totalClients," total"]})]})]})]})]})})]})},Nte=({onSelectClient:e,onLogout:t,userEmail:r})=>{const[n,l]=F.useState("clients"),i=()=>{switch(n){case"clients":return s.jsx(O8,{onSelectClient:e});case"profile":return s.jsx(Pte,{userEmail:r});default:return s.jsx(O8,{onSelectClient:e})}};return s.jsx(Ite,{activeTab:n,onTabChange:l,onLogout:t,userEmail:r,children:i()})};class Dte extends F.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleGoBack=()=>{window.history.back()},this.handleReload=()=>{window.location.reload()}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){Pl(t)||console.error("Uncaught error:",t,r)}render(){return this.state.hasError?this.state.error&&Pl(this.state.error)?null:s.jsx("div",{style:{minHeight:"100vh",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",padding:f.spacing.xl},children:s.jsxs("div",{style:{maxWidth:"600px",width:"100%",textAlign:"center"},children:[s.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",borderRadius:"50%",backgroundColor:f.colors.accent.error+"10",marginBottom:f.spacing.lg},children:s.jsx(Ki,{size:40,color:f.colors.accent.error})}),s.jsx("h2",{style:{fontSize:f.typography.fontSize.h1,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],marginBottom:f.spacing.md,fontFamily:f.typography.fontFamily},children:"Something went wrong"}),s.jsx("p",{style:{fontSize:f.typography.fontSize.md,color:f.colors.neutral[600],marginBottom:f.spacing.xl,lineHeight:"1.6",fontFamily:f.typography.fontFamily},children:"We encountered an unexpected error. Please try going back or refreshing the page."}),this.state.error&&s.jsxs("details",{style:{marginBottom:f.spacing.xl,padding:f.spacing.md,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.neutral[200]}`,textAlign:"left",cursor:"pointer"},children:[s.jsx("summary",{style:{fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[700],marginBottom:f.spacing.sm,fontFamily:f.typography.fontFamily},children:"Error Details"}),s.jsx("pre",{style:{fontSize:f.typography.fontSize.xs,color:f.colors.neutral[600],whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0,fontFamily:"monospace"},children:this.state.error.toString()})]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,justifyContent:"center"},children:[s.jsxs(ot,{variant:"secondary",onClick:this.handleGoBack,style:{display:"inline-flex",alignItems:"center",gap:f.spacing.xs},children:[s.jsx(Od,{size:16}),"Go Back"]}),s.jsx(ot,{variant:"primary",onClick:this.handleReload,style:{display:"inline-flex",alignItems:"center",gap:f.spacing.xs},children:"Reload Page"})]})]})}):this.props.children}}const Lte=()=>s.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#ffffff",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,fontFamily:"system-ui, -apple-system, sans-serif"},children:[s.jsxs(jt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},style:{marginBottom:"40px",textAlign:"center"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",marginBottom:"8px"},children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr Logo",style:{width:"48px",height:"48px",objectFit:"contain"}}),s.jsx(u_,{style:{fontWeight:"700",color:"#1e293b",letterSpacing:"-0.5px"},children:"JobHuntr"})]}),s.jsx(Ct,{style:{color:"#64748b",fontWeight:"500"},children:"AI-Powered Job Application Assistant"})]}),s.jsxs(jt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.4},style:{position:"relative",width:"80px",height:"80px",marginBottom:"32px"},children:[s.jsx(jt.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},style:{position:"absolute",width:"80px",height:"80px",border:"3px solid #f1f5f9",borderTop:"3px solid #3b82f6",borderRadius:"50%"}}),s.jsx(jt.div,{animate:{rotate:-360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{position:"absolute",width:"60px",height:"60px",top:"10px",left:"10px",border:"2px solid #f8fafc",borderTop:"2px solid #60a5fa",borderRadius:"50%"}}),s.jsx(jt.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",width:"20px",height:"20px",top:"30px",left:"30px",backgroundColor:"#3b82f6",borderRadius:"50%"}})]}),s.jsx(jt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.4},style:{fontSize:f.typography.fontSize.xl,color:"#64748b",fontWeight:"500",marginBottom:"8px"},children:"Initializing Application..."}),s.jsx(jt.div,{style:{display:"flex",gap:"4px",marginTop:"8px"},children:[0,1,2].map(e=>s.jsx(jt.div,{animate:{opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0,delay:e*.2,ease:"easeInOut"},style:{width:"6px",height:"6px",backgroundColor:"#94a3b8",borderRadius:"50%"}},e))})]}),F8=e=>{let t;const r=new Set,n=(x,y)=>{const w=typeof x=="function"?x(t):x;if(!Object.is(w,t)){const j=t;t=y??(typeof w!="object"||w===null)?w:Object.assign({},t,w),r.forEach(_=>_(t,j))}},l=()=>t,p={setState:n,getState:l,getInitialState:()=>g,subscribe:x=>(r.add(x),()=>r.delete(x))},g=t=e(n,l,p);return p},Ote=(e=>e?F8(e):F8),Fte=e=>e;function Ute(e,t=Fte){const r=Vt.useSyncExternalStore(e.subscribe,Vt.useCallback(()=>t(e.getState()),[e,t]),Vt.useCallback(()=>t(e.getInitialState()),[e,t]));return Vt.useDebugValue(r),r}const $te=e=>{const t=Ote(e),r=n=>Ute(t,n);return Object.assign(r,t),r},qte=(e=>$te),Hte=e=>(t,r,n)=>{const l=n.subscribe;return n.subscribe=((d,p,g)=>{let x=d;if(p){const y=g?.equalityFn||Object.is;let w=d(n.getState());x=j=>{const _=d(j);if(!y(w,_)){const A=w;p(w=_,A)}},g?.fireImmediately&&p(w,w)}return l(x)}),e(t,r,n)},Wte=Hte,U8=qte()(Wte((e,t)=>({botBrowser:{status:"ready",version:"v132-20250117",downloadProgress:100},chromeContext:{imported:!1,profiles:[],selectedProfile:null},tasks:{},settings:{llm:{provider:"openai",model:"gpt-4.1",apiKey:""},botBrowser:{timeout:3e5,profile:null}},worker:{status:"disconnected",queueSize:0},updateActivity:(r,n)=>e(l=>({tasks:{...l.tasks,[r]:{...l.tasks[r],...n}}})),addTask:r=>e(n=>({tasks:{...n.tasks,[r.id]:r}})),removeTask:r=>e(n=>{const{[r]:l,...i}=n.tasks;return{tasks:i}}),updateBotBrowserStatus:r=>e(n=>({botBrowser:{...n.botBrowser,...r}})),updateChromeContext:r=>e(n=>({chromeContext:{...n.chromeContext,...r}})),updateSettings:r=>e(n=>({settings:{...n.settings,...r}})),updateWorkerStatus:r=>e(n=>({worker:{...n.worker,...r}})),submitTask:async r=>{const n={id:r.id,prompt:r.task,status:"queued",progress:0,startTime:Date.now()};if(t().addTask(n),window.electronAPI)try{return await window.electronAPI.executeTask(r)}catch(l){throw console.error("Task submission failed:",l),t().updateActivity(r.id,{status:"error",error:l instanceof Error?l.message:"Unknown error"}),l}else throw new Error("electronAPI not available")},pauseTask:async r=>{window.electronAPI&&(await window.electronAPI.pauseTask(r),t().updateActivity(r,{status:"paused"}))},resumeTask:async r=>{window.electronAPI&&(await window.electronAPI.resumeTask(r),t().updateActivity(r,{status:"running"}))},stopTask:async r=>{window.electronAPI&&(await window.electronAPI.cancelTask(r),t().updateActivity(r,{status:"cancelled",endTime:Date.now()}))},getActiveTask:()=>{const r=t().tasks;return Object.values(r).find(n=>n.status==="running"||n.status==="paused")||null},getTaskById:r=>t().tasks[r]||null,isTaskRunning:()=>{const r=t().tasks;return Object.values(r).some(n=>n.status==="running")}}))),Vte=({isOpen:e,onClose:t,title:r,message:n,icon:l="warning"})=>{if(!e)return null;const i=()=>{switch(l){case"network":return s.jsx(wq,{size:48,style:{color:"#2563eb"}});case"error":return s.jsx(cn,{size:48,style:{color:"#dc2626"}});default:return s.jsx(Ta,{size:48,style:{color:"#f59e0b"}})}};return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",maxWidth:"400px",width:"100%",margin:"0 16px"},children:[s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",borderBottom:"1px solid #e5e7eb"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(),s.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"16px"},children:[s.jsx(Ta,{size:16,style:{color:"#f59e0b",marginRight:"8px"}}),s.jsx("h2",{style:{fontSize:f.typography.fontSize.h2,fontWeight:"bold",color:"#1f2937",margin:0},children:r})]})]})}),s.jsx("div",{style:{padding:"24px"},children:s.jsx("p",{style:{color:"#374151",textAlign:"center",lineHeight:"1.6",margin:0},children:n})}),s.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"24px",borderTop:"1px solid #e5e7eb"},children:s.jsx("button",{onClick:t,style:{backgroundColor:"#3b82f6",color:"white",fontWeight:"500",padding:"8px 24px",borderRadius:"8px",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:d=>{d.currentTarget.style.backgroundColor="#2563eb"},onMouseOut:d=>{d.currentTarget.style.backgroundColor="#3b82f6"},children:"OK"})})]})})},Gte=({isOpen:e,onClose:t,studentName:r="your client",attemptedAction:n="modify data"})=>{if(!e)return null;const l={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},i={backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.lg,padding:f.spacing["2xl"],maxWidth:"480px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:f.shadows.lg,position:"relative"},d={display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.xl},p={width:"48px",height:"48px",borderRadius:f.borderRadius.full,backgroundColor:"#fef3c7",display:"flex",alignItems:"center",justifyContent:"center"},g={...f.typography.presets.heading4,color:f.colors.primary.main,margin:0},x={position:"absolute",top:f.spacing.lg,right:f.spacing.lg,background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,color:f.colors.icon.secondary,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},y={...f.typography.presets.bodySmall,color:f.colors.neutral[600],marginBottom:f.spacing["2xl"]},w={backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,padding:f.spacing.lg,marginBottom:f.spacing["2xl"]},j={display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.sm,...f.typography.presets.caption,color:f.colors.neutral[700]},_={backgroundColor:f.colors.primary.main,color:f.colors.primary.text,border:"none",borderRadius:f.borderRadius.lg,padding:`${f.spacing.md} ${f.spacing["2xl"]}`,...f.typography.presets.button,cursor:"pointer",width:"100%",transition:f.transitions.normal};return s.jsx(Wr,{children:s.jsx(jt.div,{style:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:s.jsxs(jt.div,{style:i,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},onClick:A=>A.stopPropagation(),children:[s.jsx("button",{style:x,onClick:t,onMouseEnter:A=>{A.currentTarget.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20})}),s.jsxs("div",{style:d,children:[s.jsx("div",{style:p,children:s.jsx(fp,{size:24,color:f.colors.accent.warning})}),s.jsx("h2",{style:g,children:"Read-Only Access"})]}),s.jsxs("div",{style:y,children:[s.jsx("p",{style:{margin:`0 0 ${f.spacing.lg} 0`},children:s.jsxs("strong",{children:["Please don't modify ",r,"'s portal on their behalf."]})}),s.jsxs("p",{style:{margin:`0 0 ${f.spacing.lg} 0`},children:["You're currently viewing ",r,"'s account in read-only mode. This ensures their data remains secure and unchanged."]})]}),s.jsxs("div",{style:w,children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.md,...f.typography.presets.bodySmall,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[600]},children:[s.jsx(os,{size:16,color:f.colors.accent.success}),"What you can do:"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.success,marginRight:f.spacing.xs},children:""}),"View all their data and progress"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.success,marginRight:f.spacing.xs},children:""}),"Review their resumes and applications"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.success,marginRight:f.spacing.xs},children:""}),"Check their agent runs and results"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginTop:f.spacing.md,marginBottom:f.spacing.sm,...f.typography.presets.bodySmall,fontWeight:f.typography.fontWeight.medium,color:f.colors.neutral[600]},children:[s.jsx(fp,{size:16,color:f.colors.accent.error}),"What's protected:"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.error,marginRight:f.spacing.xs},children:""}),"Creating or editing their content"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.error,marginRight:f.spacing.xs},children:""}),"Running workflows on their behalf"]}),s.jsxs("div",{style:j,children:[s.jsx("span",{style:{color:f.colors.accent.error,marginRight:f.spacing.xs},children:""}),"Modifying their settings or profile"]})]}),s.jsx("button",{style:_,onClick:t,onMouseEnter:A=>{A.currentTarget.style.backgroundColor=f.colors.primary.hover},onMouseLeave:A=>{A.currentTarget.style.backgroundColor=f.colors.primary.main},children:"I Understand"})]})})})},Kte=({isOpen:e,onClose:t,dailyLimit:r,dailyUsed:n,dailyRemaining:l,nextReset:i})=>{if(!e)return null;const d={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},p={backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.lg,padding:f.spacing["2xl"],maxWidth:"520px",width:"90%",maxHeight:"90vh",overflow:"auto",boxShadow:f.shadows.lg,position:"relative"},g={display:"flex",alignItems:"center",gap:f.spacing.md,marginBottom:f.spacing.xl},x={width:"48px",height:"48px",borderRadius:f.borderRadius.full,backgroundColor:f.colors.neutral[100],display:"flex",alignItems:"center",justifyContent:"center"},y={...f.typography.presets.heading4,color:f.colors.primary.main,margin:0},w={position:"absolute",top:f.spacing.lg,right:f.spacing.lg,background:"none",border:"none",cursor:"pointer",padding:f.spacing.sm,borderRadius:f.borderRadius.md,color:f.colors.icon.secondary,display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.fast},j=s.jsx(Wr,{children:s.jsx(jt.div,{style:d,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:s.jsxs(jt.div,{style:p,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},onClick:_=>_.stopPropagation(),children:[s.jsx("button",{style:w,onClick:t,onMouseEnter:_=>{_.currentTarget.style.backgroundColor=f.colors.neutral[100]},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="transparent"},children:s.jsx(cn,{size:20})}),s.jsxs("div",{style:g,children:[s.jsx("div",{style:x,children:s.jsx(F$,{size:24,color:f.colors.neutral[600]})}),s.jsx("h2",{style:y,children:"Daily Limit Reached"})]}),s.jsx("p",{style:{...f.typography.presets.body,color:f.colors.neutral[700],marginBottom:f.spacing.xl},children:"You have reached your daily application limit. This limit helps prevent bot detection on LinkedIn and ensures your account stays safe."}),s.jsxs("p",{style:{...f.typography.presets.bodyLarge,color:f.colors.neutral[900],fontWeight:f.typography.fontWeight.semibold,marginBottom:f.spacing.sm},children:["Today's Applications:"," ",n!==void 0&&n!==0?n:r!==void 0&&r!==0?r:40," ","/ ",r!==void 0&&r!==0?r:40]}),s.jsx("p",{style:{...f.typography.presets.caption,color:f.colors.neutral[600],marginBottom:f.spacing.md},children:l!==void 0&&l>0?`${l} applications remaining today`:"No applications remaining today"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.xl},children:[s.jsx(Wi,{size:16,color:f.colors.neutral[600]}),s.jsxs("span",{style:{...f.typography.presets.bodySmall,color:f.colors.neutral[600]},children:["Resets at"," ",i?new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):"8am UTC"]})]}),s.jsx("div",{style:{padding:f.spacing.lg,backgroundColor:f.colors.neutral[50],borderRadius:f.borderRadius.lg,marginBottom:f.spacing.xl,border:`1px solid ${f.colors.neutral[200]}`},children:s.jsxs("p",{style:{...f.typography.presets.bodySmall,color:f.colors.neutral[600],margin:0},children:[s.jsx("strong",{style:{color:f.colors.neutral[700]},children:"Why this limit exists:"})," ","LinkedIn monitors application patterns to detect automated behavior. This daily limit helps your account appear more natural and reduces the risk of detection or restrictions."]})}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:f.spacing.md},children:s.jsx(ot,{onClick:t,variant:"primary",children:"Got It"})})]})})});return RR.createPortal(j,document.body)},Yte={workflowOrder:[],blockedTemplateIds:[],autoGenerateATSResume:!1,resumeId:void 0,atsTemplateId:void 0,useAtsOptimized:!1,semanticInstructions:"",autonomousStartingUrl:"",maxJobsPerPlatform:10,headlessOn:!1,perPlatformLogin:{}},Jte=({isOpen:e,onQuitAnyway:t,onRunInvisibleAndClose:r,onCancel:n})=>{const[l,i]=F.useState(Yte),[d,p]=F.useState([]),[g,x]=F.useState(!0),[y,w]=F.useState(!1);if(F.useEffect(()=>{if(!e)return;(async()=>{x(!0);try{const[P,z,B]=await Promise.all([Hr.getRun(),lc.listTemplates(),Hr.getMetadata()]);i(Jd(P)),p(z),w(B.is_running)}catch(P){console.error("Failed to fetch infinite hunt config:",P)}finally{x(!1)}})()},[e]),!e)return null;const j=E=>{const P=d.find(B=>B.id===E);return P?P.name.split("-").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" "):{"linkedin-search":"LinkedIn Search","linkedin-apply":"LinkedIn Apply","indeed-search":"Indeed Search","ziprecruiter-search":"ZipRecruiter Search","glassdoor-search":"Glassdoor Search","dice-search":"Dice Search","autonomous-auto-search":"Autonomous Search"}[E]||E},_=l.workflowOrder.filter(E=>!l.blockedTemplateIds.includes(E)).map(E=>j(E)),A=_.length>0;return s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:n,children:s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"520px",boxShadow:"0 20px 60px rgba(15, 23, 42, 0.25)",display:"flex",flexDirection:"column",gap:"20px"},onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"72px",height:"72px",objectFit:"contain"}}),s.jsx("h2",{style:{fontSize:f.typography.fontSize.xl,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[900],margin:0,textAlign:"center"},children:"Before you go..."})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[s.jsx("p",{style:{color:f.colors.neutral[600],lineHeight:f.typography.lineHeight.relaxed,margin:0,fontSize:f.typography.fontSize.base,textAlign:"center"},children:y?"Infinite Hunt is already running! You can hide this window and let it continue running in the background.":"Instead of quitting, would you like to run Infinite Hunt with an invisible browser to get the newest available jobs?"}),s.jsx("p",{style:{color:f.colors.neutral[500],margin:0,fontSize:f.typography.fontSize.sm,textAlign:"center",fontStyle:"italic"},children:"We recommend running this 24/7 non-stop for best results."}),s.jsxs("div",{style:{backgroundColor:f.colors.neutral[50],borderRadius:"12px",padding:"16px",border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("h3",{style:{fontSize:f.typography.fontSize.sm,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[700],margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Infinite Hunt Settings"}),g?s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",color:f.colors.neutral[500]},children:"Loading settings..."}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],minWidth:"100px"},children:"Agents:"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[800],flex:1},children:_.length>0?_.join(", "):"None selected"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],minWidth:"100px"},children:"AI Resume:"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:l.autoGenerateATSResume?f.colors.accent.success:f.colors.neutral[500]},children:l.autoGenerateATSResume?"Enabled":"Disabled"})]}),y&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],minWidth:"100px"},children:"Status:"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.accent.success,fontWeight:f.typography.fontWeight.semibold},children:" Currently Running"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],minWidth:"100px"},children:"Invisible Mode:"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:l.headlessOn||y?f.colors.accent.success:f.colors.neutral[500]},children:y?"Running":l.headlessOn?"Currently On":"Will be enabled"})]}),l.semanticInstructions&&s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px"},children:[s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],minWidth:"100px"},children:"Instructions:"}),s.jsx("span",{style:{fontSize:f.typography.fontSize.sm,color:f.colors.neutral[800],flex:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"280px"},title:l.semanticInstructions,children:l.semanticInstructions})]})]})]}),!g&&!A&&!y&&s.jsx("p",{style:{color:f.colors.accent.warning,margin:0,fontSize:f.typography.fontSize.sm,textAlign:"center"},children:"No agents selected. Please configure Infinite Hunt before running."})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"8px"},children:[s.jsx(ot,{variant:"primary",onClick:r,disabled:!A&&!y||g,style:{width:"100%",padding:"14px 20px",fontSize:f.typography.fontSize.base},children:y?"Hide Window":"Run In Headless Mode & Hide Window"}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:s.jsx("button",{onClick:t,style:{background:"none",border:"none",padding:"4px 0",fontSize:f.typography.fontSize.xs,color:f.colors.neutral[400],cursor:"pointer",textDecoration:"underline"},children:"Quit Anyway"})})]})]})})},Zte=({onUpdateNow:e})=>{const[t,r]=F.useState("idle"),[n,l]=F.useState(null),[i,d]=F.useState(null),[p,g]=F.useState(""),[x,y]=F.useState(!1);F.useEffect(()=>{if(window.electronAPI)return window.electronAPI.onUpdateChecking(()=>{r("checking"),y(!1)}),window.electronAPI.onUpdateAvailable(B=>{r("available"),l(B),y(!0)}),window.electronAPI.onUpdateNotAvailable(()=>{r("idle"),y(!1)}),window.electronAPI.onUpdateDownloadProgress(B=>{r("downloading"),d(B),y(!0)}),window.electronAPI.onUpdateDownloaded(B=>{r("downloaded"),l(B),d(null),y(!0)}),window.electronAPI.onUpdateError(B=>{r("error"),g(B.message),y(!0),setTimeout(()=>{y(!1),r("idle")},1e4)}),()=>{}},[]);const w=()=>{e&&n&&(y(!1),e(n.version))},j=()=>{window.electronAPI&&window.electronAPI.installUpdate()},_=()=>{y(!1)},A=async()=>{if(window.electronAPI){r("checking");const B=await window.electronAPI.checkForUpdates();B.success||(r("error"),g(B.error||"Failed to check for updates"),y(!0))}};if(!x)return null;const E=()=>{switch(t){case"available":case"downloading":return f.colors.accent.info;case"downloaded":return f.colors.accent.success;case"error":return f.colors.accent.error;default:return f.colors.accent.info}},P=B=>{if(B===0)return"0 Bytes";const D=1024,U=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(B)/Math.log(D));return Math.round(B/Math.pow(D,G)*100)/100+" "+U[G]},z=B=>`${P(B)}/s`;return s.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:E(),color:"white",padding:"16px 24px",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:1e4,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",animation:"slideDown 0.3s ease-out"},children:[s.jsxs("div",{style:{flex:1,marginRight:"16px"},children:[t==="checking"&&s.jsx("div",{children:s.jsx("strong",{children:"Checking for updates..."})}),t==="available"&&n&&s.jsxs("div",{children:[s.jsxs("strong",{children:["Update Available: v",n.version]}),s.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",opacity:.9},children:'A new version is available. Click "Update Now" to download and install.'})]}),t==="downloading"&&i&&s.jsxs("div",{children:[s.jsxs("strong",{children:["Downloading Update... ",i.percent,"%"]}),s.jsx("div",{style:{marginTop:"8px",width:"100%",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px",overflow:"hidden"},children:s.jsx("div",{style:{width:`${i.percent}%`,height:"100%",backgroundColor:"white",transition:"width 0.3s ease"}})}),s.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.9},children:[P(i.transferred)," / ",P(i.total),"  ",z(i.bytesPerSecond)]})]}),t==="downloaded"&&n&&s.jsxs("div",{children:[s.jsxs("strong",{children:["Update Ready: v",n.version]}),s.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",opacity:.9},children:"The update has been downloaded. Restart to install the new version."})]}),t==="error"&&s.jsxs("div",{children:[s.jsx("strong",{children:"Update Error"}),s.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",opacity:.9},children:p||"An error occurred while checking for updates."})]})]}),s.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t==="available"&&e&&s.jsx(ot,{onClick:w,variant:"secondary",style:{backgroundColor:"white",color:E(),border:"none",padding:"8px 16px",fontSize:"14px",fontWeight:600},children:"Update Now"}),t==="downloaded"&&s.jsx(ot,{onClick:j,variant:"primary",style:{backgroundColor:"white",color:E(),border:"none",padding:"8px 16px",fontSize:"14px",fontWeight:600},children:"Restart & Install"}),t==="error"&&s.jsx(ot,{onClick:A,variant:"secondary",style:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",border:"1px solid white",padding:"8px 16px",fontSize:"14px"},children:"Retry"}),(t==="available"||t==="error")&&s.jsx("button",{onClick:_,style:{backgroundColor:"transparent",border:"none",color:"white",cursor:"pointer",padding:"8px",fontSize:"18px",lineHeight:1,opacity:.8},onMouseEnter:B=>B.currentTarget.style.opacity="1",onMouseLeave:B=>B.currentTarget.style.opacity="0.8",children:""})]}),s.jsx("style",{children:`
        @keyframes slideDown {
          from {
            transform: translateY(-100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})},Xte=({isOpen:e,version:t,onComplete:r,onCancel:n})=>{const[l,i]=F.useState({status:"pending",progress:0,message:"Preparing to download update..."}),d=F.useCallback(async()=>{try{if(!window.electronAPI)throw new Error("Update requires the desktop app");i({status:"downloading",progress:0,message:"Connecting to update server..."}),window.electronAPI.onUpdateDownloadProgress(j=>{const _=Math.round(j.percent);i({status:"downloading",progress:Math.min(_,95),message:`Downloading update... ${p(j.transferred)} / ${p(j.total)}`})});const w=await window.electronAPI.downloadUpdate();if(!w.success)throw new Error(w.error||"Failed to start download");i({status:"ready",progress:100,message:"Update downloaded successfully!",dmgPath:w.filePath})}catch(w){console.error("Update error:",w);let j="Failed to download update. Please try again.";const _=w instanceof Error?w.message:"Unknown error";_?.includes("network")||_?.includes("ENOTFOUND")||_?.includes("ETIMEDOUT")?j="Network error. Please check your internet connection.":_?.includes("404")?j="Update not found. Please check again later.":_?.includes("DMG file not found")&&(j="Update installer not available. Please try again later."),i({status:"error",progress:0,message:j,error:_})}},[]);F.useEffect(()=>{e&&d()},[e,d]);const p=w=>{if(w===0)return"0 Bytes";const j=1024,_=["Bytes","KB","MB","GB"],A=Math.floor(Math.log(w)/Math.log(j));return Math.round(w/Math.pow(j,A)*100)/100+" "+_[A]},g=F.useCallback(()=>{d()},[d]),x=()=>{n&&l.status==="error"&&n()},y=async()=>{try{if(!l.dmgPath)throw new Error("DMG path not found");const w=await window.electronAPI.openDmg(l.dmgPath);if(!w.success)throw new Error(w.error||"Failed to open installer");setTimeout(async()=>{await window.electronAPI.quitApp()},1e3)}catch(w){console.error("Error opening installer:",w),i({status:"error",progress:0,message:"Failed to open installer. Please try manually from Downloads folder.",error:w instanceof Error?w.message:"Unknown error"})}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{width:"100vw",height:"100vh"},children:s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-2xl py-10",style:{width:"700px",maxWidth:"95vw"},children:[s.jsx("div",{className:"text-center",style:{marginBottom:"20px",marginLeft:"auto",marginRight:"auto",width:"600px",maxWidth:"90%"},children:s.jsx("h1",{className:"text-3xl font-bold",style:{color:f.colors.neutral[800]},children:l.status==="error"?"Update Failed":l.status==="ready"?"Update Ready":"Downloading Update"})}),l.status!=="error"&&s.jsx("div",{style:{marginBottom:"10px",marginLeft:"auto",marginRight:"auto",width:"750px",maxWidth:"95%"},children:s.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[300]}`,position:"relative",overflow:"hidden"},children:s.jsx(jt.div,{style:{position:"absolute",top:0,left:0,height:"100%",width:`${l.progress}%`,background:`linear-gradient(90deg, ${f.colors.accent.info}, ${f.colors.accent.info}dd)`,boxShadow:`0 0 10px ${f.colors.accent.info}66`},initial:{width:0},animate:{width:`${l.progress}%`},transition:{width:{duration:.5}}})})}),s.jsx("div",{className:"text-center",style:{marginLeft:"auto",marginRight:"auto",width:"600px",maxWidth:"90%"},children:s.jsx("p",{className:"text-sm italic",style:{color:f.colors.neutral[600]},children:l.message})}),l.status==="ready"&&s.jsx("div",{className:"flex justify-center",style:{marginTop:"24px"},children:s.jsx(ot,{variant:"primary",size:"lg",onClick:y,children:"Open Installer & Quit App"})}),l.status==="error"&&s.jsxs("div",{className:"flex justify-center",style:{marginTop:"16px",gap:"16px"},children:[s.jsx(ot,{variant:"primary",size:"md",onClick:g,children:"Retry"}),n&&s.jsx(ot,{variant:"secondary",size:"md",onClick:x,children:"Cancel"})]})]})}):null},Qte=({version:e,onComplete:t,onCancel:r})=>s.jsx("div",{className:"auth-page light",children:s.jsx(Xte,{isOpen:!0,version:e,onComplete:t,onCancel:r})}),$8="https://www.google.com/chrome/",ere=({isOpen:e,onComplete:t,onSkip:r,userEmail:n})=>{const[l,i]=F.useState({backend:{status:"waiting",message:"Initializing..."},browser:{status:"pending",progress:0,message:"Waiting for backend..."},profile:{status:"pending",progress:0,message:"Waiting for Chrome check..."}}),[d,p]=F.useState(0),[g,x]=F.useState(!1),[y,w]=F.useState(!1),j=F.useCallback(()=>{window.electronAPI?.openExternalUrl?window.electronAPI.openExternalUrl($8):window.open($8,"_blank")},[]),_=["Your dream job is waiting for you...","Automating your job search journey...","Making job hunting effortless...","Connecting you with opportunities...","Your next career move starts here...","Streamlining your path to success..."],A=F.useCallback(async()=>{if(!y)try{if(i({backend:{status:"waiting",message:"Starting backend..."},browser:{status:"pending",progress:0,message:"Waiting for backend..."},profile:{status:"pending",progress:0,message:"Waiting for Chrome check..."}}),await new Promise(Q=>setTimeout(Q,500)),!(window.electronAPI!==void 0))throw console.error("Electron API not available"),new Error("Browser setup requires the desktop app");const P=window.electronAPI;let z=!1,B=0;const D=15;for(;!z&&B<D;)try{i(H=>({...H,backend:{status:"waiting",message:`Connecting to backend (${B+1}/${D})...`}}));const Q=await fetch(`${rr}/api/browser/check`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(2e3)});if(Q.ok){const H=await Q.json();i(Y=>({...Y,backend:{status:"ready",message:"Backend connected "},browser:{...Y.browser,status:"checking",message:"Checking browser installation..."}})),await new Promise(Y=>setTimeout(Y,500)),z=!0;break}}catch{B++,B<D&&await new Promise(H=>setTimeout(H,1e3))}if(z||i(Q=>({...Q,backend:{status:"offline",message:"Backend offline (proceeding anyway)"}})),x(!1),i(Q=>({...Q,browser:{status:"checking",progress:40,message:"Checking for Google Chrome..."},profile:{status:"pending",progress:0,message:"Waiting for Chrome check..."}})),!(await P.checkChromeAvailability()).available){x(!0),i(Q=>({...Q,browser:{status:"pending",progress:0,message:"Google Chrome not found. Please install it to continue."},profile:{status:"pending",progress:0,message:"Waiting for Chrome installation..."}}));return}i(Q=>({...Q,browser:{status:"complete",progress:100,message:"Google Chrome detected "},profile:{status:"checking",progress:65,message:"Preparing JobHuntr Chrome profile..."}}));const G=await fetch(`${rr}/api/browser/profile/ensure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:n??null})});if(!G.ok)throw new Error("Failed to prepare JobHuntr Chrome profile.");const re=!!(await G.json())?.created;i(Q=>({...Q,profile:{status:"complete",progress:100,message:re?"JobHuntr Chrome profile created ":"JobHuntr Chrome profile ready "}})),w(!0),setTimeout(()=>t(),1500)}catch(E){console.error("Setup error:",E);const P=E instanceof Error?E.message:"Unknown error";i(z=>({...z,browser:{status:"pending",progress:0,message:`Setup failed: ${P}`},profile:{status:"pending",progress:0,message:"Unable to prepare JobHuntr Chrome profile yet."}}))}},[t,n,y]);return F.useEffect(()=>{if(!e)return;const E=setTimeout(()=>{A()},500),P=setInterval(()=>{p(z=>(z+1)%_.length)},3e3);return()=>{clearTimeout(E),clearInterval(P)}},[e,A,_.length]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{width:"100vw",height:"100vh"},children:s.jsxs(jt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-2xl py-10",style:{width:"700px",maxWidth:"95vw"},children:[s.jsx("div",{className:"text-center",style:{marginBottom:"20px",marginLeft:"auto",marginRight:"auto",width:"600px",maxWidth:"90%"},children:s.jsx("h1",{className:"text-3xl font-bold",style:{color:f.colors.neutral[800]},children:"Setting up JobHuntr"})}),s.jsx("div",{style:{marginBottom:"10px",marginLeft:"auto",marginRight:"auto",width:"750px",maxWidth:"95%"},children:s.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:f.colors.neutral[200],borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[300]}`,position:"relative",overflow:"hidden"},children:s.jsx(jt.div,{style:{position:"absolute",top:0,left:0,height:"100%",width:`${l.browser.progress}%`,background:`linear-gradient(90deg, ${f.colors.accent.info}, ${f.colors.accent.info}dd)`,boxShadow:`0 0 10px ${f.colors.accent.info}66`},initial:{width:0},animate:{width:`${l.browser.progress}%`},transition:{width:{duration:.5}}})})}),s.jsx("div",{className:"text-center",style:{marginLeft:"auto",marginRight:"auto",width:"600px",maxWidth:"90%"},children:s.jsx(jt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},children:s.jsx("span",{className:"text-sm italic",style:{color:f.colors.neutral[600]},children:l.browser.status==="complete"&&l.profile.status==="complete"?" Setup complete! Ready to find your dream job!":_[d]})},d)}),s.jsxs("div",{className:"px-10 mt-8",style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"24px"},children:[s.jsxs("div",{style:{padding:"16px",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("h3",{className:"text-sm font-semibold",style:{color:f.colors.neutral[700]},children:"Backend status"}),s.jsx("p",{className:"text-sm",style:{color:f.colors.neutral[600]},children:l.backend.message})]}),s.jsxs("div",{style:{padding:"16px",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("h3",{className:"text-sm font-semibold",style:{color:f.colors.neutral[700]},children:"Browser status"}),s.jsx("p",{className:"text-sm",style:{color:f.colors.neutral[600]},children:l.browser.message}),g&&s.jsxs("div",{className:"mt-4",children:[s.jsx("button",{className:"w-full py-3 rounded-lg text-white font-semibold",style:{backgroundColor:f.colors.accent.info},onClick:j,children:"Download Google Chrome"}),s.jsx("p",{className:"text-xs mt-2 text-center",style:{color:f.colors.neutral[500]},children:"Youll be taken to google.com/chrome to download the latest version."})]})]}),s.jsxs("div",{style:{padding:"16px",borderRadius:f.borderRadius.lg,border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsx("h3",{className:"text-sm font-semibold",style:{color:f.colors.neutral[700]},children:"JobHuntr profile"}),s.jsx("p",{className:"text-sm",style:{color:f.colors.neutral[600]},children:l.profile.message})]})]})]})}):null},tre=({onComplete:e,onSkip:t,userEmail:r})=>s.jsx("div",{className:"auth-page light",children:s.jsx(ere,{isOpen:!0,onComplete:e,onSkip:t,userEmail:r})}),rre=({mode:e="inline",onClose:t})=>{const[r,n]=F.useState(null),[l,i]=F.useState(null),[d,p]=F.useState(null),[g,x]=F.useState(0),[y,w]=F.useState(!1),[j,_]=F.useState(null),A=async()=>{try{_(null);const G=localStorage.getItem("jobhuntr_auth");if(!G){n(null),i(null);return}const $=JSON.parse(G);i($);const re=await mr.getValidToken();if(!re){n(null);return}const Q=rb(re),H=Math.floor(Date.now()/1e3),Y=new Date(Q.exp*1e3),T=new Date(Q.iat*1e3),o=Math.max(0,Q.exp-H),c=o<=300;n({isValid:o>0,expiresAt:Y,issuedAt:T,timeUntilExpiry:o,userId:Q.sub,email:Q.email,role:Q.role||"authenticated",sessionId:Q.session_id,audience:Q.aud,shouldRefreshSoon:c}),H-Q.iat<300&&p(T)}catch(G){console.error("Failed to update token info:",G),_(G instanceof Error?G.message:"Failed to decode token"),n(null)}},E=async()=>{try{w(!0),_(null);const G=await mr.getValidToken(),$=await mr.refreshToken();$&&$!==G&&(x(re=>re+1),p(new Date),await A())}catch(G){console.error("Manual refresh failed:",G),_(G instanceof Error?G.message:"Refresh failed")}finally{w(!1)}};F.useEffect(()=>{A();const G=setInterval(A,3e4);return()=>clearInterval(G)},[]);const P=G=>{if(G<=0)return"0s";const $=Math.floor(G/3600),re=Math.floor(G%3600/60),Q=G%60,H=[];return $>0&&H.push(`${$}h`),re>0&&H.push(`${re}m`),Q>0&&H.push(`${Q}s`),H.join(" ")},z=()=>r?.isValid?r.shouldRefreshSoon?{color:"#ff9500",icon:Wi,text:"Expires Soon"}:{color:"#34c759",icon:Mi,text:"Valid"}:{color:"#ff3b30",icon:Ki,text:"Expired"};if(j)return s.jsxs("div",{className:"jwt-token-info error",children:[s.jsxs("div",{className:"jwt-header",children:[s.jsx(Ki,{size:20,style:{color:f.colors.accent.error}}),s.jsx("h4",{children:"JWT Token Error"})]}),s.jsx("p",{style:{color:f.colors.accent.error,fontSize:f.typography.fontSize.sm,margin:"8px 0"},children:j}),s.jsx("button",{onClick:A,className:"btn btn-secondary",style:{fontSize:f.typography.fontSize.xs,padding:"4px 8px"},children:"Retry"})]});if(!r)return s.jsxs("div",{style:{background:f.colors.neutral[100],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.lg,margin:`${f.spacing.lg} 0`},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:f.spacing.sm,marginBottom:f.spacing.md},children:[s.jsx(id,{size:20,style:{color:f.colors.neutral[500]}}),s.jsx("h4",{style:{margin:0,fontSize:f.typography.fontSize.base,fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[800],fontFamily:f.typography.fontFamily},children:"JWT Token"})]}),s.jsx("p",{style:{color:f.colors.neutral[500],fontSize:f.typography.fontSize.sm,margin:0,fontFamily:f.typography.fontFamily},children:j?`Error: ${j}`:"Loading authentication token..."}),s.jsx("div",{style:{marginTop:f.spacing.sm},children:s.jsx(is,{onClick:A,variant:"primary",size:"small",children:"Retry"})})]});const B=z(),D=e==="floating",U=D?{position:"fixed",top:f.spacing.sm,right:f.spacing.sm,background:f.colors.neutral[50],color:f.colors.neutral[800],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.md,minWidth:"320px",maxWidth:"400px",zIndex:9999,fontSize:f.typography.fontSize.xs,boxShadow:f.shadows.lg,fontFamily:f.typography.fontFamily,overflow:"visible",wordBreak:"break-word"}:{background:f.colors.neutral[50],border:`1px solid ${f.colors.neutral[200]}`,borderRadius:f.borderRadius.lg,padding:f.spacing.lg,margin:`${f.spacing.lg} 0`,fontFamily:f.typography.fontFamily};return s.jsxs("div",{style:U,children:[s.jsx("style",{children:`
        
        .jwt-header {
          display: flex;
          align-items: center;
          gap: ${f.spacing.sm};
          margin-bottom: ${f.spacing.md};
          font-family: ${f.typography.fontFamily};
        }
        
        .jwt-header h4 {
          margin: 0;
          font-size: ${D?f.typography.fontSize.sm:f.typography.fontSize.base};
          font-weight: ${f.typography.fontWeight.semibold};
          color: ${f.colors.neutral[800]};
        }
        
        .jwt-status {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 6px 10px;
          border-radius: 6px;
          font-size: 12px;
          font-weight: 500;
          margin-bottom: 12px;
          background: rgba(52, 199, 89, 0.1);
          color: #34c759;
        }
        
        .jwt-details {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: ${f.spacing.md};
        }
        
        .jwt-detail {
          display: flex;
          align-items: center;
          gap: ${f.spacing.xs};
          font-size: ${f.typography.fontSize.sm};
          font-family: ${f.typography.fontFamily};
        }
        
        .jwt-detail-label {
          color: ${f.colors.neutral[600]};
          font-weight: ${f.typography.fontWeight.medium};
        }
        
        .jwt-detail-value {
          color: ${f.colors.neutral[800]};
        }
        
        
        .refresh-info {
          font-size: ${f.typography.fontSize.xs};
          color: ${f.colors.neutral[600]};
          margin-top: ${f.spacing.sm};
          font-family: ${f.typography.fontFamily};
        }
      `}),s.jsxs("div",{className:"jwt-header",children:[s.jsx(fp,{size:D?16:20,style:{color:B.color}}),s.jsx("h4",{children:D?"JWT Monitor":"JWT Authentication Token"}),D&&t&&s.jsx("div",{style:{marginLeft:"auto"},children:s.jsx(is,{onClick:t,variant:"secondary",size:"small",style:{color:f.colors.neutral[600],padding:f.spacing.xs},children:s.jsx(cn,{size:14})})})]}),s.jsxs("div",{className:"jwt-status",style:{background:`${B.color}20`,color:B.color},children:[s.jsx(B.icon,{size:14}),B.text]}),s.jsxs("div",{className:"jwt-details",children:[s.jsxs("div",{className:"jwt-detail",children:[s.jsx(cc,{size:12,style:{color:D?"#999":"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"User:"}),s.jsx("span",{className:"jwt-detail-value",children:r.email})]}),s.jsxs("div",{className:"jwt-detail",children:[s.jsx(Wi,{size:12,style:{color:D?"#999":"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Expires in:"}),s.jsx("span",{className:"jwt-detail-value",style:{color:B.color},children:P(r.timeUntilExpiry)})]}),!D&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"jwt-detail",children:[s.jsx(xs,{size:12,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Expires at:"}),s.jsx("span",{className:"jwt-detail-value",children:r.expiresAt.toLocaleString()})]}),s.jsxs("div",{className:"jwt-detail",children:[s.jsx(xs,{size:12,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Issued at:"}),s.jsx("span",{className:"jwt-detail-value",children:r.issuedAt.toLocaleString()})]}),s.jsxs("div",{className:"jwt-detail",children:[s.jsx(fp,{size:12,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Role:"}),s.jsx("span",{className:"jwt-detail-value",children:r.role})]}),s.jsxs("div",{className:"jwt-detail",children:[s.jsx(id,{size:12,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"User ID:"}),s.jsxs("span",{className:"jwt-detail-value",children:[r.userId.substring(0,8),"..."]})]})]})]}),l&&s.jsxs("div",{className:"jwt-details",style:{marginTop:"12px"},children:[s.jsxs("div",{className:"jwt-detail",children:[s.jsx(An,{size:14,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Has Refresh Token:"}),s.jsx("span",{className:"jwt-detail-value",children:l.refreshToken?"Yes":" No"})]}),s.jsxs("div",{className:"jwt-detail",children:[s.jsx(xs,{size:14,style:{color:"#666"}}),s.jsx("span",{className:"jwt-detail-label",children:"Stored at:"}),s.jsx("span",{className:"jwt-detail-value",children:new Date(l.timestamp).toLocaleString()})]})]}),d&&s.jsxs("div",{className:"refresh-info",children:[s.jsx(An,{size:12,style:{color:"#34c759"}}),"Last refreshed: ",d.toLocaleString(),g>0&&` (${g} times this session)`]}),s.jsxs("div",{style:{display:"flex",gap:f.spacing.sm,marginTop:f.spacing.md,flexWrap:"wrap",justifyContent:"flex-start"},children:[s.jsxs(is,{onClick:E,disabled:y,loading:y,variant:"primary",size:D?"small":"medium",children:[s.jsx(An,{size:D?10:14}),D?y?"Refreshing...":"Refresh":y?"Refreshing...":"Refresh Token"]}),!D&&s.jsxs(is,{onClick:A,variant:"secondary",size:"medium",children:[s.jsx(Wi,{size:14}),"Update Info"]})]}),s.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})},nre=({onClose:e})=>{const[t,r]=F.useState(""),n=[{name:"Test Button Click",event:"test_button_clicked",props:{timestamp:new Date().toISOString()}},{name:"Test Page View",event:"$pageview",props:{$current_url:"test_page"}},{name:"Test User Action",event:"test_user_action",props:{action_type:"manual_test",value:42}}],l=(i,d)=>{Tn.trackEvent(i,d),r(`Sent: ${i}`),setTimeout(()=>r(""),3e3)};return s.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"320px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",padding:"20px",zIndex:1e4,color:"white",fontFamily:"system-ui, -apple-system, sans-serif"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[s.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600"},children:"Analytics Test Panel"}),s.jsx("button",{onClick:e,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",padding:"4px 8px",fontSize:"18px"},children:""})]}),s.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",borderRadius:"8px",padding:"12px",marginBottom:"16px",fontSize:"13px"},children:[s.jsxs("div",{style:{marginBottom:"8px"},children:[s.jsx("strong",{children:"PostHog Status:"})," Initialized"]}),s.jsxs("div",{style:{fontSize:"11px",opacity:.9},children:["API Key: phc_Lmp...348Z0",s.jsx("br",{}),"Host: us.i.posthog.com"]})]}),s.jsxs("div",{style:{marginBottom:"12px"},children:[s.jsx("div",{style:{fontSize:"12px",marginBottom:"8px",opacity:.9},children:"Click to send test events:"}),n.map((i,d)=>s.jsx("button",{onClick:()=>l(i.event,i.props),style:{width:"100%",background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"6px",color:"white",cursor:"pointer",padding:"10px",marginBottom:"8px",fontSize:"13px",fontWeight:"500",transition:"all 0.2s"},onMouseEnter:p=>{p.currentTarget.style.background="rgba(255,255,255,0.3)"},onMouseLeave:p=>{p.currentTarget.style.background="rgba(255,255,255,0.2)"},children:i.name},d))]}),t&&s.jsx("div",{style:{background:"rgba(46, 213, 115, 0.3)",border:"1px solid rgba(46, 213, 115, 0.5)",borderRadius:"6px",padding:"8px",fontSize:"12px",textAlign:"center"},children:t}),s.jsxs("div",{style:{marginTop:"16px",fontSize:"11px",opacity:.8,borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"12px"},children:[s.jsx("strong",{children:"Next Steps:"}),s.jsxs("ol",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[s.jsx("li",{children:"Click test buttons above"}),s.jsx("li",{children:"Check browser console (F12)"}),s.jsx("li",{children:"Visit PostHog dashboard"})]})]})]})},ire=()=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px",padding:"32px",height:"100%",overflowY:"auto",backgroundColor:"#f8fafc"},children:[s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"24px",border:"1px solid #e2e8f0",display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs("div",{children:[s.jsx("p",{style:{margin:0,color:f.colors.accent.info,fontWeight:600,fontSize:f.typography.fontSize.sm,letterSpacing:"0.04em",textTransform:"uppercase"},children:"About Me Hub"}),s.jsx("h1",{style:{margin:"4px 0 0",fontSize:f.typography.fontSize.h3,color:f.colors.neutral[900]},children:"Teach JobHuntr how to speak on your behalf"})]}),s.jsx("p",{style:{margin:0,fontSize:f.typography.fontSize.lg,color:f.colors.neutral[600],maxWidth:"860px",lineHeight:1.5},children:"Everything you add here feeds the automated question-answering system. Long-form sections supply story-driven responses while FAQ answers help the agent handle common interview or application prompts."})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) minmax(0, 0.9fr)",gap:"24px",alignItems:"stretch"},children:[s.jsx(p9,{}),s.jsx("div",{style:{minHeight:0,display:"flex",flexDirection:"column"},children:s.jsx(h9,{})})]})]}),sre=({config:e,atsTemplates:t,onConfigChange:r,onResumePreview:n,onResumeUpload:l,resumeRefreshTrigger:i,isOnboarding:d=!1})=>s.jsxs("div",{children:[s.jsx(ki,{style:{marginBottom:"8px"},children:d?"Upload your resume":"Generate ATS resumes automatically"}),s.jsx(Ct,{style:{color:"#475569",marginBottom:"16px"},children:d?"Upload your resume to get started. This will help the agents apply to jobs on your behalf.":"When enabled, every platform run starts by tailoring an ATS-optimized resume so the agents can answer screener questions with the freshest information."}),!d&&s.jsx(ot,{variant:e.autoGenerateATSResume?"primary":"secondary",onClick:()=>{const p=!e.autoGenerateATSResume;let g=e.atsTemplateId;p&&!g&&t.length&&(g=t[0].id),r({autoGenerateATSResume:p,useAtsOptimized:p,atsTemplateId:g})},style:{width:"fit-content"},children:e.autoGenerateATSResume?"Disable":"Enable"}),e.autoGenerateATSResume&&!d?s.jsx("div",{style:{marginTop:"24px"},children:t.length?s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.map(p=>{const g=e.atsTemplateId===p.id;return s.jsxs("div",{onClick:()=>r({atsTemplateId:p.id}),style:{padding:"12px 16px",backgroundColor:g?"#eef2ff":"#f8fafc",border:g?`2px solid ${f.colors.accent.info}`:"1px solid #e2e8f0",borderRadius:"10px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"4px",transition:"all 0.2s ease"},onMouseEnter:x=>{g||(x.currentTarget.style.backgroundColor="#f1f5f9")},onMouseLeave:x=>{g||(x.currentTarget.style.backgroundColor="#f8fafc")},children:[s.jsx(Ct,{style:{fontWeight:600,margin:0},children:p.name||"Untitled template"}),s.jsx(dr,{style:{color:"#475569",margin:0},children:g?"Selected for ATS resume generation":"Click to select for ATS resume generation"})]},p.id)}),s.jsx(ot,{variant:"secondary",onClick:()=>window.open("/ats-templates","_blank"),style:{alignSelf:"flex-start"},children:"Manage ATS templates"})]}):s.jsxs("div",{style:{padding:"24px",border:"1px solid #e2e8f0",borderRadius:"12px",backgroundColor:"#f8fafc"},children:[s.jsx(dr,{style:{color:"#475569",marginBottom:"12px",display:"block"},children:"You need at least one ATS template to generate tailored resumes."}),s.jsx(ot,{variant:"primary",onClick:()=>window.open("/ats-templates","_blank"),children:"Create ATS template"})]})}):s.jsx("div",{style:{marginTop:"24px"},children:s.jsx("div",{style:{maxWidth:"420px"},children:s.jsx(e7,{selectedResumeId:e.resumeId||void 0,onResumeSelect:p=>r({resumeId:p?.id||void 0}),onPreview:p=>{n?n(p):window.open(p.blob_url||p.file_path||"","_blank")},onUploadNew:()=>{l?l():window.open("/resumes","_blank")},refreshTrigger:i})})})]}),S9=({template:e,orderIndex:t,isHovered:r,isSelected:n,isPending:l=!1,isBlocked:i=!1,compact:d=!1,loginState:p,isLaunching:g,isClosing:x,actionError:y,confirmDisabled:w,platformLabel:j,agentRunModeLabel:_,showLoginActions:A=!1,autonomousLLMSettings:E,onMouseEnter:P,onMouseLeave:z,onClick:B,onDragStart:D,onDragOver:U,onDrop:G,onLaunchLogin:$,onConfirmLogin:re,onUnblock:Q})=>{const H=n||r||l||i?1:.7;n&&(!e.requireSignIn||p?.confirmed);const Y=()=>i?`2px solid ${f.colors.accent.error}`:n?`2px solid ${f.colors.primary.main}`:"1px solid #e2e8f0",T=()=>i?"#fef2f2":r?"#f1f5f9":"#fff";return s.jsxs("div",{draggable:n,onDragStart:D,onDragOver:U,onDrop:G,onMouseEnter:P,onMouseLeave:z,onClick:B,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),B())},role:"button",tabIndex:0,style:{border:Y(),borderRadius:"12px",padding:"16px",backgroundColor:T(),display:"flex",flexDirection:"column",gap:"12px",cursor:n?"grab":"pointer",boxShadow:r&&n?"0 0 0 3px rgba(31, 41, 55, 0.15)":"none",transition:n?"box-shadow 0.2s ease":"background-color 0.2s ease, border-color 0.2s ease, opacity 0.2s ease",opacity:H},children:[s.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[t!==void 0&&s.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",backgroundColor:f.colors.primary.main,color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:"12px"},children:t}),s.jsxs("div",{style:{flex:1,display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.iconType==="image"&&e.iconSrc&&s.jsx("img",{src:e.iconSrc,alt:e.title,style:{width:"24px",height:"24px",borderRadius:"4px"}}),e.iconType==="component"&&e.icon&&s.jsx("div",{style:{width:"24px",height:"24px"},children:e.icon}),s.jsxs("div",{style:{flex:1},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[s.jsx(Ct,{style:{margin:0,fontWeight:f.typography.fontWeight.bold},children:e.title}),s.jsx("span",{style:{backgroundColor:f.colors.neutral[200],color:f.colors.primary.main,fontWeight:f.typography.fontWeight.semibold,fontSize:f.typography.fontSize.base,padding:"4px 12px",borderRadius:"999px",whiteSpace:"nowrap"},children:_})]}),!d&&(n||l)&&s.jsx("div",{style:{color:"#475569",marginTop:"8px",lineHeight:"1.5"},children:s.jsx(Bo,{components:{p:({children:o})=>s.jsx("p",{style:{margin:"0 0 8px 0"},children:o}),strong:({children:o})=>s.jsx("strong",{style:{fontWeight:600},children:o}),ul:({children:o})=>s.jsx("ul",{style:{margin:"4px 0",paddingLeft:"20px"},children:o}),li:({children:o})=>s.jsx("li",{style:{margin:"2px 0"},children:o})},children:e.description})})]})]})]}),E,i&&s.jsx(dr,{style:{color:f.colors.accent.error,margin:0},children:"Blocked due to CAPTCHA. Open sign-in page to verify before re-adding."}),A&&$&&re&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[s.jsxs("button",{onClick:o=>{o.stopPropagation(),$()},disabled:g||x,style:{flex:"1 1 260px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 18px",borderRadius:f.borderRadius.md,border:`1px solid ${f.colors.accent.info}`,backgroundColor:"white",color:f.colors.accent.info,fontWeight:f.typography.fontWeight.medium,cursor:g||x?"not-allowed":"pointer",opacity:g||x?.6:1},children:[s.jsx($i,{size:18}),g?"Opening...":`Open ${j} website`]}),s.jsxs("button",{onClick:o=>{o.stopPropagation(),re()},disabled:w||x,style:{flex:"1 1 260px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 18px",borderRadius:f.borderRadius.md,border:"none",backgroundColor:f.colors.primary.main,color:"white",fontWeight:f.typography.fontWeight.semibold,cursor:w||x?"not-allowed":"pointer",opacity:w||x?.6:1},children:[s.jsx(LR,{size:18}),x?"Closing Chrome...":"I'm signed in  close all Chrome windows"]})]}),s.jsx(dr,{style:{color:f.colors.accent.error,fontStyle:"italic",margin:0},children:"Please open the website to confirm you have signed in and complete verification code (CAPTCHA) if pop up"})]}),y&&s.jsx(dr,{style:{color:f.colors.accent.error,width:"100%"},children:y})]})]},e.id)},ore=({templates:e,config:t,loginStatuses:r,launchingAgentRuns:n,closingAgentRuns:l,agentRunErrors:i,hoveredAgentRunId:d,agentRunModeLabels:p,agentRunPlatformLabels:g,autonomousLLMSettings:x,templateHasHistory:y,onHoverChange:w,onToggleAgentRun:j,onDragStart:_,onDragOver:A,onDrop:E,onLaunchLogin:P,onConfirmLogin:z})=>s.jsxs("div",{style:{marginBottom:"24px",marginTop:"24px"},children:[s.jsx(ki,{style:{marginBottom:"12px"},children:"Runs in infinite hunt loop"}),s.jsx(dr,{style:{color:"#475569",marginBottom:"12px",display:"block"},children:"Enable the runs you want in your infinite hunt loop, then confirm login for each selected run. Drag selected runs to set the execution order."}),s.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"16px",padding:"16px",backgroundColor:"#f8fafc"},children:[s.jsx(dr,{style:{color:"#475569",marginBottom:"12px",display:"block"},children:"Selected runs. Numbers show execution order."}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.length===0?s.jsx("div",{style:{border:"2px dashed #cbd5e1",borderRadius:"12px",padding:"32px 16px",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:s.jsx(dr,{style:{color:"#94a3b8",fontStyle:"italic"},children:"Please select from available runs"})}):e.map(B=>{const D=r[B.id]||{},U=t.workflowOrder.indexOf(B.id)+1,G=!!n[B.id],$=!!l[B.id],re=i[B.id],Q=!r[B.id]?.launched&&!y(B.id),H=d===B.id,Y=g[B.id]||B.title;return s.jsx(S9,{template:B,orderIndex:U,isHovered:H,isSelected:!0,compact:!1,loginState:D,isLaunching:G,isClosing:$,actionError:re,confirmDisabled:Q,platformLabel:Y,agentRunModeLabel:p[B.section],showLoginActions:!1,autonomousLLMSettings:B.id==="autonomous-auto-search"?x:void 0,onMouseEnter:()=>w(B.id),onMouseLeave:()=>w(null),onClick:()=>j(B.id),onDragStart:()=>_(B.id),onDragOver:T=>A(T,B.id),onDrop:T=>E(T),onLaunchLogin:()=>P(B.id),onConfirmLogin:()=>z(B.id)},B.id)})})]})]}),are=({templates:e,pendingTemplateIds:t,blockedTemplateIds:r,hoveredAgentRunId:n,agentRunModeLabels:l,agentRunPlatformLabels:i,loginStatuses:d,launchingAgentRuns:p,closingAgentRuns:g,agentRunErrors:x,templateHasHistory:y,onHoverChange:w,onToggleAgentRun:j,onLaunchLogin:_,onConfirmLogin:A,onUnblockTemplate:E,onStartHunt:P,canStart:z,startDisabledReason:B,hideStartButton:D=!1})=>s.jsxs("div",{children:[s.jsx(ki,{style:{marginBottom:"8px"},children:"Available runs"}),s.jsx(dr,{style:{color:"#475569",marginBottom:"12px",display:"block"},children:"Click to add agents to your infinite hunt."}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.map(U=>{const G=n===U.id,$=t.includes(U.id),re=r.includes(U.id),Q=d[U.id]||{},H=!!p[U.id],Y=!!g[U.id],T=x[U.id],o=!d[U.id]?.launched&&!y(U.id),c=i[U.id]||U.title;return s.jsx(S9,{template:U,isHovered:G,isSelected:!1,isPending:$,isBlocked:re,loginState:$?Q:{},isLaunching:$||re?H:!1,isClosing:$?Y:!1,actionError:$?T:void 0,confirmDisabled:$?o:!1,platformLabel:c,agentRunModeLabel:l[U.section],showLoginActions:$,onMouseEnter:()=>w(U.id),onMouseLeave:()=>w(null),onClick:()=>j(U.id),onLaunchLogin:$||re?()=>_(U.id):void 0,onConfirmLogin:$?()=>A(U.id):void 0,onUnblock:re?()=>E(U.id):void 0},U.id)}),!e.length&&s.jsx(dr,{style:{color:"#475569"},children:"All agent runs are currently selected. Deselect any above to see them here."})]}),!D&&s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",marginTop:"16px",gap:"8px"},children:[!z&&B&&s.jsx(dr,{style:{color:f.colors.accent.warningDarkest,textAlign:"right",fontWeight:f.typography.fontWeight.medium},children:B}),s.jsxs(ot,{variant:"primary",disabled:!z,onClick:P,style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:"18px",lineHeight:1},children:""}),"Start Infinite Hunt"]})]})]}),q8=(e,t)=>{const r=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),l=parseInt(e.slice(5,7),16);return`rgba(${r}, ${n}, ${l}, ${t})`},lre=({show:e,stage:t,promptInput:r,modalError:n,modalProcessingMessage:l,modalRunList:i,sessionFilter:d,sessionFilterOptions:p,sessionLabelMap:g,selectedModalRunId:x,selectedRun:y,selectedRunLogEntries:w,status:j,statusMessage:_,isCreatingRun:A,onClose:E,onSessionFilterChange:P,onPromptChange:z,onPromptSubmit:B,onSelectRun:D,onOpenRunPage:U,onPause:G,onResume:$,onStop:re})=>{const Q=F.useRef(null),[H,Y]=Vt.useState(!1);Vt.useEffect(()=>{j!=="running"&&Y(!1)},[j]);const T=async()=>{Y(!0);try{await re()}catch{Y(!1)}},o=F.useMemo(()=>w.map(c=>{const h=c.activity_type||"action";let v,b;switch(h){case"thinking":v=qr.THINKING,b=on.THINKING;break;case"result":v=qr.RESULT,b=on.RESULT;break;default:v=qr.ACTION,b=on.ACTION}return c.text.includes("")||c.text.includes("Error")||c.text.includes("Failed")?b=on.ERROR:(c.text.includes("")||c.text.includes("Warning"))&&(b=on.WARNING),{id:c.id,type:v,text:c.text,color:b,timestamp:new Date(c.timestamp),threadTitle:c.thread_title,threadStatus:c.thread_status}}),[w]);return e?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:q8(f.colors.neutral[900],.75),display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:j!=="running"||t!=="running"?E:void 0,children:s.jsxs("div",{onClick:c=>c.stopPropagation(),style:{width:"100vw",height:"100vh",backgroundColor:f.colors.neutral[50],padding:"40px",boxShadow:`0 30px 80px ${q8(f.colors.neutral[900],.35)}`,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[s.jsxs("div",{children:[s.jsx(ki,{style:{marginBottom:"4px"},children:"Previous infinite hunt"}),s.jsx(dr,{style:{color:f.colors.neutral[600]},children:r||"Launch new runs, monitor activity, or pause the infinite hunt."})]}),(j!=="running"||t!=="running")&&s.jsx("button",{"aria-label":"Close infinite hunt modal",onClick:E,style:{border:"none",background:"transparent",color:f.colors.neutral[500],cursor:"pointer",padding:"4px",borderRadius:f.borderRadius.sm,transition:"all 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor=f.colors.neutral[100],c.currentTarget.style.color=f.colors.neutral[700]},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="transparent",c.currentTarget.style.color=f.colors.neutral[500]},children:s.jsx(cn,{size:22})})]}),t==="prompt"&&s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",maxWidth:"640px",margin:"0 auto"},children:[s.jsx(ki,{style:{fontSize:"28px",marginBottom:"12px",textAlign:"center"},children:"What jobs are you looking for?"}),s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
                .infinite-hunt-input-container:focus-within {
                  border-color: ${f.colors.neutral[300]} !important;
                  box-shadow: none !important;
                }
                .infinite-hunt-input-container:hover {
                  border-color: ${f.colors.neutral[300]} !important;
                }
                .infinite-hunt-input-container textarea:hover {
                  background-color: transparent !important;
                }
                .infinite-hunt-input-container textarea:focus {
                  background-color: transparent !important;
                }
              `}),s.jsx("div",{ref:Q,className:"infinite-hunt-input-container",onMouseEnter:()=>{Q.current&&(Q.current.style.borderColor=f.colors.neutral[300],Q.current.style.boxShadow="none")},onMouseLeave:()=>{Q.current&&(Q.current.style.borderColor=f.colors.neutral[300],Q.current.style.boxShadow="none")},style:{border:`1px solid ${f.colors.neutral[300]}`,borderRadius:f.borderRadius.lg,padding:"14px 20px",backgroundColor:f.colors.secondary.main,width:"100%"},children:s.jsx("textarea",{value:r,onChange:c=>z(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),B())},onFocus:()=>{Q.current&&(Q.current.style.borderColor=f.colors.neutral[300],Q.current.style.boxShadow="none")},onBlur:()=>{Q.current&&(Q.current.style.borderColor=f.colors.neutral[300],Q.current.style.boxShadow="none")},placeholder:"e.g., Senior AI product roles at venture-backed startups",rows:2,style:{width:"100%",border:"none",outline:"none",lineHeight:"1.5",backgroundColor:"transparent",color:f.colors.neutral[900],resize:"vertical",fontFamily:"inherit"}})})]}),n&&s.jsx(dr,{style:{color:f.colors.accent.error,marginTop:"12px",textAlign:"center"},children:n})]}),t==="creating"&&s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
                @keyframes skeletonPulse {
                  0% { background-position: 200% 0; }
                  100% { background-position: -200% 0; }
                }
              `}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px"},children:s.jsxs("div",{style:{width:"100%",maxWidth:"800px",backgroundColor:f.colors.secondary.main,borderRadius:"16px",padding:"40px",boxShadow:"0px 20px 45px rgba(15, 23, 42, 0.08)",border:`1px solid ${f.colors.neutral[200]}`},children:[s.jsxs("div",{style:{marginBottom:"32px",textAlign:"center"},children:[s.jsx("div",{style:{width:"60%",height:"32px",margin:"0 auto 12px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite"}}),s.jsx("div",{style:{width:"40%",height:"16px",margin:"0 auto",borderRadius:"6px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.1s"}})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{width:"30%",height:"14px",marginBottom:"8px",borderRadius:"4px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.2s"}}),s.jsx("div",{style:{width:"100%",height:"42px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.3s"}})]}),s.jsxs("div",{children:[s.jsx("div",{style:{width:"25%",height:"14px",marginBottom:"8px",borderRadius:"4px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.4s"}}),s.jsx("div",{style:{width:"100%",height:"42px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.5s"}})]}),s.jsxs("div",{children:[s.jsx("div",{style:{width:"35%",height:"14px",marginBottom:"8px",borderRadius:"4px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}}),s.jsx("div",{style:{width:"100%",height:"80px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.7s"}})]})]}),s.jsxs("div",{style:{marginTop:"32px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("div",{style:{width:"120px",height:"40px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.8s"}}),s.jsx("div",{style:{width:"140px",height:"40px",borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",animationDelay:"0.9s"}})]}),s.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:`1px solid ${f.colors.neutral[200]}`,textAlign:"center"},children:[s.jsx(Ct,{style:{color:f.colors.neutral[600],marginBottom:"4px"},children:l}),s.jsx(dr,{style:{color:f.colors.neutral[400]},children:"This usually takes just a few seconds."})]})]})})]}),t==="running"&&s.jsxs("div",{style:{flex:1,display:"flex",gap:"24px",minHeight:0},children:[s.jsxs("div",{style:{width:"320px",borderRadius:"8px",border:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.secondary.main,padding:"24px",display:"flex",flexDirection:"column",minHeight:0},children:[_&&!_.includes("Generating")&&s.jsx("div",{style:{marginBottom:"16px",padding:"12px 16px",backgroundColor:f.colors.primary.main+"15",borderRadius:"8px",border:`1px solid ${f.colors.primary.main}30`},children:s.jsx(dr,{style:{color:f.colors.primary.main,fontWeight:600},children:_})}),s.jsx(ki,{style:{marginBottom:"4px",fontSize:"18px"},children:"Runs in loop"}),s.jsx(dr,{style:{color:f.colors.neutral[600]},children:"Click to inspect or open a run."}),p.length>0&&s.jsxs("div",{style:{marginTop:"16px",display:"flex",flexDirection:"column",gap:"6px"},children:[s.jsx(dr,{style:{color:f.colors.neutral[500],fontWeight:600},children:"Session filter"}),s.jsx("select",{value:d,onChange:c=>P(c.target.value),style:{width:"100%",borderRadius:"8px",padding:"8px 12px",border:`1px solid ${f.colors.neutral[200]}`,backgroundColor:f.colors.secondary.main,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[700],outline:"none"},children:p.map(c=>s.jsx("option",{value:c.value,children:c.label},c.value))})]}),s.jsxs("div",{style:{marginTop:p.length>0?"12px":"16px",overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:"12px"},children:[console.log("[InfiniteHuntModal] statusMessage:",_,"includes Generating?",_?.includes("Generating")),_&&_.includes("Generating")&&s.jsxs("div",{style:{border:`1px dashed ${f.colors.primary.main}50`,borderRadius:"12px",padding:"14px 16px",backgroundColor:f.colors.primary.main+"08",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[s.jsx("div",{style:{height:"20px",backgroundColor:f.colors.neutral[200],borderRadius:"4px",marginBottom:"8px",width:"70%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),s.jsx("div",{style:{height:"14px",backgroundColor:f.colors.neutral[100],borderRadius:"4px",marginBottom:"6px",width:"50%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),s.jsx("div",{style:{height:"14px",backgroundColor:f.colors.neutral[100],borderRadius:"4px",width:"60%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}),s.jsx(dr,{style:{color:f.colors.primary.main,fontWeight:600,marginTop:"10px",fontStyle:"italic"},children:"Generating new agent run..."})]}),i.length?i.map((c,h)=>{const v=c.id===x,b=c.infinite_hunt_session_id||"",M=b&&(g[b]||`Session ${b.slice(0,6).toUpperCase()}`),R=b?b.slice(0,8).toUpperCase():"",S=h===0;return s.jsxs("div",{onClick:()=>D(c.id),style:{border:v?`2px solid ${f.colors.accent.info}`:`1px solid ${f.colors.neutral[200]}`,borderRadius:"12px",padding:"14px 16px",backgroundColor:v?f.colors.accent.infoLight:f.colors.secondary.main,cursor:"pointer",transition:"all 0.2s ease"},children:[s.jsx(Ct,{style:{fontWeight:f.typography.fontWeight.semibold,marginBottom:"4px"},children:c.run_name||c.workflow_id}),s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:s.jsxs(dr,{style:{color:f.colors.neutral[600],textTransform:"uppercase",fontWeight:f.typography.fontWeight.semibold,letterSpacing:f.typography.letterSpacing.wide},children:[M||"Session",R&&s.jsx("span",{style:{fontFamily:"monospace",color:f.colors.neutral[500],letterSpacing:f.typography.letterSpacing.normal,marginLeft:"6px"},children:R})]})}),c.search_keywords&&c.search_keywords.length>0&&s.jsxs(dr,{style:{color:f.colors.neutral[600],marginBottom:"4px"},children:[s.jsx("strong",{children:"Keywords:"})," ",c.search_keywords.join(", ")]}),c.platform_filters&&s.jsxs(dr,{style:{color:f.colors.neutral[600],marginBottom:"4px"},children:[s.jsx("strong",{children:"Filters:"})," ",(()=>{const a=c.platform_filters[c.platform]||{},k=[];return a.country&&k.push(a.country),a.salary_bound&&k.push(`$${a.salary_bound}k+`),a.experience_levels?.length&&k.push(`${a.experience_levels.length} exp levels`),a.remote_types?.length&&k.push(`${a.remote_types.length} remote types`),k.length>0?k.join("  "):"None"})()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px"},children:[s.jsxs(dr,{style:{color:f.colors.neutral[500]},children:[c.platform," "," ",new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),S&&s.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",borderRadius:"999px",backgroundColor:f.colors.accent.infoLight,color:f.colors.accent.info,fontSize:f.typography.fontSize.xxs,fontWeight:f.typography.fontWeight.bold,textTransform:"uppercase"},children:"Latest"})]})]},c.id)}):s.jsx(dr,{style:{color:f.colors.neutral[600]},children:"No runs yet. Start the loop to generate agent runs automatically."})]}),j==="running"&&s.jsx("div",{style:{marginTop:"16px",borderTop:`1px solid ${f.colors.neutral[200]}`,paddingTop:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:s.jsxs(ot,{variant:"danger",onClick:T,disabled:H,style:{display:"inline-flex",alignItems:"center",gap:"6px",width:"100%"},children:[s.jsx(S$,{size:18}),H?"Stopping...":"Stop Infinite Hunt"]})})]}),s.jsx("div",{style:{flex:1,backgroundColor:f.colors.secondary.main,borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",minHeight:0,border:`1px solid ${f.colors.neutral[200]}`},children:y?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[s.jsx("div",{style:{flex:1},children:s.jsx(ki,{style:{marginBottom:"4px",fontSize:"22px"},children:y.run_name||y.workflow_id})}),s.jsx("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:s.jsxs(ot,{variant:"primary",onClick:()=>U(y.id),style:{display:"inline-flex",alignItems:"center",gap:"6px"},children:[s.jsx($i,{size:16}),"Open run page"]})})]}),y.config_reasoning_by_infinite_hunt&&s.jsxs("div",{style:{padding:"16px",borderRadius:"8px",border:`1px solid ${f.colors.neutral[200]}`,marginBottom:"16px"},children:[s.jsx(dr,{style:{fontWeight:f.typography.fontWeight.semibold,color:f.colors.neutral[700],marginBottom:"8px",display:"block"},children:"Why this config?"}),s.jsx(dr,{style:{color:f.colors.neutral[600],whiteSpace:"pre-wrap",lineHeight:"1.6"},children:y.config_reasoning_by_infinite_hunt})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",border:`1px solid ${f.colors.neutral[200]}`,borderRadius:"16px",backgroundColor:"#ffffff"},children:s.jsx(s9,{activities:o,showDropdownMenu:!1})})]}):s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:f.colors.neutral[600]},children:"Select a run on the left to see live updates."})})]})]})}):null},cre={"linkedin-apply":"https://www.linkedin.com/login","linkedin-search":"https://www.linkedin.com/login","indeed-search":"https://secure.indeed.com/","ziprecruiter-search":"https://www.ziprecruiter.com/login","glassdoor-search":"https://www.glassdoor.com/profile/login_input.htm","dice-search":"https://www.dice.com/dashboard/login"},z1=600,H8={"auto-apply":"Auto Apply","predefined-auto-search":"Auto Search"},W8={"linkedin-apply":"LinkedIn","linkedin-search":"LinkedIn","indeed-search":"Indeed","ziprecruiter-search":"ZipRecruiter","glassdoor-search":"Glassdoor","dice-search":"Dice"};function ure(e){const t=e.is_search_agent?"predefined-auto-search":"auto-apply";let r="./other_logos/linkedin.png";const n=e.name.toLowerCase();n.includes("indeed")?r="./other_logos/Indeed.png":n.includes("ziprecruiter")?r="./other_logos/Ziprecruiter.png":n.includes("glassdoor")?r="./other_logos/Glassdoor.png":n.includes("dice")&&(r="./other_logos/Dice.png");const l=e.name.split("-").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");return{id:e.id,title:l,description:e.description,icon:null,iconType:"image",iconSrc:r,category:"suggested",section:t,features:[],requireSignIn:e.require_sign_in}}const qh={workflowOrder:[],blockedTemplateIds:[],autoGenerateATSResume:!1,resumeId:void 0,atsTemplateId:void 0,useAtsOptimized:!1,semanticInstructions:"",autonomousStartingUrl:"",maxJobsPerPlatform:10,headlessOn:!1,autoInfiniteHuntOn:!0,perPlatformLogin:{}},dre=()=>{const[e,t]=F.useState(qh),[r,n]=F.useState("idle"),[l,i]=F.useState(null),[d,p]=F.useState(!0),[g,x]=F.useState(!1),y=F.useRef(!0),[w,j]=F.useState([]),{isOnboarding:_,hasUploadedResume:A,markResumeUploaded:E}=b9(),P=F.useRef(!0),z=F.useRef(!1),B=F.useRef(null),D=F.useRef(qh),[U,G]=F.useState([]),[$,re]=F.useState([]),[Q,H]=F.useState(null),[Y,T]=F.useState([]),[o,c]=F.useState("latest"),[h,v]=F.useState(null),[b,M]=F.useState(null),[R,S]=F.useState(null),[a,k]=F.useState(!1),[N,L]=F.useState({}),[X,se]=F.useState({}),[te,K]=F.useState({}),[J,ne]=F.useState(null),[oe,ae]=F.useState("running"),[ee,ue]=F.useState(""),[Ce,ve]=F.useState("Preparing your infinite hunt..."),[ge,Je]=F.useState(null),[Te,ze]=F.useState({}),[vt,he]=F.useState(null),[me,Me]=F.useState(!1),[pe,ke]=F.useState(null),[_e,Z]=F.useState(!1),[q,V]=F.useState(!1),[ie,ce]=F.useState(0),[be,fe]=F.useState(!1),[Ae,ht]=F.useState(!1),[je,Ie]=F.useState(null),pt=F.useRef(null),Ne=F.useMemo(()=>{const Re=new Map;return Y.filter(tt=>!!tt.infinite_hunt_session_id).forEach(tt=>{const dt=tt.infinite_hunt_session_id,xt=new Date(tt.created_at).getTime(),ut=Re.get(dt);ut?(ut.runs.push(tt),ut.latestCreatedAt=Math.max(ut.latestCreatedAt,xt)):Re.set(dt,{runs:[tt],latestCreatedAt:xt})}),Array.from(Re.entries()).map(([tt,dt])=>({sessionId:tt,runs:dt.runs.sort((xt,ut)=>new Date(ut.created_at).getTime()-new Date(xt.created_at).getTime()),latestCreatedAt:dt.latestCreatedAt})).sort((tt,dt)=>dt.latestCreatedAt-tt.latestCreatedAt)},[Y]),Ge=F.useMemo(()=>{const Re={};return Ne.forEach((tt,dt)=>{Re[tt.sessionId]=`Session #${dt+1}`}),Re},[Ne]),Ot=Ne.length?Ne[0].sessionId:null,Oe=F.useMemo(()=>{const Re=Y.filter(dt=>!!dt.infinite_hunt_session_id);if(!Re.length)return[];if(o==="all")return[...Re].sort((dt,xt)=>new Date(xt.created_at).getTime()-new Date(dt.created_at).getTime());const tt=o==="latest"?Ot:o;return tt?Re.filter(dt=>dt.infinite_hunt_session_id===tt).sort((dt,xt)=>new Date(xt.created_at).getTime()-new Date(dt.created_at).getTime()):[]},[Y,o,Ot]),Ze=F.useMemo(()=>{if(!Ne.length)return[];const Re=Ne.map(tt=>{const dt=Ge[tt.sessionId]||"Session",xt=tt.sessionId.slice(0,8).toUpperCase(),ut=new Date(tt.latestCreatedAt).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"});return{value:tt.sessionId,label:`${dt}  ${xt}  ${ut}`}});return[{value:"latest",label:"Latest session"},{value:"all",label:"All sessions"},...Re]},[Ne,Ge]);F.useEffect(()=>{if(o==="latest"||o==="all")return;Ne.some(tt=>tt.sessionId===o)||c("latest")},[o,Ne]);const Lt=F.useCallback(async()=>{const Re=[];let dt=1,xt=Number.POSITIVE_INFINITY;for(;Re.length<xt;){const ut=await gr.listAgentRuns({page:dt,page_size:100,infinite_hunt_only:!0}),qt=ut?.runs||[];if(Re.push(...qt),xt=ut?.total_count??Re.length,qt.length<100||qt.length===0)break;dt+=1}return Re.filter(ut=>!!ut.infinite_hunt_session_id)},[]),Pe=F.useCallback((Re,tt,dt,xt,ut)=>{!Re||!tt||ze(qt=>{const Nr=qt[Re]?[...qt[Re]]:[],Qn={id:`${Re}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,text:tt,timestamp:new Date().toISOString(),activity_type:dt||"action",thread_title:xt,thread_status:ut};return Nr.push(Qn),Nr.length>200&&Nr.splice(0,Nr.length-200),{...qt,[Re]:Nr}})},[]),Ve=F.useCallback(Re=>{const tt=pt.current||Q?.id;if(!tt){console.warn("[InfiniteHunt] Received activity message but no workflow_run_id available:",Re);return}const dt=Re.message||JSON.stringify(Re),xt=Re.activity_type||Re.type||"action",ut=Re.thread_title,qt=Re.thread_status;console.log("[InfiniteHunt] Adding activity message to run:",tt,dt),Pe(tt,dt,xt,ut,qt)},[Q?.id,Pe]),Bt=F.useCallback(()=>{},[]),Fe=F.useCallback(Re=>{},[]);Fa(Ve,Bt,Fe,nr),F.useEffect(()=>{const Re=()=>{try{Object.entries(Te).forEach(([tt,dt])=>{if(dt&&dt.length>0){const xt=dt.map(ut=>({id:ut.id,type:ut.activity_type||"action",text:ut.text,color:ut.activity_type||"action",timestamp:ut.timestamp,threadTitle:ut.thread_title,threadStatus:ut.thread_status}));localStorage.setItem(`agent_run_activities_${tt}`,JSON.stringify(xt))}})}catch(tt){console.warn("Failed to save logs on unmount",tt)}};return window.addEventListener("beforeunload",Re),()=>{Re(),window.removeEventListener("beforeunload",Re)}},[Te]);const Xe=F.useRef(null);F.useEffect(()=>{Q?.id&&Q.id!==Xe.current&&(Xe.current=Q.id,Pe(Q.id,"Agent run started from infinite hunt."))},[Q?.id,Pe]);const Et=F.useRef(null);F.useEffect(()=>{Q?.id&&l&&l!==Et.current&&(Et.current=l,Pe(Q.id,l))},[l,Q?.id,Pe]);const Be=F.useRef(null);F.useEffect(()=>{Q?.id&&r!==Be.current&&(Be.current=r,Pe(Q.id,r==="running"?"Infinite hunt started.":r==="paused"?"Infinite hunt paused.":`Infinite hunt status changed to ${r}.`))},[r,Q?.id,Pe]),F.useRef(null),F.useEffect(()=>{const Re=async()=>{try{const tt=await fetch(`${rr}/api/infinite-hunt/status`);if(tt.ok){const xt=(await tt.json()).status||"idle";if(P.current){P.current=!1,xt==="running"&&(console.log("Active infinite hunt detected in backend, opening modal..."),k(!0),ae("running")),z.current?(console.log("[InfiniteHunt] Both data and session check complete, exiting loading state"),p(!1)):console.log("[InfiniteHunt] Session check complete, waiting for data loading...");return}if(xt==="stopped"){n("stopped"),i("Infinite hunting stopped");return}xt==="running"&&!a&&(console.log("Active infinite hunt detected in backend, opening modal..."),k(!0),ae("running"))}else P.current&&(P.current=!1,z.current&&p(!1))}catch(tt){console.error("Failed to poll status:",tt),P.current&&(P.current=!1,z.current&&p(!1))}};if(Re(),r==="running"){const tt=setInterval(Re,2e3);return()=>clearInterval(tt)}},[a,r]);const Ue=F.useMemo(()=>$.filter(Re=>!Re.name.toLowerCase().includes("autonomous")).map(ure),[$]),It=F.useMemo(()=>e.workflowOrder.map(Re=>Ue.find(tt=>tt.id===Re)).filter(Boolean),[e.workflowOrder,Ue]),$e=F.useMemo(()=>Ue.filter(Re=>!e.workflowOrder.includes(Re.id)),[e.workflowOrder,Ue]),Qe=()=>{k(!1),Je(null),ae("running")},Ft=()=>{_&&x9(),Je(null),ue(""),ae("prompt"),k(!0)},qe=()=>{Je(null),ae("running"),c("latest"),he(Re=>St[0]?.id||Re||null);try{St.forEach(Re=>{if(!Te[Re.id]||Te[Re.id].length===0){const tt=localStorage.getItem(`agent_run_activities_${Re.id}`);if(tt){const dt=JSON.parse(tt);if(dt&&dt.length>0){const xt=dt.map(ut=>({id:ut.id||`${Re.id}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,text:ut.text,timestamp:ut.timestamp,activity_type:ut.type||"action",thread_title:ut.threadTitle,thread_status:ut.threadStatus}));ze(ut=>({...ut,[Re.id]:xt}))}}}})}catch(Re){console.warn("Failed to load logs from localStorage:",Re)}if(Q?.id&&r==="running"){const Re=Tl();Re.isPolling()||(console.log("[InfiniteHunt] Resuming activity polling when opening modal for run:",Q.id),pt.current=Q.id,Re.startActivityPolling(Q.id))}k(!0)},Ye=async()=>{fe(!1),window.electronAPI?.hideWindow?await window.electronAPI.hideWindow():window.close()},Ut=Re=>{ke(Re),Z(!0)},ye=()=>{Z(!1),ke(null)},xe=()=>V(!0),nt=()=>V(!1),ct=Re=>{nt(),ce(tt=>tt+1),_&&E(),Re&&setTimeout(async()=>{try{const tt=await Dl();tt&&_r.setAuthToken(tt);const xt=(await _r.listResumes()).find(ut=>ut.id===Re);xt&&(t(ut=>({...ut,resumeId:xt.id})),Ut(xt))}catch(tt){console.error("Failed to select uploaded resume:",tt)}},500)},wt=Re=>{Re&&(nr.setCurrentRunId(Re),window.dispatchEvent(new CustomEvent("jobhuntr:navigate",{detail:{view:"run",runId:Re}})),Qe())},St=F.useMemo(()=>{const Re=[],tt=new Set;return Q&&(Re.push(Q),tt.add(Q.id)),Oe.forEach(dt=>{tt.has(dt.id)||(Re.push(dt),tt.add(dt.id))}),Re},[Q,Oe]);F.useEffect(()=>{if(!St.length){vt&&he(null);return}(!vt||!St.some(Re=>Re.id===vt))&&he(St[0].id)},[St,vt]);const Le=F.useMemo(()=>St.find(Re=>Re.id===vt)||null,[St,vt]),we=Le?Te[Le.id]||[]:[],rt=e.perPlatformLogin||{},it=F.useCallback(Re=>Y.some(tt=>tt.workflow_id===Re&&(tt.applications_sent||0)>0),[Y]);F.useEffect(()=>{Q?.id&&he(Re=>Re||Q.id)},[Q?.id]),F.useEffect(()=>{(async()=>{try{p(!0);const[tt,dt,xt]=await Promise.all([Hr.getRun(),ln.listTemplates(),lc.listTemplates()]);let ut=tt;if(!tt)try{ut=await Hr.createConfig(qh,"idle")}catch(di){if(console.error("Failed to create infinite run",di),di?.status===409||di?.response?.status===409)try{const Vo=await Hr.getRun();Vo&&(ut=Vo)}catch(Vo){console.error("Failed to fetch existing infinite run",Vo)}}const qt={...qh,...Jd(ut)};t(qt),D.current=qt;const Nr=ut?.session_id||null;M(Nr),ut&&(n(ut.status||"idle"),i(ut.message||null),ut.active_agent_run_id&&(pt.current=ut.active_agent_run_id,console.log("[InfiniteHunt] Initial load - set activeWorkflowRunIdRef to:",ut.active_agent_run_id)),yt(ut.active_agent_run_id,ut.last_run_id));const Qn=await Lt();G(dt?.templates||dt||[]),re(xt||[]),T(Qn),y.current=!1,z.current=!0,P.current?console.log("[InfiniteHunt] Data loading complete, waiting for session check..."):(console.log("[InfiniteHunt] Data loading complete, session check already done, exiting loading state"),p(!1))}catch(tt){console.error("Failed to load infinite hunt data",tt),v("Unable to load your infinite hunt settings. Please try again in a moment."),y.current=!1,z.current=!0,p(!1),P.current=!1}})()},[Lt]),F.useEffect(()=>{if(r==="stopped"||r==="idle")return;const Re=setInterval(async()=>{try{const tt=await Hr.getStatus();if(console.log("[InfiniteHunt] Status payload:",tt),tt){if(tt.status){if(tt.status==="stopped"){n("stopped"),i(tt.message||"Infinite hunting stopped");return}n(tt.status),i(tt.message||null),console.log("[InfiniteHunt] Updating agent run details. Active:",tt.active_agent_run_id,"Last:",tt.last_run_id),tt.active_agent_run_id&&(pt.current=tt.active_agent_run_id,console.log("[InfiniteHunt] Set activeWorkflowRunIdRef to:",tt.active_agent_run_id)),yt(tt.active_agent_run_id,tt.last_run_id)}const dt=tt.session_id;dt&&dt!==b&&M(dt);const xt=await Lt();T(xt)}}catch(tt){console.error("Failed to poll infinite hunt status",tt)}},2e3);return()=>clearInterval(Re)},[b,Lt,r]);const yt=async(Re,tt)=>{if(console.log("[InfiniteHunt] updateAgentRunDetails called with:",Re),Re)try{const dt=await gr.getAgentRun(Re);if(console.log("[InfiniteHunt] Fetched run details:",dt),H(dt),console.log("[InfiniteHunt] Active run state updated to:",dt?.id),dt&&dt.status==="running"){console.log("[InfiniteHunt] Auto-resuming global polling for running hunt:",dt.id),pt.current=dt.id,ze(ut=>{if(ut[dt.id]&&ut[dt.id].length>0)return console.log("[InfiniteHunt] Keeping existing",ut[dt.id].length,"in-memory activities"),ut;try{const qt=localStorage.getItem(`agent_run_activities_${dt.id}`);if(qt){const Nr=JSON.parse(qt);if(Nr&&Nr.length>0){console.log("[InfiniteHunt] Loaded",Nr.length,"stored activities from localStorage");const Qn=Nr.map(di=>({id:di.id||`${dt.id}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,text:di.text,timestamp:di.timestamp,activity_type:di.type||"action",thread_title:di.threadTitle,thread_status:di.threadStatus}));return{...ut,[dt.id]:Qn}}}}catch(qt){console.error("[InfiniteHunt] Failed to load stored activities:",qt)}return ut});const xt=Tl();xt.setState({isHuntingStarted:!0,agentRunId:dt.id,sessionId:b||null,isPaused:!1,isAutoStopping:!1},dt.id),xt.isPolling()||(console.log("[InfiniteHunt] Starting activity polling for resumed hunt"),xt.startActivityPolling(dt.id))}}catch(dt){console.error("[InfiniteHunt] Failed to fetch active run details",dt)}else console.log("[InfiniteHunt] No active run ID, clearing active run"),H(null)},Tt=F.useCallback(async Re=>{const tt=Ue.find(xt=>xt.id===Re);if(!tt)return;const dt=e.blockedTemplateIds?.includes(Re);if(e.workflowOrder.includes(Re)){t(xt=>({...xt,workflowOrder:xt.workflowOrder.filter(ut=>ut!==Re)}));return}if(w.includes(Re)){j(xt=>xt.filter(ut=>ut!==Re));return}if(tt.requireSignIn)j(xt=>[...xt,Re]);else{if(dt)try{(await fetch(`${Rn}/api/infinite-runs/unblock-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await Dl()}`},body:JSON.stringify({agent_run_template_id:Re})})).ok||console.error("Failed to unblock template")}catch(xt){console.error("Failed to unblock template:",xt)}t(xt=>({...xt,workflowOrder:[...xt.workflowOrder,Re],blockedTemplateIds:dt?xt.blockedTemplateIds.filter(ut=>ut!==Re):xt.blockedTemplateIds}))}},[e.workflowOrder,e.blockedTemplateIds,w,Ue]),Yt=F.useCallback((Re,tt)=>{Re!==tt&&t(dt=>{const xt=[...dt.workflowOrder],ut=xt.indexOf(Re),qt=xt.indexOf(tt);return ut===-1||qt===-1?dt:(xt.splice(ut,1),xt.splice(qt,0,Re),{...dt,workflowOrder:xt})})},[]),Kt=async(Re,tt)=>{try{x(!0);const dt=tt||e,xt=await Hr.saveConfig(dt,Re);t(dt),D.current=dt,n(xt.status||"idle"),i(xt.message||null),v(null)}catch(dt){console.error("Failed to save infinite hunt config",dt),v("Unable to save settings. Please retry.")}finally{x(!1)}};F.useEffect(()=>{if(y.current){D.current=e;return}const Re=JSON.stringify(D.current),tt=JSON.stringify(e);if(Re!==tt)return D.current=e,B.current&&clearTimeout(B.current),B.current=setTimeout(async()=>{try{await Hr.saveConfig(e)}catch{}},1e3),()=>{B.current&&clearTimeout(B.current)}},[e]);const fr=F.useCallback(async Re=>{if(N[Re])return;const dt=$.find(qt=>qt.id===Re)?.name||Re,xt=cre[dt]||"https://www.linkedin.com/login";K(qt=>({...qt,[Re]:null})),L(qt=>({...qt,[Re]:!0}));const ut=Date.now();try{const qt=await fetch(`${rr}/api/browser/manual-launch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:xt})});if(!qt.ok){const Nr=await qt.json().catch(()=>({}));throw new Error(Nr?.detail||"Backend failed to open Chrome.")}t(Nr=>({...Nr,perPlatformLogin:{...Nr.perPlatformLogin,[Re]:{...Nr.perPlatformLogin?.[Re]||{},launched:!0,confirmed:!1}}}))}catch(qt){const Nr=qt instanceof Error?qt.message:"Failed to open Chrome with the JobHuntr profile.";K(Qn=>({...Qn,[Re]:Nr}))}finally{const qt=Date.now()-ut;qt<z1&&await new Promise(Nr=>setTimeout(Nr,z1-qt)),L(Nr=>({...Nr,[Re]:!1}))}},[$,N]),or=F.useCallback(async Re=>{if(!X[Re]){K(tt=>({...tt,[Re]:null})),se(tt=>({...tt,[Re]:!0}));try{const tt=await fetch(`${rr}/api/browser/close-all`,{method:"POST"});if(!tt.ok){const ut=await tt.json().catch(()=>({}));throw new Error(ut?.detail||"Failed to close Chrome windows.")}const dt=w.includes(Re),xt=e.blockedTemplateIds?.includes(Re);if(dt&&j(ut=>ut.filter(qt=>qt!==Re)),xt)try{(await fetch(`${Rn}/api/infinite-runs/unblock-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await Dl()}`},body:JSON.stringify({agent_run_template_id:Re})})).ok||console.error("Failed to unblock template")}catch(ut){console.error("Failed to unblock template:",ut)}t(ut=>({...ut,blockedTemplateIds:xt?ut.blockedTemplateIds.filter(qt=>qt!==Re):ut.blockedTemplateIds,perPlatformLogin:{...ut.perPlatformLogin,[Re]:{...ut.perPlatformLogin?.[Re]||{},confirmed:!0,confirmedAt:new Date().toISOString()}},workflowOrder:dt?[...ut.workflowOrder,Re]:ut.workflowOrder}))}catch(tt){const dt=tt instanceof Error?tt.message:"Failed to close Chrome windows for automation.";K(xt=>({...xt,[Re]:dt}))}finally{setTimeout(()=>{se(tt=>({...tt,[Re]:!1}))},z1)}}},[X,w,e.blockedTemplateIds]),mt=F.useCallback(async Re=>{try{const tt=e.blockedTemplateIds.filter(ut=>ut!==Re),dt=[...e.workflowOrder,Re];if(t(ut=>({...ut,blockedTemplateIds:tt,workflowOrder:dt})),!(await fetch(`${Rn}/api/infinite-runs/unblock-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await Dl()}`},body:JSON.stringify({agent_run_template_id:Re})})).ok)throw new Error("Failed to unblock template")}catch(tt){console.error("Failed to unblock template:",tt),t(dt=>({...dt,blockedTemplateIds:[...dt.blockedTemplateIds,Re],workflowOrder:dt.workflowOrder.filter(xt=>xt!==Re)}))}},[e.blockedTemplateIds,e.workflowOrder]),_t=async Re=>{const tt=Re?.trim(),dt=tt!==void 0?{...e,semanticInstructions:tt}:e;try{Me(!0),ve("Creating a new agent run..."),ae("creating"),k(!0),await Kt(void 0,dt),await Hr.start(),Tn.trackMixpanelEvent("started_infinite_hunt",{triggered_by:"manual"}).catch(()=>{});const xt=await Hr.getStatus(),ut=xt?.active_agent_run_id;if(n("running"),i(null),v(null),t(dt),Je(null),ae("running"),fe(!0),ut){console.log("[InfiniteHunt] Starting global activity polling for run:",ut),pt.current=ut;const qt=Tl();qt.setState({isHuntingStarted:!0,agentRunId:ut,sessionId:xt?.session_id||null,isPaused:!1,isAutoStopping:!1},ut),qt.startActivityPolling(ut)}else console.warn("[InfiniteHunt] No active agent run ID returned, polling not started");return!0}catch(xt){console.error("Failed to start infinite hunt",xt);const ut="Unable to start the infinite hunt, backend might be down.";return v(ut),Je(ut),ae("prompt"),!1}finally{Me(!1)}},Pt=async()=>{const Re=ee.trim();if(!Re){Je("Describe what you are looking for before starting.");return}await _t(Re)},Nt=async()=>{try{await Hr.pause(),n("paused"),i("Infinite hunting paused"),Pe(Q?.id,"Infinite hunt paused.")}catch(Re){console.error("Failed to pause infinite hunt",Re),v("Unable to pause the infinite hunt.")}},er=async()=>{try{await Hr.resume(),n("running"),i("Infinite hunting resumed"),Pe(Q?.id,"Infinite hunt resumed.")}catch(Re){console.error("Failed to resume infinite hunt",Re),v("Unable to resume the infinite hunt.")}},Ci=async()=>{let tt=!1;const dt=()=>{console.log("[InfiniteHunt] Stopping global activity polling");const ut=Tl();ut.stopActivityPolling(),Q?.id&&ut.setState({isHuntingStarted:!1,isPaused:!1,isAutoStopping:!1},Q.id),pt.current=null,n("stopped"),i("Infinite hunting stopped"),Pe(Q?.id,"Infinite hunt stopped."),H(null),ae("prompt"),ue(""),v(null),k(!1)},xt=setTimeout(()=>{console.warn("[InfiniteHunt] Stop request timed out after 10s, forcing cleanup"),tt=!0,dt()},1e4);try{await Hr.stop(),tt||(clearTimeout(xt),dt())}catch(ut){console.error("Failed to stop infinite hunt",ut),tt||(clearTimeout(xt),dt())}},Ti=e.workflowOrder.length>0,zn=e.autoGenerateATSResume?!!e.atsTemplateId:!!e.resumeId,Ho=()=>!e.autoGenerateATSResume||!je||je.limit===1/0?!1:je.remaining<=0;F.useEffect(()=>{const Re=async()=>{try{const tt=await sn.getUsage();Ie({limit:tt.ai_resume_limit,used:tt.ai_resume_used,remaining:tt.ai_resume_remaining})}catch(tt){console.error("Failed to fetch AI resume usage:",tt)}};e.autoGenerateATSResume&&Re()},[e.autoGenerateATSResume]),F.useEffect(()=>{const Re=async xt=>{console.log(`[InfiniteHunt] ${xt}, stopping infinite hunt`);const ut=()=>{console.log("[InfiniteHunt] Stopping global activity polling");const qt=Tl();qt.stopActivityPolling(),Q?.id&&qt.setState({isHuntingStarted:!1,isPaused:!1,isAutoStopping:!1},Q.id),pt.current=null,n("stopped"),i(`Stopped: ${xt}`),Pe(Q?.id,`Infinite hunt stopped: ${xt}.`),H(null),ae("prompt"),ue(""),v(null)};try{await Hr.stop(),ut()}catch(qt){console.error(`[InfiniteHunt] Failed to stop infinite hunt after ${xt}:`,qt),ut()}},tt=async xt=>{const qt=xt.detail?.errorDetails;r==="running"&&(qt?.error_code==="AI_RESUME_LIMIT_REACHED"?await Re("AI resume limit reached"):qt?.error_code==="SUBSCRIPTION_LIMIT_REACHED"&&await Re("Application limit reached"))},dt=async xt=>{r==="running"&&await Re("Daily limit reached")};return window.addEventListener("showSubscriptionModal",tt),window.addEventListener("showDailyLimitModal",dt),()=>{window.removeEventListener("showSubscriptionModal",tt),window.removeEventListener("showDailyLimitModal",dt)}},[r,Q?.id]);const Zd=Ti&&zn&&!Ho(),Wo=F.useMemo(()=>Ti?zn?Ho()?`AI resume limit reached (${je?.used}/${je?.limit}). Upgrade plan to continue.`:null:"Select a resume or ATS template in the Automation Profile section":"Select at least one agent run to start",[Ti,zn,je,e.autoGenerateATSResume]);function Xd(Re){e.workflowOrder.includes(Re)&&S(Re)}function $a(Re,tt){Re.preventDefault(),R&&R!==tt&&Yt(R,tt)}function s0(Re){Re.preventDefault(),S(null)}if(d){const Re=(tt,dt,xt)=>s.jsx("div",{style:{width:tt,height:dt,borderRadius:"8px",background:"linear-gradient(90deg, #e2e8f0 0%, #f8fafc 50%, #e2e8f0 100%)",backgroundSize:"200% 100%",animation:"skeletonPulse 1.5s ease-in-out infinite",...xt}});return s.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8fafc",padding:"48px",display:"flex",justifyContent:"center"},children:[s.jsx("style",{children:`
            @keyframes skeletonPulse {
              0% { background-position: 200% 0; }
              100% { background-position: -200% 0; }
            }
          `}),s.jsxs("div",{style:{width:"100%",maxWidth:"920px",display:"flex",flexDirection:"column",gap:"32px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{flex:1},children:[Re("40%",32,{marginBottom:"8px"}),Re("70%",20)]}),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[Re(120,36),Re(120,36)]})]}),s.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"32px",boxShadow:"0px 20px 45px rgba(15, 23, 42, 0.08)",display:"flex",flexDirection:"column",gap:"24px"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[Re("35%",24),Re("80%",16),Re("60%",16),s.jsxs("div",{style:{display:"flex",gap:"12px"},children:[Re(140,38),Re(140,38)]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:"16px"},children:[...Array(4)].map((tt,dt)=>s.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[Re("60%",18),Re("80%",12),Re("40%",12)]},dt))}),s.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"16px",padding:"20px",backgroundColor:"#f1f5f9",display:"flex",flexDirection:"column",gap:"16px"},children:[Re("45%",18),[...Array(2)].map((tt,dt)=>s.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px"},children:[Re("50%",16,{marginBottom:"8px"}),Re("70%",12),s.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px"},children:[Re("40%",32),Re("35%",32)]})]},dt))]})]})]})]})}return s.jsxs("div",{style:{minHeight:"100%",padding:"32px 0 48px",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px"},children:[s.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:s.jsxs("div",{style:{width:"100%",maxWidth:"960px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 24px"},children:[s.jsxs("div",{children:[s.jsx(wr,{style:{marginBottom:"8px"},children:"Infinite Hunting"}),s.jsx(Ct,{style:{color:"#475569",margin:0},children:"Configure always-on hunting sequences that restart themselves even if this window closes."})]}),!_&&s.jsx("div",{style:{display:"flex",gap:"12px"},children:s.jsx(ot,{variant:"primary",onClick:qe,children:"View last infinite session"})})]})}),h&&s.jsx("div",{style:{width:"100%",maxWidth:"840px",border:"1px solid #fecdd3",backgroundColor:"#fff1f2",padding:"16px",borderRadius:"8px",color:"#be123c"},children:h}),s.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:s.jsxs("div",{style:{width:"100%",maxWidth:"840px",backgroundColor:"#ffffff",borderRadius:"16px",boxShadow:"0px 20px 45px rgba(15, 23, 42, 0.08)",padding:"32px",display:"flex",flexDirection:"column",gap:"24px"},children:[s.jsx(sre,{config:e,atsTemplates:U,onConfigChange:Re=>{t(tt=>({...tt,...Re}))},onResumePreview:Ut,onResumeUpload:xe,resumeRefreshTrigger:ie,isOnboarding:_}),(!_||A)&&s.jsxs("div",{children:[s.jsx(are,{templates:$e,pendingTemplateIds:w,blockedTemplateIds:e.blockedTemplateIds||[],hoveredAgentRunId:J,agentRunModeLabels:H8,agentRunPlatformLabels:W8,loginStatuses:rt,launchingAgentRuns:N,closingAgentRuns:X,agentRunErrors:te,templateHasHistory:it,onHoverChange:ne,onToggleAgentRun:Tt,onLaunchLogin:fr,onConfirmLogin:or,onUnblockTemplate:mt,hideStartButton:!0}),s.jsx(ore,{templates:It,config:e,loginStatuses:rt,launchingAgentRuns:N,closingAgentRuns:X,agentRunErrors:te,hoveredAgentRunId:J,agentRunModeLabels:H8,agentRunPlatformLabels:W8,autonomousLLMSettings:null,templateHasHistory:it,onHoverChange:ne,onToggleAgentRun:Tt,onDragStart:Xd,onDragOver:$a,onDrop:s0,onLaunchLogin:fr,onConfirmLogin:or}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#f8fafc",borderRadius:"8px",marginTop:"16px"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx(dr,{style:{fontWeight:500,color:"#334155",margin:0},children:"D.A.M.N. Mode"}),s.jsx("span",{style:{fontSize:"10px",fontWeight:500,color:"#059669",backgroundColor:"#d1fae5",padding:"2px 6px",borderRadius:"4px"},children:"Recommended"})]}),s.jsx(dr,{style:{color:"#64748b",margin:0,fontSize:"12px"},children:"Done Applying, Market's Nonsense - auto-start infinite hunt after 30 mins idle"})]}),s.jsxs("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:e.autoInfiniteHuntOn??!0,onChange:Re=>{Re.target.checked?t(tt=>({...tt,autoInfiniteHuntOn:!0})):ht(!0)},style:{opacity:0,width:0,height:0}}),s.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:e.autoInfiniteHuntOn??!0?f.colors.primary.main:f.colors.neutral[300],borderRadius:"24px",transition:"background-color 0.2s"}}),s.jsx("span",{style:{position:"absolute",top:"2px",left:e.autoInfiniteHuntOn??!0?"22px":"2px",width:"20px",height:"20px",backgroundColor:"#ffffff",borderRadius:"50%",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:"#f8fafc",borderRadius:"8px",marginTop:"12px"},children:[s.jsxs("div",{children:[s.jsx(dr,{style:{fontWeight:500,color:"#334155",margin:0},children:"Headless Mode (Beta)"}),s.jsx(dr,{style:{color:"#64748b",margin:0,fontSize:"12px"},children:"Run browser in background without visible window"})]}),s.jsxs("label",{style:{position:"relative",display:"inline-block",width:"44px",height:"24px",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:e.headlessOn??!1,onChange:Re=>t(tt=>({...tt,headlessOn:Re.target.checked})),style:{opacity:0,width:0,height:0}}),s.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:e.headlessOn?f.colors.primary.main:f.colors.neutral[300],borderRadius:"24px",transition:"background-color 0.2s"}}),s.jsx("span",{style:{position:"absolute",top:"2px",left:e.headlessOn?"22px":"2px",width:"20px",height:"20px",backgroundColor:"#ffffff",borderRadius:"50%",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",marginTop:"16px",gap:"8px"},children:[!Zd&&Wo&&s.jsx(dr,{style:{color:f.colors.accent.warningDarkest,textAlign:"right",fontWeight:f.typography.fontWeight.medium},children:Wo}),s.jsxs(ot,{variant:"primary",disabled:!Zd,onClick:Ft,style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("span",{style:{fontSize:"18px",lineHeight:1},children:""}),"Start Infinite Hunt"]})]})]})]})}),s.jsx(lre,{show:a,stage:oe,promptInput:ee,modalError:ge,modalProcessingMessage:Ce,modalRunList:St,sessionFilter:o,sessionFilterOptions:Ze,sessionLabelMap:Ge,selectedModalRunId:vt,selectedRun:Le,selectedRunLogEntries:we,status:r,statusMessage:l,isCreatingRun:me,onClose:Qe,onSessionFilterChange:c,onPromptChange:Re=>{ue(Re),ge&&Je(null)},onPromptSubmit:Pt,onSelectRun:he,onOpenRunPage:wt,onPause:Nt,onResume:er,onStop:Ci}),s.jsx(La,{resume:pe,isOpen:_e,onClose:ye}),s.jsx(Da,{isOpen:q,onClose:nt,onUploadComplete:ct}),be&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"420px",boxShadow:"0 20px 60px rgba(15, 23, 42, 0.25)",display:"flex",flexDirection:"column",gap:"16px"},children:[s.jsx(ki,{style:{margin:0},children:"Keep JobHuntr running?"}),s.jsx(Ct,{style:{color:"#475569",margin:0},children:"JobHuntr can keep applying 24/7 even if this window is closed. Would you like to close the JobHuntr window now?"}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx(ot,{variant:"secondary",onClick:()=>fe(!1),children:"Keep window open"}),s.jsx(ot,{variant:"primary",onClick:Ye,children:"Close window"})]})]})}),Ae&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:s.jsxs("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"32px",width:"90%",maxWidth:"480px",boxShadow:"0 20px 60px rgba(15, 23, 42, 0.25)",display:"flex",flexDirection:"column",gap:"20px"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"8px"},children:s.jsx("span",{role:"img","aria-label":"warning",children:""})}),s.jsx(ki,{style:{margin:0,color:"#dc2626"},children:"The Job Market is Brutal Right Now"})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.jsxs(Ct,{style:{color:"#475569",margin:0,lineHeight:1.6},children:["Every hour you're not applying, ",s.jsx("strong",{children:"thousands of candidates"})," are flooding the market. Companies are getting"," ",s.jsx("strong",{children:"500+ applications per role"})," within the first 24 hours."]}),s.jsxs(Ct,{style:{color:"#475569",margin:0,lineHeight:1.6},children:["Turning this off means you'll ",s.jsx("strong",{children:"miss fresh postings"})," while you sleep, eat, or live your life. The early bird doesn't just get the worm - it gets the"," ",s.jsx("strong",{children:"interview"}),"."]}),s.jsx(Ct,{style:{color:"#991b1b",margin:0,fontWeight:600,lineHeight:1.6},children:"Are you absolutely sure you want to give your competition a head start?"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"8px"},children:[s.jsx(ot,{variant:"secondary",onClick:async()=>{const Re={...e,autoInfiniteHuntOn:!1};t(Re),ht(!1);try{await Hr.saveConfig(Re)}catch(tt){console.error("Failed to save D.A.M.N. mode setting:",tt)}},style:{color:"#64748b"},children:"Turn it off anyway"}),s.jsx(ot,{variant:"primary",onClick:()=>ht(!1),style:{backgroundColor:"#059669"},children:"Keep D.A.M.N. Mode ON"})]})]})})]})},fre=1,hre=5,V8="#54b848",pre={width:36,height:36,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.15s ease",fontSize:18,fontWeight:700},gre=({isOpen:e,onClose:t,onSubmit:r,submitting:n})=>{const[l,i]=F.useState(null),[d,p]=F.useState(null),[g,x]=F.useState(null),y=F.useMemo(()=>Array.from({length:hre-fre+1},(_,A)=>A),[]);if(!e)return null;const w=l??d??null,j=async _=>{try{x(null),p(_),await r(_)}catch(A){console.error("Failed to submit NPS score",A),x(A instanceof Error?A.message:"Something went wrong")}};return s.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:12e3,padding:"16px"},children:s.jsxs("div",{style:{backgroundColor:f.colors.secondary.main,borderRadius:f.borderRadius.xl,boxShadow:f.shadows.lg,maxWidth:520,width:"100%",padding:f.spacing["2xl"]},onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{children:[s.jsx("p",{style:{margin:0,fontSize:f.typography.fontSize.sm,color:f.colors.neutral[500],textTransform:"uppercase",letterSpacing:"0.08em",fontWeight:600},children:"Quick pulse"}),s.jsx("h2",{style:{margin:"6px 0 0",fontSize:f.typography.fontSize.h3,fontWeight:700,color:f.colors.neutral[900]},children:"How likely are you to recommend this product to a friend or colleague?"})]}),s.jsx("div",{style:{marginTop:f.spacing.xl,display:"flex",gap:8,justifyContent:"center",flexWrap:"nowrap",overflowX:"auto",paddingBottom:4},children:y.map(_=>{const A=w!==null?_<=w:!1,E=d===_;return s.jsx("div",{onMouseEnter:()=>i(_),onMouseLeave:()=>i(null),onClick:()=>j(_),style:{...pre,backgroundColor:A?V8:"#e5e7eb",color:A?"#ffffff":f.colors.neutral[600],transform:l===_?"translateY(-1px)":"translateY(0)",boxShadow:E?`0 0 0 2px ${V8}33`:"0 1px 2px rgba(0,0,0,0.08)",opacity:A?1:.45},children:""},_)})}),g&&s.jsx("p",{style:{marginTop:f.spacing.sm,color:f.colors.accent.error},children:g}),n&&s.jsx("p",{style:{marginTop:f.spacing.sm,color:f.colors.neutral[500],fontSize:f.typography.fontSize.sm},children:"Saving your feedback"}),s.jsx("div",{style:{marginTop:f.spacing.lg,display:"flex",justifyContent:"flex-end"},children:s.jsx("button",{type:"button",onClick:t,style:{background:"none",border:"none",color:f.colors.neutral[500],cursor:"pointer",padding:0,fontSize:f.typography.fontSize.sm,textDecoration:"underline"},children:"Close"})})]})})},mre=({isOpen:e,onClose:t,trustpilotUrl:r})=>e?s.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.55)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:12010,padding:16},children:s.jsxs("div",{style:{background:f.colors.secondary.main,borderRadius:f.borderRadius.xl,boxShadow:f.shadows.lg,maxWidth:460,width:"100%",padding:f.spacing["2xl"],position:"relative"},onClick:n=>n.stopPropagation(),children:[s.jsx("p",{style:{margin:0,fontSize:f.typography.fontSize.sm,color:f.colors.accent.successDark,textTransform:"uppercase",letterSpacing:"0.08em",fontWeight:700},children:"Thank you!"}),s.jsx("h3",{style:{margin:"6px 0 12px",fontSize:f.typography.fontSize.h3,fontWeight:700,color:f.colors.neutral[900],lineHeight:1.3},children:"Mind sharing a few words on Trustpilot?"}),s.jsx("p",{style:{margin:"0 0 16px",color:f.colors.neutral[600],lineHeight:f.typography.lineHeight.relaxed},children:"Your review helps other job seekers discover JobHuntr. It only takes a minute."}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,marginTop:f.spacing.lg},children:[s.jsx("button",{type:"button",onClick:t,style:{background:"none",border:"none",color:f.colors.neutral[500],cursor:"pointer",padding:"10px 8px",fontSize:f.typography.fontSize.sm,textDecoration:"underline",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:"Sorry, next time!"}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:s.jsxs("button",{type:"button",style:{display:"inline-flex",alignItems:"center",gap:8,backgroundColor:f.colors.accent.success,color:"#fff",padding:"10px 16px",borderRadius:f.borderRadius.md,fontWeight:600,textDecoration:"none",boxShadow:"0 8px 20px rgba(5, 150, 105, 0.28)",transition:"transform 0.12s ease, box-shadow 0.12s ease",cursor:"pointer",border:"none"},onClick:()=>{try{const n=window.electronAPI;n?.openExternalUrl?n.openExternalUrl(r):window.open(r,"_blank","noopener,noreferrer")}catch(n){console.error("Failed to open Trustpilot link",n),window.open(r,"_blank","noopener,noreferrer")}finally{t()}},onMouseEnter:n=>{n.currentTarget.style.transform="translateY(-1px)",n.currentTarget.style.boxShadow="0 10px 22px rgba(5, 150, 105, 0.32)"},onMouseLeave:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 8px 20px rgba(5, 150, 105, 0.28)"},children:[s.jsx("span",{children:"Open Trustpilot"}),s.jsx("span",{"aria-hidden":"true",style:{display:"inline-flex",alignItems:"center"},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M11 3h6v6m-1.5-5.5L9 10m0-7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})]})]})}):null;function yre(e={}){const{pollingInterval:t=2e3,enablePolling:r=!0}=e,[n,l]=F.useState(null),[i,d]=F.useState(null),[p,g]=F.useState({}),[x,y]=F.useState(!0),[w,j]=F.useState(null),_=F.useRef(null),A=F.useRef(!1),E=F.useRef(!1);F.useEffect(()=>{if(E.current)return;(async()=>{try{const G=await lc.listTemplates(),$={};G.forEach(re=>{$[re.id]=re}),g($),E.current=!0}catch(G){console.error("[useInfiniteHuntMetadata] Failed to fetch templates:",G)}})()},[]);const P=F.useCallback(async()=>{try{const U=await Hr.getRun();d(U)}catch(U){console.error("[useInfiniteHuntMetadata] Failed to fetch config:",U)}},[]);F.useEffect(()=>{A.current||(A.current=!0,P())},[P]);const z=F.useCallback(async()=>{try{const U=await Hr.getMetadata();l(U),j(null)}catch(U){console.error("[useInfiniteHuntMetadata] Failed to fetch metadata:",U),j(U instanceof Error?U.message:"Failed to fetch infinite hunt metadata")}finally{y(!1)}},[]),B=F.useCallback(async()=>{y(!0),await z()},[z]),D=F.useCallback(async()=>{await P()},[P]);return F.useEffect(()=>{z()},[z]),F.useEffect(()=>{if(r)return _.current=setInterval(()=>{z()},t),()=>{_.current&&(clearInterval(_.current),_.current=null)}},[r,t,z]),F.useEffect(()=>{if(!n)return;const U=n.current_agent_run?.job_stats??{queued:0,skipped:0,submitted:0,failed:0},G=n.cumulative_job_stats??{queued:0,skipped:0,submitted:0,failed:0},$=i?.selected_ordered_run_template_ids??[],re=n.agent_runs_by_template??{},Q=Object.entries(re).map(([c,h])=>({id:c,name:c,runs:h})),H=new Set(Q.map(c=>c.name)),Y=$.map(c=>p[c]?.name??null).filter(c=>c!==null&&!H.has(c)).map(c=>({id:c,name:c,runs:0})),T=[...Q,...Y],o={is_running:n.is_running,started_at:n.started_at,ended_at:n.ended_at,ordered_templates:T,cumulative_job_stats:{queued:U.queued+G.queued,skipped:U.skipped+G.skipped,submitted:U.submitted+G.submitted,failed:U.failed+G.failed},auto_hunt_status:n.auto_hunt_status??null};window.electronAPI?.updateTrayMetadata&&window.electronAPI.updateTrayMetadata(o)},[n,i,p]),{metadata:n,config:i,templateMap:p,isLoading:x,error:w,refresh:B,refreshConfig:D}}const vre=()=>{const e=new CustomEvent("showReadOnlyModal",{detail:{studentName:"John Smith",attemptedAction:"POST /api/ats/templates/upload",response:null}});window.dispatchEvent(e)};typeof window<"u"&&(window.testReadOnlyModal=vre);const B1="linkedin-apply",xre="https://www.trustpilot.com/review/jobhuntr.fyi",G8=e=>e?`nps_suppress_first_session_${e}`:null,bre=()=>{const[e,t]=F.useState("overview"),[r,n]=F.useState(!1),[l,i]=F.useState(void 0),[d,p]=F.useState(void 0),[g,x]=F.useState(!1),[y,w]=F.useState(!1),[j,_]=F.useState(!0),[A,E]=F.useState(""),[P,z]=F.useState(null),[B,D]=F.useState(!1),[U,G]=F.useState(null),[$,re]=F.useState(!1),[Q,H]=F.useState(!1),[Y,T]=F.useState(!1),[o,c]=F.useState(!1),[h,v]=F.useState(void 0),[b,M]=F.useState(void 0),[R,S]=F.useState({isOpen:!1,title:"",message:""}),[a,k]=F.useState({isOpen:!1,studentName:"",attemptedAction:""}),[N,L]=F.useState({isOpen:!1,errorDetails:null}),[X,se]=F.useState({isOpen:!1}),[te,K]=F.useState(!1),[J,ne]=F.useState(!1),[oe,ae]=F.useState(!1),[ee,ue]=F.useState(!1),[Ce,ve]=F.useState(!1),[ge,Je]=F.useState(!1),[Te,ze]=F.useState(void 0),[vt,he]=F.useState(!1),[me,Me]=F.useState(null),[pe,ke]=F.useState(null);yre({enablePolling:y,pollingInterval:5e3}),F.useEffect(()=>{Tn.initialize(),Tn.trackEvent("app_opened")},[]),F.useEffect(()=>{window.electronAPI&&window.electronAPI.onUpdateAvailable(ye=>{ze(ye.version),Je(!0),Tn.trackEvent("update_available",{version:ye.version})})},[]),F.useEffect(()=>{y&&!d&&(nr.getCurrentRunId()||p(B1))},[y,d]),F.useEffect(()=>{const ye=new URLSearchParams(window.location.search),xe=ye.get("view"),nt=ye.get("runId");if(xe==="run"&&nt&&y){const ct=new URL(window.location.href);ct.searchParams.delete("view"),ct.searchParams.delete("runId"),window.history.replaceState({},"",ct.toString()),p(void 0),t("run")}},[y]);const _e=F.useCallback(ye=>{if(!ye)return{firstName:void 0,lastName:void 0};const xe=ye.user_metadata||{},nt=xe.first_name||xe.firstName||xe.given_name||xe.name?.split?.(" ")?.[0],ct=xe.last_name||xe.lastName||xe.family_name;return{firstName:nt?String(nt):void 0,lastName:ct?String(ct):void 0}},[]),Z=F.useCallback(ye=>{const{firstName:xe,lastName:nt}=_e(ye);v(xe),M(nt)},[_e]),q=F.useCallback(ye=>{if(!ye)return!1;const xe=ye.user_metadata||{},nt=ye.id||ye.user_id||ye.sub||null,ct=G8(nt);return ct&&localStorage.getItem(ct)?!1:typeof xe.nps_score!="number"},[]);F.useEffect(()=>{(async()=>{if(await new Promise(xe=>setTimeout(xe,300)),mr.isAuthenticated()){const xe=mr.getCurrentUser(),nt=mr.getCurrentUserEmail();if(w(!0),E(nt),z(xe),Z(xe),D(xe?.is_coach||!1),xe?.is_coach){const ct=sessionStorage.getItem("coachViewingClient");if(ct)try{const wt=JSON.parse(ct);G(wt.clientId)}catch(wt){console.error("Error parsing coach viewing context:",wt),sessionStorage.removeItem("coachViewingClient")}}Tn.startLivePing()}else w(!1),t("auth"),K(!1);_(!1),ue(!0)})()},[Z,q]),F.useEffect(()=>{const ye=()=>{const xe=mr.getCurrentUser();Z(xe)};return window.addEventListener("userProfileUpdated",ye),()=>window.removeEventListener("userProfileUpdated",ye)},[Z]);const V=F.useCallback(()=>{Tn.trackEvent("user_logged_out"),Tn.reset(),mr.logout(),w(!1),E(""),z(null),D(!1),G(null),v(void 0),M(void 0),K(!1),ne(!1),ue(!1),ve(!1)},[]),ie=F.useCallback(()=>{re(!0)},[]),ce=F.useCallback(()=>{re(!1)},[]),be=F.useCallback(()=>{ve(!1)},[]),fe=F.useCallback(()=>{ve(!1)},[]);F.useEffect(()=>{if(!y)return;const xe=setInterval(()=>{mr.isAuthenticated()||(V(),t("auth"))},60*1e3);return()=>clearInterval(xe)},[y,V]),F.useEffect(()=>{const ye=xe=>{const nt=xe.shiftKey&&(xe.metaKey||xe.ctrlKey)&&(xe.key==="D"||xe.key==="d"||xe.code==="KeyD"),ct=xe.shiftKey&&(xe.metaKey||xe.ctrlKey)&&(xe.key==="C"||xe.key==="c"||xe.code==="KeyC"),wt=xe.shiftKey&&(xe.metaKey||xe.ctrlKey)&&(xe.key==="A"||xe.key==="a"||xe.code==="KeyA");nt&&(xe.preventDefault(),H(St=>!St),T(St=>!St)),ct&&(xe.preventDefault(),ve(!0)),wt&&(xe.preventDefault(),c(St=>!St))};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[]),F.useEffect(()=>{!y||j||!ee||D8()||q(P)&&K(!0)},[y,j,ee,P,q]),F.useEffect(()=>{const ye=xe=>{const{studentName:nt,attemptedAction:ct}=xe.detail;k({isOpen:!0,studentName:nt,attemptedAction:ct})};return window.addEventListener("showReadOnlyModal",ye),()=>window.removeEventListener("showReadOnlyModal",ye)},[]),F.useEffect(()=>{const ye=xe=>{const{errorDetails:nt}=xe.detail;L({isOpen:!0,errorDetails:nt})};return window.addEventListener("showSubscriptionModal",ye),()=>{window.removeEventListener("showSubscriptionModal",ye)}},[]),F.useEffect(()=>{const ye=xe=>{const{errorDetails:nt}=xe.detail;se({isOpen:!0,dailyLimit:nt?.daily_limit,dailyUsed:nt?.daily_used,dailyRemaining:nt?.daily_remaining,nextReset:nt?.next_reset})};return window.addEventListener("showDailyLimitModal",ye),()=>{window.removeEventListener("showDailyLimitModal",ye)}},[]),F.useEffect(()=>{(()=>{window.electronAPI&&(window.electronAPI.onTaskUpdate(nt=>{const ct=U8.getState().updateActivity;ct(nt.activity_id,{status:nt.status,progress:nt.progress||0,currentStep:nt.current_step,result:nt.result,error:nt.error,endTime:nt.status==="completed"||nt.status==="error"?Date.now():void 0})}),window.electronAPI.onStatusUpdate(nt=>{const ct=U8.getState().updateWorkerStatus;ct({status:nt.worker_status,queueSize:nt.queue_size||0})}),window.electronAPI.onMainConsoleLog?.(nt=>{const ct=nt.args.join(" ");nt.type==="error"?console.error("[MAIN]",ct):nt.type==="warn"?console.warn("[MAIN]",ct):console.log("[MAIN]",ct)}),window.electronAPI.onShowQuitConfirmation?.(()=>{he(!0)}),window.electronAPI.onNavigateToInfiniteHunting?.(()=>{t("overview"),setTimeout(()=>{t("infinite-hunting")},50)}))})();const xe=nt=>{if(nt?.detail?.view){const{view:ct,templateId:wt,step:St,runId:Le}=nt.detail;Me(ct==="cover-letter"&&(wt||St)?{templateId:wt,step:St}:null),ct==="run"&&Le?p(Le):ct==="run"&&!Le&&p(void 0),t(ct)}};return window.addEventListener("jobhuntr:navigate",xe),()=>{window.electronAPI&&(window.electronAPI.removeAllListeners("task-update"),window.electronAPI.removeAllListeners("status-update"),window.electronAPI.removeAllListeners("show-quit-confirmation")),window.removeEventListener("jobhuntr:navigate",xe)}},[]);const Ae=F.useCallback(()=>{t("agents"),i(void 0)},[]),ht=F.useCallback(ye=>{i(ye),p(void 0),t("run")},[]),je=F.useCallback(()=>{n(!r)},[r]),Ie=F.useCallback(async(ye,xe)=>{try{const nt=await fetch(`${rr}/api/auth/save-jwt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwt_token:ye,user_info:xe})});if(!nt.ok)throw new Error(`HTTP ${nt.status}: ${nt.statusText}`);const ct=await nt.json();if(ct.success)return!0;throw console.error("Failed to save JWT token in backend:",ct.message),new Error(`Failed to save JWT token: ${ct.message}`)}catch(nt){throw console.error("Failed to send JWT token to backend:",nt),new Error("Failed to connect to backend. Please ensure the backend server is running.")}},[]),pt=F.useCallback(async ye=>{Tn.trackEvent("coach_selected_client",{clientId:ye});try{const xe=await mr.getValidToken(),nt="https://democratized-service-gateway-production.up.railway.app",ct=await fetch(`${nt}/api/coach/client/${ye}`,{headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"}});if(!ct.ok)throw new Error("Failed to fetch client details");const St=(await ct.json()).client,Le=Yt=>Yt.charAt(0).toUpperCase()+Yt.slice(1).toLowerCase(),we=St.first_name?Le(St.first_name):"",rt=St.last_name?Le(St.last_name):"",it=`${we} ${rt}`.trim()||St.email,yt=await fetch(`${nt}/api/coach/client/${ye}/student-token`,{headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"}});if(!yt.ok)throw new Error("Failed to fetch student token");const Tt=await yt.json();sessionStorage.setItem("coachViewingClient",JSON.stringify({clientId:St.user_id,clientEmail:St.email,clientName:it,coachEmail:A,coachMode:!0,studentToken:Tt.student_token})),G(ye),t("run")}catch(xe){console.error("Error selecting client:",xe),S({isOpen:!0,title:"Error",message:"Failed to load student data. Please try again."})}},[A]),Ne=F.useCallback(()=>{Tn.trackEvent("coach_returned_to_dashboard"),sessionStorage.removeItem("coachViewingClient"),G(null)},[]),Ge=F.useCallback(()=>{const ye=sessionStorage.getItem("coachViewingClient");return ye?JSON.parse(ye):null},[]),Ot=F.useMemo(()=>Ge(),[Ge,U]),Oe=(ye,xe)=>{ye==="runs"&&xe?.openCreateModal&&ke({openCreateModal:!0}),t(ye)},Ze=F.useCallback(ye=>{nr.clearCurrentRun(),nr.setCurrentRunId(ye),p(void 0),t("run")},[p,t]),Lt=F.useCallback(()=>{nr.clearCurrentRun(),p(B1),x(!1),ke({openCreateModal:!0}),t("runs")},[ke,t,x,p]),Pe=F.useCallback(()=>t("runs"),[t]),Ve=F.useCallback(async ye=>{ae(!0);try{await mr.updateProfile({npsScore:ye});const xe=P?{...P,user_metadata:{...P.user_metadata||{},nps_score:ye}}:null;z(xe),K(!1),ye>=4&&ne(!0)}catch(xe){throw console.error("Failed to save NPS score:",xe),xe}finally{ae(!1)}},[P]),Bt=F.useCallback(()=>{K(!1)},[]),Fe=F.useCallback(()=>{ne(!1)},[]),Xe=F.useCallback(()=>{he(!1),window.electronAPI?.respondToQuitConfirmation&&window.electronAPI.respondToQuitConfirmation("quit")},[]),Et=F.useCallback(async()=>{he(!1),t("infinite-hunting");try{if(!(await Hr.getMetadata()).is_running){const xe=await Hr.getRun(),ct={...Jd(xe),headlessOn:!0};await Hr.saveConfig(ct),await Hr.start(),await new Promise(wt=>setTimeout(wt,5e3))}window.electronAPI?.respondToQuitConfirmation&&window.electronAPI.respondToQuitConfirmation("run-invisible")}catch(ye){console.error("Failed to handle infinite hunt:",ye)}},[]),Be=F.useCallback(()=>{he(!1),window.electronAPI?.respondToQuitConfirmation&&window.electronAPI.respondToQuitConfirmation("cancel")},[]),Ue=s.jsx(gte,{userEmail:A,clientName:Ot?.clientName,userFirstName:h,userLastName:b,onViewRuns:Pe,onStartNewRun:Lt,onResumeRun:Ze,onLaunchInfiniteHunt:()=>t("infinite-hunting")}),It=F.useCallback(async ye=>{const xe=await fetch(`${rr}/api/browser/profile/ensure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_email:ye||A||null})});if(!xe.ok)throw new Error(`Failed to ensure JobHuntr Chrome profile (status ${xe.status||"unknown"})`);try{return await xe.json()}catch{return null}},[A]);F.useEffect(()=>{let ye=!0;return(async()=>{if(!A){ye&&ve(!1);return}try{await It(A);const nt=`?user_email=${encodeURIComponent(A)}`,ct=await fetch(`${rr}/api/browser/profile/status${nt}`);if(!ct.ok)return;const wt=await ct.json();ye&&(!wt?.chrome_available||!wt?.profile_exists?ve(!0):ve(!1))}catch(nt){console.warn("Unable to verify Chrome requirements:",nt)}})(),()=>{ye=!1}},[A,It]);const $e=async(ye,xe)=>{try{gr.setAuthToken(ye);const wt=`Standard Job Hunt - ${new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`,St=await gr.createAgentRun({run_name:wt,workflow_id:B1,generate_cover_letter:!0,send_connection_request:!1,use_ats_optimized:!1});return St&&St.id?(nr.setCurrentRunId(St.id),t("run"),await It(xe),St.id):(console.error("Failed to create default agent run: Invalid response"),t("runs"),null)}catch(nt){return console.error("Error creating default agent run:",nt),t("runs"),null}},Qe=async ye=>{try{gr.setAuthToken(ye);const xe=await gr.listAgentRuns({page:1,page_size:1});if(xe.runs&&xe.runs.length>0){const nt=xe.runs[0];return nr.setCurrentRunId(nt.id),nt}else return null}catch(xe){return console.error("Error getting latest workflow:",xe),null}},Ft=F.useCallback(async(ye,xe)=>{ue(!1);try{const nt=xe.email||"";an.setAuthToken(ye),await Ie(ye,xe);try{console.log("[App] Running login reset mechanism for infinite runs");const{infiniteHuntApiService:wt}=await Qt(async()=>{const{infiniteHuntApiService:Le}=await Promise.resolve().then(()=>yte);return{infiniteHuntApiService:Le}},void 0,import.meta.url),{getGlobalHuntingManager:St}=await Qt(async()=>{const{getGlobalHuntingManager:Le}=await Promise.resolve().then(()=>yQ);return{getGlobalHuntingManager:Le}},void 0,import.meta.url);await wt.resetOnLogin(),St().clearAllStoredStates(),console.log("[App] Successfully completed login reset mechanism")}catch(wt){console.error("[App] Error during infinite run reset (non-critical):",wt)}let ct=!0;try{ct=(await an.getApplicationHistory()).length>0}catch(wt){console.error("Failed to fetch application history during login:",wt)}if(await It(nt),w(!0),E(nt),z(xe),D(xe.is_coach||!1),re(!1),Z(xe),Tn.setAuthToken(ye),Tn.identify(xe.email||xe.user_id,{email:xe.email,is_coach:xe.is_coach||!1,first_name:xe.first_name,last_name:xe.last_name}),Tn.trackEvent("user_logged_in",{user_type:xe.is_coach?"coach":"job_seeker"}),Tn.startLivePing(),!xe.is_coach)if(D8())console.log("[App] New user in onboarding mode, navigating to infinite-hunting"),K(!1),ne(!1),ue(!0),t("infinite-hunting");else{const wt=await Qe(ye),St=xe.id||xe.user_id||xe.sub||null,Le=G8(St),we=ct||!!wt;!we&&Le?localStorage.setItem(Le,"true"):we&&Le&&localStorage.removeItem(Le),K(q(xe)&&we),ne(!1),ue(!0),ct?(t("overview"),wt||console.warn("No existing workflows found for user with application history. Consider reviewing account data.")):wt?t("run"):await $e(ye,nt)||(console.error("Failed to create default workflow for new user - falling back to runs page"),t("runs"))}}catch(nt){console.error("Backend connection failed during login:",nt);const ct=nt instanceof Error?nt.message.includes("timeout")?"The backend server is not responding. Please check if the JobHuntr backend is running.":nt.message.includes("connect")||nt.message.includes("Failed to fetch")||nt.message.includes("ensure JobHuntr Chrome profile")?"Cannot reach the JobHuntr backend. Please start the backend before signing in.":`Backend error: ${nt.message}`:"Unknown backend connection error";S({isOpen:!0,title:"Backend Connection Failed",message:ct})}},[Z,Ie,It,q]),qe=F.useCallback(()=>!0,[]);F.useEffect(()=>{y&&e!=="auth"&&Tn.trackPageView(e)},[e,y]);const Ye=()=>{switch(e){case"overview":return Ue;case"infinite-hunting":return s.jsx(dre,{});case"run":return s.jsx(NQ,{initialAgentDescription:l,selectedAgentId:d,forceCreateNewRun:g,onNewRunCreated:()=>x(!1),showLinkedInPreview:Y});case"runs":return s.jsx(UQ,{navParams:pe,onClearNavParams:()=>ke(null),onNavigateToRun:Ze,onCreateNewRun:Lt});case"about-me":return s.jsx(ire,{});case"user":return s.jsx(GQ,{});case"ats":return s.jsx(hee,{});case"cover-letter":return s.jsx(Wee,{navParams:me,onClearNavParams:()=>Me(null)});case"linkedin":return s.jsx(Kee,{});case"job-tracker":return s.jsx(rte,{});case"job-board":return Ue;case"outreach":return s.jsx(ate,{});case"auth":return s.jsx(L8,{onLogin:Ft});default:return Ue}},Ut=ye=>{Tn.trackEvent("update_initiated",{version:ye}),ze(ye),Je(!0)};return s.jsx(Dte,{children:s.jsxs("div",{className:"app",children:[!ge&&s.jsx(Zte,{onUpdateNow:Ut}),ge&&s.jsx(Qte,{version:Te,onComplete:()=>{Je(!1)},onCancel:()=>{Je(!1)}}),j&&s.jsx(Lte,{}),!j&&Ce&&!ge&&s.jsx(tre,{onComplete:be,onSkip:fe,userEmail:A||void 0}),!j&&!y&&!$&&!Ce&&!ge&&s.jsx(L8,{onLogin:Ft,onSwitchToCoachAuth:ie,onShowChromiumSetup:()=>ve(!0),setupModalOpen:Ce}),!j&&!y&&$&&s.jsx(Rte,{onLogin:Ft,onBackToJobSeeker:ce}),!j&&y&&e!=="auth"&&!qe()&&s.jsx(Ate,{userEmail:A,onLogout:V}),!j&&y&&B&&!U&&s.jsx(Nte,{onSelectClient:pt,onLogout:V,userEmail:A}),!j&&y&&e!=="auth"&&qe()&&(!B||U)&&s.jsx(jte,{currentView:e,onViewChange:t,onAgentGenerated:Ae,isSpotlightMinimized:r,onSpotlightToggle:je,onNewAgent:ht,onLogout:V,userEmail:A,clientContext:Ot,onReturnToCoachDashboard:Ne,onNavigateWithParams:Oe,children:s.jsx(Wr,{mode:"wait",children:Ye()})}),s.jsx(Wr,{children:y&&r&&s.jsx(jt.div,{className:"spotlight-minimized-icon",initial:{opacity:0,scale:0,x:50,y:50},animate:{opacity:1,scale:1,x:0,y:0},exit:{opacity:0,scale:0,x:50,y:50},transition:{type:"spring",stiffness:300,damping:30,duration:.3},onClick:je,children:s.jsx("div",{className:"minimized-logo",children:s.jsx("img",{src:"./logo.png",alt:"JobHuntr",style:{width:"36px",height:"36px",objectFit:"contain"}})})})}),s.jsx(Vte,{isOpen:R.isOpen,onClose:()=>S(ye=>({...ye,isOpen:!1})),title:R.title,message:R.message,icon:"network"}),s.jsx(Gte,{isOpen:a.isOpen,onClose:()=>k(ye=>({...ye,isOpen:!1})),studentName:a.studentName,attemptedAction:a.attemptedAction}),s.jsx(Na,{isOpen:N.isOpen,onClose:()=>L(ye=>({...ye,isOpen:!1})),errorDetails:N.errorDetails}),s.jsx(Kte,{isOpen:X.isOpen,onClose:()=>se(ye=>({...ye,isOpen:!1})),dailyLimit:X.dailyLimit,dailyUsed:X.dailyUsed,dailyRemaining:X.dailyRemaining,nextReset:X.nextReset}),s.jsx(gre,{isOpen:te&&y&&!j,onClose:Bt,onSubmit:Ve,submitting:oe}),s.jsx(mre,{isOpen:J,onClose:Fe,trustpilotUrl:xre}),s.jsx(Jte,{isOpen:vt,onQuitAnyway:Xe,onRunInvisibleAndClose:Et,onCancel:Be}),Q&&y&&s.jsx(rre,{mode:"floating",onClose:()=>H(!1)}),o&&s.jsx(nre,{onClose:()=>c(!1)})]})})},zp=document.getElementById("root");if(!zp)throw new Error("Root element not found");const wre=vN.createRoot(zp);try{wre.render(s.jsx(bre,{}))}catch(e){console.error("Error rendering app:",e),zp&&(zp.innerHTML=`
      <div style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0a0a0a;
        color: #ffffff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      ">
        <h1 style="color: #ff3b30; margin-bottom: 1rem; font-size: 20px; font-weight: 600;">
          React Failed to Load
        </h1>
        <p style="color: #a0a0a0; font-size: 13px;">React is not working. Check console for errors.</p>
        <pre style="
          background: #1a1a1a;
          padding: 1rem;
          border-radius: 0.5rem;
          overflow: auto;
          font-size: 11px;
          margin-top: 1rem;
          color: #666666;
        ">${e?.toString()}</pre>
      </div>
    `)}export{rr as L};
